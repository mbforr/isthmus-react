!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=50)}([function(e,t,n){e.exports=n(55)()},function(e,t,n){"use strict";e.exports=n(51)},function(e,t,n){"use strict";n.r(t);var r=n(1),i=n(0),o=n.n(i),a=o.a.shape({trySubscribe:o.a.func.isRequired,tryUnsubscribe:o.a.func.isRequired,notifyNestedSubs:o.a.func.isRequired,isSubscribed:o.a.func.isRequired}),s=o.a.shape({subscribe:o.a.func.isRequired,dispatch:o.a.func.isRequired,getState:o.a.func.isRequired});function u(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"store",n=arguments[1]||t+"Subscription",i=function(e){function i(n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r));return o[t]=n.store,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,e),i.prototype.getChildContext=function(){var e;return(e={})[t]=this[t],e[n]=null,e},i.prototype.render=function(){return r.Children.only(this.props.children)},i}(r.Component);return i.propTypes={store:s.isRequired,children:o.a.element.isRequired},i.childContextTypes=((e={})[t]=s.isRequired,e[n]=a,e),i.displayName="Provider",i}var l=u(),c=n(42),p=n.n(c),h=n(4),f=n.n(h);var d=null,m={notify:function(){}};var _=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store=t,this.parentSub=n,this.onStateChange=r,this.unsubscribe=null,this.listeners=m}return e.prototype.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},e.prototype.notifyNestedSubs=function(){this.listeners.notify()},e.prototype.isSubscribed=function(){return Boolean(this.unsubscribe)},e.prototype.trySubscribe=function(){var e,t;this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.onStateChange):this.store.subscribe(this.onStateChange),this.listeners=(e=[],t=[],{clear:function(){t=d,e=d},notify:function(){for(var n=e=t,r=0;r<n.length;r++)n[r]()},subscribe:function(n){var r=!0;return t===e&&(t=e.slice()),t.push(n),function(){r&&e!==d&&(r=!1,t===e&&(t=e.slice()),t.splice(t.indexOf(n),1))}}}))},e.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=m)},e}(),y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var v=0,g={};function b(){}function x(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.getDisplayName,u=void 0===o?function(e){return"ConnectAdvanced("+e+")"}:o,l=i.methodName,c=void 0===l?"connectAdvanced":l,h=i.renderCountProp,d=void 0===h?void 0:h,m=i.shouldHandleStateChanges,x=void 0===m||m,w=i.storeKey,E=void 0===w?"store":w,T=i.withRef,k=void 0!==T&&T,C=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(i,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef"]),M=E+"Subscription",P=v++,A=((t={})[E]=s,t[M]=a,t),S=((n={})[M]=a,n);return function(t){f()("function"==typeof t,"You must pass a component to the function returned by connect. Instead received "+JSON.stringify(t));var n=t.displayName||t.name||"Component",i=u(n),o=y({},C,{getDisplayName:u,methodName:c,renderCountProp:d,shouldHandleStateChanges:x,storeKey:E,withRef:k,displayName:i,wrappedComponentName:n,WrappedComponent:t}),a=function(n){function a(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,n.call(this,e,t));return r.version=P,r.state={},r.renderCount=0,r.store=e[E]||t[E],r.propsMode=Boolean(e[E]),r.setWrappedInstance=r.setWrappedInstance.bind(r),f()(r.store,'Could not find "'+E+'" in either the context or props of "'+i+'". Either wrap the root component in a <Provider>, or explicitly pass "'+E+'" as a prop to "'+i+'".'),r.initSelector(),r.initSubscription(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,n),a.prototype.getChildContext=function(){var e,t=this.propsMode?null:this.subscription;return(e={})[M]=t||this.context[M],e},a.prototype.componentDidMount=function(){x&&(this.subscription.trySubscribe(),this.selector.run(this.props),this.selector.shouldComponentUpdate&&this.forceUpdate())},a.prototype.componentWillReceiveProps=function(e){this.selector.run(e)},a.prototype.shouldComponentUpdate=function(){return this.selector.shouldComponentUpdate},a.prototype.componentWillUnmount=function(){this.subscription&&this.subscription.tryUnsubscribe(),this.subscription=null,this.notifyNestedSubs=b,this.store=null,this.selector.run=b,this.selector.shouldComponentUpdate=!1},a.prototype.getWrappedInstance=function(){return f()(k,"To access the wrapped instance, you need to specify { withRef: true } in the options argument of the "+c+"() call."),this.wrappedInstance},a.prototype.setWrappedInstance=function(e){this.wrappedInstance=e},a.prototype.initSelector=function(){var t=e(this.store.dispatch,o);this.selector=function(e,t){var n={run:function(r){try{var i=e(t.getState(),r);(i!==n.props||n.error)&&(n.shouldComponentUpdate=!0,n.props=i,n.error=null)}catch(e){n.shouldComponentUpdate=!0,n.error=e}}};return n}(t,this.store),this.selector.run(this.props)},a.prototype.initSubscription=function(){if(x){var e=(this.propsMode?this.props:this.context)[M];this.subscription=new _(this.store,e,this.onStateChange.bind(this)),this.notifyNestedSubs=this.subscription.notifyNestedSubs.bind(this.subscription)}},a.prototype.onStateChange=function(){this.selector.run(this.props),this.selector.shouldComponentUpdate?(this.componentDidUpdate=this.notifyNestedSubsOnComponentDidUpdate,this.setState(g)):this.notifyNestedSubs()},a.prototype.notifyNestedSubsOnComponentDidUpdate=function(){this.componentDidUpdate=void 0,this.notifyNestedSubs()},a.prototype.isSubscribed=function(){return Boolean(this.subscription)&&this.subscription.isSubscribed()},a.prototype.addExtraProps=function(e){if(!(k||d||this.propsMode&&this.subscription))return e;var t=y({},e);return k&&(t.ref=this.setWrappedInstance),d&&(t[d]=this.renderCount++),this.propsMode&&this.subscription&&(t[M]=this.subscription),t},a.prototype.render=function(){var e=this.selector;if(e.shouldComponentUpdate=!1,e.error)throw e.error;return Object(r.createElement)(t,this.addExtraProps(e.props))},a}(r.Component);return a.WrappedComponent=t,a.displayName=i,a.childContextTypes=S,a.contextTypes=A,a.propTypes=A,p()(a,t)}}var w=Object.prototype.hasOwnProperty;function E(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function T(e,t){if(E(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!w.call(t,n[i])||!E(e[n[i]],t[n[i]]))return!1;return!0}var k=n(22);n(12);function C(e){return function(t,n){var r=e(t,n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function M(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function P(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=M(e);var i=r(t,n);return"function"==typeof i&&(r.mapToProps=i,r.dependsOnOwnProps=M(i),i=r(t,n)),i},r}}var A=[function(e){return"function"==typeof e?P(e):void 0},function(e){return e?void 0:C(function(e){return{dispatch:e}})},function(e){return e&&"object"==typeof e?C(function(t){return Object(k.bindActionCreators)(e,t)}):void 0}];var S=[function(e){return"function"==typeof e?P(e):void 0},function(e){return e?void 0:C(function(){return{}})}],O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function I(e,t,n){return O({},n,e,t)}var R=[function(e){return"function"==typeof e?function(e){return function(t,n){n.displayName;var r=n.pure,i=n.areMergedPropsEqual,o=!1,a=void 0;return function(t,n,s){var u=e(t,n,s);return o?r&&i(u,a)||(a=u):(o=!0,a=u),a}}}(e):void 0},function(e){return e?void 0:function(){return I}}];function j(e,t,n,r){return function(i,o){return n(e(i,o),t(r,o),o)}}function L(e,t,n,r,i){var o=i.areStatesEqual,a=i.areOwnPropsEqual,s=i.areStatePropsEqual,u=!1,l=void 0,c=void 0,p=void 0,h=void 0,f=void 0;function d(i,u){var d,m,_=!a(u,c),y=!o(i,l);return l=i,c=u,_&&y?(p=e(l,c),t.dependsOnOwnProps&&(h=t(r,c)),f=n(p,h,c)):_?(e.dependsOnOwnProps&&(p=e(l,c)),t.dependsOnOwnProps&&(h=t(r,c)),f=n(p,h,c)):y?(d=e(l,c),m=!s(d,p),p=d,m&&(f=n(p,h,c)),f):f}return function(i,o){return u?d(i,o):(p=e(l=i,c=o),h=t(r,c),f=n(p,h,c),u=!0,f)}}function z(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,i=t.initMergeProps,o=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),a=n(e,o),s=r(e,o),u=i(e,o);return(o.pure?L:j)(a,s,u,e,o)}var D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function B(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function N(e,t,n){for(var r=t.length-1;r>=0;r--){var i=t[r](e);if(i)return i}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function q(e,t){return e===t}var F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.connectHOC,n=void 0===t?x:t,r=e.mapStateToPropsFactories,i=void 0===r?S:r,o=e.mapDispatchToPropsFactories,a=void 0===o?A:o,s=e.mergePropsFactories,u=void 0===s?R:s,l=e.selectorFactory,c=void 0===l?z:l;return function(e,t,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=o.pure,l=void 0===s||s,p=o.areStatesEqual,h=void 0===p?q:p,f=o.areOwnPropsEqual,d=void 0===f?T:f,m=o.areStatePropsEqual,_=void 0===m?T:m,y=o.areMergedPropsEqual,v=void 0===y?T:y,g=B(o,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),b=N(e,i,"mapStateToProps"),x=N(t,a,"mapDispatchToProps"),w=N(r,u,"mergeProps");return n(c,D({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:b,initMapDispatchToProps:x,initMergeProps:w,pure:l,areStatesEqual:h,areOwnPropsEqual:d,areStatePropsEqual:_,areMergedPropsEqual:v},g))}}();n.d(t,"Provider",function(){return l}),n.d(t,"createProvider",function(){return u}),n.d(t,"connectAdvanced",function(){return x}),n.d(t,"connect",function(){return F})},function(e,t,n){"use strict";var r=function(){};e.exports=r},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i,o,a,s){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,o,a,s],c=0;(u=new Error(t.replace(/%s/g,function(){return l[c++]}))).name="Invariant Violation"}throw u.framesToPop=1,u}}},function(e,t,n){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(52)},function(e,t,n){
/*!
 * CARTO.js https://carto.com/
 * Version: 4.1.11
 * 
 */
var r;window,r=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=145)}([function(e,t,n){var r;(function(){var n=this,i=n._,o=Array.prototype,a=Object.prototype,s=Function.prototype,u=o.push,l=o.slice,c=a.toString,p=a.hasOwnProperty,h=Array.isArray,f=Object.keys,d=s.bind,m=Object.create,_=function(){},y=function(e){return e instanceof y?e:this instanceof y?void(this._wrapped=e):new y(e)};void 0!==e&&e.exports&&(t=e.exports=y),t._=y,y.VERSION="1.8.3";var v=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)}}return function(){return e.apply(t,arguments)}},g=function(e,t,n){return null==e?y.identity:y.isFunction(e)?v(e,t,n):y.isObject(e)?y.matcher(e):y.property(e)};y.iteratee=function(e,t){return g(e,t,1/0)};var b=function(e,t){return function(n){var r=arguments.length;if(r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],a=e(o),s=a.length,u=0;u<s;u++){var l=a[u];t&&void 0!==n[l]||(n[l]=o[l])}return n}},x=function(e){if(!y.isObject(e))return{};if(m)return m(e);_.prototype=e;var t=new _;return _.prototype=null,t},w=function(e){return function(t){return null==t?void 0:t[e]}},E=Math.pow(2,53)-1,T=w("length"),k=function(e){var t=T(e);return"number"==typeof t&&t>=0&&t<=E};function C(e){function t(t,n,r,i,o,a){for(;o>=0&&o<a;o+=e){var s=i?i[o]:o;r=n(r,t[s],s,t)}return r}return function(n,r,i,o){r=v(r,o,4);var a=!k(n)&&y.keys(n),s=(a||n).length,u=e>0?0:s-1;return arguments.length<3&&(i=n[a?a[u]:u],u+=e),t(n,r,i,a,u,s)}}y.each=y.forEach=function(e,t,n){var r,i;if(t=v(t,n),k(e))for(r=0,i=e.length;r<i;r++)t(e[r],r,e);else{var o=y.keys(e);for(r=0,i=o.length;r<i;r++)t(e[o[r]],o[r],e)}return e},y.map=y.collect=function(e,t,n){t=g(t,n);for(var r=!k(e)&&y.keys(e),i=(r||e).length,o=Array(i),a=0;a<i;a++){var s=r?r[a]:a;o[a]=t(e[s],s,e)}return o},y.reduce=y.foldl=y.inject=C(1),y.reduceRight=y.foldr=C(-1),y.find=y.detect=function(e,t,n){var r;if(void 0!==(r=k(e)?y.findIndex(e,t,n):y.findKey(e,t,n))&&-1!==r)return e[r]},y.filter=y.select=function(e,t,n){var r=[];return t=g(t,n),y.each(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r},y.reject=function(e,t,n){return y.filter(e,y.negate(g(t)),n)},y.every=y.all=function(e,t,n){t=g(t,n);for(var r=!k(e)&&y.keys(e),i=(r||e).length,o=0;o<i;o++){var a=r?r[o]:o;if(!t(e[a],a,e))return!1}return!0},y.some=y.any=function(e,t,n){t=g(t,n);for(var r=!k(e)&&y.keys(e),i=(r||e).length,o=0;o<i;o++){var a=r?r[o]:o;if(t(e[a],a,e))return!0}return!1},y.contains=y.includes=y.include=function(e,t,n,r){return k(e)||(e=y.values(e)),("number"!=typeof n||r)&&(n=0),y.indexOf(e,t,n)>=0},y.invoke=function(e,t){var n=l.call(arguments,2),r=y.isFunction(t);return y.map(e,function(e){var i=r?t:e[t];return null==i?i:i.apply(e,n)})},y.pluck=function(e,t){return y.map(e,y.property(t))},y.where=function(e,t){return y.filter(e,y.matcher(t))},y.findWhere=function(e,t){return y.find(e,y.matcher(t))},y.max=function(e,t,n){var r,i,o=-1/0,a=-1/0;if(null==t&&null!=e)for(var s=0,u=(e=k(e)?e:y.values(e)).length;s<u;s++)(r=e[s])>o&&(o=r);else t=g(t,n),y.each(e,function(e,n,r){((i=t(e,n,r))>a||i===-1/0&&o===-1/0)&&(o=e,a=i)});return o},y.min=function(e,t,n){var r,i,o=1/0,a=1/0;if(null==t&&null!=e)for(var s=0,u=(e=k(e)?e:y.values(e)).length;s<u;s++)(r=e[s])<o&&(o=r);else t=g(t,n),y.each(e,function(e,n,r){((i=t(e,n,r))<a||i===1/0&&o===1/0)&&(o=e,a=i)});return o},y.shuffle=function(e){for(var t,n=k(e)?e:y.values(e),r=n.length,i=Array(r),o=0;o<r;o++)(t=y.random(0,o))!==o&&(i[o]=i[t]),i[t]=n[o];return i},y.sample=function(e,t,n){return null==t||n?(k(e)||(e=y.values(e)),e[y.random(e.length-1)]):y.shuffle(e).slice(0,Math.max(0,t))},y.sortBy=function(e,t,n){return t=g(t,n),y.pluck(y.map(e,function(e,n,r){return{value:e,index:n,criteria:t(e,n,r)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index}),"value")};var M=function(e){return function(t,n,r){var i={};return n=g(n,r),y.each(t,function(r,o){var a=n(r,o,t);e(i,r,a)}),i}};y.groupBy=M(function(e,t,n){y.has(e,n)?e[n].push(t):e[n]=[t]}),y.indexBy=M(function(e,t,n){e[n]=t}),y.countBy=M(function(e,t,n){y.has(e,n)?e[n]++:e[n]=1}),y.toArray=function(e){return e?y.isArray(e)?l.call(e):k(e)?y.map(e,y.identity):y.values(e):[]},y.size=function(e){return null==e?0:k(e)?e.length:y.keys(e).length},y.partition=function(e,t,n){t=g(t,n);var r=[],i=[];return y.each(e,function(e,n,o){(t(e,n,o)?r:i).push(e)}),[r,i]},y.first=y.head=y.take=function(e,t,n){if(null!=e)return null==t||n?e[0]:y.initial(e,e.length-t)},y.initial=function(e,t,n){return l.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},y.last=function(e,t,n){if(null!=e)return null==t||n?e[e.length-1]:y.rest(e,Math.max(0,e.length-t))},y.rest=y.tail=y.drop=function(e,t,n){return l.call(e,null==t||n?1:t)},y.compact=function(e){return y.filter(e,y.identity)};var P=function(e,t,n,r){for(var i=[],o=0,a=r||0,s=T(e);a<s;a++){var u=e[a];if(k(u)&&(y.isArray(u)||y.isArguments(u))){t||(u=P(u,t,n));var l=0,c=u.length;for(i.length+=c;l<c;)i[o++]=u[l++]}else n||(i[o++]=u)}return i};function A(e){return function(t,n,r){n=g(n,r);for(var i=T(t),o=e>0?0:i-1;o>=0&&o<i;o+=e)if(n(t[o],o,t))return o;return-1}}function S(e,t,n){return function(r,i,o){var a=0,s=T(r);if("number"==typeof o)e>0?a=o>=0?o:Math.max(o+s,a):s=o>=0?Math.min(o+1,s):o+s+1;else if(n&&o&&s)return r[o=n(r,i)]===i?o:-1;if(i!=i)return(o=t(l.call(r,a,s),y.isNaN))>=0?o+a:-1;for(o=e>0?a:s-1;o>=0&&o<s;o+=e)if(r[o]===i)return o;return-1}}y.flatten=function(e,t){return P(e,t,!1)},y.without=function(e){return y.difference(e,l.call(arguments,1))},y.uniq=y.unique=function(e,t,n,r){y.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=g(n,r));for(var i=[],o=[],a=0,s=T(e);a<s;a++){var u=e[a],l=n?n(u,a,e):u;t?(a&&o===l||i.push(u),o=l):n?y.contains(o,l)||(o.push(l),i.push(u)):y.contains(i,u)||i.push(u)}return i},y.union=function(){return y.uniq(P(arguments,!0,!0))},y.intersection=function(e){for(var t=[],n=arguments.length,r=0,i=T(e);r<i;r++){var o=e[r];if(!y.contains(t,o)){for(var a=1;a<n&&y.contains(arguments[a],o);a++);a===n&&t.push(o)}}return t},y.difference=function(e){var t=P(arguments,!0,!0,1);return y.filter(e,function(e){return!y.contains(t,e)})},y.zip=function(){return y.unzip(arguments)},y.unzip=function(e){for(var t=e&&y.max(e,T).length||0,n=Array(t),r=0;r<t;r++)n[r]=y.pluck(e,r);return n},y.object=function(e,t){for(var n={},r=0,i=T(e);r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},y.findIndex=A(1),y.findLastIndex=A(-1),y.sortedIndex=function(e,t,n,r){for(var i=(n=g(n,r,1))(t),o=0,a=T(e);o<a;){var s=Math.floor((o+a)/2);n(e[s])<i?o=s+1:a=s}return o},y.indexOf=S(1,y.findIndex,y.sortedIndex),y.lastIndexOf=S(-1,y.findLastIndex),y.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),o=0;o<r;o++,e+=n)i[o]=e;return i};var O=function(e,t,n,r,i){if(!(r instanceof t))return e.apply(n,i);var o=x(e.prototype),a=e.apply(o,i);return y.isObject(a)?a:o};y.bind=function(e,t){if(d&&e.bind===d)return d.apply(e,l.call(arguments,1));if(!y.isFunction(e))throw new TypeError("Bind must be called on a function");var n=l.call(arguments,2),r=function(){return O(e,r,t,this,n.concat(l.call(arguments)))};return r},y.partial=function(e){var t=l.call(arguments,1),n=function(){for(var r=0,i=t.length,o=Array(i),a=0;a<i;a++)o[a]=t[a]===y?arguments[r++]:t[a];for(;r<arguments.length;)o.push(arguments[r++]);return O(e,n,this,this,o)};return n},y.bindAll=function(e){var t,n,r=arguments.length;if(r<=1)throw new Error("bindAll must be passed function names");for(t=1;t<r;t++)e[n=arguments[t]]=y.bind(e[n],e);return e},y.memoize=function(e,t){var n=function(r){var i=n.cache,o=""+(t?t.apply(this,arguments):r);return y.has(i,o)||(i[o]=e.apply(this,arguments)),i[o]};return n.cache={},n},y.delay=function(e,t){var n=l.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},y.defer=y.partial(y.delay,y,1),y.throttle=function(e,t,n){var r,i,o,a=null,s=0;n||(n={});var u=function(){s=!1===n.leading?0:y.now(),a=null,o=e.apply(r,i),a||(r=i=null)};return function(){var l=y.now();s||!1!==n.leading||(s=l);var c=t-(l-s);return r=this,i=arguments,c<=0||c>t?(a&&(clearTimeout(a),a=null),s=l,o=e.apply(r,i),a||(r=i=null)):a||!1===n.trailing||(a=setTimeout(u,c)),o}},y.debounce=function(e,t,n){var r,i,o,a,s,u=function(){var l=y.now()-a;l<t&&l>=0?r=setTimeout(u,t-l):(r=null,n||(s=e.apply(o,i),r||(o=i=null)))};return function(){o=this,i=arguments,a=y.now();var l=n&&!r;return r||(r=setTimeout(u,t)),l&&(s=e.apply(o,i),o=i=null),s}},y.wrap=function(e,t){return y.partial(t,e)},y.negate=function(e){return function(){return!e.apply(this,arguments)}},y.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},y.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},y.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},y.once=y.partial(y.before,2);var I=!{toString:null}.propertyIsEnumerable("toString"),R=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function j(e,t){var n=R.length,r=e.constructor,i=y.isFunction(r)&&r.prototype||a,o="constructor";for(y.has(e,o)&&!y.contains(t,o)&&t.push(o);n--;)(o=R[n])in e&&e[o]!==i[o]&&!y.contains(t,o)&&t.push(o)}y.keys=function(e){if(!y.isObject(e))return[];if(f)return f(e);var t=[];for(var n in e)y.has(e,n)&&t.push(n);return I&&j(e,t),t},y.allKeys=function(e){if(!y.isObject(e))return[];var t=[];for(var n in e)t.push(n);return I&&j(e,t),t},y.values=function(e){for(var t=y.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=e[t[i]];return r},y.mapObject=function(e,t,n){t=g(t,n);for(var r,i=y.keys(e),o=i.length,a={},s=0;s<o;s++)a[r=i[s]]=t(e[r],r,e);return a},y.pairs=function(e){for(var t=y.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},y.invert=function(e){for(var t={},n=y.keys(e),r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},y.functions=y.methods=function(e){var t=[];for(var n in e)y.isFunction(e[n])&&t.push(n);return t.sort()},y.extend=b(y.allKeys),y.extendOwn=y.assign=b(y.keys),y.findKey=function(e,t,n){t=g(t,n);for(var r,i=y.keys(e),o=0,a=i.length;o<a;o++)if(t(e[r=i[o]],r,e))return r},y.pick=function(e,t,n){var r,i,o={},a=e;if(null==a)return o;y.isFunction(t)?(i=y.allKeys(a),r=v(t,n)):(i=P(arguments,!1,!1,1),r=function(e,t,n){return t in n},a=Object(a));for(var s=0,u=i.length;s<u;s++){var l=i[s],c=a[l];r(c,l,a)&&(o[l]=c)}return o},y.omit=function(e,t,n){if(y.isFunction(t))t=y.negate(t);else{var r=y.map(P(arguments,!1,!1,1),String);t=function(e,t){return!y.contains(r,t)}}return y.pick(e,t,n)},y.defaults=b(y.allKeys,!0),y.create=function(e,t){var n=x(e);return t&&y.extendOwn(n,t),n},y.clone=function(e){return y.isObject(e)?y.isArray(e)?e.slice():y.extend({},e):e},y.tap=function(e,t){return t(e),e},y.isMatch=function(e,t){var n=y.keys(t),r=n.length;if(null==e)return!r;for(var i=Object(e),o=0;o<r;o++){var a=n[o];if(t[a]!==i[a]||!(a in i))return!1}return!0};var L=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof y&&(e=e._wrapped),t instanceof y&&(t=t._wrapped);var i=c.call(e);if(i!==c.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t}var o="[object Array]"===i;if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var a=e.constructor,s=t.constructor;if(a!==s&&!(y.isFunction(a)&&a instanceof a&&y.isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1}r=r||[];for(var u=(n=n||[]).length;u--;)if(n[u]===e)return r[u]===t;if(n.push(e),r.push(t),o){if((u=e.length)!==t.length)return!1;for(;u--;)if(!L(e[u],t[u],n,r))return!1}else{var l,p=y.keys(e);if(u=p.length,y.keys(t).length!==u)return!1;for(;u--;)if(l=p[u],!y.has(t,l)||!L(e[l],t[l],n,r))return!1}return n.pop(),r.pop(),!0};y.isEqual=function(e,t){return L(e,t)},y.isEmpty=function(e){return null==e||(k(e)&&(y.isArray(e)||y.isString(e)||y.isArguments(e))?0===e.length:0===y.keys(e).length)},y.isElement=function(e){return!(!e||1!==e.nodeType)},y.isArray=h||function(e){return"[object Array]"===c.call(e)},y.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},y.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){y["is"+e]=function(t){return c.call(t)==="[object "+e+"]"}}),y.isArguments(arguments)||(y.isArguments=function(e){return y.has(e,"callee")}),"object"!=typeof Int8Array&&(y.isFunction=function(e){return"function"==typeof e||!1}),y.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},y.isNaN=function(e){return y.isNumber(e)&&e!==+e},y.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===c.call(e)},y.isNull=function(e){return null===e},y.isUndefined=function(e){return void 0===e},y.has=function(e,t){return null!=e&&p.call(e,t)},y.noConflict=function(){return n._=i,this},y.identity=function(e){return e},y.constant=function(e){return function(){return e}},y.noop=function(){},y.property=w,y.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},y.matcher=y.matches=function(e){return e=y.extendOwn({},e),function(t){return y.isMatch(t,e)}},y.times=function(e,t,n){var r=Array(Math.max(0,e));t=v(t,n,1);for(var i=0;i<e;i++)r[i]=t(i);return r},y.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},y.now=Date.now||function(){return(new Date).getTime()};var z={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},D=y.invert(z),B=function(e){var t=function(t){return e[t]},n="(?:"+y.keys(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,t):e}};y.escape=B(z),y.unescape=B(D),y.result=function(e,t,n){var r=null==e?void 0:e[t];return void 0===r&&(r=n),y.isFunction(r)?r.call(e):r};var N=0;y.uniqueId=function(e){var t=++N+"";return e?e+t:t},y.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var q=/(.)^/,F={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},U=/\\|'|\r|\n|\u2028|\u2029/g,V=function(e){return"\\"+F[e]};y.template=function(e,t,n){!t&&n&&(t=n),t=y.defaults({},t,y.templateSettings);var r=RegExp([(t.escape||q).source,(t.interpolate||q).source,(t.evaluate||q).source].join("|")+"|$","g"),i=0,o="__p+='";e.replace(r,function(t,n,r,a,s){return o+=e.slice(i,s).replace(U,V),i=s+t.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),t}),o+="';\n",t.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var a=new Function(t.variable||"obj","_",o)}catch(e){throw e.source=o,e}var s=function(e){return a.call(this,e,y)},u=t.variable||"obj";return s.source="function("+u+"){\n"+o+"}",s},y.chain=function(e){var t=y(e);return t._chain=!0,t};var W=function(e,t){return e._chain?y(t).chain():t};y.mixin=function(e){y.each(y.functions(e),function(t){var n=y[t]=e[t];y.prototype[t]=function(){var e=[this._wrapped];return u.apply(e,arguments),W(this,n.apply(y,e))}})},y.mixin(y),y.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=o[e];y.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],W(this,n)}}),y.each(["concat","join","slice"],function(e){var t=o[e];y.prototype[e]=function(){return W(this,t.apply(this._wrapped,arguments))}}),y.prototype.value=function(){return this._wrapped},y.prototype.valueOf=y.prototype.toJSON=y.prototype.value,y.prototype.toString=function(){return""+this._wrapped},void 0===(r=function(){return y}.apply(t,[]))||(e.exports=r)}).call(this)},function(e,t,n){(function(r){var i,o,a;a="object"==typeof self&&self.self==self&&self||"object"==typeof r&&r.global==r&&r,i=[n(0),n(16),t],void 0===(o=function(e,t,n){a.Backbone=function(e,t,n,r){var i=e.Backbone,o=Array.prototype.slice;t.VERSION="1.2.3",t.$=r,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var a=function(e,t,r){n.each(t,function(t,i){n[i]&&(e.prototype[i]=function(e,t,r){switch(e){case 1:return function(){return n[t](this[r])};case 2:return function(e){return n[t](this[r],e)};case 3:return function(e,i){return n[t](this[r],s(e,this),i)};case 4:return function(e,i,o){return n[t](this[r],s(e,this),i,o)};default:return function(){var e=o.call(arguments);return e.unshift(this[r]),n[t].apply(n,e)}}}(t,i,r))})},s=function(e,t){return n.isFunction(e)?e:n.isObject(e)&&!t._isModel(e)?u(e):n.isString(e)?function(t){return t.get(e)}:e},u=function(e){var t=n.matches(e);return function(e){return t(e.attributes)}},l=t.Events={},c=/\s+/,p=function(e,t,r,i,o){var a,s=0;if(r&&"object"==typeof r){void 0!==i&&"context"in o&&void 0===o.context&&(o.context=i);for(a=n.keys(r);s<a.length;s++)t=p(e,t,a[s],r[a[s]],o)}else if(r&&c.test(r))for(a=r.split(c);s<a.length;s++)t=e(t,a[s],i,o);else t=e(t,r,i,o);return t};l.on=function(e,t,n){return h(this,e,t,n)};var h=function(e,t,n,r,i){if(e._events=p(f,e._events||{},t,n,{context:r,ctx:e,listening:i}),i){var o=e._listeners||(e._listeners={});o[i.id]=i}return e};l.listenTo=function(e,t,r){if(!e)return this;var i=e._listenId||(e._listenId=n.uniqueId("l")),o=this._listeningTo||(this._listeningTo={}),a=o[i];if(!a){var s=this._listenId||(this._listenId=n.uniqueId("l"));a=o[i]={obj:e,objId:i,id:s,listeningTo:o,count:0}}return h(e,t,r,this,a),this};var f=function(e,t,n,r){if(n){var i=e[t]||(e[t]=[]),o=r.context,a=r.ctx,s=r.listening;s&&s.count++,i.push({callback:n,context:o,ctx:o||a,listening:s})}return e};l.off=function(e,t,n){return this._events?(this._events=p(d,this._events,e,t,{context:n,listeners:this._listeners}),this):this},l.stopListening=function(e,t,r){var i=this._listeningTo;if(!i)return this;for(var o=e?[e._listenId]:n.keys(i),a=0;a<o.length;a++){var s=i[o[a]];if(!s)break;s.obj.off(t,r,this)}return n.isEmpty(i)&&(this._listeningTo=void 0),this};var d=function(e,t,r,i){if(e){var o,a=0,s=i.context,u=i.listeners;if(t||r||s){for(var l=t?[t]:n.keys(e);a<l.length;a++){t=l[a];var c=e[t];if(!c)break;for(var p=[],h=0;h<c.length;h++){var f=c[h];r&&r!==f.callback&&r!==f.callback._callback||s&&s!==f.context?p.push(f):(o=f.listening)&&0==--o.count&&(delete u[o.id],delete o.listeningTo[o.objId])}p.length?e[t]=p:delete e[t]}return n.size(e)?e:void 0}for(var d=n.keys(u);a<d.length;a++)o=u[d[a]],delete u[o.id],delete o.listeningTo[o.objId]}};l.once=function(e,t,r){var i=p(m,{},e,t,n.bind(this.off,this));return this.on(i,void 0,r)},l.listenToOnce=function(e,t,r){var i=p(m,{},t,r,n.bind(this.stopListening,this,e));return this.listenTo(e,i)};var m=function(e,t,r,i){if(r){var o=e[t]=n.once(function(){i(t,o),r.apply(this,arguments)});o._callback=r}return e};l.trigger=function(e){if(!this._events)return this;for(var t=Math.max(0,arguments.length-1),n=Array(t),r=0;r<t;r++)n[r]=arguments[r+1];return p(_,this._events,e,void 0,n),this};var _=function(e,t,n,r){if(e){var i=e[t],o=e.all;i&&o&&(o=o.slice()),i&&y(i,r),o&&y(o,[t].concat(r))}return e},y=function(e,t){var n,r=-1,i=e.length,o=t[0],a=t[1],s=t[2];switch(t.length){case 0:for(;++r<i;)(n=e[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o,a);return;case 3:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o,a,s);return;default:for(;++r<i;)(n=e[r]).callback.apply(n.ctx,t);return}};l.bind=l.on,l.unbind=l.off,n.extend(t,l);var v=t.Model=function(e,t){var r=e||{};t||(t={}),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(r=this.parse(r,t)||{}),r=n.defaults({},r,n.result(this,"defaults")),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(v.prototype,l,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},matches:function(e){return!!n.iteratee(e,this)(this.attributes)},set:function(e,t,r){if(null==e)return this;var i;if("object"==typeof e?(i=e,r=t):(i={})[e]=t,r||(r={}),!this._validate(i,r))return!1;var o=r.unset,a=r.silent,s=[],u=this._changing;this._changing=!0,u||(this._previousAttributes=n.clone(this.attributes),this.changed={});var l=this.attributes,c=this.changed,p=this._previousAttributes;for(var h in i)t=i[h],n.isEqual(l[h],t)||s.push(h),n.isEqual(p[h],t)?delete c[h]:c[h]=t,o?delete l[h]:l[h]=t;if(this.id=this.get(this.idAttribute),!a){s.length&&(this._pending=r);for(var f=0;f<s.length;f++)this.trigger("change:"+s[f],this,l[s[f]],r)}if(u)return this;if(!a)for(;this._pending;)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&n.clone(this.changed);var t=this._changing?this._previousAttributes:this.attributes,r={};for(var i in e){var o=e[i];n.isEqual(t[i],o)||(r[i]=o)}return!!n.size(r)&&r},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=n.extend({parse:!0},e);var t=this,r=e.success;return e.success=function(n){var i=e.parse?t.parse(n,e):n;if(!t.set(i,e))return!1;r&&r.call(e.context,t,n,e),t.trigger("sync",t,n,e)},D(this,e),this.sync("read",this,e)},save:function(e,t,r){var i;null==e||"object"==typeof e?(i=e,r=t):(i={})[e]=t;var o=(r=n.extend({validate:!0,parse:!0},r)).wait;if(i&&!o){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;var a=this,s=r.success,u=this.attributes;r.success=function(e){a.attributes=u;var t=r.parse?a.parse(e,r):e;if(o&&(t=n.extend({},i,t)),t&&!a.set(t,r))return!1;s&&s.call(r.context,a,e,r),a.trigger("sync",a,e,r)},D(this,r),i&&o&&(this.attributes=n.extend({},u,i));var l=this.isNew()?"create":r.patch?"patch":"update";"patch"!==l||r.attrs||(r.attrs=i);var c=this.sync(l,this,r);return this.attributes=u,c},destroy:function(e){e=e?n.clone(e):{};var t=this,r=e.success,i=e.wait,o=function(){t.stopListening(),t.trigger("destroy",t,t.collection,e)};e.success=function(n){i&&o(),r&&r.call(e.context,t,n,e),t.isNew()||t.trigger("sync",t,n,e)};var a=!1;return this.isNew()?n.defer(e.success):(D(this,e),a=this.sync("delete",this,e)),i||o(),a},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||z();if(this.isNew())return e;var t=this.get(this.idAttribute);return e.replace(/[^\/]$/,"$&/")+encodeURIComponent(t)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.defaults({validate:!0},e))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return!r||(this.trigger("invalid",this,r,n.extend(t,{validationError:r})),!1)}}),a(v,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes");var g=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},b={add:!0,remove:!0,merge:!0},x={add:!0,remove:!1},w=function(e,t,n){n=Math.min(Math.max(n,0),e.length);for(var r=Array(e.length-n),i=t.length,o=0;o<r.length;o++)r[o]=e[o+n];for(o=0;o<i;o++)e[o+n]=t[o];for(o=0;o<r.length;o++)e[o+i+n]=r[o]};n.extend(g.prototype,l,{model:v,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,x))},remove:function(e,t){t=n.extend({},t);var r=!n.isArray(e);e=r?[e]:n.clone(e);var i=this._removeModels(e,t);return!t.silent&&i&&this.trigger("update",this,t),r?i[0]:i},set:function(e,t){if(null!=e){(t=n.defaults({},t,b)).parse&&!this._isModel(e)&&(e=this.parse(e,t));var r=!n.isArray(e);e=r?[e]:e.slice();var i=t.at;null!=i&&(i=+i),i<0&&(i+=this.length+1);for(var o,a=[],s=[],u=[],l={},c=t.add,p=t.merge,h=t.remove,f=!1,d=this.comparator&&null==i&&!1!==t.sort,m=n.isString(this.comparator)?this.comparator:null,_=0;_<e.length;_++){o=e[_];var y=this.get(o);if(y){if(p&&o!==y){var v=this._isModel(o)?o.attributes:o;t.parse&&(v=y.parse(v,t)),y.set(v,t),d&&!f&&(f=y.hasChanged(m))}l[y.cid]||(l[y.cid]=!0,a.push(y)),e[_]=y}else c&&(o=e[_]=this._prepareModel(o,t))&&(s.push(o),this._addReference(o,t),l[o.cid]=!0,a.push(o))}if(h){for(_=0;_<this.length;_++)o=this.models[_],l[o.cid]||u.push(o);u.length&&this._removeModels(u,t)}var g=!1,x=!d&&c&&h;if(a.length&&x?(g=this.length!=a.length||n.some(this.models,function(e,t){return e!==a[t]}),this.models.length=0,w(this.models,a,0),this.length=this.models.length):s.length&&(d&&(f=!0),w(this.models,s,null==i?this.length:i),this.length=this.models.length),f&&this.sort({silent:!0}),!t.silent){for(_=0;_<s.length;_++)null!=i&&(t.index=i+_),(o=s[_]).trigger("add",o,this,t);(f||g)&&this.trigger("sort",this,t),(s.length||u.length)&&this.trigger("update",this,t)}return r?e[0]:e}},reset:function(e,t){t=t?n.clone(t):{};for(var r=0;r<this.models.length;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e)},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e)},slice:function(){return o.apply(this.models,arguments)},get:function(e){if(null!=e){var t=this.modelId(this._isModel(e)?e.attributes:e);return this._byId[e]||this._byId[t]||this._byId[e.cid]}},at:function(e){return e<0&&(e+=this.length),this.models[e]},where:function(e,t){return this[t?"find":"filter"](e)},findWhere:function(e){return this.where(e,!0)},sort:function(e){var t=this.comparator;if(!t)throw new Error("Cannot sort a set without a comparator");e||(e={});var r=t.length;return n.isFunction(t)&&(t=n.bind(t,this)),1===r||n.isString(t)?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){var t=(e=n.extend({parse:!0},e)).success,r=this;return e.success=function(n){var i=e.reset?"reset":"set";r[i](n,e),t&&t.call(e.context,r,n,e),r.trigger("sync",r,n,e)},D(this,e),this.sync("read",this,e)},create:function(e,t){var r=(t=t?n.clone(t):{}).wait;if(!(e=this._prepareModel(e,t)))return!1;r||this.add(e,t);var i=this,o=t.success;return t.success=function(e,t,n){r&&i.add(e,n),o&&o.call(n.context,e,t,n)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(e){return e[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(this._isModel(e))return e.collection||(e.collection=this),e;(t=t?n.clone(t):{}).collection=this;var r=new this.model(e,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_removeModels:function(e,t){for(var n=[],r=0;r<e.length;r++){var i=this.get(e[r]);if(i){var o=this.indexOf(i);this.models.splice(o,1),this.length--,t.silent||(t.index=o,i.trigger("remove",i,this,t)),n.push(i),this._removeReference(i,t)}}return!!n.length&&n},_isModel:function(e){return e instanceof v},_addReference:function(e,t){this._byId[e.cid]=e;var n=this.modelId(e.attributes);null!=n&&(this._byId[n]=e),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){delete this._byId[e.cid];var n=this.modelId(e.attributes);null!=n&&delete this._byId[n],this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if("add"!==e&&"remove"!==e||n===this){if("destroy"===e&&this.remove(t,r),"change"===e){var i=this.modelId(t.previousAttributes()),o=this.modelId(t.attributes);i!==o&&(null!=i&&delete this._byId[i],null!=o&&(this._byId[o]=t))}this.trigger.apply(this,arguments)}}}),a(g,{forEach:3,each:3,map:3,collect:3,reduce:4,foldl:4,inject:4,reduceRight:4,foldr:4,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3},"models");var E=t.View=function(e){this.cid=n.uniqueId("view"),n.extend(this,n.pick(e,k)),this._ensureElement(),this.initialize.apply(this,arguments)},T=/^(\S+)\s*(.*)$/,k=["model","collection","el","id","attributes","className","tagName","events"];n.extend(E.prototype,l,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(e){return this.undelegateEvents(),this._setElement(e),this.delegateEvents(),this},_setElement:function(e){this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0]},delegateEvents:function(e){if(e||(e=n.result(this,"events")),!e)return this;for(var t in this.undelegateEvents(),e){var r=e[t];if(n.isFunction(r)||(r=this[r]),r){var i=t.match(T);this.delegate(i[1],i[2],n.bind(r,this))}}return this},delegate:function(e,t,n){return this.$el.on(e+".delegateEvents"+this.cid,t,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(e,t,n){return this.$el.off(e+".delegateEvents"+this.cid,t,n),this},_createElement:function(e){return document.createElement(e)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e.class=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(e)}},_setAttributes:function(e){this.$el.attr(e)}}),t.sync=function(e,r,i){var o=C[e];n.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var a={type:o,dataType:"json"};if(i.url||(a.url=n.result(r,"url")||z()),null!=i.data||!r||"create"!==e&&"update"!==e&&"patch"!==e||(a.contentType="application/json",a.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),i.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){a.type="POST",i.emulateJSON&&(a.data._method=o);var s=i.beforeSend;i.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",o),s)return s.apply(this,arguments)}}"GET"===a.type||i.emulateJSON||(a.processData=!1);var u=i.error;i.error=function(e,t,n){i.textStatus=t,i.errorThrown=n,u&&u.call(i.context,e,t,n)};var l=i.xhr=t.ajax(n.extend(a,i));return r.trigger("request",r,l,i),l};var C={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var M=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},P=/\((.*?)\)/g,A=/(\(\?)?:\w+/g,S=/\*\w+/g,O=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(M.prototype,l,{initialize:function(){},route:function(e,r,i){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var o=this;return t.history.route(e,function(n){var a=o._extractParameters(e,n);!1!==o.execute(i,a,r)&&(o.trigger.apply(o,["route:"+r].concat(a)),o.trigger("route",r,a),t.history.trigger("route",o,r,a))}),this},execute:function(e,t,n){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(O,"\\$&").replace(P,"(?:$1)?").replace(A,function(e,t){return t?e:"([^/?]+)"}).replace(S,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var r=e.exec(t).slice(1);return n.map(r,function(e,t){return t===r.length-1?e||null:e?decodeURIComponent(e):null})}});var I=t.History=function(){this.handlers=[],this.checkUrl=n.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},R=/^[#\/]|\s+$/g,j=/^\/+|\/+$/g,L=/#.*$/;I.started=!1,n.extend(I.prototype,l,{interval:50,atRoot:function(){var e=this.location.pathname.replace(/[^\/]$/,"$&/");return e===this.root&&!this.getSearch()},matchRoot:function(){var e=this.decodeFragment(this.location.pathname),t=e.slice(0,this.root.length-1)+"/";return t===this.root},decodeFragment:function(e){return decodeURI(e.replace(/%25/g,"%2525"))},getSearch:function(){var e=this.location.href.replace(/#.*/,"").match(/\?.+/);return e?e[0]:""},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getPath:function(){var e=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===e.charAt(0)?e.slice(1):e},getFragment:function(e){return null==e&&(e=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),e.replace(R,"")},start:function(e){if(I.started)throw new Error("Backbone.history has already been started");if(I.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(j,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var t=this.root.slice(0,-1)||"/";return this.location.replace(t+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var r=document.body,i=r.insertBefore(this.iframe,r.firstChild).contentWindow;i.document.open(),i.document.close(),i.location.hash="#"+this.fragment}var o=window.addEventListener||function(e,t){return attachEvent("on"+e,t)};if(this._usePushState?o("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?o("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var e=window.removeEventListener||function(e,t){return detachEvent("on"+e,t)};this._usePushState?e("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&e("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),I.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();if(t===this.fragment&&this.iframe&&(t=this.getHash(this.iframe.contentWindow)),t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return!!this.matchRoot()&&(e=this.fragment=this.getFragment(e),n.some(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0}))},navigate:function(e,t){if(!I.started)return!1;t&&!0!==t||(t={trigger:!!t}),e=this.getFragment(e||"");var n=this.root;""!==e&&"?"!==e.charAt(0)||(n=n.slice(0,-1)||"/");var r=n+e;if(e=this.decodeFragment(e.replace(L,"")),this.fragment!==e){if(this.fragment=e,this._usePushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,r);else{if(!this._wantsHashChange)return this.location.assign(r);if(this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getHash(this.iframe.contentWindow)){var i=this.iframe.contentWindow;t.replace||(i.document.open(),i.document.close()),this._updateHash(i.location,e,t.replace)}}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new I,v.extend=g.extend=M.extend=E.extend=I.extend=function(e,t){var r,i=this;r=e&&n.has(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)},n.extend(r,i,t);var o=function(){this.constructor=r};return o.prototype=i.prototype,r.prototype=new o,e&&n.extend(r.prototype,e),r.__super__=i.prototype,r};var z=function(){throw new Error('A "url" property or function must be specified')},D=function(e,t){var n=t.error;t.error=function(r){n&&n.call(t.context,e,r,t),e.trigger("error",e,r,t)}};return t}(a,n,e,t)}.apply(t,i))||(e.exports=o)}).call(this,n(29))},function(e,t,n){"use strict";var r=n(16),i=n(0),o=n(1),a=o.Model.extend({initialize:function(e){return i.bindAll(this,"fetch","save","retrigger"),o.Model.prototype.initialize.call(this,e)},fetch:function(e){var t=this;this.trigger("loadModelStarted"),r.when(o.Model.prototype.fetch.call(this,e)).done(function(e){t.trigger("loadModelCompleted",e,t)}).fail(function(e){t.trigger("loadModelFailed",e,t)})},setIdAttribute:function(e){this.idAttribute=e},retrigger:function(e,t,n){n||(n=e);var r=this;t.bind&&t.bind(e,function(){r.trigger(n)},r)},save:function(e,t){var n=this;t&&t.silent||this.trigger("saving");var i=o.Model.prototype.save.apply(this,arguments);return r.when(i).done(function(){t&&t.silent||n.trigger("saved")}).fail(function(){t&&t.silent||n.trigger("errorSaving")}),i}});e.exports=a},function(e,t,n){"use strict";var r=n(138),i=n(133),o="unexpected error",a="generic";e.exports=function(e,t){t=t||{};var n=Object.create(Error.prototype);n.message=e&&e.message||o,n.origin=e&&e.origin||a,n.type=e&&e.type||"",function(e){return e&&"windshaft"===e.origin}(e)&&(n=function(e,t,n){var r=Object.create(Error.prototype);return r.message=e.message,r.origin=e.origin,r.type=e.type,"layer"===e.type&&t&&(r.layer=t.findById(e.layerId)),"analysis"===e.type&&(n&&(r.source=n,r.sourceId=n.getId&&n.getId()),e.analysisId&&(r.sourceId=e.analysisId)),r}(e,t.layers,t.analysis)),function(e){return e&&e.responseText}(e)&&(n=function(e){var t=Object.create(Error.prototype);return t.message=function(e){var t="";try{var n=JSON.parse(e.responseText);t=n.errors[0]}catch(e){}return t||o}(e),t.origin="ajax",t.type=e.statusText,t}(e));var s=r.getExtraFields(n);return n.message=s.friendlyMessage,n.errorCode=s.errorCode,n.name="CartoError",n.stack=(new Error).stack,n.originalError=e,i.track(n),n}},function(e,t,n){"use strict";var r=n(0),i={COUNT:"count",SUM:"sum",AVG:"avg",MAX:"max",MIN:"min"};var o={AUTO:"auto",MILLENNIUM:"millennium",CENTURY:"century",DECADE:"decade",YEAR:"year",QUARTER:"quarter",MONTH:"month",WEEK:"week",DAY:"day",HOUR:"hour",MINUTE:"minute"};e.exports={operation:i,status:{NOT_LOADED:"notLoaded",LOADING:"loading",LOADED:"loaded",ERROR:"error"},timeAggregation:o,isValidOperation:function(e){return r.contains(i,e)},isValidTimeAggregation:function(e){return r.contains(o,e)},ATTRIBUTION:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="https://carto.com/attribution">CARTO</a>'}},function(e,t,n){"use strict";var r=n(3);e.exports=function(e,t,n){return new r({origin:"validation",type:e,message:t},n)}},function(e,t,n){"use strict";var r=n(0),i={isCORSSupported:function(){return"withCredentials"in new XMLHttpRequest},array2hex:function(e){for(var t=[],n=0;n<e.length;++n)t.push(String.fromCharCode(e[n]+128));return i.btoa(t.join(""))},btoa:function(e){return"function"==typeof window.btoa?i.encodeBase64Native(e):i.encodeBase64(e)},encodeBase64Native:function(e){return btoa(e)},encodeBase64:function(e){var t,n,r,i,o,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s=0,u=0,l="",c=[];if(!e)return e;do{t=(o=e.charCodeAt(s++)<<16|e.charCodeAt(s++)<<8|e.charCodeAt(s++))>>18&63,n=o>>12&63,r=o>>6&63,i=63&o,c[u++]=a.charAt(t)+a.charAt(n)+a.charAt(r)+a.charAt(i)}while(s<e.length);l=c.join("");var p=e.length%3;return(p?l.slice(0,p-3):l)+"===".slice(p||3)},uniqueCallbackName:function(e){return i._callback_c=i._callback_c||0,++i._callback_c,i.crc32(e)+"_"+i._callback_c},crc32:function(e){for(var t=i._crcTable||(i._crcTable=i._makeCRCTable()),n=-1,r=0,o=e.length;r<o;++r)n=n>>>8^t[255&(n^e.charCodeAt(r))];return(-1^n)>>>0},_makeCRCTable:function(){for(var e,t=[],n=0;n<256;++n){e=n;for(var r=0;r<8;++r)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t},_inferBrowser:function(e){var t,n,r={};return e=e||"undefined"!=typeof window&&window.navigator.userAgent||"",t=e.indexOf("MSIE "),n=e.indexOf("Trident/"),t>-1||n>-1?r.ie={version:document.compatMode?window.XMLHttpRequest?document.querySelector?document.addEventListener?window.atob?document.all?10:11:9:8:7:6:5}:e.indexOf("Edge/")>-1?r.edge=e:e.indexOf("Chrome")>-1?r.chrome=e:e.indexOf("Firefox")>-1?r.firefox=e:e.indexOf("Opera")>-1?r.opera=e:e.indexOf("Safari")>-1&&(r.safari=e),r}};i.browser=i._inferBrowser(),i.isMobileDevice=function(){return/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},i.supportsTouch=function(){return"ontouchstart"in window||navigator.msMaxTouchPoints};var o=null;i.isWebGLSupported=function(){if(null===o){var e=document.createElement("canvas");o=!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}return o},i.endsWith=function(e,t){return-1!==e.indexOf(t,e.length-t.length)},i.checkRequiredOpts=function(e,t,n){r.each(t,function(t){if(r.isUndefined(e[t]))throw new Error(t+" is required"+(n?" to initialize "+n:""))})},i.isLeafletLoaded=function(){if(!window.L)throw new Error("Leaflet is required");if(window.L.version<"1.0.0")throw new Error("Leaflet +1.0 is required")},i.isGoogleMapsLoaded=function(){if(!window.google)throw new Error("Google Maps is required");if(!window.google.maps)throw new Error("Google Maps is required");if(window.google.maps.version<"3.31.0")throw new Error("Google Maps version should be >= 3.31")},e.exports=i},function(e,t,n){"use strict";var r=n(0),i=n(1),o=n(5);function a(){}r.extend(a.prototype,i.Events),a.prototype._getValidationError=function(e){return new o("filter",e)},e.exports=a},function(e,t,n){"use strict";var r=n(0),i=n(1),o=n(2),a=n(6),s=["camshaftReference","engine"],u={PENDING:"pending",WAITING:"waiting",RUNNING:"running",FAILED:"failed",READY:"ready"},l=o.extend({initialize:function(e,t){t=t||{},a.checkRequiredOpts(t,s,"AnalysisModel"),this._camshaftReference=t.camshaftReference,this._engine=t.engine,this._initBinds(),this._referencedBy={}},url:function(){var e=this.get("url");if(e){if(this.get("apiKey"))e+="?api_key="+this.get("apiKey");else if(this.get("authToken")){var t=this.get("authToken");if(t instanceof Array)e+="?"+r.map(t,function(e){return"auth_token[]="+e}).join("&");else e+="?auth_token="+t}return e}},setOk:function(){this.unset("error")},setError:function(e){this.set({error:e,status:u.FAILED})},_initBinds:function(){this.bind("change:type",function(){this.unbind(null,null,this),this._initBinds(),this._reload()},this),r.each(this.getParamNames(),function(e){this.bind("change:"+e,this._reload,this)},this),this.bind("change:status",function(){this._hadStatus()&&this.isReady()&&this.isSourceOfAnyModel()&&this._reload()},this)},_hadStatus:function(){return this.previous("status")},_reload:function(){this._engine.reload({error:this._onMapReloadError.bind(this)})},_onMapReloadError:function(){this.set("status",u.FAILED)},remove:function(){this.trigger("destroy",this),this.stopListening()},findAnalysisById:function(e){return this.get("id")===e?this:r.chain(this._getSourceNames()).map(function(t){var n=this.get(t);if(n)return n.findAnalysisById(e)},this).compact().value()[0]},_getSourceNames:function(){return this._camshaftReference.getSourceNamesForAnalysisType(this.get("type"))},isDone:function(){return this._hasStatus([u.READY,u.FAILED])},isLoading:function(){return this._hasStatus([u.PENDING,u.WAITING,u.RUNNING])},isReady:function(){return this._hasStatus(u.READY)},isFailed:function(){return this._hasStatus(u.FAILED)},_hasStatus:function(e){return r.isArray(e)||(e=[e]),r.contains(e,this._getStatus())},_getStatus:function(){return this.get("status")},toJSON:function(){var e=r.pick(this.attributes,"id","type");e.params=r.pick(this.attributes,this.getParamNames());var t=this._getSourceNames();return r.each(t,function(t){var n={},i=this.get(t);i&&(n[t]=i.toJSON(),r.extend(e.params,n))},this),e},getParamNames:function(){return this._camshaftReference.getParamNamesForAnalysisType(this.get("type"))},getNodes:function(){var e=[this];return"source"!==this.get("type")&&r.forEach(this._getSourceNames(),function(t){var n=this.get(t);n&&(e=e.concat(n.getNodes()))},this),e},getNodesCollection:function(){return new i.Collection(this.getNodes())},equals:function(e){return e instanceof l&&this.get("id")===e.get("id")},markAsSourceOf:function(e){this._referencedBy[e.cid]=!0},isSourceOfAnyModel:function(){return Object.keys(this._referencedBy).length>0},isSourceOf:function(e){return!!this._referencedBy[e.cid]},unmarkAsSourceOf:function(e){delete this._referencedBy[e.cid]}},{STATUS:u});e.exports=l},function(e,t,n){"use strict";var r=n(0),i=n(1),o=n(4).status,a=n(11),s=n(7),u=n(10),l=n(3),c=n(5);function p(){}r.extend(p.prototype,i.Events),p.prototype.getStatus=function(){return this._status},p.prototype.isLoading=function(){return this._status===o.LOADING},p.prototype.isLoaded=function(){return this._status===o.LOADED},p.prototype.hasError=function(){return this._status===o.ERROR},p.prototype.enable=function(){return this._setEnabled(!0)},p.prototype.disable=function(){return this._setEnabled(!1)},p.prototype.isEnabled=function(){return this._enabled},p.prototype.getSource=function(){return this._source},p.prototype.setColumn=function(e){return this._checkColumn(e),this._column=e,this._internalModel&&this._internalModel.set("column",this._column),this},p.prototype.getColumn=function(){return this._column},p.prototype.addFilter=function(e){return this._checkFilter(e),e!==this._boundingBoxFilter&&this._addBoundingBoxFilter(e),this},p.prototype.removeFilter=function(e){return this._checkFilter(e),e===this._boundingBoxFilter&&this._removeBoundingBoxFilter(),this},p.prototype.hasFilter=function(e){return this._checkFilter(e),e===this._boundingBoxFilter&&this._internalModel&&this._internalModel.get("sync_on_bbox_change")},p.prototype.getData=function(){throw new Error("getData must be implemented by the particular dataview.")},p.prototype.DEFAULTS={},p.prototype._initialize=function(e,t,n){n=r.defaults(n||{},this.DEFAULTS),this._checkSource(e),this._checkColumn(t),this._checkOptions(n),this._source=e,this._column=t,this._options=n,this._status=o.NOT_LOADED,this._enabled=!0,this._boundingBoxFilter=null},p.prototype._checkSource=function(e){if(!(e instanceof a))throw this._getValidationError("sourceRequired")},p.prototype._checkColumn=function(e){if(r.isUndefined(e))throw this._getValidationError("columnRequired");if(!r.isString(e))throw this._getValidationError("columnString");if(r.isEmpty(e))throw this._getValidationError("emptyColumn")},p.prototype._checkOptions=function(e){throw new Error("_checkOptions must be implemented by the particular dataview.")},p.prototype._checkFilter=function(e){if(!(e instanceof s)||e instanceof u)throw this._getValidationError("filterRequired")},p.prototype._createInternalModel=function(e){throw new Error("_createInternalModel must be implemented by the particular dataview.")},p.prototype._setEnabled=function(e){return this._enabled=e,this._internalModel&&this._internalModel.set("enabled",e),this},p.prototype._listenToInternalModelSharedEvents=function(){this._internalModel&&(this.listenTo(this._internalModel,"change:data",this._onDataChanged),this.listenTo(this._internalModel,"change:column",this._onColumnChanged),this.listenTo(this._internalModel,"loading",this._onStatusLoading),this.listenTo(this._internalModel,"loaded",this._onStatusLoaded),this.listenTo(this._internalModel,"statusError",this._onStatusError))},p.prototype._onDataChanged=function(){this.trigger("dataChanged",this.getData())},p.prototype._onColumnChanged=function(){this._internalModel&&(this._column=this._internalModel.get("column")),this.trigger("columnChanged",this._column)},p.prototype._onStatusLoading=function(){this._status=o.LOADING,this.trigger("statusChanged",this._status)},p.prototype._onStatusLoaded=function(){this._status=o.LOADED,this.trigger("statusChanged",this._status)},p.prototype._onStatusError=function(e,t){this._status=o.ERROR,this.trigger("statusChanged",this._status,t),this._triggerError(this,t)},p.prototype._changeProperty=function(e,t,n){var r=this["_"+e];this["_"+e]=t,r!==t&&(this._triggerChange(e,t),this._internalModel&&this._internalModel.set(n||e,t))},p.prototype._changeProperties=function(e){var t=this;r.each(e,function(e,n){t["_"+n]!==e&&(t["_"+n]=e,t._triggerChange(n,e))}),this._internalModel&&this._internalModel.set(e)},p.prototype._triggerChange=function(e,t){this.trigger(e+"Changed",t)},p.prototype._triggerError=function(e,t){this.trigger("error",new l(t))},p.prototype._addBoundingBoxFilter=function(e){this._boundingBoxFilter=e,this._internalModel&&(this._internalModel.addBBoxFilter(this._boundingBoxFilter.$getInternalModel()),this._internalModel.set("sync_on_bbox_change",!0))},p.prototype._removeBoundingBoxFilter=function(){this._boundingBoxFilter=null,this._internalModel&&this._internalModel.set("sync_on_bbox_change",!1)},p.prototype._getValidationError=function(e){return new c("dataview",e)},p.prototype.$setEngine=function(e){this._source.$setEngine(e),this._internalModel||(this._createInternalModel(e),this._listenToInternalModelSharedEvents())},p.prototype.$getInternalModel=function(){return this._internalModel},e.exports=p},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=n(0),o=n(7),a=n(90),s=["includeNull"],u=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r._checkColumn(e),r._checkOptions(n),r._column=e,r._filters={},r._options=n,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o),r(t,[{key:"set",value:function(e,t){if(e&&t&&i.isString(e)){var n,r,o,a=(o=t,(r=e)in(n={})?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,n);this._checkFilters(a),this._filters[e]=t,this.trigger("change:filters",a)}}},{key:"setFilters",value:function(e){e&&i.isObject(e)&&(this._checkFilters(e),this._filters=e,this.trigger("change:filters",e))}},{key:"resetFilters",value:function(){this.setFilters({})}},{key:"$getSQL",value:function(){var e=this,t=Object.keys(this._filters),n=t.map(function(t){return e._interpolateFilter(t,e._filters[t])}).filter(function(e){return Boolean(e)}).join(" AND ");return this._options.includeNull&&this._includeNullInQuery(n),t.length>1?"("+n+")":n}},{key:"_checkColumn",value:function(e){if(i.isUndefined(e))throw this._getValidationError("columnRequired");if(!i.isString(e))throw this._getValidationError("columnString");if(i.isEmpty(e))throw this._getValidationError("emptyColumn")}},{key:"_checkFilters",value:function(e){var t=this;Object.keys(e).forEach(function(n){if(!i.contains(t.ALLOWED_FILTERS,n))throw t._getValidationError("invalidFilter"+n);if(!t.PARAMETER_SPECIFICATION[n].parameters.every(function(t){var n=a(e,t.name);return t.allowedTypes.some(function(e){return l(e,n)})}))throw t._getValidationError("invalidParameterType"+n)})}},{key:"_checkOptions",value:function(e){var t=this;Object.keys(e).forEach(function(e){if(!i.contains(s,e))throw t._getValidationError("invalidOption"+e)})}},{key:"_convertValueToSQLString",value:function(e){var t=this;return i.isDate(e)?"'"+e.toISOString()+"'":i.isArray(e)?e.map(function(e){return t._convertValueToSQLString(e)}).join(","):i.isObject(e)?(Object.keys(e).forEach(function(n){"query"!==n&&(e[n]=t._convertValueToSQLString(e[n]))}),e):i.isNumber(e)?e:"'"+c(e.toString())+"'"}},{key:"_interpolateFilter",value:function(e,t){var n=i.template(this.SQL_TEMPLATES[e]),r=this._convertValueToSQLString(t);return n({column:this._column,value:r})}},{key:"_includeNullInQuery",value:function(e){return Object.keys(this._filters).length>1&&(e="("+e+")"),"("+e+" OR "+this._column+" IS NULL)"}}]),t}(),l=function(e,t){return i["is"+e](t)},c=function(e){return e.replace(/\n/g,"\\n").replace(/\"/g,'\\"').replace(/'/g,"''")};e.exports=u},function(e,t,n){"use strict";var r=n(0),i=n(1),o=n(3),a=n(20),s=n(13);function u(){this._id=u.$generateId(),this._hasFiltersApplied=!1,this._appliedFilters=new a}r.extend(u.prototype,i.Events),u.$nextId=0,u.$generateId=function(){return"S"+ ++u.$nextId},u.prototype.getId=function(){return this._id},u.prototype._createInternalModel=function(e){throw new Error("_createInternalModel must be implemented by the particular source")},u.prototype._triggerError=function(e,t){this.trigger(s.ERROR,new o(t,{analysis:this}))},u.prototype.$setEngine=function(e){this._internalModel||(this._internalModel=this._createInternalModel(e),this._internalModel.on("change:error",this._triggerError,this))},u.prototype.$getEngine=function(e){if(this._internalModel)return this._internalModel._engine},u.prototype.$getInternalModel=function(){return this._internalModel},u.prototype.getFilters=function(){return this._appliedFilters.getFilters()},u.prototype.addFilter=function(e){this._hasFiltersApplied=!0,this._appliedFilters.addFilter(e)},u.prototype.addFilters=function(e){var t=this;e.forEach(function(e){return t.addFilter(e)})},u.prototype.removeFilter=function(e){this._appliedFilters.removeFilter(e),this._hasFiltersApplied=Boolean(this._appliedFilters.count())},u.prototype.removeFilters=function(e){var t=this;e.forEach(function(e){return t.removeFilter(e)})},e.exports=u},function(e,t,n){"use strict";var r=n(0),i=n(1),o=n(43),a=["state","visible"],s=i.Model.extend({defaults:function(){return{visible:!1,title:"",preHTMLSnippet:"",postHTMLSnippet:"",state:this.constructor.STATE_LOADING}},initialize:function(e,t){if(!t.engine)throw new Error("engine is required");t.engine.on(o.Events.RELOAD_STARTED,this._onEngineReloadStarted,this)},_onEngineReloadStarted:function(){this.set("state",this.constructor.STATE_LOADING)},isLoading:function(){return this.get("state")===this.constructor.STATE_LOADING},isError:function(){return this.get("state")===this.constructor.STATE_ERROR},isSuccess:function(){return this.get("state")===this.constructor.STATE_SUCCESS},show:function(){this.set("visible",!0)},hide:function(){this.set("visible",!1)},isVisible:function(){return this.get("visible")},update:function(e){this.set(e)},getNonResettableAttrs:function(){return a},reset:function(){var e=r.omit(this.defaults(),this.getNonResettableAttrs());this.set(e)},isAvailable:function(){return!1}},{STATE_LOADING:"loading",STATE_SUCCESS:"success",STATE_ERROR:"error"});e.exports=s},function(e,t,n){"use strict";e.exports={SUCCESS:"success",ERROR:"error"}},function(e,t,n){"use strict";var r=n(0),i=function(e){this._rule=e};i.prototype.matchesAnyProperty=function(e){return this._matches(this._rule.prop,e)},i.prototype.matchesAnyMapping=function(e){return this._matches(this._rule.mapping,e)},i.prototype._matches=function(e,t){return r.isString(t)&&(t=[t]),r.contains(t,e)},i.prototype.getBucketsWithRangeFilter=function(){return this._getBucketsByFilterType("range")},i.prototype.getBucketsWithCategoryFilter=function(){return this._getBucketsByFilterType("category")},i.prototype.getBucketsWithDefaultFilter=function(){return this._getBucketsByFilterType("default")},i.prototype._getBucketsByFilterType=function(e){return this._rule?r.select(this._rule.buckets,function(t){return t.filter.type===e}):[]},i.prototype.getColumn=function(){return this._rule.column},i.prototype.getMapping=function(){return this._rule.mapping},i.prototype.getProperty=function(){return this._rule.prop},i.prototype.getFilterAvg=function(){return this._rule.stats.filter_avg},e.exports=i},function(e,t,n){"use strict";var r=function(e,t){return e.get("type").toLowerCase()===t.toLowerCase()};e.exports={isTiledLayer:function(e){return r(e,"Tiled")},isPlainLayer:function(e){return r(e,"Plain")},isWMSLayer:function(e){return r(e,"WMS")},isGoogleMapsBaseLayer:function(e){return r(e,"GMapsBase")},isCartoDBLayer:function(e){return r(e,"CartoDB")},isTorqueLayer:function(e){return r(e,"torque")}}},function(e,t,n){var r,i,o;
/*!
 * jQuery JavaScript Library v2.1.4
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2015-04-28T16:01Z
 */
/*!
 * jQuery JavaScript Library v2.1.4
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2015-04-28T16:01Z
 */
i="undefined"!=typeof window?window:this,o=function(n,i){var o=[],a=o.slice,s=o.concat,u=o.push,l=o.indexOf,c={},p=c.toString,h=c.hasOwnProperty,f={},d=n.document,m=function(e,t){return new m.fn.init(e,t)},_=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,y=/^-ms-/,v=/-([\da-z])/gi,g=function(e,t){return t.toUpperCase()};function b(e){var t="length"in e&&e.length,n=m.type(e);return"function"!==n&&!m.isWindow(e)&&(!(1!==e.nodeType||!t)||("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e))}m.fn=m.prototype={jquery:"2.1.4",constructor:m,selector:"",length:0,toArray:function(){return a.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:a.call(this)},pushStack:function(e){var t=m.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return m.each(this,e,t)},map:function(e){return this.pushStack(m.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:u,sort:o.sort,splice:o.splice},m.extend=m.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||m.isFunction(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],a!==(r=e[t])&&(l&&r&&(m.isPlainObject(r)||(i=m.isArray(r)))?(i?(i=!1,o=n&&m.isArray(n)?n:[]):o=n&&m.isPlainObject(n)?n:{},a[t]=m.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},m.extend({expando:"jQuery"+("2.1.4"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===m.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!m.isArray(e)&&e-parseFloat(e)+1>=0},isPlainObject:function(e){return"object"===m.type(e)&&!e.nodeType&&!m.isWindow(e)&&!(e.constructor&&!h.call(e.constructor.prototype,"isPrototypeOf"))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?c[p.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;(e=m.trim(e))&&(1===e.indexOf("use strict")?((t=d.createElement("script")).text=e,d.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(y,"ms-").replace(v,g)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r=0,i=e.length,o=b(e);if(n){if(o)for(;r<i&&!1!==t.apply(e[r],n);r++);else for(r in e)if(!1===t.apply(e[r],n))break}else if(o)for(;r<i&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(_,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(b(Object(e))?m.merge(n,"string"==typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:l.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i=0,o=e.length,a=[];if(b(e))for(;i<o;i++)null!=(r=t(e[i],i,n))&&a.push(r);else for(i in e)null!=(r=t(e[i],i,n))&&a.push(r);return s.apply([],a)},guid:1,proxy:function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),m.isFunction(e))return r=a.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(a.call(arguments)))}).guid=e.guid=e.guid||m.guid++,i},now:Date.now,support:f}),m.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){c["[object "+t+"]"]=t.toLowerCase()});var x=
/*!
 * Sizzle CSS Selector Engine v2.2.0-pre
 * http://sizzlejs.com/
 *
 * Copyright 2008, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-12-16
 */
function(e){var t,n,r,i,o,a,s,u,l,c,p,h,f,d,m,_,y,v,g,b="sizzle"+1*new Date,x=e.document,w=0,E=0,T=ae(),k=ae(),C=ae(),M=function(e,t){return e===t&&(p=!0),0},P=1<<31,A={}.hasOwnProperty,S=[],O=S.pop,I=S.push,R=S.push,j=S.slice,L=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},z="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",D="[\\x20\\t\\r\\n\\f]",B="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N=B.replace("w","w#"),q="\\["+D+"*("+B+")(?:"+D+"*([*^$|!~]?=)"+D+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+D+"*\\]",F=":("+B+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+q+")*)|.*)\\)|)",U=new RegExp(D+"+","g"),V=new RegExp("^"+D+"+|((?:^|[^\\\\])(?:\\\\.)*)"+D+"+$","g"),W=new RegExp("^"+D+"*,"+D+"*"),G=new RegExp("^"+D+"*([>+~]|"+D+")"+D+"*"),Z=new RegExp("="+D+"*([^\\]'\"]*?)"+D+"*\\]","g"),H=new RegExp(F),K=new RegExp("^"+N+"$"),Y={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),TAG:new RegExp("^("+B.replace("w","w*")+")"),ATTR:new RegExp("^"+q),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+D+"*(even|odd|(([+-]|)(\\d*)n|)"+D+"*(?:([+-]|)"+D+"*(\\d+)|))"+D+"*\\)|)","i"),bool:new RegExp("^(?:"+z+")$","i"),needsContext:new RegExp("^"+D+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+D+"*((?:-\\d)?\\d*)"+D+"*\\)|)(?=[^-]|$)","i")},X=/^(?:input|select|textarea|button)$/i,$=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=/'|\\/g,ne=new RegExp("\\\\([\\da-f]{1,6}"+D+"?|("+D+")|.)","ig"),re=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},ie=function(){h()};try{R.apply(S=j.call(x.childNodes),x.childNodes),S[x.childNodes.length].nodeType}catch(e){R={apply:S.length?function(e,t){I.apply(e,j.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function oe(e,t,r,i){var o,s,l,c,p,d,y,v,w,E;if((t?t.ownerDocument||t:x)!==f&&h(t),r=r||[],c=(t=t||f).nodeType,"string"!=typeof e||!e||1!==c&&9!==c&&11!==c)return r;if(!i&&m){if(11!==c&&(o=Q.exec(e)))if(l=o[1]){if(9===c){if(!(s=t.getElementById(l))||!s.parentNode)return r;if(s.id===l)return r.push(s),r}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(l))&&g(t,s)&&s.id===l)return r.push(s),r}else{if(o[2])return R.apply(r,t.getElementsByTagName(e)),r;if((l=o[3])&&n.getElementsByClassName)return R.apply(r,t.getElementsByClassName(l)),r}if(n.qsa&&(!_||!_.test(e))){if(v=y=b,w=t,E=1!==c&&e,1===c&&"object"!==t.nodeName.toLowerCase()){for(d=a(e),(y=t.getAttribute("id"))?v=y.replace(te,"\\$&"):t.setAttribute("id",v),v="[id='"+v+"'] ",p=d.length;p--;)d[p]=v+_e(d[p]);w=ee.test(e)&&de(t.parentNode)||t,E=d.join(",")}if(E)try{return R.apply(r,w.querySelectorAll(E)),r}catch(e){}finally{y||t.removeAttribute("id")}}}return u(e.replace(V,"$1"),t,r,i)}function ae(){var e=[];return function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}}function se(e){return e[b]=!0,e}function ue(e){var t=f.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function le(e,t){for(var n=e.split("|"),i=e.length;i--;)r.attrHandle[n[i]]=t}function ce(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||P)-(~e.sourceIndex||P);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function pe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function he(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function fe(e){return se(function(t){return t=+t,se(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function de(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=oe.support={},o=oe.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},h=oe.setDocument=function(e){var t,i,a=e?e.ownerDocument||e:x;return a!==f&&9===a.nodeType&&a.documentElement?(f=a,d=a.documentElement,(i=a.defaultView)&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",ie,!1):i.attachEvent&&i.attachEvent("onunload",ie)),m=!o(a),n.attributes=ue(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=ue(function(e){return e.appendChild(a.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=J.test(a.getElementsByClassName),n.getById=ue(function(e){return d.appendChild(e).id=b,!a.getElementsByName||!a.getElementsByName(b).length}),n.getById?(r.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},r.filter.ID=function(e){var t=e.replace(ne,re);return function(e){return e.getAttribute("id")===t}}):(delete r.find.ID,r.filter.ID=function(e){var t=e.replace(ne,re);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),r.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(m)return t.getElementsByClassName(e)},y=[],_=[],(n.qsa=J.test(a.querySelectorAll))&&(ue(function(e){d.appendChild(e).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&_.push("[*^$]="+D+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||_.push("\\["+D+"*(?:value|"+z+")"),e.querySelectorAll("[id~="+b+"-]").length||_.push("~="),e.querySelectorAll(":checked").length||_.push(":checked"),e.querySelectorAll("a#"+b+"+*").length||_.push(".#.+[+~]")}),ue(function(e){var t=a.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&_.push("name"+D+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||_.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),_.push(",.*:")})),(n.matchesSelector=J.test(v=d.matches||d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&ue(function(e){n.disconnectedMatch=v.call(e,"div"),v.call(e,"[s!='']:x"),y.push("!=",F)}),_=_.length&&new RegExp(_.join("|")),y=y.length&&new RegExp(y.join("|")),t=J.test(d.compareDocumentPosition),g=t||J.test(d.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},M=t?function(e,t){if(e===t)return p=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===a||e.ownerDocument===x&&g(x,e)?-1:t===a||t.ownerDocument===x&&g(x,t)?1:c?L(c,e)-L(c,t):0:4&r?-1:1)}:function(e,t){if(e===t)return p=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,s=[e],u=[t];if(!i||!o)return e===a?-1:t===a?1:i?-1:o?1:c?L(c,e)-L(c,t):0;if(i===o)return ce(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)u.unshift(n);for(;s[r]===u[r];)r++;return r?ce(s[r],u[r]):s[r]===x?-1:u[r]===x?1:0},a):f},oe.matches=function(e,t){return oe(e,null,null,t)},oe.matchesSelector=function(e,t){if((e.ownerDocument||e)!==f&&h(e),t=t.replace(Z,"='$1']"),n.matchesSelector&&m&&(!y||!y.test(t))&&(!_||!_.test(t)))try{var r=v.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return oe(t,f,null,[e]).length>0},oe.contains=function(e,t){return(e.ownerDocument||e)!==f&&h(e),g(e,t)},oe.attr=function(e,t){(e.ownerDocument||e)!==f&&h(e);var i=r.attrHandle[t.toLowerCase()],o=i&&A.call(r.attrHandle,t.toLowerCase())?i(e,t,!m):void 0;return void 0!==o?o:n.attributes||!m?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},oe.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},oe.uniqueSort=function(e){var t,r=[],i=0,o=0;if(p=!n.detectDuplicates,c=!n.sortStable&&e.slice(0),e.sort(M),p){for(;t=e[o++];)t===e[o]&&(i=r.push(o));for(;i--;)e.splice(r[i],1)}return c=null,e},i=oe.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[r++];)n+=i(t);return n},(r=oe.selectors={cacheLength:50,createPseudo:se,match:Y,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ne,re),e[3]=(e[3]||e[4]||e[5]||"").replace(ne,re),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||oe.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&oe.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return Y.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&H.test(n)&&(t=a(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ne,re).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=T[e+" "];return t||(t=new RegExp("(^|"+D+")"+e+"("+D+"|$)"))&&T(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=oe.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(U," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,p,h,f,d,m=o!==a?"nextSibling":"previousSibling",_=t.parentNode,y=s&&t.nodeName.toLowerCase(),v=!u&&!s;if(_){if(o){for(;m;){for(p=t;p=p[m];)if(s?p.nodeName.toLowerCase()===y:1===p.nodeType)return!1;d=m="only"===e&&!d&&"nextSibling"}return!0}if(d=[a?_.firstChild:_.lastChild],a&&v){for(f=(l=(c=_[b]||(_[b]={}))[e]||[])[0]===w&&l[1],h=l[0]===w&&l[2],p=f&&_.childNodes[f];p=++f&&p&&p[m]||(h=f=0)||d.pop();)if(1===p.nodeType&&++h&&p===t){c[e]=[w,f,h];break}}else if(v&&(l=(t[b]||(t[b]={}))[e])&&l[0]===w)h=l[1];else for(;(p=++f&&p&&p[m]||(h=f=0)||d.pop())&&((s?p.nodeName.toLowerCase()!==y:1!==p.nodeType)||!++h||(v&&((p[b]||(p[b]={}))[e]=[w,h]),p!==t)););return(h-=i)===r||h%r==0&&h/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||oe.error("unsupported pseudo: "+e);return i[b]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?se(function(e,n){for(var r,o=i(e,t),a=o.length;a--;)e[r=L(e,o[a])]=!(n[r]=o[a])}):function(e){return i(e,0,n)}):i}},pseudos:{not:se(function(e){var t=[],n=[],r=s(e.replace(V,"$1"));return r[b]?se(function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}}),has:se(function(e){return function(t){return oe(e,t).length>0}}),contains:se(function(e){return e=e.replace(ne,re),function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}}),lang:se(function(e){return K.test(e||"")||oe.error("unsupported lang: "+e),e=e.replace(ne,re).toLowerCase(),function(t){var n;do{if(n=m?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===d},focus:function(e){return e===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return $.test(e.nodeName)},input:function(e){return X.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:fe(function(){return[0]}),last:fe(function(e,t){return[t-1]}),eq:fe(function(e,t,n){return[n<0?n+t:n]}),even:fe(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:fe(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:fe(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:fe(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=pe(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=he(t);function me(){}function _e(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function ye(e,t,n){var r=t.dir,i=n&&"parentNode"===r,o=E++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,o)}:function(t,n,a){var s,u,l=[w,o];if(a){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,a))return!0}else for(;t=t[r];)if(1===t.nodeType||i){if((s=(u=t[b]||(t[b]={}))[r])&&s[0]===w&&s[1]===o)return l[2]=s[2];if(u[r]=l,l[2]=e(t,n,a))return!0}}}function ve(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function ge(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function be(e,t,n,r,i,o){return r&&!r[b]&&(r=be(r)),i&&!i[b]&&(i=be(i,o)),se(function(o,a,s,u){var l,c,p,h=[],f=[],d=a.length,m=o||function(e,t,n){for(var r=0,i=t.length;r<i;r++)oe(e,t[r],n);return n}(t||"*",s.nodeType?[s]:s,[]),_=!e||!o&&t?m:ge(m,h,e,s,u),y=n?i||(o?e:d||r)?[]:a:_;if(n&&n(_,y,s,u),r)for(l=ge(y,f),r(l,[],s,u),c=l.length;c--;)(p=l[c])&&(y[f[c]]=!(_[f[c]]=p));if(o){if(i||e){if(i){for(l=[],c=y.length;c--;)(p=y[c])&&l.push(_[c]=p);i(null,y=[],l,u)}for(c=y.length;c--;)(p=y[c])&&(l=i?L(o,p):h[c])>-1&&(o[l]=!(a[l]=p))}}else y=ge(y===a?y.splice(d,y.length):y),i?i(null,a,y,u):R.apply(a,y)})}function xe(e){for(var t,n,i,o=e.length,a=r.relative[e[0].type],s=a||r.relative[" "],u=a?1:0,c=ye(function(e){return e===t},s,!0),p=ye(function(e){return L(t,e)>-1},s,!0),h=[function(e,n,r){var i=!a&&(r||n!==l)||((t=n).nodeType?c(e,n,r):p(e,n,r));return t=null,i}];u<o;u++)if(n=r.relative[e[u].type])h=[ye(ve(h),n)];else{if((n=r.filter[e[u].type].apply(null,e[u].matches))[b]){for(i=++u;i<o&&!r.relative[e[i].type];i++);return be(u>1&&ve(h),u>1&&_e(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(V,"$1"),n,u<i&&xe(e.slice(u,i)),i<o&&xe(e=e.slice(i)),i<o&&_e(e))}h.push(n)}return ve(h)}return me.prototype=r.filters=r.pseudos,r.setFilters=new me,a=oe.tokenize=function(e,t){var n,i,o,a,s,u,l,c=k[e+" "];if(c)return t?0:c.slice(0);for(s=e,u=[],l=r.preFilter;s;){for(a in n&&!(i=W.exec(s))||(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),n=!1,(i=G.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(V," ")}),s=s.slice(n.length)),r.filter)!(i=Y[a].exec(s))||l[a]&&!(i=l[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return t?s.length:s?oe.error(e):k(e,u).slice(0)},s=oe.compile=function(e,t){var n,i=[],o=[],s=C[e+" "];if(!s){for(t||(t=a(e)),n=t.length;n--;)(s=xe(t[n]))[b]?i.push(s):o.push(s);(s=C(e,function(e,t){var n=t.length>0,i=e.length>0,o=function(o,a,s,u,c){var p,h,d,m=0,_="0",y=o&&[],v=[],g=l,b=o||i&&r.find.TAG("*",c),x=w+=null==g?1:Math.random()||.1,E=b.length;for(c&&(l=a!==f&&a);_!==E&&null!=(p=b[_]);_++){if(i&&p){for(h=0;d=e[h++];)if(d(p,a,s)){u.push(p);break}c&&(w=x)}n&&((p=!d&&p)&&m--,o&&y.push(p))}if(m+=_,n&&_!==m){for(h=0;d=t[h++];)d(y,v,a,s);if(o){if(m>0)for(;_--;)y[_]||v[_]||(v[_]=O.call(u));v=ge(v)}R.apply(u,v),c&&!o&&v.length>0&&m+t.length>1&&oe.uniqueSort(u)}return c&&(w=x,l=g),y};return n?se(o):o}(o,i))).selector=e}return s},u=oe.select=function(e,t,i,o){var u,l,c,p,h,f="function"==typeof e&&e,d=!o&&a(e=f.selector||e);if(i=i||[],1===d.length){if((l=d[0]=d[0].slice(0)).length>2&&"ID"===(c=l[0]).type&&n.getById&&9===t.nodeType&&m&&r.relative[l[1].type]){if(!(t=(r.find.ID(c.matches[0].replace(ne,re),t)||[])[0]))return i;f&&(t=t.parentNode),e=e.slice(l.shift().value.length)}for(u=Y.needsContext.test(e)?0:l.length;u--&&(c=l[u],!r.relative[p=c.type]);)if((h=r.find[p])&&(o=h(c.matches[0].replace(ne,re),ee.test(l[0].type)&&de(t.parentNode)||t))){if(l.splice(u,1),!(e=o.length&&_e(l)))return R.apply(i,o),i;break}}return(f||s(e,d))(o,t,!m,i,ee.test(e)&&de(t.parentNode)||t),i},n.sortStable=b.split("").sort(M).join("")===b,n.detectDuplicates=!!p,h(),n.sortDetached=ue(function(e){return 1&e.compareDocumentPosition(f.createElement("div"))}),ue(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||le("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&ue(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||le("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ue(function(e){return null==e.getAttribute("disabled")})||le(z,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),oe}(n);m.find=x,m.expr=x.selectors,m.expr[":"]=m.expr.pseudos,m.unique=x.uniqueSort,m.text=x.getText,m.isXMLDoc=x.isXML,m.contains=x.contains;var w=m.expr.match.needsContext,E=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,T=/^.[^:#\[\.,]*$/;function k(e,t,n){if(m.isFunction(t))return m.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return m.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(T.test(t))return m.filter(t,e,n);t=m.filter(t,e)}return m.grep(e,function(e){return l.call(t,e)>=0!==n})}m.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?m.find.matchesSelector(r,e)?[r]:[]:m.find.matches(e,m.grep(t,function(e){return 1===e.nodeType}))},m.fn.extend({find:function(e){var t,n=this.length,r=[],i=this;if("string"!=typeof e)return this.pushStack(m(e).filter(function(){for(t=0;t<n;t++)if(m.contains(i[t],this))return!0}));for(t=0;t<n;t++)m.find(e,i[t],r);return(r=this.pushStack(n>1?m.unique(r):r)).selector=this.selector?this.selector+" "+e:e,r},filter:function(e){return this.pushStack(k(this,e||[],!1))},not:function(e){return this.pushStack(k(this,e||[],!0))},is:function(e){return!!k(this,"string"==typeof e&&w.test(e)?m(e):e||[],!1).length}});var C,M=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(m.fn.init=function(e,t){var n,r;if(!e)return this;if("string"==typeof e){if(!(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:M.exec(e))||!n[1]&&t)return!t||t.jquery?(t||C).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof m?t[0]:t,m.merge(this,m.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:d,!0)),E.test(n[1])&&m.isPlainObject(t))for(n in t)m.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return(r=d.getElementById(n[2]))&&r.parentNode&&(this.length=1,this[0]=r),this.context=d,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):m.isFunction(e)?void 0!==C.ready?C.ready(e):e(m):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),m.makeArray(e,this))}).prototype=m.fn,C=m(d);var P=/^(?:parents|prev(?:Until|All))/,A={children:!0,contents:!0,next:!0,prev:!0};function S(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}m.extend({dir:function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&m(e).is(n))break;r.push(e)}return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),m.fn.extend({has:function(e){var t=m(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(m.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,r=0,i=this.length,o=[],a=w.test(e)||"string"!=typeof e?m(e,t||this.context):0;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&m.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?m.unique(o):o)},index:function(e){return e?"string"==typeof e?l.call(m(e),this[0]):l.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(m.unique(m.merge(this.get(),m(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),m.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return m.dir(e,"parentNode")},parentsUntil:function(e,t,n){return m.dir(e,"parentNode",n)},next:function(e){return S(e,"nextSibling")},prev:function(e){return S(e,"previousSibling")},nextAll:function(e){return m.dir(e,"nextSibling")},prevAll:function(e){return m.dir(e,"previousSibling")},nextUntil:function(e,t,n){return m.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return m.dir(e,"previousSibling",n)},siblings:function(e){return m.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return m.sibling(e.firstChild)},contents:function(e){return e.contentDocument||m.merge([],e.childNodes)}},function(e,t){m.fn[e]=function(n,r){var i=m.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=m.filter(r,i)),this.length>1&&(A[e]||m.unique(i),P.test(e)&&i.reverse()),this.pushStack(i)}});var O,I=/\S+/g,R={};function j(){d.removeEventListener("DOMContentLoaded",j,!1),n.removeEventListener("load",j,!1),m.ready()}m.Callbacks=function(e){e="string"==typeof e?R[e]||function(e){var t=R[e]={};return m.each(e.match(I)||[],function(e,n){t[n]=!0}),t}(e):m.extend({},e);var t,n,r,i,o,a,s=[],u=!e.once&&[],l=function(p){for(t=e.memory&&p,n=!0,a=i||0,i=0,o=s.length,r=!0;s&&a<o;a++)if(!1===s[a].apply(p[0],p[1])&&e.stopOnFalse){t=!1;break}r=!1,s&&(u?u.length&&l(u.shift()):t?s=[]:c.disable())},c={add:function(){if(s){var n=s.length;!function t(n){m.each(n,function(n,r){var i=m.type(r);"function"===i?e.unique&&c.has(r)||s.push(r):r&&r.length&&"string"!==i&&t(r)})}(arguments),r?o=s.length:t&&(i=n,l(t))}return this},remove:function(){return s&&m.each(arguments,function(e,t){for(var n;(n=m.inArray(t,s,n))>-1;)s.splice(n,1),r&&(n<=o&&o--,n<=a&&a--)}),this},has:function(e){return e?m.inArray(e,s)>-1:!(!s||!s.length)},empty:function(){return s=[],o=0,this},disable:function(){return s=u=t=void 0,this},disabled:function(){return!s},lock:function(){return u=void 0,t||c.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!s||n&&!u||(t=[e,(t=t||[]).slice?t.slice():t],r?u.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},m.extend({Deferred:function(e){var t=[["resolve","done",m.Callbacks("once memory"),"resolved"],["reject","fail",m.Callbacks("once memory"),"rejected"],["notify","progress",m.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return m.Deferred(function(n){m.each(t,function(t,o){var a=m.isFunction(e[t])&&e[t];i[o[1]](function(){var e=a&&a.apply(this,arguments);e&&m.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===r?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?m.extend(e,r):r}},i={};return r.pipe=r.then,m.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t,n,r,i=0,o=a.call(arguments),s=o.length,u=1!==s||e&&m.isFunction(e.promise)?s:0,l=1===u?e:m.Deferred(),c=function(e,n,r){return function(i){n[e]=this,r[e]=arguments.length>1?a.call(arguments):i,r===t?l.notifyWith(n,r):--u||l.resolveWith(n,r)}};if(s>1)for(t=new Array(s),n=new Array(s),r=new Array(s);i<s;i++)o[i]&&m.isFunction(o[i].promise)?o[i].promise().done(c(i,r,o)).fail(l.reject).progress(c(i,n,t)):--u;return u||l.resolveWith(r,o),l.promise()}}),m.fn.ready=function(e){return m.ready.promise().done(e),this},m.extend({isReady:!1,readyWait:1,holdReady:function(e){e?m.readyWait++:m.ready(!0)},ready:function(e){(!0===e?--m.readyWait:m.isReady)||(m.isReady=!0,!0!==e&&--m.readyWait>0||(O.resolveWith(d,[m]),m.fn.triggerHandler&&(m(d).triggerHandler("ready"),m(d).off("ready"))))}}),m.ready.promise=function(e){return O||(O=m.Deferred(),"complete"===d.readyState?setTimeout(m.ready):(d.addEventListener("DOMContentLoaded",j,!1),n.addEventListener("load",j,!1))),O.promise(e)},m.ready.promise();var L=m.access=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===m.type(n))for(s in i=!0,n)m.access(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,m.isFunction(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(m(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o};function z(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=m.expando+z.uid++}m.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},z.uid=1,z.accepts=m.acceptData,z.prototype={key:function(e){if(!z.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=z.uid++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(r){t[this.expando]=n,m.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var r,i=this.key(e),o=this.cache[i];if("string"==typeof t)o[t]=n;else if(m.isEmptyObject(o))m.extend(this.cache[i],t);else for(r in t)o[r]=t[r];return o},get:function(e,t){var n=this.cache[this.key(e)];return void 0===t?n:n[t]},access:function(e,t,n){var r;return void 0===t||t&&"string"==typeof t&&void 0===n?void 0!==(r=this.get(e,t))?r:this.get(e,m.camelCase(t)):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r,i,o=this.key(e),a=this.cache[o];if(void 0===t)this.cache[o]={};else{m.isArray(t)?r=t.concat(t.map(m.camelCase)):(i=m.camelCase(t),r=t in a?[t,i]:(r=i)in a?[r]:r.match(I)||[]),n=r.length;for(;n--;)delete a[r[n]]}},hasData:function(e){return!m.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var D=new z,B=new z,N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,q=/([A-Z])/g;function F(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(q,"-$1").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:N.test(n)?m.parseJSON(n):n)}catch(e){}B.set(e,t,n)}else n=void 0;return n}m.extend({hasData:function(e){return B.hasData(e)||D.hasData(e)},data:function(e,t,n){return B.access(e,t,n)},removeData:function(e,t){B.remove(e,t)},_data:function(e,t,n){return D.access(e,t,n)},_removeData:function(e,t){D.remove(e,t)}}),m.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=B.get(o),1===o.nodeType&&!D.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=m.camelCase(r.slice(5)),F(o,r,i[r]));D.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){B.set(this,e)}):L(this,function(t){var n,r=m.camelCase(e);if(o&&void 0===t)return void 0!==(n=B.get(o,e))?n:void 0!==(n=B.get(o,r))?n:void 0!==(n=F(o,r,void 0))?n:void 0;this.each(function(){var n=B.get(this,r);B.set(this,r,t),-1!==e.indexOf("-")&&void 0!==n&&B.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){B.remove(this,e)})}}),m.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=D.get(e,t),n&&(!r||m.isArray(n)?r=D.access(e,t,m.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=m.queue(e,t),r=n.length,i=n.shift(),o=m._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){m.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return D.get(e,n)||D.access(e,n,{empty:m.Callbacks("once memory").add(function(){D.remove(e,[t+"queue",n])})})}}),m.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?m.queue(this[0],e):void 0===t?this:this.each(function(){var n=m.queue(this,e,t);m._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&m.dequeue(this,e)})},dequeue:function(e){return this.each(function(){m.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=m.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=D.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var U,V,W=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,G=["Top","Right","Bottom","Left"],Z=function(e,t){return e=t||e,"none"===m.css(e,"display")||!m.contains(e.ownerDocument,e)},H=/^(?:checkbox|radio)$/i;U=d.createDocumentFragment().appendChild(d.createElement("div")),(V=d.createElement("input")).setAttribute("type","radio"),V.setAttribute("checked","checked"),V.setAttribute("name","t"),U.appendChild(V),f.checkClone=U.cloneNode(!0).cloneNode(!0).lastChild.checked,U.innerHTML="<textarea>x</textarea>",f.noCloneChecked=!!U.cloneNode(!0).lastChild.defaultValue,f.focusinBubbles="onfocusin"in n;var K=/^key/,Y=/^(?:mouse|pointer|contextmenu)|click/,X=/^(?:focusinfocus|focusoutblur)$/,$=/^([^.]*)(?:\.(.+)|)$/;function J(){return!0}function Q(){return!1}function ee(){try{return d.activeElement}catch(e){}}m.event={global:{},add:function(e,t,n,r,i){var o,a,s,u,l,c,p,h,f,d,_,y=D.get(e);if(y)for(n.handler&&(n=(o=n).handler,i=o.selector),n.guid||(n.guid=m.guid++),(u=y.events)||(u=y.events={}),(a=y.handle)||(a=y.handle=function(t){return void 0!==m&&m.event.triggered!==t.type?m.event.dispatch.apply(e,arguments):void 0}),l=(t=(t||"").match(I)||[""]).length;l--;)f=_=(s=$.exec(t[l])||[])[1],d=(s[2]||"").split(".").sort(),f&&(p=m.event.special[f]||{},f=(i?p.delegateType:p.bindType)||f,p=m.event.special[f]||{},c=m.extend({type:f,origType:_,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&m.expr.match.needsContext.test(i),namespace:d.join(".")},o),(h=u[f])||((h=u[f]=[]).delegateCount=0,p.setup&&!1!==p.setup.call(e,r,d,a)||e.addEventListener&&e.addEventListener(f,a,!1)),p.add&&(p.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?h.splice(h.delegateCount++,0,c):h.push(c),m.event.global[f]=!0)},remove:function(e,t,n,r,i){var o,a,s,u,l,c,p,h,f,d,_,y=D.hasData(e)&&D.get(e);if(y&&(u=y.events)){for(l=(t=(t||"").match(I)||[""]).length;l--;)if(f=_=(s=$.exec(t[l])||[])[1],d=(s[2]||"").split(".").sort(),f){for(p=m.event.special[f]||{},h=u[f=(r?p.delegateType:p.bindType)||f]||[],s=s[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=h.length;o--;)c=h[o],!i&&_!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(h.splice(o,1),c.selector&&h.delegateCount--,p.remove&&p.remove.call(e,c));a&&!h.length&&(p.teardown&&!1!==p.teardown.call(e,d,y.handle)||m.removeEvent(e,f,y.handle),delete u[f])}else for(f in u)m.event.remove(e,f+t[l],n,r,!0);m.isEmptyObject(u)&&(delete y.handle,D.remove(e,"events"))}},trigger:function(e,t,r,i){var o,a,s,u,l,c,p,f=[r||d],_=h.call(e,"type")?e.type:e,y=h.call(e,"namespace")?e.namespace.split("."):[];if(a=s=r=r||d,3!==r.nodeType&&8!==r.nodeType&&!X.test(_+m.event.triggered)&&(_.indexOf(".")>=0&&(y=_.split("."),_=y.shift(),y.sort()),l=_.indexOf(":")<0&&"on"+_,(e=e[m.expando]?e:new m.Event(_,"object"==typeof e&&e)).isTrigger=i?2:3,e.namespace=y.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:m.makeArray(t,[e]),p=m.event.special[_]||{},i||!p.trigger||!1!==p.trigger.apply(r,t))){if(!i&&!p.noBubble&&!m.isWindow(r)){for(u=p.delegateType||_,X.test(u+_)||(a=a.parentNode);a;a=a.parentNode)f.push(a),s=a;s===(r.ownerDocument||d)&&f.push(s.defaultView||s.parentWindow||n)}for(o=0;(a=f[o++])&&!e.isPropagationStopped();)e.type=o>1?u:p.bindType||_,(c=(D.get(a,"events")||{})[e.type]&&D.get(a,"handle"))&&c.apply(a,t),(c=l&&a[l])&&c.apply&&m.acceptData(a)&&(e.result=c.apply(a,t),!1===e.result&&e.preventDefault());return e.type=_,i||e.isDefaultPrevented()||p._default&&!1!==p._default.apply(f.pop(),t)||!m.acceptData(r)||l&&m.isFunction(r[_])&&!m.isWindow(r)&&((s=r[l])&&(r[l]=null),m.event.triggered=_,r[_](),m.event.triggered=void 0,s&&(r[l]=s)),e.result}},dispatch:function(e){e=m.event.fix(e);var t,n,r,i,o,s=[],u=a.call(arguments),l=(D.get(this,"events")||{})[e.type]||[],c=m.event.special[e.type]||{};if(u[0]=e,e.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,e)){for(s=m.event.handlers.call(this,e,l),t=0;(i=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!e.isImmediatePropagationStopped();)e.namespace_re&&!e.namespace_re.test(o.namespace)||(e.handleObj=o,e.data=o.data,void 0!==(r=((m.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,u))&&!1===(e.result=r)&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,o,a=[],s=t.delegateCount,u=e.target;if(s&&u.nodeType&&(!e.button||"click"!==e.type))for(;u!==this;u=u.parentNode||this)if(!0!==u.disabled||"click"!==e.type){for(r=[],n=0;n<s;n++)void 0===r[i=(o=t[n]).selector+" "]&&(r[i]=o.needsContext?m(i,this).index(u)>=0:m.find(i,this,null,[u]).length),r[i]&&r.push(o);r.length&&a.push({elem:u,handlers:r})}return s<t.length&&a.push({elem:this,handlers:t.slice(s)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,o=t.button;return null==e.pageX&&null!=t.clientX&&(r=(n=e.target.ownerDocument||d).documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[m.expando])return e;var t,n,r,i=e.type,o=e,a=this.fixHooks[i];for(a||(this.fixHooks[i]=a=Y.test(i)?this.mouseHooks:K.test(i)?this.keyHooks:{}),r=a.props?this.props.concat(a.props):this.props,e=new m.Event(o),t=r.length;t--;)e[n=r[t]]=o[n];return e.target||(e.target=d),3===e.target.nodeType&&(e.target=e.target.parentNode),a.filter?a.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==ee()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===ee()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&m.nodeName(this,"input"))return this.click(),!1},_default:function(e){return m.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=m.extend(new m.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?m.event.trigger(i,null,t):m.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},m.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},m.Event=function(e,t){if(!(this instanceof m.Event))return new m.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?J:Q):this.type=e,t&&m.extend(this,t),this.timeStamp=e&&e.timeStamp||m.now(),this[m.expando]=!0},m.Event.prototype={isDefaultPrevented:Q,isPropagationStopped:Q,isImmediatePropagationStopped:Q,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=J,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=J,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=J,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},m.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){m.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return i&&(i===r||m.contains(r,i))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),f.focusinBubbles||m.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){m.event.simulate(t,e.target,m.event.fix(e),!0)};m.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=D.access(r,t);i||r.addEventListener(e,n,!0),D.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=D.access(r,t)-1;i?D.access(r,t,i):(r.removeEventListener(e,n,!0),D.remove(r,t))}}}),m.fn.extend({on:function(e,t,n,r,i){var o,a;if("object"==typeof e){for(a in"string"!=typeof t&&(n=n||t,t=void 0),e)this.on(a,t,n,e[a],i);return this}if(null==n&&null==r?(r=t,n=t=void 0):null==r&&("string"==typeof t?(r=n,n=void 0):(r=n,n=t,t=void 0)),!1===r)r=Q;else if(!r)return this;return 1===i&&(o=r,(r=function(e){return m().off(e),o.apply(this,arguments)}).guid=o.guid||(o.guid=m.guid++)),this.each(function(){m.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,m(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Q),this.each(function(){m.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){m.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return m.event.trigger(e,t,n,!0)}});var te=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ne=/<([\w:]+)/,re=/<|&#?\w+;/,ie=/<(?:script|style|link)/i,oe=/checked\s*(?:[^=]|=\s*.checked.)/i,ae=/^$|\/(?:java|ecma)script/i,se=/^true\/(.*)/,ue=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,le={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ce(e,t){return m.nodeName(e,"table")&&m.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function pe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function he(e){var t=se.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function fe(e,t){for(var n=0,r=e.length;n<r;n++)D.set(e[n],"globalEval",!t||D.get(t[n],"globalEval"))}function de(e,t){var n,r,i,o,a,s,u,l;if(1===t.nodeType){if(D.hasData(e)&&(o=D.access(e),a=D.set(t,o),l=o.events))for(i in delete a.handle,a.events={},l)for(n=0,r=l[i].length;n<r;n++)m.event.add(t,i,l[i][n]);B.hasData(e)&&(s=B.access(e),u=m.extend({},s),B.set(t,u))}}function me(e,t){var n=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&m.nodeName(e,t)?m.merge([e],n):n}le.optgroup=le.option,le.tbody=le.tfoot=le.colgroup=le.caption=le.thead,le.th=le.td,m.extend({clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),p=m.contains(e.ownerDocument,e);if(!(f.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||m.isXMLDoc(e)))for(a=me(c),r=0,i=(o=me(e)).length;r<i;r++)s=o[r],u=a[r],l=void 0,"input"===(l=u.nodeName.toLowerCase())&&H.test(s.type)?u.checked=s.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||me(e),a=a||me(c),r=0,i=o.length;r<i;r++)de(o[r],a[r]);else de(e,c);return(a=me(c,"script")).length>0&&fe(a,!p&&me(e,"script")),c},buildFragment:function(e,t,n,r){for(var i,o,a,s,u,l,c=t.createDocumentFragment(),p=[],h=0,f=e.length;h<f;h++)if((i=e[h])||0===i)if("object"===m.type(i))m.merge(p,i.nodeType?[i]:i);else if(re.test(i)){for(o=o||c.appendChild(t.createElement("div")),a=(ne.exec(i)||["",""])[1].toLowerCase(),s=le[a]||le._default,o.innerHTML=s[1]+i.replace(te,"<$1></$2>")+s[2],l=s[0];l--;)o=o.lastChild;m.merge(p,o.childNodes),(o=c.firstChild).textContent=""}else p.push(t.createTextNode(i));for(c.textContent="",h=0;i=p[h++];)if((!r||-1===m.inArray(i,r))&&(u=m.contains(i.ownerDocument,i),o=me(c.appendChild(i),"script"),u&&fe(o),n))for(l=0;i=o[l++];)ae.test(i.type||"")&&n.push(i);return c},cleanData:function(e){for(var t,n,r,i,o=m.event.special,a=0;void 0!==(n=e[a]);a++){if(m.acceptData(n)&&(i=n[D.expando])&&(t=D.cache[i])){if(t.events)for(r in t.events)o[r]?m.event.remove(n,r):m.removeEvent(n,r,t.handle);D.cache[i]&&delete D.cache[i]}delete B.cache[n[B.expando]]}}}),m.fn.extend({text:function(e){return L(this,function(e){return void 0===e?m.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||ce(this,e).appendChild(e)})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=ce(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=e?m.filter(e,this):this,i=0;null!=(n=r[i]);i++)t||1!==n.nodeType||m.cleanData(me(n)),n.parentNode&&(t&&m.contains(n.ownerDocument,n)&&fe(me(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(m.cleanData(me(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return m.clone(this,e,t)})},html:function(e){return L(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!ie.test(e)&&!le[(ne.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(te,"<$1></$2>");try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(m.cleanData(me(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,m.cleanData(me(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=s.apply([],e);var n,r,i,o,a,u,l=0,c=this.length,p=this,h=c-1,d=e[0],_=m.isFunction(d);if(_||c>1&&"string"==typeof d&&!f.checkClone&&oe.test(d))return this.each(function(n){var r=p.eq(n);_&&(e[0]=d.call(this,n,r.html())),r.domManip(e,t)});if(c&&(r=(n=m.buildFragment(e,this[0].ownerDocument,!1,this)).firstChild,1===n.childNodes.length&&(n=r),r)){for(o=(i=m.map(me(n,"script"),pe)).length;l<c;l++)a=n,l!==h&&(a=m.clone(a,!0,!0),o&&m.merge(i,me(a,"script"))),t.call(this[l],a,l);if(o)for(u=i[i.length-1].ownerDocument,m.map(i,he),l=0;l<o;l++)a=i[l],ae.test(a.type||"")&&!D.access(a,"globalEval")&&m.contains(u,a)&&(a.src?m._evalUrl&&m._evalUrl(a.src):m.globalEval(a.textContent.replace(ue,"")))}return this}}),m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){m.fn[e]=function(e){for(var n,r=[],i=m(e),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),m(i[a])[t](n),u.apply(r,n.get());return this.pushStack(r)}});var _e,ye={};function ve(e,t){var r,i=m(t.createElement(e)).appendTo(t.body),o=n.getDefaultComputedStyle&&(r=n.getDefaultComputedStyle(i[0]))?r.display:m.css(i[0],"display");return i.detach(),o}function ge(e){var t=d,n=ye[e];return n||("none"!==(n=ve(e,t))&&n||((t=(_e=(_e||m("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentDocument).write(),t.close(),n=ve(e,t),_e.detach()),ye[e]=n),n}var be=/^margin/,xe=new RegExp("^("+W+")(?!px)[a-z%]+$","i"),we=function(e){return e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):n.getComputedStyle(e,null)};function Ee(e,t,n){var r,i,o,a,s=e.style;return(n=n||we(e))&&(a=n.getPropertyValue(t)||n[t]),n&&(""!==a||m.contains(e.ownerDocument,e)||(a=m.style(e,t)),xe.test(a)&&be.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function Te(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){var e,t,r=d.documentElement,i=d.createElement("div"),o=d.createElement("div");function a(){o.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",o.innerHTML="",r.appendChild(i);var a=n.getComputedStyle(o,null);e="1%"!==a.top,t="4px"===a.width,r.removeChild(i)}o.style&&(o.style.backgroundClip="content-box",o.cloneNode(!0).style.backgroundClip="",f.clearCloneStyle="content-box"===o.style.backgroundClip,i.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",i.appendChild(o),n.getComputedStyle&&m.extend(f,{pixelPosition:function(){return a(),e},boxSizingReliable:function(){return null==t&&a(),t},reliableMarginRight:function(){var e,t=o.appendChild(d.createElement("div"));return t.style.cssText=o.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",o.style.width="1px",r.appendChild(i),e=!parseFloat(n.getComputedStyle(t,null).marginRight),r.removeChild(i),o.removeChild(t),e}}))}(),m.swap=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];for(o in i=n.apply(e,r||[]),t)e.style[o]=a[o];return i};var ke=/^(none|table(?!-c[ea]).+)/,Ce=new RegExp("^("+W+")(.*)$","i"),Me=new RegExp("^([+-])=("+W+")","i"),Pe={position:"absolute",visibility:"hidden",display:"block"},Ae={letterSpacing:"0",fontWeight:"400"},Se=["Webkit","O","Moz","ms"];function Oe(e,t){if(t in e)return t;for(var n=t[0].toUpperCase()+t.slice(1),r=t,i=Se.length;i--;)if((t=Se[i]+n)in e)return t;return r}function Ie(e,t,n){var r=Ce.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function Re(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,a=0;o<4;o+=2)"margin"===n&&(a+=m.css(e,n+G[o],!0,i)),r?("content"===n&&(a-=m.css(e,"padding"+G[o],!0,i)),"margin"!==n&&(a-=m.css(e,"border"+G[o]+"Width",!0,i))):(a+=m.css(e,"padding"+G[o],!0,i),"padding"!==n&&(a+=m.css(e,"border"+G[o]+"Width",!0,i)));return a}function je(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=we(e),a="border-box"===m.css(e,"boxSizing",!1,o);if(i<=0||null==i){if(((i=Ee(e,t,o))<0||null==i)&&(i=e.style[t]),xe.test(i))return i;r=a&&(f.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+Re(e,t,n||(a?"border":"content"),r,o)+"px"}function Le(e,t){for(var n,r,i,o=[],a=0,s=e.length;a<s;a++)(r=e[a]).style&&(o[a]=D.get(r,"olddisplay"),n=r.style.display,t?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&Z(r)&&(o[a]=D.access(r,"olddisplay",ge(r.nodeName)))):(i=Z(r),"none"===n&&i||D.set(r,"olddisplay",i?n:m.css(r,"display"))));for(a=0;a<s;a++)(r=e[a]).style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[a]||"":"none"));return e}function ze(e,t,n,r,i){return new ze.prototype.init(e,t,n,r,i)}m.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ee(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=m.camelCase(t),u=e.style;if(t=m.cssProps[s]||(m.cssProps[s]=Oe(u,s)),a=m.cssHooks[t]||m.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:u[t];"string"===(o=typeof n)&&(i=Me.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(m.css(e,t)),o="number"),null!=n&&n==n&&("number"!==o||m.cssNumber[s]||(n+="px"),f.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u[t]=n))}},css:function(e,t,n,r){var i,o,a,s=m.camelCase(t);return t=m.cssProps[s]||(m.cssProps[s]=Oe(e.style,s)),(a=m.cssHooks[t]||m.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=Ee(e,t,r)),"normal"===i&&t in Ae&&(i=Ae[t]),""===n||n?(o=parseFloat(i),!0===n||m.isNumeric(o)?o||0:i):i}}),m.each(["height","width"],function(e,t){m.cssHooks[t]={get:function(e,n,r){if(n)return ke.test(m.css(e,"display"))&&0===e.offsetWidth?m.swap(e,Pe,function(){return je(e,t,r)}):je(e,t,r)},set:function(e,n,r){var i=r&&we(e);return Ie(0,n,r?Re(e,t,r,"border-box"===m.css(e,"boxSizing",!1,i),i):0)}}}),m.cssHooks.marginRight=Te(f.reliableMarginRight,function(e,t){if(t)return m.swap(e,{display:"inline-block"},Ee,[e,"marginRight"])}),m.each({margin:"",padding:"",border:"Width"},function(e,t){m.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+G[r]+t]=o[r]||o[r-2]||o[0];return i}},be.test(e)||(m.cssHooks[e+t].set=Ie)}),m.fn.extend({css:function(e,t){return L(this,function(e,t,n){var r,i,o={},a=0;if(m.isArray(t)){for(r=we(e),i=t.length;a<i;a++)o[t[a]]=m.css(e,t[a],!1,r);return o}return void 0!==n?m.style(e,t,n):m.css(e,t)},e,t,arguments.length>1)},show:function(){return Le(this,!0)},hide:function(){return Le(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Z(this)?m(this).show():m(this).hide()})}}),m.Tween=ze,ze.prototype={constructor:ze,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(m.cssNumber[n]?"":"px")},cur:function(){var e=ze.propHooks[this.prop];return e&&e.get?e.get(this):ze.propHooks._default.get(this)},run:function(e){var t,n=ze.propHooks[this.prop];return this.options.duration?this.pos=t=m.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ze.propHooks._default.set(this),this}},ze.prototype.init.prototype=ze.prototype,ze.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=m.css(e.elem,e.prop,""))&&"auto"!==t?t:0:e.elem[e.prop]},set:function(e){m.fx.step[e.prop]?m.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[m.cssProps[e.prop]]||m.cssHooks[e.prop])?m.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},ze.propHooks.scrollTop=ze.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},m.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},m.fx=ze.prototype.init,m.fx.step={};var De,Be,Ne=/^(?:toggle|show|hide)$/,qe=new RegExp("^(?:([+-])=|)("+W+")([a-z%]*)$","i"),Fe=/queueHooks$/,Ue=[function(e,t,n){var r,i,o,a,s,u,l,c=this,p={},h=e.style,f=e.nodeType&&Z(e),d=D.get(e,"fxshow");n.queue||(null==(s=m._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,u=s.empty.fire,s.empty.fire=function(){s.unqueued||u()}),s.unqueued++,c.always(function(){c.always(function(){s.unqueued--,m.queue(e,"fx").length||s.empty.fire()})}));1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],l=m.css(e,"display"),"inline"===("none"===l?D.get(e,"olddisplay")||ge(e.nodeName):l)&&"none"===m.css(e,"float")&&(h.display="inline-block"));n.overflow&&(h.overflow="hidden",c.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],Ne.exec(i)){if(delete t[r],o=o||"toggle"===i,i===(f?"hide":"show")){if("show"!==i||!d||void 0===d[r])continue;f=!0}p[r]=d&&d[r]||m.style(e,r)}else l=void 0;if(m.isEmptyObject(p))"inline"===("none"===l?ge(e.nodeName):l)&&(h.display=l);else for(r in d?"hidden"in d&&(f=d.hidden):d=D.access(e,"fxshow",{}),o&&(d.hidden=!f),f?m(e).show():c.done(function(){m(e).hide()}),c.done(function(){var t;for(t in D.remove(e,"fxshow"),p)m.style(e,t,p[t])}),p)a=Ze(f?d[r]:0,r,c),r in d||(d[r]=a.start,f&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}],Ve={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=qe.exec(t),o=i&&i[3]||(m.cssNumber[e]?"":"px"),a=(m.cssNumber[e]||"px"!==o&&+r)&&qe.exec(m.css(n.elem,e)),s=1,u=20;if(a&&a[3]!==o){o=o||a[3],i=i||[],a=+r||1;do{a/=s=s||".5",m.style(n.elem,e,a+o)}while(s!==(s=n.cur()/r)&&1!==s&&--u)}return i&&(a=n.start=+a||+r||0,n.unit=o,n.end=i[1]?a+(i[1]+1)*i[2]:+i[2]),n}]};function We(){return setTimeout(function(){De=void 0}),De=m.now()}function Ge(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=G[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function Ze(e,t,n){for(var r,i=(Ve[t]||[]).concat(Ve["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function He(e,t,n){var r,i,o=0,a=Ue.length,s=m.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=De||We(),n=Math.max(0,l.startTime+l.duration-t),r=1-(n/l.duration||0),o=0,a=l.tweens.length;o<a;o++)l.tweens[o].run(r);return s.notifyWith(e,[l,r,n]),r<1&&a?n:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:m.extend({},t),opts:m.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:De||We(),duration:n.duration,tweens:[],createTween:function(t,n){var r=m.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)l.tweens[n].run(1);return t?s.resolveWith(e,[l,t]):s.rejectWith(e,[l,t]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=m.camelCase(n)],o=e[n],m.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=m.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);o<a;o++)if(r=Ue[o].call(l,e,c,l.opts))return r;return m.map(c,Ze,l),m.isFunction(l.opts.start)&&l.opts.start.call(e,l),m.fx.timer(m.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}m.Animation=m.extend(He,{tweener:function(e,t){m.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;r<i;r++)n=e[r],Ve[n]=Ve[n]||[],Ve[n].unshift(t)},prefilter:function(e,t){t?Ue.unshift(e):Ue.push(e)}}),m.speed=function(e,t,n){var r=e&&"object"==typeof e?m.extend({},e):{complete:n||!n&&t||m.isFunction(e)&&e,duration:e,easing:n&&t||t&&!m.isFunction(t)&&t};return r.duration=m.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in m.fx.speeds?m.fx.speeds[r.duration]:m.fx.speeds._default,null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){m.isFunction(r.old)&&r.old.call(this),r.queue&&m.dequeue(this,r.queue)},r},m.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Z).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=m.isEmptyObject(e),o=m.speed(t,n,r),a=function(){var t=He(this,m.extend({},e),o);(i||D.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=m.timers,a=D.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&Fe.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||m.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=D.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=m.timers,a=r?r.length:0;for(n.finish=!0,m.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),m.each(["toggle","show","hide"],function(e,t){var n=m.fn[t];m.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(Ge(t,!0),e,r,i)}}),m.each({slideDown:Ge("show"),slideUp:Ge("hide"),slideToggle:Ge("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){m.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),m.timers=[],m.fx.tick=function(){var e,t=0,n=m.timers;for(De=m.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||m.fx.stop(),De=void 0},m.fx.timer=function(e){m.timers.push(e),e()?m.fx.start():m.timers.pop()},m.fx.interval=13,m.fx.start=function(){Be||(Be=setInterval(m.fx.tick,m.fx.interval))},m.fx.stop=function(){clearInterval(Be),Be=null},m.fx.speeds={slow:600,fast:200,_default:400},m.fn.delay=function(e,t){return e=m.fx&&m.fx.speeds[e]||e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e=d.createElement("input"),t=d.createElement("select"),n=t.appendChild(d.createElement("option"));e.type="checkbox",f.checkOn=""!==e.value,f.optSelected=n.selected,t.disabled=!0,f.optDisabled=!n.disabled,(e=d.createElement("input")).value="t",e.type="radio",f.radioValue="t"===e.value}();var Ke,Ye=m.expr.attrHandle;m.fn.extend({attr:function(e,t){return L(this,m.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){m.removeAttr(this,e)})}}),m.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?m.prop(e,t,n):(1===o&&m.isXMLDoc(e)||(t=t.toLowerCase(),r=m.attrHooks[t]||(m.expr.match.bool.test(t)?Ke:void 0)),void 0===n?r&&"get"in r&&null!==(i=r.get(e,t))?i:null==(i=m.find.attr(e,t))?void 0:i:null!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):void m.removeAttr(e,t))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(I);if(o&&1===e.nodeType)for(;n=o[i++];)r=m.propFix[n]||n,m.expr.match.bool.test(n)&&(e[r]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!f.radioValue&&"radio"===t&&m.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),Ke={set:function(e,t,n){return!1===t?m.removeAttr(e,n):e.setAttribute(n,n),n}},m.each(m.expr.match.bool.source.match(/\w+/g),function(e,t){var n=Ye[t]||m.find.attr;Ye[t]=function(e,t,r){var i,o;return r||(o=Ye[t],Ye[t]=i,i=null!=n(e,t,r)?t.toLowerCase():null,Ye[t]=o),i}});var Xe=/^(?:input|select|textarea|button)$/i;m.fn.extend({prop:function(e,t){return L(this,m.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[m.propFix[e]||e]})}}),m.extend({propFix:{for:"htmlFor",class:"className"},prop:function(e,t,n){var r,i,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return(1!==o||!m.isXMLDoc(e))&&(t=m.propFix[t]||t,i=m.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||Xe.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),f.optSelected||(m.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),m.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){m.propFix[this.toLowerCase()]=this});var $e=/[\t\r\n\f]/g;m.fn.extend({addClass:function(e){var t,n,r,i,o,a,s="string"==typeof e&&e,u=0,l=this.length;if(m.isFunction(e))return this.each(function(t){m(this).addClass(e.call(this,t,this.className))});if(s)for(t=(e||"").match(I)||[];u<l;u++)if(r=1===(n=this[u]).nodeType&&(n.className?(" "+n.className+" ").replace($e," "):" ")){for(o=0;i=t[o++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");a=m.trim(r),n.className!==a&&(n.className=a)}return this},removeClass:function(e){var t,n,r,i,o,a,s=0===arguments.length||"string"==typeof e&&e,u=0,l=this.length;if(m.isFunction(e))return this.each(function(t){m(this).removeClass(e.call(this,t,this.className))});if(s)for(t=(e||"").match(I)||[];u<l;u++)if(r=1===(n=this[u]).nodeType&&(n.className?(" "+n.className+" ").replace($e," "):"")){for(o=0;i=t[o++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");a=e?m.trim(r):"",n.className!==a&&(n.className=a)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):m.isFunction(e)?this.each(function(n){m(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var t,r=0,i=m(this),o=e.match(I)||[];t=o[r++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else"undefined"!==n&&"boolean"!==n||(this.className&&D.set(this,"__className__",this.className),this.className=this.className||!1===e?"":D.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;n<r;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace($e," ").indexOf(t)>=0)return!0;return!1}});var Je=/\r/g;m.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=m.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,m(this).val()):e)?i="":"number"==typeof i?i+="":m.isArray(i)&&(i=m.map(i,function(e){return null==e?"":e+""})),(t=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))})):i?(t=m.valHooks[i.type]||m.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(Je,""):null==n?"":n:void 0}}),m.extend({valHooks:{option:{get:function(e){var t=m.find.attr(e,"value");return null!=t?t:m.trim(m.text(e))}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||i<0,a=o?null:[],s=o?i+1:r.length,u=i<0?s:o?i:0;u<s;u++)if(((n=r[u]).selected||u===i)&&(f.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!m.nodeName(n.parentNode,"optgroup"))){if(t=m(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,r,i=e.options,o=m.makeArray(t),a=i.length;a--;)((r=i[a]).selected=m.inArray(r.value,o)>=0)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),m.each(["radio","checkbox"],function(){m.valHooks[this]={set:function(e,t){if(m.isArray(t))return e.checked=m.inArray(m(e).val(),t)>=0}},f.checkOn||(m.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),m.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){m.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),m.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var Qe=m.now(),et=/\?/;m.parseJSON=function(e){return JSON.parse(e+"")},m.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||m.error("Invalid XML: "+e),t};var tt=/#.*$/,nt=/([?&])_=[^&]*/,rt=/^(.*?):[ \t]*([^\r\n]*)$/gm,it=/^(?:GET|HEAD)$/,ot=/^\/\//,at=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,st={},ut={},lt="*/".concat("*"),ct=n.location.href,pt=at.exec(ct.toLowerCase())||[];function ht(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(I)||[];if(m.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function ft(e,t,n,r){var i={},o=e===ut;function a(s){var u;return i[s]=!0,m.each(e[s]||[],function(e,s){var l=s(t,n,r);return"string"!=typeof l||o||i[l]?o?!(u=l):void 0:(t.dataTypes.unshift(l),a(l),!1)}),u}return a(t.dataTypes[0])||!i["*"]&&a("*")}function dt(e,t){var n,r,i=m.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&m.extend(!0,e,r),e}m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ct,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(pt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":lt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":m.parseJSON,"text xml":m.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?dt(dt(e,m.ajaxSettings),t):dt(m.ajaxSettings,e)},ajaxPrefilter:ht(st),ajaxTransport:ht(ut),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,r,i,o,a,s,u,l,c=m.ajaxSetup({},t),p=c.context||c,h=c.context&&(p.nodeType||p.jquery)?m(p):m.event,f=m.Deferred(),d=m.Callbacks("once memory"),_=c.statusCode||{},y={},v={},g=0,b="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===g){if(!o)for(o={};t=rt.exec(i);)o[t[1].toLowerCase()]=t[2];t=o[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===g?i:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return g||(e=v[n]=v[n]||e,y[e]=t),this},overrideMimeType:function(e){return g||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(g<2)for(t in e)_[t]=[_[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||b;return n&&n.abort(t),w(0,t),this}};if(f.promise(x).complete=d.add,x.success=x.done,x.error=x.fail,c.url=((e||c.url||ct)+"").replace(tt,"").replace(ot,pt[1]+"//"),c.type=t.method||t.type||c.method||c.type,c.dataTypes=m.trim(c.dataType||"*").toLowerCase().match(I)||[""],null==c.crossDomain&&(s=at.exec(c.url.toLowerCase()),c.crossDomain=!(!s||s[1]===pt[1]&&s[2]===pt[2]&&(s[3]||("http:"===s[1]?"80":"443"))===(pt[3]||("http:"===pt[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=m.param(c.data,c.traditional)),ft(st,c,t,x),2===g)return x;for(l in(u=m.event&&c.global)&&0==m.active++&&m.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!it.test(c.type),r=c.url,c.hasContent||(c.data&&(r=c.url+=(et.test(r)?"&":"?")+c.data,delete c.data),!1===c.cache&&(c.url=nt.test(r)?r.replace(nt,"$1_="+Qe++):r+(et.test(r)?"&":"?")+"_="+Qe++)),c.ifModified&&(m.lastModified[r]&&x.setRequestHeader("If-Modified-Since",m.lastModified[r]),m.etag[r]&&x.setRequestHeader("If-None-Match",m.etag[r])),(c.data&&c.hasContent&&!1!==c.contentType||t.contentType)&&x.setRequestHeader("Content-Type",c.contentType),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+lt+"; q=0.01":""):c.accepts["*"]),c.headers)x.setRequestHeader(l,c.headers[l]);if(c.beforeSend&&(!1===c.beforeSend.call(p,x,c)||2===g))return x.abort();for(l in b="abort",{success:1,error:1,complete:1})x[l](c[l]);if(n=ft(ut,c,t,x)){x.readyState=1,u&&h.trigger("ajaxSend",[x,c]),c.async&&c.timeout>0&&(a=setTimeout(function(){x.abort("timeout")},c.timeout));try{g=1,n.send(y,w)}catch(e){if(!(g<2))throw e;w(-1,e)}}else w(-1,"No Transport");function w(e,t,o,s){var l,y,v,b,w,E=t;2!==g&&(g=2,a&&clearTimeout(a),n=void 0,i=s||"",x.readyState=e>0?4:0,l=e>=200&&e<300||304===e,o&&(b=function(e,t,n){for(var r,i,o,a,s=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(c,x,o)),b=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(c,b,x,l),l?(c.ifModified&&((w=x.getResponseHeader("Last-Modified"))&&(m.lastModified[r]=w),(w=x.getResponseHeader("etag"))&&(m.etag[r]=w)),204===e||"HEAD"===c.type?E="nocontent":304===e?E="notmodified":(E=b.state,y=b.data,l=!(v=b.error))):(v=E,!e&&E||(E="error",e<0&&(e=0))),x.status=e,x.statusText=(t||E)+"",l?f.resolveWith(p,[y,E,x]):f.rejectWith(p,[x,E,v]),x.statusCode(_),_=void 0,u&&h.trigger(l?"ajaxSuccess":"ajaxError",[x,c,l?y:v]),d.fireWith(p,[x,E]),u&&(h.trigger("ajaxComplete",[x,c]),--m.active||m.event.trigger("ajaxStop")))}return x},getJSON:function(e,t,n){return m.get(e,t,n,"json")},getScript:function(e,t){return m.get(e,void 0,t,"script")}}),m.each(["get","post"],function(e,t){m[t]=function(e,n,r,i){return m.isFunction(n)&&(i=i||r,r=n,n=void 0),m.ajax({url:e,type:t,dataType:i,data:n,success:r})}}),m._evalUrl=function(e){return m.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},m.fn.extend({wrapAll:function(e){var t;return m.isFunction(e)?this.each(function(t){m(this).wrapAll(e.call(this,t))}):(this[0]&&(t=m(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return m.isFunction(e)?this.each(function(t){m(this).wrapInner(e.call(this,t))}):this.each(function(){var t=m(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=m.isFunction(e);return this.each(function(n){m(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){m.nodeName(this,"body")||m(this).replaceWith(this.childNodes)}).end()}}),m.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},m.expr.filters.visible=function(e){return!m.expr.filters.hidden(e)};var mt=/%20/g,_t=/\[\]$/,yt=/\r?\n/g,vt=/^(?:submit|button|image|reset|file)$/i,gt=/^(?:input|select|textarea|keygen)/i;function bt(e,t,n,r){var i;if(m.isArray(t))m.each(t,function(t,i){n||_t.test(e)?r(e,i):bt(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==m.type(t))r(e,t);else for(i in t)bt(e+"["+i+"]",t[i],n,r)}m.param=function(e,t){var n,r=[],i=function(e,t){t=m.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=m.ajaxSettings&&m.ajaxSettings.traditional),m.isArray(e)||e.jquery&&!m.isPlainObject(e))m.each(e,function(){i(this.name,this.value)});else for(n in e)bt(n,e[n],t,i);return r.join("&").replace(mt,"+")},m.fn.extend({serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=m.prop(this,"elements");return e?m.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!m(this).is(":disabled")&&gt.test(this.nodeName)&&!vt.test(e)&&(this.checked||!H.test(e))}).map(function(e,t){var n=m(this).val();return null==n?null:m.isArray(n)?m.map(n,function(e){return{name:t.name,value:e.replace(yt,"\r\n")}}):{name:t.name,value:n.replace(yt,"\r\n")}}).get()}}),m.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var xt=0,wt={},Et={0:200,1223:204},Tt=m.ajaxSettings.xhr();n.attachEvent&&n.attachEvent("onunload",function(){for(var e in wt)wt[e]()}),f.cors=!!Tt&&"withCredentials"in Tt,f.ajax=Tt=!!Tt,m.ajaxTransport(function(e){var t;if(f.cors||Tt&&!e.crossDomain)return{send:function(n,r){var i,o=e.xhr(),a=++xt;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)o[i]=e.xhrFields[i];for(i in e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest"),n)o.setRequestHeader(i,n[i]);t=function(e){return function(){t&&(delete wt[a],t=o.onload=o.onerror=null,"abort"===e?o.abort():"error"===e?r(o.status,o.statusText):r(Et[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:void 0,o.getAllResponseHeaders()))}},o.onload=t(),o.onerror=t("error"),t=wt[a]=t("abort");try{o.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}}),m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return m.globalEval(e),e}}}),m.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),m.ajaxTransport("script",function(e){var t,n;if(e.crossDomain)return{send:function(r,i){t=m("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),d.head.appendChild(t[0])},abort:function(){n&&n()}}});var kt=[],Ct=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=kt.pop()||m.expando+"_"+Qe++;return this[e]=!0,e}}),m.ajaxPrefilter("json jsonp",function(e,t,r){var i,o,a,s=!1!==e.jsonp&&(Ct.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ct.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=m.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Ct,"$1"+i):!1!==e.jsonp&&(e.url+=(et.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return a||m.error(i+" was not called"),a[0]},e.dataTypes[0]="json",o=n[i],n[i]=function(){a=arguments},r.always(function(){n[i]=o,e[i]&&(e.jsonpCallback=t.jsonpCallback,kt.push(i)),a&&m.isFunction(o)&&o(a[0]),a=o=void 0}),"script"}),m.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||d;var r=E.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=m.buildFragment([e],t,i),i&&i.length&&m(i).remove(),m.merge([],r.childNodes))};var Mt=m.fn.load;m.fn.load=function(e,t,n){if("string"!=typeof e&&Mt)return Mt.apply(this,arguments);var r,i,o,a=this,s=e.indexOf(" ");return s>=0&&(r=m.trim(e.slice(s)),e=e.slice(0,s)),m.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),a.length>0&&m.ajax({url:e,type:i,dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?m("<div>").append(m.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){a.each(n,o||[e.responseText,t,e])}),this},m.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){m.fn[t]=function(e){return this.on(t,e)}}),m.expr.filters.animated=function(e){return m.grep(m.timers,function(t){return e===t.elem}).length};var Pt=n.document.documentElement;function At(e){return m.isWindow(e)?e:9===e.nodeType&&e.defaultView}m.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=m.css(e,"position"),c=m(e),p={};"static"===l&&(e.style.position="relative"),s=c.offset(),o=m.css(e,"top"),u=m.css(e,"left"),("absolute"===l||"fixed"===l)&&(o+u).indexOf("auto")>-1?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),m.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(p.top=t.top-s.top+a),null!=t.left&&(p.left=t.left-s.left+i),"using"in t?t.using.call(e,p):c.css(p)}},m.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){m.offset.setOffset(this,e,t)});var t,n,r=this[0],i={top:0,left:0},o=r&&r.ownerDocument;return o?(t=o.documentElement,m.contains(t,r)?(void 0!==r.getBoundingClientRect&&(i=r.getBoundingClientRect()),n=At(o),{top:i.top+n.pageYOffset-t.clientTop,left:i.left+n.pageXOffset-t.clientLeft}):i):void 0},position:function(){if(this[0]){var e,t,n=this[0],r={top:0,left:0};return"fixed"===m.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),m.nodeName(e[0],"html")||(r=e.offset()),r.top+=m.css(e[0],"borderTopWidth",!0),r.left+=m.css(e[0],"borderLeftWidth",!0)),{top:t.top-r.top-m.css(n,"marginTop",!0),left:t.left-r.left-m.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||Pt;e&&!m.nodeName(e,"html")&&"static"===m.css(e,"position");)e=e.offsetParent;return e||Pt})}}),m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var r="pageYOffset"===t;m.fn[e]=function(i){return L(this,function(e,i,o){var a=At(e);if(void 0===o)return a?a[t]:e[i];a?a.scrollTo(r?n.pageXOffset:o,r?o:n.pageYOffset):e[i]=o},e,i,arguments.length,null)}}),m.each(["top","left"],function(e,t){m.cssHooks[t]=Te(f.pixelPosition,function(e,n){if(n)return n=Ee(e,t),xe.test(n)?m(e).position()[t]+"px":n})}),m.each({Height:"height",Width:"width"},function(e,t){m.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){m.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!=typeof r),a=n||(!0===r||!0===i?"margin":"border");return L(this,function(t,n,r){var i;return m.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===r?m.css(t,n,a):m.style(t,n,r,a)},t,o?r:void 0,o,null)}})}),m.fn.size=function(){return this.length},m.fn.andSelf=m.fn.addBack,void 0===(r=function(){return m}.apply(t,[]))||(e.exports=r);var St=n.jQuery,Ot=n.$;return m.noConflict=function(e){return n.$===m&&(n.$=Ot),e&&n.jQuery===m&&(n.jQuery=St),m},void 0===i&&(n.jQuery=n.$=m),m},"object"==typeof e&&"object"==typeof e.exports?e.exports=i.document?o(i,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return o(e)}:o(i)},function(e,t,n){"use strict";var r=n(0),i=n(2);e.exports=i.extend({initialize:function(e){this._bounds={},e&&(this._mapAdapter=e,this.setBounds(this._mapAdapter.getBounds()),this._initBinds())},_initBinds:function(){this.listenTo(this._mapAdapter,"boundsChanged",r.debounce(this._boundsChanged,350))},_stopBinds:function(){this._mapAdapter&&this.stopListening(this._mapAdapter,"boundsChanged")},_boundsChanged:function(e){this.setBounds(e)},setBounds:function(e){this._bounds=e,this.trigger("boundsChanged",e)},getBounds:function(){return this._bounds},areBoundsAvailable:function(){return r.isFinite(this._bounds.west)},serialize:function(){return[this._bounds.west,this._bounds.south,this._bounds.east,this._bounds.north].join(",")},clean:function(){this._stopBinds()}})},function(e,t,n){"use strict";var r=n(1);e.exports=function(e,t,n){var i=arguments[1];return this._xhr&&this._xhr.abort(),this._xhr=r.sync.apply(this,arguments),this._xhr.always(function(){i._xhr=null}),this._xhr}},function(e,t,n){"use strict";var r=n(0),i=n(2),o=n(18),a=n(8),s=n(6),u=n(24),l=["engine"];e.exports=i.extend({defaults:{url:"",data:[],sync_on_bbox_change:!0,enabled:!0,status:"unfetched"},url:function(){var e=r.union([this._getBoundingBoxFilterParam()],this._getDataviewSpecificURLParams());if(this._engine.getApiKey())e.push("api_key="+this._engine.getApiKey());else if(this._engine.getAuthToken()){var t=this._engine.getAuthToken();t instanceof Array?r.each(t,function(t){e.push("auth_token[]="+t)}):e.push("auth_token="+t)}return this.get("url")+"?"+e.join("&")},_getBoundingBoxFilterParam:function(){var e="";return this._checkBBoxFilter(),this.syncsOnBoundingBoxChanges()&&(e="bbox="+this._bboxFilter.serialize()),e},_getDataviewSpecificURLParams:function(){return[]},initialize:function(e,t){if(e=e||{},t=t||{},s.checkRequiredOpts(t,l,"DataviewModelBase"),this._hasBinds=!1,this._engine=t.engine,!e.source)throw new Error("source is a required attr");this._checkSourceAttribute(this.getSource()),this.getSource().markAsSourceOf(this),e.id||this.set("id",this.defaults.type+"-"+this.cid),this.sync=o.bind(this),this.filter=t.filter,this.filter&&this.filter.set("dataviewId",this.id),t.bboxFilter&&this.addBBoxFilter(t.bboxFilter),this._initBinds()},_initBinds:function(){this.listenToOnce(this,"change:url",function(){this._checkBBoxFilter(),this.syncsOnBoundingBoxChanges()&&!this._bboxFilter.areBoundsAvailable()?this.listenTo(this._bboxFilter,"boundsChanged",this._fetch):this._fetch()}),this.filter&&this.listenTo(this.filter,"change",this._onFilterChanged),this.getSource().on("change:status",this._onAnalysisStatusChange,this)},_onChangeBinds:function(){this.on("change:sync_on_bbox_change",function(){this.refresh()},this),this.on("change:url",function(e,t,n){this._newDataAvailable=!0,this._shouldFetchOnURLChange(n&&r.pick(n,["forceFetch","sourceId"]))&&this.refresh()},this),this.on("change:enabled",function(e,t){t&&this._newDataAvailable&&(this.refresh(),this._newDataAvailable=!1)},this)},_onMapBoundsChanged:function(){this._shouldFetchOnBoundingBoxChange()&&this._fetch(),this.syncsOnBoundingBoxChanges()&&(this._newDataAvailable=!0)},_fetch:function(){this.fetch({success:function(){this._hasBinds||(this._hasBinds=!0,this._onChangeBinds())}.bind(this)})},_onAnalysisStatusChange:function(e,t){e.isLoading()?this._triggerLoading():e.isFailed()&&this._triggerStatusError(e.get("error"))},_triggerLoading:function(){this.trigger("loading",this)},_triggerStatusError:function(e){this.trigger("statusError",this,e)},_onFilterChanged:function(e){this._reload({sourceId:this.getSourceId()})},_reloadAndForceFetch:function(){this._reload({sourceId:this.getSourceId(),forceFetch:!0})},_reload:function(e){e=e||{},this._engine.reload(e)},_shouldFetchOnURLChange:function(e){var t=(e=e||{}).sourceId;return!!e.forceFetch||this.isEnabled()&&this._sourceAffectsMyOwnSource(t)},_sourceAffectsMyOwnSource:function(e){if(!e)return!0;var t=this.getSource();return t&&t.findAnalysisById(e)},_shouldFetchOnBoundingBoxChange:function(){return this.isEnabled()&&this.syncsOnBoundingBoxChanges()},refresh:function(){this.fetch()},addBBoxFilter:function(e){e&&(this._stopListeningBBoxChanges(),this._bboxFilter=e,this._listenToBBoxChanges())},update:function(e){if(r.has(e,"source"))throw new Error("Source of dataviews cannot be updated");e=r.pick(e,this.constructor.ATTRS_NAMES),this.set(e)},getData:function(){return this.get("data")},getPreviousData:function(){return this.previous("data")},fetch:function(e){if(e=e||{},this.set("status","fetching"),this._triggerLoading(),e.success)var t=e&&e.success;return i.prototype.fetch.call(this,r.extend(e,{success:function(){this.set("status","fetched"),t&&t(arguments),this.trigger("loaded",this)}.bind(this),error:function(e,t){if(!t||t&&"abort"!==t.statusText){this.set("status","error");var n=this._parseError(t);this._triggerStatusError(n)}}.bind(this)}))},toJSON:function(){throw new Error("toJSON should be defined for each dataview")},getSourceType:function(){return this.getSource().get("type")},getSourceId:function(){var e=this.getSource();return e&&e.id},getSource:function(){return this.get("source")},isSourceType:function(){return"source"===this.getSourceType()},isFiltered:function(){var e=!1;return this.filter&&(e=!this.filter.isEmpty()),e},remove:function(){this._removeExistingAnalysisBindings(),this.getSource().unmarkAsSourceOf(this),this.trigger("destroy",this),this.stopListening()},_removeExistingAnalysisBindings:function(){this.getSource().off("change:status",this._onAnalysisStatusChange,this)},isFetched:function(){return"fetched"===this.get("status")},isUnavailable:function(){return"error"===this.get("status")},isEnabled:function(){return this.get("enabled")},setUnavailable:function(){return this.set("status","error")},syncsOnBoundingBoxChanges:function(){return this.get("sync_on_bbox_change")},_checkSourceAttribute:function(e){if(!(e instanceof a))throw new Error("Source must be an instance of AnalysisModel")},_checkBBoxFilter:function(){if(this.syncsOnBoundingBoxChanges()&&!this._bboxFilter)throw new Error("Cannot sync on bounding box changes. There is no bounding box filter.")},_listenToBBoxChanges:function(){this._bboxFilter&&this.listenTo(this._bboxFilter,"boundsChanged",this._onMapBoundsChanged)},_stopListeningBBoxChanges:function(){this._bboxFilter&&this.stopListening(this._bboxFilter,"boundsChanged")},_parseError:function(e){var t={},n=u(e,"dataview");return n.length>0&&(t=n[0]),t}},{ATTRS_NAMES:["id","sync_on_bbox_change","enabled","source"]})},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=n(0),o=n(7),a=n(10),s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._initialize(e),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o),r(t,[{key:"_initialize",value:function(e){var t=this;this._filters=[],e&&e.length&&e.map(function(e){return t.addFilter(e)})}},{key:"addFilter",value:function(e){var n=this;if(!(e instanceof a||e instanceof t))throw this._getValidationError("wrongFilterType");i.contains(this._filters,e)||(this.listenTo(e,"change:filters",function(e){return n._triggerFilterChange(e)}),this._filters.push(e),this._triggerFilterChange())}},{key:"removeFilter",value:function(e){var t=i.indexOf(this._filters,e);if(-1!==t){var n=this._filters.splice(t,1)[0];return n.off("change:filters",null,this),this._triggerFilterChange(),n}}},{key:"count",value:function(){return this._filters.length}},{key:"getFilters",value:function(){return this._filters}},{key:"$getSQL",value:function(){var e=this._filters.map(function(e){return e.$getSQL()}).filter(function(e){return Boolean(e)}),t=e.join(" "+(this.JOIN_OPERATOR||"AND")+" ");return e.length>1?"("+t+")":t}},{key:"_triggerFilterChange",value:function(e){this.trigger("change:filters",e)}}]),t}();e.exports=s},function(e,t,n){"use strict";var r=n(0),i=n(12),o=i.extend({defaults:function(){return r.extend(i.prototype.defaults.apply(this),{state:i.STATE_SUCCESS})},_onEngineReloadStarted:function(){},isAvailable:function(){return!0}});e.exports=o},function(e,t,n){"use strict";var r=n(104),i=n(86),o=n(85);e.exports={Aggregation:o,Layer:r,events:i}},function(e,t,n){"use strict";e.exports={OVERLAY_TYPES:{ATTRIBUTION:"attribution",HEADER:"header",LIMITS:"limits",TILES:"tiles",LOADER:"loader",LOGO:"logo",SEARCH:"search",ZOOM:"zoom"},MAP_PROVIDER_TYPES:{GMAPS:"googlemaps",LEAFLET:"leaflet"},GMAPS_BASE_LAYER_TYPES:["roadmap","gray_roadmap","dark_roadmap","hybrid","satellite","terrain"],WINDSHAFT_ERRORS:{ANALYSIS:"analysis",LAYER:"layer",LIMIT:"limit",TILE:"tile",GENERIC:"generic",UNKNOWN:"unknown"}}},function(e,t,n){"use strict";var r=n(0),i=n(40);e.exports=function(e,t){if((e=e||{}).responseJSON&&(e=e.responseJSON),e.errors_with_context)return r.map(e.errors_with_context,function(e){return new i(e,t)});if(e.errors){var n="string"==typeof e.errors[0]?{message:e.errors[0]}:e.errors[0];return[new i(n,t)]}return e.statusText?[new i({message:e.statusText},t,"ajax")]:[]}},function(e){e.exports={name:"internal-carto.js",version:"4.1.11",description:"CARTO javascript library",repository:{type:"git",url:"git://github.com/CartoDB/carto.js.git"},author:{name:"CARTO",url:"https://carto.com/"},contributors:["Javier lvarez <jmedina@carto.com>","Javier lvarez <xabel@vizzuality.com>","Javier Arce <javierarce@carto.com>","Javier Santana <jsantana@carto.com>","Raul Ochoa <rochoa@carto.com>","Carlos Matalln <matallo@carto.com>","Jaime Chapinal <jaime.chapinal@carto.com>","Nicklas Gummesson <nicklas@carto.com>","Francisco Dans <francisco@carto.com>","Emilio Garca <emilio@carto.com>","Ivan Malagon <ivan@carto.com>","Ruben Moya <ruben@carto.com>","Jesus Arroyo Torrens <jarroyo@carto.com>","Iago Lastra <iago@carto.com>","Elena Torr <elena@carto.com>","Jess Botella <jbotella@carto.com>"],private:!0,license:"BSD-3-Clause",dependencies:{backbone:"1.2.3","backbone-poller":"^1.1.3","camshaft-reference":"0.34.0",carto:"cartodb/carto#master","@carto/zera":"1.0.7","clip-path-polygon":"0.1.12","d3-array":"1.2.1","d3-format":"1.2.0","d3-time-format":"2.1.0",jquery:"2.1.4",mustache:"1.1.0","perfect-scrollbar":"git://github.com/CartoDB/perfect-scrollbar.git#master",postcss:"5.0.19","promise-polyfill":"^6.1.0","torque.js":"CartoDB/torque#master",underscore:"1.8.3","whatwg-fetch":"^2.0.3"},devDependencies:{"babel-core":"^6.26.3","babel-loader":"^7.1.4","babel-plugin-transform-object-rest-spread":"^6.26.0","babel-preset-env":"^1.7.0","babel-preset-es2015":"~6.24.1",babelify:"^7.3.0",browserify:"13.0.0","browserify-shim":"3.8.12",cartoassets:"CartoDB/CartoAssets#master",eslint:"~4.8.0","eslint-config-semistandard":"~11.0.0","eslint-config-standard":"~10.2.1","eslint-plugin-import":"~2.7.0","eslint-plugin-node":"~5.2.0","eslint-plugin-promise":"~3.5.0","eslint-plugin-standard":"~3.0.1","findup-sync":"0.1.3",grunt:"0.4.5","grunt-aws":"^0.4.0","grunt-browserify":"5.0.0","grunt-contrib-clean":"~0.5.0","grunt-contrib-concat":"~0.3.0","grunt-contrib-connect":"~0.11.2","grunt-contrib-copy":"~0.7.0","grunt-contrib-cssmin":"~0.7.0","grunt-contrib-imagemin":"~1.0.0","grunt-contrib-jasmine":"1.1.0","grunt-contrib-uglify":"0.10.0","grunt-contrib-watch":"git://github.com/gruntjs/grunt-contrib-watch.git#b884948805940c663b1cbb91a3c28ba8afdebf78","grunt-eslint":"~20.1.0","grunt-exorcise":"2.1.0","grunt-fastly":"~0.1.3","grunt-gitinfo":"~0.1.7","grunt-prompt":"~1.3.0","grunt-replace":"0.6.2","grunt-sass":"2.0.0",gulp:"3.8.10","gulp-iconfont":"1.0.0","gulp-iconfont-css":"0.0.9","gulp-install":"0.2.0","gulp-sketch":"0.0.7","jasmine-ajax":"git://github.com/nobuti/jasmine-ajax.git#master",jsdoc:"~3.5.5",jstify:"0.12.0",leaflet:"1.3.1","load-grunt-tasks":"~0.6.0","npm-watch":"^0.3.0",semver:"~5.4.0","source-map-support":"CartoDB/node-source-map-support#0.4.6-cdb1","time-grunt":"~0.3.1","uglifyjs-webpack-plugin":"^1.1.2",watchify:"3.4.0",webpack:"4.12.1","webpack-cli":"^3.0.4"},browserify:{transform:["browserify-shim","jstify"]},browser:{cdb:"./src/cdb.js","cdb.config":"./src/cdb.config.js","cdb.core.util":"./src/core/util.js","cdb.core.Profiler":"./src/core/profiler.js","cdb.log":"./src/cdb.log.js","cdb.errors":"./src/cdb.errors.js","cdb.templates":"./src/cdb.templates.js",geojson:"./vendor/GeoJSON.js","html-css-sanitizer":"./vendor/html-css-sanitizer-bundle.js",mousewheel:"./vendor/mousewheel.js",mwheelIntent:"./vendor/mwheelIntent.js"},"browserify-shim":{geojson:"GeoJSON","html-css-sanitizer":"html",mousewheel:{depends:["jquery:jQuery"]},mwheelIntent:{depends:["jquery:jQuery"]}},files:["dist","node_modules/cdb","src","themes","vendor"],main:"src/index.js",config:{root:"."},scripts:{test:"grunt test","test:browser":"grunt dev",lint:"eslint .","lint:fix":"eslint . --fix",build:"rm -rf dist/public; NODE_ENV=production webpack --progress --config webpack/webpack.config.js && NODE_ENV=production webpack --progress --config webpack/webpack.min.config.js","build:watch":"NODE_ENV=development webpack --progress -w --config webpack/webpack.config.js","build:internal":"grunt build",docs:"rm -rf docs/public; jsdoc --configure config/jsdoc/public-conf.json","docs:internal":"rm -rf docs/internal; jsdoc --configure config/jsdoc/internal-conf.json",bump:"npm version prerelease","bump:patch":"npm version patch","bump:minor":"npm version minor",postversion:"git push origin HEAD --follow-tags",release:"./scripts/release.sh"},watch:{docs:"src/**/*.js"}}},function(e,t,n){"use strict";var r=n(117);e.exports={error:function(){console.error.apply(console,arguments)},log:function(){console.log.apply(console,arguments)},info:function(){console.log.apply(console,arguments)},debug:function(){r.DEBUG&&console.log.apply(console,arguments)}}},function(e,t,n){"use strict";var r=n(128).getVersion("latest"),i="node",o={source:[]},a={},s=r.analyses;if(!s)throw new Error("Error loading the reference for Camshaft analyses");for(var u in s){var l=s[u].params;for(var c in l){a[u]=a[u]||[],a[u].push(c),o[u]=o[u]||[],l[c].type===i&&o[u].push(c)}}e.exports={getSourceNamesForAnalysisType:function(e){var t=o[e];if(!t)throw new Error("source names for analysis of type "+e+" couldn't be found");return t},getParamNamesForAnalysisType:function(e){var t=a[e];if(!t)throw new Error("param names for analysis of type "+e+" couldn't be found");return t}}},function(e,t,n){"use strict";var r=n(0),i=n(1),o=n(8),a=n(27),s=n(15),u=function(e){if(!(e=e||{}).engine)throw new Error("engine is required");this._engine=e.engine,this._apiKey=e.apiKey,this._authToken=e.authToken,this._camshaftReference=e.camshaftReference||a,this._analysisNodes=new i.Collection};u.prototype.analyse=function(e){e=r.clone(e);var t=this.findNodeById(e.id),n=this._getAnalysisAttributesFromAnalysisDefinition(e);return t?t.set(n):(this._apiKey&&(n.apiKey=this._apiKey),this._authToken&&(n.authToken=this._authToken),t=new o(n,{camshaftReference:this._camshaftReference,engine:this._engine}),this._analysisNodes.add(t),t.bind("destroy",this._onAnalysisRemoved,this)),t},u.prototype._getAnalysisAttributesFromAnalysisDefinition=function(e){var t={},n=e.type,i=this._camshaftReference.getSourceNamesForAnalysisType(n);return r.each(i,function(n){var r=e.params[n];r&&(t[n]=this.analyse(r))},this),r.omit(r.extend(e,e.params,t),"params")},u.prototype.createAnalysisForLayer=function(e,t){return this.analyse({id:e,type:"source",params:{query:t}})},u.prototype.findNodeById=function(e){return this._analysisNodes.get(e)},u.prototype._onAnalysisRemoved=function(e){this._analysisNodes.remove(e),e.unbind("destroy",this._onAnalysisRemoved)},u.getUniqueAnalysisNodes=function(e,t){var n={},i=u.getAnalysisList(e,t);return r.each(i,function(e){e.getNodesCollection().each(function(e){n[e.get("id")]=e})}),r.map(n,function(e){return e},this)},u.getAnalysisList=function(e,t){var n=function(e){var t=function(e){return e.filter(function(e){return s.isCartoDBLayer(e)||s.isTorqueLayer(e)})}(e);return r.chain(t).map(function(e){return e.getSource()}).compact().value()}(e),i=function(e){return e.chain().map(function(e){return e.getSource()}).compact().value()}(t);return n.concat(i)},e.exports=u},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";var r=n(0),i={second:{unit:"second",factor:1},minute:{unit:"minute",factor:1},hour:{unit:"hour",factor:1},day:{unit:"day",factor:1},week:{unit:"day",factor:7},month:{unit:"month",factor:1},quarter:{unit:"month",factor:3},year:{unit:"month",factor:12},decade:{unit:"month",factor:120},century:{unit:"month",factor:1200},millennium:{unit:"month",factor:12e3}},o={};function a(e){return e%4==0&&e%100!=0||e%400==0}o.fillTimestampBuckets=function(e,t,n,i,o,a){for(var s=[],u=!1,l=0;l<i;l++){u=void 0!==e[l],s.push(u);var c=this.add(t,l,n),p=this.add(t,l+1,n);e[l]=r.extend({bin:l,start:c,end:p-1,next:p,freq:0},e[l]),delete e[l].timestamp}return"totals"===o?e:function(e,t,n){for(var i=null,o=!0,a=t.length-1;a>=0&&o&&(!r.isFinite(n)||a>=n);a--)t[a]?o=!1:i=a;return null!==i?e.slice(0,i):e}(e,s,a)},o.fillNumericBuckets=function(e,t,n,i){for(var o=0;o<i;o++){var a=t+o*n,s=t+(o+1)*n,u=o+1===i&&e[o]?e[o].max:s,l=r.extend({},{bin:o,start:a,end:u,freq:0},e[o]);e[o]=l}},o.hasChangedSomeOf=function(e,t){return r.some(r.keys(t),function(t){return r.contains(e,t)})},o.add=function(e,t,n){if(!i.hasOwnProperty(n))throw Error('aggregation "'+n+'" is not defined');var r,o,s=new Date(1e3*e),u=i[n].unit,l=t*i[n].factor;switch(u){case"second":return s.setUTCSeconds(s.getUTCSeconds()+l)/1e3;case"minute":return s.setUTCMinutes(s.getUTCMinutes()+l)/1e3;case"hour":return s.setUTCHours(s.getUTCHours()+l)/1e3;case"day":return s.setUTCDate(s.getUTCDate()+l)/1e3;case"month":var c=s.getUTCDate();return s.setUTCDate(1),s.setUTCMonth(s.getUTCMonth()+l),s.setUTCDate(Math.min(c,(r=s.getUTCFullYear(),o=s.getUTCMonth(),[31,a(r)?29:28,31,30,31,30,31,31,30,31,30,31][o]))),s.getTime()/1e3;default:return 0}},e.exports=o},function(e,t,n){"use strict";var r=n(0),i=n(1),o=n(44),a=n(19),s=n(59),u=n(30),l=n(58);e.exports=a.extend({defaults:r.extend({type:"histogram",totalAmount:0,filteredAmount:0,hasNulls:!1,localTimezone:!1},a.prototype.defaults),_getDataviewSpecificURLParams:function(){var e=[];if(r.isNumber(this.get("own_filter")))e.push("own_filter="+this.get("own_filter")),"number"===this.get("column_type")&&this.get("bins")&&e.push("bins="+this.get("bins"));else{var t=this.getCurrentOffset();"number"===this.get("column_type")&&this.get("bins")?e.push("bins="+this.get("bins")):"date"===this.get("column_type")&&(e.push("aggregation="+(this.get("aggregation")||"auto")),r.isFinite(t)&&e.push("offset="+t));var n=this.get("start"),i=this.get("end");r.isFinite(n)&&r.isFinite(i)&&(e.push("start="+n),e.push("end="+i))}return e},initialize:function(e,t){this._localOffset=l.getLocalOffset(),this._totals=new s({bins:this.get("bins"),aggregation:this.get("aggregation"),offset:this.get("offset"),column_type:this.get("column_type"),apiKey:t&&t.engine&&t.engine.getApiKey(),authToken:t&&t.engine&&t.engine.getAuthToken(),localTimezone:this.get("localTimezone"),localOffset:this._localOffset,start:this.get("start"),end:this.get("end")}),a.prototype.initialize.apply(this,arguments),this._data=new i.Collection(this.get("data")),e&&(e.min||e.max)&&this.filter&&this.filter.setRange(this.get("min"),this.get("max"))},_initBinds:function(){a.prototype._initBinds.apply(this),this._updateURLBinding(),this._totals.bind("loadModelCompleted",this._onTotalsDataFetched,this),this._totals.once("loadModelCompleted",this._updateBindings,this),this._totals.bind("error",this.setUnavailable,this),this._totals.bind("error",this._onTotalsError,this),this.on("change:column",this._onColumnChanged,this),this.on("change:localTimezone",this._onLocalTimezoneChanged,this),this.on("change",this._onFieldsChanged,this),this.on("change:column_type",this._onColumnTypeChanged,this)},_onLocalTimezoneChanged:function(){this._totals.set("localTimezone",this.get("localTimezone"))},_updateURLBinding:function(){this.off("change:url"),this.on("change:url",this._onUrlChanged,this)},_updateBindings:function(){this._onChangeBinds(),this._updateURLBinding()},enableFilter:function(){this.set("own_filter",1)},disableFilter:function(){this.unset("own_filter")},getData:function(){return this._data.toJSON()},getUnfilteredData:function(){return this._totals.get("data")},getUnfilteredDataModel:function(){return this._totals},getSize:function(){return this._data.size()},getColumnType:function(){return this.get("column_type")},hasNulls:function(){return this.get("hasNulls")},parse:function(e){var t=e.aggregation||this._totals&&this._totals.get("aggregation"),n=r.isFinite(e.bins_count)?e.bins_count:this.get("bins"),i=e.bin_width,o="date"===this.get("column_type")?e.timestamp_start:e.bins_start,a={data:[],filteredAmount:0,nulls:0,totalAmount:0};return this.has("error")?a:(a.data=new Array(n),r.each(e.bins,function(e){a.data[e.bin]=e}),this.set({aggregation:t},{silent:!0}),"date"===this.get("column_type")?(a.data=u.fillTimestampBuckets(a.data,o,t,n,"filtered",this._totals.get("data").length),n=a.data.length):u.fillNumericBuckets(a.data,o,i,n),this._data&&this._data.reset(a.data),a.totalAmount=this._calculateTotalAmount(a.data),a.filteredAmount=this._calculateFilteredAmount(this.filter,this._data),a.nulls=e.nulls,a.bins=n,null!=e.nulls&&(a=r.extend({},a,{nulls:e.nulls,hasNulls:!0})),a)},_onFilterChanged:function(e){this.set("filteredAmount",this._calculateFilteredAmount(e,this._data)),a.prototype._onFilterChanged.apply(this,arguments)},_onColumnChanged:function(){this._totals.set({column_type:this.get("column_type"),column:this.get("column"),start:null,end:null}),this.set("aggregation",void 0,{silent:!0}),this._reloadAndForceFetch()},_calculateTotalAmount:function(e){return r.reduce(e,function(e,t){return e+(t&&t.freq?t.freq:0)},0)},_calculateFilteredAmount:function(e,t){var n=0;if(e&&void 0!==e.get("min")&&void 0!==e.get("max")){var r=this._findBinsIndexes(t,e.get("min"),e.get("max"));n=this._sumBinsFreq(t,r.start,r.end)}return n},_findBinsIndexes:function(e,t,n){var r=e.findWhere({start:Math.min(t,n)}),i=e.findWhere({end:Math.max(t,n)});return{start:r&&r.get("bin"),end:i&&i.get("bin")}},_sumBinsFreq:function(e,t,n){return r.reduce(e.slice(t,n+1),function(e,t){return(t.get("freq")||0)+e},0)},getDistributionType:function(e){var t=e||this.get("data"),n=function(e){return e.freq};if(o.max(t,n)-o.min(t,n)<.1*o.mean(t,n))return"F";var i=o.sum(t,n),a=t.map(function(e){return 100*e.freq/i}),s=a.map(function(e,t){var n=a[t+1];return e>n?-1:Math.abs(e-n)<=.05?0:1});s.pop();var u=o.max(s),l=o.min(s);if(0===l&&0===u)return"F";if(u<1)return"L";if(l>-1)return"J";var c=r.uniq(s);return[[1,-1],[1,0,-1],[1,-1,0],[0,1,-1]].some(function(e){return r.isEqual(e,c)})?"A":[[-1,1],[-1,0,1],[-1,1,0],[0,-1,1]].some(function(e){return r.isEqual(e,c)})?"U":"S"},toJSON:function(e){var t=this.get("column_type"),n=this.get("offset"),i={column:this.get("column")};return"number"===t&&this.get("bins")?i.bins=this.get("bins"):"date"===t&&(i.aggregation=this.get("aggregation")||"auto",r.isFinite(n)&&(i.offset=n)),{type:"histogram",source:{id:this.getSourceId()},options:i}},_onColumnTypeChanged:function(){this.filter&&this.filter.set("column_type",this.get("column_type"))},_onChangeBinds:function(){a.prototype._onChangeBinds.call(this)},_onUrlChanged:function(){this._totals.set({offset:this.get("offset"),bins:this.get("bins")},{silent:!0}),this._totals.setUrl(this.get("url"))},_onTotalsDataFetched:function(e,t){var n=t.get("start"),i=t.get("end");r.isFinite(n)&&r.isFinite(i)&&this.set({start:n,end:i}),this.set({aggregation:t.get("aggregation")||"auto",offset:t.get("offset")||0,bins:t.get("bins"),error:t.get("error")},{silent:!0});var o=!1;"date"===this.get("column_type")&&(r.has(this.changed,"aggregation")||r.has(this.changed,"offset"))?o=!0:"number"===this.get("column_type")&&r.has(this.changed,"bins")&&(o=!0),o?this._resetFilterAndFetch():this.fetch()},_onFieldsChanged:function(){if(this._setTotalsStartEnd(),u.hasChangedSomeOf(["bins","aggregation","offset"],this.changed)){var e=r.has(this.changed,"aggregation")&&r.isUndefined(this.changed.aggregation);"number"!==this.get("column_type")||e||this._totals.set("bins",this.get("bins")),"date"===this.get("column_type")&&(this.hasChanged("aggregation")&&this._resetFilter(),this._totals.set({offset:this.get("offset"),aggregation:this.get("aggregation")}))}},_setTotalsStartEnd:function(){var e=this.get("start"),t=this.get("end"),n=u.hasChangedSomeOf(["start","end"],this.changed),i=r.isFinite(e)&&r.isFinite(t),o=this._totals.get("start")!==e||this._totals.get("end")!==t;n&&i&&o&&(this._totals.set({start:e,end:t}),this._totals.refresh())},_resetFilterAndFetch:function(){this._resetFilter(),this.fetch()},_resetFilter:function(){this.disableFilter(),this.filter&&this.filter.unsetRange()},_onTotalsError:function(e,t){var n=t&&this._parseError(t);n&&"abort"!==n.message&&this._triggerStatusError(n)},getCurrentOffset:function(){return this.get("localTimezone")?this._localOffset:this.get("offset")}},{ATTRS_NAMES:a.ATTRS_NAMES.concat(["column","column_type","bins","min","max","aggregation","offset"])})},function(e,t,n){"use strict";var r=n(1),i=n(0),o=n(68);e.exports=r.Collection.extend({model:o,initialize:function(e,t){this.aggregationModel=t.aggregationModel,this.aggregation=t.aggregationModel.get("aggregation")},reset:function(e,t){"count"!==this.aggregationModel.get("aggregation")&&(e=i.filter(e,function(e){return null!=(e instanceof r.Model?e.get("value"):e.value)})),r.Collection.prototype.reset.call(this,e,t)},comparator:function(e,t){return"Other"===e.get("name")?1:"Other"===t.get("name")?-1:e.get("value")===t.get("value")?e.get("selected")<t.get("selected")?1:-1:e.get("value")<t.get("value")?1:-1},isOtherAvailable:function(){return this.where({agg:!0,name:"Other"}).length>0}})},function(e,t,n){var r;r=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=n(1),o=n(4),a=n(5),s=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&this._bindMap(t),this._tileLoader=new a(n),this._tileSize=256,this._eventEmitter=new o}return r(e,[{key:"tilejson",value:function(e){return this._tileLoader.setUrl(e.grids[0]),this}},{key:"map",value:function(e){return this._bindMap(e),this}},{key:"_bindMap",value:function(e){this._map=new i(e),this._map.on("click",this._onMapClick.bind(this)),this._map.on("mousemove",this._onMapMouseMove.bind(this))}},{key:"on",value:function(e,t){switch(e){case"on":this._eventEmitter.addEventListener("mousemove",t),this._eventEmitter.addEventListener("click",t);break;case"off":this._eventEmitter.addEventListener("featureout",t);break;case"error":this._eventEmitter.addEventListener("error",t)}return this}},{key:"_onMapClick",value:function(e){var t=this,n=this._map.cloneEvent(e),r=this._getTileCoordsFromMouseEvent(n);this._tileLoader.loadTile(r.z,r.x,r.y).then(function(e){if("fetching"!==e)return t._objectForEvent(e,n,"click")}).catch(function(e){t._eventEmitter.dispatchEvent("error",e)})}},{key:"_onMapMouseMove",value:function(e){var t=this,n=this._map.cloneEvent(e),r=this._getTileCoordsFromMouseEvent(n);this._tileLoader.loadTile(r.z,r.x,r.y).then(function(e){if("fetching"!==e)return t._objectForEvent(e,n,"mousemove")}).catch(function(e){t._eventEmitter.dispatchEvent("error",e)})}},{key:"_getTileCoordsFromMouseEvent",value:function(e){var t=this._map.project(e),n=this._unscale(t,this._tileSize);return n.z=Math.round(this._map.getZoom()),n}},{key:"_unscale",value:function(e,t){return{x:Math.floor(e.x/t),y:Math.floor(e.y/t)}}},{key:"_objectForEvent",value:function(e,t,n){var r=this._map.project(t),i=this._unscale(r,this._tileSize),o=i.x,a=i.y,s=Math.pow(2,this._map.getZoom());if(o=(o+s)%s,a=(a+s)%s,e&&e.grid){var u=Math.floor((r.x-o*this._tileSize)/4),l=Math.floor((r.y-a*this._tileSize)/4),c=this._utfDecode(e.grid[l].charCodeAt(u)),p=e.keys[c];e.data.hasOwnProperty(p)&&(t.data=e.data[p])}t.e=t.originalEvent||{type:n},this._triggerEvent(n,t)}},{key:"_triggerEvent",value:function(e,t){t.data?"mousemove"!==e?"click"===e&&(this._eventEmitter.dispatchEvent("featureout",{}),this._eventEmitter.dispatchEvent("click",t)):this._eventEmitter.dispatchEvent("mousemove",t):this._eventEmitter.dispatchEvent("featureout",{})}},{key:"remove",value:function(){this._eventEmitter.clear(),this._map.off("click"),this._map.off("mousemove")}},{key:"_utfDecode",value:function(e){return e>=93&&e--,e>=35&&e--,e-32}}]),e}();e.exports={Interactive:s}},function(e,t,n){"use strict";var r=n(2),i=n(3);e.exports=function(e){return e.__gm?new r(e):new i(e)}},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._map=t,this._listeners={}}return r(e,[{key:"project",value:function(e){var t=e.latLng,n=this._map.getProjection().fromLatLngToPoint(t),r=Math.pow(2,this.getZoom());return{x:Math.floor(r*n.x),y:Math.floor(r*n.y)}}},{key:"getZoom",value:function(){return this._map.getZoom()}},{key:"on",value:function(e,t){this._listeners[e]=this._map.addListener(e,t)}},{key:"off",value:function(e){this._listeners[e]&&this._listeners[e].remove()}},{key:"cloneEvent",value:function(e){return{da:e.da,latLng:e.latLng,pixel:e.pixel}}}]),e}();e.exports=i},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._map=t,this._listeners={}}return r(e,[{key:"project",value:function(e){var t=e.latlng.wrap();return this._map.project(t,this._map.getZoom()).floor()}},{key:"getZoom",value:function(){return this._map.getZoom()}},{key:"on",value:function(e,t){return this._listeners[e]=t,this._map.on(e,t)}},{key:"off",value:function(e){return this._map.off(e,this._listeners[e])}},{key:"cloneEvent",value:function(e){return{containerPoint:e.containerPoint,latlng:e.latlng,layerPoint:e.layerPoint,originalEvent:e.originalEvent,target:e.target,type:e.type}}}]),e}();e.exports=i},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._listeners={click:void 0,move:void 0,out:void 0,error:void 0}}return r(e,[{key:"dispatchEvent",value:function(e,t){switch(e){case"mousemove":this._listeners.move&&this._listeners.move(t);break;case"click":this._listeners.click&&this._listeners.click(t);break;case"featureout":this._listeners.out&&this._listeners.out();break;case"error":this._listeners.error&&this._listeners.error(t)}}},{key:"addEventListener",value:function(e,t){switch(e){case"mousemove":this._listeners.move=t;break;case"click":this._listeners.click=t;break;case"featureout":this._listeners.out=t;break;case"error":this._listeners.error=t}}},{key:"removeEventListener",value:function(e){switch(e){case"mousemove":delete this._listeners.move;break;case"click":delete this._listeners.click;break;case"featureout":delete this._listeners.out;break;case"error":delete this._listeners.error}}},{key:"clear",value:function(){this._listeners={click:void 0,move:void 0,out:void 0,error:void 0}}}]),e}();e.exports=i},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._url=t,this._cache={}}return r(e,[{key:"setUrl",value:function(e){this._url=e}},{key:"loadTile",value:function(e,t,n){var r=this;return this._cache[e+"_"+t+"_"+n]?Promise.resolve(this._cache[e+"_"+t+"_"+n]):(this._cache[e+"_"+t+"_"+n]="fetching",fetch(this._buildTileUrl(e,t,n)).then(this._handleLimitErrors).then(function(i){return r._cache[e+"_"+t+"_"+n]=i,i}))}},{key:"_buildTileUrl",value:function(e,t,n){var r=this._url;return r=(r=(r=r.replace(/{z}/,e)).replace(/{x}/,t)).replace(/{y}/,n)}},{key:"_handleLimitErrors",value:function(e){return 429===e.status?e.json().then(function(e){return Promise.reject(e)}):e.json()}}]),e}();e.exports=i}])},e.exports=r()},function(e,t,n){"use strict";var r=n(24);function i(e,t){t=t||{},this.interaction=[],this.nativeMap=t.nativeMap,this._mapModel=t.mapModel,e.on("change:urls",this._reload,this),e.onLayerVisibilityChanged(this._reload.bind(this)),this._reload()}i.prototype={_reload:function(){throw new Error("_reload must be implemented")},_reloadInteraction:function(){this._clearInteraction(),this.model.forEachGroupedLayer(function(e,t){e.isVisible()&&(e.isInteractive()||this._mapModel&&this._mapModel.isFeatureInteractivityEnabled())&&this._enableInteraction(t)},this)},_clearInteraction:function(){for(var e in this.interaction)this.interaction.hasOwnProperty(e)&&this.interaction[e]&&(this.interaction[e].remove(),this.interaction[e]=null)},_enableInteraction:function(e){var t=this,n=this._generateTileJSON(e);if(n){var r=this.interaction[e];r&&r.remove(),this.interaction[e]=(new this.interactionClass).map(this.nativeMap).tilejson(n).on("on",function(n){t._interactionDisabled||(n.layer=e,t._manageOnEvents(t.nativeMap,n))}).on("off",function(n){t._interactionDisabled||(null!=(n=n||{}).errors&&t._manageInteractivityErrors(n),n.layer=e,t._manageOffEvents(t.nativeMap,n))})}},_manageInteractivityErrors:function(e){var t=r(e);t.length>0&&this.trigger("featureError",t[0])},_generateTileJSON:function(e){if(this.model.hasURLs())return{tilejson:"2.0.0",scheme:"xyz",grids:this.model.getGridURLTemplatesWithSubdomains(e),tiles:this.model.getTileURLTemplatesWithSubdomains(),formatter:function(e,t){return t}}},error:function(e){},tilesOk:function(){}},e.exports=i},function(e,t,n){"use strict";e.exports=function(e,t,n){if(n){var r={data:void 0,latLng:void 0};t.feature&&(r.data=t.feature),t.latlng&&(r.latLng={lat:t.latlng[0],lng:t.latlng[1]}),t.position&&(r.position={x:t.position.x,y:t.position.y}),n.trigger(e,r)}}},function(e,t,n){"use strict";function r(e,t){this._type=e||"",this._column=t.getColumn(),this._mapping=t.getMapping(),this._property=t.getProperty()}r.prototype.getType=function(){return this._type},r.prototype.getColumn=function(){return this._column},r.prototype.getMapping=function(){return this._mapping},r.prototype.getProperty=function(){return this._property},e.exports=r},function(e,t,n){"use strict";var r=n(0),i=n(1);function o(){}r.extend(o.prototype,i.Events),o.prototype.$setError=function(e){this._error=e,this.trigger("error",e)},o.prototype.$setEngine=function(e){if(this._engine&&this._engine!==e)throw new Error("CartoCSS engine cannot be changed");this._engine=e},o.prototype.$getEngine=function(){return this._engine},e.exports=o},function(e,t,n){"use strict";var r=n(0),i=n(1),o=function(e){return r.map(e,function(e){var t={};return t[e.name]=e.title,t})},a=i.Collection.extend({equals:function(e){var t=this.toJSON();return r.isEqual(o(t),o(e))}});e.exports=a},function(e,t,n){"use strict";var r=n(0),i=n(1);function o(e,t,n){n=n||{},this._id=n.id||o.$generateId()}r.extend(o.prototype,i.Events),o.prototype.getId=function(){return this._id},o.$nextId=0,o.$generateId=function(){return"L"+ ++o.$nextId},o.prototype.$getInternalModel=function(){return this._internalModel},e.exports=o},function(e,t,n){"use strict";var r=n(23).WINDSHAFT_ERRORS,i=function(e,t,n){var i,o,a,s;this._error=e,this.origin=n||"windshaft",this.type=(i=e.type,o=t,a=r.GENERIC,i&&i!==r.UNKNOWN?i:o||(i!==r.UNKNOWN?a:r.UNKNOWN)),this.subtype=e.subtype,this.message=(s=e.message)&&s.length>256?s.substring(0,256):s,this.context=e.context,this.isLayerError(e.type)&&(this.context=e.layer&&e.layer.context,this.layerId=e.layer&&e.layer.id),this.isAnalysisError(e.type)&&e.analysis&&(this.context=e.analysis.context,this.analysisId=e.analysis.node_id||e.analysis.id)};i.prototype.isGlobalError=function(e){return!this.isLayerError(e)&&!this.isAnalysisError(e)},i.prototype.isLayerError=function(e){return(e=e||this._error.type)===r.LAYER},i.prototype.isAnalysisError=function(e){return(e=e||this._error.type)===r.ANALYSIS},e.exports=i},function(e,t,n){"use strict";e.exports={MAPS_API_BASE_URL:"api/v1/map"}},function(e,t,n){"use strict";var r=n(127);e.exports.getVersion=function(e){if("latest"===e)e=r.target;else if(!r.versions.includes(e))throw new Error('Invalid camshaft-reference version: "'+e+'". Valid versions are: '+r.versions.join(", ")+".");return n(126)("./"+e+"/reference.json")},e.exports.versions=r.versions},function(e,t,n){"use strict";var r=n(0),i=n(132),o=n(130),a=n(1),s=n(121),u=n(120),l=n(119),c=n(118),p=n(112),h=n(111),f=n(110),d=n(109),m=n(28),_=n(40);function y(e){if(!e)throw new Error("new Engine() called with no parameters");this._isNamedMap=void 0!==e.templateName,this._timeout=null,this._stackCalls=[],this._batchOptions={},this._windshaftSettings={urlTemplate:e.serverUrl,userName:e.username,client:e.client,apiKey:e.apiKey,authToken:e.authToken,templateName:e.templateName},this._windshaftClient=new d(this._windshaftSettings),this._eventEmmitter=r.extend({},a.Events),this._analysisPoller=new i,this._layersCollection=new l,this._dataviewsCollection=new u,this._cartoLayerGroup=new s({apiKey:e.apiKey,authToken:e.authToken},{layersCollection:this._layersCollection}),this._bindCartoLayerGroupError(),this._modelUpdater=new c({dataviewsCollection:this._dataviewsCollection,layerGroupModel:this._cartoLayerGroup,layersCollection:this._layersCollection})}y.prototype.getLayerGroup=function(){return this._cartoLayerGroup},y.prototype.getApiKey=function(){return this._windshaftSettings&&this._windshaftSettings.apiKey},y.prototype.getAuthToken=function(){return this._windshaftSettings&&this._windshaftSettings.authToken},y.prototype.on=function(e,t,n){this._eventEmmitter.on(e,t,n)},y.prototype.off=function(e,t,n){this._eventEmmitter.off(e,t,n)},y.prototype.reload=function(e){return e=e||{},new Promise(function(t,n){this._batchOptions=r.pick({sourceId:e.sourceId,forceFetch:this._batchOptions.forceFetch||e.forceFetch,includeFilters:e.includeFilters},r.negate(r.isUndefined)),this._stackCalls.push({success:e.success,error:e.error,resolve:t,reject:n});var i=function(){this._timeout=null,this._performReload(this._batchOptions).then(function(){this._stackCalls.forEach(function(e){e.success&&e.success(),e.resolve()}),this._stackCalls=[],this._batchOptions={}}.bind(this)).catch(function(e){this._stackCalls.forEach(function(t){t.error&&t.error(e),t.reject(e)}),this._stackCalls=[],this._batchOptions={}}.bind(this))}.bind(this);clearTimeout(this._timeout),this._timeout=setTimeout(i,100)}.bind(this))},y.prototype._performReload=function(e){return new Promise(function(t,n){var r=this._buildWindshaftOptions(e,function(n){this._onReloadSuccess(n,e.sourceId,e.forceFetch),t()}.bind(this),function(e){var t=this._onReloadError(e);n(t)}.bind(this));try{var i=this._buildParams(r.includeFilters),o=this._getSerializer().serialize(this._layersCollection,this._dataviewsCollection),a=new h(o,i,r);this._eventEmmitter.trigger(y.Events.RELOAD_STARTED),this._windshaftClient.instantiateMap(a)}catch(e){var s=new _({message:e.message});this._manageClientError(s,r)}}.bind(this))},y.prototype.addLayer=function(e){this._layersCollection.add(e)},y.prototype.removeLayer=function(e){this._layersCollection.remove(e)},y.prototype.moveLayer=function(e,t){var n=this._layersCollection.indexOf(e);n>=0&&n!==t&&this._layersCollection.models.splice(t,0,this._layersCollection.models.splice(n,1)[0])},y.prototype.addDataview=function(e){this._dataviewsCollection.add(e)},y.prototype.removeDataview=function(e){this._dataviewsCollection.remove(e)},y.prototype._onReloadSuccess=function(e,t,n){var r=new f(this._windshaftSettings,e);this._modelUpdater.updateModels(r,t,n),this._restartAnalysisPolling(),this._eventEmmitter.trigger(y.Events.RELOAD_SUCCESS)},y.prototype._onReloadError=function(e){var t=this._getSimpleWindshaftError(e);return this._modelUpdater.setErrors(e),this._eventEmmitter.trigger(y.Events.RELOAD_ERROR,t),t},y.prototype._buildWindshaftOptions=function(e,t,n){return r.extend({includeFilters:!0,success:t,error:n},r.pick(e,"sourceId","forceFetch","includeFilters"))},y.prototype._buildParams=function(e){var t={};return t.client=this._windshaftSettings.client,e&&!r.isEmpty(this._dataviewsCollection.getFilters())&&(t.filters=this._dataviewsCollection.getFilters()),this._windshaftSettings.apiKey?(t.api_key=this._windshaftSettings.apiKey,t):this._windshaftSettings.authToken?(t.auth_token=this._windshaftSettings.authToken,t):void console.warn("Engine initialized with no apiKeys neither authToken")},y.prototype._restartAnalysisPolling=function(){var e=m.getUniqueAnalysisNodes(this._layersCollection,this._dataviewsCollection);this._analysisPoller.resetAnalysisNodes(e)},y.prototype._getSerializer=function(){return this._isNamedMap?p:o},y.prototype._manageClientError=function(e,t){this._modelUpdater.setErrors([e]),t.error&&t.error([e])},y.prototype._bindCartoLayerGroupError=function(){this._cartoLayerGroup.on("all",function(e,t){0===e.lastIndexOf("error:",0)&&(t=new _(t),this._eventEmmitter.trigger(y.Events.LAYER_ERROR,t))},this)},y.prototype._getSimpleWindshaftError=function(e){var t=r.find(e,function(e){return e.isGlobalError()});return!t&&e&&e.length>0&&(t=e[0]),t},y.Events={RELOAD_STARTED:"reload-started",RELOAD_SUCCESS:"reload-success",RELOAD_ERROR:"reload-error",LAYER_ERROR:"layer-error"},e.exports=y},function(e,t,n){"use strict";n.r(t);var r=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN},i=function(e){var t;return 1===e.length&&(t=e,e=function(e,n){return r(t(e),n)}),{left:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)<0?r=o+1:i=o}return r},right:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)>0?i=o:r=o+1}return r}}};var o=i(r),a=o.right,s=o.left,u=a,l=function(e,t){null==t&&(t=c);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return o};function c(e,t){return[e,t]}var p=function(e,t,n){var r,i,o,a,s=e.length,u=t.length,l=new Array(s*u);for(null==n&&(n=c),r=o=0;r<s;++r)for(a=e[r],i=0;i<u;++i,++o)l[o]=n(a,t[i]);return l},h=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},f=function(e){return null===e?NaN:+e},d=function(e,t){var n,r,i=e.length,o=0,a=-1,s=0,u=0;if(null==t)for(;++a<i;)isNaN(n=f(e[a]))||(u+=(r=n-s)*(n-(s+=r/++o)));else for(;++a<i;)isNaN(n=f(t(e[a],a,e)))||(u+=(r=n-s)*(n-(s+=r/++o)));if(o>1)return u/(o-1)},m=function(e,t){var n=d(e,t);return n?Math.sqrt(n):n},_=function(e,t){var n,r,i,o=e.length,a=-1;if(null==t){for(;++a<o;)if(null!=(n=e[a])&&n>=n)for(r=i=n;++a<o;)null!=(n=e[a])&&(r>n&&(r=n),i<n&&(i=n))}else for(;++a<o;)if(null!=(n=t(e[a],a,e))&&n>=n)for(r=i=n;++a<o;)null!=(n=t(e[a],a,e))&&(r>n&&(r=n),i<n&&(i=n));return[r,i]},y=Array.prototype,v=y.slice,g=y.map,b=function(e){return function(){return e}},x=function(e){return e},w=function(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(i);++r<i;)o[r]=e+r*n;return o},E=Math.sqrt(50),T=Math.sqrt(10),k=Math.sqrt(2),C=function(e,t,n){var r,i,o,a,s=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(a=M(e,t,n))||!isFinite(a))return[];if(a>0)for(e=Math.ceil(e/a),t=Math.floor(t/a),o=new Array(i=Math.ceil(t-e+1));++s<i;)o[s]=(e+s)*a;else for(e=Math.floor(e*a),t=Math.ceil(t*a),o=new Array(i=Math.ceil(e-t+1));++s<i;)o[s]=(e-s)/a;return r&&o.reverse(),o};function M(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=E?10:o>=T?5:o>=k?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=E?10:o>=T?5:o>=k?2:1)}function P(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=E?i*=10:o>=T?i*=5:o>=k&&(i*=2),t<e?-i:i}var A=function(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1},S=function(){var e=x,t=_,n=A;function r(r){var i,o,a=r.length,s=new Array(a);for(i=0;i<a;++i)s[i]=e(r[i],i,r);var l=t(s),c=l[0],p=l[1],h=n(s,c,p);Array.isArray(h)||(h=P(c,p,h),h=w(Math.ceil(c/h)*h,Math.floor(p/h)*h,h));for(var f=h.length;h[0]<=c;)h.shift(),--f;for(;h[f-1]>p;)h.pop(),--f;var d,m=new Array(f+1);for(i=0;i<=f;++i)(d=m[i]=[]).x0=i>0?h[i-1]:c,d.x1=i<f?h[i]:p;for(i=0;i<a;++i)c<=(o=s[i])&&o<=p&&m[u(h,o,0,f)].push(r[i]);return m}return r.value=function(t){return arguments.length?(e="function"==typeof t?t:b(t),r):e},r.domain=function(e){return arguments.length?(t="function"==typeof e?e:b([e[0],e[1]]),r):t},r.thresholds=function(e){return arguments.length?(n="function"==typeof e?e:Array.isArray(e)?b(v.call(e)):b(e),r):n},r},O=function(e,t,n){if(null==n&&(n=f),r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),a=+n(e[o],o,e);return a+(+n(e[o+1],o+1,e)-a)*(i-o)}},I=function(e,t,n){return e=g.call(e,f).sort(r),Math.ceil((n-t)/(2*(O(e,.75)-O(e,.25))*Math.pow(e.length,-1/3)))},R=function(e,t,n){return Math.ceil((n-t)/(3.5*m(e)*Math.pow(e.length,-1/3)))},j=function(e,t){var n,r,i=e.length,o=-1;if(null==t){for(;++o<i;)if(null!=(n=e[o])&&n>=n)for(r=n;++o<i;)null!=(n=e[o])&&n>r&&(r=n)}else for(;++o<i;)if(null!=(n=t(e[o],o,e))&&n>=n)for(r=n;++o<i;)null!=(n=t(e[o],o,e))&&n>r&&(r=n);return r},L=function(e,t){var n,r=e.length,i=r,o=-1,a=0;if(null==t)for(;++o<r;)isNaN(n=f(e[o]))?--i:a+=n;else for(;++o<r;)isNaN(n=f(t(e[o],o,e)))?--i:a+=n;if(i)return a/i},z=function(e,t){var n,i=e.length,o=-1,a=[];if(null==t)for(;++o<i;)isNaN(n=f(e[o]))||a.push(n);else for(;++o<i;)isNaN(n=f(t(e[o],o,e)))||a.push(n);return O(a.sort(r),.5)},D=function(e){for(var t,n,r,i=e.length,o=-1,a=0;++o<i;)a+=e[o].length;for(n=new Array(a);--i>=0;)for(t=(r=e[i]).length;--t>=0;)n[--a]=r[t];return n},B=function(e,t){var n,r,i=e.length,o=-1;if(null==t){for(;++o<i;)if(null!=(n=e[o])&&n>=n)for(r=n;++o<i;)null!=(n=e[o])&&r>n&&(r=n)}else for(;++o<i;)if(null!=(n=t(e[o],o,e))&&n>=n)for(r=n;++o<i;)null!=(n=t(e[o],o,e))&&r>n&&(r=n);return r},N=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},q=function(e,t){if(n=e.length){var n,i,o=0,a=0,s=e[a];for(null==t&&(t=r);++o<n;)(t(i=e[o],s)<0||0!==t(s,s))&&(s=i,a=o);return 0===t(s,s)?a:void 0}},F=function(e,t,n){for(var r,i,o=(null==n?e.length:n)-(t=null==t?0:+t);o;)i=Math.random()*o--|0,r=e[o+t],e[o+t]=e[i+t],e[i+t]=r;return e},U=function(e,t){var n,r=e.length,i=-1,o=0;if(null==t)for(;++i<r;)(n=+e[i])&&(o+=n);else for(;++i<r;)(n=+t(e[i],i,e))&&(o+=n);return o},V=function(e){if(!(i=e.length))return[];for(var t=-1,n=B(e,W),r=new Array(n);++t<n;)for(var i,o=-1,a=r[t]=new Array(i);++o<i;)a[o]=e[o][t];return r};function W(e){return e.length}var G=function(){return V(arguments)};n.d(t,"bisect",function(){return u}),n.d(t,"bisectRight",function(){return a}),n.d(t,"bisectLeft",function(){return s}),n.d(t,"ascending",function(){return r}),n.d(t,"bisector",function(){return i}),n.d(t,"cross",function(){return p}),n.d(t,"descending",function(){return h}),n.d(t,"deviation",function(){return m}),n.d(t,"extent",function(){return _}),n.d(t,"histogram",function(){return S}),n.d(t,"thresholdFreedmanDiaconis",function(){return I}),n.d(t,"thresholdScott",function(){return R}),n.d(t,"thresholdSturges",function(){return A}),n.d(t,"max",function(){return j}),n.d(t,"mean",function(){return L}),n.d(t,"median",function(){return z}),n.d(t,"merge",function(){return D}),n.d(t,"min",function(){return B}),n.d(t,"pairs",function(){return l}),n.d(t,"permute",function(){return N}),n.d(t,"quantile",function(){return O}),n.d(t,"range",function(){return w}),n.d(t,"scan",function(){return q}),n.d(t,"shuffle",function(){return F}),n.d(t,"sum",function(){return U}),n.d(t,"ticks",function(){return C}),n.d(t,"tickIncrement",function(){return M}),n.d(t,"tickStep",function(){return P}),n.d(t,"transpose",function(){return V}),n.d(t,"variance",function(){return d}),n.d(t,"zip",function(){return G})},function(e,t,n){"use strict";var r=n(20),i=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.JOIN_OPERATOR="OR",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r),t}();e.exports=i},function(e,t,n){"use strict";var r=n(20),i=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.JOIN_OPERATOR="AND",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r),t}();e.exports=i},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=n(10),o={lt:{parameters:[{name:"lt",allowedTypes:["Number","Date","Object"]}]},lte:{parameters:[{name:"lte",allowedTypes:["Number","Date","Object"]}]},gt:{parameters:[{name:"gt",allowedTypes:["Number","Date","Object"]}]},gte:{parameters:[{name:"gte",allowedTypes:["Number","Date","Object"]}]},between:{parameters:[{name:"between.min",allowedTypes:["Number","Date"]},{name:"between.max",allowedTypes:["Number","Date"]}]},notBetween:{parameters:[{name:"notBetween.min",allowedTypes:["Number","Date"]},{name:"notBetween.max",allowedTypes:["Number","Date"]}]},betweenSymmetric:{parameters:[{name:"betweenSymmetric.min",allowedTypes:["Number","Date"]},{name:"betweenSymmetric.max",allowedTypes:["Number","Date"]}]},notBetweenSymmetric:{parameters:[{name:"notBetweenSymmetric.min",allowedTypes:["Number","Date"]},{name:"notBetweenSymmetric.max",allowedTypes:["Number","Date"]}]}},a=Object.freeze(Object.keys(o)),s=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return i.SQL_TEMPLATES=i._getSQLTemplates(),i.ALLOWED_FILTERS=a,i.PARAMETER_SPECIFICATION=o,i._checkFilters(n),i._filters=n,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i),r(t,[{key:"_getSQLTemplates",value:function(){return{lt:'<%= column %> < <%= value.query ? "(" + value.query + ")" : value %>',lte:'<%= column %> <= <%= value.query ? "(" + value.query + ")" : value %>',gt:'<%= column %> > <%= value.query ? "(" + value.query + ")" : value %>',gte:'<%= column %> >= <%= value.query ? "(" + value.query + ")" : value %>',between:"<%= column %> BETWEEN <%= value.min %> AND <%= value.max %>",notBetween:"<%= column %> NOT BETWEEN <%= value.min %> AND <%= value.max %>",betweenSymmetric:"<%= column %> BETWEEN SYMMETRIC <%= value.min %> AND <%= value.max %>",notBetweenSymmetric:"<%= column %> NOT BETWEEN SYMMETRIC <%= value.min %> AND <%= value.max %>"}}}]),t}();e.exports=s},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=n(10),o={in:{parameters:[{name:"in",allowedTypes:["Array","String","Object"]}]},notIn:{parameters:[{name:"notIn",allowedTypes:["Array","String","Object"]}]},eq:{parameters:[{name:"eq",allowedTypes:["String","Number","Date","Object"]}]},notEq:{parameters:[{name:"notEq",allowedTypes:["String","Number","Date","Object"]}]},like:{parameters:[{name:"like",allowedTypes:["String"]}]},similarTo:{parameters:[{name:"similarTo",allowedTypes:["String"]}]}},a=Object.freeze(Object.keys(o)),s=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return i.SQL_TEMPLATES=i._getSQLTemplates(),i.ALLOWED_FILTERS=a,i.PARAMETER_SPECIFICATION=o,i._checkFilters(n),i._filters=n,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i),r(t,[{key:"_getSQLTemplates",value:function(){return{in:"<% if (value) { %><%= column %> IN (<%= value.query || value %>)<% } else { %>true = false<% } %>",notIn:"<% if (value) { %><%= column %> NOT IN (<%= value.query || value %>)<% } %>",eq:'<%= column %> = <%= value.query ? "(" + value.query + ")" : value %>',notEq:'<%= column %> != <%= value.query ? "(" + value.query + ")" : value %>',like:"<%= column %> LIKE <%= value %>",similarTo:"<%= column %> SIMILAR TO <%= value %>"}}}]),t}();e.exports=s},function(e,t,n){"use strict";var r=n(0),i=n(2);e.exports=i.extend({initialize:function(e){this._isReady=!1,this._map=e,this._debouncedTriggerBoundsChanged=r.debounce(this._triggerBoundsChanged,200),google.maps.event.addListener(this._map,"bounds_changed",this._debouncedTriggerBoundsChanged.bind(this))},getBounds:function(){if(this._isReady){var e=this._map.getBounds(),t=e.getSouthWest(),n=e.getNorthEast();return{west:t.lng(),south:t.lat(),east:n.lng(),north:n.lat()}}return{west:0,south:0,east:0,north:0}},clean:function(){google.maps.event.clearListeners(this._map,"bounds_changed")},_triggerBoundsChanged:function(){this._isReady=!0,this.trigger("boundsChanged",this.getBounds())}})},function(e,t,n){"use strict";var r=n(7),i=n(49),o=n(17),a=n(6);function s(e){if(t=e,a.isGoogleMapsLoaded(),!(t instanceof google.maps.Map))throw new Error("Bounding box requires a Google Maps map but got: "+e);var t,n=new i(e);this._internalModel=new o(n),this.listenTo(this._internalModel,"boundsChanged",this._onBoundsChanged)}s.prototype=Object.create(r.prototype),s.prototype.getBounds=function(){return this._internalModel.getBounds()},s.prototype._onBoundsChanged=function(e){this.trigger("boundsChanged",e)},s.prototype.$getInternalModel=function(){return this._internalModel},e.exports=s},function(e,t,n){"use strict";var r=n(0),i=n(2);e.exports=i.extend({initialize:function(e){this._map=e,this._debouncedTriggerBoundsChanged=r.debounce(this._triggerBoundsChanged,200),this._map.on("move zoom",this._debouncedTriggerBoundsChanged,this)},getBounds:function(){var e=this._map.getBounds(),t=e.getSouthWest(),n=e.getNorthEast();return{west:t.lng,south:t.lat,east:n.lng,north:n.lat}},clean:function(){this._map.off("move zoom")},_triggerBoundsChanged:function(){this.trigger("boundsChanged",this.getBounds())}})},function(e,t,n){"use strict";var r=n(7),i=n(51),o=n(17),a=n(6);function s(e){if(t=e,a.isLeafletLoaded(),!(t instanceof L.Map))throw new Error("Bounding box requires a Leaflet map but got: "+e);var t,n=new i(e);this._internalModel=new o(n),this.listenTo(this._internalModel,"boundsChanged",this._onBoundsChanged)}s.prototype=Object.create(r.prototype),s.prototype.getBounds=function(){return this._internalModel.getBounds()},s.prototype._onBoundsChanged=function(e){this.trigger("boundsChanged",e)},s.prototype.$getInternalModel=function(){return this._internalModel},e.exports=s},function(e,t,n){"use strict";var r=n(0),i=n(7),o=n(17),a=n(5);function s(){this._internalModel=new o}s.prototype=Object.create(i.prototype),s.prototype.setBounds=function(e){return this._checkBounds(e),this._internalModel.setBounds(e),this.trigger("boundsChanged",e),this},s.prototype.resetBounds=function(){return this.setBounds({west:0,south:0,east:0,north:0})},s.prototype.getBounds=function(){return this._internalModel.getBounds()},s.prototype._checkBounds=function(e){if(r.isUndefined(e)||r.isUndefined(e.west)||r.isUndefined(e.south)||r.isUndefined(e.east)||r.isUndefined(e.north)||!r.isNumber(e.west)||!r.isNumber(e.south)||!r.isNumber(e.east)||!r.isNumber(e.north))throw new a("filter","invalidBoundsObject")},s.prototype.$getInternalModel=function(){return this._internalModel},e.exports=s},function(e,t,n){"use strict";var r=n(53),i=n(52),o=n(50),a=n(48),s=n(47),u=n(46),l=n(45);e.exports={BoundingBox:r,BoundingBoxLeaflet:i,BoundingBoxGoogleMaps:o,Category:a,Range:s,AND:u,OR:l}},function(e,t,n){"use strict";var r=n(0);function i(e,t){return e.map(function(e){return{index:e.bin,start:e.start,end:e.end,min:e.min,max:e.max,freq:e.freq,normalized:r.isFinite(e.freq)&&t>0?e.freq/t:0}})}e.exports=function(e,t,n,o){if(!e)return null;var a,s=r.compact(e),u=r.max(s,function(e){return e.freq||0});return{bins:i(s,r.isFinite(u.freq)&&0!==u.freq?u.freq:null),nulls:t||0,offset:(a=o,a/3600),totalAmount:n}}},function(e,t,n){"use strict";var r=n(0),i=n(9),o=n(31),a=n(55),s=n(4).timeAggregation,u=n(4).isValidTimeAggregation;function l(e,t,n){this._initialize(e,t,n),this._aggregation=this._options.aggregation,this._offset=c(this._options.offset),this._localTimezone=this._options.useLocalTimezone}function c(e){return 3600*e}l.prototype=Object.create(i.prototype),l.prototype.DEFAULTS={aggregation:s.AUTO,offset:0,useLocalTimezone:!1},l.prototype.getData=function(){return this._internalModel?a(this._internalModel.get("data"),this._internalModel.get("nulls"),this._internalModel.get("totalAmount"),this._internalModel.getCurrentOffset()):null},l.prototype.setAggregation=function(e){return this._validateAggregation(e),this._changeProperty("aggregation",e),this},l.prototype.getAggregation=function(){return this._aggregation},l.prototype.setOffset=function(e){return this._validateOffset(e),this._changeProperty("offset",c(e)),this},l.prototype.getOffset=function(){return this._offset/3600},l.prototype.useLocalTimezone=function(e){return this._validateLocalTimezone(e),this._changeProperty("localTimezone",e),this},l.prototype.isUsingLocalTimezone=function(){return this._localTimezone},l.prototype._checkOptions=function(e){if(r.isUndefined(e))throw this._getValidationError("timeSeriesOptionsRequired");this._validateAggregation(e.aggregation),this._validateOffset(e.offset),this._validateLocalTimezone(e.useLocalTimezone)},l.prototype._validateAggregation=function(e){if(!u(e))throw this._getValidationError("timeSeriesInvalidAggregation")},l.prototype._validateOffset=function(e){if(!r.isFinite(e)||Math.floor(e)!==e||e<-12||e>14)throw this._getValidationError("timeSeriesInvalidOffset")},l.prototype._validateLocalTimezone=function(e){if(!r.isBoolean(e))throw this._getValidationError("timeSeriesInvalidUselocaltimezone")},l.prototype._createInternalModel=function(e){this._internalModel=new o({source:this._source.$getInternalModel(),column:this._column,aggregation:this._aggregation,offset:this._offset,localTimezone:this._localTimezone,sync_on_bbox_change:!!this._boundingBoxFilter,enabled:this._enabled,column_type:"date"},{engine:e,bboxFilter:this._boundingBoxFilter&&this._boundingBoxFilter.$getInternalModel()})},e.exports=l},function(e,t,n){"use strict";var r=n(0);function i(e,t){return e.map(function(e){return r.extend(e,{normalized:r.isFinite(e.freq)&&t>0?e.freq/t:0})})}e.exports=function(e,t,n){if(!e)return null;var o=r.compact(e),a=r.max(o,function(e){return e.freq||0});return{bins:i(o,r.isFinite(a.freq)&&0!==a.freq?a.freq:null),nulls:t||0,totalAmount:n}}},function(e,t,n){"use strict";var r={getLocalOffset:function(){return-60*(new Date).getTimezoneOffset()}};e.exports=r},function(e,t,n){"use strict";var r=n(0),i=n(18),o=n(2),a=n(30);e.exports=o.extend({defaults:{url:"",data:[],localTimezone:!1,localOffset:0,hasBeenFetched:!1},url:function(){var e=[],t=this.get("column_type"),n=this._getCurrentOffset(),i=this.get("aggregation")||"auto";if(e.push("no_filters=1"),"number"===t&&this.get("bins")?e.push("bins="+this.get("bins")):"date"===t&&(e.push("aggregation="+i),r.isFinite(n)&&e.push("offset="+n)),this.get("apiKey"))e.push("api_key="+this.get("apiKey"));else if(this.get("authToken")){var o=this.get("authToken");o instanceof Array?r.each(o,function(t){e.push("auth_token[]="+t)}):e.push("auth_token="+o)}var a=this.get("start"),s=this.get("end");return r.isFinite(a)&&r.isFinite(s)&&(e.push("start="+a),e.push("end="+s)),this.get("url")+"?"+e.join("&")},initialize:function(){this.sync=i.bind(this),this._initBinds()},_initBinds:function(){this.on("change:url",function(){this.refresh()},this),this.on("change:aggregation change:offset",function(){"date"===this.get("column_type")&&this.get("aggregation")&&this.refresh()},this),this.on("change:bins",function(){"number"===this.get("column_type")&&this.refresh()},this),this.on("change:localTimezone",function(){this.refresh()},this),this.on("change:column",function(){this.set("aggregation","auto",{silent:!0})}),this.on("sync",function(){this.set("hasBeenFetched",!0)})},setUrl:function(e){if(!e)throw new Error("url not specified");this.set("url",e)},setBins:function(e){this.set("bins",e,{silent:void 0===e})},getData:function(){return this.get("data")},parse:function(e){var t=e.aggregation||this.get("aggregation"),n=e.bins_count||0,i=e.bin_width,o="date"===this.get("column_type")?e.timestamp_start:e.bins_start,s={};return s.data=new Array(n),t&&(s.aggregation=t,this.set("aggregation",t,{silent:!0})),r.each(e.bins,function(e){s.data[e.bin]=e}),"date"===this.get("column_type")?(s.data=a.fillTimestampBuckets(s.data,o,t,n,"totals"),n=s.data.length):a.fillNumericBuckets(s.data,o,i,n),s.data.length>0&&(s.start=s.data[0].start,s.end=s.data[s.data.length-1].end),s.bins=n,s},refresh:function(){this.fetch()},_getCurrentOffset:function(){return this.get("localTimezone")?this.get("localOffset"):this.get("offset")}})},function(e,t,n){"use strict";var r=n(0),i=n(9),o=n(31),a=n(57);function s(e,t,n){this._initialize(e,t,n),this._bins=this._options.bins,this._start=this._options.start,this._end=this._options.end}s.prototype=Object.create(i.prototype),s.prototype.DEFAULTS={bins:10},s.prototype.getData=function(){return this._internalModel?a(this._internalModel.get("data"),this._internalModel.get("nulls"),this._internalModel.get("totalAmount")):null},s.prototype.setColumn=function(e){i.prototype.setColumn.apply(this,arguments),this._start=null,this._end=null},s.prototype.setBins=function(e){return this._validateBins(e),this._changeProperty("bins",e),this},s.prototype.getBins=function(){return this._bins},s.prototype.setStartEnd=function(e,t){return this._validateStartEnd(e,t),this._changeProperties({start:e,end:t}),this},s.prototype.getStart=function(){return this._start||this._internalModel.get("start")},s.prototype.getEnd=function(){return this._end||this._internalModel.get("end")},s.prototype.getDistributionType=function(){if(this._internalModel){var e=this._internalModel.getData();return this._internalModel.getDistributionType(e)}return null},s.prototype._validateBins=function(e){if(!r.isFinite(e)||e<1||Math.floor(e)!==e)throw this._getValidationError("histogramInvalidBins")},s.prototype._validateStartEnd=function(e,t){var n=[e,t];if(!r.every(n,r.isUndefined)){var i=r.every(n,function(e){return r.isNumber(e)&&!r.isNaN(e)}),o=r.every(n,r.isNull);if(!i&&!o)throw this._getValidationError("histogramInvalidStartEnd")}},s.prototype._checkOptions=function(e){if(r.isUndefined(e))throw this._getValidationError("histogramOptionsRequired");this._validateBins(e.bins),this._validateStartEnd(e.start,e.end)},s.prototype._createInternalModel=function(e){this._internalModel=new o({source:this._source.$getInternalModel(),column:this._column,bins:this._bins,start:this._start,end:this._end,sync_on_bbox_change:!!this._boundingBoxFilter,enabled:this._enabled,column_type:"number"},{engine:e,bboxFilter:this._boundingBoxFilter&&this._boundingBoxFilter.$getInternalModel()})},e.exports=s},function(e,t,n){"use strict";e.exports=function(e,t,n){return{nulls:e,operation:t,result:n}}},function(e,t,n){"use strict";var r=n(0),i=n(19);e.exports=i.extend({defaults:r.extend({type:"formula",data:""},i.prototype.defaults),initialize:function(){i.prototype.initialize.apply(this,arguments),this.on("change:column change:operation",this._reloadAndForceFetch,this)},parse:function(e){return{data:e.result,nulls:e.nulls}},toJSON:function(){return{type:"formula",source:{id:this.getSourceId()},options:{column:this.get("column"),operation:this.get("operation")}}}},{ATTRS_NAMES:i.ATTRS_NAMES.concat(["column","operation"])})},function(e,t,n){"use strict";var r=n(0),i=n(9),o=n(4),a=n(62),s=n(61);function u(e,t,n){this._initialize(e,t,n),this._operation=this._options.operation}u.prototype=Object.create(i.prototype),u.prototype.setOperation=function(e){return this._checkOperation(e),this._changeProperty("operation",e),this},u.prototype.getOperation=function(){return this._operation},u.prototype.getData=function(){return this._internalModel?s(this._internalModel.get("nulls"),this._operation,this._internalModel.get("data")):null},u.prototype.DEFAULTS={operation:o.operation.COUNT},u.prototype._checkOptions=function(e){if(r.isUndefined(e))throw this._getValidationError("formulaOptionsRequired");this._checkOperation(e.operation)},u.prototype._checkOperation=function(e){if(r.isUndefined(e)||!o.isValidOperation(e))throw this._getValidationError("formulaInvalidOperation")},u.prototype._createInternalModel=function(e){this._internalModel=new a({source:this._source.$getInternalModel(),column:this._column,operation:this._operation,sync_on_bbox_change:!!this._boundingBoxFilter,enabled:this._enabled},{engine:e,bboxFilter:this._boundingBoxFilter&&this._boundingBoxFilter.$getInternalModel()})},e.exports=u},function(e,t,n){"use strict";var r=n(0);function i(e){return r.map(e,function(e){return{group:e.agg,name:e.name,value:e.value}})}e.exports=function(e,t,n,r,o,a){return e?{count:t,max:n,min:r,nulls:o,operation:a,categories:i(e)}:null}},function(e,t,n){"use strict";var r=n(2);e.exports=r.extend({isEmpty:function(){throw new Error("Filters must implement the .isEmpty method")},toJSON:function(){throw new Error("Filters must implement the .toJSON method")},remove:function(){this.trigger("destroy",this),this.stopListening()}})},function(e,t,n){"use strict";var r=n(0),i=n(1),o=n(65);e.exports=o.extend({defaults:{rejectAll:!1},initialize:function(){this.rejectedCategories=new i.Collection,this.acceptedCategories=new i.Collection,this._initBinds()},_initBinds:function(){this.listenTo(this.rejectedCategories,"add remove",function(){this.set("rejectAll",!1)}),this.listenTo(this.acceptedCategories,"add remove",function(){this.set("rejectAll",!1)})},isEmpty:function(){return 0===this.rejectedCategories.size()&&0===this.acceptedCategories.size()&&!this.get("rejectAll")},accept:function(e,t){e=r.isArray(e)?e:[e],r.each(e,function(e){var t={name:e},n=this.rejectedCategories.where(t),r=this.acceptedCategories.where(t);n.length>0?this.rejectedCategories.remove(n):r.length||this.acceptedCategories.add(t)},this),!1!==t&&this.applyFilter()},acceptAll:function(){this.set("rejectAll",!1),this.cleanFilter()},isAccepted:function(e){return this.acceptedCategories.where({name:e}).length>0},reject:function(e,t){e=r.isArray(e)?e:[e],r.each(e,function(e){var t={name:e},n=this.acceptedCategories.where(t),r=this.rejectedCategories.where(t);n.length>0?this.acceptedCategories.remove(n):r.length||this.rejectedCategories.add(t)},this),!1!==t&&this.applyFilter()},isRejected:function(e){var t=this.acceptedCategories.size();return this.rejectedCategories.where({name:e}).length>0||(t>0&&0===this.acceptedCategories.where({name:e}).length||!!this.get("rejectAll"))},rejectAll:function(){this.set("rejectAll",!0),this.cleanFilter()},cleanFilter:function(e){this.acceptedCategories.reset(),this.rejectedCategories.reset(),!1!==e&&this.applyFilter()},applyFilter:function(){this.trigger("change",this)},areAllRejected:function(){return this.get("rejectAll")},toJSON:function(){var e={},t=this.rejectedCategories.size(),n=this.acceptedCategories.size(),i={accept:r.pluck(this.acceptedCategories.toJSON(),"name")},o={reject:r.pluck(this.rejectedCategories.toJSON(),"name")};this.get("rejectAll")?e={accept:[]}:n>0?e=i:t>0&&0===n&&(e=o);var a={};return a[this.get("dataviewId")]=e,a},getAcceptedCategoryNames:function(){return this.acceptedCategories.map(function(e){return e.get("name")})},getRejectedCategoryNames:function(){return this.rejectedCategories.map(function(e){return e.get("name")})}})},function(e,t,n){"use strict";var r=n(0),i=n(2);e.exports=i.extend({defaults:{url:"",totalCount:0,categoriesCount:0},url:function(){var e=this.get("url"),t=[];if(this.get("apiKey"))e+="?api_key="+this.get("apiKey");else if(this.get("authToken")){var n=this.get("authToken");n instanceof Array?r.each(n,function(e){t.push("auth_token[]="+e)}):t.push("auth_token="+n),e+="?"+t.join("&")}return e},initialize:function(){this.bind("change:url",function(){this.fetch()},this)},setUrl:function(e){this.set("url",e)},parse:function(e){return{categoriesCount:e.categoriesCount,totalCount:r.reduce(r.pluck(e.categories,"value"),function(e,t){return e+t},0)}}})},function(e,t,n){"use strict";var r=n(2);e.exports=r.extend({defaults:{name:"",agg:!1,value:0}})},function(e,t,n){"use strict";var r=n(0),i=n(2),o=n(18),a=n(32);e.exports=i.extend({defaults:{q:"",data:[],url:""},url:function(){var e=this.get("url")+"/search?q="+encodeURIComponent(this.get("q"));if(this.get("apiKey"))e+="&api_key="+this.get("apiKey");else if(this.get("authToken")){var t=this.get("authToken");t instanceof Array?r.each(t,function(t){e+="&auth_token[]="+t}):e+="&auth_token="+t}return e},initialize:function(e,t){this._data=new a(null,{aggregationModel:t.aggregationModel}),this.sync=o.bind(this)},fetchIfSearchIsApplied:function(){this.isSearchApplied()&&this.fetch()},setData:function(e){var t=this._parseData(e);this._data.reset(t),this.set("data",t)},getData:function(){return this._data},getSize:function(){return this._data.size()},getCount:function(){return this.getSize()},isValid:function(){return!!this.get("q")},resetData:function(){this.setData([]),this.set("q","")},getSearchQuery:function(){return this.get("q")},isSearchApplied:function(){return this.isValid()&&this.getSize()>0},_parseData:function(e){var t=[];return r.each(e,function(e){e.agg||t.push({selected:!1,name:(e.category||e.name).toString(),agg:e.agg,value:e.value})},this),t},parse:function(e){var t=this._parseData(e.categories);return this._data.reset(t),{data:t}},fetch:function(e){if(e=e||{},this.trigger("loading",this),e.success)var t=e&&e.success;return i.prototype.fetch.call(this,r.extend(e,{success:function(){t&&t(arguments),this.trigger("loaded",this)}.bind(this),error:function(e,t){(!t||t&&"abort"!==t.statusText)&&this.trigger("error",e,t)}.bind(this)}))}})},function(e,t,n){"use strict";var r=n(0),i=n(19),o=n(69),a=n(67),s=n(32);e.exports=i.extend({defaults:r.extend({type:"category",filterEnabled:!1,categories:6,allCategoryNames:[]},i.prototype.defaults),_getDataviewSpecificURLParams:function(){return["own_filter="+(this.get("filterEnabled")?1:0),"categories="+this.get("categories")]},initialize:function(e,t){i.prototype.initialize.call(this,e,t),this._rangeModel=new a({apiKey:this._engine.getApiKey(),authToken:this._engine.getAuthToken()}),this._data=new s(null,{aggregationModel:this}),this._searchModel=new o({apiKey:this._engine.getApiKey(),authToken:this._engine.getAuthToken()},{aggregationModel:this}),this.on("change:column change:aggregation change:aggregation_column",this._reloadAndForceFetch,this),this.on("change:categories",this.refresh,this),this.bind("change:url",function(){this._searchModel.set({url:this.get("url")})},this),this.once("change:url",function(){this._rangeModel.setUrl(this.get("url"))},this),this._rangeModel.bind("change:totalCount change:categoriesCount",function(){this.set({totalCount:this._rangeModel.get("totalCount"),categoriesCount:this._rangeModel.get("categoriesCount")})},this),this._bindSearchModelEvents(),e&&e.acceptedCategories&&this.filter.accept(e.acceptedCategories)},_onMapBoundsChanged:function(){i.prototype._onMapBoundsChanged.apply(this,arguments),this._searchModel.fetchIfSearchIsApplied()},_bindSearchModelEvents:function(){this.listenTo(this._searchModel,"loading",function(){this.trigger("loading",this)},this),this.listenTo(this._searchModel,"loaded",function(){this.trigger("loaded",this)},this),this.listenTo(this._searchModel,"error",function(e,t){(!t||t&&"abort"!==t.statusText)&&this.trigger("error",e,t)},this),this.listenTo(this._searchModel,"change:data",this._onSearchDataChange,this)},_onSearchDataChange:function(){this.getSearchResult().each(function(e){var t=this.filter.isAccepted(e.get("name"));e.set("selected",t)},this),this.trigger("change:searchData",this)},_shouldFetchOnBoundingBoxChange:function(){return i.prototype._shouldFetchOnBoundingBoxChange.call(this)&&!this.isSearchApplied()},enableFilter:function(){this.set("filterEnabled",!0)},disableFilter:function(){this.set("filterEnabled",!1)},getSearchQuery:function(){return this._searchModel.getSearchQuery()},setSearchQuery:function(e){this._searchModel.set("q",e)},isSearchValid:function(){return this._searchModel.isValid()},getSearchResult:function(){return this._searchModel.getData()},getSearchCount:function(){return this._searchModel.getCount()},applySearch:function(){this._searchModel.fetch()},isSearchApplied:function(){return this._searchModel.isSearchApplied()},cleanSearch:function(){this._searchModel.resetData()},setupSearch:function(){this.isSearchApplied()||this._searchModel.setData(this._data.toJSON())},getData:function(){return this._data},getSize:function(){return this._data.size()},getCount:function(){return this.get("categoriesCount")},isOtherAvailable:function(){return this._data.isOtherAvailable()},numberOfAcceptedCategories:function(){var e=this.filter.acceptedCategories,t=this.numberOfRejectedCategories(),n=this.getData(),r=n.size(),i=n.reduce(function(t,n){return t+(e.where({name:n.get("name")}).length>0?1:0)},0);return t?r-t:i},numberOfRejectedCategories:function(){var e=this.filter.rejectedCategories;return this.getData().reduce(function(t,n){return t+(e.where({name:n.get("name")}).length>0?1:0)},0)},refresh:function(){this.isSearchApplied()?this._searchModel.fetch():this.fetch()},parse:function(e){var t=[],n={},i=e.categories,o=[],a=[];return r.each(i,function(e){var r=e.category;o.push(r);var i=this.filter.isRejected(r);n[r]=!0,t.push({selected:!i,name:r,agg:e.agg,value:e.value})},this),this.get("filterEnabled")&&this.filter.acceptedCategories.each(function(e){var r=e.get("name");a.push(r),n[r]||t.push({selected:!0,name:r,agg:!1,value:0})},this),this._data.reset(t),{allCategoryNames:r.chain(o).union(a).unique().value(),data:t,nulls:e.nulls,min:e.min,max:e.max,count:e.count}},toJSON:function(){return{type:"aggregation",source:{id:this.getSourceId()},options:{column:this.get("column"),aggregation:this.get("aggregation"),aggregationColumn:this.get("aggregation_column")}}}},{ATTRS_NAMES:i.ATTRS_NAMES.concat(["column","aggregation","aggregation_column","acceptedCategories","categories"])})},function(e,t,n){"use strict";var r=n(0),i=n(9),o=n(4),a=n(70),s=n(66),u=n(64);function l(e,t,n){this.DEFAULTS.operationColumn=t,this._initialize(e,t,n),this._limit=this._options.limit,this._operation=this._options.operation,this._operationColumn=this._options.operationColumn}l.prototype=Object.create(i.prototype),l.prototype.setLimit=function(e){return this._checkLimit(e),this._changeProperty("limit",e,"categories"),this},l.prototype.getLimit=function(){return this._limit},l.prototype.setOperation=function(e){return this._checkOperation(e),this._changeProperty("operation",e,"aggregation"),this},l.prototype.getOperation=function(){return this._operation},l.prototype.setOperationColumn=function(e){return this._checkOperationColumn(e),this._changeProperty("operationColumn",e,"aggregation_column"),this},l.prototype.getOperationColumn=function(){return this._operationColumn},l.prototype.getData=function(){return this._internalModel?u(this._internalModel.get("data"),this._internalModel.get("count"),this._internalModel.get("max"),this._internalModel.get("min"),this._internalModel.get("nulls"),this._operation):null},l.prototype.DEFAULTS={limit:6,operation:o.operation.COUNT},l.prototype._checkOptions=function(e){if(r.isUndefined(e))throw this._getValidationError("categoryOptionsRequired");this._checkLimit(e.limit),this._checkOperation(e.operation),this._checkOperationColumn(e.operationColumn)},l.prototype._checkLimit=function(e){if(r.isUndefined(e))throw this._getValidationError("categoryLimitRequired");if(!r.isNumber(e))throw this._getValidationError("categoryLimitNumber");if(e<=0)throw this._getValidationError("categoryLimitPositive")},l.prototype._checkOperation=function(e){if(r.isUndefined(e)||!o.isValidOperation(e))throw this._getValidationError("categoryInvalidOperation")},l.prototype._checkOperationColumn=function(e){if(r.isUndefined(e))throw this._getValidationError("categoryOperationRequired");if(!r.isString(e))throw this._getValidationError("categoryOperationString");if(r.isEmpty(e))throw this._getValidationError("categoryOperationEmpty")},l.prototype._createInternalModel=function(e){this._internalModel=new a({source:this._source.$getInternalModel(),column:this._column,aggregation:this._operation,aggregation_column:this._operationColumn,categories:this._limit,sync_on_bbox_change:!!this._boundingBoxFilter,enabled:this._enabled},{engine:e,filter:new s,bboxFilter:this._boundingBoxFilter&&this._boundingBoxFilter.$getInternalModel()})},e.exports=l},function(e,t,n){"use strict";var r=n(71),i=n(63),o=n(60),a=n(56),s=n(4).status,u=n(4).timeAggregation;e.exports={Category:r,Formula:i,Histogram:o,TimeSeries:a,status:s,timeAggregation:u}},function(e,t,n){"use strict";var r=n(0),i=n(37),o=n(5),a=n(3),s="contentChanged";function u(e){c(e),this._content=e}function l(e){return this.trigger(s,this._content),Promise.resolve(this._content)}function c(e){if(!e)throw new o("style","requiredCSS");if(!r.isString(e))throw new o("style","requiredCSSString")}u.prototype=Object.create(i.prototype),u.prototype.getContent=function(){return this._content},u.prototype.setContent=function(e){return c(e),this._content=e,this.trigger("$changed",this),this._engine?this._engine.reload().then(function(){return l.call(this,e)}.bind(this)).catch(function(e){return Promise.reject(new a(e))}):l.call(this,e)},e.exports=u},function(e,t,n){"use strict";var r=n(73);e.exports={CartoCSS:r}},function(e,t,n){"use strict";var r=n(0),i=n(11),o=n(8),a=n(27),s=n(5),u=n(3);function l(e){var t=this;c(e),this._query=e,i.apply(this,arguments),this._appliedFilters.on("change:filters",function(){return t._updateInternalModelQuery(t._getQueryToApply())})}function c(e){if(!e)throw new s("source","requiredQuery");if(!r.isString(e))throw new s("source","requiredString")}l.prototype=Object.create(i.prototype),l.prototype.setQuery=function(e){c(e),this._query=e;var t=this._getQueryToApply();return this._internalModel?this._updateInternalModelQuery(t):(this._triggerQueryChanged(this,t),Promise.resolve())},l.prototype.getQuery=function(){return this._query},l.prototype._createInternalModel=function(e){var t=new o({id:this.getId(),type:"source",query:this._getQueryToApply()},{camshaftReference:a,engine:e});return t.on("change:query",this._triggerQueryChanged,this),t},l.prototype._updateInternalModelQuery=function(e){var t=this;if(this._internalModel)return this._internalModel.set("query",e,{silent:!0}),this._internalModel._engine.reload().then(function(){return t._triggerQueryChanged(t,e)}).catch(function(e){return Promise.reject(new u(e))})},l.prototype._getQueryToApply=function(){var e=this._appliedFilters.$getSQL();return!this._hasFiltersApplied||r.isEmpty(e)?this._query:"SELECT * FROM ("+this._query+") as originalQuery WHERE "+e},l.prototype.addFilter=function(e){i.prototype.addFilter.apply(this,arguments),this._updateInternalModelQuery(this._getQueryToApply())},l.prototype.removeFilter=function(e){i.prototype.removeFilter.apply(this,arguments),this._updateInternalModelQuery(this._getQueryToApply())},l.prototype._triggerQueryChanged=function(e,t){this.trigger("queryChanged",t)},e.exports=l},function(e,t,n){"use strict";var r=n(0),i=n(11),o=n(8),a=n(27),s=n(5),u=n(3);function l(e){var t=this;c(e),this._tableName=e,i.apply(this,arguments),this._appliedFilters.on("change:filters",function(){return t._updateInternalModelQuery(t._getQueryToApply())})}function c(e){if(r.isUndefined(e))throw new s("source","noDatasetName");if(!r.isString(e))throw new s("source","requiredDatasetString");if(r.isEmpty(e))throw new s("source","requiredDataset")}l.prototype=Object.create(i.prototype),l.prototype.setTableName=function(e){return c(e),this._tableName=e,this._internalModel?this._updateInternalModelQuery(this._getQueryToApply()):(this._triggerTableNameChanged(this,e),Promise.resolve())},l.prototype.getTableName=function(){return this._tableName},l.prototype._createInternalModel=function(e){return new o({id:this.getId(),type:"source",query:this._getQueryToApply()},{camshaftReference:a,engine:e})},l.prototype._updateInternalModelQuery=function(e){var t=this;if(this._internalModel)return this._internalModel.set("query",e,{silent:!0}),this._internalModel._engine.reload().then(function(){return t._triggerTableNameChanged(t,t._tableName)}).catch(function(e){return Promise.reject(new u(e))})},l.prototype._getQueryToApply=function(){var e=this._appliedFilters.$getSQL(),t="SELECT * from "+this._tableName;return r.isEmpty(e)?t:"SELECT * FROM ("+t+") as datasetQuery WHERE "+e},l.prototype.addFilter=function(e){i.prototype.addFilter.apply(this,arguments),this._updateInternalModelQuery(this._getQueryToApply())},l.prototype.removeFilter=function(e){i.prototype.removeFilter.apply(this,arguments),this._updateInternalModelQuery(this._getQueryToApply())},l.prototype._triggerTableNameChanged=function(e,t){this.trigger("tableNameChanged",t)},e.exports=l},function(e,t,n){"use strict";var r=n(76),i=n(75);e.exports={Dataset:r,SQL:i}},function(e,t,n){"use strict";function r(){}function i(e){this.t0=null,this.name=e,this.count=0}r.metrics={},r._backend=null,r.get=function(e){return r.metrics[e]||{max:0,min:Number.MAX_VALUE,avg:0,total:0,count:0,last:0,history:"undefined"!=typeof Float32Array?new Float32Array(1024):[]}},r.backend=function(e){r._backend=e},r.new_value=function(e,t,n,i){n=n||"i";var o=r.metrics[e]=r.get(e);if(o.max=Math.max(o.max,t),o.min=Math.min(o.min,t),o.total+=t,++o.count,o.avg=o.total/o.count,o.history[o.count%1024]=t,i){var a=performance.now();a-o.last>1e3&&(r._backend&&r._backend([n,e,o.avg]),o.last=a)}else r._backend&&r._backend([n,e,t])},r.print_stats=function(){for(var e in r.metrics){var t=r.metrics[e];console.log(" === "+e+" === "),console.log(" max: "+t.max),console.log(" min: "+t.min),console.log(" avg: "+t.avg),console.log(" count: "+t.count),console.log(" total: "+t.total)}},i.prototype={start:function(){return this.t0=performance.now(),this},_elapsed:function(){return performance.now()-this.t0},end:function(e){null!==this.t0&&(r.new_value(this.name,this._elapsed(),"t",e),this.t0=null)},inc:function(e){e=void 0===e?1:e,r.new_value(this.name,e,"i")},dec:function(e){e=void 0===e?1:e,r.new_value(this.name,e,"d")},mark:function(){(++this.count,null!==this.t0)?this._elapsed()>1&&(r.new_value(this.name,this.count),this.count=0,this.start()):this.start()}},r.metric=function(e){return new i(e)},e.exports=r},function(e,t,n){"use strict";function r(e){this.setMap(e)}r.prototype=new google.maps.OverlayView,r.prototype.draw=function(){},r.prototype.latLngToPixel=function(e){var t=this.getProjection();return t?t.fromLatLngToContainerPixel(e):(console.warn("Projector has no projection"),new google.maps.Point(0,0))},r.prototype.pixelToLatLng=function(e){var t=this.getProjection();return t?t.fromContainerPixelToLatLng(e):(console.warn("Projector has no projection"),new google.maps.LatLng(0,0))},e.exports=r},function(e,t,n){"use strict";var r=n(0),i=n(1),o=function(e,t){t=t||{},this.model=e,this.model.bind("change",this._onModelUpdated,this),this.mapModel=t.mapModel,this.gmapsMap=t.nativeMap,this.showLimitErrors=t.showLimitErrors};r.extend(o.prototype,i.Events),r.extend(o.prototype,{addToMap:function(){throw new Error("Subclasses of GMapsLayerView must implement addToMap")},remove:function(){throw new Error("Subclasses of GMapsLayerView must implement remove")},_onModelUpdated:function(){}}),e.exports=o},function(e,t,n){"use strict";var r=n(0),i=n(80),o=n(33),a=n(23),s=n(79),u=n(34),l=n(78),c="progid:DXImageTransform.Microsoft.gradient(startColorstr=#00FFFFFF,endColorstr=#00FFFFFF)",p="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";function h(e,t){var n=Math.round(100*t);e.style.filter=n>=99?c:"alpha(opacity="+t+");"}function f(){return(4294967296*(1+Math.random())|0).toString(16).substring(1)}var d=function(e,t){var n=this,o=[],a=t.nativeMap;r.bindAll(this,"featureOut","featureOver","featureClick");var l=r.clone(e.attributes);l.map=a;var c,p=l.featureOver,h=l.featureOut,d=l.featureClick,m=-1;l.featureOver=function(e,t,r,i,a){o[a]||n.trigger("layerenter",e,t,r,i,a),o[a]=1,p&&p.apply(this,arguments),n.featureOver&&n.featureOver.apply(this,arguments),e.timeStamp===c&&clearTimeout(m),m=setTimeout(function(){n.trigger("mouseover",e,t,r,i,a),n.trigger("layermouseover",e,t,r,i,a)},0),c=e.timeStamp},l.featureOut=function(e,t){o[t]&&n.trigger("layermouseout",t),o[t]=0,r.any(o)||n.trigger("mouseout"),h&&h.apply(this,arguments),n.featureOut&&n.featureOut.apply(this,arguments)},l.featureClick=r.debounce(function(){d&&d.apply(this,arguments),n.featureClick&&n.featureClick.apply(l,arguments)},10),this.tiles=0,this.options={tiles:t.tiles,scheme:t.scheme||"xyz",blankImage:t.blankImage||"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},this._id=f(),this.interactive=!0,this.tileSize=new google.maps.Size(256,256),this.cache={},r.extend(this.options,l),i.apply(this,arguments),this.projector=new s(l.map),u.apply(this,arguments)};d.prototype.interactionClass=o.Interactive,r.extend(d.prototype,u.prototype,i.prototype,{addToMap:function(){this.gmapsMap.overlayMapTypes.setAt(0,this)},remove:function(){var e=this._getOverlayIndex();e>=0&&this.gmapsMap.overlayMapTypes.removeAt(e),this._clearInteraction(),this.finishLoading&&this.finishLoading()},reload:function(){this.model.invalidate()},featureOver:function(e,t,n,r,i){var o=this.model.getLayerInLayerGroupAt(i);o&&this.trigger("featureOver",{layer:o,layerIndex:i,latlng:[t.lat(),t.lng()],position:{x:n.x,y:n.y},feature:r})},featureOut:function(e,t){var n=this.model.getLayerInLayerGroupAt(t);n&&this.trigger("featureOut",{layer:n,layerIndex:t})},featureClick:function(e,t,n,r,i){var o=this.model.getLayerInLayerGroupAt(i);o&&this.trigger("featureClick",{layer:o,layerIndex:i,latlng:[t.lat(),t.lng()],position:{x:n.x,y:n.y},feature:r})},error:function(e){this.model&&(this.model.trigger("error",e?e.errors:"unknown error"),this.model.trigger("tileError",e?e.errors:"unknown error"))},ok:function(e){this.model.trigger("tileOk")},tilesOk:function(e){this.model.trigger("tileOk")},loading:function(){this.trigger("loading")},finishLoading:function(){this.trigger("load")},setOpacity:function(e){if(isNaN(e)||e>1||e<0)throw new Error(e+" is not a valid value, should be in [0, 1] range");for(var t in this.opacity=this.options.opacity=e,this.cache){var n=this.cache[t];n.style.opacity=e,h(n,e)}},getTile:function(e,t,n){var r=this,i="ActiveXObject"in window&&!document.addEventListener;if(this.options.added=!0,!this.model.hasTileURLTemplates()){var o=t+"/"+e.x+"/"+e.y,s=this.cache[o]=new Image(256,256);return s.src=p,s.setAttribute("gTileKey",o),s.style.opacity=this.options.opacity,s}var u=this._getTile(e,t,n);i&&h(u,this.options.opacity),u.style.opacity=this.options.opacity,0===this.tiles&&this.loading&&this.loading(),this.tiles++;var c=l.metric("cartodb-js.tile.png.load.time").start(),f=function(){c.end(),r.tiles--,0===r.tiles&&r.finishLoading&&r.finishLoading()};return u.onload=f,u.onerror=function(){l.metric("cartodb-js.tile.png.error").inc(),r.model.addError({type:a.WINDSHAFT_ERRORS.TILE}),f()},u},_getTile:function(e,t,n){var r=t+"/"+e.x+"/"+e.y;if(!this.cache[r]){var i=this.cache[r]=new Image(256,256);this.cache[r].src=this._getTileUrl(e,t),this.cache[r].setAttribute("gTileKey",r),this.cache[r].onerror=function(){i.style.display="none"}}return this.cache[r]},_getTileUrl:function(e,t){var n=Math.pow(2,t),r="tms"===this.options.scheme?n-1-e.y:e.y,i=e.x%n;return i=i<0?e.x%n+n:i,r<0?this.options.blankImage:this.options.tiles[parseInt(i+r,10)%this.options.tiles.length].replace(/\{z\}/g,t).replace(/\{x\}/g,i).replace(/\{y\}/g,r)},_reload:function(){var e;e=this.model.hasTileURLTemplates()?[this.model.getTileURLTemplatesWithSubdomains()[0]]:[p],this.options.tiles=e,this.tiles=0,this.cache={},this._reloadInteraction(),this._refreshView()},_refreshView:function(){var e=this.gmapsMap.overlayMapTypes,t=this._getOverlayIndex();t>=0&&e.setAt(t,e.getAt(t))},_checkLayer:function(){if(!this.options.added)throw new Error("the layer is not still added to the map")},_getOverlayIndex:function(){var e=this.gmapsMap.overlayMapTypes.getArray();return r.findIndex(e,function(e){return e&&e._id===this._id},this)},_newPoint:function(e,t){return new google.maps.Point(e,t)},_manageOffEvents:function(e,t){if(this.options.featureOut)return this.options.featureOut&&this.options.featureOut(t.e,t.layer)},_manageOnEvents:function(e,t){var n=t.pixel,r=this.projector.pixelToLatLng(n);switch(t.e.type.toLowerCase()){case"mousemove":if(this.options.featureOver)return this.options.featureOver(t.e,r,n,t.data,t.layer);break;case"click":case"touchend":case"touchmove":case"mspointerup":case"pointerup":case"pointermove":this.options.featureClick&&this.options.featureClick(t.e,r,n,t.data,t.layer)}}}),e.exports=d},function(e,t,n){"use strict";var r=n(0),i=n(22),o=n(35),a=n(81),s=n(3);function u(e,t,n){this._layers=e,this._engine=t,this._map=n,this._hoveredLayers=[],this.tileSize=new google.maps.Size(256,256),this._internalView=new a(this._engine._cartoLayerGroup,{nativeMap:n}),this._id=this._internalView._id,this._internalView.on("featureClick",this._onFeatureClick,this),this._internalView.on("featureOver",this._onFeatureOver,this),this._internalView.on("featureOut",this._onFeatureOut,this),this._internalView.on("featureError",this._onFeatureError,this)}u.prototype.getTile=function(e,t,n){return this._internalView.getTile(e,t,n)},u.prototype._onFeatureClick=function(e){var t=this._layers.findById(e.layer.id);o(i.events.FEATURE_CLICKED,e,t)},u.prototype._onFeatureOver=function(e){var t=this._layers.findById(e.layer.id);t.isInteractive()&&(this._hoveredLayers[e.layerIndex]=!0,this._map.setOptions({draggableCursor:"pointer"})),o(i.events.FEATURE_OVER,e,t)},u.prototype._onFeatureOut=function(e){var t=this._layers.findById(e.layer.id);this._hoveredLayers[e.layerIndex]=!1,r.any(this._hoveredLayers)?this._map.setOptions({draggableCursor:"pointer"}):this._map.setOptions({draggableCursor:"auto"}),o(i.events.FEATURE_OUT,e,t)},u.prototype._onFeatureError=function(e){var t=new s(e);r.each(this._layers.toArray(),function(e){e.isInteractive()&&e.trigger(i.events.TILE_ERROR,t)})},e.exports=u},function(e,t,n){"use strict";var r=n(0),i=n(1),o=function(e,t){t=t||{},this.model=e,this.mapModel=t.mapModel,this.leafletMap=t.nativeMap,this.leafletLayer=t.nativeLayer||this._createLeafletLayer(),this.showLimitErrors=t.showLimitErrors,this.setModel(e);var n=e.get("type")||e.get("kind");this.type=n&&n.toLowerCase()};r.extend(o.prototype,i.Events),r.extend(o.prototype,{setZIndex:function(e){this.leafletLayer.setZIndex(e)},setModel:function(e){this.model&&this.model.unbind("change",this._modelUpdated,this),this.model=e,this.model.bind("change",this._modelUpdated,this)},remove:function(){this.leafletMap.removeLayer(this.leafletLayer),this.notifyRemove()},notifyRemove:function(){this.trigger("remove",this),this.model.unbind(null,null,this),this.unbind()},reload:function(){this.leafletLayer.redraw()},_createLeafletLayer:function(){throw new Error("subclasses of LeafletLayerView must implement _createLeafletLayer")}}),e.exports=o},function(e,t,n){"use strict";var r=n(0),i=n(23),o=n(83),a=n(34),s=n(33),u=function(e,t){o.apply(this,arguments),a.apply(this,arguments),this.leafletLayer.on("load",function(){this.trigger("load")}.bind(this)),this.leafletLayer.on("loading",function(){this.trigger("loading")}.bind(this)),this.leafletLayer.on("tileerror",function(e){this.model.addError({type:i.WINDSHAFT_ERRORS.TILE})}.bind(this))};(u.prototype=r.extend({},o.prototype,a.prototype,{interactionClass:s.Interactive,_createLeafletLayer:function(){var e=new L.TileLayer(null,{opacity:.99,maxZoom:30});return e._setUrl=function(e,t){return L.TileLayer.prototype.setUrl.call(this,e,t)},e},_reload:function(){var e=this.model.getTileURLTemplate(),t=this.model.getSubdomains();e||(e="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"),t&&L.Util.setOptions(this.leafletLayer,{subdomains:t}),this.leafletLayer._setUrl(e),this._reloadInteraction()},_manageOffEvents:function(e,t){this._onFeatureOut(t.layer)},_manageOnEvents:function(e,t){var n=e.layerPointToContainerPoint(t.layerPoint);if(!n||isNaN(n.x)||isNaN(n.y))return!1;var r=e.containerPointToLatLng(n);switch(t.e.type.toLowerCase()){case"mousemove":this._onFeatureOver(r,n,t.data,t.layer);break;case"click":this._onFeatureClicked(r,n,t.data,t.layer)}},_onFeatureClicked:function(e,t,n,r){var i=this.model.getLayerInLayerGroupAt(r);i&&this.trigger("featureClick",{layer:i,layerIndex:r,latlng:[e.lat,e.lng],position:t,feature:n})},_onFeatureOver:function(e,t,n,r){var i=this.model.getLayerInLayerGroupAt(r);i&&this.trigger("featureOver",{layer:i,layerIndex:r,latlng:[e.lat,e.lng],position:t,feature:n})},_onFeatureOut:function(e){var t=this.model.getLayerInLayerGroupAt(e);t&&this.trigger("featureOut",{layer:t,layerIndex:e})}})).constructor=o,e.exports=u},function(e,t,n){"use strict";var r=n(0),i=n(5),o={AVG:"avg",SUM:"sum",MIN:"min",MAX:"max",MODE:"mode"},a={SAMPLE:"point-sample",GRID:"point-grid",CENTROID:"centroid"},s=[.5,1,2,4,8,16,32,64,128,256];function u(e){if(!r.isFinite(e.threshold))throw l("thresholdRequired");if(!r.isFinite(e.threshold)||e.threshold<1||Math.floor(e.threshold)!==e.threshold)throw l("invalidThreshold");if(!r.isFinite(e.resolution))throw l("resolutionRequired");if(!r.contains(s,e.resolution))throw l("invalidResolution");!function(e){if(e&&!r.contains(r.values(a),e))throw l("invalidPlacement")}(e.placement);var t=function(e){var t=null;e&&(!function(e){Object.keys(e).forEach(function(t){!function(e,t){if(!e[t].aggregatedColumn)throw l("columnAggregatedColumnRequired"+t);if(!r.isString(e[t].aggregatedColumn))throw l("invalidColumnAggregatedColumn"+t);if(!e[t].aggregateFunction)throw l("columnFunctionRequired"+t);if(!r.contains(r.values(o),e[t].aggregateFunction))throw l("invalidColumnFunction"+t)}(e,t)})}(e),t={},Object.keys(e).forEach(function(n){var r;t[n]={aggregate_function:(r=e[n]).aggregateFunction,aggregated_column:r.aggregatedColumn}}));return t}(e.columns),n={threshold:e.threshold,resolution:e.resolution,placement:e.placement,columns:t};return r.pick(n,r.identity)}function l(e){return new i("aggregation",e)}u.operation=o,u.placement=a,e.exports=u},function(e,t,n){"use strict";e.exports={FEATURE_CLICKED:"featureClicked",FEATURE_OVER:"featureOver",FEATURE_OUT:"featureOut",TILE_ERROR:"featureError"}},function(e,t,n){"use strict";var r=n(36);function i(e){var t=e.getBucketsWithCategoryFilter(),n=e.getBucketsWithDefaultFilter();this._categories=t.map(function(e){return{name:e.filter.name,value:e.value}}),this._defaultValue=n.length>0?n[0].value:void 0,r.call(this,"categories",e)}i.prototype=Object.create(r.prototype),i.prototype.getCategories=function(){return this._categories},i.prototype.getDefaultValue=function(){return this._defaultValue},e.exports=i},function(e,t,n){"use strict";var r=n(36);function i(e){var t=e.getBucketsWithRangeFilter();this._buckets=t.map(function(e){return{min:e.filter.start,max:e.filter.end,value:e.value}}),this._avg=e.getFilterAvg(),this._min=t.length>0?t[0].filter.start:void 0,this._max=t.length>0?t[t.length-1].filter.end:void 0,r.call(this,"buckets",e)}i.prototype=Object.create(r.prototype),i.prototype.getBuckets=function(){return this._buckets},i.prototype.getAverage=function(){return this._avg},i.prototype.getMin=function(){return this._min},i.prototype.getMax=function(){return this._max},e.exports=i},function(e,t,n){"use strict";var r=n(88),i=n(87),o=n(14);e.exports={getMetadataFromRules:function(e){var t=[];return e.forEach(function(e){var n=new o(e);!function(e){return e.getBucketsWithRangeFilter().length>0}(n)?function(e){return e.getBucketsWithCategoryFilter().length>0}(n)&&t.push(new i(n)):t.push(new r(n))}),t}}},function(e,t,n){"use strict";var r=n(0);e.exports=function(e,t,n){var i=t.split(".").reduce(function(e,t){return(e||{})[t]},e);return r.isUndefined(i)?n:i}},function(e,t,n){"use strict";var r=n(0),i=n(21),o=i.extend({defaults:function(){return r.extend(i.prototype.defaults.apply(this),{type:"torque",items:[],html:""})}});e.exports=o},function(e,t,n){"use strict";var r=n(0),i=n(21),o=i.extend({defaults:function(){return r.extend(i.prototype.defaults.apply(this),{type:"custom_choropleth",prefix:"",suffix:"",leftLabel:"",rightLabel:"",colors:[]})}});e.exports=o},function(e,t,n){"use strict";var r=n(0),i=n(21),o=i.extend({defaults:function(){return r.extend(i.prototype.defaults.apply(this),{type:"custom",items:[],html:""})}});e.exports=o},function(e,t,n){"use strict";var r=n(0),i=n(12),o=i.extend({defaults:function(){return r.extend(i.prototype.defaults.apply(this),{type:"choropleth",prefix:"",suffix:"",leftLabel:"",rightLabel:"",colors:[]})},getNonResettableAttrs:function(){return r.union(i.prototype.getNonResettableAttrs.apply(this),["colors"])},isAvailable:function(){return this.get("colors")&&this.get("colors").length>0}});e.exports=o},function(e,t,n){"use strict";var r=n(0),i=n(12),o=i.extend({defaults:function(){return r.extend(i.prototype.defaults.apply(this),{type:"bubble",fillColor:"",prefix:"",suffix:"",values:[]})},getNonResettableAttrs:function(){return r.union(i.prototype.getNonResettableAttrs.apply(this),["values"])},isAvailable:function(){return this.get("values")&&this.get("values").length>0}});e.exports=o},function(e,t,n){"use strict";var r=n(0),i=n(12),o=i.extend({defaults:function(){return r.extend(i.prototype.defaults.apply(this),{type:"category",categories:[]})},getNonResettableAttrs:function(){return r.union(i.prototype.getNonResettableAttrs.apply(this),["categories"])},isAvailable:function(){return this.get("categories")&&this.get("categories").length>0}});e.exports=o},function(e,t,n){"use strict";var r=n(0),i=n(96),o=n(95),a=n(94),s=n(93),u={bubble:{modelClass:o,definitionAttrs:[{fillColor:"color"},{topLabel:"top_label"},{bottomLabel:"bottom_label"}],dynamic:!0},category:{modelClass:i,definitionAttrs:["prefix","suffix"],dynamic:!0},choropleth:{modelClass:a,definitionAttrs:["prefix","suffix",{leftLabel:"left_label"},{rightLabel:"right_label"}],dynamic:!0},custom:{modelClass:s,definitionAttrs:[{items:"categories"},"html"]},html:{modelClass:s,definitionAttrs:[{items:"categories"},"html"]},custom_choropleth:{modelClass:n(92),definitionAttrs:["prefix","suffix",{leftLabel:"left_label"},{rightLabel:"right_label"},"colors"]},torque:{modelClass:n(91),definitionAttrs:[{items:"categories"},"html"]}},l=["title",{preHTMLSnippet:"pre_html"},{postHTMLSnippet:"post_html"}],c=function(e,t){if(!t.engine)throw new Error("engine is required");this._legendsData=e||[],this._engine=t.engine,r.each(u,function(e,t){this[t]=this._createLegendModel(t,e)},this),this._findDataForLegend("html")&&(this.custom=this.html),delete this.html};c.prototype._createLegendModel=function(e,t){var n=t.modelClass,i=l.concat(t.definitionAttrs),o=this._findDataForLegend(e);o=o&&r.extend({},r.omit(o,"definition"),o.definition);var a={};r.each(i,function(e){var t=e,n=e;r.isObject(e)&&(t=e[n=Object.keys(e)[0]]),a[n]=o&&o[t]});var s=new n(a,{engine:this._engine});return o&&s.show(),s},c.prototype._findDataForLegend=function(e){return r.find(this._legendsData,{type:e})},c.prototype.hasAnyLegend=function(){var e=r.keys(u);return r.some(e,function(e){var t=this[e];return t&&t.isVisible()},this)},e.exports=c},function(e,t,n){"use strict";var r=n(0),i=n(1),o=n(38),a=i.Model.extend({defaults:{vertical_offset:0,horizontal_offset:0,position:"top|center",template:"",alternative_names:{}},initialize:function(e){e=e||{},this.fields=new o(e.fields||[]),this.unset("fields")},update:function(e){e=r.clone(e),this.fields.equals(e.fields)||this.fields.reset(e.fields),delete e.fields,e.alternative_names&&(e.alternative_names=JSON.parse(JSON.stringify(e.alternative_names))),this.set(e)},getFieldNames:function(){return this.fields.pluck("name")},hasFields:function(){return!this.fields.isEmpty()},hasTemplate:function(){return!!this.get("template")}});e.exports=a},function(e,t,n){"use strict";var r=n(0),i=n(1),o=n(38),a=i.Model.extend({defaults:{offset:[28,0],maxHeight:180,alternative_names:{},template_type:"mustache"},initialize:function(e){e=e||{},this.fields=new o(e.fields||[]),this.unset("fields")},update:function(e){e=r.clone(e),this.fields.equals(e.fields)||this.fields.reset(e.fields),delete e.fields,e.alternative_names&&(e.alternative_names=JSON.parse(JSON.stringify(e.alternative_names))),this.set(e)},getFieldNames:function(){return this.fields.pluck("name")},hasFields:function(){return!this.fields.isEmpty()},hasTemplate:function(){return!!this.get("template")}});e.exports=a},function(e,t,n){"use strict";var r=n(26),i=n(2).extend({initialize:function(){this.bind("change:type",function(){r.error("changing layer type is not allowed, remove it and add a new one instead")})},remove:function(e){e=e||{},this.trigger("destroy",this,this.collection,e)},update:function(e,t){t=t||{},this.set(e,{silent:t.silent})},show:function(){this.set("visible",!0)},hide:function(){this.set("visible",!1)},isVisible:function(){return!!this.get("visible")},isHidden:function(){return!this.isVisible()},toggle:function(){this.set("visible",!this.get("visible"))},setOk:function(){this.unset("error")},setError:function(e){this.set("error",e)},getSourceId:function(){throw new Error(".getSourceId called on a non torque/cartodb layer.")},hasSource:function(e){return!1}});e.exports=i},function(e,t,n){"use strict";var r=n(1).Model.extend({VERSION:4,initialize:function(){},REPORT_ERROR_URL:"/api/v0/error",ERROR_TRACK_ENABLED:!1});e.exports=r},function(e,t,n){"use strict";var r=new(n(101));r.set({cartodb_attributions:' <a href="https://carto.com/attributions" target="_blank">CARTO</a>',cartodb_logo_link:"http://www.carto.com"}),e.exports=r},function(e,t,n){"use strict";var r=n(0),i=n(102),o=n(100),a=n(99),s=n(98),u=n(97),l=n(8),c=["sql","source","sql_wrap","cartocss"],p=o.extend({defaults:{type:"CartoDB",attribution:i.get("cartodb_attributions"),visible:!0},initialize:function(e,t){if(e=e||{},!(t=t||{}).engine)throw new Error("engine is required");this._engine=t.engine,e&&e.cartocss&&this.set("initialStyle",e.cartocss),e.source&&this.setSource(e.source),this.infowindow=new a(e.infowindow),this.tooltip=new s(e.tooltip),this.unset("infowindow"),this.unset("tooltip"),this.legends=new u(e.legends,{engine:this._engine}),this.unset("legends"),this.bind("change",this._onAttributeChanged,this),this.infowindow.fields.bind("reset add remove",this._reload,this),this.tooltip.fields.bind("reset add remove",this._reload,this),this.aggregation=t.aggregation,o.prototype.initialize.apply(this,arguments)},_onAttributeChanged:function(){r.any(c,function(e){if(this.hasChanged(e))return!0},this)&&this._reload()},_reload:function(){this._engine.reload({sourceId:this.get("id")})},restoreCartoCSS:function(){this.set("cartocss",this.get("initialStyle"))},isVisible:function(){return this.get("visible")},isInteractive:function(){return this._hasInfowindowFields()||this._hasTooltipFields()},_hasInfowindowFields:function(){return this.infowindow.hasFields()},_hasTooltipFields:function(){return this.tooltip.hasFields()},getInteractiveColumnNames:function(){return r.chain(["cartodb_id"]).union(this.infowindow.getFieldNames()).union(this.tooltip.getFieldNames()).uniq().value()},isInfowindowEnabled:function(){return this.infowindow.hasTemplate()},isTooltipEnabled:function(){return this.tooltip.hasTemplate()},getName:function(){return this.get("layer_name")},getEstimatedFeatureCount:function(){var e=this.get("meta"),t=e&&e.stats;return t&&t.estimatedFeatureCount},getSourceId:function(){var e=this.getSource();return e&&e.id},getSource:function(){return this.get("source")},setSource:function(e,t){this.getSource()&&this.getSource().unmarkAsSourceOf(this),e.markAsSourceOf(this),this.set("source",e,t)},hasSource:function(e){return this.getSource().equals(e)},update:function(e){if(e.source)throw new Error('Use ".setSource" to update a layer\'s source instead of the update method');o.prototype.update.apply(this,arguments)},remove:function(){this.getSource().unmarkAsSourceOf(this),o.prototype.remove.apply(this,arguments)},getTableName:function(){if(this.get("source").has("options"))return this.get("source").get("options").table_name},getApiKey:function(){return this._engine.getApiKey()}},{_checkSourceAttribute:function(e){if(!(e instanceof l))throw new Error("Source must be an instance of AnalysisModel")}});e.exports=p},function(e,t,n){"use strict";var r=n(0),i=n(39),o=n(103),a=n(11),s=n(37),u=n(3),l=n(5),c=n(13),p=n(89);function h(e,t){var n,o,a,s,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i.apply(this,arguments),m(e),d(t),this._client=void 0,this._engine=void 0,this._internalModel=void 0,this._source=e,this._style=t,this._visible=!r.isBoolean(u.visible)||u.visible,this._featureClickColumns=u.featureClickColumns||[],this._featureOverColumns=u.featureOverColumns||[],this._minzoom=u.minzoom||0,this._maxzoom=u.maxzoom||void 0,this._aggregation=u.aggregation||{},n=this._aggregation.columns,o=this._featureClickColumns,a=this._featureOverColumns,g(s=n&&Object.keys(n)||[],o,"featureClick"),g(s,a,"featureOver")}function f(e){return{fields:e.map(function(e,t){return{name:e,title:!0,position:t}})}}function d(e){if(!(e instanceof s))throw new l("layer","nonValidStyle")}function m(e){if(!(e instanceof a))throw new l("layer","nonValidSource")}function _(e){if(r.any(e,function(e){return!r.isString(e)}))throw new l("layer","nonValidColumns")}function y(e){var t=new u(e);return this.trigger(c.ERROR,t),Promise.reject(t)}function v(e,t){return e.length===t.length&&r.isEmpty(r.difference(e,t))}function g(e,t,n){if(t.length>0&&e.length>0){var i=r.filter(t,function(t){return!r.contains(e,t)});if(i.length>0)throw new l("layer","wrongInteractivityColumns["+i.join(", ")+"]#"+n)}}h.prototype=Object.create(i.prototype),h.prototype.setStyle=function(e,t){var n=this._style;if(d(e),t=t||{},n===e)return Promise.resolve();if(!this._internalModel)return this._style=e,this.trigger("styleChanged",this),Promise.resolve();if(e.$getEngine()&&e.$getEngine()!==this._internalModel._engine)throw new l("layer","differentStyleClient");return e.$getEngine()||e.$setEngine(this._engine),this._internalModel.set("cartocss",e.getContent(),{silent:!0}),this._engine.reload().then(function(){this._style=e,this.trigger("styleChanged",this)}.bind(this)).catch(y.bind(this))},h.prototype.getStyle=function(){return this._style},h.prototype.setSource=function(e){var t=this._source;if(m(e),t===e)return Promise.resolve();if(!this._internalModel)return this._source=e,this.trigger("sourceChanged",this),Promise.resolve();if(e.$getEngine()&&e.$getEngine()!==this._internalModel._engine)throw new l("layer","differentSourceClient");return e.$getEngine()||e.$setEngine(this._engine),this._internalModel.set("source",e.$getInternalModel(),{silent:!0}),this._engine.reload().then(function(){this._source=e,this.trigger("sourceChanged",this)}.bind(this)).catch(y.bind(this))},h.prototype.getSource=function(){return this._source},h.prototype.setFeatureClickColumns=function(e){var t=this._featureClickColumns;return _(e),v(e,t)?Promise.resolve():this._internalModel?(this._internalModel.infowindow.fields.set(f(e).fields,{silent:!0}),this._engine.reload().then(function(){this._featureClickColumns=e}.bind(this)).catch(y.bind(this))):(this._featureClickColumns=e,Promise.resolve())},h.prototype.getFeatureClickColumns=function(){return this._featureClickColumns},h.prototype.setFeatureOverColumns=function(e){var t=this._featureOverColumns;return _(e),v(e,t)?Promise.resolve():this._internalModel?(this._internalModel.tooltip.fields.set(f(e).fields,{silent:!0}),this._engine.reload().then(function(){this._featureOverColumns=e}.bind(this)).catch(y.bind(this))):(this._featureOverColumns=e,Promise.resolve())},h.prototype.getFeatureOverColumns=function(){return this._featureOverColumns},h.prototype.hide=function(){var e=this._visible;return this._visible=!1,this._internalModel&&this._internalModel.set("visible",!1),e&&this.trigger("visibilityChanged",!1),this},h.prototype.show=function(){var e=this._visible;return this._visible=!0,this._internalModel&&this._internalModel.set("visible",!0),e||this.trigger("visibilityChanged",!1),this},h.prototype.toggle=function(){return this.isVisible()?this.hide():this.show()},h.prototype.isVisible=function(){return this._visible},h.prototype.isHidden=function(){return!this.isVisible()},h.prototype.isInteractive=function(){return this.getFeatureClickColumns().length>0||this.getFeatureOverColumns().length>0},h.prototype.setOrder=function(e){return this._client?this._client.moveLayer(this,e):Promise.resolve()},h.prototype.bringToBack=function(){return this.setOrder(0)},h.prototype.bringToFront=function(){return this.setOrder(this._client._layers.size()-1)},h.prototype._createInternalModel=function(e){var t=new o({id:this._id,source:this._source.$getInternalModel(),cartocss:this._style.getContent(),visible:this._visible,infowindow:f(this._featureClickColumns),tooltip:f(this._featureOverColumns),minzoom:this._minzoom,maxzoom:this._maxzoom},{engine:e,aggregation:this._aggregation});return t.on("change:meta",function(e,t){var n=t.cartocss_meta.rules,r={styles:p.getMetadataFromRules(n)};this.trigger("metadataChanged",r)},this),t.on("change:error",function(e,t){var n;t&&((n=t).message&&n.message.indexOf("style")>=0)?this._style.$setError(new u(t)):t&&this.trigger(c.ERROR,new u(t))},this),t},h.prototype.$setClient=function(e){this._client||this._engine&&e._engine!==this._engine||(this._client=e)},h.prototype.$setEngine=function(e){this._engine||(this._engine=e,this._source.$setEngine(e),this._style.$setEngine(e),this._internalModel||(this._internalModel=this._createInternalModel(e),this._style.on("$changed",function(e){this._internalModel.set("cartocss",e.getContent(),{silent:!0})},this)))},e.exports=h},function(e,t,n){"use strict";var r=n(0),i=n(22),o=n(4),a=n(35),s=n(84),u=n(3),l=L.TileLayer.extend({options:{opacity:.99,maxZoom:30,attribution:o.ATTRIBUTION},initialize:function(e,t,n){r.extend(this.options,n),this._layers=e,this._engine=t,this._internalView=null,this._hoveredLayers=[]},addTo:function(e){return this._internalView||(this._internalView=new s(this._engine._cartoLayerGroup,{nativeMap:e,nativeLayer:this}),this._internalView.on("featureClick",this._onFeatureClick,this),this._internalView.on("featureOver",this._onFeatureOver,this),this._internalView.on("featureOut",this._onFeatureOut,this),this._internalView.on("featureError",this._onFeatureError,this)),L.TileLayer.prototype.addTo.call(this,e)},removeFrom:function(e){return this._internalView&&(this._internalView.off("featureClick"),this._internalView.off("featureOver"),this._internalView.off("featureOut"),this._internalView.off("featureError"),this._internalView.notifyRemove()),this._internalView=null,L.TileLayer.prototype.removeFrom.call(this,e)},setUrl:void 0,_setUrl:function(e,t){return L.TileLayer.prototype.setUrl.call(this,e,t)},_onFeatureClick:function(e){var t=this._layers.findById(e.layer.id);a(i.events.FEATURE_CLICKED,e,t)},_onFeatureOver:function(e){var t=this._layers.findById(e.layer.id);t.isInteractive()&&(this._hoveredLayers[e.layerIndex]=!0,this._map.getContainer().style.cursor="pointer"),a(i.events.FEATURE_OVER,e,t)},_onFeatureOut:function(e){var t=this._layers.findById(e.layer.id);this._hoveredLayers[e.layerIndex]=!1,r.any(this._hoveredLayers)?this._map.getContainer().style.cursor="pointer":this._map.getContainer().style.cursor="auto",a(i.events.FEATURE_OUT,e,t)},_onFeatureError:function(e){var t=new u(e);r.each(this._layers.toArray(),function(e){e.isInteractive()&&e.trigger(i.events.TILE_ERROR,t)})}});e.exports=l},function(e,t,n){"use strict";var r=n(0);function i(e){this._layers=e||[]}i.prototype.add=function(e){return this._layers.push(e),e},i.prototype.remove=function(e){return this._layers.splice(this._layers.indexOf(e),1)},i.prototype.size=function(){return this._layers.length},i.prototype.indexOf=function(e){return this._layers.indexOf(e)},i.prototype.contains=function(e){return this._layers.indexOf(e)>=0},i.prototype.findById=function(e){return r.find(this._layers,function(t){return t.getId()===e},this)},i.prototype.toArray=function(){return this._layers},i.prototype.move=function(e,t){var n=this._layers.indexOf(e);n>=0&&n!==t&&this._layers.splice(t,0,this._layers.splice(n,1)[0])},e.exports=i},function(e,t,n){"use strict";var r=n(0),i=function(e){this._maxNumberOfRequests=e||3,this.reset()};i.prototype.track=function(e,t){this.lastRequestEquals(e)&&this.lastResponseEquals(t)||this.reset(),this.maxNumberOfRequestsReached()||(this._lastRequest=e,this._lastResponse=t,this._numberOfRequests+=1)},i.prototype.reset=function(){this._lastRequest=void 0,this._lastResponse=void 0,this._numberOfRequests=0},i.prototype.canRequestBePerformed=function(e){return!this.maxNumberOfRequestsReached()||this.maxNumberOfRequestsReached()&&!this.lastRequestEquals(e)},i.prototype.maxNumberOfRequestsReached=function(){return this._numberOfRequests===this._maxNumberOfRequests},i.prototype.lastRequestEquals=function(e){return this._lastRequest&&this._lastRequest.equals(e)},i.prototype.lastResponseEquals=function(e){return r.isEqual(this._lastResponse,e)},e.exports=i},function(e,t){var n=function(){var e,t=1,n=2;function r(e,t){postMessage({action:3,callback_num:t,result:e})}var i,o,a,s=[0,-0x8000000000000000],u=[4294967295,-4294967296],l=[0,0],c=[1,0],p=[4,0],h=[4096,0],f=[16777215,0],d=[16777216,0],m=[4278190080,0],_=[4294967295,0],y=[4294967295,0x7fffffff00000000];function v(){}function g(){}function b(){}function x(e,t){return e.detailMessage=t,e}function w(){}function E(){}function T(e,t){e[e.explicitLength++]=t}function k(e,t){e[e.explicitLength++]=t}function C(e,t,n,r,i){var s;return s=function(e,t){var n=new Array(t);if(e>0)for(var r=[null,0,!1,[0,0]][e],i=0;i<t;++i)n[i]=r;return n}(i,r),A(),S(s,o,a),s.arrayClass$=e,s.typeId$=t,s.queryId$=n,s}function M(e,t,n){if(null!=n){if(e.queryId$>0&&!I(n.typeId$,e.queryId$))throw new Re;if(e.queryId$<0&&(n.typeMarker$==Rn||2==n.typeId$))throw new Re}return e[t]=n}function P(){}function A(){A=Rn,o=[],a=[],function(e,t,n){var r,i=0;for(var o in e)(r=e[o])&&(t[i]=o,n[i]=r,++i)}(new P,o,a)}function S(e,t,n){A();for(var r=0,i=t.length;r<i;++r)e[t[r]]=n[r]}function O(e,t){return e&&!!K[e][t]}function I(e,t){return e&&K[e][t]}function R(e,t){if(null!=e&&!I(e.typeId$,t))throw new De;return e}function j(e,t){return null!=e&&O(e.typeId$,t)}function L(e){return~~Math.max(Math.min(e,2147483647),-2147483648)}(i=v.prototype={}).getClass$=function(){return Dn},i.typeMarker$=Rn,i.typeId$=1,(i=g.prototype=new v).getClass$=function(){return Bn},i.typeId$=3,i.detailMessage=null,(i=b.prototype=new g).getClass$=function(){return Nn},i.typeId$=4,(i=w.prototype=new b).getClass$=function(){return qn},i.typeId$=5,(i=E.prototype=new w).getClass$=function(){return Fn},i.typeId$=6,(i=P.prototype=new v).getClass$=function(){return this.arrayClass$},i.typeId$=0,i.arrayClass$=null,i.length=0,i.queryId$=0;var z,D,B,N,q,F,U,V,W,G,Z,H,K=[{},{},{1:1},{2:1},{2:1},{2:1},{2:1},{2:1,10:1},{2:1},{2:1},{2:1},{2:1},{2:1},{2:1,11:1},{2:1},{2:1},{2:1},{4:1},{5:1},{6:1},{7:1},{8:1},{9:1}];function Y(e){return null!=e&&O(e.typeId$,2)?e:new E}function X(e,t){var n;return n=e[1]+t[1],ee(e[0]+t[0],n)}function $(e,t,n){return 0==t?e:0==n?e:X(e,ee(t*n,0))}function J(e,t){return function(e,t){var n;n=t,t<0&&(n+=4294967296);return[n,4294967296*e]}(~~Math.max(Math.min(e[1]/4294967296,2147483647),-2147483648)&~~Math.max(Math.min(t[1]/4294967296,2147483647),-2147483648),ae(e)&ae(t))}function Q(e,t){var n,r;return e[0]==t[0]&&e[1]==t[1]?0:(n=e[1]<0,r=t[1]<0,n&&!r?-1:!n&&r?1:fe(e,t)[1]<0?-1:1)}function ee(e,t){var n,r;for(e%=0x10000000000000000,t=(t%=0x10000000000000000)-(n=t%4294967296)+(r=4294967296*Math.floor(e/4294967296)),e=e-r+n;e<0;)e+=4294967296,t-=4294967296;for(;e>4294967295;)e-=4294967296,t+=4294967296;for(t%=0x10000000000000000;t>0x7fffffff00000000;)t-=0x10000000000000000;for(;t<-0x8000000000000000;)t+=0x10000000000000000;return[e,t]}function te(e,t){var n,r,i,o,a,s,u;if(0==t[0]&&0==t[1])throw s=new Oe,u="/ by zero",s.detailMessage=u,s;if(0==e[0]&&0==e[1])return _e(),W;if(ne(e,(_e(),N)))return ne(t,F)||ne(t,q)?N:X(n=pe(te(he(e,1),t),1),te(o=fe(e,se(t,n)),t));if(ne(t,N))return W;if(e[1]<0)return t[1]<0?te(le(e),le(t)):le(te(le(e),t));if(t[1]<0)return le(te(e,le(t)));for(a=W,o=e;Q(o,t)>=0;)0==(i=re(Math.floor(de(o)/me(t))))[0]&&0==i[1]&&(i=F),r=se(i,t),a=X(a,i),o=fe(o,r);return a}function ne(e,t){return e[0]==t[0]&&e[1]==t[1]}function re(e){return isNaN(e)?(_e(),W):e<-0x8000000000000000?(_e(),N):e>=0x8000000000000000?(_e(),B):ee(e>0?Math.floor(e):Math.ceil(e),0)}function ie(e){var t,n;return e>-129&&e<128?(t=e+128,null==(n=(function(){Rn;z=C(Vn,0,9,256,0)}(),z)[t])&&(n=z[t]=oe(e)),n):oe(e)}function oe(e){return e>=0?[e,0]:[e+4294967296,-4294967296]}function ae(e){return e[0]>=2147483648?~~Math.max(Math.min(e[0]-4294967296,2147483647),-2147483648):~~Math.max(Math.min(e[0],2147483647),-2147483648)}function se(e,t){var n,r,i,o,a,s,u,l,c;return 0==e[0]&&0==e[1]?(_e(),W):0==t[0]&&0==t[1]?(_e(),W):ne(e,(_e(),N))?ue(t):ne(t,N)?ue(e):e[1]<0?t[1]<0?se(le(e),le(t)):le(se(le(e),t)):t[1]<0?le(se(e,le(t))):Q(e,V)<0&&Q(t,V)<0?ee((e[1]+e[0])*(t[1]+t[0]),0):(i=e[1]%281474976710656,o=e[1]-i,n=e[0]%65536,r=e[0]-n,u=t[1]%281474976710656,l=t[1]-u,a=t[0]%65536,s=t[0]-a,c=$(c=W,o,a),c=$(c,i,s),c=$(c,i,a),c=$(c,r,u),c=$(c,r,s),c=$(c,r,a),c=$(c,n,l),c=$(c,n,u),c=$(c,n,s),c=$(c,n,a))}function ue(e){return 1==(1&ae(e))?(_e(),N):(_e(),W)}function le(e){var t,n;return ne(e,(_e(),N))?N:(t=-e[1],(n=-e[0])>4294967295&&(n-=4294967296,t+=4294967296),n<0&&(n+=4294967296,t-=4294967296),[n,t])}function ce(e){return e<=30?1<<e:ce(30)*ce(e-30)}function pe(e,t){var n,r,i,o;return t&=63,ne(e,(_e(),N))?0==t?e:W:e[1]<0?le(pe(le(e),t)):(o=ce(t),r=e[1]*o%0x10000000000000000,(r+=n=(i=e[0]*o)-i%4294967296)>=0x8000000000000000&&(r-=0x10000000000000000),[i-=n,r])}function he(e,t){var n,r;return r=ce(t&=63),n=e[1]/r,ee(Math.floor(e[0]/r),n)}function fe(e,t){var n;return n=e[1]-t[1],ee(e[0]-t[0],n)}function de(e){var t,n;return(t=L(Math.log(e[1])/(_e(),D)))<=48?e[1]+e[0]:(n=(1<<t-48)-1,e[1]+(e[0]-n))}function me(e){var t,n;return(t=L(Math.log(e[1])/(_e(),D)))<=48?e[1]+e[0]:(n=(1<<t-48)-1,e[1]+(e[0]+n))}function _e(){_e=Rn,D=Math.log(2),B=y,N=s,q=ie(-1),F=ie(1),U=ie(2),V=d,W=ie(0)}function ye(){}function ve(e,t){return function(e,t,n,r){e.buf=t,e.pos=n,e.count=n+r,e.count>t.length&&(e.count=t.length)}(e,t,0,t.length),e}function ge(e){return e.pos>=e.count?-1:255&e.buf[e.pos++]}function be(e,t,n,r){return e.pos>=e.count?-1:(r=We(r,e.count-e.pos),He(e.buf,e.pos,t,n,r),e.pos+=r,r)}function xe(){}function we(){}function Ee(e){return e.buf=C(Zn,0,-1,32,1),e}function Te(e,t){var n;t<=e.buf.length||(t=Ve(t,2*e.buf.length),n=C(Zn,0,-1,t,1),He(e.buf,0,n,0,e.buf.length),e.buf=n)}function ke(e){var t;return t=C(Zn,0,-1,e.count,1),He(e.buf,0,t,0,e.count),t}function Ce(e,t){Te(e,e.count+1),e.buf[e.count++]=t<<24>>24}function Me(e,t,n,r){Te(e,e.count+r),He(t,n,e.buf,e.count,r),e.count+=r}function Pe(){}function Ae(e,t){return e.detailMessage=t,e}function Se(){}function Oe(){}function Ie(e,t){return e.detailMessage=t,e}function Re(){}function je(e,t){var n;return(n=new ze).typeName=e+t,n}function Le(e,t){var n;return(n=new ze).typeName=e+t,n}function ze(){}function De(){}function Be(){}function Ne(e,t){return e.detailMessage=t,e}function qe(){}function Fe(){}function Ue(){}function Ve(e,t){return e>t?e:t}function We(e,t){return e<t?e:t}function Ge(){}function Ze(){}function He(e,t,n,r,i){var o,a,s,u,l,c,p,h,f,d;if(null==e||null==n)throw new Ge;if(p=(e.typeMarker$==Rn||2==e.typeId$?e.getClass$():Un).typeName,s=(n.typeMarker$==Rn||2==n.typeId$?n.getClass$():Un).typeName,91!=p.charCodeAt(0)||91!=s.charCodeAt(0))throw Ie(new Re,"Must be array types");if(p.charCodeAt(1)!=s.charCodeAt(1))throw Ie(new Re,"Array types must match");if(h=e.length,u=n.length,t<0||r<0||i<0||t+i>h||r+i>u)throw new Ue;if(76!=p.charCodeAt(1)&&91!=p.charCodeAt(1)||(f=p,null!=(d=s)&&String(f)==d))for(l=0;l<i;++l)n[r+l]=e[t+l];else if(c=R(e,3),o=R(n,3),(null==e?null:e)===(null==n?null:n)&&t<r)for(t+=i,a=r+i;a-- >r;)M(o,a,c[--t]);else for(a=r+i;r<a;)M(o,r++,c[t++])}function Ke(e){var t;try{return yt(e.chunker)}catch(t){if(j(t=Y(t),10))return!1;throw t}}function Ye(e,t,n,r,i){var o,a;if(!i)throw Ne(new qe,"null mode");if(Q(r,u)<0)throw Ne(new qe,"invalid length "+function e(t){var n,r,i,o,a,s;if(0==t[0]&&0==t[1])return"0";if(ne(t,(_e(),N)))return"-9223372036854775808";if(t[1]<0)return"-"+e(le(t));for(r=t,o="";0!=r[0]||0!=r[1];){if(n=""+ae(fe(r,se(i=te(r,a=ie(1e9)),a))),0!=(r=i)[0]||0!=r[1])for(s=9-n.length;s>0;--s)n="0"+n;o=n+o}return o}(r));for(e.length_0=r,function(e,t){if(!function(e,t){var n;if(t<1||t>536870912)return!1;for(e._dictionarySize=t,n=0;t>1<<n;++n);return e._distTableSize=2*n,!0}(t,1<<e.dictionarySize))throw x(new w,"unexpected failure");if(!function(e,t){return!(t<5||t>273)&&(e._numFastBytes=t,!0)}(t,e.fb))throw x(new w,"unexpected failure");if(!function(e,t){var n;return!(t<0||t>2)&&(n=e._matchFinderType,e._matchFinderType=t,e._matchFinder&&n!=e._matchFinderType&&(e._dictionarySizePrev=-1,e._matchFinder=null),!0)}(t,e.matchFinder))throw x(new w,"unexpected failure");if(!function(e,t,n,r){return!(n<0||n>4||t<0||t>8||r<0||r>4)&&(e._numLiteralPosStateBits=n,e._numLiteralContextBits=t,e._posStateBits=r,e._posStateMask=(1<<e._posStateBits)-1,!0)}(t,e.lc,e.lp,e.pb))throw x(new w,"unexpected failure")}(i,o=function(e){var t;for(Pt(),e._repDistances=C(or,0,-1,4,1),e._optimum=C(br,0,6,4096,0),e._rangeEncoder=(gn(),new Cn),e._isMatch=C(fr,0,-1,192,1),e._isRep=C(fr,0,-1,12,1),e._isRepG0=C(fr,0,-1,12,1),e._isRepG1=C(fr,0,-1,12,1),e._isRepG2=C(fr,0,-1,12,1),e._isRep0Long=C(fr,0,-1,192,1),e._posSlotEncoder=C(xr,0,8,4,0),e._posEncoders=C(fr,0,-1,114,1),e._posAlignEncoder=un(new mn,4),e._lenEncoder=Gt(new Kt),e._repMatchLenEncoder=Gt(new Kt),e._literalEncoder=new Xt,e._matchDistances=C(or,0,-1,548,1),e._posSlotPrices=C(or,0,-1,256,1),e._distancesPrices=C(or,0,-1,512,1),e._alignPrices=C(or,0,-1,16,1),e.reps=C(or,0,-1,4,1),e.repLens=C(or,0,-1,4,1),e.processedInSize=C(wr,0,-1,1,3),e.processedOutSize=C(wr,0,-1,1,3),e.finished=C(Er,0,-1,1,2),e.properties=C(Zn,0,-1,5,1),e.tempPrices=C(or,0,-1,128,1),t=0;t<4096;++t)e._optimum[t]=new rn;for(t=0;t<4;++t)e._posSlotEncoder[t]=un(new mn,6);return e}(new qt)),o._writeEndMark=!0,function(e,t){var n;for(e.properties[0]=9*(5*e._posStateBits+e._numLiteralPosStateBits)+e._numLiteralContextBits<<24>>24,n=0;n<4;++n)e.properties[1+n]=e._dictionarySize>>8*n<<24>>24;Me(t,e.properties,0,5)}(o,n),a=0;a<64;a+=8)Ce(n,255&ae(he(r,a)));e.chunker=(o._needReleaseMFStream=!1,o._inStream=t,o._finished=!1,function(e){var t,n;e._matchFinder||(ut(),t=new pt,n=4,0==e._matchFinderType&&(n=2),function(e,t){e.HASH_ARRAY=t>2,e.HASH_ARRAY?(e.kNumHashDirectBytes=0,e.kMinMatchCheck=4,e.kFixHashSize=66560):(e.kNumHashDirectBytes=2,e.kMinMatchCheck=3,e.kFixHashSize=0)}(t,n),e._matchFinder=t);if(function(e,t,n){var r,i;if(null==e.m_Coders||e.m_NumPrevBits!=n||e.m_NumPosBits!=t)for(e.m_NumPosBits=t,e.m_PosMask=(1<<t)-1,e.m_NumPrevBits=n,i=1<<e.m_NumPrevBits+e.m_NumPosBits,e.m_Coders=C(kr,0,5,i,0),r=0;r<i;++r)e.m_Coders[r]=Qt(new tn)}(e._literalEncoder,e._numLiteralPosStateBits,e._numLiteralContextBits),e._dictionarySize==e._dictionarySizePrev&&e._numFastBytesPrev==e._numFastBytes)return;(function(e,t,n,r,i){var o,a;if(t>1073741567)return!1;e._cutValue=16+(r>>1),function(e,t,n,r){var i;e._keepSizeBefore=t,e._keepSizeAfter=n,i=t+n+r,(null==e._bufferBase||e._blockSize!=i)&&(e._bufferBase=null,e._blockSize=i,e._bufferBase=C(Zn,0,-1,e._blockSize,1)),e._pointerToLastSafePosition=e._blockSize-n}(e,t+n,r+i,256+~~((t+n+r+i)/2)),e._matchMaxLen=r,o=t+1,e._cyclicBufferSize!=o&&(e._son=C(or,0,-1,2*(e._cyclicBufferSize=o),1));a=65536,e.HASH_ARRAY&&(a=t-1,a|=a>>1,a|=a>>2,a|=a>>4,a|=a>>8,a>>=1,(a|=65535)>16777216&&(a>>=1),e._hashMask=a,++a,a+=e.kFixHashSize);a!=e._hashSizeSum&&(e._hash=C(or,0,-1,e._hashSizeSum=a,1))})(e._matchFinder,e._dictionarySize,4096,e._numFastBytes,274),e._dictionarySizePrev=e._dictionarySize,e._numFastBytesPrev=e._numFastBytes}(o),o._rangeEncoder.Stream=n,function(e){var t;for(function(e){var t;for(e._state=0,e._previousByte=0,t=0;t<4;++t)e._repDistances[t]=0}(e),function(e){e._position=l,e.Low=l,e.Range=-1,e._cacheSize=1,e._cache=0}(e._rangeEncoder),kn(e._isMatch),kn(e._isRep0Long),kn(e._isRep),kn(e._isRepG0),kn(e._isRepG1),kn(e._isRepG2),kn(e._posEncoders),function(e){var t,n;for(n=1<<e.m_NumPrevBits+e.m_NumPosBits,t=0;t<n;++t)kn(e.m_Coders[t].m_Encoders)}(e._literalEncoder),t=0;t<4;++t)yn(e._posSlotEncoder[t].Models);Ft(e._lenEncoder,1<<e._posStateBits),Ft(e._repMatchLenEncoder,1<<e._posStateBits),yn(e._posAlignEncoder.Models),e._longestMatchWasFound=!1,e._optimumEndIndex=0,e._optimumCurrentIndex=0,e._additionalOffset=0}(o),Ot(o),St(o),o._lenEncoder._tableSize=o._numFastBytes+1-2,Ht(o._lenEncoder,1<<o._posStateBits),o._repMatchLenEncoder._tableSize=o._numFastBytes+1-2,Ht(o._repMatchLenEncoder,1<<o._posStateBits),o.nowPos64=l,function(e,t){return e.encoder=t,e.decoder=null,e.alive=!0,e}(new vt,o))}function Xe(){}function $e(){}function Je(e){var t,n;try{return yt(e.chunker)}catch(t){if(j(t=Y(t),10))return n=t,e.exception=n,!1;throw t}}function Qe(e,t,n){var r,i,o,a,s,c="";for(o=C(Zn,0,-1,5,1),i=0;i<o.length;++i){if(-1==(a=ge(t)))throw Ae(new Se,"truncated input");o[i]=a<<24>>24}if(!function(e,t){var n,r,i,o,a,s,u;if(t.length<5)return!1;for(u=255&t[0],i=u%9,o=(s=~~(u/9))%5,a=~~(s/5),n=0,r=0;r<4;++r)n+=(255&t[1+r])<<8*r;if(!function(e,t,n,r){var i;if(t>8||n>4||r>4)return!1;return function(e,t,n){var r,i;if(null==e.m_Coders||e.m_NumPrevBits!=n||e.m_NumPosBits!=t)for(e.m_NumPosBits=t,e.m_PosMask=(1<<t)-1,e.m_NumPrevBits=n,i=1<<e.m_NumPrevBits+e.m_NumPosBits,e.m_Coders=C(yr,0,4,i,0),r=0;r<i;++r)e.m_Coders[r]=Ct(new Mt)}(e.m_LiteralDecoder,n,t),i=1<<r,bt(e.m_LenDecoder,i),bt(e.m_RepLenDecoder,i),e.m_PosStateMask=i-1,!0}(e,i,o,a))return!1;return function(e,t){if(t<0)return!1;e.m_DictionarySize!=t&&(e.m_DictionarySize=t,e.m_DictionarySizeCheck=Ve(e.m_DictionarySize,1),function(e,t){null!=e._buffer&&e._windowSize==t||(e._buffer=C(Zn,0,-1,t,1));e._windowSize=t,e._pos=0,e._streamPos=0}(e.m_OutWindow,Ve(e.m_DictionarySizeCheck,4096)));return!0}(e,n)}(r=function(e){var t;for(e.m_OutWindow=new dt,e.m_RangeDecoder=new vn,e.m_IsMatchDecoders=C(fr,0,-1,192,1),e.m_IsRepDecoders=C(fr,0,-1,12,1),e.m_IsRepG0Decoders=C(fr,0,-1,12,1),e.m_IsRepG1Decoders=C(fr,0,-1,12,1),e.m_IsRepG2Decoders=C(fr,0,-1,12,1),e.m_IsRep0LongDecoders=C(fr,0,-1,192,1),e.m_PosSlotDecoder=C(dr,0,7,4,0),e.m_PosDecoders=C(fr,0,-1,114,1),e.m_PosAlignDecoder=on(new sn,4),e.m_LenDecoder=wt(new Tt),e.m_RepLenDecoder=wt(new Tt),e.m_LiteralDecoder=new kt,t=0;t<4;++t)e.m_PosSlotDecoder[t]=on(new sn,6);return e}(new gt),o))throw Ae(new Se,"corrupted input");for(i=0;i<64;i+=8){if(-1==(a=ge(t)))throw Ae(new Se,"truncated input");1==(a=a.toString(16)).length&&(a="0"+a),c=a+""+c}"ffffffffffffffffff"==c.toLowerCase()||0==c?e.length_0=u:(s=parseInt(c,16),e.length_0=s>4294967295?u:re(s)),e.chunker=function(e,t,n,r){return e.m_RangeDecoder.Stream=t,function(e,t){ht(e),e._stream=null,e._stream=t}(e.m_OutWindow,n),function(e){var t;for(function(e,t){t||(e._streamPos=0,e._pos=0)}(e.m_OutWindow,!1),yn(e.m_IsMatchDecoders),yn(e.m_IsRep0LongDecoders),yn(e.m_IsRepDecoders),yn(e.m_IsRepG0Decoders),yn(e.m_IsRepG1Decoders),yn(e.m_IsRepG2Decoders),yn(e.m_PosDecoders),function(e){var t,n;for(n=1<<e.m_NumPrevBits+e.m_NumPosBits,t=0;t<n;++t)yn(e.m_Coders[t].m_Decoders)}(e.m_LiteralDecoder),t=0;t<4;++t)yn(e.m_PosSlotDecoder[t].Models);Et(e.m_LenDecoder),Et(e.m_RepLenDecoder),yn(e.m_PosAlignDecoder.Models),function(e){var t;for(e.Code=0,e.Range=-1,t=0;t<5;++t)e.Code=e.Code<<8|ge(e.Stream)}(e.m_RangeDecoder)}(e),e.state=0,e.rep0=0,e.rep1=0,e.rep2=0,e.rep3=0,e.outSize=r,e.nowPos64=l,e.prevByte=0,function(e,t){return e.decoder=t,e.encoder=null,e.alive=!0,e}(new vt,e)}(r,t,n,e.length_0)}function et(){}function tt(){}function nt(e,t){return e._bufferBase[e._bufferOffset+e._pos+t]}function rt(e,t,n,r){var i,o;for(e._streamEndWasReached&&e._pos+t+r>e._streamPos&&(r=e._streamPos-(e._pos+t)),++n,o=e._bufferOffset+e._pos+t,i=0;i<r&&e._bufferBase[o+i]==e._bufferBase[o+i-n];++i);return i}function it(e){return e._streamPos-e._pos}function ot(e){var t,n;if(!e._streamEndWasReached)for(;;){if(0==(n=-e._bufferOffset+e._blockSize-e._streamPos))return;if(-1==(t=be(e._stream,e._bufferBase,e._bufferOffset+e._streamPos,n)))return e._posLimit=e._streamPos,e._bufferOffset+e._posLimit>e._pointerToLastSafePosition&&(e._posLimit=e._pointerToLastSafePosition-e._bufferOffset),void(e._streamEndWasReached=!0);e._streamPos+=t,e._streamPos>=e._pos+e._keepSizeAfter&&(e._posLimit=e._streamPos-e._keepSizeAfter)}}function at(e,t){e._bufferOffset+=t,e._posLimit-=t,e._pos-=t,e._streamPos-=t}function st(){}function ut(){var e,t,n;for(ut=Rn,G=C(or,0,-1,256,1),e=0;e<256;++e){for(n=e,t=0;t<8;++t)0!=(1&n)?n=n>>>1^-306674912:n>>>=1;G[e]=n}}function lt(e){var t;++e._cyclicBufferPos>=e._cyclicBufferSize&&(e._cyclicBufferPos=0),function(e){++e._pos,e._pos>e._posLimit&&(e._bufferOffset+e._pos>e._pointerToLastSafePosition&&function(e){var t,n,r;for((r=e._bufferOffset+e._pos-e._keepSizeBefore)>0&&--r,n=e._bufferOffset+e._streamPos-r,t=0;t<n;++t)e._bufferBase[t]=e._bufferBase[r+t];e._bufferOffset-=r}(e),ot(e))}(e),1073741823==e._pos&&(t=e._pos-e._cyclicBufferSize,ct(e._son,2*e._cyclicBufferSize,t),ct(e._hash,e._hashSizeSum,t),at(e,t))}function ct(e,t,n){var r,i;for(r=0;r<t;++r)(i=e[r])<=n?i=0:i-=n,e[r]=i}function pt(){}function ht(e){var t;0!=(t=e._pos-e._streamPos)&&(Me(e._stream,e._buffer,e._streamPos,t),e._pos>=e._windowSize&&(e._pos=0),e._streamPos=e._pos)}function ft(e,t){var n;return(n=e._pos-t-1)<0&&(n+=e._windowSize),e._buffer[n]}function dt(){}function mt(e){return(e-=2)<4?e:3}function _t(e){return e<4?0:e<10?e-3:e-6}function yt(e){var t;if(!e.alive)throw new Fe;t=!0;try{return e.encoder?function(e){(function(e,t,n,r){var i,o,a,s,u,p,f,d,m,_,y,v,g,b,x;if(t[0]=l,n[0]=l,r[0]=!0,e._inStream&&(e._matchFinder._stream=e._inStream,function(e){var t;for(e._bufferOffset=0,e._pos=0,e._streamPos=0,e._streamEndWasReached=!1,ot(e),t=0;t<e._hashSizeSum;++t)e._hash[t]=0;e._cyclicBufferPos=0,at(e,-1)}(e._matchFinder),e._needReleaseMFStream=!0,e._inStream=null),!e._finished){if(e._finished=!0,b=e.nowPos64,ne(e.nowPos64,l)){if(0==it(e._matchFinder))return void It(e,ae(e.nowPos64));Dt(e),g=ae(e.nowPos64)&e._posStateMask,bn(e._rangeEncoder,e._isMatch,(e._state<<4)+g,0),e._state=_t(e._state),a=nt(e._matchFinder,-e._additionalOffset),$t(Yt(e._literalEncoder,ae(e.nowPos64),e._previousByte),e._rangeEncoder,a),e._previousByte=a,--e._additionalOffset,e.nowPos64=X(e.nowPos64,c)}if(0!=it(e._matchFinder))for(;;){if(f=Rt(e,ae(e.nowPos64)),_=e.backRes,g=ae(e.nowPos64)&e._posStateMask,o=(e._state<<4)+g,1==f&&-1==_)bn(e._rangeEncoder,e._isMatch,o,0),a=nt(e._matchFinder,-e._additionalOffset),x=Yt(e._literalEncoder,ae(e.nowPos64),e._previousByte),e._state<7?$t(x,e._rangeEncoder,a):(m=nt(e._matchFinder,-e._repDistances[0]-1-e._additionalOffset),Jt(x,e._rangeEncoder,m,a)),e._previousByte=a,e._state=_t(e._state);else{if(bn(e._rangeEncoder,e._isMatch,o,1),_<4){if(bn(e._rangeEncoder,e._isRep,e._state,1),0==_?(bn(e._rangeEncoder,e._isRepG0,e._state,0),bn(e._rangeEncoder,e._isRep0Long,o,1==f?0:1)):(bn(e._rangeEncoder,e._isRepG0,e._state,1),1==_?bn(e._rangeEncoder,e._isRepG1,e._state,0):(bn(e._rangeEncoder,e._isRepG1,e._state,1),bn(e._rangeEncoder,e._isRepG2,e._state,_-2))),1==f?e._state=e._state<7?9:11:(Wt(e._repMatchLenEncoder,e._rangeEncoder,f-2,g),e._state=e._state<7?8:11),s=e._repDistances[_],0!=_){for(p=_;p>=1;--p)e._repDistances[p]=e._repDistances[p-1];e._repDistances[0]=s}}else{for(bn(e._rangeEncoder,e._isRep,e._state,0),e._state=e._state<7?7:10,Wt(e._lenEncoder,e._rangeEncoder,f-2,g),v=Nt(_-=4),d=mt(f),ln(e._posSlotEncoder[d],e._rangeEncoder,v),v>=4&&(y=_-(i=(2|1&v)<<(u=(v>>1)-1)),v<14?fn(e._posEncoders,i-v-1,e._rangeEncoder,u,y):(xn(e._rangeEncoder,y>>4,u-4),pn(e._posAlignEncoder,e._rangeEncoder,15&y),++e._alignPriceCount)),s=_,p=3;p>=1;--p)e._repDistances[p]=e._repDistances[p-1];e._repDistances[0]=s,++e._matchPriceCount}e._previousByte=nt(e._matchFinder,f-1-e._additionalOffset)}if(e._additionalOffset-=f,e.nowPos64=X(e.nowPos64,ie(f)),0==e._additionalOffset){if(e._matchPriceCount>=128&&Ot(e),e._alignPriceCount>=16&&St(e),t[0]=e.nowPos64,n[0]=wn(e._rangeEncoder),0==it(e._matchFinder))return void It(e,ae(e.nowPos64));if(Q(fe(e.nowPos64,b),h)>=0)return e._finished=!1,void(r[0]=!1)}}else It(e,ae(e.nowPos64))}})(e.encoder,e.encoder.processedInSize,e.encoder.processedOutSize,e.encoder.finished),e.inBytesProcessed=e.encoder.processedInSize[0],e.encoder.finished[0]&&(!function(e){Bt(e),e._rangeEncoder.Stream=null}(e.encoder),e.alive=!1)}(e):function(e){var t;if(-1==(t=function(e){var t,n,r,i,o,a;if(a=ae(e.nowPos64)&e.m_PosStateMask,0==_n(e.m_RangeDecoder,e.m_IsMatchDecoders,(e.state<<4)+a))t=function(e,t,n){return e.m_Coders[((t&e.m_PosMask)<<e.m_NumPrevBits)+((255&n)>>>8-e.m_NumPrevBits)]}(e.m_LiteralDecoder,ae(e.nowPos64),e.prevByte),e.state<7?e.prevByte=function(e,t){var n;n=1;do{n=n<<1|_n(t,e.m_Decoders,n)}while(n<256);return n<<24>>24}(t,e.m_RangeDecoder):e.prevByte=function(e,t,n){var r,i,o;o=1;do{if(i=n>>7&1,n<<=1,r=_n(t,e.m_Decoders,(1+i<<8)+o),o=o<<1|r,i!=r){for(;o<256;)o=o<<1|_n(t,e.m_Decoders,o);break}}while(o<256);return o<<24>>24}(t,e.m_RangeDecoder,ft(e.m_OutWindow,e.rep0)),function(e,t){e._buffer[e._pos++]=t,e._pos>=e._windowSize&&ht(e)}(e.m_OutWindow,e.prevByte),e.state=_t(e.state),e.nowPos64=X(e.nowPos64,c);else{if(1==_n(e.m_RangeDecoder,e.m_IsRepDecoders,e.state))r=0,0==_n(e.m_RangeDecoder,e.m_IsRepG0Decoders,e.state)?0==_n(e.m_RangeDecoder,e.m_IsRep0LongDecoders,(e.state<<4)+a)&&(e.state=e.state<7?9:11,r=1):(0==_n(e.m_RangeDecoder,e.m_IsRepG1Decoders,e.state)?n=e.rep1:(0==_n(e.m_RangeDecoder,e.m_IsRepG2Decoders,e.state)?n=e.rep2:(n=e.rep3,e.rep3=e.rep2),e.rep2=e.rep1),e.rep1=e.rep0,e.rep0=n),0==r&&(r=xt(e.m_RepLenDecoder,e.m_RangeDecoder,a)+2,e.state=e.state<7?8:11);else if(e.rep3=e.rep2,e.rep2=e.rep1,e.rep1=e.rep0,r=2+xt(e.m_LenDecoder,e.m_RangeDecoder,a),e.state=e.state<7?7:10,(o=an(e.m_PosSlotDecoder[mt(r)],e.m_RangeDecoder))>=4){if(i=(o>>1)-1,e.rep0=(2|1&o)<<i,o<14)e.rep0+=function(e,t,n,r){var i,o,a,s;for(a=1,s=0,o=0;o<r;++o)i=_n(n,e,t+a),a<<=1,a+=i,s|=i<<o;return s}(e.m_PosDecoders,e.rep0-o-1,e.m_RangeDecoder,i);else if(e.rep0+=function(e,t){var n,r,i;for(r=0,n=t;0!=n;--n)e.Range>>>=1,i=e.Code-e.Range>>>31,e.Code-=e.Range&i-1,r=r<<1|1-i,0==(-16777216&e.Range)&&(e.Code=e.Code<<8|ge(e.Stream),e.Range<<=8);return r}(e.m_RangeDecoder,i-4)<<4,e.rep0+=function(e,t){var n,r,i,o;for(i=1,o=0,r=0;r<e.NumBitLevels;++r)n=_n(t,e.Models,i),i<<=1,i+=n,o|=n<<r;return o}(e.m_PosAlignDecoder,e.m_RangeDecoder),e.rep0<0)return-1==e.rep0?1:-1}else e.rep0=o;if(Q(ie(e.rep0),e.nowPos64)>=0||e.rep0>=e.m_DictionarySizeCheck)return-1;!function(e,t,n){var r;for((r=e._pos-t-1)<0&&(r+=e._windowSize);0!=n;--n)r>=e._windowSize&&(r=0),e._buffer[e._pos++]=e._buffer[r++],e._pos>=e._windowSize&&ht(e)}(e.m_OutWindow,e.rep0,r),e.nowPos64=X(e.nowPos64,ie(r)),e.prevByte=ft(e.m_OutWindow,0)}return 0}(e.decoder)))throw Ae(new Se,"corrupted input");e.inBytesProcessed=u,e.outBytesProcessed=e.decoder.nowPos64,(1==t||Q(e.decoder.outSize,l)>=0&&Q(e.decoder.nowPos64,e.decoder.outSize)>=0)&&(!function(e){ht(e.m_OutWindow),function(e){ht(e),e._stream=null}(e.m_OutWindow),e.m_RangeDecoder.Stream=null}(e.decoder),e.alive=!1)}(e),t=!1,e.alive}finally{t&&(e.alive=!1)}}function vt(){}function gt(){}function bt(e,t){for(;e.m_NumPosStates<t;++e.m_NumPosStates)e.m_LowCoder[e.m_NumPosStates]=on(new sn,3),e.m_MidCoder[e.m_NumPosStates]=on(new sn,3)}function xt(e,t,n){var r;return 0==_n(t,e.m_Choice,0)?an(e.m_LowCoder[n],t):(r=8,0==_n(t,e.m_Choice,1)?r+=an(e.m_MidCoder[n],t):r+=8+an(e.m_HighCoder,t),r)}function wt(e){return e.m_Choice=C(fr,0,-1,2,1),e.m_LowCoder=C(dr,0,7,16,0),e.m_MidCoder=C(dr,0,7,16,0),e.m_HighCoder=on(new sn,8),e}function Et(e){var t;for(yn(e.m_Choice),t=0;t<e.m_NumPosStates;++t)yn(e.m_LowCoder[t].Models),yn(e.m_MidCoder[t].Models);yn(e.m_HighCoder.Models)}function Tt(){}function kt(){}function Ct(e){return e.m_Decoders=C(fr,0,-1,768,1),e}function Mt(){}function Pt(){var e,t,n,r;for(Pt=Rn,e=2,(Z=C(Zn,0,-1,2048,1))[0]=0,Z[1]=1,r=2;r<22;++r)for(n=1<<(r>>1)-1,t=0;t<n;++t,++e)Z[e]=r<<24>>24}function At(e,t){var n,r,i,o;e._optimumEndIndex=t,i=e._optimum[t].PosPrev,r=e._optimum[t].BackPrev;do{e._optimum[t].Prev1IsChar&&(nn(e._optimum[i]),e._optimum[i].PosPrev=i-1,e._optimum[t].Prev2&&(e._optimum[i-1].Prev1IsChar=!1,e._optimum[i-1].PosPrev=e._optimum[t].PosPrev2,e._optimum[i-1].BackPrev=e._optimum[t].BackPrev2)),o=i,n=r,r=e._optimum[o].BackPrev,i=e._optimum[o].PosPrev,e._optimum[o].BackPrev=n,e._optimum[o].PosPrev=t,t=o}while(t>0);return e.backRes=e._optimum[0].BackPrev,e._optimumCurrentIndex=e._optimum[0].PosPrev,e._optimumCurrentIndex}function St(e){var t;for(t=0;t<16;++t)e._alignPrices[t]=hn(e._posAlignEncoder,t);e._alignPriceCount=0}function Ot(e){var t,n,r,i,o,a,s,u;for(i=4;i<128;++i)t=(2|1&(a=Nt(i)))<<(r=(a>>1)-1),e.tempPrices[i]=dn(e._posEncoders,t-a-1,r,i-t);for(o=0;o<4;++o){for(n=e._posSlotEncoder[o],s=o<<6,a=0;a<e._distTableSize;++a)e._posSlotPrices[s+a]=cn(n,a);for(a=14;a<e._distTableSize;++a)e._posSlotPrices[s+a]+=(a>>1)-1-4<<6;for(u=128*o,i=0;i<4;++i)e._distancesPrices[u+i]=e._posSlotPrices[s+i];for(;i<128;++i)e._distancesPrices[u+i]=e._posSlotPrices[s+Nt(i)]+e.tempPrices[i]}e._matchPriceCount=0}function It(e,t){Bt(e),function(e,t){var n;if(!e._writeEndMark)return;bn(e._rangeEncoder,e._isMatch,(e._state<<4)+t,1),bn(e._rangeEncoder,e._isRep,e._state,0),e._state=e._state<7?7:10,Wt(e._lenEncoder,e._rangeEncoder,0,t),n=mt(2),ln(e._posSlotEncoder[n],e._rangeEncoder,63),xn(e._rangeEncoder,67108863,26),pn(e._posAlignEncoder,e._rangeEncoder,15)}(e,t&e._posStateMask),function(e){var t;for(t=0;t<5;++t)En(e)}(e._rangeEncoder)}function Rt(e,t){var n,r,i,o,a,s,u,l,c,p,h,f,d,m,_,y,v,g,b,x,w,E,T,k,C,M,P,A,S,O,I,R,j,L,z,D,B,N,q,F,U,V,W,G;if(e._optimumEndIndex!=e._optimumCurrentIndex)return d=e._optimum[e._optimumCurrentIndex].PosPrev-e._optimumCurrentIndex,e.backRes=e._optimum[e._optimumCurrentIndex].BackPrev,e._optimumCurrentIndex=e._optimum[e._optimumCurrentIndex].PosPrev,d;if(e._optimumCurrentIndex=e._optimumEndIndex=0,e._longestMatchWasFound?(f=e._longestMatchLength,e._longestMatchWasFound=!1):f=Dt(e),M=e._numDistancePairs,(k=it(e._matchFinder)+1)<2)return e.backRes=-1,1;for(k>273&&(k=273),q=0,c=0;c<4;++c)e.reps[c]=e._repDistances[c],e.repLens[c]=rt(e._matchFinder,-1,e.reps[c],273),e.repLens[c]>e.repLens[q]&&(q=c);if(e.repLens[q]>=e._numFastBytes)return e.backRes=q,zt(e,(d=e.repLens[q])-1),d;if(f>=e._numFastBytes)return e.backRes=e._matchDistances[M-1]+4,zt(e,f-1),f;if(u=nt(e._matchFinder,-1),v=nt(e._matchFinder,-e._repDistances[0]-1-1),f<2&&u!=v&&e.repLens[q]<2)return e.backRes=-1,1;if(e._optimum[0].State=e._state,j=t&e._posStateMask,e._optimum[1].Price=(gn(),H[e._isMatch[(e._state<<4)+j]>>>2]+en(Yt(e._literalEncoder,t,e._previousByte),e._state>=7,v,u)),nn(e._optimum[1]),N=(g=H[2048-e._isMatch[(e._state<<4)+j]>>>2])+H[2048-e._isRep[e._state]>>>2],v==u&&(F=N+function(e,t,n){return gn(),H[e._isRepG0[t]>>>2]+H[e._isRep0Long[(t<<4)+n]>>>2]}(e,e._state,j))<e._optimum[1].Price&&(e._optimum[1].Price=F,function(e){e.BackPrev=0,e.Prev1IsChar=!1}(e._optimum[1])),(h=f>=e.repLens[q]?f:e.repLens[q])<2)return e.backRes=e._optimum[1].BackPrev,1;e._optimum[1].PosPrev=0,e._optimum[0].Backs0=e.reps[0],e._optimum[0].Backs1=e.reps[1],e._optimum[0].Backs2=e.reps[2],e._optimum[0].Backs3=e.reps[3],p=h;do{e._optimum[p--].Price=268435455}while(p>=2);for(c=0;c<4;++c)if(!((B=e.repLens[c])<2)){z=N+Lt(e,c,e._state,j);do{(o=z+Zt(e._repMatchLenEncoder,B-2,j))<(O=e._optimum[B]).Price&&(O.Price=o,O.PosPrev=0,O.BackPrev=c,O.Prev1IsChar=!1)}while(--B>=2)}if(T=g+H[e._isRep[e._state]>>>2],(p=e.repLens[0]>=2?e.repLens[0]+1:2)<=f){for(P=0;p>e._matchDistances[P];)P+=2;for(;(o=T+jt(e,l=e._matchDistances[P+1],p,j))<(O=e._optimum[p]).Price&&(O.Price=o,O.PosPrev=0,O.BackPrev=l+4,O.Prev1IsChar=!1),p!=e._matchDistances[P]||(P+=2)!=M;++p);}for(n=0;;){if(++n==h)return At(e,n);if(b=Dt(e),M=e._numDistancePairs,b>=e._numFastBytes)return e._longestMatchLength=b,e._longestMatchWasFound=!0,At(e,n);if(++t,R=e._optimum[n].PosPrev,e._optimum[n].Prev1IsChar?(--R,e._optimum[n].Prev2?(V=e._optimum[e._optimum[n].PosPrev2].State,V=e._optimum[n].BackPrev2<4?V<7?8:11:V<7?7:10):V=e._optimum[R].State,V=_t(V)):V=e._optimum[R].State,R==n-1?V=0==e._optimum[n].BackPrev?V<7?9:11:_t(V):(e._optimum[n].Prev1IsChar&&e._optimum[n].Prev2?(R=e._optimum[n].PosPrev2,I=e._optimum[n].BackPrev2,V=V<7?8:11):V=(I=e._optimum[n].BackPrev)<4?V<7?8:11:V<7?7:10,S=e._optimum[R],I<4?0==I?(e.reps[0]=S.Backs0,e.reps[1]=S.Backs1,e.reps[2]=S.Backs2,e.reps[3]=S.Backs3):1==I?(e.reps[0]=S.Backs1,e.reps[1]=S.Backs0,e.reps[2]=S.Backs2,e.reps[3]=S.Backs3):2==I?(e.reps[0]=S.Backs2,e.reps[1]=S.Backs0,e.reps[2]=S.Backs1,e.reps[3]=S.Backs3):(e.reps[0]=S.Backs3,e.reps[1]=S.Backs0,e.reps[2]=S.Backs1,e.reps[3]=S.Backs2):(e.reps[0]=I-4,e.reps[1]=S.Backs0,e.reps[2]=S.Backs1,e.reps[3]=S.Backs2)),e._optimum[n].State=V,e._optimum[n].Backs0=e.reps[0],e._optimum[n].Backs1=e.reps[1],e._optimum[n].Backs2=e.reps[2],e._optimum[n].Backs3=e.reps[3],s=e._optimum[n].Price,u=nt(e._matchFinder,-1),v=nt(e._matchFinder,-e.reps[0]-1-1),j=t&e._posStateMask,x=!1,(r=s+H[e._isMatch[(V<<4)+j]>>>2]+en(Yt(e._literalEncoder,t,nt(e._matchFinder,-2)),V>=7,v,u))<(w=e._optimum[n+1]).Price&&(w.Price=r,w.PosPrev=n,w.BackPrev=-1,w.Prev1IsChar=!1,x=!0),N=(g=s+H[2048-e._isMatch[(V<<4)+j]>>>2])+H[2048-e._isRep[V]>>>2],v!=u||w.PosPrev<n&&0==w.BackPrev||(F=N+(H[e._isRepG0[V]>>>2]+H[e._isRep0Long[(V<<4)+j]>>>2]))<=w.Price&&(w.Price=F,w.PosPrev=n,w.BackPrev=0,w.Prev1IsChar=!1,x=!0),!((k=C=4095-n<(C=it(e._matchFinder)+1)?4095-n:C)<2)){if(k>e._numFastBytes&&(k=e._numFastBytes),!x&&v!=u&&(G=We(C-1,e._numFastBytes),(_=rt(e._matchFinder,0,e.reps[0],G))>=2)){for(W=_t(V),L=t+1&e._posStateMask,E=r+H[2048-e._isMatch[(W<<4)+L]>>>2]+H[2048-e._isRep[W]>>>2],A=n+1+_;h<A;)e._optimum[++h].Price=268435455;(o=E+(Zt(e._repMatchLenEncoder,_-2,L)+Lt(e,0,W,L)))<(O=e._optimum[A]).Price&&(O.Price=o,O.PosPrev=n+1,O.BackPrev=0,O.Prev1IsChar=!0,O.Prev2=!1)}for(U=2,D=0;D<4;++D)if(!((m=rt(e._matchFinder,-1,e.reps[D],k))<2)){y=m;do{for(;h<n+m;)e._optimum[++h].Price=268435455;(o=N+(Zt(e._repMatchLenEncoder,m-2,j)+Lt(e,D,V,j)))<(O=e._optimum[n+m]).Price&&(O.Price=o,O.PosPrev=n,O.BackPrev=D,O.Prev1IsChar=!1)}while(--m>=2);if(m=y,0==D&&(U=m+1),m<C&&(G=We(C-1-m,e._numFastBytes),(_=rt(e._matchFinder,m,e.reps[D],G))>=2)){for(W=V<7?8:11,L=t+m&e._posStateMask,i=N+(Zt(e._repMatchLenEncoder,m-2,j)+Lt(e,D,V,j))+H[e._isMatch[(W<<4)+L]>>>2]+en(Yt(e._literalEncoder,t+m,nt(e._matchFinder,m-1-1)),!0,nt(e._matchFinder,m-1-(e.reps[D]+1)),nt(e._matchFinder,m-1)),W=_t(W),L=t+m+1&e._posStateMask,E=i+H[2048-e._isMatch[(W<<4)+L]>>>2]+H[2048-e._isRep[W]>>>2],A=m+1+_;h<n+A;)e._optimum[++h].Price=268435455;(o=E+(Zt(e._repMatchLenEncoder,_-2,L)+Lt(e,0,W,L)))<(O=e._optimum[n+A]).Price&&(O.Price=o,O.PosPrev=n+m+1,O.BackPrev=0,O.Prev1IsChar=!0,O.Prev2=!0,O.PosPrev2=n,O.BackPrev2=D)}}if(b>k){for(b=k,M=0;b>e._matchDistances[M];M+=2);e._matchDistances[M]=b,M+=2}if(b>=U){for(T=g+H[e._isRep[V]>>>2];h<n+b;)e._optimum[++h].Price=268435455;for(P=0;U>e._matchDistances[P];)P+=2;for(m=U;;++m)if((o=T+jt(e,a=e._matchDistances[P+1],m,j))<(O=e._optimum[n+m]).Price&&(O.Price=o,O.PosPrev=n,O.BackPrev=a+4,O.Prev1IsChar=!1),m==e._matchDistances[P]){if(m<C&&(G=We(C-1-m,e._numFastBytes),(_=rt(e._matchFinder,m,a,G))>=2)){for(W=V<7?7:10,L=t+m&e._posStateMask,i=o+H[e._isMatch[(W<<4)+L]>>>2]+en(Yt(e._literalEncoder,t+m,nt(e._matchFinder,m-1-1)),!0,nt(e._matchFinder,m-(a+1)-1),nt(e._matchFinder,m-1)),W=_t(W),L=t+m+1&e._posStateMask,E=i+H[2048-e._isMatch[(W<<4)+L]>>>2]+H[2048-e._isRep[W]>>>2],A=m+1+_;h<n+A;)e._optimum[++h].Price=268435455;(o=E+(Zt(e._repMatchLenEncoder,_-2,L)+Lt(e,0,W,L)))<(O=e._optimum[n+A]).Price&&(O.Price=o,O.PosPrev=n+m+1,O.BackPrev=0,O.Prev1IsChar=!0,O.Prev2=!0,O.PosPrev2=n,O.BackPrev2=a+4)}if((P+=2)==M)break}}}}}function jt(e,t,n,r){var i;return i=mt(n),(t<128?e._distancesPrices[128*i+t]:e._posSlotPrices[(i<<6)+function(e){if(e<131072)return Z[e>>6]+12;if(e<134217728)return Z[e>>16]+32;return Z[e>>26]+52}(t)]+e._alignPrices[15&t])+Zt(e._lenEncoder,n-2,r)}function Lt(e,t,n,r){var i;return 0==t?(gn(),i=H[e._isRepG0[n]>>>2],i+=H[2048-e._isRep0Long[(n<<4)+r]>>>2]):(gn(),i=H[2048-e._isRepG0[n]>>>2],1==t?i+=H[e._isRepG1[n]>>>2]:(i+=H[2048-e._isRepG1[n]>>>2],i+=Tn(e._isRepG2[n],t-2))),i}function zt(e,t){t>0&&(!function(e,t){var n,r,i,o,a,s,u,l,c,p,h,f,d,m,_,y,v;do{if(e._pos+e._matchMaxLen<=e._streamPos)f=e._matchMaxLen;else if((f=e._streamPos-e._pos)<e.kMinMatchCheck){lt(e);continue}for(d=e._pos>e._cyclicBufferSize?e._pos-e._cyclicBufferSize:0,r=e._bufferOffset+e._pos,e.HASH_ARRAY?(s=1023&(v=G[255&e._bufferBase[r]]^255&e._bufferBase[r+1]),e._hash[s]=e._pos,u=65535&(v^=(255&e._bufferBase[r+2])<<8),e._hash[1024+u]=e._pos,l=(v^G[255&e._bufferBase[r+3]]<<5)&e._hashMask):l=255&e._bufferBase[r]^(255&e._bufferBase[r+1])<<8,i=e._hash[e.kFixHashSize+l],e._hash[e.kFixHashSize+l]=e._pos,_=1+(e._cyclicBufferPos<<1),y=e._cyclicBufferPos<<1,p=h=e.kNumHashDirectBytes,n=e._cutValue;;){if(i<=d||0==n--){e._son[_]=e._son[y]=0;break}if(o=((a=e._pos-i)<=e._cyclicBufferPos?e._cyclicBufferPos-a:e._cyclicBufferPos-a+e._cyclicBufferSize)<<1,m=e._bufferOffset+i,c=p<h?p:h,e._bufferBase[m+c]==e._bufferBase[r+c]){for(;++c!=f&&e._bufferBase[m+c]==e._bufferBase[r+c];);if(c==f){e._son[y]=e._son[o],e._son[_]=e._son[o+1];break}}(255&e._bufferBase[m+c])<(255&e._bufferBase[r+c])?(e._son[y]=i,y=o+1,i=e._son[y],h=c):(e._son[_]=i,_=o,i=e._son[_],p=c)}lt(e)}while(0!=--t)}(e._matchFinder,t),e._additionalOffset+=t)}function Dt(e){var t;return t=0,e._numDistancePairs=function(e,t){var n,r,i,o,a,s,u,l,c,p,h,f,d,m,_,y,v,g,b,x,w;if(e._pos+e._matchMaxLen<=e._streamPos)m=e._matchMaxLen;else if((m=e._streamPos-e._pos)<e.kMinMatchCheck)return lt(e),0;for(v=0,_=e._pos>e._cyclicBufferSize?e._pos-e._cyclicBufferSize:0,r=e._bufferOffset+e._pos,y=1,l=0,c=0,e.HASH_ARRAY?(l=1023&(w=G[255&e._bufferBase[r]]^255&e._bufferBase[r+1]),c=65535&(w^=(255&e._bufferBase[r+2])<<8),p=(w^G[255&e._bufferBase[r+3]]<<5)&e._hashMask):p=255&e._bufferBase[r]^(255&e._bufferBase[r+1])<<8,i=e._hash[e.kFixHashSize+p],e.HASH_ARRAY&&(o=e._hash[l],a=e._hash[1024+c],e._hash[l]=e._pos,e._hash[1024+c]=e._pos,o>_&&e._bufferBase[e._bufferOffset+o]==e._bufferBase[r]&&(t[v++]=y=2,t[v++]=e._pos-o-1),a>_&&e._bufferBase[e._bufferOffset+a]==e._bufferBase[r]&&(a==o&&(v-=2),t[v++]=y=3,t[v++]=e._pos-a-1,o=a),0!=v&&o==i&&(v-=2,y=1)),e._hash[e.kFixHashSize+p]=e._pos,b=1+(e._cyclicBufferPos<<1),x=e._cyclicBufferPos<<1,f=d=e.kNumHashDirectBytes,0!=e.kNumHashDirectBytes&&i>_&&e._bufferBase[e._bufferOffset+i+e.kNumHashDirectBytes]!=e._bufferBase[r+e.kNumHashDirectBytes]&&(t[v++]=y=e.kNumHashDirectBytes,t[v++]=e._pos-i-1),n=e._cutValue;;){if(i<=_||0==n--){e._son[b]=e._son[x]=0;break}if(s=((u=e._pos-i)<=e._cyclicBufferPos?e._cyclicBufferPos-u:e._cyclicBufferPos-u+e._cyclicBufferSize)<<1,g=e._bufferOffset+i,h=f<d?f:d,e._bufferBase[g+h]==e._bufferBase[r+h]){for(;++h!=m&&e._bufferBase[g+h]==e._bufferBase[r+h];);if(y<h&&(t[v++]=y=h,t[v++]=u-1,h==m)){e._son[x]=e._son[s],e._son[b]=e._son[s+1];break}}(255&e._bufferBase[g+h])<(255&e._bufferBase[r+h])?(e._son[x]=i,x=s+1,i=e._son[x],d=h):(e._son[b]=i,b=s,i=e._son[b],f=h)}return lt(e),v}(e._matchFinder,e._matchDistances),e._numDistancePairs>0&&(t=e._matchDistances[e._numDistancePairs-2])==e._numFastBytes&&(t+=rt(e._matchFinder,t-1,e._matchDistances[e._numDistancePairs-1],273-t)),++e._additionalOffset,t}function Bt(e){e._matchFinder&&e._needReleaseMFStream&&(e._matchFinder._stream=null,e._needReleaseMFStream=!1)}function Nt(e){return e<2048?Z[e]:e<2097152?Z[e>>10]+20:Z[e>>20]+40}function qt(){}function Ft(e,t){var n;for(kn(e._choice),n=0;n<t;++n)yn(e._lowCoder[n].Models),yn(e._midCoder[n].Models);yn(e._highCoder.Models)}function Ut(e,t,n,r,i){var o,a,s,u,l;for(gn(),o=H[e._choice[0]>>>2],s=(a=H[2048-e._choice[0]>>>2])+H[e._choice[1]>>>2],u=a+H[2048-e._choice[1]>>>2],l=0,l=0;l<8;++l){if(l>=n)return;r[i+l]=o+cn(e._lowCoder[t],l)}for(;l<16;++l){if(l>=n)return;r[i+l]=s+cn(e._midCoder[t],l-8)}for(;l<n;++l)r[i+l]=u+cn(e._highCoder,l-8-8)}function Vt(){}function Wt(e,t,n,r){!function(e,t,n,r){n<8?(bn(t,e._choice,0,0),ln(e._lowCoder[r],t,n)):(n-=8,bn(t,e._choice,0,1),n<8?(bn(t,e._choice,1,0),ln(e._midCoder[r],t,n)):(bn(t,e._choice,1,1),ln(e._highCoder,t,n-8)))}(e,t,n,r),0==--e._counters[r]&&(Ut(e,r,e._tableSize,e._prices,272*r),e._counters[r]=e._tableSize)}function Gt(e){return function(e){var t;for(e._choice=C(fr,0,-1,2,1),e._lowCoder=C(xr,0,8,16,0),e._midCoder=C(xr,0,8,16,0),e._highCoder=un(new mn,8),t=0;t<16;++t)e._lowCoder[t]=un(new mn,3),e._midCoder[t]=un(new mn,3)}(e),e._prices=C(or,0,-1,4352,1),e._counters=C(or,0,-1,16,1),e}function Zt(e,t,n){return e._prices[272*n+t]}function Ht(e,t){var n;for(n=0;n<t;++n)Ut(e,n,e._tableSize,e._prices,272*n),e._counters[n]=e._tableSize}function Kt(){}function Yt(e,t,n){return e.m_Coders[((t&e.m_PosMask)<<e.m_NumPrevBits)+((255&n)>>>8-e.m_NumPrevBits)]}function Xt(){}function $t(e,t,n){var r,i,o;for(i=1,o=7;o>=0;--o)r=n>>o&1,bn(t,e.m_Encoders,i,r),i=i<<1|r}function Jt(e,t,n,r){var i,o,a,s,u,l;for(o=1,u=!0,a=7;a>=0;--a)i=r>>a&1,l=o,u&&(l+=1+(s=n>>a&1)<<8,u=s==i),bn(t,e.m_Encoders,l,i),o=o<<1|i}function Qt(e){return e.m_Encoders=C(fr,0,-1,768,1),e}function en(e,t,n,r){var i,o,a,s,u;if(u=0,o=1,a=7,t)for(;a>=0;--a)if(s=n>>a&1,i=r>>a&1,u+=Tn(e.m_Encoders[(1+s<<8)+o],i),o=o<<1|i,s!=i){--a;break}for(;a>=0;--a)i=r>>a&1,u+=Tn(e.m_Encoders[o],i),o=o<<1|i;return u}function tn(){}function nn(e){e.BackPrev=-1,e.Prev1IsChar=!1}function rn(){}function on(e,t){return e.NumBitLevels=t,e.Models=C(fr,0,-1,1<<t,1),e}function an(e,t){var n,r;for(r=1,n=e.NumBitLevels;0!=n;--n)r=(r<<1)+_n(t,e.Models,r);return r-(1<<e.NumBitLevels)}function sn(){}function un(e,t){return e.NumBitLevels=t,e.Models=C(fr,0,-1,1<<t,1),e}function ln(e,t,n){var r,i,o;for(o=1,i=e.NumBitLevels;0!=i;)r=n>>>--i&1,bn(t,e.Models,o,r),o=o<<1|r}function cn(e,t){var n,r,i,o;for(o=0,i=1,r=e.NumBitLevels;0!=r;)n=t>>>--r&1,o+=Tn(e.Models[i],n),i=(i<<1)+n;return o}function pn(e,t,n){var r,i,o;for(o=1,i=0;i<e.NumBitLevels;++i)r=1&n,bn(t,e.Models,o,r),o=o<<1|r,n>>=1}function hn(e,t){var n,r,i,o;for(o=0,i=1,r=e.NumBitLevels;0!=r;--r)n=1&t,t>>>=1,o+=Tn(e.Models[i],n),i=i<<1|n;return o}function fn(e,t,n,r,i){var o,a,s;for(s=1,a=0;a<r;++a)bn(n,e,t+s,o=1&i),s=s<<1|o,i>>=1}function dn(e,t,n,r){var i,o,a,s;for(s=0,a=1,o=n;0!=o;--o)i=1&r,r>>>=1,s+=(gn(),H[(2047&(e[t+a]-i^-i))>>>2]),a=a<<1|i;return s}function mn(){}function _n(e,t,n){var r,i;return i=t[n],r=(e.Range>>>11)*i,(-2147483648^e.Code)<(-2147483648^r)?(e.Range=r,t[n]=i+(2048-i>>>5)<<16>>16,0==(-16777216&e.Range)&&(e.Code=e.Code<<8|ge(e.Stream),e.Range<<=8),0):(e.Range-=r,e.Code-=r,t[n]=i-(i>>>5)<<16>>16,0==(-16777216&e.Range)&&(e.Code=e.Code<<8|ge(e.Stream),e.Range<<=8),1)}function yn(e){var t;for(t=0;t<e.length;++t)e[t]=1024}function vn(){}function gn(){var e,t,n;for(gn=Rn,H=C(or,0,-1,512,1),t=8;t>=0;--t)for(e=1<<9-t,n=1<<9-t-1;n<e;++n)H[n]=(t<<6)+(e-n<<6>>>9-t-1)}function bn(e,t,n,r){var i,o;o=t[n],i=(e.Range>>>11)*o,0==r?(e.Range=i,t[n]=o+(2048-o>>>5)<<16>>16):(e.Low=X(e.Low,J(ie(i),_)),e.Range-=i,t[n]=o-(o>>>5)<<16>>16),0==(-16777216&e.Range)&&(e.Range<<=8,En(e))}function xn(e,t,n){var r;for(r=n-1;r>=0;--r)e.Range>>>=1,1==(t>>>r&1)&&(e.Low=X(e.Low,ie(e.Range))),0==(-16777216&e.Range)&&(e.Range<<=8,En(e))}function wn(e){return X(X(ie(e._cacheSize),e._position),p)}function En(e){var t,n,r,i,o;if(0!=(t=ae((r=e.Low,i=32,o=he(r,i&=63),r[1]<0&&(o=X(o,pe((_e(),U),63-i))),o)))||Q(e.Low,m)<0){e._position=X(e._position,ie(e._cacheSize)),n=e._cache;do{Ce(e.Stream,n+t),n=255}while(0!=--e._cacheSize);e._cache=ae(e.Low)>>>24}++e._cacheSize,e.Low=pe(J(e.Low,f),8)}function Tn(e,t){return gn(),H[(2047&(e-t^-t))>>>2]}function kn(e){var t;for(gn(),t=0;t<e.length;++t)e[t]=1024}function Cn(){}function Mn(e){return e}function Pn(e){return e[1]+e[0]}function An(){var e,n,i,o,a,s=Mn(new On),u=arguments[0],l=arguments[1];"function"==typeof arguments[2]?(o=arguments[2],"function"==typeof arguments[3]&&(a=arguments[3])):i=arguments[2],s.mode=Ur(l),s.c=function(e,t,n){var r;e.output=Ee(new Pe);try{Ye(e,ve(new xe,t),e.output,ie(t.length),n)}catch(r){throw j(r=Y(r),10)?x(new w,"impossible exception"):r}return e}(new $e,function(e){var t,n,r,i,o,a,s;for(function(e,t,n,r,i){var o;for(o=t;o<n;++o)r[i++]=e.charCodeAt(o)}(e,0,s=e.length,a=C(Qn,0,-1,s,1),0),n=a,i=0,o=0;o<e.length;++o)(t=n[o])>=1&&t<=127?++i:i+=0==t||t>=128&&t<=2047?2:3;for(r=C(Zn,0,-1,i,1),i=0,o=0;o<e.length;++o)(t=n[o])>=1&&t<=127?r[i++]=t<<24>>24:0==t||t>=128&&t<=2047?(r[i++]=(192|t>>6&31)<<24>>24,r[i++]=(128|63&t)<<24>>24):(r[i++]=(224|t>>12&15)<<24>>24,r[i++]=(128|t>>6&63)<<24>>24,r[i++]=(128|63&t)<<24>>24);return r}(u),s.mode),a?a(0):void 0!==i&&r(0,i),setTimeout(function u(){var l;for(n=(new Date).getTime();Ke(s.c);)if(e=Pn(s.c.chunker.inBytesProcessed)/Pn(s.c.length_0),(new Date).getTime()-n>200)return a?a(e):void 0!==i&&r(e,i),setTimeout(u,0),!1;a?a(1):void 0!==i&&r(1,i),l=ke(s.c.output).slice(0),o?o(l):void 0!==i&&postMessage({action:t,callback_num:i,result:l})},1)}function Sn(){var e,t,i,s,u,l,c,p,h,f,d=Mn(new On),m=arguments[0];"function"==typeof arguments[1]?(u=arguments[1],"function"==typeof arguments[2]&&(l=arguments[2])):s=arguments[1],c=Zn,p=0,h=-1,f=m,A(),S(f,o,a),f.arrayClass$=c,f.typeId$=p,f.queryId$=h,t=f,d.d=function(e,t){return e.output=Ee(new Pe),Qe(e,ve(new xe,t),e.output),e}(new tt,t),l?l(0):void 0!==s&&r(0,s),setTimeout(function t(){var o;for(i=(new Date).getTime();Je(d.d);)if(e=Pn(d.d.chunker.decoder.nowPos64)/Pn(d.d.length_0),(new Date).getTime()-i>200)return l?l(e):void 0!==s&&r(e,s),setTimeout(t,0),!1;l?l(1):void 0!==s&&r(1,s),o=function(e){var t,n,r,i,o,a,s,u,l,c;for((a=new Ze).data=((s=[]).explicitLength=0,s),t=a,n=0;n<e.length;++n)if(0==(128&(r=255&e[n]))){if(0==r)throw Ne(new qe,"invalid UTF-8");k(t.data,String.fromCharCode(65535&r))}else if(192==(224&r)){if(n+1>=e.length)throw Ne(new qe,"invalid UTF-8");if(128!=(192&(i=255&e[++n])))throw Ne(new qe,"invalid UTF-8");T(t.data,String.fromCharCode((31&r)<<6&65535|63&i))}else{if(224!=(240&r))throw Ne(new qe,"invalid UTF-8");if(n+2>=e.length)throw Ne(new qe,"invalid UTF-8");if(128!=(192&(i=255&e[++n])))throw Ne(new qe,"invalid UTF-8");if(128!=(192&(o=255&e[++n])))throw Ne(new qe,"invalid UTF-8");k(t.data,String.fromCharCode(65535&((15&r)<<12|(63&i)<<6|63&o)))}return u=t.data,c=u.join(""),u.length=u.explicitLength=0,l=c,u[u.explicitLength++]=l,l}(ke(d.d.output)),u?u(o):void 0!==s&&postMessage({action:n,callback_num:s,result:o})},0)}function On(){}function In(){$stats&&$stats({moduleName:e,subSystem:"startup",evtGroup:"moduleStartup",millis:(new Date).getTime(),type:"onModuleLoadStart",className:"org.dellroad.lzma.demo.client.LZMADemo"})}function Rn(){}(i=ye.prototype=new v).getClass$=function(){return Wn},i.typeId$=0,(i=xe.prototype=new ye).getClass$=function(){return Gn},i.typeId$=0,i.buf=null,i.count=0,i.pos=0,(i=we.prototype=new v).getClass$=function(){return Hn},i.typeId$=0,(i=Pe.prototype=new we).getClass$=function(){return Kn},i.typeId$=0,i.buf=null,i.count=0,(i=Se.prototype=new b).getClass$=function(){return Yn},i.typeId$=7,(i=Oe.prototype=new w).getClass$=function(){return $n},i.typeId$=8,(i=Re.prototype=new w).getClass$=function(){return Jn},i.typeId$=9,(i=ze.prototype=new v).getClass$=function(){return er},i.typeId$=0,i.typeName=null,(i=De.prototype=new w).getClass$=function(){return tr},i.typeId$=12,(i=Be.prototype=new v).getClass$=function(){return Xn},i.typeId$=0,(i=qe.prototype=new w).getClass$=function(){return nr},i.typeId$=13,(i=Fe.prototype=new w).getClass$=function(){return rr},i.typeId$=14,(i=Ue.prototype=new w).getClass$=function(){return ir},i.typeId$=15,(i=Ge.prototype=new w).getClass$=function(){return ar},i.typeId$=16,(i=String.prototype).getClass$=function(){return sr},i.typeId$=2,(i=Ze.prototype=new v).getClass$=function(){return ur},i.typeId$=0,(i=function(){}.prototype=new Be).getClass$=function(){return Lr},i.typeId$=0,i.dictionarySize=0,i.fb=0,i.lc=0,i.lp=0,i.matchFinder=0,i.pb=0,(i=Xe.prototype=new v).getClass$=function(){return zr},i.typeId$=0,i.chunker=null,(i=$e.prototype=new Xe).getClass$=function(){return Dr},i.typeId$=0,i.output=null,(i=et.prototype=new v).getClass$=function(){return Br},i.typeId$=0,i.chunker=null,i.exception=null,i.length_0=l,(i=tt.prototype=new et).getClass$=function(){return Nr},i.typeId$=0,i.output=null,(i=st.prototype=new v).getClass$=function(){return lr},i.typeId$=0,i._blockSize=0,i._bufferBase=null,i._bufferOffset=0,i._keepSizeAfter=0,i._keepSizeBefore=0,i._pointerToLastSafePosition=0,i._pos=0,i._posLimit=0,i._stream=null,i._streamEndWasReached=!1,i._streamPos=0,(i=pt.prototype=new st).getClass$=function(){return cr},i.typeId$=0,i.HASH_ARRAY=!0,i._cutValue=255,i._cyclicBufferPos=0,i._cyclicBufferSize=0,i._hash=null,i._hashMask=0,i._hashSizeSum=0,i._matchMaxLen=0,i._son=null,i.kFixHashSize=66560,i.kMinMatchCheck=4,i.kNumHashDirectBytes=0,(i=dt.prototype=new v).getClass$=function(){return pr},i.typeId$=0,i._buffer=null,i._pos=0,i._stream=null,i._streamPos=0,i._windowSize=0,(i=vt.prototype=new v).getClass$=function(){return hr},i.typeId$=0,i.alive=!1,i.decoder=null,i.encoder=null,(i=gt.prototype=new v).getClass$=function(){return mr},i.typeId$=0,i.m_DictionarySize=-1,i.m_DictionarySizeCheck=-1,i.m_PosStateMask=0,i.nowPos64=l,i.outSize=l,i.prevByte=0,i.rep0=0,i.rep1=0,i.rep2=0,i.rep3=0,i.state=0,(i=Tt.prototype=new v).getClass$=function(){return _r},i.typeId$=0,i.m_NumPosStates=0,(i=kt.prototype=new v).getClass$=function(){return vr},i.typeId$=0,i.m_Coders=null,i.m_NumPosBits=0,i.m_NumPrevBits=0,i.m_PosMask=0,(i=Mt.prototype=new v).getClass$=function(){return gr},i.typeId$=17,(i=qt.prototype=new v).getClass$=function(){return Tr},i.typeId$=0,i._additionalOffset=0,i._alignPriceCount=0,i._dictionarySize=4194304,i._dictionarySizePrev=-1,i._distTableSize=44,i._finished=!1,i._inStream=null,i._longestMatchLength=0,i._longestMatchWasFound=!1,i._matchFinder=null,i._matchFinderType=1,i._matchPriceCount=0,i._needReleaseMFStream=!1,i._numDistancePairs=0,i._numFastBytes=32,i._numFastBytesPrev=-1,i._numLiteralContextBits=3,i._numLiteralPosStateBits=0,i._optimumCurrentIndex=0,i._optimumEndIndex=0,i._posStateBits=2,i._posStateMask=3,i._previousByte=0,i._state=0,i._writeEndMark=!1,i.backRes=0,i.nowPos64=l,(i=Vt.prototype=new v).getClass$=function(){return Pr},i.typeId$=0,(i=Kt.prototype=new Vt).getClass$=function(){return Ar},i.typeId$=0,i._tableSize=0,(i=Xt.prototype=new v).getClass$=function(){return Cr},i.typeId$=0,i.m_Coders=null,i.m_NumPosBits=0,i.m_NumPrevBits=0,i.m_PosMask=0,(i=tn.prototype=new v).getClass$=function(){return Mr},i.typeId$=18,(i=rn.prototype=new v).getClass$=function(){return Sr},i.typeId$=19,i.BackPrev=0,i.BackPrev2=0,i.Backs0=0,i.Backs1=0,i.Backs2=0,i.Backs3=0,i.PosPrev=0,i.PosPrev2=0,i.Prev1IsChar=!1,i.Prev2=!1,i.Price=0,i.State=0,(i=sn.prototype=new v).getClass$=function(){return Or},i.typeId$=20,i.Models=null,i.NumBitLevels=0,(i=mn.prototype=new v).getClass$=function(){return Ir},i.typeId$=21,i.Models=null,i.NumBitLevels=0,(i=vn.prototype=new v).getClass$=function(){return Rr},i.typeId$=0,i.Code=0,i.Range=0,i.Stream=null,(i=Cn.prototype=new v).getClass$=function(){return jr},i.typeId$=0,i.Low=l,i.Range=0,i.Stream=null,i._cache=0,i._cacheSize=0,i._position=l,(i=On.prototype=new v).getClass$=function(){return qr},i.typeId$=0,i.c=null,i.d=null;var jn,Ln,zn,Dn=Le("java.lang.","Object"),Bn=Le("java.lang.","Throwable"),Nn=Le("java.lang.","Exception"),qn=Le("java.lang.","RuntimeException"),Fn=Le("com.google.gwt.core.client.","JavaScriptException"),Un=Le("com.google.gwt.core.client.","JavaScriptObject$"),Vn=je("","[[D"),Wn=Le("java.io.","InputStream"),Gn=Le("java.io.","ByteArrayInputStream"),Zn=je("","[B"),Hn=Le("java.io.","OutputStream"),Kn=Le("java.io.","ByteArrayOutputStream"),Yn=Le("java.io.","IOException"),Xn=Le("java.lang.","Enum"),$n=Le("java.lang.","ArithmeticException"),Jn=Le("java.lang.","ArrayStoreException"),Qn=je("","[C"),er=Le("java.lang.","Class"),tr=Le("java.lang.","ClassCastException"),nr=Le("java.lang.","IllegalArgumentException"),rr=Le("java.lang.","IllegalStateException"),ir=Le("java.lang.","IndexOutOfBoundsException"),or=je("","[I"),ar=Le("java.lang.","NullPointerException"),sr=Le("java.lang.","String"),ur=Le("java.lang.","StringBuilder"),lr=Le("org.dellroad.lzma.client.SevenZip.Compression.LZ.","InWindow"),cr=Le("org.dellroad.lzma.client.SevenZip.Compression.LZ.","BinTree"),pr=Le("org.dellroad.lzma.client.SevenZip.Compression.LZ.","OutWindow"),hr=Le("org.dellroad.lzma.client.SevenZip.Compression.LZMA.","Chunker"),fr=je("","[S"),dr=je("[Lorg.dellroad.lzma.client.SevenZip.Compression.RangeCoder.","BitTreeDecoder;"),mr=Le("org.dellroad.lzma.client.SevenZip.Compression.LZMA.","Decoder"),_r=Le("org.dellroad.lzma.client.SevenZip.Compression.LZMA.","Decoder$LenDecoder"),yr=je("[Lorg.dellroad.lzma.client.SevenZip.Compression.LZMA.","Decoder$LiteralDecoder$Decoder2;"),vr=Le("org.dellroad.lzma.client.SevenZip.Compression.LZMA.","Decoder$LiteralDecoder"),gr=Le("org.dellroad.lzma.client.SevenZip.Compression.LZMA.","Decoder$LiteralDecoder$Decoder2"),br=je("[Lorg.dellroad.lzma.client.SevenZip.Compression.LZMA.","Encoder$Optimal;"),xr=je("[Lorg.dellroad.lzma.client.SevenZip.Compression.RangeCoder.","BitTreeEncoder;"),wr=je("","[J"),Er=je("","[Z"),Tr=Le("org.dellroad.lzma.client.SevenZip.Compression.LZMA.","Encoder"),kr=je("[Lorg.dellroad.lzma.client.SevenZip.Compression.LZMA.","Encoder$LiteralEncoder$Encoder2;"),Cr=Le("org.dellroad.lzma.client.SevenZip.Compression.LZMA.","Encoder$LiteralEncoder"),Mr=Le("org.dellroad.lzma.client.SevenZip.Compression.LZMA.","Encoder$LiteralEncoder$Encoder2"),Pr=Le("org.dellroad.lzma.client.SevenZip.Compression.LZMA.","Encoder$LenEncoder"),Ar=Le("org.dellroad.lzma.client.SevenZip.Compression.LZMA.","Encoder$LenPriceTableEncoder"),Sr=Le("org.dellroad.lzma.client.SevenZip.Compression.LZMA.","Encoder$Optimal"),Or=Le("org.dellroad.lzma.client.SevenZip.Compression.RangeCoder.","BitTreeDecoder"),Ir=Le("org.dellroad.lzma.client.SevenZip.Compression.RangeCoder.","BitTreeEncoder"),Rr=Le("org.dellroad.lzma.client.SevenZip.Compression.RangeCoder.","Decoder"),jr=Le("org.dellroad.lzma.client.SevenZip.Compression.RangeCoder.","Encoder"),Lr=(jn="org.dellroad.lzma.client.",Ln="CompressionMode",(zn=new ze).typeName=jn+Ln,zn),zr=Le("org.dellroad.lzma.client.","LZMACompressor"),Dr=Le("org.dellroad.lzma.client.","LZMAByteArrayCompressor"),Br=Le("org.dellroad.lzma.client.","LZMADecompressor"),Nr=Le("org.dellroad.lzma.client.","LZMAByteArrayDecompressor"),qr=Le("org.dellroad.lzma.demo.client.","LZMADemo");!function(t,n,r){if(e=n,r,t)try{In()}catch(e){t(n)}else In()}(function(){},"lzma_demo","");var Fr,Ur=(Fr=[{dictionarySize:16,fb:64,matchFinder:0,lc:3,lp:0,pb:2},{dictionarySize:20,fb:64,matchFinder:0,lc:3,lp:0,pb:2},{dictionarySize:19,fb:64,matchFinder:1,lc:3,lp:0,pb:2},{dictionarySize:20,fb:64,matchFinder:1,lc:3,lp:0,pb:2},{dictionarySize:21,fb:128,matchFinder:1,lc:3,lp:0,pb:2},{dictionarySize:22,fb:128,matchFinder:1,lc:3,lp:0,pb:2},{dictionarySize:23,fb:128,matchFinder:1,lc:3,lp:0,pb:2},{dictionarySize:24,fb:255,matchFinder:1,lc:3,lp:0,pb:2},{dictionarySize:25,fb:255,matchFinder:1,lc:3,lp:0,pb:2}],function(e){var t;return t=e,isNaN(parseFloat(t))||!isFinite(t)?e=1:e<1?e=1:e>9&&(e=9),Fr[e-1]});return{compress:An,decompress:Sn}}();e.exports=n},function(e,t,n){"use strict";var r=n(16),i=n(0),o=n(108),a=n(6),s=n(41),u=n(107),l=n(26),c=n(24),p=function(e){!function(e,t){var n=i.filter(t,function(t){return!e[t]});if(n.length)throw new Error("WindshaftClient could not be initialized. The following options are missing: "+n.join(", "))}(e,["urlTemplate","userName"]),e.templateName?this.endpoints={get:[s.MAPS_API_BASE_URL,"named",e.templateName,"jsonp"].join("/"),post:[s.MAPS_API_BASE_URL,"named",e.templateName].join("/")}:this.endpoints={get:s.MAPS_API_BASE_URL,post:s.MAPS_API_BASE_URL},this.url=e.urlTemplate.replace("{user}",e.userName),this._requestTracker=new u(3)};p.prototype.instantiateMap=function(e){this._requestTracker.canRequestBePerformed(e)?this._performRequest(e,{success:function(t){if(this._requestTracker.track(e,t),t.errors){var n=c(t);e.options.error&&e.options.error(n)}else e.options.success&&e.options.success(t)}.bind(this),error:function(t,n){if("abort"!==n){var r={},i={};try{r=JSON.parse(t.responseText),i=c(r)}catch(e){}this._requestTracker.track(e,r),e.options.error&&e.options.error(i)}}.bind(this)}):(l.error("Maximum number of subsequent equal requests to the Maps API reached (3):",e.payload,e.params),e.options.error&&e.options.error({}))},p.prototype._performRequest=function(e,t){var n=e.payload,r=e.params,i=this._generateEncodedURL(n,r);this._isURLValid(i)?this._get(i,t):this._generateCompressedURL(n,r,function(e){if(this._isURLValid(e))this._get(e,t);else{var i=this._getURL(r,"post");this._post(i,n,t)}}.bind(this))},p.prototype._generateEncodedURL=function(e,t){return t=i.extend({config:JSON.stringify(e)},t),this._getURL(t)},p.prototype._generateCompressedURL=function(e,t,n){var r=JSON.stringify({config:JSON.stringify(e)});o.compress(r,3,function(e){t=i.extend({lzma:a.array2hex(e)},t),n(this._getURL(t))}.bind(this))},p.prototype._isURLValid=function(e){return e.length<2033},p.prototype._post=function(e,t,n){this._abortPreviousRequest(),this._previousRequest=r.ajax({url:e,crossOrigin:!0,method:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(t),success:n.success,error:n.error})},p.prototype._get=function(e,t){this._abortPreviousRequest(),this._previousRequest=r.ajax({url:e,method:"GET",dataType:"jsonp",jsonpCallback:this._jsonpCallbackName(e),cache:!0,success:t.success,error:t.error})},p.prototype._abortPreviousRequest=function(){this._previousRequest&&this._previousRequest.abort()},p.prototype._getURL=function(e,t){t=t||"get";var n=this._convertParamsToQueryString(e),r=this.endpoints[t];return[this.url,r].join("/")+n},p.prototype._convertParamsToQueryString=function(e){var t=[];return i.each(e,function(e,n){e instanceof Array?i.each(e,function(e){t.push(n+"[]="+e)}):e instanceof Object?t.push(n+"="+encodeURIComponent(JSON.stringify(e))):t.push(n+"="+encodeURIComponent(e))}),t.length>0?"?"+t.join("&"):""},p.prototype._jsonpCallbackName=function(e){return"_cdbc_"+a.uniqueCallbackName(e)},e.exports=p},function(e,t,n){"use strict";var r=n(0),i=n(41);function o(e,t){this._windshaftSettings=e,this._layerGroupId=t.layergroupid,this._layers=t.metadata.layers,this._dataviews=t.metadata.dataviews,this._analyses=t.metadata.analyses,this._cdnUrl=t.cdn_url}o.prototype.getLayerIndexesByType=function(e){return r.reduce(this._getLayers(),function(t,n,r){return n.type===e&&t.push(r),t},[])},o.prototype.getBaseURL=function(){return[this._getHost(),i.MAPS_API_BASE_URL,this._layerGroupId].join("/")},o.prototype.getStaticBaseURL=function(){return[this._getHost(),i.MAPS_API_BASE_URL,"static/center",this._layerGroupId].join("/")},o.prototype._getHost=function(){var e=this._windshaftSettings.urlTemplate,t=this._windshaftSettings.userName,n=this.getProtocol(),r=this._cdnUrl,i=r&&r[n],o=r&&r.templates;return o&&o[n]?o[n].url+"/"+t:i?[n,"://",i,"/",t].join(""):e.replace("{user}",t)},o.prototype.getProtocol=function(){return this._isHttps()?"https":"http"},o.prototype._isHttps=function(){return 0===this._windshaftSettings.urlTemplate.indexOf("https")},o.prototype.getSupportedSubdomains=function(){var e=this._cdnUrl&&this._cdnUrl.templates,t=this.getProtocol();return e&&e[t]?e[t].subdomains:[]},o.prototype.getLayerMetadata=function(e){var t={},n=this._getLayers();return n&&n[e]&&(t=n[e].meta||{}),t},o.prototype.getDataviewMetadata=function(e){var t=this._getDataviews();if(t&&t[e])return t[e];t={};var n=r.compact(r.map(this._getLayers(),function(e){return e.widgets}));return r.each(n,function(e){r.extend(t,e)}),t&&t[e]?t[e]:void 0},o.prototype.getAnalysisNodeMetadata=function(e){var t={},n=r.map(this._getAnalyses(),function(e){return e.nodes});return r.each(n,function(e){r.extend(t,e)}),t[e]},o.prototype._getLayers=function(){return this._layers},o.prototype._getDataviews=function(){return this._dataviews},o.prototype._getAnalyses=function(){return this._analyses},e.exports=o},function(e,t,n){"use strict";var r=function(e,t,n){this.payload=e,this.params=t,this.options=n};r.prototype.toHashCode=function(){return JSON.stringify(this.payload)+JSON.stringify(this.params)+JSON.stringify(this.options)},r.prototype.equals=function(e){return this.toHashCode()===e.toHashCode()},e.exports=r},function(e,t,n){"use strict";var r=n(0),i=n(15);function o(e){return r.reduce(e,function(e,t,n){return t.get("cartocss")&&(e[n]=t.get("cartocss")),e},{})}e.exports={serialize:function(e,t){return{buffersize:{mvt:0},styles:o(e.filter(function(e){return!i.isGoogleMapsBaseLayer(e)}))}}}},function(e,t,n){"use strict";var r=n(0),i=n(14),o=["line-color","marker-fill","polygon-fill","marker-file"],a=["="],s=function(e){var t="",n=e.match(/(http|https):\/\/\S+\.(?:gif|jpeg|jpg|png|webp|svg)/g);return n&&(t=n[0]),t};e.exports={canAdapt:function(e){return(e=new i(e)).matchesAnyProperty(o)&&e.matchesAnyMapping(a)&&function(e){var t=e.getBucketsWithCategoryFilter();return r.every(t,function(e){return null!=e.filter.name&&null!=e.value})}(e)},adapt:function(e){var t,n,o=new i(e[0]),a=new i(e[1]),u=o.getBucketsWithCategoryFilter(),l=a.getBucketsWithCategoryFilter(),c=o.getBucketsWithDefaultFilter(),p=a.getBucketsWithDefaultFilter();return{categories:(t=u,n=l,r.map(t,function(e){var t=r.find(n,function(t){return t.filter.name===e.filter.name});return{title:e.filter.name,icon:t&&t.value?s(t.value):"",color:e.value}})),default:{icon:r.isEmpty(p)?"":s(p[0].value),color:r.isEmpty(c)?"":c[0].value}}}}},function(e,t,n){"use strict";var r=n(0),i=n(14),o=["line-color","marker-fill","polygon-fill"],a=[">",">=","<","<="],s=function(e){if(1===e.length){var t=e[0],n=t.filter.start,i=t.filter.end;return[{value:t.value,label:n.toString()},{value:t.value,label:i.toString()}]}return r.map(e,function(t,n){var r="";return 0===n?r=t.filter.start:n===e.length-1&&(r=t.filter.end),{value:t.value,label:r.toString()}})};e.exports={canAdapt:function(e){return(e=new i(e)).matchesAnyProperty(o)&&e.matchesAnyMapping(a)&&function(e){var t=e.getBucketsWithRangeFilter();return r.every(t,function(e){return null!=e.filter.start&&null!=e.filter.end})}(e)},adapt:function(e){var t=new i(e[0]),n=t.getBucketsWithRangeFilter(),o=r.last(n),a=r.first(n);return{colors:s(n),avg:t.getFilterAvg(),max:o.filter.end,min:a.filter.start}}}},function(e,t,n){"use strict";var r=n(0),i=n(14),o=["marker-width","line-width"],a=function(e){var t=r.last(e);return r.chain(e).map("filter").map("start").concat(t.filter.end).value()};e.exports={canAdapt:function(e){return(e=new i(e)).matchesAnyProperty(o)&&function(e){var t=e.getBucketsWithRangeFilter();return r.every(t,function(e){return null!=e.filter.start&&null!=e.filter.end})}(e)},adapt:function(e){var t=new i(e[0]),n=t.getBucketsWithRangeFilter();return{values:a(n),sizes:r.map(n,"value"),avg:t.getFilterAvg()}}}},function(e,t,n){"use strict";var r={bubble:n(115),choropleth:n(114),category:n(113)};e.exports={getAdapterForLegend:function(e){return r[e.get("type")]}}},function(e,t,n){"use strict";var r={};r.VERSION=n(25).version,r.DEBUG=!1,r.helpers={},e.exports=r},function(e,t,n){"use strict";var r=n(0),i=n(26),o=n(6),a=n(116),s=n(28),u=n(1);var l=function(e){if(!e.layerGroupModel)throw new Error("layerGroupModel is required");if(!e.layersCollection)throw new Error("layersCollection is required");if(!e.dataviewsCollection)throw new Error("dataviewsCollection is required");this._layerGroupModel=e.layerGroupModel,this._layersCollection=e.layersCollection,this._dataviewsCollection=e.dataviewsCollection};l.prototype.updateModels=function(e,t,n){this._updateLayerModels(e),this._updateLayerGroupModel(e),this._updateDataviewModels(e,t,n),this._updateAnalysisModels(e)},l.prototype._updateLayerGroupModel=function(e){var t={tiles:this._generateTileURLTemplate(e),subdomains:e.getSupportedSubdomains(),grids:this._calculateGridURLTemplatesForCartoDBLayers(e),attributes:this._calculateAttributesBaseURLsForCartoDBLayers(e),image:this._calculateStaticMapURL(e)};this._layerGroupModel.set({indexOfLayersInWindshaft:e.getLayerIndexesByType("mapnik"),urls:t})},l.prototype._calculateStaticMapURL=function(e){return[e.getStaticBaseURL(),"{z}/{lat}/{lng}/{width}/{height}.{format}"].join("/")},l.prototype._generateTileURLTemplate=function(e){return e.getBaseURL()+"/{layerIndexes}/{z}/{x}/{y}.{format}"},l.prototype._calculateGridURLTemplatesForCartoDBLayers=function(e){var t=[],n=e.getLayerIndexesByType("mapnik");return n.length>0&&r.each(n,function(n){var i=[],o=this._generateGridURLTemplate(e,n),a=e.getSupportedSubdomains();a.length?r.each(a,function(e){i.push(o.replace("{s}",e))}):i.push(o),t.push(i)},this),t},l.prototype._generateGridURLTemplate=function(e,t){return e.getBaseURL()+"/"+t+"/{z}/{x}/{y}.grid.json"},l.prototype._calculateAttributesBaseURLsForCartoDBLayers=function(e){var t=[],n=e.getLayerIndexesByType("mapnik");return n.length>0&&r.each(n,function(n){t.push(this._generateAttributesBaseURL(e,n))},this),t},l.prototype._generateAttributesBaseURL=function(e,t){var n,r,i=e.getBaseURL()+"/"+t+"/attributes";if(i.indexOf("{s}")>=0){var a=(n=e.getSupportedSubdomains(),r=i,n[o.crc32(r)%n.length]);i=i.replace("{s}",a)}return i},l.prototype._updateLayerModels=function(e){var t=e.getLayerIndexesByType("mapnik");r.each(this._layersCollection.getCartoDBLayers(),function(n,r){var i=t[r];n.set("meta",e.getLayerMetadata(i)),this._updateLegendModels(n,i,e),n.setOk()},this);var n=e.getLayerIndexesByType("torque");r.each(this._layersCollection.getTorqueLayers(),function(t,r){var i=n[r],o=e.getLayerMetadata(i);t.set("meta",o),t.set(o),t.set("subdomains",e.getSupportedSubdomains()),t.set("tileURLTemplates",this._calculateTileURLTemplatesForTorqueLayers(e)),this._updateLegendModels(t,i,e),t.setOk()},this)},l.prototype._calculateTileURLTemplatesForTorqueLayers=function(e){var t=[],n=e.getLayerIndexesByType("torque");return n.length>0&&t.push(this._generateTorqueTileURLTemplate(e,n)),t},l.prototype._generateTorqueTileURLTemplate=function(e,t){return e.getBaseURL()+"/"+t.join(",")+"/{z}/{x}/{y}.json.torque"},l.prototype._updateLegendModels=function(e,t,n){var i=n.getLayerMetadata(t);r.each(this._getLayerLegends(e),function(e){this._updateLegendModel(e,i)},this)},l.prototype._updateLegendModel=function(e,t){var n=t&&t.cartocss_meta&&t.cartocss_meta.rules;try{var o={state:"success"};if(n){var s=a.getAdapterForLegend(e),u=r.filter(n,s.canAdapt);r.isEmpty(u)||(o=r.extend(o,s.adapt(u)))}e.set(o)}catch(t){e.set({state:"error"}),i.error("legend of type '"+e.get("type")+"' couldn't be updated: "+t.message)}},l.prototype._updateDataviewModels=function(e,t,n){this._dataviewsCollection.each(function(r){var i=e.getDataviewMetadata(r.get("id"));i&&r.set({url:i.url[this._getProtocol()]},{sourceId:t,forceFetch:n})},this)},l.prototype._updateAnalysisModels=function(e){this._getUniqueAnalysisNodesCollection().each(function(t){var n,i=e.getAnalysisNodeMetadata(t.get("id"));i&&(n={status:i.status,url:i.url[this._getProtocol()],query:i.query},n=r.omit(n,t.getParamNames()),i.error_message?(n=r.extend(n,{error:{message:i.error_message}}),t.set(n)):(t.set(n),t.setOk()))},this)},l.prototype._getProtocol=function(){return"file:"===window.location.protocol?"http":window.location.protocol.replace(":","")},l.prototype.setErrors=function(e){r.each(e,this._setError,this),this._setLegendErrors()},l.prototype._setError=function(e){if(e.isLayerError()){var t=this._layersCollection.get(e.layerId);t&&t.setError(e)}else if(e.isAnalysisError()){var n=this._getUniqueAnalysisNodesCollection().get(e.analysisId);n&&n.setError(e)}},l.prototype._setLegendErrors=function(){var e=this._layersCollection.chain().map(this._getLayerLegends).compact().flatten().value();r.each(e,function(e){e.set("state","error")})},l.prototype._getLayerLegends=function(e){return e.legends&&[e.legends.bubble,e.legends.category,e.legends.choropleth]},l.prototype._getUniqueAnalysisNodesCollection=function(){var e=s.getUniqueAnalysisNodes(this._layersCollection,this._dataviewsCollection);return new u.Collection(e)},e.exports=l},function(e,t,n){"use strict";var r=n(0),i=n(1),o=i.Collection.extend({initialize:function(){this.comparator=function(e){return parseInt(e.get("order"),10)},this.bind("add",this._assignIndexes),this.bind("remove",this._assignIndexes)},_assignIndexes:function(e,t,n){if(this.size()>0&&(this.at(0).set({order:0}),this.size()>1)){var i=this.reduce(function(e,t,n){var r=t.get("type");return 0===n&&"Tiled"===r?e:(e[r]=e[r]||[],e[r].push(t),e)},{}),o=1,a=["CartoDB","torque","Tiled"];r.each(a,function(e){var t=i[e]||[];r.each(t,function(e){e.set({order:o}),o+=1})})}this.sort()},getCartoDBLayers:function(){return this._getLayersByType("CartoDB")},getTiledLayers:function(){return this._getLayersByType("Tiled")},getTorqueLayers:function(){return this._getLayersByType("torque")},_getLayersByType:function(e){return this.select(function(t){return t.get("type")===e})},getLayersWithLegends:function(){return this.select(function(e){return!!e.legends})},moveCartoDBLayer:function(e,t){if(e===t)return!1;var n=this.at(e);return!(!n||"CartoDB"!==n.get("type"))&&(this.remove(n,{silent:!0}),this.add(n,{at:t,silent:!0}),this.trigger("layerMoved",n),n)}});e.exports=o},function(e,t,n){"use strict";var r=n(0),i=n(1).Collection.extend({isAnyDataviewFiltered:function(){return this.any(function(e){var t=e.filter;return t&&!t.isEmpty()})},getFilters:function(){return this.reduce(function(e,t){var n=t.filter;return n&&!n.isEmpty()&&(e.dataviews=e.dataviews||{},r.extend(e.dataviews,n.toJSON())),e},{})}});e.exports=i},function(e,t,n){"use strict";var r=n(0),i=n(16),o=n(1),a=n(15),s=n(6),u=o.Model.extend({defaults:{visible:!0,type:"layergroup"},initialize:function(e,t){if(!(t=t||{}).layersCollection)throw new Error("layersCollection option is required");this._layersCollection=t.layersCollection},addError:function(e){var t=e.type;if(!t)throw new Error("Error must have a type property.");this.trigger("error:"+t,e)},forEachGroupedLayer:function(e,t){r.each(this._getGroupedLayers(),e.bind(t||this))},_getGroupedLayers:function(){return this._layersCollection.getCartoDBLayers()},_getLayers:function(){return this._layersCollection.reject(a.isGoogleMapsBaseLayer)},getIndexOfLayerInLayerGroup:function(e){return this._getGroupedLayers().indexOf(e)},getLayerInLayerGroupAt:function(e){return this._getGroupedLayers()[e]},getCartoLayerById:function(e){return this._layersCollection.get(e)},isEqual:function(){return!1},hasURLs:function(){return!!this.get("urls")},getSubdomains:function(){return this.get("urls")&&this.get("urls").subdomains||[]},getTileURLTemplatesWithSubdomains:function(){var e=this.getTileURLTemplate(),t=this.getSubdomains();return t&&t.length?r.map(t,function(t){return e.replace("{s}",t)}):[e]},getTileURLTemplate:function(e){e=e||"png";var t=this.get("urls")&&this.get("urls").tiles;return t?"png"===e?this._areAllLayersHidden()?"":this._generatePNGTileURLTemplate(t):"mvt"===e?this._generateMTVTileURLTemplate(t):void 0:""},_generatePNGTileURLTemplate:function(e){var t=this._getIndexesOfVisibleMapnikLayers();return t?(e=e.replace("{layerIndexes}",t).replace("{format}","png"),this._appendAuthParamsToURL(e)):""},_generateMTVTileURLTemplate:function(e){return e=e.replace("{layerIndexes}","mapnik").replace("{format}","mvt"),this._appendAuthParamsToURL(e)},_areAllLayersHidden:function(){return r.all(this._getGroupedLayers(),function(e){return!e.isVisible()})},_getIndexesOfVisibleMapnikLayers:function(e){var t=this.get("indexOfLayersInWindshaft");return r.reduce(this._getGroupedLayers(),function(e,n,r){return n.isVisible()&&e.push(t[r]),e},[]).join(",")},_getIndexesOfVisibleLayers:function(e){return r.reduce(this._getLayers(),function(e,t,n){return t.isVisible()&&e.push(n),e},[]).join(",")},hasTileURLTemplates:function(){return!!this.getTileURLTemplate()},getGridURLTemplatesWithSubdomains:function(e){var t=this.get("urls")&&this.get("urls").grids&&this.get("urls").grids[e]||[];if(this.get("urls")&&this.get("urls").subdomains){var n=this.get("urls").subdomains;t=r.map(t,function(e,t){return e.replace("{s}",n[t])})}return r.map(t,this._appendAuthParamsToURL,this)},getAttributesBaseURL:function(e){return this.get("urls")&&this.get("urls").attributes&&this.get("urls").attributes[e]},getStaticImageURLTemplate:function(){var e=this.get("urls")&&this.get("urls").image;return e&&(e=this._appendParamsToURL(e,["layer="+this._getIndexesOfVisibleLayers()]),e=(e=this._appendAuthParamsToURL(e)).replace("{s}",this.getSubdomains()[0])),e},fetchAttributes:function(e,t,n){var r=this.getAttributesBaseURL(e);if(!r)throw new Error("Attributes cannot be fetched until urls are set");var o=this._appendAuthParamsToURL(r+"/"+t);i.ajax({dataType:"jsonp",url:o,jsonpCallback:"_cdbi_layer_attributes_"+s.uniqueCallbackName(this.toJSON()),cache:!0,success:function(e){n(e)},error:function(e){n(null)}})},_appendAuthParamsToURL:function(e){var t=[];if(this.get("apiKey"))t.push("api_key="+this.get("apiKey"));else if(this.get("authToken")){var n=this.get("authToken");n instanceof Array?r.each(n,function(e){t.push("auth_token[]="+e)}):t.push("auth_token="+n)}return this._appendParamsToURL(e,t)},_appendParamsToURL:function(e,t){if(t.length){var n="?";return-1!==e.indexOf("?")&&(n="&"),e+n+t.join("&")}return e},onLayerVisibilityChanged:function(e){this._layersCollection.on("change:visible",function(t){this._isLayerGrouped(t)&&e(t)},this)},onLayerAdded:function(e){this._layersCollection.on("add",function(t){this._isLayerGrouped(t)&&e(t,this.getLayerInLayerGroupAt(t))},this)},_isLayerGrouped:function(e){return this._getGroupedLayers().indexOf(e)>=0}});e.exports=u},function(e,t,n){"use strict";var r=n(0),i=n(15),o="2.1.0",a="http",s="plain",u="mapnik",l="torque";function c(e){return i.isTiledLayer(e)?function(e){return{id:e.get("id"),type:a,options:{urlTemplate:e.get("urlTemplate"),subdomains:e.get("subdomains"),tms:e.get("tms")}}}(e):i.isPlainLayer(e)?function(e){return{id:e.get("id"),type:s,options:{color:e.get("color"),imageUrl:e.get("image")}}}(e):i.isWMSLayer(e)?function(e){return{id:e.get("id"),type:a,options:{urlTemplate:e.get("urlTemplate"),tms:!0}}}(e):i.isCartoDBLayer(e)?function(e){var t=p(e);t.interactivity=e.getInteractiveColumnNames(),e.infowindow&&e.infowindow.hasFields()&&(t.attributes={id:"cartodb_id",columns:e.infowindow.getFieldNames()});isFinite(e.get("minzoom"))&&(t.minzoom=e.get("minzoom"));isFinite(e.get("maxzoom"))&&(t.maxzoom=e.get("maxzoom"));r.isEmpty(e.aggregation)||r.extend(t,{aggregation:e.aggregation});return{id:e.get("id"),type:u,options:t}}(e):i.isTorqueLayer(e)?function(e){var t=p(e);return{id:e.get("id"),type:l,options:t}}(e):void 0}function p(e){var t={cartocss:e.get("cartocss"),cartocss_version:e.get("cartocss_version")||o};return t.source={id:e.getSourceId()},e.get("sql_wrap")&&(t.sql_wrap=e.get("sql_wrap")),t}e.exports={serialize:function(e){return e.chain().map(c).compact().value()}}},function(e,t,n){"use strict";e.exports={serialize:function(e){return e.reduce(function(e,t){return e[t.get("id")]=t.toJSON(),e},{})}}},function(e,t,n){"use strict";var r=n(42);function i(e,t){t=t||"latest",this.definition=e,this.reference=r.getVersion(t)}function o(e,t){var n=t.analyses[e];return Object.keys(n.params).reduce(function(e,t){return"node"===n.params[t].type&&e.push(t),e},[])}function a(e,t){return function(n){return!function(e,t,n){return n.analyses[e].params[t].optional}(e.type,n,t)||!!e.params[n]}}e.exports=i,i.prototype.getNodesWithId=function(){return function e(t,n,r){n.id&&(t[n.id]=n);o(n.type,r).filter(a(n,r)).forEach(function(i){e(t,n.params[i],r)});return t}({},this.definition,this.reference)},i.prototype.getChildNodesNames=function(){return o(this.definition.type,this.reference)},i.prototype.getNodesList=function(){return function e(t,n,r){t.push(n);o(n.type,r).filter(a(n,r)).forEach(function(i){e(t,n.params[i],r)});return t}([],this.definition,this.reference)},i.prototype.getDefinitionWith=function(e,t){return function e(t,n,r,i){t.id&&t.id===r&&Object.keys(i).forEach(function(e){t.params.hasOwnProperty(e)||(t.params[e]={});var n=i[e];Object.keys(n).forEach(function(r){t.params[e][r]=n[r]})});o(t.type,n).filter(a(t,n)).forEach(function(o){e(t.params[o],n,r,i)});return t}(this.definition,this.reference,e,t)}},function(e){e.exports={version:"0.59.4",analyses:{"aggregate-intersection":{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]},aggregate_function:{type:"enum",values:["avg","count","max","min","sum"]},aggregate_column:{type:"string",optional:!0}}},"bounding-box":{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},aggregation:{type:"enum",values:["avg","count","max","min","sum"],optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},"bounding-circle":{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},aggregation:{type:"enum",values:["avg","count","max","min","sum"],optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},buffer:{params:{source:{type:"node",geometry:["*"]},radius:{type:"number"},isolines:{type:"number",optional:!0},dissolved:{type:"boolean",optional:!0}}},centroid:{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},aggregation:{type:"string",optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},closest:{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]},responses:{type:"number",optional:!0,"default-value":1},category:{type:"string",optional:!0}}},"concave-hull":{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},target_percent:{type:"number",optional:!0,"default-value":.7},allow_holes:{type:"boolean",optional:!0,"default-value":!1},aggregation:{type:"enum",values:["avg","count","max","min","sum"],optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},contour:{params:{source:{type:"node",geometry:["point"]},column:{type:"string"},buffer:{type:"number",optional:!0,"default-value":.2},method:{type:"enum",values:["nearest_neighbor","barymetric","IDW"],optional:!0,"default-value":"barymetric"},class_method:{type:"enum",values:["equals","headstails","jenks","quantiles"],optional:!0,"default-value":"quantiles"},steps:{type:"number",optional:!0,"default-value":7},resolution:{type:"number",optional:!0,"default-value":-90}}},"convex-hull":{params:{source:{type:"node",geometry:["*"]},category_column:{type:"string",optional:!0},aggregation:{type:"enum",values:["avg","count","max","min","sum"],optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}},"data-observatory-measure":{params:{source:{type:"node",geometry:["point","polygon"]},final_column:{type:"string"},segment_name:{type:"string"},percent:{type:"boolean",optional:!0}}},"data-observatory-multiple-measures":{params:{source:{type:"node",geometry:["point","polygon"]},numerators:{type:"array"},normalizations:{type:"array"},denominators:{type:"array"},geom_ids:{type:"array"},numerator_timespans:{type:"array"},column_names:{type:"array"}}},"deprecated-sql-function":{params:{function_name:{type:"string"},primary_source:{type:"node",geometry:["*"]},secondary_source:{type:"node",geometry:["*"],optional:!0},function_args:{type:"array",optional:!0}}},"filter-by-node-column":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},filter_source:{type:"node",geometry:["*"]},filter_column:{type:"string"}}},"filter-category":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},accept:{type:"array",optional:!0},reject:{type:"array",optional:!0}}},"filter-grouped-rank":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},rank:{type:"enum",values:["top","bottom"]},group:{type:"string"},min:{type:"number",optional:!0},max:{type:"number",optional:!0}}},"filter-range":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},min:{type:"number",optional:!0},max:{type:"number",optional:!0},greater_than:{type:"number",optional:!0},greater_than_or_equal:{type:"number",optional:!0},less_than:{type:"number",optional:!0},less_than_or_equal:{type:"number",optional:!0}}},"filter-rank":{params:{source:{type:"node",geometry:["*"]},column:{type:"string"},rank:{type:"enum",values:["top","bottom"]},limit:{type:"number"},action:{type:"enum",values:["show","hide"],optional:!0,"default-value":"show"}}},"georeference-admin-region":{params:{source:{type:"node",geometry:["*"]},admin_region_column:{type:"string"},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},"georeference-city":{params:{source:{type:"node",geometry:["*"]},city_column:{type:"string"},admin_region:{type:"string",optional:!0},admin_region_column:{type:"string",optional:!0},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},"georeference-country":{params:{source:{type:"node",geometry:["*"]},country_column:{type:"string"}}},"georeference-ip-address":{params:{source:{type:"node",geometry:["*"]},ip_address:{type:"string"}}},"georeference-long-lat":{params:{source:{type:"node",geometry:["*"]},longitude:{type:"string"},latitude:{type:"string"}}},"georeference-postal-code":{params:{source:{type:"node",geometry:["*"]},output_geometry_type:{type:"enum",values:["point","polygon"],optional:!0,"default-value":"point"},postal_code_column:{type:"string"},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},"georeference-street-address":{params:{source:{type:"node",geometry:["*"]},street_address_column:{type:"string",optional:!0},street_address_template:{type:"string",optional:!0},city:{type:"string",optional:!0},city_column:{type:"string",optional:!0},state:{type:"string",optional:!0},state_column:{type:"string",optional:!0},country:{type:"string",optional:!0},country_column:{type:"string",optional:!0}}},gravity:{params:{source:{type:"node",geometry:["*"]},target:{type:"node",geometry:["*"]},weight_column:{type:"string"},weight_threshold:{type:"number",optional:!0,"default-value":-1e308},pop_column:{type:"string"},max_distance:{type:"number"},target_id:{type:"number"}}},intersection:{params:{source:{type:"node",geometry:["*"]},source_columns:{type:"array",optional:!0,"default-value":[]},target:{type:"node",geometry:["*"]}}},kmeans:{params:{source:{type:"node",geometry:["point"]},clusters:{type:"number"}}},"line-sequential":{params:{source:{type:"node",geometry:["point"]},order_column:{type:"string"},order_type:{type:"enum",values:["asc","desc"]},category_column:{type:"string",optional:!0}}},"line-source-to-target":{params:{source:{type:"node",geometry:["point"]},source_column:{type:"string",optional:!0},target:{type:"node",geometry:["point"]},target_column:{type:"string",optional:!0},closest:{type:"boolean"}}},"line-to-column":{params:{source:{type:"node",geometry:["point"]},target_column:{type:"string"}}},"line-to-single-point":{params:{source:{type:"node",geometry:["point"]},destination_longitude:{type:"number"},destination_latitude:{type:"number"}}},"link-by-line":{params:{source_points:{type:"node",geometry:["point"]},destination_points:{type:"node",geometry:["point"]},source_column:{type:"string"},destination_column:{type:"string"},use_great_circle:{type:"boolean",optional:!0,"default-value":!1}}},merge:{params:{left_source:{type:"node",geometry:["*"]},right_source:{type:"node",geometry:["*"]},left_source_column:{type:"string"},right_source_column:{type:"string"},join_operator:{type:"enum",values:["inner","left","right"],optional:!0,"default-value":"inner"},source_geometry:{type:"enum",values:["left_source","right_source"],optional:!0,"default-value":"left_source"},left_source_columns:{type:"array",optional:!0},right_source_columns:{type:"array",optional:!0,"default-value":[]}}},moran:{params:{source:{type:"node",geometry:["polygon","point"]},numerator_column:{type:"string"},denominator_column:{type:"string",optional:!0},significance:{type:"number"},neighbours:{type:"number",optional:!0},permutations:{type:"number",optional:!0},w_type:{type:"enum",values:["knn","queen"],optional:!0,"default-value":"knn"}}},"point-in-polygon":{params:{points_source:{type:"node",geometry:["point"]},polygons_source:{type:"node",geometry:["polygon"]}}},"population-in-area":{params:{source:{type:"node",geometry:["polygon"]},final_column:{type:"string"}}},"routing-sequential":{params:{source:{type:"node",geometry:["point"]},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"},order_column:{type:"string",optional:!0,"default-value":"cartodb_id"},order_type:{type:"enum",values:["asc","desc"],optional:!0,"default-value":"asc"}}},"routing-to-layer-all-to-all":{params:{source:{type:"node",geometry:["point"]},source_column:{type:"string"},target:{type:"node",geometry:["point"]},target_column:{type:"string"},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"},closest:{type:"boolean"}}},"routing-to-single-point":{params:{source:{type:"node",geometry:["point"]},mode:{type:"enum",values:["car","walk","bicycle","public_transport"]},destination_longitude:{type:"number"},destination_latitude:{type:"number"},units:{type:"enum",values:["kilometers","miles"],optional:!0,"default-value":"kilometers"}}},sampling:{params:{source:{type:"node",geometry:["*"]},sampling:{type:"number"},seed:{type:"number",optional:!0}}},source:{params:{query:{type:"string"}}},"spatial-markov-trend":{params:{source:{type:"node",geometry:["*"]},time_columns:{type:"array"},num_classes:{type:"number",optional:!0,"default-value":5},weight_type:{type:"string",optional:!0,"default-value":"knn"},num_ngbrs:{type:"number",optional:!0,"default-value":5},permutations:{type:"number",optional:!0,"default-value":0},geom_col:{type:"string",optional:!0,"default-value":"the_geom"},id_col:{type:"string",optional:!0,"default-value":"cartodb_id"}}},"trade-area":{params:{source:{type:"node",geometry:["point"]},kind:{type:"enum",values:["walk","car"]},time:{type:"number"},isolines:{type:"number"},dissolved:{type:"boolean"}}},"weighted-centroid":{params:{source:{type:"node",geometry:["*"]},weight_column:{type:"string"},category_column:{type:"string",optional:!0},aggregation:{type:"string",optional:!0,"default-value":"count"},aggregation_column:{type:"string",optional:!0}}}}}},function(e,t,n){var r={"./0.59.4/reference.json":125};function i(e){var t=o(e);return n(t)}function o(e){var t=r[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=126},function(e,t){e.exports.versions=["0.1.0","0.2.0","0.3.0","0.4.0","0.6.0","0.7.0","0.9.0","0.10.0","0.14.0","0.15.0","0.16.0","0.17.0","0.18.0","0.19.0","0.20.0","0.21.0","0.22.0","0.23.0","0.26.0","0.27.0","0.29.0","0.33.0","0.34.0","0.37.0","0.37.1","0.38.0","0.40.0","0.41.0","0.43.0","0.44.0","0.47.0","0.51.0","0.52.0","0.54.0","0.55.0","0.55.1","0.58.1","0.59.3","0.59.4"],e.exports.target="0.59.4"},function(e,t,n){"use strict";var r=n(42),i=n(124);e.exports.getVersion=r.getVersion,e.exports.versions=r.versions,e.exports.AnalysisGraph=i},function(e,t,n){"use strict";var r=n(0),i=n(28);e.exports={serialize:function(e,t){return function(e){var t={};return r.reduce(e,function(n,i){return t[i.get("id")]||function(e,t){return r.any(t,function(t){return!e.equals(t)&&t.findAnalysisById(e.get("id"))})}(i,e)||(t[i.get("id")]=!0,n.push(i.toJSON())),n},[])}(i.getAnalysisList(e,t))}}},function(e,t,n){"use strict";var r=n(129),i=n(123),o=n(122);e.exports={serialize:function(e,t){return{buffersize:{mvt:0},layers:o.serialize(e),dataviews:i.serialize(t),analyses:r.serialize(e,t)}}}},function(e,t,n){var r,i,o;
/*!
(c) 2012 Uzi Kilon, Splunk Inc.
Backbone Poller 1.1.4
https://github.com/uzikilon/backbone-poller
Backbone Poller may be freely distributed under the MIT license.
*/
/*!
(c) 2012 Uzi Kilon, Splunk Inc.
Backbone Poller 1.1.4
https://github.com/uzikilon/backbone-poller
Backbone Poller may be freely distributed under the MIT license.
*/
!function(a,s){"use strict";i=[n(0),n(1)],void 0===(o="function"==typeof(r=function(e,t){var n={delay:1e3,condition:function(){return!0}},r=["start","stop","fetch","success","error","complete"],i=[];var o={get:function(t,n){var r=function(t){return e.find(i,function(e){return e.model===t})}(t);return r?r.set(n):(r=new a(t,n),i.push(r)),n&&!0===n.autostart&&r.start({silent:!0}),r},size:function(){return i.length},reset:function(){for(;i.length;)i[0].destroy()}};function a(n,r){this.model=n,this.cid=e.uniqueId("poller"),this.set(r),this.model instanceof t.Model&&this.listenTo(this.model,"destroy",this.destroy)}function s(t){if(p(t)){var n=e.extend({},t.options,{success:function(e,n){t.trigger("success",e,n),c(t)},error:function(e,n){t.options.continueOnError?(t.trigger("error",e,n),c(t)):(t.stop({silent:!0}),t.trigger("error",e,n))}});t.trigger("fetch",t.model),t.xhr=t.model.fetch(n)}}e.extend(a.prototype,t.Events,{set:function(t){return this.options=e.extend({},n,t||{}),this.options.flush&&this.off(),e.each(r,e.bind(function(t){var n=this.options[t];e.isFunction(n)&&(this.off(t,n,this),this.on(t,n,this))},this)),this.stop({silent:!0})},start:function(t){return this.active()||(t&&t.silent||this.trigger("start",this.model),this.options.active=!0,this.options.delayed?c(this,e.isNumber(this.options.delayed)&&this.options.delayed):s(this)),this},stop:function(e){return e&&e.silent||this.trigger("stop",this.model),this.options.active=!1,this.xhr&&this.xhr.abort&&this.xhr.abort(),this.xhr=null,clearTimeout(this.timeoutId),this.timeoutId=null,this},active:function(){return!0===this.options.active},destroy:function(){var t=e.indexOf(i,this);t>-1&&(this.stop().stopListening().off(),i.splice(t,1))}});var u={};function l(t){if(e.isNumber(t.options.delay))return t.options.delay;var n=t.options.delay[0],r=t.options.delay[1],i=t.options.delay[2]||2;u[t.cid]?e.isFunction(i)?u[t.cid]=i(u[t.cid]):u[t.cid]*=i:u[t.cid]=1;var o=Math.round(n*u[t.cid]);return r&&r>0&&(o=Math.min(o,r)),o}function c(t,n){p(t)&&(t.timeoutId=e.delay(s,n||l(t),t))}function p(e){return!!e.options.active&&(!0===e.options.condition(e.model)||(e.stop({silent:!0}),e.trigger("complete",e.model),!1))}return o.getDelay=l,o.prototype=a.prototype,o})?r.apply(t,i):r)||(e.exports=o)}()},function(e,t,n){"use strict";var r=n(0),i=n(131);function o(){this._pollers=[]}o.CONFIG={START_DELAY:1e3,MAX_DELAY:1/0,DELAY_MULTIPLIER:1.5},o.prototype.resetAnalysisNodes=function(e){this.reset(),r.each(e,function(e){this._poll(e)},this)},o.prototype._poll=function(e){this._canBePolled(e)&&this._createPoller(e).start()},o.prototype._canBePolled=function(e){return e.url()&&!e.isDone()},o.prototype._findPoller=function(e){return r.find(this._pollers,function(t){return t.model===e})},o.prototype._createPoller=function(e){var t={delay:[o.CONFIG.START_DELAY,o.CONFIG.MAX_DELAY,o.CONFIG.DELAY_MULTIPLIER],condition:function(e){return!e.isDone()}},n=i.get(e,t);return this._pollers.push(n),n},o.prototype.reset=function(){i.reset(),this._pollers=[]},e.exports=o},function(e,t,n){"use strict";e.exports={track:function(e){if(window.trackJs)try{var t=e?e.message+" - code: "+e.errorCode:JSON.stringify(e);window.trackJs.track(new Error(t))}catch(e){}}}},function(e,t,n){"use strict";e.exports={layer:{"non-valid-source":{messageRegex:/nonValidSource/,friendlyMessage:'The given object is not a valid source. See "carto.source.Base".'},"non-valid-style":{messageRegex:/nonValidStyle/,friendlyMessage:'The given object is not a valid style. See "carto.style.Base".'},"non-valid-columns":{messageRegex:/nonValidColumns/,friendlyMessage:"The given object is not a valid array of string columns."},"source-with-different-client":{messageRegex:/differentSourceClient/,friendlyMessage:"A layer can't have a source which belongs to a different client."},"style-with-different-client":{messageRegex:/differentStyleClient/,friendlyMessage:"A layer can't have a style which belongs to a different client."},"wrong-interactivity-columns":{messageRegex:/wrongInteractivityColumns\[(.+)\]#(.+)$/,friendlyMessage:"Columns [$0] set on `$1` do not match the columns set in aggregation options."}},source:{"query-required":{messageRegex:/requiredQuery/,friendlyMessage:"SQL Source must have a SQL query."},"query-string":{messageRegex:/requiredString/,friendlyMessage:"SQL Query must be a string."},"no-dataset-name":{messageRegex:/noDatasetName/,friendlyMessage:"Table name is required."},"dataset-string":{messageRegex:/requiredDatasetString$/,friendlyMessage:"Table name must be a string."},"dataset-required":{messageRegex:/requiredDataset$/,friendlyMessage:"Table name must be not empty."}},style:{"required-css":{messageRegex:/requiredCSS$/,friendlyMessage:"CartoCSS is required."},"css-string":{messageRegex:/requiredCSSString$/,friendlyMessage:"CartoCSS must be a string."}},client:{"bad-layer-type":{messageRegex:/badLayerType/,friendlyMessage:"The given object is not a layer."},"index-number":{messageRegex:/indexNumber/,friendlyMessage:"index property must be a number."},"index-out-of-range":{messageRegex:/indexOutOfRange/,friendlyMessage:"index is out of range."},"api-key-required":{messageRegex:/apiKeyRequired/,friendlyMessage:"apiKey property is required."},"api-key-string":{messageRegex:/apiKeyString/,friendlyMessage:"apiKey property must be a string."},"username-required":{messageRegex:/usernameRequired/,friendlyMessage:"username property is required."},"username-string":{messageRegex:/usernameString/,friendlyMessage:"username property must be a string."},"non-valid-server-url":{messageRegex:/nonValidServerURL/,friendlyMessage:"serverUrl is not a valid URL."},"non-matching-server-url":{messageRegex:/serverURLDoesntMatchUsername/,friendlyMessage:"serverUrl doesn't match the username."},"duplicated-layer-id":{messageRegex:/duplicatedLayerId/,friendlyMessage:"A layer with the same ID already exists in the client."}},dataview:{"source-required":{messageRegex:/sourceRequired/,friendlyMessage:"Source property is required."},"column-required":{messageRegex:/columnRequired/,friendlyMessage:"Column property is required."},"column-string":{messageRegex:/columnString/,friendlyMessage:"Column property must be a string."},"empty-column":{messageRegex:/emptyColumn/,friendlyMessage:"Column property must be not empty."},"filter-required":{messageRegex:/filterRequired/,friendlyMessage:"Filter property is required."},"time-series-options-required":{messageRegex:/timeSeriesOptionsRequired/,friendlyMessage:"Options object to create a time series dataview is required."},"time-series-invalid-aggregation":{messageRegex:/timeSeriesInvalidAggregation/,friendlyMessage:"Time aggregation must be a valid value. Use carto.dataview.timeAggregation."},"time-series-invalid-offset":{messageRegex:/timeSeriesInvalidOffset/,friendlyMessage:"Offset must an integer value between -12 and 14."},"time-series-invalid-uselocaltimezone":{messageRegex:/timeSeriesInvalidUselocaltimezone/,friendlyMessage:"useLocalTimezone must be a boolean value."},"histogram-options-required":{messageRegex:/histogramOptionsRequired/,friendlyMessage:"Options object to create a histogram dataview is required."},"histogram-invalid-bins":{messageRegex:/histogramInvalidBins/,friendlyMessage:"Bins must be a positive integer value."},"histogram-invalid-start-end":{messageRegex:/histogramInvalidStartEnd/,friendlyMessage:"Both start and end values must be a number or null."},"formula-options-required":{messageRegex:/formulaOptionsRequired/,friendlyMessage:"Formula dataview options are not defined."},"formula-invalid-operation":{messageRegex:/formulaInvalidOperation/,friendlyMessage:"Operation for formula dataview is not valid. Use carto.operation"},"category-options-required":{messageRegex:/categoryOptionsRequired/,friendlyMessage:"Category dataview options are not defined."},"category-limit-required":{messageRegex:/categoryLimitRequired/,friendlyMessage:"Limit for category dataview is required."},"category-limit-number":{messageRegex:/categoryLimitNumber/,friendlyMessage:"Limit for category dataview must be a number."},"category-limit-positive":{messageRegex:/categoryLimitPositive/,friendlyMessage:"Limit for category dataview must be greater than 0."},"category-invalid-operation":{messageRegex:/categoryInvalidOperation/,friendlyMessage:"Operation for category dataview is not valid. Use carto.operation"},"category-operation-required":{messageRegex:/categoryOperationRequired/,friendlyMessage:"Operation column for category dataview is required."},"category-operation-string":{messageRegex:/categoryOperationString/,friendlyMessage:"Operation column for category dataview must be a string."},"category-operation-empty":{messageRegex:/categoryOperationEmpty/,friendlyMessage:"Operation column for category dataview must be not empty."}},filter:{"invalid-bounds-object":{messageRegex:/invalidBoundsObject/,friendlyMessage:"Bounds object is not valid. Use a carto.filter.Bounds object"},"column-required":{messageRegex:/columnRequired/,friendlyMessage:"Column property is required."},"column-string":{messageRegex:/columnString/,friendlyMessage:"Column property must be a string."},"empty-column":{messageRegex:/emptyColumn/,friendlyMessage:"Column property must be not empty."},"invalid-filter":{messageRegex:/invalidFilter(.+)/,friendlyMessage:"'$0' is not a valid filter. Please check documentation."},"invalid-option":{messageRegex:/invalidOption(.+)/,friendlyMessage:"'$0' is not a valid option for this filter."},"wrong-filter-type":{messageRegex:/wrongFilterType/,friendlyMessage:"Filters need to extend from carto.filter.SQLBase. Please use carto.filter.Category or carto.filter.Range."},"invalid-parameter-type":{messageRegex:/invalidParameterType(.+)/,friendlyMessage:"Invalid parameter type for '$0'. Please check filters documentation."}},aggregation:{"threshold-required":{messageRegex:/thresholdRequired/,friendlyMessage:"Aggregation threshold is required."},"invalid-threshold":{messageRegex:/invalidThreshold/,friendlyMessage:"Aggregation threshold must be an integer value greater than 0."},"resolution-required":{messageRegex:/resolutionRequired/,friendlyMessage:"Aggregation resolution is required."},"invalid-resolution":{messageRegex:/invalidResolution/,friendlyMessage:"Aggregation resolution must be 0.5, 1 or powers of 2 up to 256 (2, 4, 8, 16, 32, 64, 128, 256)."},"invalid-placement":{messageRegex:/invalidPlacement/,friendlyMessage:"Aggregation placement is not valid. Must be one of these values: `point-sample`, `point-grid`, `centroid`"},"column-function-required":{messageRegex:/columnFunctionRequired(.+)$/,friendlyMessage:"Aggregation function for column '$0' is required."},"invalid-column-function":{messageRegex:/invalidColumnFunction(.+)$/,friendlyMessage:"Aggregation function for column '$0' is not valid. Use carto.aggregation.function"},"column-aggregated-column-required":{messageRegex:/columnAggregatedColumnRequired(.+)$/,friendlyMessage:"Column to be aggregated to '$0' is required."},"invalid-column-aggregated-column":{messageRegex:/invalidColumnAggregatedColumn(.+)$/,friendlyMessage:"Column to be aggregated to '$0' must be a string."}}}},function(e,t,n){"use strict";e.exports={}},function(e,t,n){"use strict";e.exports={analysis:{"sql-syntax-error":{messageRegex:/^syntax error/},"invalid-dataset":{messageRegex:/relation (.+) does not exist/,friendlyMessage:"Invalid dataset name used. Dataset $0 does not exist."},"column-does-not-exist":{messageRegex:/column (.+) does not exist/,friendlyMessage:"Invalid column name. Column $0 does not exist."},"analysis-requires-authentication":{messageRegex:/^Analysis requires authentication with API key/}},generic:{},limit:{"over-platform-limits":{messageRegex:/^You are over platform's limits/},"generic-limit-error":{messageRegex:/.*/,friendlyMessage:"The server is taking too long to respond, due to poor conectivity or a temporary error with our servers. Please try again soon."}},tile:{"generic-tile-error":{messageRegex:/.*/,friendlyMessage:"Some tiles might not be rendering correctly."}},layer:{"column-does-not-exist":{messageRegex:/column (.+) does not exist/,friendlyMessage:"Invalid column name. Column $0 does not exist."},"unrecognized-rule":{messageRegex:/Unrecognized rule: (.+)/,friendlyMessage:'Unrecognized rule "$0"'},"generic-layer-error":{messageRegex:/.*/}},dataview:{"formula-does-not-support-operation":{messageRegex:/Formula does not support (.+) operation/},"column-does-not-exist":{messageRegex:/column (.+) does not exist/},"permission-denied":{messageRegex:/permission denied for (.+)/},"wrong-type-column-used-in-time-series":{messageRegex:/function date_part\(unknown, (.+)\) does not exist/,friendlyMessage:"Your time series column type is $0. Please use a date type."},"invalid-aggregation-value":{messageRegex:/Invalid aggregation value. Valid ones: auto, minute, hour, day, week, month, quarter, year, decade, century, millennium/}},auth:{forbidden:{messageRegex:/^Forbidden$/,friendlyMessage:"Forbidden. API key does not grant access."}}}},function(e,t,n){"use strict";var r=n(136),i=n(135),o=n(134);e.exports={ajax:i,windshaft:r,validation:o}},function(e,t,n){"use strict";var r=n(0),i=n(137);function o(e,t){if(!t.friendlyMessage)return e.message;var n=e.message&&e.message.match(t.messageRegex);if(n&&n.length>1){var r=t.friendlyMessage.replace("$0",n[1]);return n.length>2&&(r=r.replace("$1",n[2])),r}return t.friendlyMessage}function a(e,t){var n=[];return n.push(e&&e.origin),n.push(e&&e.type),n.push(t),(n=r.compact(n)).join(":")}e.exports={getExtraFields:function(e){var t=function(e,t){for(var n,i=r.keys(t),s=0;s<i.length;s++){if(n=i[s],!(t[n].messageRegex instanceof RegExp))throw new Error("MessageRegex on "+n+" is not a RegExp.");if(t[n].messageRegex.test(e.message))return{friendlyMessage:o(e,t[n]),errorCode:a(e,n)}}return{friendlyMessage:e.message||"",errorCode:a(e,"unknown-error")}}(e,function(e){return i[e.origin]&&i[e.origin][e.type]}(e));return{friendlyMessage:t.friendlyMessage,errorCode:t.errorCode}}}},function(e,t,n){"use strict";var r=n(0),i=n(1),o=n(3),a=n(43),s=n(13),u=n(39),l=n(106),c=n(25).version,p=n(5),h=n(6);function f(e){return new p("client",e)}var d="https://{username}.carto.com";function m(e){e.serverUrl=(e.serverUrl||d).replace(/{username}/,e.username||""),function(e){(function(e){if(!e)throw f("apiKeyRequired");if(!r.isString(e))throw f("apiKeyString")})(e.apiKey),function(e){if(!e)throw f("usernameRequired");if(!r.isString(e))throw f("usernameString")}(e.username),e.serverUrl&&function(e,t){if(!e.match(/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:\/?#[\]@!\$&'\(\)\*\+,;=.]+$/))throw f("nonValidServerURL");if(e.indexOf(t)<0)throw f("serverURLDoesntMatchUsername")}(e.serverUrl,e.username)}(e),this._layers=new l,this._dataviews=[],this._engine=new a({apiKey:e.apiKey,username:e.username,serverUrl:e.serverUrl,client:"js-"+c}),this._bindEngine(this._engine)}function _(e){if(!(e instanceof u))throw f("badLayerType")}r.extend(m.prototype,i.Events),m.prototype.addLayer=function(e){return this.addLayers([e])},m.prototype.addLayers=function(e){return e.forEach(this._addLayer,this),this._reload()},m.prototype.removeLayer=function(e){return this.removeLayers([e])},m.prototype.removeLayers=function(e){return e.slice(0).forEach(this._removeLayer,this),this._reload()},m.prototype.moveLayer=function(e,t){var n=this._layers.indexOf(e);return this._moveLayer(e,t),n===t?Promise.resolve():this._reload()},m.prototype.getLayers=function(){return this._layers.toArray()},m.prototype.addDataview=function(e){return this.addDataviews([e])},m.prototype.addDataviews=function(e){return e.forEach(this._addDataview,this),this._reload()},m.prototype.removeDataview=function(e){var t=this._dataviews.indexOf(e);return-1===t?Promise.resolve():(this._dataviews.splice(t,1),this._engine.removeDataview(e.$getInternalModel()),e.disable(),this._reload())},m.prototype.getDataviews=function(){return this._dataviews},m.prototype.getLeafletLayer=function(e){if(h.isLeafletLoaded(),!this._leafletLayer){var t=n(105);this._leafletLayer=new t(this._layers,this._engine,e)}return this._leafletLayer},m.prototype.getGoogleMapsMapType=function(e){if(h.isGoogleMapsLoaded(),!this._gmapsMapType){var t=n(82);this._gmapsMapType=new t(this._layers,this._engine,e)}return this._gmapsMapType},m.prototype._reload=function(){return this._engine.reload().then(function(){return Promise.resolve()}).catch(function(e){return Promise.reject(new o(e))})},m.prototype._addLayer=function(e,t){_(e),this._checkDuplicatedLayerId(e),this._layers.add(e),e.$setClient(this),e.$setEngine(this._engine),this._engine.addLayer(e.$getInternalModel())},m.prototype._removeLayer=function(e){_(e),this._layers.remove(e),this._engine.removeLayer(e.$getInternalModel())},m.prototype._moveLayer=function(e,t){_(e),function(e,t){if(!r.isNumber(e))throw f("indexNumber");if(e<0||e>=t)throw f("indexOutOfRange")}(t,this._layers.size()),this._layers.move(e,t),this._engine.moveLayer(e.$getInternalModel(),t)},m.prototype._addDataview=function(e,t){this._dataviews.push(e),e.$setEngine(this._engine),this._engine.addDataview(e.$getInternalModel())},m.prototype._bindEngine=function(e){e.on(a.Events.RELOAD_SUCCESS,function(){this.trigger(s.SUCCESS)}.bind(this)),e.on(a.Events.RELOAD_ERROR,function(e){this.trigger(s.ERROR,new o(e,{layers:this._layers}))}.bind(this)),e.on(a.Events.LAYER_ERROR,function(e){this.trigger(s.ERROR,new o(e))}.bind(this))},m.prototype._checkDuplicatedLayerId=function(e){if(this._layers.findById(e.getId()))throw f("duplicatedLayerId")},e.exports=m},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,l=[],c=!1,p=-1;function h(){c&&u&&(c=!1,u.length?l=u.concat(l):p=-1,l.length&&f())}function f(){if(!c){var e=s(h);c=!0;for(var t=l.length;t;){for(u=l,l=[];++p<t;)u&&u[p].run();p=-1,t=l.length}u=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new d(e,t)),1!==l.length||c||s(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i,o,a,s,u=1,l={},c=!1,p=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick(function(){d(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){d(e.data)},r=function(e){o.port2.postMessage(e)}):p&&"onreadystatechange"in p.createElement("script")?(i=p.documentElement,r=function(e){var t=p.createElement("script");t.onreadystatechange=function(){d(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):r=function(e){setTimeout(d,0,e)}:(a="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&d(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),r=function(t){e.postMessage(a+t,"*")}),h.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return l[u]=i,r(u),u++},h.clearImmediate=f}function f(e){delete l[e]}function d(e){if(c)setTimeout(d,0,e);else{var t=l[e];if(t){c=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{f(e),c=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(29),n(140))},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(141),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(29))},function(e,t,n){(function(t){!function(n){var r=setTimeout;function i(){}function o(e){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],p(e,this)}function a(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,o._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(e){return void u(t.promise,e)}s(t.promise,r)}else(1===e._state?s:u)(t.promise,e._value)})):e._deferreds.push(t)}function s(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof o)return e._state=3,e._value=t,void l(e);if("function"==typeof n)return void p((r=n,i=t,function(){r.apply(i,arguments)}),e)}e._state=1,e._value=t,l(e)}catch(t){u(e,t)}var r,i}function u(e,t){e._state=2,e._value=t,l(e)}function l(e){2===e._state&&0===e._deferreds.length&&o._immediateFn(function(){e._handled||o._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)a(e,e._deferreds[t]);e._deferreds=null}function c(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function p(e,t){var n=!1;try{e(function(e){n||(n=!0,s(t,e))},function(e){n||(n=!0,u(t,e))})}catch(e){if(n)return;n=!0,u(t,e)}}o.prototype.catch=function(e){return this.then(null,e)},o.prototype.then=function(e,t){var n=new this.constructor(i);return a(this,new c(e,t,n)),n},o.all=function(e){return new o(function(t,n){if(!e||void 0===e.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var i=r.length;function o(e,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(t){o(e,t)},n)}r[e]=a,0==--i&&t(r)}catch(e){n(e)}}for(var a=0;a<r.length;a++)o(a,r[a])})},o.resolve=function(e){return e&&"object"==typeof e&&e.constructor===o?e:new o(function(t){t(e)})},o.reject=function(e){return new o(function(t,n){n(e)})},o.race=function(e){return new o(function(t,n){for(var r=0,i=e.length;r<i;r++)e[r].then(t,n)})},o._immediateFn="function"==typeof t&&function(e){t(e)}||function(e){r(e,0)},o._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},o._setImmediateFn=function(e){o._immediateFn=e},o._setUnhandledRejectionFn=function(e){o._unhandledRejectionFn=e},void 0!==e&&e.exports?e.exports=o:n.Promise||(n.Promise=o)}(this)}).call(this,n(142).setImmediate)},function(e,t){!function(e){"use strict";if(!e.fetch){var t={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(t.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],r=function(e){return e&&DataView.prototype.isPrototypeOf(e)},i=ArrayBuffer.isView||function(e){return e&&n.indexOf(Object.prototype.toString.call(e))>-1};c.prototype.append=function(e,t){e=s(e),t=u(t);var n=this.map[e];this.map[e]=n?n+","+t:t},c.prototype.delete=function(e){delete this.map[s(e)]},c.prototype.get=function(e){return e=s(e),this.has(e)?this.map[e]:null},c.prototype.has=function(e){return this.map.hasOwnProperty(s(e))},c.prototype.set=function(e,t){this.map[s(e)]=u(t)},c.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},c.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),l(e)},c.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),l(e)},c.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),l(e)},t.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);var o=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];_.prototype.clone=function(){return new _(this,{body:this._bodyInit})},m.call(_.prototype),m.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},v.error=function(){var e=new v(null,{status:0,statusText:""});return e.type="error",e};var a=[301,302,303,307,308];v.redirect=function(e,t){if(-1===a.indexOf(t))throw new RangeError("Invalid status code");return new v(null,{status:t,headers:{location:e}})},e.Headers=c,e.Request=_,e.Response=v,e.fetch=function(e,n){return new Promise(function(r,i){var o=new _(e,n),a=new XMLHttpRequest;a.onload=function(){var e,t,n={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new c,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}}),t)};n.url="responseURL"in a?a.responseURL:n.headers.get("X-Request-URL");var i="response"in a?a.response:a.responseText;r(new v(i,n))},a.onerror=function(){i(new TypeError("Network request failed"))},a.ontimeout=function(){i(new TypeError("Network request failed"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&t.blob&&(a.responseType="blob"),o.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),a.send(void 0===o._bodyInit?null:o._bodyInit)})},e.fetch.polyfill=!0}function s(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function u(e){return"string"!=typeof e&&(e=String(e)),e}function l(e){var n={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t.iterable&&(n[Symbol.iterator]=function(){return n}),n}function c(e){this.map={},e instanceof c?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function p(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function h(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function f(e){var t=new FileReader,n=h(t);return t.readAsArrayBuffer(e),n}function d(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(t.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(t.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(t.arrayBuffer&&t.blob&&r(e))this._bodyArrayBuffer=d(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!t.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!i(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=d(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},t.blob&&(this.blob=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(f)}),this.text=function(){var e,t,n,r=p(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=h(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},t.formData&&(this.formData=function(){return this.text().then(y)}),this.json=function(){return this.text().then(JSON.parse)},this}function _(e,t){var n,r,i=(t=t||{}).body;if(e instanceof _){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new c(e.headers)),this.method=e.method,this.mode=e.mode,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new c(t.headers)),this.method=(n=t.method||this.method||"GET",r=n.toUpperCase(),o.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function y(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function v(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new c(t.headers),this.url=t.url||"",this._initBody(e)}}("undefined"!=typeof self?self:this)},function(e,t,n){"use strict";n(144);var r=n(143);window.Promise||(window.Promise=r);var i=n(139),o=n(77),a=n(74),s=n(22),u=n(72),l=n(54),c=n(13),p=n(4),h={version:n(25).version,ATTRIBUTION:p.ATTRIBUTION,Client:i,source:o,style:a,layer:s,dataview:u,filter:l,events:c,operation:p.operation};e.exports=h}])},e.exports=r()},function(e,t,n){"use strict";var r=n(35),i=n(89),o=Object.prototype.toString;function a(e){return"[object Array]"===o.call(e)}function s(e){return null!==e&&"object"==typeof e}function u(e){return"[object Function]"===o.call(e)}function l(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),a(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:a,isArrayBuffer:function(e){return"[object ArrayBuffer]"===o.call(e)},isBuffer:i,isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===o.call(e)},isFile:function(e){return"[object File]"===o.call(e)},isBlob:function(e){return"[object Blob]"===o.call(e)},isFunction:u,isStream:function(e){return s(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:l,merge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]=n}for(var r=0,i=arguments.length;r<i;r++)l(arguments[r],n);return t},extend:function(e,t,n){return l(t,function(t,i){e[i]=n&&"function"==typeof t?r(t,n):t}),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.STORE_LAYERS="@Layers/STORE",i=(t.storeLayers=function(e){return{type:r,layers:e}},t.ADD_LAYER="@Layers/ADD"),o=(t.addLayer=function(e){return{type:i,layer:e}},t.SET_MAP="@Map/SET"),a=(t.setMap=function(e){return{type:o,map:e}},t.CHANGE_VIEWPORT="@Map/CHANGE_VIEWPORT"),s=(t.changeViewport=function(e){return{type:a,viewport:e}},t.CHANGE_CARTO_BOUNDINGBOX="@Map/CHANGE_CARTO_BOUNDINGBOX"),u=(t.changeCartoBBox=function(e){return{type:s,boundingbox:e}},t.SET_BBOX="@Filters/SET_BBOX"),l=(t.setBboxFilter=function(e){return{type:u,bbox:e}},t.TOGGLE_LAYER="@Layers/TOGGLE");t.toggleLayer=function(e){return{type:l,name:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),o=s(i),a=n(2);s(n(0)),s(n(6)),n(9);function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n(120);var l=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={checked:!0},u(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),r(t,[{key:"componentDidMount",value:function(){this.setupConfig(),this.setupChecked()}},{key:"setupConfig",value:function(){this.state.checked;this.widget.checked=this.props.layer.visible}},{key:"setupChecked",value:function(){var e=this;this.setState({checked:this.props.layer.visible}),this.widget.addEventListener("change",function(t){e.setState({checked:t.detail}),!0===t.detail?e.props.layer.layer.show():!1===t.detail&&e.props.layer.layer.hide()})}},{key:"render",value:function(){var e=this;return o.default.createElement("div",null,o.default.createElement("span",{className:"as-display--block"},o.default.createElement("as-switch",{checked:!0,ref:function(t){e.widget=t},label:this.props.layer.name})))}}]),t}();t.default=(0,a.connect)(function(e){return{client:e.client,map:e.map,filters:e.filters,layers:e.layers,viewport:e.viewport,boundingbox:e.boundingbox}},function(e){return{}})(l)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={SQL_API_URL:"https://mforrest.carto.com/api/v2/sql?",IMPORT_API_URL:"https://mforrest.carto/api/v1/imports",BASEMAP:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager_nolabels/{z}/{x}/{y}.png",BASEMAP_LABELS:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager_only_labels/{z}/{x}/{y}.png",USERNAME:"mforrest",API_KEY:"default_public",CENTER:[33.753707,-84.389363],ZOOM:6}},function(e,t,n){"use strict";var r=n(44),i="object"==typeof self&&self&&self.Object===Object&&self,o=(r.a||i||Function("return this")()).Symbol,a=Object.prototype,s=a.hasOwnProperty,u=a.toString,l=o?o.toStringTag:void 0;var c=function(e){var t=s.call(e,l),n=e[l];try{e[l]=void 0;var r=!0}catch(e){}var i=u.call(e);return r&&(t?e[l]=n:delete e[l]),i},p=Object.prototype.toString;var h=function(e){return p.call(e)},f="[object Null]",d="[object Undefined]",m=o?o.toStringTag:void 0;var _=function(e){return null==e?void 0===e?d:f:m&&m in Object(e)?c(e):h(e)};var y=function(e,t){return function(n){return e(t(n))}}(Object.getPrototypeOf,Object);var v=function(e){return null!=e&&"object"==typeof e},g="[object Object]",b=Function.prototype,x=Object.prototype,w=b.toString,E=x.hasOwnProperty,T=w.call(Object);t.a=function(e){if(!v(e)||_(e)!=g)return!1;var t=y(e);if(null===t)return!0;var n=E.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&w.call(n)==T}},function(e,t,n){"use strict";var r={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o=Object.defineProperty,a=Object.getOwnPropertyNames,s=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,l=Object.getPrototypeOf,c=l&&l(Object);e.exports=function e(t,n,p){if("string"!=typeof n){if(c){var h=l(n);h&&h!==c&&e(t,h,p)}var f=a(n);s&&(f=f.concat(s(n)));for(var d=0;d<f.length;++d){var m=f[d];if(!(r[m]||i[m]||p&&p[m])){var _=u(n,m);try{o(t,m,_)}catch(e){}}}return t}return t}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.r(t);var r=!0,i="Invariant failed";t.default=function(e,t){if(!e)throw r?new Error(i):new Error(i+": "+(t||""))}},function(e,t,n){var r=n(59);e.exports=f,e.exports.parse=o,e.exports.compile=function(e,t){return s(o(e,t))},e.exports.tokensToFunction=s,e.exports.tokensToRegExp=h;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function o(e,t){for(var n,r=[],o=0,a=0,s="",c=t&&t.delimiter||"/";null!=(n=i.exec(e));){var p=n[0],h=n[1],f=n.index;if(s+=e.slice(a,f),a=f+p.length,h)s+=h[1];else{var d=e[a],m=n[2],_=n[3],y=n[4],v=n[5],g=n[6],b=n[7];s&&(r.push(s),s="");var x=null!=m&&null!=d&&d!==m,w="+"===g||"*"===g,E="?"===g||"*"===g,T=n[2]||c,k=y||v;r.push({name:_||o++,prefix:m||"",delimiter:T,optional:E,repeat:w,partial:x,asterisk:!!b,pattern:k?l(k):b?".*":"[^"+u(T)+"]+?"})}}return a<e.length&&(s+=e.substr(a)),s&&r.push(s),r}function a(e){return encodeURI(e).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function s(e){for(var t=new Array(e.length),n=0;n<e.length;n++)"object"==typeof e[n]&&(t[n]=new RegExp("^(?:"+e[n].pattern+")$"));return function(n,i){for(var o="",s=n||{},u=(i||{}).pretty?a:encodeURIComponent,l=0;l<e.length;l++){var c=e[l];if("string"!=typeof c){var p,h=s[c.name];if(null==h){if(c.optional){c.partial&&(o+=c.prefix);continue}throw new TypeError('Expected "'+c.name+'" to be defined')}if(r(h)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var f=0;f<h.length;f++){if(p=u(h[f]),!t[l].test(p))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'", but received `'+JSON.stringify(p)+"`");o+=(0===f?c.prefix:c.delimiter)+p}}else{if(p=c.asterisk?encodeURI(h).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}):u(h),!t[l].test(p))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but received "'+p+'"');o+=c.prefix+p}}else o+=c}return o}}function u(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function l(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function c(e,t){return e.keys=t,e}function p(e){return e.sensitive?"":"i"}function h(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,o=!1!==n.end,a="",s=0;s<e.length;s++){var l=e[s];if("string"==typeof l)a+=u(l);else{var h=u(l.prefix),f="(?:"+l.pattern+")";t.push(l),l.repeat&&(f+="(?:"+h+f+")*"),a+=f=l.optional?l.partial?h+"("+f+")?":"(?:"+h+"("+f+"))?":h+"("+f+")"}}var d=u(n.delimiter||"/"),m=a.slice(-d.length)===d;return i||(a=(m?a.slice(0,-d.length):a)+"(?:"+d+"(?=$))?"),a+=o?"$":i&&m?"":"(?="+d+"|$)",c(new RegExp("^"+a,p(n)),t)}function f(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return c(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(f(e[i],t,n).source);return c(new RegExp("(?:"+r.join("|")+")",p(n)),t)}(e,t,n):function(e,t,n){return h(o(e,n),t,n)}(e,t,n)}},function(e,t,n){
/* @preserve
 * Leaflet 1.5.1+build.2e3e0ff, a JS library for interactive maps. http://leafletjs.com
 * (c) 2010-2018 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */
!function(e){"use strict";var t=Object.freeze;function n(e){var t,n,r,i;for(n=1,r=arguments.length;n<r;n++)for(t in i=arguments[n])e[t]=i[t];return e}Object.freeze=function(e){return e};var r=Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}();function i(e,t){var n=Array.prototype.slice;if(e.bind)return e.bind.apply(e,n.call(arguments,1));var r=n.call(arguments,2);return function(){return e.apply(t,r.length?r.concat(n.call(arguments)):arguments)}}var o=0;function a(e){return e._leaflet_id=e._leaflet_id||++o,e._leaflet_id}function s(e,t,n){var r,i,o,a;return a=function(){r=!1,i&&(o.apply(n,i),i=!1)},o=function(){r?i=arguments:(e.apply(n,arguments),setTimeout(a,t),r=!0)}}function u(e,t,n){var r=t[1],i=t[0],o=r-i;return e===r&&n?e:((e-i)%o+o)%o+i}function l(){return!1}function c(e,t){return t=void 0===t?6:t,+(Math.round(e+"e+"+t)+"e-"+t)}function p(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function h(e){return p(e).split(/\s+/)}function f(e,t){for(var n in e.hasOwnProperty("options")||(e.options=e.options?r(e.options):{}),t)e.options[n]=t[n];return e.options}function d(e,t,n){var r=[];for(var i in e)r.push(encodeURIComponent(n?i.toUpperCase():i)+"="+encodeURIComponent(e[i]));return(t&&-1!==t.indexOf("?")?"&":"?")+r.join("&")}var m=/\{ *([\w_-]+) *\}/g;function _(e,t){return e.replace(m,function(e,n){var r=t[n];if(void 0===r)throw new Error("No value provided for variable "+e);return"function"==typeof r&&(r=r(t)),r})}var y=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function v(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}var g="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function b(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}var x=0;function w(e){var t=+new Date,n=Math.max(0,16-(t-x));return x=t+n,window.setTimeout(e,n)}var E=window.requestAnimationFrame||b("RequestAnimationFrame")||w,T=window.cancelAnimationFrame||b("CancelAnimationFrame")||b("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)};function k(e,t,n){if(!n||E!==w)return E.call(window,i(e,t));e.call(t)}function C(e){e&&T.call(window,e)}var M=(Object.freeze||Object)({freeze:t,extend:n,create:r,bind:i,lastId:o,stamp:a,throttle:s,wrapNum:u,falseFn:l,formatNum:c,trim:p,splitWords:h,setOptions:f,getParamString:d,template:_,isArray:y,indexOf:v,emptyImageUrl:g,requestFn:E,cancelFn:T,requestAnimFrame:k,cancelAnimFrame:C});function P(){}P.extend=function(e){var t=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},i=t.__super__=this.prototype,o=r(i);for(var a in o.constructor=t,t.prototype=o,this)this.hasOwnProperty(a)&&"prototype"!==a&&"__super__"!==a&&(t[a]=this[a]);return e.statics&&(n(t,e.statics),delete e.statics),e.includes&&(function(e){if("undefined"!=typeof L&&L&&L.Mixin){e=y(e)?e:[e];for(var t=0;t<e.length;t++)e[t]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(e.includes),n.apply(null,[o].concat(e.includes)),delete e.includes),o.options&&(e.options=n(r(o.options),e.options)),n(o,e),o._initHooks=[],o.callInitHooks=function(){if(!this._initHooksCalled){i.callInitHooks&&i.callInitHooks.call(this),this._initHooksCalled=!0;for(var e=0,t=o._initHooks.length;e<t;e++)o._initHooks[e].call(this)}},t},P.include=function(e){return n(this.prototype,e),this},P.mergeOptions=function(e){return n(this.prototype.options,e),this},P.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),n="function"==typeof e?e:function(){this[e].apply(this,t)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var A={on:function(e,t,n){if("object"==typeof e)for(var r in e)this._on(r,e[r],t);else{e=h(e);for(var i=0,o=e.length;i<o;i++)this._on(e[i],t,n)}return this},off:function(e,t,n){if(e)if("object"==typeof e)for(var r in e)this._off(r,e[r],t);else{e=h(e);for(var i=0,o=e.length;i<o;i++)this._off(e[i],t,n)}else delete this._events;return this},_on:function(e,t,n){this._events=this._events||{};var r=this._events[e];r||(r=[],this._events[e]=r),n===this&&(n=void 0);for(var i={fn:t,ctx:n},o=r,a=0,s=o.length;a<s;a++)if(o[a].fn===t&&o[a].ctx===n)return;o.push(i)},_off:function(e,t,n){var r,i,o;if(this._events&&(r=this._events[e]))if(t){if(n===this&&(n=void 0),r)for(i=0,o=r.length;i<o;i++){var a=r[i];if(a.ctx===n&&a.fn===t)return a.fn=l,this._firingCount&&(this._events[e]=r=r.slice()),void r.splice(i,1)}}else{for(i=0,o=r.length;i<o;i++)r[i].fn=l;delete this._events[e]}},fire:function(e,t,r){if(!this.listens(e,r))return this;var i=n({},t,{type:e,target:this,sourceTarget:t&&t.sourceTarget||this});if(this._events){var o=this._events[e];if(o){this._firingCount=this._firingCount+1||1;for(var a=0,s=o.length;a<s;a++){var u=o[a];u.fn.call(u.ctx||this,i)}this._firingCount--}}return r&&this._propagateEvent(i),this},listens:function(e,t){var n=this._events&&this._events[e];if(n&&n.length)return!0;if(t)for(var r in this._eventParents)if(this._eventParents[r].listens(e,t))return!0;return!1},once:function(e,t,n){if("object"==typeof e){for(var r in e)this.once(r,e[r],t);return this}var o=i(function(){this.off(e,t,n).off(e,o,n)},this);return this.on(e,t,n).on(e,o,n)},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[a(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[a(e)],this},_propagateEvent:function(e){for(var t in this._eventParents)this._eventParents[t].fire(e.type,n({layer:e.target,propagatedFrom:e.target},e),!0)}};A.addEventListener=A.on,A.removeEventListener=A.clearAllEventListeners=A.off,A.addOneTimeEventListener=A.once,A.fireEvent=A.fire,A.hasEventListeners=A.listens;var S=P.extend(A);function O(e,t,n){this.x=n?Math.round(e):e,this.y=n?Math.round(t):t}var I=Math.trunc||function(e){return e>0?Math.floor(e):Math.ceil(e)};function R(e,t,n){return e instanceof O?e:y(e)?new O(e[0],e[1]):null==e?e:"object"==typeof e&&"x"in e&&"y"in e?new O(e.x,e.y):new O(e,t,n)}function j(e,t){if(e)for(var n=t?[e,t]:e,r=0,i=n.length;r<i;r++)this.extend(n[r])}function z(e,t){return!e||e instanceof j?e:new j(e,t)}function D(e,t){if(e)for(var n=t?[e,t]:e,r=0,i=n.length;r<i;r++)this.extend(n[r])}function B(e,t){return e instanceof D?e:new D(e,t)}function N(e,t,n){if(isNaN(e)||isNaN(t))throw new Error("Invalid LatLng object: ("+e+", "+t+")");this.lat=+e,this.lng=+t,void 0!==n&&(this.alt=+n)}function q(e,t,n){return e instanceof N?e:y(e)&&"object"!=typeof e[0]?3===e.length?new N(e[0],e[1],e[2]):2===e.length?new N(e[0],e[1]):null:null==e?e:"object"==typeof e&&"lat"in e?new N(e.lat,"lng"in e?e.lng:e.lon,e.alt):void 0===t?null:new N(e,t,n)}O.prototype={clone:function(){return new O(this.x,this.y)},add:function(e){return this.clone()._add(R(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(R(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new O(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new O(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=I(this.x),this.y=I(this.y),this},distanceTo:function(e){var t=(e=R(e)).x-this.x,n=e.y-this.y;return Math.sqrt(t*t+n*n)},equals:function(e){return(e=R(e)).x===this.x&&e.y===this.y},contains:function(e){return e=R(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+c(this.x)+", "+c(this.y)+")"}},j.prototype={extend:function(e){return e=R(e),this.min||this.max?(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(e.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(e.y,this.max.y)):(this.min=e.clone(),this.max=e.clone()),this},getCenter:function(e){return new O((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return new O(this.min.x,this.max.y)},getTopRight:function(){return new O(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var t,n;return(e="number"==typeof e[0]||e instanceof O?R(e):z(e))instanceof j?(t=e.min,n=e.max):t=n=e,t.x>=this.min.x&&n.x<=this.max.x&&t.y>=this.min.y&&n.y<=this.max.y},intersects:function(e){e=z(e);var t=this.min,n=this.max,r=e.min,i=e.max,o=i.x>=t.x&&r.x<=n.x,a=i.y>=t.y&&r.y<=n.y;return o&&a},overlaps:function(e){e=z(e);var t=this.min,n=this.max,r=e.min,i=e.max,o=i.x>t.x&&r.x<n.x,a=i.y>t.y&&r.y<n.y;return o&&a},isValid:function(){return!(!this.min||!this.max)}},D.prototype={extend:function(e){var t,n,r=this._southWest,i=this._northEast;if(e instanceof N)t=e,n=e;else{if(!(e instanceof D))return e?this.extend(q(e)||B(e)):this;if(t=e._southWest,n=e._northEast,!t||!n)return this}return r||i?(r.lat=Math.min(t.lat,r.lat),r.lng=Math.min(t.lng,r.lng),i.lat=Math.max(n.lat,i.lat),i.lng=Math.max(n.lng,i.lng)):(this._southWest=new N(t.lat,t.lng),this._northEast=new N(n.lat,n.lng)),this},pad:function(e){var t=this._southWest,n=this._northEast,r=Math.abs(t.lat-n.lat)*e,i=Math.abs(t.lng-n.lng)*e;return new D(new N(t.lat-r,t.lng-i),new N(n.lat+r,n.lng+i))},getCenter:function(){return new N((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new N(this.getNorth(),this.getWest())},getSouthEast:function(){return new N(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){e="number"==typeof e[0]||e instanceof N||"lat"in e?q(e):B(e);var t,n,r=this._southWest,i=this._northEast;return e instanceof D?(t=e.getSouthWest(),n=e.getNorthEast()):t=n=e,t.lat>=r.lat&&n.lat<=i.lat&&t.lng>=r.lng&&n.lng<=i.lng},intersects:function(e){e=B(e);var t=this._southWest,n=this._northEast,r=e.getSouthWest(),i=e.getNorthEast(),o=i.lat>=t.lat&&r.lat<=n.lat,a=i.lng>=t.lng&&r.lng<=n.lng;return o&&a},overlaps:function(e){e=B(e);var t=this._southWest,n=this._northEast,r=e.getSouthWest(),i=e.getNorthEast(),o=i.lat>t.lat&&r.lat<n.lat,a=i.lng>t.lng&&r.lng<n.lng;return o&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e,t){return!!e&&(e=B(e),this._southWest.equals(e.getSouthWest(),t)&&this._northEast.equals(e.getNorthEast(),t))},isValid:function(){return!(!this._southWest||!this._northEast)}},N.prototype={equals:function(e,t){if(!e)return!1;e=q(e);var n=Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng));return n<=(void 0===t?1e-9:t)},toString:function(e){return"LatLng("+c(this.lat,e)+", "+c(this.lng,e)+")"},distanceTo:function(e){return V.distance(this,q(e))},wrap:function(){return V.wrapLatLng(this)},toBounds:function(e){var t=180*e/40075017,n=t/Math.cos(Math.PI/180*this.lat);return B([this.lat-t,this.lng-n],[this.lat+t,this.lng+n])},clone:function(){return new N(this.lat,this.lng,this.alt)}};var F,U={latLngToPoint:function(e,t){var n=this.projection.project(e),r=this.scale(t);return this.transformation._transform(n,r)},pointToLatLng:function(e,t){var n=this.scale(t),r=this.transformation.untransform(e,n);return this.projection.unproject(r)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*Math.pow(2,e)},zoom:function(e){return Math.log(e/256)/Math.LN2},getProjectedBounds:function(e){if(this.infinite)return null;var t=this.projection.bounds,n=this.scale(e),r=this.transformation.transform(t.min,n),i=this.transformation.transform(t.max,n);return new j(r,i)},infinite:!1,wrapLatLng:function(e){var t=this.wrapLng?u(e.lng,this.wrapLng,!0):e.lng,n=this.wrapLat?u(e.lat,this.wrapLat,!0):e.lat,r=e.alt;return new N(n,t,r)},wrapLatLngBounds:function(e){var t=e.getCenter(),n=this.wrapLatLng(t),r=t.lat-n.lat,i=t.lng-n.lng;if(0===r&&0===i)return e;var o=e.getSouthWest(),a=e.getNorthEast(),s=new N(o.lat-r,o.lng-i),u=new N(a.lat-r,a.lng-i);return new D(s,u)}},V=n({},U,{wrapLng:[-180,180],R:6371e3,distance:function(e,t){var n=Math.PI/180,r=e.lat*n,i=t.lat*n,o=Math.sin((t.lat-e.lat)*n/2),a=Math.sin((t.lng-e.lng)*n/2),s=o*o+Math.cos(r)*Math.cos(i)*a*a,u=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return this.R*u}}),W={R:6378137,MAX_LATITUDE:85.0511287798,project:function(e){var t=Math.PI/180,n=this.MAX_LATITUDE,r=Math.max(Math.min(n,e.lat),-n),i=Math.sin(r*t);return new O(this.R*e.lng*t,this.R*Math.log((1+i)/(1-i))/2)},unproject:function(e){var t=180/Math.PI;return new N((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*t,e.x*t/this.R)},bounds:(F=6378137*Math.PI,new j([-F,-F],[F,F]))};function G(e,t,n,r){if(y(e))return this._a=e[0],this._b=e[1],this._c=e[2],void(this._d=e[3]);this._a=e,this._b=t,this._c=n,this._d=r}function Z(e,t,n,r){return new G(e,t,n,r)}G.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return t=t||1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return t=t||1,new O((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}};var H=n({},V,{code:"EPSG:3857",projection:W,transformation:function(){var e=.5/(Math.PI*W.R);return Z(e,.5,-e,.5)}()}),K=n({},H,{code:"EPSG:900913"});function Y(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function X(e,t){var n,r,i,o,a,s,u="";for(n=0,i=e.length;n<i;n++){for(a=e[n],r=0,o=a.length;r<o;r++)s=a[r],u+=(r?"L":"M")+s.x+" "+s.y;u+=t?Me?"z":"x":""}return u||"M0 0"}var $=document.documentElement.style,J="ActiveXObject"in window,Q=J&&!document.addEventListener,ee="msLaunchUri"in navigator&&!("documentMode"in document),te=Ae("webkit"),ne=Ae("android"),re=Ae("android 2")||Ae("android 3"),ie=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),oe=ne&&Ae("Google")&&ie<537&&!("AudioNode"in window),ae=!!window.opera,se=Ae("chrome"),ue=Ae("gecko")&&!te&&!ae&&!J,le=!se&&Ae("safari"),ce=Ae("phantom"),pe="OTransition"in $,he=0===navigator.platform.indexOf("Win"),fe=J&&"transition"in $,de="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!re,me="MozPerspective"in $,_e=!window.L_DISABLE_3D&&(fe||de||me)&&!pe&&!ce,ye="undefined"!=typeof orientation||Ae("mobile"),ve=ye&&te,ge=ye&&de,be=!window.PointerEvent&&window.MSPointerEvent,xe=!(!window.PointerEvent&&!be),we=!window.L_NO_TOUCH&&(xe||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),Ee=ye&&ae,Te=ye&&ue,ke=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ce=!!document.createElement("canvas").getContext,Me=!(!document.createElementNS||!Y("svg").createSVGRect),Pe=!Me&&function(){try{var e=document.createElement("div");e.innerHTML='<v:shape adj="1"/>';var t=e.firstChild;return t.style.behavior="url(#default#VML)",t&&"object"==typeof t.adj}catch(e){return!1}}();function Ae(e){return navigator.userAgent.toLowerCase().indexOf(e)>=0}var Se=(Object.freeze||Object)({ie:J,ielt9:Q,edge:ee,webkit:te,android:ne,android23:re,androidStock:oe,opera:ae,chrome:se,gecko:ue,safari:le,phantom:ce,opera12:pe,win:he,ie3d:fe,webkit3d:de,gecko3d:me,any3d:_e,mobile:ye,mobileWebkit:ve,mobileWebkit3d:ge,msPointer:be,pointer:xe,touch:we,mobileOpera:Ee,mobileGecko:Te,retina:ke,canvas:Ce,svg:Me,vml:Pe}),Oe=be?"MSPointerDown":"pointerdown",Ie=be?"MSPointerMove":"pointermove",Re=be?"MSPointerUp":"pointerup",je=be?"MSPointerCancel":"pointercancel",Le=["INPUT","SELECT","OPTION"],ze={},De=!1,Be=0;function Ne(e,t,n,r){return"touchstart"===t?function(e,t,n){var r=i(function(e){if("mouse"!==e.pointerType&&e.MSPOINTER_TYPE_MOUSE&&e.pointerType!==e.MSPOINTER_TYPE_MOUSE){if(!(Le.indexOf(e.target.tagName)<0))return;zt(e)}Ve(e,t)});e["_leaflet_touchstart"+n]=r,e.addEventListener(Oe,r,!1),De||(document.documentElement.addEventListener(Oe,qe,!0),document.documentElement.addEventListener(Ie,Fe,!0),document.documentElement.addEventListener(Re,Ue,!0),document.documentElement.addEventListener(je,Ue,!0),De=!0)}(e,n,r):"touchmove"===t?function(e,t,n){var r=function(e){(e.pointerType!==e.MSPOINTER_TYPE_MOUSE&&"mouse"!==e.pointerType||0!==e.buttons)&&Ve(e,t)};e["_leaflet_touchmove"+n]=r,e.addEventListener(Ie,r,!1)}(e,n,r):"touchend"===t&&function(e,t,n){var r=function(e){Ve(e,t)};e["_leaflet_touchend"+n]=r,e.addEventListener(Re,r,!1),e.addEventListener(je,r,!1)}(e,n,r),this}function qe(e){ze[e.pointerId]=e,Be++}function Fe(e){ze[e.pointerId]&&(ze[e.pointerId]=e)}function Ue(e){delete ze[e.pointerId],Be--}function Ve(e,t){for(var n in e.touches=[],ze)e.touches.push(ze[n]);e.changedTouches=[e],t(e)}var We=be?"MSPointerDown":xe?"pointerdown":"touchstart",Ge=be?"MSPointerUp":xe?"pointerup":"touchend",Ze="_leaflet_";function He(e,t,n){var r,i,o=!1,a=250;function s(e){var t;if(xe){if(!ee||"mouse"===e.pointerType)return;t=Be}else t=e.touches.length;if(!(t>1)){var n=Date.now(),s=n-(r||n);i=e.touches?e.touches[0]:e,o=s>0&&s<=a,r=n}}function u(e){if(o&&!i.cancelBubble){if(xe){if(!ee||"mouse"===e.pointerType)return;var n,a,s={};for(a in i)n=i[a],s[a]=n&&n.bind?n.bind(i):n;i=s}i.type="dblclick",i.button=0,t(i),r=null}}return e[Ze+We+n]=s,e[Ze+Ge+n]=u,e[Ze+"dblclick"+n]=t,e.addEventListener(We,s,!1),e.addEventListener(Ge,u,!1),e.addEventListener("dblclick",t,!1),this}function Ke(e,t){var n=e[Ze+We+t],r=e[Ze+Ge+t],i=e[Ze+"dblclick"+t];return e.removeEventListener(We,n,!1),e.removeEventListener(Ge,r,!1),ee||e.removeEventListener("dblclick",i,!1),this}var Ye,Xe,$e,Je,Qe,et=_t(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),tt=_t(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),nt="webkitTransition"===tt||"OTransition"===tt?tt+"End":"transitionend";function rt(e){return"string"==typeof e?document.getElementById(e):e}function it(e,t){var n=e.style[t]||e.currentStyle&&e.currentStyle[t];if((!n||"auto"===n)&&document.defaultView){var r=document.defaultView.getComputedStyle(e,null);n=r?r[t]:null}return"auto"===n?null:n}function ot(e,t,n){var r=document.createElement(e);return r.className=t||"",n&&n.appendChild(r),r}function at(e){var t=e.parentNode;t&&t.removeChild(e)}function st(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function ut(e){var t=e.parentNode;t&&t.lastChild!==e&&t.appendChild(e)}function lt(e){var t=e.parentNode;t&&t.firstChild!==e&&t.insertBefore(e,t.firstChild)}function ct(e,t){if(void 0!==e.classList)return e.classList.contains(t);var n=dt(e);return n.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(n)}function pt(e,t){if(void 0!==e.classList)for(var n=h(t),r=0,i=n.length;r<i;r++)e.classList.add(n[r]);else if(!ct(e,t)){var o=dt(e);ft(e,(o?o+" ":"")+t)}}function ht(e,t){void 0!==e.classList?e.classList.remove(t):ft(e,p((" "+dt(e)+" ").replace(" "+t+" "," ")))}function ft(e,t){void 0===e.className.baseVal?e.className=t:e.className.baseVal=t}function dt(e){return e.correspondingElement&&(e=e.correspondingElement),void 0===e.className.baseVal?e.className:e.className.baseVal}function mt(e,t){"opacity"in e.style?e.style.opacity=t:"filter"in e.style&&function(e,t){var n=!1,r="DXImageTransform.Microsoft.Alpha";try{n=e.filters.item(r)}catch(e){if(1===t)return}t=Math.round(100*t),n?(n.Enabled=100!==t,n.Opacity=t):e.style.filter+=" progid:"+r+"(opacity="+t+")"}(e,t)}function _t(e){for(var t=document.documentElement.style,n=0;n<e.length;n++)if(e[n]in t)return e[n];return!1}function yt(e,t,n){var r=t||new O(0,0);e.style[et]=(fe?"translate("+r.x+"px,"+r.y+"px)":"translate3d("+r.x+"px,"+r.y+"px,0)")+(n?" scale("+n+")":"")}function vt(e,t){e._leaflet_pos=t,_e?yt(e,t):(e.style.left=t.x+"px",e.style.top=t.y+"px")}function gt(e){return e._leaflet_pos||new O(0,0)}if("onselectstart"in document)Ye=function(){Pt(window,"selectstart",zt)},Xe=function(){St(window,"selectstart",zt)};else{var bt=_t(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ye=function(){if(bt){var e=document.documentElement.style;$e=e[bt],e[bt]="none"}},Xe=function(){bt&&(document.documentElement.style[bt]=$e,$e=void 0)}}function xt(){Pt(window,"dragstart",zt)}function wt(){St(window,"dragstart",zt)}function Et(e){for(;-1===e.tabIndex;)e=e.parentNode;e.style&&(Tt(),Je=e,Qe=e.style.outline,e.style.outline="none",Pt(window,"keydown",Tt))}function Tt(){Je&&(Je.style.outline=Qe,Je=void 0,Qe=void 0,St(window,"keydown",Tt))}function kt(e){do{e=e.parentNode}while(!(e.offsetWidth&&e.offsetHeight||e===document.body));return e}function Ct(e){var t=e.getBoundingClientRect();return{x:t.width/e.offsetWidth||1,y:t.height/e.offsetHeight||1,boundingClientRect:t}}var Mt=(Object.freeze||Object)({TRANSFORM:et,TRANSITION:tt,TRANSITION_END:nt,get:rt,getStyle:it,create:ot,remove:at,empty:st,toFront:ut,toBack:lt,hasClass:ct,addClass:pt,removeClass:ht,setClass:ft,getClass:dt,setOpacity:mt,testProp:_t,setTransform:yt,setPosition:vt,getPosition:gt,disableTextSelection:Ye,enableTextSelection:Xe,disableImageDrag:xt,enableImageDrag:wt,preventOutline:Et,restoreOutline:Tt,getSizedParentNode:kt,getScale:Ct});function Pt(e,t,n,r){if("object"==typeof t)for(var i in t)Ot(e,i,t[i],n);else{t=h(t);for(var o=0,a=t.length;o<a;o++)Ot(e,t[o],n,r)}return this}var At="_leaflet_events";function St(e,t,n,r){if("object"==typeof t)for(var i in t)It(e,i,t[i],n);else if(t){t=h(t);for(var o=0,a=t.length;o<a;o++)It(e,t[o],n,r)}else{for(var s in e[At])It(e,s,e[At][s]);delete e[At]}return this}function Ot(e,t,n,r){var i=t+a(n)+(r?"_"+a(r):"");if(e[At]&&e[At][i])return this;var o=function(t){return n.call(r||e,t||window.event)},s=o;xe&&0===t.indexOf("touch")?Ne(e,t,o,i):!we||"dblclick"!==t||!He||xe&&se?"addEventListener"in e?"mousewheel"===t?e.addEventListener("onwheel"in e?"wheel":"mousewheel",o,!1):"mouseenter"===t||"mouseleave"===t?(o=function(t){t=t||window.event,Gt(e,t)&&s(t)},e.addEventListener("mouseenter"===t?"mouseover":"mouseout",o,!1)):("click"===t&&ne&&(o=function(e){!function(e,t){var n=e.timeStamp||e.originalEvent&&e.originalEvent.timeStamp,r=Ft&&n-Ft;r&&r>100&&r<500||e.target._simulatedClick&&!e._simulated?Dt(e):(Ft=n,t(e))}(e,s)}),e.addEventListener(t,o,!1)):"attachEvent"in e&&e.attachEvent("on"+t,o):He(e,o,i),e[At]=e[At]||{},e[At][i]=o}function It(e,t,n,r){var i=t+a(n)+(r?"_"+a(r):""),o=e[At]&&e[At][i];if(!o)return this;xe&&0===t.indexOf("touch")?function(e,t,n){var r=e["_leaflet_"+t+n];"touchstart"===t?e.removeEventListener(Oe,r,!1):"touchmove"===t?e.removeEventListener(Ie,r,!1):"touchend"===t&&(e.removeEventListener(Re,r,!1),e.removeEventListener(je,r,!1))}(e,t,i):!we||"dblclick"!==t||!Ke||xe&&se?"removeEventListener"in e?"mousewheel"===t?e.removeEventListener("onwheel"in e?"wheel":"mousewheel",o,!1):e.removeEventListener("mouseenter"===t?"mouseover":"mouseleave"===t?"mouseout":t,o,!1):"detachEvent"in e&&e.detachEvent("on"+t,o):Ke(e,i),e[At][i]=null}function Rt(e){return e.stopPropagation?e.stopPropagation():e.originalEvent?e.originalEvent._stopped=!0:e.cancelBubble=!0,Wt(e),this}function jt(e){return Ot(e,"mousewheel",Rt),this}function Lt(e){return Pt(e,"mousedown touchstart dblclick",Rt),Ot(e,"click",Vt),this}function zt(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this}function Dt(e){return zt(e),Rt(e),this}function Bt(e,t){if(!t)return new O(e.clientX,e.clientY);var n=Ct(t),r=n.boundingClientRect;return new O((e.clientX-r.left)/n.x-t.clientLeft,(e.clientY-r.top)/n.y-t.clientTop)}var Nt=he&&se?2*window.devicePixelRatio:ue?window.devicePixelRatio:1;function qt(e){return ee?e.wheelDeltaY/2:e.deltaY&&0===e.deltaMode?-e.deltaY/Nt:e.deltaY&&1===e.deltaMode?20*-e.deltaY:e.deltaY&&2===e.deltaMode?60*-e.deltaY:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?20*-e.detail:e.detail?e.detail/-32765*60:0}var Ft,Ut={};function Vt(e){Ut[e.type]=!0}function Wt(e){var t=Ut[e.type];return Ut[e.type]=!1,t}function Gt(e,t){var n=t.relatedTarget;if(!n)return!0;try{for(;n&&n!==e;)n=n.parentNode}catch(e){return!1}return n!==e}var Zt=(Object.freeze||Object)({on:Pt,off:St,stopPropagation:Rt,disableScrollPropagation:jt,disableClickPropagation:Lt,preventDefault:zt,stop:Dt,getMousePosition:Bt,getWheelDelta:qt,fakeStop:Vt,skipped:Wt,isExternalTarget:Gt,addListener:Pt,removeListener:St}),Ht=S.extend({run:function(e,t,n,r){this.stop(),this._el=e,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(r||.5,.2),this._startPos=gt(e),this._offset=t.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=k(this._animate,this),this._step()},_step:function(e){var t=+new Date-this._startTime,n=1e3*this._duration;t<n?this._runFrame(this._easeOut(t/n),e):(this._runFrame(1),this._complete())},_runFrame:function(e,t){var n=this._startPos.add(this._offset.multiplyBy(e));t&&n._round(),vt(this._el,n),this.fire("step")},_complete:function(){C(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),Kt=S.extend({options:{crs:H,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(e,t){t=f(this,t),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(e),this._initLayout(),this._onResize=i(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),void 0!==t.zoom&&(this._zoom=this._limitZoom(t.zoom)),t.center&&void 0!==t.zoom&&this.setView(q(t.center),t.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=tt&&_e&&!Ee&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Pt(this._proxy,nt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(e,t,r){if(t=void 0===t?this._zoom:this._limitZoom(t),e=this._limitCenter(q(e),t,this.options.maxBounds),r=r||{},this._stop(),this._loaded&&!r.reset&&!0!==r){void 0!==r.animate&&(r.zoom=n({animate:r.animate},r.zoom),r.pan=n({animate:r.animate,duration:r.duration},r.pan));var i=this._zoom!==t?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,t,r.zoom):this._tryAnimatedPan(e,r.pan);if(i)return clearTimeout(this._sizeTimer),this}return this._resetView(e,t),this},setZoom:function(e,t){return this._loaded?this.setView(this.getCenter(),e,{zoom:t}):(this._zoom=e,this)},zoomIn:function(e,t){return e=e||(_e?this.options.zoomDelta:1),this.setZoom(this._zoom+e,t)},zoomOut:function(e,t){return e=e||(_e?this.options.zoomDelta:1),this.setZoom(this._zoom-e,t)},setZoomAround:function(e,t,n){var r=this.getZoomScale(t),i=this.getSize().divideBy(2),o=e instanceof O?e:this.latLngToContainerPoint(e),a=o.subtract(i).multiplyBy(1-1/r),s=this.containerPointToLatLng(i.add(a));return this.setView(s,t,{zoom:n})},_getBoundsCenterZoom:function(e,t){t=t||{},e=e.getBounds?e.getBounds():B(e);var n=R(t.paddingTopLeft||t.padding||[0,0]),r=R(t.paddingBottomRight||t.padding||[0,0]),i=this.getBoundsZoom(e,!1,n.add(r));if((i="number"==typeof t.maxZoom?Math.min(t.maxZoom,i):i)===1/0)return{center:e.getCenter(),zoom:i};var o=r.subtract(n).divideBy(2),a=this.project(e.getSouthWest(),i),s=this.project(e.getNorthEast(),i),u=this.unproject(a.add(s).divideBy(2).add(o),i);return{center:u,zoom:i}},fitBounds:function(e,t){if(!(e=B(e)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(e,t);return this.setView(n.center,n.zoom,t)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,t){return this.setView(e,this._zoom,{pan:t})},panBy:function(e,t){if(e=R(e).round(),t=t||{},!e.x&&!e.y)return this.fire("moveend");if(!0!==t.animate&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ht,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire("movestart"),!1!==t.animate){pt(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,n,t.duration||.25,t.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},flyTo:function(e,t,n){if(!1===(n=n||{}).animate||!_e)return this.setView(e,t,n);this._stop();var r=this.project(this.getCenter()),i=this.project(e),o=this.getSize(),a=this._zoom;e=q(e),t=void 0===t?a:t;var s=Math.max(o.x,o.y),u=s*this.getZoomScale(a,t),l=i.distanceTo(r)||1,c=1.42,p=c*c;function h(e){var t=e?-1:1,n=e?u:s,r=u*u-s*s+t*p*p*l*l,i=2*n*p*l,o=r/i,a=Math.sqrt(o*o+1)-o,c=a<1e-9?-18:Math.log(a);return c}function f(e){return(Math.exp(e)-Math.exp(-e))/2}function d(e){return(Math.exp(e)+Math.exp(-e))/2}var m=h(0);function _(e){return s*(d(m)*(f(t=m+c*e)/d(t))-f(m))/p;var t}var y=Date.now(),v=(h(1)-m)/c,g=n.duration?1e3*n.duration:1e3*v*.8;return this._moveStart(!0,n.noMoveStart),function n(){var o=(Date.now()-y)/g,u=function(e){return 1-Math.pow(1-e,1.5)}(o)*v;o<=1?(this._flyToFrame=k(n,this),this._move(this.unproject(r.add(i.subtract(r).multiplyBy(_(u)/l)),a),this.getScaleZoom(s/function(e){return s*(d(m)/d(m+c*e))}(u),a),{flyTo:!0})):this._move(e,t)._moveEnd(!0)}.call(this),this},flyToBounds:function(e,t){var n=this._getBoundsCenterZoom(e,t);return this.flyTo(n.center,n.zoom,t)},setMaxBounds:function(e){return(e=B(e)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(e){var t=this.options.minZoom;return this.options.minZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(e):this},setMaxZoom:function(e){var t=this.options.maxZoom;return this.options.maxZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(e):this},panInsideBounds:function(e,t){this._enforcingBounds=!0;var n=this.getCenter(),r=this._limitCenter(n,this._zoom,B(e));return n.equals(r)||this.panTo(r,t),this._enforcingBounds=!1,this},panInside:function(e,t){var n=R((t=t||{}).paddingTopLeft||t.padding||[0,0]),r=R(t.paddingBottomRight||t.padding||[0,0]),i=this.getCenter(),o=this.project(i),a=this.project(e),s=this.getPixelBounds(),u=s.getSize().divideBy(2),l=z([s.min.add(n),s.max.subtract(r)]);if(!l.contains(a)){this._enforcingBounds=!0;var c=o.subtract(a),p=R(a.x+c.x,a.y+c.y);(a.x<l.min.x||a.x>l.max.x)&&(p.x=o.x-c.x,c.x>0?p.x+=u.x-n.x:p.x-=u.x-r.x),(a.y<l.min.y||a.y>l.max.y)&&(p.y=o.y-c.y,c.y>0?p.y+=u.y-n.y:p.y-=u.y-r.y),this.panTo(this.unproject(p),t),this._enforcingBounds=!1}return this},invalidateSize:function(e){if(!this._loaded)return this;e=n({animate:!1,pan:!0},!0===e?{animate:!0}:e);var t=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var r=this.getSize(),o=t.divideBy(2).round(),a=r.divideBy(2).round(),s=o.subtract(a);return s.x||s.y?(e.animate&&e.pan?this.panBy(s):(e.pan&&this._rawPanBy(s),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(i(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:t,newSize:r})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(e){if(e=this._locateOptions=n({timeout:1e4,watch:!1},e),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var t=i(this._handleGeolocationResponse,this),r=i(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,r,e):navigator.geolocation.getCurrentPosition(t,r,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){var t=e.code,n=e.message||(1===t?"permission denied":2===t?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(e){var t=e.coords.latitude,n=e.coords.longitude,r=new N(t,n),i=r.toBounds(2*e.coords.accuracy),o=this._locateOptions;if(o.setView){var a=this.getBoundsZoom(i);this.setView(r,o.maxZoom?Math.min(a,o.maxZoom):a)}var s={latlng:r,bounds:i,timestamp:e.timestamp};for(var u in e.coords)"number"==typeof e.coords[u]&&(s[u]=e.coords[u]);this.fire("locationfound",s)},addHandler:function(e,t){if(!t)return this;var n=this[e]=new t(this);return this._handlers.push(n),this.options[e]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(e){this._container._leaflet_id=void 0,this._containerId=void 0}var e;for(e in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),at(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(C(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[e].remove();for(e in this._panes)at(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(e,t){var n="leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),r=ot("div",n,t||this._mapPane);return e&&(this._panes[e]=r),r},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds(),t=this.unproject(e.getBottomLeft()),n=this.unproject(e.getTopRight());return new D(t,n)},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,t,n){e=B(e),n=R(n||[0,0]);var r=this.getZoom()||0,i=this.getMinZoom(),o=this.getMaxZoom(),a=e.getNorthWest(),s=e.getSouthEast(),u=this.getSize().subtract(n),l=z(this.project(s,r),this.project(a,r)).getSize(),c=_e?this.options.zoomSnap:1,p=u.x/l.x,h=u.y/l.y,f=t?Math.max(p,h):Math.min(p,h);return r=this.getScaleZoom(f,r),c&&(r=Math.round(r/(c/100))*(c/100),r=t?Math.ceil(r/c)*c:Math.floor(r/c)*c),Math.max(i,Math.min(o,r))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new O(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,t){var n=this._getTopLeftPoint(e,t);return new j(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(void 0===e?this.getZoom():e)},getPane:function(e){return"string"==typeof e?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,t){var n=this.options.crs;return t=void 0===t?this._zoom:t,n.scale(e)/n.scale(t)},getScaleZoom:function(e,t){var n=this.options.crs;t=void 0===t?this._zoom:t;var r=n.zoom(e*n.scale(t));return isNaN(r)?1/0:r},project:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.latLngToPoint(q(e),t)},unproject:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.pointToLatLng(R(e),t)},layerPointToLatLng:function(e){var t=R(e).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(e){var t=this.project(q(e))._round();return t._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(q(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds(B(e))},distance:function(e,t){return this.options.crs.distance(q(e),q(t))},containerPointToLayerPoint:function(e){return R(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return R(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(R(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(q(e)))},mouseEventToContainerPoint:function(e){return Bt(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var t=this._container=rt(e);if(!t)throw new Error("Map container not found.");if(t._leaflet_id)throw new Error("Map container is already initialized.");Pt(t,"scroll",this._onScroll,this),this._containerId=a(t)},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&_e,pt(e,"leaflet-container"+(we?" leaflet-touch":"")+(ke?" leaflet-retina":"")+(Q?" leaflet-oldie":"")+(le?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var t=it(e,"position");"absolute"!==t&&"relative"!==t&&"fixed"!==t&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),vt(this._mapPane,new O(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(pt(e.markerPane,"leaflet-zoom-hide"),pt(e.shadowPane,"leaflet-zoom-hide"))},_resetView:function(e,t){vt(this._mapPane,new O(0,0));var n=!this._loaded;this._loaded=!0,t=this._limitZoom(t),this.fire("viewprereset");var r=this._zoom!==t;this._moveStart(r,!1)._move(e,t)._moveEnd(r),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(e,t){return e&&this.fire("zoomstart"),t||this.fire("movestart"),this},_move:function(e,t,n){void 0===t&&(t=this._zoom);var r=this._zoom!==t;return this._zoom=t,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),(r||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(e){return e&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return C(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(e){vt(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){this._targets={},this._targets[a(this._container)]=this;var t=e?St:Pt;t(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&t(window,"resize",this._onResize,this),_e&&this.options.transform3DLimit&&(e?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){C(this._resizeRequest),this._resizeRequest=k(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();Math.max(Math.abs(e.x),Math.abs(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(e,t){for(var n,r=[],i="mouseout"===t||"mouseover"===t,o=e.target||e.srcElement,s=!1;o;){if((n=this._targets[a(o)])&&("click"===t||"preclick"===t)&&!e._simulated&&this._draggableMoved(n)){s=!0;break}if(n&&n.listens(t,!0)){if(i&&!Gt(o,e))break;if(r.push(n),i)break}if(o===this._container)break;o=o.parentNode}return r.length||s||i||!Gt(o,e)||(r=[this]),r},_handleDOMEvent:function(e){if(this._loaded&&!Wt(e)){var t=e.type;"mousedown"!==t&&"keypress"!==t&&"keyup"!==t&&"keydown"!==t||Et(e.target||e.srcElement),this._fireDOMEvent(e,t)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(e,t,r){if("click"===e.type){var i=n({},e);i.type="preclick",this._fireDOMEvent(i,i.type,r)}if(!e._stopped&&(r=(r||[]).concat(this._findEventTargets(e,t))).length){var o=r[0];"contextmenu"===t&&o.listens(t,!0)&&zt(e);var a={originalEvent:e};if("keypress"!==e.type&&"keydown"!==e.type&&"keyup"!==e.type){var s=o.getLatLng&&(!o._radius||o._radius<=10);a.containerPoint=s?this.latLngToContainerPoint(o.getLatLng()):this.mouseEventToContainerPoint(e),a.layerPoint=this.containerPointToLayerPoint(a.containerPoint),a.latlng=s?o.getLatLng():this.layerPointToLatLng(a.layerPoint)}for(var u=0;u<r.length;u++)if(r[u].fire(t,a,!0),a.originalEvent._stopped||!1===r[u].options.bubblingMouseEvents&&-1!==v(this._mouseEvents,t))return}},_draggableMoved:function(e){return(e=e.dragging&&e.dragging.enabled()?e:this).dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,t=this._handlers.length;e<t;e++)this._handlers[e].disable()},whenReady:function(e,t){return this._loaded?e.call(t||this,{target:this}):this.on("load",e,t),this},_getMapPanePos:function(){return gt(this._mapPane)||new O(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,t){var n=e&&void 0!==t?this._getNewPixelOrigin(e,t):this.getPixelOrigin();return n.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,t){var n=this.getSize()._divideBy(2);return this.project(e,t)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,t,n){var r=this._getNewPixelOrigin(n,t);return this.project(e,t)._subtract(r)},_latLngBoundsToNewLayerBounds:function(e,t,n){var r=this._getNewPixelOrigin(n,t);return z([this.project(e.getSouthWest(),t)._subtract(r),this.project(e.getNorthWest(),t)._subtract(r),this.project(e.getSouthEast(),t)._subtract(r),this.project(e.getNorthEast(),t)._subtract(r)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,t,n){if(!n)return e;var r=this.project(e,t),i=this.getSize().divideBy(2),o=new j(r.subtract(i),r.add(i)),a=this._getBoundsOffset(o,n,t);return a.round().equals([0,0])?e:this.unproject(r.add(a),t)},_limitOffset:function(e,t){if(!t)return e;var n=this.getPixelBounds(),r=new j(n.min.add(e),n.max.add(e));return e.add(this._getBoundsOffset(r,t))},_getBoundsOffset:function(e,t,n){var r=z(this.project(t.getNorthEast(),n),this.project(t.getSouthWest(),n)),i=r.min.subtract(e.min),o=r.max.subtract(e.max),a=this._rebound(i.x,-o.x),s=this._rebound(i.y,-o.y);return new O(a,s)},_rebound:function(e,t){return e+t>0?Math.round(e-t)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(t))},_limitZoom:function(e){var t=this.getMinZoom(),n=this.getMaxZoom(),r=_e?this.options.zoomSnap:1;return r&&(e=Math.round(e/r)*r),Math.max(t,Math.min(n,e))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ht(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,t){var n=this._getCenterOffset(e)._trunc();return!(!0!==(t&&t.animate)&&!this.getSize().contains(n)||(this.panBy(n,t),0))},_createAnimProxy:function(){var e=this._proxy=ot("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e),this.on("zoomanim",function(e){var t=et,n=this._proxy.style[t];yt(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),n===this._proxy.style[t]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var e=this.getCenter(),t=this.getZoom();yt(this._proxy,this.project(e,t),this.getZoomScale(t,1))},this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){at(this._proxy),delete this._proxy},_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,t,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var r=this.getZoomScale(t),i=this._getCenterOffset(e)._divideBy(1-1/r);return!(!0!==n.animate&&!this.getSize().contains(i)||(k(function(){this._moveStart(!0,!1)._animateZoom(e,t,!0)},this),0))},_animateZoom:function(e,t,n,r){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=t,pt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:e,zoom:t,noUpdate:r}),setTimeout(i(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ht(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),k(function(){this._moveEnd(!0)},this))}}),Yt=P.extend({options:{position:"topright"},initialize:function(e){f(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var t=this._container=this.onAdd(e),n=this.getPosition(),r=e._controlCorners[n];return pt(t,"leaflet-control"),-1!==n.indexOf("bottom")?r.insertBefore(t,r.firstChild):r.appendChild(t),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(at(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(e){this._map&&e&&e.screenX>0&&e.screenY>0&&this._map.getContainer().focus()}}),Xt=function(e){return new Yt(e)};Kt.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){var e=this._controlCorners={},t="leaflet-",n=this._controlContainer=ot("div",t+"control-container",this._container);function r(r,i){var o=t+r+" "+t+i;e[r+i]=ot("div",o,n)}r("top","left"),r("top","right"),r("bottom","left"),r("bottom","right")},_clearControlPos:function(){for(var e in this._controlCorners)at(this._controlCorners[e]);at(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var $t=Yt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(e,t,n,r){return n<r?-1:r<n?1:0}},initialize:function(e,t,n){for(var r in f(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,e)this._addLayer(e[r],r);for(r in t)this._addLayer(t[r],r,!0)},onAdd:function(e){this._initLayout(),this._update(),this._map=e,e.on("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(e){return Yt.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(e,t){return this._addLayer(e,t),this._map?this._update():this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._map?this._update():this},removeLayer:function(e){e.off("add remove",this._onLayerChange,this);var t=this._getLayer(a(e));return t&&this._layers.splice(this._layers.indexOf(t),1),this._map?this._update():this},expand:function(){pt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._section.clientHeight?(pt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=e+"px"):ht(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ht(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var e="leaflet-control-layers",t=this._container=ot("div",e),n=this.options.collapsed;t.setAttribute("aria-haspopup",!0),Lt(t),jt(t);var r=this._section=ot("section",e+"-list");n&&(this._map.on("click",this.collapse,this),ne||Pt(t,{mouseenter:this.expand,mouseleave:this.collapse},this));var i=this._layersLink=ot("a",e+"-toggle",t);i.href="#",i.title="Layers",we?(Pt(i,"click",Dt),Pt(i,"click",this.expand,this)):Pt(i,"focus",this.expand,this),n||this.expand(),this._baseLayersList=ot("div",e+"-base",r),this._separator=ot("div",e+"-separator",r),this._overlaysList=ot("div",e+"-overlays",r),t.appendChild(r)},_getLayer:function(e){for(var t=0;t<this._layers.length;t++)if(this._layers[t]&&a(this._layers[t].layer)===e)return this._layers[t]},_addLayer:function(e,t,n){this._map&&e.on("add remove",this._onLayerChange,this),this._layers.push({layer:e,name:t,overlay:n}),this.options.sortLayers&&this._layers.sort(i(function(e,t){return this.options.sortFunction(e.layer,t.layer,e.name,t.name)},this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;st(this._baseLayersList),st(this._overlaysList),this._layerControlInputs=[];var e,t,n,r,i=0;for(n=0;n<this._layers.length;n++)r=this._layers[n],this._addItem(r),t=t||r.overlay,e=e||!r.overlay,i+=r.overlay?0:1;return this.options.hideSingleBase&&(e=e&&i>1,this._baseLayersList.style.display=e?"":"none"),this._separator.style.display=t&&e?"":"none",this},_onLayerChange:function(e){this._handlingClick||this._update();var t=this._getLayer(a(e.target)),n=t.overlay?"add"===e.type?"overlayadd":"overlayremove":"add"===e.type?"baselayerchange":null;n&&this._map.fire(n,t)},_createRadioElement:function(e,t){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(t?' checked="checked"':"")+"/>",r=document.createElement("div");return r.innerHTML=n,r.firstChild},_addItem:function(e){var t,n=document.createElement("label"),r=this._map.hasLayer(e.layer);e.overlay?((t=document.createElement("input")).type="checkbox",t.className="leaflet-control-layers-selector",t.defaultChecked=r):t=this._createRadioElement("leaflet-base-layers_"+a(this),r),this._layerControlInputs.push(t),t.layerId=a(e.layer),Pt(t,"click",this._onInputClick,this);var i=document.createElement("span");i.innerHTML=" "+e.name;var o=document.createElement("div");n.appendChild(o),o.appendChild(t),o.appendChild(i);var s=e.overlay?this._overlaysList:this._baseLayersList;return s.appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var e,t,n=this._layerControlInputs,r=[],i=[];this._handlingClick=!0;for(var o=n.length-1;o>=0;o--)e=n[o],t=this._getLayer(e.layerId).layer,e.checked?r.push(t):e.checked||i.push(t);for(o=0;o<i.length;o++)this._map.hasLayer(i[o])&&this._map.removeLayer(i[o]);for(o=0;o<r.length;o++)this._map.hasLayer(r[o])||this._map.addLayer(r[o]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var e,t,n=this._layerControlInputs,r=this._map.getZoom(),i=n.length-1;i>=0;i--)e=n[i],t=this._getLayer(e.layerId).layer,e.disabled=void 0!==t.options.minZoom&&r<t.options.minZoom||void 0!==t.options.maxZoom&&r>t.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),Jt=Yt.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(e){var t="leaflet-control-zoom",n=ot("div",t+" leaflet-bar"),r=this.options;return this._zoomInButton=this._createButton(r.zoomInText,r.zoomInTitle,t+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(r.zoomOutText,r.zoomOutTitle,t+"-out",n,this._zoomOut),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(e){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(e.shiftKey?3:1))},_zoomOut:function(e){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(e.shiftKey?3:1))},_createButton:function(e,t,n,r,i){var o=ot("a",n,r);return o.innerHTML=e,o.href="#",o.title=t,o.setAttribute("role","button"),o.setAttribute("aria-label",t),Lt(o),Pt(o,"click",Dt),Pt(o,"click",i,this),Pt(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var e=this._map,t="leaflet-disabled";ht(this._zoomInButton,t),ht(this._zoomOutButton,t),(this._disabled||e._zoom===e.getMinZoom())&&pt(this._zoomOutButton,t),(this._disabled||e._zoom===e.getMaxZoom())&&pt(this._zoomInButton,t)}});Kt.mergeOptions({zoomControl:!0}),Kt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Jt,this.addControl(this.zoomControl))});var Qt=Yt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var t=ot("div","leaflet-control-scale"),n=this.options;return this._addScales(n,"leaflet-control-scale-line",t),e.on(n.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),t},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,t,n){e.metric&&(this._mScale=ot("div",t,n)),e.imperial&&(this._iScale=ot("div",t,n))},_update:function(){var e=this._map,t=e.getSize().y/2,n=e.distance(e.containerPointToLatLng([0,t]),e.containerPointToLatLng([this.options.maxWidth,t]));this._updateScales(n)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var t=this._getRoundNum(e),n=t<1e3?t+" m":t/1e3+" km";this._updateScale(this._mScale,n,t/e)},_updateImperial:function(e){var t,n,r,i=3.2808399*e;i>5280?(t=i/5280,n=this._getRoundNum(t),this._updateScale(this._iScale,n+" mi",n/t)):(r=this._getRoundNum(i),this._updateScale(this._iScale,r+" ft",r/i))},_updateScale:function(e,t,n){e.style.width=Math.round(this.options.maxWidth*n)+"px",e.innerHTML=t},_getRoundNum:function(e){var t=Math.pow(10,(Math.floor(e)+"").length-1),n=e/t;return t*(n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),en=Yt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(e){f(this,e),this._attributions={}},onAdd:function(e){for(var t in e.attributionControl=this,this._container=ot("div","leaflet-control-attribution"),Lt(this._container),e._layers)e._layers[t].getAttribution&&this.addAttribution(e._layers[t].getAttribution());return this._update(),this._container},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):this},_update:function(){if(this._map){var e=[];for(var t in this._attributions)this._attributions[t]&&e.push(t);var n=[];this.options.prefix&&n.push(this.options.prefix),e.length&&n.push(e.join(", ")),this._container.innerHTML=n.join(" | ")}}});Kt.mergeOptions({attributionControl:!0}),Kt.addInitHook(function(){this.options.attributionControl&&(new en).addTo(this)}),Yt.Layers=$t,Yt.Zoom=Jt,Yt.Scale=Qt,Yt.Attribution=en,Xt.layers=function(e,t,n){return new $t(e,t,n)},Xt.zoom=function(e){return new Jt(e)},Xt.scale=function(e){return new Qt(e)},Xt.attribution=function(e){return new en(e)};var tn=P.extend({initialize:function(e){this._map=e},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});tn.addTo=function(e,t){return e.addHandler(t,this),this};var nn,rn={Events:A},on=we?"touchstart mousedown":"mousedown",an={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},sn={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},un=S.extend({options:{clickTolerance:3},initialize:function(e,t,n,r){f(this,r),this._element=e,this._dragStartTarget=t||e,this._preventOutline=n},enable:function(){this._enabled||(Pt(this._dragStartTarget,on,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(un._dragging===this&&this.finishDrag(),St(this._dragStartTarget,on,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(!e._simulated&&this._enabled&&(this._moved=!1,!ct(this._element,"leaflet-zoom-anim")&&!(un._dragging||e.shiftKey||1!==e.which&&1!==e.button&&!e.touches||(un._dragging=this,this._preventOutline&&Et(this._element),xt(),Ye(),this._moving)))){this.fire("down");var t=e.touches?e.touches[0]:e,n=kt(this._element);this._startPoint=new O(t.clientX,t.clientY),this._parentScale=Ct(n),Pt(document,sn[e.type],this._onMove,this),Pt(document,an[e.type],this._onUp,this)}},_onMove:function(e){if(!e._simulated&&this._enabled)if(e.touches&&e.touches.length>1)this._moved=!0;else{var t=e.touches&&1===e.touches.length?e.touches[0]:e,n=new O(t.clientX,t.clientY)._subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,zt(e),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=gt(this._element).subtract(n),pt(document.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),pt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,C(this._animRequest),this._lastEvent=e,this._animRequest=k(this._updatePosition,this,!0)))}},_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e),vt(this._element,this._newPos),this.fire("drag",e)},_onUp:function(e){!e._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var e in ht(document.body,"leaflet-dragging"),this._lastTarget&&(ht(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),sn)St(document,sn[e],this._onMove,this),St(document,an[e],this._onUp,this);wt(),Xe(),this._moved&&this._moving&&(C(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,un._dragging=!1}});function ln(e,t){if(!t||!e.length)return e.slice();var n=t*t;return e=function(e,t){var n=e.length,r=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(n);r[0]=r[n-1]=1,function e(t,n,r,i,o){var a,s,u,l=0;for(s=i+1;s<=o-1;s++)(u=dn(t[s],t[i],t[o],!0))>l&&(a=s,l=u);l>r&&(n[a]=1,e(t,n,r,i,a),e(t,n,r,a,o))}(e,r,t,0,n-1);var i,o=[];for(i=0;i<n;i++)r[i]&&o.push(e[i]);return o}(e=function(e,t){for(var n=[e[0]],r=1,i=0,o=e.length;r<o;r++)a=e[r],s=e[i],u=void 0,l=void 0,u=s.x-a.x,l=s.y-a.y,u*u+l*l>t&&(n.push(e[r]),i=r);var a,s,u,l;return i<o-1&&n.push(e[o-1]),n}(e,n),n)}function cn(e,t,n){return Math.sqrt(dn(e,t,n,!0))}function pn(e,t,n,r,i){var o,a,s,u=r?nn:fn(e,n),l=fn(t,n);for(nn=l;;){if(!(u|l))return[e,t];if(u&l)return!1;a=hn(e,t,o=u||l,n,i),s=fn(a,n),o===u?(e=a,u=s):(t=a,l=s)}}function hn(e,t,n,r,i){var o,a,s=t.x-e.x,u=t.y-e.y,l=r.min,c=r.max;return 8&n?(o=e.x+s*(c.y-e.y)/u,a=c.y):4&n?(o=e.x+s*(l.y-e.y)/u,a=l.y):2&n?(o=c.x,a=e.y+u*(c.x-e.x)/s):1&n&&(o=l.x,a=e.y+u*(l.x-e.x)/s),new O(o,a,i)}function fn(e,t){var n=0;return e.x<t.min.x?n|=1:e.x>t.max.x&&(n|=2),e.y<t.min.y?n|=4:e.y>t.max.y&&(n|=8),n}function dn(e,t,n,r){var i,o=t.x,a=t.y,s=n.x-o,u=n.y-a,l=s*s+u*u;return l>0&&((i=((e.x-o)*s+(e.y-a)*u)/l)>1?(o=n.x,a=n.y):i>0&&(o+=s*i,a+=u*i)),s=e.x-o,u=e.y-a,r?s*s+u*u:new O(o,a)}function mn(e){return!y(e[0])||"object"!=typeof e[0][0]&&void 0!==e[0][0]}function _n(e){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),mn(e)}var yn=(Object.freeze||Object)({simplify:ln,pointToSegmentDistance:cn,closestPointOnSegment:function(e,t,n){return dn(e,t,n)},clipSegment:pn,_getEdgeIntersection:hn,_getBitCode:fn,_sqClosestPointOnSegment:dn,isFlat:mn,_flat:_n});function vn(e,t,n){var r,i,o,a,s,u,l,c,p,h=[1,4,2,8];for(i=0,l=e.length;i<l;i++)e[i]._code=fn(e[i],t);for(a=0;a<4;a++){for(c=h[a],r=[],i=0,l=e.length,o=l-1;i<l;o=i++)s=e[i],u=e[o],s._code&c?u._code&c||((p=hn(u,s,c,t,n))._code=fn(p,t),r.push(p)):(u._code&c&&((p=hn(u,s,c,t,n))._code=fn(p,t),r.push(p)),r.push(s));e=r}return e}var gn=(Object.freeze||Object)({clipPolygon:vn}),bn={project:function(e){return new O(e.lng,e.lat)},unproject:function(e){return new N(e.y,e.x)},bounds:new j([-180,-90],[180,90])},xn={R:6378137,R_MINOR:6356752.314245179,bounds:new j([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(e){var t=Math.PI/180,n=this.R,r=e.lat*t,i=this.R_MINOR/n,o=Math.sqrt(1-i*i),a=o*Math.sin(r),s=Math.tan(Math.PI/4-r/2)/Math.pow((1-a)/(1+a),o/2);return r=-n*Math.log(Math.max(s,1e-10)),new O(e.lng*t*n,r)},unproject:function(e){for(var t,n=180/Math.PI,r=this.R,i=this.R_MINOR/r,o=Math.sqrt(1-i*i),a=Math.exp(-e.y/r),s=Math.PI/2-2*Math.atan(a),u=0,l=.1;u<15&&Math.abs(l)>1e-7;u++)t=o*Math.sin(s),t=Math.pow((1-t)/(1+t),o/2),l=Math.PI/2-2*Math.atan(a*t)-s,s+=l;return new N(s*n,e.x*n/r)}},wn=(Object.freeze||Object)({LonLat:bn,Mercator:xn,SphericalMercator:W}),En=n({},V,{code:"EPSG:3395",projection:xn,transformation:function(){var e=.5/(Math.PI*xn.R);return Z(e,.5,-e,.5)}()}),Tn=n({},V,{code:"EPSG:4326",projection:bn,transformation:Z(1/180,1,-1/180,.5)}),kn=n({},U,{projection:bn,transformation:Z(1,0,-1,0),scale:function(e){return Math.pow(2,e)},zoom:function(e){return Math.log(e)/Math.LN2},distance:function(e,t){var n=t.lng-e.lng,r=t.lat-e.lat;return Math.sqrt(n*n+r*r)},infinite:!0});U.Earth=V,U.EPSG3395=En,U.EPSG3857=H,U.EPSG900913=K,U.EPSG4326=Tn,U.Simple=kn;var Cn=S.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[a(e)]=this,this},removeInteractiveTarget:function(e){return delete this._map._targets[a(e)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(e){var t=e.target;if(t.hasLayer(this)){if(this._map=t,this._zoomAnimated=t._zoomAnimated,this.getEvents){var n=this.getEvents();t.on(n,this),this.once("remove",function(){t.off(n,this)},this)}this.onAdd(t),this.getAttribution&&t.attributionControl&&t.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),t.fire("layeradd",{layer:this})}}});Kt.include({addLayer:function(e){if(!e._layerAdd)throw new Error("The provided object is not a Layer.");var t=a(e);return this._layers[t]?this:(this._layers[t]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e),this)},removeLayer:function(e){var t=a(e);return this._layers[t]?(this._loaded&&e.onRemove(this),e.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(e.getAttribution()),delete this._layers[t],this._loaded&&(this.fire("layerremove",{layer:e}),e.fire("remove")),e._map=e._mapToAdd=null,this):this},hasLayer:function(e){return!!e&&a(e)in this._layers},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},_addLayers:function(e){e=e?y(e)?e:[e]:[];for(var t=0,n=e.length;t<n;t++)this.addLayer(e[t])},_addZoomLimit:function(e){!isNaN(e.options.maxZoom)&&isNaN(e.options.minZoom)||(this._zoomBoundLayers[a(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var t=a(e);this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels())},_updateZoomLevels:function(){var e=1/0,t=-1/0,n=this._getZoomSpan();for(var r in this._zoomBoundLayers){var i=this._zoomBoundLayers[r].options;e=void 0===i.minZoom?e:Math.min(e,i.minZoom),t=void 0===i.maxZoom?t:Math.max(t,i.maxZoom)}this._layersMaxZoom=t===-1/0?void 0:t,this._layersMinZoom=e===1/0?void 0:e,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Mn=Cn.extend({initialize:function(e,t){var n,r;if(f(this,t),this._layers={},e)for(n=0,r=e.length;n<r;n++)this.addLayer(e[n])},addLayer:function(e){var t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(e){return!!e&&(e in this._layers||this.getLayerId(e)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(e){var t,n,r=Array.prototype.slice.call(arguments,1);for(t in this._layers)(n=this._layers[t])[e]&&n[e].apply(n,r);return this},onAdd:function(e){this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e)},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];return this.eachLayer(e.push,e),e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return a(e)}}),Pn=Mn.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),Mn.prototype.addLayer.call(this,e),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),Mn.prototype.removeLayer.call(this,e),this.fire("layerremove",{layer:e})):this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new D;for(var t in this._layers){var n=this._layers[t];e.extend(n.getBounds?n.getBounds():n.getLatLng())}return e}}),An=P.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(e){f(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,t){var n=this._getIconUrl(e);if(!n){if("icon"===e)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var r=this._createImg(n,t&&"IMG"===t.tagName?t:null);return this._setIconStyles(r,e),r},_setIconStyles:function(e,t){var n=this.options,r=n[t+"Size"];"number"==typeof r&&(r=[r,r]);var i=R(r),o=R("shadow"===t&&n.shadowAnchor||n.iconAnchor||i&&i.divideBy(2,!0));e.className="leaflet-marker-"+t+" "+(n.className||""),o&&(e.style.marginLeft=-o.x+"px",e.style.marginTop=-o.y+"px"),i&&(e.style.width=i.x+"px",e.style.height=i.y+"px")},_createImg:function(e,t){return(t=t||document.createElement("img")).src=e,t},_getIconUrl:function(e){return ke&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}}),Sn=An.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){return Sn.imagePath||(Sn.imagePath=this._detectIconPath()),(this.options.imagePath||Sn.imagePath)+An.prototype._getIconUrl.call(this,e)},_detectIconPath:function(){var e=ot("div","leaflet-default-icon-path",document.body),t=it(e,"background-image")||it(e,"backgroundImage");return document.body.removeChild(e),t=null===t||0!==t.indexOf("url")?"":t.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),On=tn.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new un(e,e,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),pt(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ht(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(e){var t=this._marker,n=t._map,r=this._marker.options.autoPanSpeed,i=this._marker.options.autoPanPadding,o=gt(t._icon),a=n.getPixelBounds(),s=n.getPixelOrigin(),u=z(a.min._subtract(s).add(i),a.max._subtract(s).subtract(i));if(!u.contains(o)){var l=R((Math.max(u.max.x,o.x)-u.max.x)/(a.max.x-u.max.x)-(Math.min(u.min.x,o.x)-u.min.x)/(a.min.x-u.min.x),(Math.max(u.max.y,o.y)-u.max.y)/(a.max.y-u.max.y)-(Math.min(u.min.y,o.y)-u.min.y)/(a.min.y-u.min.y)).multiplyBy(r);n.panBy(l,{animate:!1}),this._draggable._newPos._add(l),this._draggable._startPos._add(l),vt(t._icon,this._draggable._newPos),this._onDrag(e),this._panRequest=k(this._adjustPan.bind(this,e))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onPreDrag:function(e){this._marker.options.autoPan&&(C(this._panRequest),this._panRequest=k(this._adjustPan.bind(this,e)))},_onDrag:function(e){var t=this._marker,n=t._shadow,r=gt(t._icon),i=t._map.layerPointToLatLng(r);n&&vt(n,r),t._latlng=i,e.latlng=i,e.oldLatLng=this._oldLatLng,t.fire("move",e).fire("drag",e)},_onDragEnd:function(e){C(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",e)}}),In=Cn.extend({options:{icon:new Sn,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(e,t){f(this,t),this._latlng=q(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var t=this._latlng;return this._latlng=q(e),this.update(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},getIcon:function(){return this.options.icon},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,t="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=e.icon.createIcon(this._icon),r=!1;n!==this._icon&&(this._icon&&this._removeIcon(),r=!0,e.title&&(n.title=e.title),"IMG"===n.tagName&&(n.alt=e.alt||"")),pt(n,t),e.keyboard&&(n.tabIndex="0"),this._icon=n,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var i=e.icon.createShadow(this._shadow),o=!1;i!==this._shadow&&(this._removeShadow(),o=!0),i&&(pt(i,t),i.alt=""),this._shadow=i,e.opacity<1&&this._updateOpacity(),r&&this.getPane().appendChild(this._icon),this._initInteraction(),i&&o&&this.getPane(e.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),at(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&at(this._shadow),this._shadow=null},_setPos:function(e){vt(this._icon,e),this._shadow&&vt(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon.style.zIndex=this._zIndex+e},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(t)},_initInteraction:function(){if(this.options.interactive&&(pt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),On)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new On(this),e&&this.dragging.enable()}},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;this._icon&&mt(this._icon,e),this._shadow&&mt(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}}),Rn=Cn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return f(this,e),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&e.hasOwnProperty("weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),jn=Rn.extend({options:{fill:!0,radius:10},initialize:function(e,t){f(this,t),this._latlng=q(e),this._radius=this.options.radius},setLatLng:function(e){return this._latlng=q(e),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var t=e&&e.radius||this._radius;return Rn.prototype.setStyle.call(this,e),this.setRadius(t),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,t=this._radiusY||e,n=this._clickTolerance(),r=[e+n,t+n];this._pxBounds=new j(this._point.subtract(r),this._point.add(r))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),Ln=jn.extend({initialize:function(e,t,r){if("number"==typeof t&&(t=n({},r,{radius:t})),f(this,t),this._latlng=q(e),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new D(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:Rn.prototype.setStyle,_project:function(){var e=this._latlng.lng,t=this._latlng.lat,n=this._map,r=n.options.crs;if(r.distance===V.distance){var i=Math.PI/180,o=this._mRadius/V.R/i,a=n.project([t+o,e]),s=n.project([t-o,e]),u=a.add(s).divideBy(2),l=n.unproject(u).lat,c=Math.acos((Math.cos(o*i)-Math.sin(t*i)*Math.sin(l*i))/(Math.cos(t*i)*Math.cos(l*i)))/i;(isNaN(c)||0===c)&&(c=o/Math.cos(Math.PI/180*t)),this._point=u.subtract(n.getPixelOrigin()),this._radius=isNaN(c)?0:u.x-n.project([l,e-c]).x,this._radiusY=u.y-a.y}else{var p=r.unproject(r.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(p).x}this._updateBounds()}}),zn=Rn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(e,t){f(this,t),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){for(var t,n,r=1/0,i=null,o=dn,a=0,s=this._parts.length;a<s;a++)for(var u=this._parts[a],l=1,c=u.length;l<c;l++){t=u[l-1],n=u[l];var p=o(e,t,n,!0);p<r&&(r=p,i=o(e,t,n))}return i&&(i.distance=Math.sqrt(r)),i},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var e,t,n,r,i,o,a,s=this._rings[0],u=s.length;if(!u)return null;for(e=0,t=0;e<u-1;e++)t+=s[e].distanceTo(s[e+1])/2;if(0===t)return this._map.layerPointToLatLng(s[0]);for(e=0,r=0;e<u-1;e++)if(i=s[e],o=s[e+1],n=i.distanceTo(o),(r+=n)>t)return a=(r-t)/n,this._map.layerPointToLatLng([o.x-a*(o.x-i.x),o.y-a*(o.y-i.y)])},getBounds:function(){return this._bounds},addLatLng:function(e,t){return t=t||this._defaultShape(),e=q(e),t.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new D,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return mn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){for(var t=[],n=mn(e),r=0,i=e.length;r<i;r++)n?(t[r]=q(e[r]),this._bounds.extend(t[r])):t[r]=this._convertLatLngs(e[r]);return t},_project:function(){var e=new j;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e),this._bounds.isValid()&&e.isValid()&&(this._rawPxBounds=e,this._updateBounds())},_updateBounds:function(){var e=this._clickTolerance(),t=new O(e,e);this._pxBounds=new j([this._rawPxBounds.min.subtract(t),this._rawPxBounds.max.add(t)])},_projectLatlngs:function(e,t,n){var r,i,o=e[0]instanceof N,a=e.length;if(o){for(i=[],r=0;r<a;r++)i[r]=this._map.latLngToLayerPoint(e[r]),n.extend(i[r]);t.push(i)}else for(r=0;r<a;r++)this._projectLatlngs(e[r],t,n)},_clipPoints:function(){var e=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(e))if(this.options.noClip)this._parts=this._rings;else{var t,n,r,i,o,a,s,u=this._parts;for(t=0,r=0,i=this._rings.length;t<i;t++)for(s=this._rings[t],n=0,o=s.length;n<o-1;n++)(a=pn(s[n],s[n+1],e,n,!0))&&(u[r]=u[r]||[],u[r].push(a[0]),a[1]===s[n+1]&&n!==o-2||(u[r].push(a[1]),r++))}},_simplifyPoints:function(){for(var e=this._parts,t=this.options.smoothFactor,n=0,r=e.length;n<r;n++)e[n]=ln(e[n],t)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(e,t){var n,r,i,o,a,s,u=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(n=0,o=this._parts.length;n<o;n++)for(s=this._parts[n],r=0,a=s.length,i=a-1;r<a;i=r++)if((t||0!==r)&&cn(e,s[i],s[r])<=u)return!0;return!1}});zn._flat=_n;var Dn=zn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var e,t,n,r,i,o,a,s,u,l=this._rings[0],c=l.length;if(!c)return null;for(o=a=s=0,e=0,t=c-1;e<c;t=e++)n=l[e],r=l[t],i=n.y*r.x-r.y*n.x,a+=(n.x+r.x)*i,s+=(n.y+r.y)*i,o+=3*i;return u=0===o?l[0]:[a/o,s/o],this._map.layerPointToLatLng(u)},_convertLatLngs:function(e){var t=zn.prototype._convertLatLngs.call(this,e),n=t.length;return n>=2&&t[0]instanceof N&&t[0].equals(t[n-1])&&t.pop(),t},_setLatLngs:function(e){zn.prototype._setLatLngs.call(this,e),mn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return mn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var e=this._renderer._bounds,t=this.options.weight,n=new O(t,t);if(e=new j(e.min.subtract(n),e.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(e))if(this.options.noClip)this._parts=this._rings;else for(var r,i=0,o=this._rings.length;i<o;i++)(r=vn(this._rings[i],e,!0)).length&&this._parts.push(r)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(e){var t,n,r,i,o,a,s,u,l=!1;if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(i=0,s=this._parts.length;i<s;i++)for(t=this._parts[i],o=0,u=t.length,a=u-1;o<u;a=o++)n=t[o],r=t[a],n.y>e.y!=r.y>e.y&&e.x<(r.x-n.x)*(e.y-n.y)/(r.y-n.y)+n.x&&(l=!l);return l||zn.prototype._containsPoint.call(this,e,!0)}}),Bn=Pn.extend({initialize:function(e,t){f(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t,n,r,i=y(e)?e:e.features;if(i){for(t=0,n=i.length;t<n;t++)((r=i[t]).geometries||r.geometry||r.features||r.coordinates)&&this.addData(r);return this}var o=this.options;if(o.filter&&!o.filter(e))return this;var a=Nn(e,o);return a?(a.feature=Gn(e),a.defaultOptions=a.options,this.resetStyle(a),o.onEachFeature&&o.onEachFeature(e,a),this.addLayer(a)):this},resetStyle:function(e){return e.options=n({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this},setStyle:function(e){return this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(e,t){e.setStyle&&("function"==typeof t&&(t=t(e.feature)),e.setStyle(t))}});function Nn(e,t){var n,r,i,o,a="Feature"===e.type?e.geometry:e,s=a?a.coordinates:null,u=[],l=t&&t.pointToLayer,c=t&&t.coordsToLatLng||qn;if(!s&&!a)return null;switch(a.type){case"Point":return n=c(s),l?l(e,n):new In(n);case"MultiPoint":for(i=0,o=s.length;i<o;i++)n=c(s[i]),u.push(l?l(e,n):new In(n));return new Pn(u);case"LineString":case"MultiLineString":return r=Fn(s,"LineString"===a.type?0:1,c),new zn(r,t);case"Polygon":case"MultiPolygon":return r=Fn(s,"Polygon"===a.type?1:2,c),new Dn(r,t);case"GeometryCollection":for(i=0,o=a.geometries.length;i<o;i++){var p=Nn({geometry:a.geometries[i],type:"Feature",properties:e.properties},t);p&&u.push(p)}return new Pn(u);default:throw new Error("Invalid GeoJSON object.")}}function qn(e){return new N(e[1],e[0],e[2])}function Fn(e,t,n){for(var r,i=[],o=0,a=e.length;o<a;o++)r=t?Fn(e[o],t-1,n):(n||qn)(e[o]),i.push(r);return i}function Un(e,t){return t="number"==typeof t?t:6,void 0!==e.alt?[c(e.lng,t),c(e.lat,t),c(e.alt,t)]:[c(e.lng,t),c(e.lat,t)]}function Vn(e,t,n,r){for(var i=[],o=0,a=e.length;o<a;o++)i.push(t?Vn(e[o],t-1,n,r):Un(e[o],r));return!t&&n&&i.push(i[0]),i}function Wn(e,t){return e.feature?n({},e.feature,{geometry:t}):Gn(t)}function Gn(e){return"Feature"===e.type||"FeatureCollection"===e.type?e:{type:"Feature",properties:{},geometry:e}}var Zn={toGeoJSON:function(e){return Wn(this,{type:"Point",coordinates:Un(this.getLatLng(),e)})}};function Hn(e,t){return new Bn(e,t)}In.include(Zn),Ln.include(Zn),jn.include(Zn),zn.include({toGeoJSON:function(e){var t=!mn(this._latlngs),n=Vn(this._latlngs,t?1:0,!1,e);return Wn(this,{type:(t?"Multi":"")+"LineString",coordinates:n})}}),Dn.include({toGeoJSON:function(e){var t=!mn(this._latlngs),n=t&&!mn(this._latlngs[0]),r=Vn(this._latlngs,n?2:t?1:0,!0,e);return t||(r=[r]),Wn(this,{type:(n?"Multi":"")+"Polygon",coordinates:r})}}),Mn.include({toMultiPoint:function(e){var t=[];return this.eachLayer(function(n){t.push(n.toGeoJSON(e).geometry.coordinates)}),Wn(this,{type:"MultiPoint",coordinates:t})},toGeoJSON:function(e){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===t)return this.toMultiPoint(e);var n="GeometryCollection"===t,r=[];return this.eachLayer(function(t){if(t.toGeoJSON){var i=t.toGeoJSON(e);if(n)r.push(i.geometry);else{var o=Gn(i);"FeatureCollection"===o.type?r.push.apply(r,o.features):r.push(o)}}}),n?Wn(this,{geometries:r,type:"GeometryCollection"}):{type:"FeatureCollection",features:r}}});var Kn=Hn,Yn=Cn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(e,t,n){this._url=e,this._bounds=B(t),f(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(pt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){at(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&ut(this._image),this},bringToBack:function(){return this._map&&lt(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=B(e),this._map&&this._reset(),this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e="IMG"===this._url.tagName,t=this._image=e?this._url:ot("img");pt(t,"leaflet-image-layer"),this._zoomAnimated&&pt(t,"leaflet-zoom-animated"),this.options.className&&pt(t,this.options.className),t.onselectstart=l,t.onmousemove=l,t.onload=i(this.fire,this,"load"),t.onerror=i(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(t.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),e?this._url=t.src:(t.src=this._url,t.alt=this.options.alt)},_animateZoom:function(e){var t=this._map.getZoomScale(e.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,e.zoom,e.center).min;yt(this._image,n,t)},_reset:function(){var e=this._image,t=new j(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=t.getSize();vt(e,t.min),e.style.width=n.x+"px",e.style.height=n.y+"px"},_updateOpacity:function(){mt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)}}),Xn=Yn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0},_initImage:function(){var e="VIDEO"===this._url.tagName,t=this._image=e?this._url:ot("video");if(pt(t,"leaflet-image-layer"),this._zoomAnimated&&pt(t,"leaflet-zoom-animated"),t.onselectstart=l,t.onmousemove=l,t.onloadeddata=i(this.fire,this,"load"),e){for(var n=t.getElementsByTagName("source"),r=[],o=0;o<n.length;o++)r.push(n[o].src);this._url=n.length>0?r:[t.src]}else{y(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&t.style.hasOwnProperty("objectFit")&&(t.style.objectFit="fill"),t.autoplay=!!this.options.autoplay,t.loop=!!this.options.loop;for(var a=0;a<this._url.length;a++){var s=ot("source");s.src=this._url[a],t.appendChild(s)}}}}),$n=Yn.extend({_initImage:function(){var e=this._image=this._url;pt(e,"leaflet-image-layer"),this._zoomAnimated&&pt(e,"leaflet-zoom-animated"),e.onselectstart=l,e.onmousemove=l}}),Jn=Cn.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(e,t){f(this,e),this._source=t},onAdd:function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&mt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&mt(this._container,1),this.bringToFront()},onRemove:function(e){e._fadeAnimated?(mt(this._container,0),this._removeTimeout=setTimeout(i(at,void 0,this._container),200)):at(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=q(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ut(this._container),this},bringToBack:function(){return this._map&&lt(this._container),this},_prepareOpen:function(e,t,n){if(t instanceof Cn||(n=t,t=e),t instanceof Pn)for(var r in e._layers){t=e._layers[r];break}if(!n)if(t.getCenter)n=t.getCenter();else{if(!t.getLatLng)throw new Error("Unable to get source layer LatLng.");n=t.getLatLng()}return this._source=t,this.update(),n},_updateContent:function(){if(this._content){var e=this._contentNode,t="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof t)e.innerHTML=t;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(t)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),t=R(this.options.offset),n=this._getAnchor();this._zoomAnimated?vt(this._container,e.add(n)):t=t.add(e).add(n);var r=this._containerBottom=-t.y,i=this._containerLeft=-Math.round(this._containerWidth/2)+t.x;this._container.style.bottom=r+"px",this._container.style.left=i+"px"}},_getAnchor:function(){return[0,0]}}),Qn=Jn.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(e){return e.openPopup(this),this},onAdd:function(e){Jn.prototype.onAdd.call(this,e),e.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Rn||this._source.on("preclick",Rt))},onRemove:function(e){Jn.prototype.onRemove.call(this,e),e.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Rn||this._source.off("preclick",Rt))},getEvents:function(){var e=Jn.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this._close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var e="leaflet-popup",t=this._container=ot("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=ot("div",e+"-content-wrapper",t);if(this._contentNode=ot("div",e+"-content",n),Lt(n),jt(this._contentNode),Pt(n,"contextmenu",Rt),this._tipContainer=ot("div",e+"-tip-container",t),this._tip=ot("div",e+"-tip",this._tipContainer),this.options.closeButton){var r=this._closeButton=ot("a",e+"-close-button",t);r.href="#close",r.innerHTML="&#215;",Pt(r,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width="",t.whiteSpace="nowrap";var n=e.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),t.width=n+1+"px",t.whiteSpace="",t.height="";var r=e.offsetHeight,i=this.options.maxHeight;i&&r>i?(t.height=i+"px",pt(e,"leaflet-popup-scrolled")):ht(e,"leaflet-popup-scrolled"),this._containerWidth=this._container.offsetWidth},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center),n=this._getAnchor();vt(this._container,t.add(n))},_adjustPan:function(){if(this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var e=this._map,t=parseInt(it(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+t,r=this._containerWidth,i=new O(this._containerLeft,-n-this._containerBottom);i._add(gt(this._container));var o=e.layerPointToContainerPoint(i),a=R(this.options.autoPanPadding),s=R(this.options.autoPanPaddingTopLeft||a),u=R(this.options.autoPanPaddingBottomRight||a),l=e.getSize(),c=0,p=0;o.x+r+u.x>l.x&&(c=o.x+r-l.x+u.x),o.x-c-s.x<0&&(c=o.x-s.x),o.y+n+u.y>l.y&&(p=o.y+n-l.y+u.y),o.y-p-s.y<0&&(p=o.y-s.y),(c||p)&&e.fire("autopanstart").panBy([c,p])}},_onCloseButtonClick:function(e){this._close(),Dt(e)},_getAnchor:function(){return R(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});Kt.mergeOptions({closePopupOnClick:!0}),Kt.include({openPopup:function(e,t,n){return e instanceof Qn||(e=new Qn(n).setContent(e)),t&&e.setLatLng(t),this.hasLayer(e)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=e,this.addLayer(e))},closePopup:function(e){return e&&e!==this._popup||(e=this._popup,this._popup=null),e&&this.removeLayer(e),this}}),Cn.include({bindPopup:function(e,t){return e instanceof Qn?(f(e,t),this._popup=e,e._source=this):(this._popup&&!t||(this._popup=new Qn(t,this)),this._popup.setContent(e)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(e,t){return this._popup&&this._map&&(t=this._popup._prepareOpen(this,e,t),this._map.openPopup(this._popup,t)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(e){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(e)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(e){var t=e.layer||e.target;this._popup&&this._map&&(Dt(e),t instanceof Rn?this.openPopup(e.layer||e.target,e.latlng):this._map.hasLayer(this._popup)&&this._popup._source===t?this.closePopup():this.openPopup(t,e.latlng))},_movePopup:function(e){this._popup.setLatLng(e.latlng)},_onKeyPress:function(e){13===e.originalEvent.keyCode&&this._openPopup(e)}});var er=Jn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(e){Jn.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(e){Jn.prototype.onRemove.call(this,e),e.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var e=Jn.prototype.getEvents.call(this);return we&&!this.options.permanent&&(e.preclick=this._close),e},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var e="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ot("div",e)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(e){var t=this._map,n=this._container,r=t.latLngToContainerPoint(t.getCenter()),i=t.layerPointToContainerPoint(e),o=this.options.direction,a=n.offsetWidth,s=n.offsetHeight,u=R(this.options.offset),l=this._getAnchor();"top"===o?e=e.add(R(-a/2+u.x,-s+u.y+l.y,!0)):"bottom"===o?e=e.subtract(R(a/2-u.x,-u.y,!0)):"center"===o?e=e.subtract(R(a/2+u.x,s/2-l.y+u.y,!0)):"right"===o||"auto"===o&&i.x<r.x?(o="right",e=e.add(R(u.x+l.x,l.y-s/2+u.y,!0))):(o="left",e=e.subtract(R(a+l.x-u.x,s/2-l.y-u.y,!0))),ht(n,"leaflet-tooltip-right"),ht(n,"leaflet-tooltip-left"),ht(n,"leaflet-tooltip-top"),ht(n,"leaflet-tooltip-bottom"),pt(n,"leaflet-tooltip-"+o),vt(n,e)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e,this._container&&mt(this._container,e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPosition(t)},_getAnchor:function(){return R(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});Kt.include({openTooltip:function(e,t,n){return e instanceof er||(e=new er(n).setContent(e)),t&&e.setLatLng(t),this.hasLayer(e)?this:this.addLayer(e)},closeTooltip:function(e){return e&&this.removeLayer(e),this}}),Cn.include({bindTooltip:function(e,t){return e instanceof er?(f(e,t),this._tooltip=e,e._source=this):(this._tooltip&&!t||(this._tooltip=new er(t,this)),this._tooltip.setContent(e)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(e){if(e||!this._tooltipHandlersAdded){var t=e?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),we&&(n.click=this._openTooltip)),this[t](n),this._tooltipHandlersAdded=!e}},openTooltip:function(e,t){return this._tooltip&&this._map&&(t=this._tooltip._prepareOpen(this,e,t),this._map.openTooltip(this._tooltip,t),this._tooltip.options.interactive&&this._tooltip._container&&(pt(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(ht(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(e){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(e)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip:function(){return this._tooltip},_openTooltip:function(e){var t=e.layer||e.target;this._tooltip&&this._map&&this.openTooltip(t,this._tooltip.options.sticky?e.latlng:void 0)},_moveTooltip:function(e){var t,n,r=e.latlng;this._tooltip.options.sticky&&e.originalEvent&&(t=this._map.mouseEventToContainerPoint(e.originalEvent),n=this._map.containerPointToLayerPoint(t),r=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(r)}});var tr=An.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(e){var t=e&&"DIV"===e.tagName?e:document.createElement("div"),n=this.options;if(n.html instanceof Element?(st(t),t.appendChild(n.html)):t.innerHTML=!1!==n.html?n.html:"",n.bgPos){var r=R(n.bgPos);t.style.backgroundPosition=-r.x+"px "+-r.y+"px"}return this._setIconStyles(t,"icon"),t},createShadow:function(){return null}});An.Default=Sn;var nr=Cn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ye,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(e){f(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),at(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ut(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(lt(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=s(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return document.createElement("div")},getTileSize:function(){var e=this.options.tileSize;return e instanceof O?e:new O(e,e)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var t,n=this.getPane().children,r=-e(-1/0,1/0),i=0,o=n.length;i<o;i++)t=n[i].style.zIndex,n[i]!==this._container&&t&&(r=e(r,+t));isFinite(r)&&(this.options.zIndex=r+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Q){mt(this._container,this.options.opacity);var e=+new Date,t=!1,n=!1;for(var r in this._tiles){var i=this._tiles[r];if(i.current&&i.loaded){var o=Math.min(1,(e-i.loaded)/200);mt(i.el,o),o<1?t=!0:(i.active?n=!0:this._onOpaqueTile(i),i.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),t&&(C(this._fadeFrame),this._fadeFrame=k(this._updateOpacity,this))}},_onOpaqueTile:l,_initContainer:function(){this._container||(this._container=ot("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,t=this.options.maxZoom;if(void 0!==e){for(var n in this._levels)this._levels[n].el.children.length||n===e?(this._levels[n].el.style.zIndex=t-Math.abs(e-n),this._onUpdateLevel(n)):(at(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var r=this._levels[e],i=this._map;return r||((r=this._levels[e]={}).el=ot("div","leaflet-tile-container leaflet-zoom-animated",this._container),r.el.style.zIndex=t,r.origin=i.project(i.unproject(i.getPixelOrigin()),e).round(),r.zoom=e,this._setZoomTransform(r,i.getCenter(),i.getZoom()),r.el.offsetWidth,this._onCreateLevel(r)),this._level=r,r}},_onUpdateLevel:l,_onRemoveLevel:l,_onCreateLevel:l,_pruneTiles:function(){if(this._map){var e,t,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(e in this._tiles)(t=this._tiles[e]).retain=t.current;for(e in this._tiles)if((t=this._tiles[e]).current&&!t.active){var r=t.coords;this._retainParent(r.x,r.y,r.z,r.z-5)||this._retainChildren(r.x,r.y,r.z,r.z+2)}for(e in this._tiles)this._tiles[e].retain||this._removeTile(e)}}},_removeTilesAtZoom:function(e){for(var t in this._tiles)this._tiles[t].coords.z===e&&this._removeTile(t)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_invalidateAll:function(){for(var e in this._levels)at(this._levels[e].el),this._onRemoveLevel(e),delete this._levels[e];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(e,t,n,r){var i=Math.floor(e/2),o=Math.floor(t/2),a=n-1,s=new O(+i,+o);s.z=+a;var u=this._tileCoordsToKey(s),l=this._tiles[u];return l&&l.active?(l.retain=!0,!0):(l&&l.loaded&&(l.retain=!0),a>r&&this._retainParent(i,o,a,r))},_retainChildren:function(e,t,n,r){for(var i=2*e;i<2*e+2;i++)for(var o=2*t;o<2*t+2;o++){var a=new O(i,o);a.z=n+1;var s=this._tileCoordsToKey(a),u=this._tiles[s];u&&u.active?u.retain=!0:(u&&u.loaded&&(u.retain=!0),n+1<r&&this._retainChildren(i,o,n+1,r))}},_resetView:function(e){var t=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_animateZoom:function(e){this._setView(e.center,e.zoom,!0,e.noUpdate)},_clampZoom:function(e){var t=this.options;return void 0!==t.minNativeZoom&&e<t.minNativeZoom?t.minNativeZoom:void 0!==t.maxNativeZoom&&t.maxNativeZoom<e?t.maxNativeZoom:e},_setView:function(e,t,n,r){var i=this._clampZoom(Math.round(t));(void 0!==this.options.maxZoom&&i>this.options.maxZoom||void 0!==this.options.minZoom&&i<this.options.minZoom)&&(i=void 0);var o=this.options.updateWhenZooming&&i!==this._tileZoom;r&&!o||(this._tileZoom=i,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==i&&this._update(e),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(e,t)},_setZoomTransforms:function(e,t){for(var n in this._levels)this._setZoomTransform(this._levels[n],e,t)},_setZoomTransform:function(e,t,n){var r=this._map.getZoomScale(n,e.zoom),i=e.origin.multiplyBy(r).subtract(this._map._getNewPixelOrigin(t,n)).round();_e?yt(e.el,i,r):vt(e.el,i)},_resetGrid:function(){var e=this._map,t=e.options.crs,n=this._tileSize=this.getTileSize(),r=this._tileZoom,i=this._map.getPixelWorldBounds(this._tileZoom);i&&(this._globalTileRange=this._pxBoundsToTileRange(i)),this._wrapX=t.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,t.wrapLng[0]],r).x/n.x),Math.ceil(e.project([0,t.wrapLng[1]],r).x/n.y)],this._wrapY=t.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([t.wrapLat[0],0],r).y/n.x),Math.ceil(e.project([t.wrapLat[1],0],r).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(e){var t=this._map,n=t._animatingZoom?Math.max(t._animateToZoom,t.getZoom()):t.getZoom(),r=t.getZoomScale(n,this._tileZoom),i=t.project(e,this._tileZoom).floor(),o=t.getSize().divideBy(2*r);return new j(i.subtract(o),i.add(o))},_update:function(e){var t=this._map;if(t){var n=this._clampZoom(t.getZoom());if(void 0===e&&(e=t.getCenter()),void 0!==this._tileZoom){var r=this._getTiledPixelBounds(e),i=this._pxBoundsToTileRange(r),o=i.getCenter(),a=[],s=this.options.keepBuffer,u=new j(i.getBottomLeft().subtract([s,-s]),i.getTopRight().add([s,-s]));if(!(isFinite(i.min.x)&&isFinite(i.min.y)&&isFinite(i.max.x)&&isFinite(i.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var l in this._tiles){var c=this._tiles[l].coords;c.z===this._tileZoom&&u.contains(new O(c.x,c.y))||(this._tiles[l].current=!1)}if(Math.abs(n-this._tileZoom)>1)this._setView(e,n);else{for(var p=i.min.y;p<=i.max.y;p++)for(var h=i.min.x;h<=i.max.x;h++){var f=new O(h,p);if(f.z=this._tileZoom,this._isValidTile(f)){var d=this._tiles[this._tileCoordsToKey(f)];d?d.current=!0:a.push(f)}}if(a.sort(function(e,t){return e.distanceTo(o)-t.distanceTo(o)}),0!==a.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(h=0;h<a.length;h++)this._addTile(a[h],m);this._level.el.appendChild(m)}}}}},_isValidTile:function(e){var t=this._map.options.crs;if(!t.infinite){var n=this._globalTileRange;if(!t.wrapLng&&(e.x<n.min.x||e.x>n.max.x)||!t.wrapLat&&(e.y<n.min.y||e.y>n.max.y))return!1}if(!this.options.bounds)return!0;var r=this._tileCoordsToBounds(e);return B(this.options.bounds).overlaps(r)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToNwSe:function(e){var t=this._map,n=this.getTileSize(),r=e.scaleBy(n),i=r.add(n),o=t.unproject(r,e.z),a=t.unproject(i,e.z);return[o,a]},_tileCoordsToBounds:function(e){var t=this._tileCoordsToNwSe(e),n=new D(t[0],t[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(e){var t=e.split(":"),n=new O(+t[0],+t[1]);return n.z=+t[2],n},_removeTile:function(e){var t=this._tiles[e];t&&(at(t.el),delete this._tiles[e],this.fire("tileunload",{tile:t.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){pt(e,"leaflet-tile");var t=this.getTileSize();e.style.width=t.x+"px",e.style.height=t.y+"px",e.onselectstart=l,e.onmousemove=l,Q&&this.options.opacity<1&&mt(e,this.options.opacity),ne&&!re&&(e.style.WebkitBackfaceVisibility="hidden")},_addTile:function(e,t){var n=this._getTilePos(e),r=this._tileCoordsToKey(e),o=this.createTile(this._wrapCoords(e),i(this._tileReady,this,e));this._initTile(o),this.createTile.length<2&&k(i(this._tileReady,this,e,null,o)),vt(o,n),this._tiles[r]={el:o,coords:e,current:!0},t.appendChild(o),this.fire("tileloadstart",{tile:o,coords:e})},_tileReady:function(e,t,n){t&&this.fire("tileerror",{error:t,tile:n,coords:e});var r=this._tileCoordsToKey(e);(n=this._tiles[r])&&(n.loaded=+new Date,this._map._fadeAnimated?(mt(n.el,0),C(this._fadeFrame),this._fadeFrame=k(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),t||(pt(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:e})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Q||!this._map._fadeAnimated?k(this._pruneTiles,this):setTimeout(i(this._pruneTiles,this),250)))},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var t=new O(this._wrapX?u(e.x,this._wrapX):e.x,this._wrapY?u(e.y,this._wrapY):e.y);return t.z=e.z,t},_pxBoundsToTileRange:function(e){var t=this.getTileSize();return new j(e.min.unscaleBy(t).floor(),e.max.unscaleBy(t).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}}),rr=nr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(e,t){this._url=e,(t=f(this,t)).detectRetina&&ke&&t.maxZoom>0&&(t.tileSize=Math.floor(t.tileSize/2),t.zoomReverse?(t.zoomOffset--,t.minZoom++):(t.zoomOffset++,t.maxZoom--),t.minZoom=Math.max(0,t.minZoom)),"string"==typeof t.subdomains&&(t.subdomains=t.subdomains.split("")),ne||this.on("tileunload",this._onTileRemove)},setUrl:function(e,t){return this._url===e&&void 0===t&&(t=!0),this._url=e,t||this.redraw(),this},createTile:function(e,t){var n=document.createElement("img");return Pt(n,"load",i(this._tileOnLoad,this,t,n)),Pt(n,"error",i(this._tileOnError,this,t,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(e),n},getTileUrl:function(e){var t={r:ke?"@2x":"",s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var r=this._globalTileRange.max.y-e.y;this.options.tms&&(t.y=r),t["-y"]=r}return _(this._url,n(t,this.options))},_tileOnLoad:function(e,t){Q?setTimeout(i(e,this,null,t),0):e(null,t)},_tileOnError:function(e,t,n){var r=this.options.errorTileUrl;r&&t.getAttribute("src")!==r&&(t.src=r),e(n,t)},_onTileRemove:function(e){e.tile.onload=null},_getZoomForUrl:function(){var e=this._tileZoom,t=this.options.maxZoom,n=this.options.zoomReverse,r=this.options.zoomOffset;return n&&(e=t-e),e+r},_getSubdomain:function(e){var t=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_abortLoading:function(){var e,t;for(e in this._tiles)this._tiles[e].coords.z!==this._tileZoom&&((t=this._tiles[e].el).onload=l,t.onerror=l,t.complete||(t.src=g,at(t),delete this._tiles[e]))},_removeTile:function(e){var t=this._tiles[e];if(t)return oe||t.el.setAttribute("src",g),nr.prototype._removeTile.call(this,e)},_tileReady:function(e,t,n){if(this._map&&(!n||n.getAttribute("src")!==g))return nr.prototype._tileReady.call(this,e,t,n)}});function ir(e,t){return new rr(e,t)}var or=rr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(e,t){this._url=e;var r=n({},this.defaultWmsParams);for(var i in t)i in this.options||(r[i]=t[i]);var o=(t=f(this,t)).detectRetina&&ke?2:1,a=this.getTileSize();r.width=a.x*o,r.height=a.y*o,this.wmsParams=r},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[t]=this._crs.code,rr.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this._tileCoordsToNwSe(e),n=this._crs,r=z(n.project(t[0]),n.project(t[1])),i=r.min,o=r.max,a=(this._wmsVersion>=1.3&&this._crs===Tn?[i.y,i.x,o.y,o.x]:[i.x,i.y,o.x,o.y]).join(","),s=rr.prototype.getTileUrl.call(this,e);return s+d(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+a},setParams:function(e,t){return n(this.wmsParams,e),t||this.redraw(),this}});rr.WMS=or,ir.wms=function(e,t){return new or(e,t)};var ar=Cn.extend({options:{padding:.1,tolerance:0},initialize:function(e){f(this,e),a(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&pt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,t){var n=this._map.getZoomScale(t,this._zoom),r=gt(this._container),i=this._map.getSize().multiplyBy(.5+this.options.padding),o=this._map.project(this._center,t),a=this._map.project(e,t),s=a.subtract(o),u=i.multiplyBy(-n).add(r).add(i).subtract(s);_e?yt(this._container,u,n):vt(this._container,u)},_reset:function(){for(var e in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[e]._reset()},_onZoomEnd:function(){for(var e in this._layers)this._layers[e]._project()},_updatePaths:function(){for(var e in this._layers)this._layers[e]._update()},_update:function(){var e=this.options.padding,t=this._map.getSize(),n=this._map.containerPointToLayerPoint(t.multiplyBy(-e)).round();this._bounds=new j(n,n.add(t.multiplyBy(1+2*e)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),sr=ar.extend({getEvents:function(){var e=ar.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ar.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var e=this._container=document.createElement("canvas");Pt(e,"mousemove",s(this._onMouseMove,32,this),this),Pt(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Pt(e,"mouseout",this._handleMouseOut,this),this._ctx=e.getContext("2d")},_destroyContainer:function(){C(this._redrawRequest),delete this._ctx,at(this._container),St(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var e in this._redrawBounds=null,this._layers)this._layers[e]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){ar.prototype._update.call(this);var e=this._bounds,t=this._container,n=e.getSize(),r=ke?2:1;vt(t,e.min),t.width=r*n.x,t.height=r*n.y,t.style.width=n.x+"px",t.style.height=n.y+"px",ke&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y),this.fire("update")}},_reset:function(){ar.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(e){this._updateDashArray(e),this._layers[a(e)]=e;var t=e._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=t),this._drawLast=t,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(e){var t=e._order,n=t.next,r=t.prev;n?n.prev=r:this._drawLast=r,r?r.next=n:this._drawFirst=n,delete e._order,delete this._layers[a(e)],this._requestRedraw(e)},_updatePath:function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray:function(e){if("string"==typeof e.options.dashArray){var t,n,r=e.options.dashArray.split(/[, ]+/),i=[];for(n=0;n<r.length;n++){if(t=Number(r[n]),isNaN(t))return;i.push(t)}e.options._dashArray=i}else e.options._dashArray=e.options.dashArray},_requestRedraw:function(e){this._map&&(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||k(this._redraw,this))},_extendRedrawBounds:function(e){if(e._pxBounds){var t=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new j,this._redrawBounds.extend(e._pxBounds.min.subtract([t,t])),this._redrawBounds.extend(e._pxBounds.max.add([t,t]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var e=this._redrawBounds;if(e){var t=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,t.x,t.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var e,t=this._redrawBounds;if(this._ctx.save(),t){var n=t.getSize();this._ctx.beginPath(),this._ctx.rect(t.min.x,t.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var r=this._drawFirst;r;r=r.next)e=r.layer,(!t||e._pxBounds&&e._pxBounds.intersects(t))&&e._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(e,t){if(this._drawing){var n,r,i,o,a=e._parts,s=a.length,u=this._ctx;if(s){for(u.beginPath(),n=0;n<s;n++){for(r=0,i=a[n].length;r<i;r++)o=a[n][r],u[r?"lineTo":"moveTo"](o.x,o.y);t&&u.closePath()}this._fillStroke(u,e)}}},_updateCircle:function(e){if(this._drawing&&!e._empty()){var t=e._point,n=this._ctx,r=Math.max(Math.round(e._radius),1),i=(Math.max(Math.round(e._radiusY),1)||r)/r;1!==i&&(n.save(),n.scale(1,i)),n.beginPath(),n.arc(t.x,t.y/i,r,0,2*Math.PI,!1),1!==i&&n.restore(),this._fillStroke(n,e)}},_fillStroke:function(e,t){var n=t.options;n.fill&&(e.globalAlpha=n.fillOpacity,e.fillStyle=n.fillColor||n.color,e.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(e.setLineDash&&e.setLineDash(t.options&&t.options._dashArray||[]),e.globalAlpha=n.opacity,e.lineWidth=n.weight,e.strokeStyle=n.color,e.lineCap=n.lineCap,e.lineJoin=n.lineJoin,e.stroke())},_onClick:function(e){for(var t,n,r=this._map.mouseEventToLayerPoint(e),i=this._drawFirst;i;i=i.next)(t=i.layer).options.interactive&&t._containsPoint(r)&&!this._map._draggableMoved(t)&&(n=t);n&&(Vt(e),this._fireEvent([n],e))},_onMouseMove:function(e){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var t=this._map.mouseEventToLayerPoint(e);this._handleMouseHover(e,t)}},_handleMouseOut:function(e){var t=this._hoveredLayer;t&&(ht(this._container,"leaflet-interactive"),this._fireEvent([t],e,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(e,t){for(var n,r,i=this._drawFirst;i;i=i.next)(n=i.layer).options.interactive&&n._containsPoint(t)&&(r=n);r!==this._hoveredLayer&&(this._handleMouseOut(e),r&&(pt(this._container,"leaflet-interactive"),this._fireEvent([r],e,"mouseover"),this._hoveredLayer=r)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],e)},_fireEvent:function(e,t,n){this._map._fireDOMEvent(t,n||t.type,e)},_bringToFront:function(e){var t=e._order;if(t){var n=t.next,r=t.prev;n&&(n.prev=r,r?r.next=n:n&&(this._drawFirst=n),t.prev=this._drawLast,this._drawLast.next=t,t.next=null,this._drawLast=t,this._requestRedraw(e))}},_bringToBack:function(e){var t=e._order;if(t){var n=t.next,r=t.prev;r&&(r.next=n,n?n.prev=r:r&&(this._drawLast=r),t.prev=null,t.next=this._drawFirst,this._drawFirst.prev=t,this._drawFirst=t,this._requestRedraw(e))}}});function ur(e){return Ce?new sr(e):null}var lr=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+' class="lvml">')}}catch(e){return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),cr={_initContainer:function(){this._container=ot("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ar.prototype._update.call(this),this.fire("update"))},_initPath:function(e){var t=e._container=lr("shape");pt(t,"leaflet-vml-shape "+(this.options.className||"")),t.coordsize="1 1",e._path=lr("path"),t.appendChild(e._path),this._updateStyle(e),this._layers[a(e)]=e},_addPath:function(e){var t=e._container;this._container.appendChild(t),e.options.interactive&&e.addInteractiveTarget(t)},_removePath:function(e){var t=e._container;at(t),e.removeInteractiveTarget(t),delete this._layers[a(e)]},_updateStyle:function(e){var t=e._stroke,n=e._fill,r=e.options,i=e._container;i.stroked=!!r.stroke,i.filled=!!r.fill,r.stroke?(t||(t=e._stroke=lr("stroke")),i.appendChild(t),t.weight=r.weight+"px",t.color=r.color,t.opacity=r.opacity,r.dashArray?t.dashStyle=y(r.dashArray)?r.dashArray.join(" "):r.dashArray.replace(/( *, *)/g," "):t.dashStyle="",t.endcap=r.lineCap.replace("butt","flat"),t.joinstyle=r.lineJoin):t&&(i.removeChild(t),e._stroke=null),r.fill?(n||(n=e._fill=lr("fill")),i.appendChild(n),n.color=r.fillColor||r.color,n.opacity=r.fillOpacity):n&&(i.removeChild(n),e._fill=null)},_updateCircle:function(e){var t=e._point.round(),n=Math.round(e._radius),r=Math.round(e._radiusY||n);this._setPath(e,e._empty()?"M0 0":"AL "+t.x+","+t.y+" "+n+","+r+" 0,23592600")},_setPath:function(e,t){e._path.v=t},_bringToFront:function(e){ut(e._container)},_bringToBack:function(e){lt(e._container)}},pr=Pe?lr:Y,hr=ar.extend({getEvents:function(){var e=ar.prototype.getEvents.call(this);return e.zoomstart=this._onZoomStart,e},_initContainer:function(){this._container=pr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=pr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){at(this._container),St(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){ar.prototype._update.call(this);var e=this._bounds,t=e.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(t)||(this._svgSize=t,n.setAttribute("width",t.x),n.setAttribute("height",t.y)),vt(n,e.min),n.setAttribute("viewBox",[e.min.x,e.min.y,t.x,t.y].join(" ")),this.fire("update")}},_initPath:function(e){var t=e._path=pr("path");e.options.className&&pt(t,e.options.className),e.options.interactive&&pt(t,"leaflet-interactive"),this._updateStyle(e),this._layers[a(e)]=e},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){at(e._path),e.removeInteractiveTarget(e._path),delete this._layers[a(e)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var t=e._path,n=e.options;t&&(n.stroke?(t.setAttribute("stroke",n.color),t.setAttribute("stroke-opacity",n.opacity),t.setAttribute("stroke-width",n.weight),t.setAttribute("stroke-linecap",n.lineCap),t.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?t.setAttribute("stroke-dasharray",n.dashArray):t.removeAttribute("stroke-dasharray"),n.dashOffset?t.setAttribute("stroke-dashoffset",n.dashOffset):t.removeAttribute("stroke-dashoffset")):t.setAttribute("stroke","none"),n.fill?(t.setAttribute("fill",n.fillColor||n.color),t.setAttribute("fill-opacity",n.fillOpacity),t.setAttribute("fill-rule",n.fillRule||"evenodd")):t.setAttribute("fill","none"))},_updatePoly:function(e,t){this._setPath(e,X(e._parts,t))},_updateCircle:function(e){var t=e._point,n=Math.max(Math.round(e._radius),1),r=Math.max(Math.round(e._radiusY),1)||n,i="a"+n+","+r+" 0 1,0 ",o=e._empty()?"M0 0":"M"+(t.x-n)+","+t.y+i+2*n+",0 "+i+2*-n+",0 ";this._setPath(e,o)},_setPath:function(e,t){e._path.setAttribute("d",t)},_bringToFront:function(e){ut(e._path)},_bringToBack:function(e){lt(e._path)}});function fr(e){return Me||Pe?new hr(e):null}Pe&&hr.include(cr),Kt.include({getRenderer:function(e){var t=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return t||(t=this._renderer=this._createRenderer()),this.hasLayer(t)||this.addLayer(t),t},_getPaneRenderer:function(e){if("overlayPane"===e||void 0===e)return!1;var t=this._paneRenderers[e];return void 0===t&&(t=this._createRenderer({pane:e}),this._paneRenderers[e]=t),t},_createRenderer:function(e){return this.options.preferCanvas&&ur(e)||fr(e)}});var dr=Dn.extend({initialize:function(e,t){Dn.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return[(e=B(e)).getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});hr.create=pr,hr.pointsToPath=X,Bn.geometryToLayer=Nn,Bn.coordsToLatLng=qn,Bn.coordsToLatLngs=Fn,Bn.latLngToCoords=Un,Bn.latLngsToCoords=Vn,Bn.getFeature=Wn,Bn.asFeature=Gn,Kt.mergeOptions({boxZoom:!0});var mr=tn.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on("unload",this._destroy,this)},addHooks:function(){Pt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){St(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){at(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(e){if(!e.shiftKey||1!==e.which&&1!==e.button)return!1;this._clearDeferredResetState(),this._resetState(),Ye(),xt(),this._startPoint=this._map.mouseEventToContainerPoint(e),Pt(document,{contextmenu:Dt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(e){this._moved||(this._moved=!0,this._box=ot("div","leaflet-zoom-box",this._container),pt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(e);var t=new j(this._point,this._startPoint),n=t.getSize();vt(this._box,t.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(at(this._box),ht(this._container,"leaflet-crosshair")),Xe(),wt(),St(document,{contextmenu:Dt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(e){if((1===e.which||1===e.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(i(this._resetState,this),0);var t=new D(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(t).fire("boxzoomend",{boxZoomBounds:t})}},_onKeyDown:function(e){27===e.keyCode&&this._finish()}});Kt.addInitHook("addHandler","boxZoom",mr),Kt.mergeOptions({doubleClickZoom:!0});var _r=tn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var t=this._map,n=t.getZoom(),r=t.options.zoomDelta,i=e.originalEvent.shiftKey?n-r:n+r;"center"===t.options.doubleClickZoom?t.setZoom(i):t.setZoomAround(e.containerPoint,i)}});Kt.addInitHook("addHandler","doubleClickZoom",_r),Kt.mergeOptions({dragging:!0,inertia:!re,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var yr=tn.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new un(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}pt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ht(this._map._container,"leaflet-grab"),ht(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var e=this._map;if(e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var t=B(this._map.options.maxBounds);this._offsetLimit=z(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(e){if(this._map.options.inertia){var t=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(t),this._prunePositions(t)}this._map.fire("move",e).fire("drag",e)},_prunePositions:function(e){for(;this._positions.length>1&&e-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,t){return e-(e-t)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var e=this._draggable._newPos.subtract(this._draggable._startPos),t=this._offsetLimit;e.x<t.min.x&&(e.x=this._viscousLimit(e.x,t.min.x)),e.y<t.min.y&&(e.y=this._viscousLimit(e.y,t.min.y)),e.x>t.max.x&&(e.x=this._viscousLimit(e.x,t.max.x)),e.y>t.max.y&&(e.y=this._viscousLimit(e.y,t.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)}},_onPreDragWrap:function(){var e=this._worldWidth,t=Math.round(e/2),n=this._initialWorldOffset,r=this._draggable._newPos.x,i=(r-t+n)%e+t-n,o=(r+t+n)%e-t-n,a=Math.abs(i+n)<Math.abs(o+n)?i:o;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=a},_onDragEnd:function(e){var t=this._map,n=t.options,r=!n.inertia||this._times.length<2;if(t.fire("dragend",e),r)t.fire("moveend");else{this._prunePositions(+new Date);var i=this._lastPos.subtract(this._positions[0]),o=(this._lastTime-this._times[0])/1e3,a=n.easeLinearity,s=i.multiplyBy(a/o),u=s.distanceTo([0,0]),l=Math.min(n.inertiaMaxSpeed,u),c=s.multiplyBy(l/u),p=l/(n.inertiaDeceleration*a),h=c.multiplyBy(-p/2).round();h.x||h.y?(h=t._limitOffset(h,t.options.maxBounds),k(function(){t.panBy(h,{duration:p,easeLinearity:a,noMoveStart:!0,animate:!0})})):t.fire("moveend")}}});Kt.addInitHook("addHandler","dragging",yr),Kt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var vr=tn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;e.tabIndex<=0&&(e.tabIndex="0"),Pt(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),St(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var e=document.body,t=document.documentElement,n=e.scrollTop||t.scrollTop,r=e.scrollLeft||t.scrollLeft;this._map._container.focus(),window.scrollTo(r,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(e){var t,n,r=this._panKeys={},i=this.keyCodes;for(t=0,n=i.left.length;t<n;t++)r[i.left[t]]=[-1*e,0];for(t=0,n=i.right.length;t<n;t++)r[i.right[t]]=[e,0];for(t=0,n=i.down.length;t<n;t++)r[i.down[t]]=[0,e];for(t=0,n=i.up.length;t<n;t++)r[i.up[t]]=[0,-1*e]},_setZoomDelta:function(e){var t,n,r=this._zoomKeys={},i=this.keyCodes;for(t=0,n=i.zoomIn.length;t<n;t++)r[i.zoomIn[t]]=e;for(t=0,n=i.zoomOut.length;t<n;t++)r[i.zoomOut[t]]=-e},_addHooks:function(){Pt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){St(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t,n=e.keyCode,r=this._map;if(n in this._panKeys)r._panAnim&&r._panAnim._inProgress||(t=this._panKeys[n],e.shiftKey&&(t=R(t).multiplyBy(3)),r.panBy(t),r.options.maxBounds&&r.panInsideBounds(r.options.maxBounds));else if(n in this._zoomKeys)r.setZoom(r.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!r._popup||!r._popup.options.closeOnEscapeKey)return;r.closePopup()}Dt(e)}}});Kt.addInitHook("addHandler","keyboard",vr),Kt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var gr=tn.extend({addHooks:function(){Pt(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){St(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(e){var t=qt(e),n=this._map.options.wheelDebounceTime;this._delta+=t,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var r=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(i(this._performZoom,this),r),Dt(e)},_performZoom:function(){var e=this._map,t=e.getZoom(),n=this._map.options.zoomSnap||0;e._stop();var r=this._delta/(4*this._map.options.wheelPxPerZoomLevel),i=4*Math.log(2/(1+Math.exp(-Math.abs(r))))/Math.LN2,o=n?Math.ceil(i/n)*n:i,a=e._limitZoom(t+(this._delta>0?o:-o))-t;this._delta=0,this._startTime=null,a&&("center"===e.options.scrollWheelZoom?e.setZoom(t+a):e.setZoomAround(this._lastMousePos,t+a))}});Kt.addInitHook("addHandler","scrollWheelZoom",gr),Kt.mergeOptions({tap:!0,tapTolerance:15});var br=tn.extend({addHooks:function(){Pt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){St(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(e.touches){if(zt(e),this._fireClick=!0,e.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var t=e.touches[0],n=t.target;this._startPos=this._newPos=new O(t.clientX,t.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&pt(n,"leaflet-active"),this._holdTimeout=setTimeout(i(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",t))},this),1e3),this._simulateEvent("mousedown",t),Pt(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(e){if(clearTimeout(this._holdTimeout),St(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&e&&e.changedTouches){var t=e.changedTouches[0],n=t.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&ht(n,"leaflet-active"),this._simulateEvent("mouseup",t),this._isTapValid()&&this._simulateEvent("click",t)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(e){var t=e.touches[0];this._newPos=new O(t.clientX,t.clientY),this._simulateEvent("mousemove",t)},_simulateEvent:function(e,t){var n=document.createEvent("MouseEvents");n._simulated=!0,t.target._simulatedClick=!0,n.initMouseEvent(e,!0,!0,window,1,t.screenX,t.screenY,t.clientX,t.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(n)}});we&&!xe&&Kt.addInitHook("addHandler","tap",br),Kt.mergeOptions({touchZoom:we&&!re,bounceAtZoomLimits:!0});var xr=tn.extend({addHooks:function(){pt(this._map._container,"leaflet-touch-zoom"),Pt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ht(this._map._container,"leaflet-touch-zoom"),St(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var t=this._map;if(e.touches&&2===e.touches.length&&!t._animatingZoom&&!this._zooming){var n=t.mouseEventToContainerPoint(e.touches[0]),r=t.mouseEventToContainerPoint(e.touches[1]);this._centerPoint=t.getSize()._divideBy(2),this._startLatLng=t.containerPointToLatLng(this._centerPoint),"center"!==t.options.touchZoom&&(this._pinchStartLatLng=t.containerPointToLatLng(n.add(r)._divideBy(2))),this._startDist=n.distanceTo(r),this._startZoom=t.getZoom(),this._moved=!1,this._zooming=!0,t._stop(),Pt(document,"touchmove",this._onTouchMove,this),Pt(document,"touchend",this._onTouchEnd,this),zt(e)}},_onTouchMove:function(e){if(e.touches&&2===e.touches.length&&this._zooming){var t=this._map,n=t.mouseEventToContainerPoint(e.touches[0]),r=t.mouseEventToContainerPoint(e.touches[1]),o=n.distanceTo(r)/this._startDist;if(this._zoom=t.getScaleZoom(o,this._startZoom),!t.options.bounceAtZoomLimits&&(this._zoom<t.getMinZoom()&&o<1||this._zoom>t.getMaxZoom()&&o>1)&&(this._zoom=t._limitZoom(this._zoom)),"center"===t.options.touchZoom){if(this._center=this._startLatLng,1===o)return}else{var a=n._add(r)._divideBy(2)._subtract(this._centerPoint);if(1===o&&0===a.x&&0===a.y)return;this._center=t.unproject(t.project(this._pinchStartLatLng,this._zoom).subtract(a),this._zoom)}this._moved||(t._moveStart(!0,!1),this._moved=!0),C(this._animRequest);var s=i(t._move,t,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=k(s,this,!0),zt(e)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,C(this._animRequest),St(document,"touchmove",this._onTouchMove),St(document,"touchend",this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});Kt.addInitHook("addHandler","touchZoom",xr),Kt.BoxZoom=mr,Kt.DoubleClickZoom=_r,Kt.Drag=yr,Kt.Keyboard=vr,Kt.ScrollWheelZoom=gr,Kt.Tap=br,Kt.TouchZoom=xr,Object.freeze=t,e.version="1.5.1+build.2e3e0ffb",e.Control=Yt,e.control=Xt,e.Browser=Se,e.Evented=S,e.Mixin=rn,e.Util=M,e.Class=P,e.Handler=tn,e.extend=n,e.bind=i,e.stamp=a,e.setOptions=f,e.DomEvent=Zt,e.DomUtil=Mt,e.PosAnimation=Ht,e.Draggable=un,e.LineUtil=yn,e.PolyUtil=gn,e.Point=O,e.point=R,e.Bounds=j,e.bounds=z,e.Transformation=G,e.transformation=Z,e.Projection=wn,e.LatLng=N,e.latLng=q,e.LatLngBounds=D,e.latLngBounds=B,e.CRS=U,e.GeoJSON=Bn,e.geoJSON=Hn,e.geoJson=Kn,e.Layer=Cn,e.LayerGroup=Mn,e.layerGroup=function(e,t){return new Mn(e,t)},e.FeatureGroup=Pn,e.featureGroup=function(e){return new Pn(e)},e.ImageOverlay=Yn,e.imageOverlay=function(e,t,n){return new Yn(e,t,n)},e.VideoOverlay=Xn,e.videoOverlay=function(e,t,n){return new Xn(e,t,n)},e.SVGOverlay=$n,e.svgOverlay=function(e,t,n){return new $n(e,t,n)},e.DivOverlay=Jn,e.Popup=Qn,e.popup=function(e,t){return new Qn(e,t)},e.Tooltip=er,e.tooltip=function(e,t){return new er(e,t)},e.Icon=An,e.icon=function(e){return new An(e)},e.DivIcon=tr,e.divIcon=function(e){return new tr(e)},e.Marker=In,e.marker=function(e,t){return new In(e,t)},e.TileLayer=rr,e.tileLayer=ir,e.GridLayer=nr,e.gridLayer=function(e){return new nr(e)},e.SVG=hr,e.svg=fr,e.Renderer=ar,e.Canvas=sr,e.canvas=ur,e.Path=Rn,e.CircleMarker=jn,e.circleMarker=function(e,t){return new jn(e,t)},e.Circle=Ln,e.circle=function(e,t,n){return new Ln(e,t,n)},e.Polyline=zn,e.polyline=function(e,t){return new zn(e,t)},e.Polygon=Dn,e.polygon=function(e,t){return new Dn(e,t)},e.Rectangle=dr,e.rectangle=function(e,t){return new dr(e,t)},e.Map=Kt,e.map=function(e,t){return new Kt(e,t)};var wr=window.L;e.noConflict=function(){return window.L=wr,this},window.L=e}(t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),o=u(i),a=n(2),s=(u(n(0)),u(n(6)));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={data:0,range:null,filter:null},l(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),r(t,[{key:"componentDidMount",value:function(){this.addDataview()}},{key:"componentDidUpdate",value:function(e){new s.default.filter.BoundingBoxLeaflet(this.props.map);e!==this.props&&this.dataView.addFilter(this.props.boundingbox)}},{key:"addDataview",value:function(){var e=this,t=this.props,n=t.locale,r=t.currencyType;this.dataView=new s.default.dataview.Formula(this.props.layer,this.props.column,{operation:this.props.operation}),this.dataView.on("dataChanged",function(t){var i=void 0;i=!0===e.props.round&&!1===e.props.currency?t.result.toLocaleString(n,{maximumFractionDigits:0}):!0===e.props.currency&&!1===e.props.round?t.result.toLocaleString(n,{maximumFractionDigits:2,style:"currency",currency:r}):!0===e.props.currency&&!0===e.props.round?t.result.toLocaleString(n,{maximumFractionDigits:0,minimumFractionDigits:0,style:"currency",currency:r}):t.result.toLocaleString(n,{maximumFractionDigits:2}),e.setState({data:i})}),this.props.client.addDataview(this.dataView)}},{key:"render",value:function(){var e=this.state.data,t=this.props,n=t.title,r=t.description;return o.default.createElement("div",null,o.default.createElement("h4",{className:"as-subheader as-font--medium"},n),o.default.createElement("p",{className:"as-body"},r),o.default.createElement("h2",{className:"as-display"},e))}}]),t}();t.default=(0,a.connect)(function(e){return{client:e.client,map:e.map,filters:e.filters,layers:e.layers,viewport:e.viewport,boundingbox:e.boundingbox}},function(e){return{setNeighbourhoods:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(t){return e(setNeighbourhoods(t))})}})(c)},function(e,t,n){"use strict";(function(t){var r=n(7),i=n(91),o={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var s,u={adapter:("undefined"!=typeof XMLHttpRequest?s=n(36):void 0!==t&&(s=n(36)),s),transformRequest:[function(e,t){return i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(a(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},r.forEach(["delete","get","head"],function(e){u.headers[e]={}}),r.forEach(["post","put","patch"],function(e){u.headers[e]=r.merge(o)}),e.exports=u}).call(this,n(30))},function(e,t,n){"use strict";function r(e){return"/"===e.charAt(0)}function i(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}n.r(t),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e&&e.split("/")||[],o=t&&t.split("/")||[],a=e&&r(e),s=t&&r(t),u=a||s;if(e&&r(e)?o=n:n.length&&(o.pop(),o=o.concat(n)),!o.length)return"/";var l=void 0;if(o.length){var c=o[o.length-1];l="."===c||".."===c||""===c}else l=!1;for(var p=0,h=o.length;h>=0;h--){var f=o[h];"."===f?i(o,h):".."===f?(i(o,h),p++):p&&(i(o,h),p--)}if(!u)for(;p--;p)o.unshift("..");!u||""===o[0]||o[0]&&r(o[0])||o.unshift("");var d=o.join("/");return l&&"/"!==d.substr(-1)&&(d+="/"),d}},function(e,t,n){"use strict";n.r(t);var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every(function(t,r){return e(t,n[r])});var i=void 0===t?"undefined":r(t);if(i!==(void 0===n?"undefined":r(n)))return!1;if("object"===i){var o=t.valueOf(),a=n.valueOf();if(o!==t||a!==n)return e(o,a);var s=Object.keys(t),u=Object.keys(n);return s.length===u.length&&s.every(function(r){return e(t[r],n[r])})}return!1}},function(e,t,n){"use strict";n.r(t);var r=n(12),i=n(23),o={INIT:"@@redux/INIT"};function a(e,t,n){var s;if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(a)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var u=e,l=t,c=[],p=c,h=!1;function f(){p===c&&(p=c.slice())}function d(){return l}function m(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var t=!0;return f(),p.push(e),function(){if(t){t=!1,f();var n=p.indexOf(e);p.splice(n,1)}}}function _(e){if(!Object(r.a)(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(h)throw new Error("Reducers may not dispatch actions.");try{h=!0,l=u(l,e)}finally{h=!1}for(var t=c=p,n=0;n<t.length;n++){(0,t[n])()}return e}return _({type:o.INIT}),(s={dispatch:_,subscribe:m,getState:d,replaceReducer:function(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");u=e,_({type:o.INIT})}})[i.a]=function(){var e,t=m;return(e={subscribe:function(e){if("object"!=typeof e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(d())}return n(),{unsubscribe:t(n)}}})[i.a]=function(){return this},e},s}function s(e,t){var n=t&&t.type;return"Given action "+(n&&'"'+n.toString()+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function u(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"==typeof e[i]&&(n[i]=e[i])}var a=Object.keys(n);var u=void 0;try{!function(e){Object.keys(e).forEach(function(t){var n=e[t];if(void 0===n(void 0,{type:o.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+o.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}(n)}catch(e){u=e}return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if(u)throw u;for(var r=!1,i={},o=0;o<a.length;o++){var l=a[o],c=n[l],p=e[l],h=c(p,t);if(void 0===h){var f=s(l,t);throw new Error(f)}i[l]=h,r=r||h!==p}return r?i:e}}function l(e,t){return function(){return t(e.apply(void 0,arguments))}}function c(e,t){if("function"==typeof e)return l(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(e),r={},i=0;i<n.length;i++){var o=n[i],a=e[o];"function"==typeof a&&(r[o]=l(a,t))}return r}function p(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}var h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function f(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(n,r,i){var o,a=e(n,r,i),s=a.dispatch,u={getState:a.getState,dispatch:function(e){return s(e)}};return o=t.map(function(e){return e(u)}),s=p.apply(void 0,o)(a.dispatch),h({},a,{dispatch:s})}}}n.d(t,"createStore",function(){return a}),n.d(t,"combineReducers",function(){return u}),n.d(t,"bindActionCreators",function(){return c}),n.d(t,"applyMiddleware",function(){return f}),n.d(t,"compose",function(){return p})},function(e,t,n){"use strict";(function(e,r){var i,o=n(43);i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:r;var a=Object(o.a)(i);t.a=a}).call(this,n(14),n(26)(e))},function(e,t,n){e.exports=function e(t){"use strict";var n=/^\0+/g,r=/[\0\r\f]/g,i=/: */g,o=/zoo|gra/,a=/([,: ])(transform)/g,s=/,+\s*(?![^(]*[)])/g,u=/ +\s*(?![^(]*[)])/g,l=/ *[\0] */g,c=/,\r+?/g,p=/([\t\r\n ])*\f?&/g,h=/:global\(((?:[^\(\)\[\]]*|\[.*\]|\([^\(\)]*\))*)\)/g,f=/\W+/g,d=/@(k\w+)\s*(\S*)\s*/,m=/::(place)/g,_=/:(read-only)/g,y=/\s+(?=[{\];=:>])/g,v=/([[}=:>])\s+/g,g=/(\{[^{]+?);(?=\})/g,b=/\s{2,}/g,x=/([^\(])(:+) */g,w=/[svh]\w+-[tblr]{2}/,E=/\(\s*(.*)\s*\)/g,T=/([\s\S]*?);/g,k=/-self|flex-/g,C=/[^]*?(:[rp][el]a[\w-]+)[^]*/,M=/stretch|:\s*\w+\-(?:conte|avail)/,P=/([^-])(image-set\()/,A="-webkit-",S="-moz-",O="-ms-",I=59,R=125,j=123,L=40,z=41,D=91,B=93,N=10,q=13,F=9,U=64,V=32,W=38,G=45,Z=95,H=42,K=44,Y=58,X=39,$=34,J=47,Q=62,ee=43,te=126,ne=0,re=12,ie=11,oe=107,ae=109,se=115,ue=112,le=111,ce=105,pe=99,he=100,fe=112,de=1,me=1,_e=0,ye=1,ve=1,ge=1,be=0,xe=0,we=0,Ee=[],Te=[],ke=0,Ce=null,Me=-2,Pe=-1,Ae=0,Se=1,Oe=2,Ie=3,Re=0,je=1,Le="",ze="",De="";function Be(e,t,i,o,a){for(var s,u,c=0,p=0,h=0,f=0,y=0,v=0,g=0,b=0,w=0,T=0,k=0,C=0,M=0,P=0,Z=0,be=0,Te=0,Ce=0,Me=0,Pe=i.length,qe=Pe-1,Ze="",He="",Ke="",Ye="",Xe="",$e="";Z<Pe;){if(g=i.charCodeAt(Z),Z===qe&&p+f+h+c!==0&&(0!==p&&(g=p===J?N:J),f=h=c=0,Pe++,qe++),p+f+h+c===0){if(Z===qe&&(be>0&&(He=He.replace(r,"")),He.trim().length>0)){switch(g){case V:case F:case I:case q:case N:break;default:He+=i.charAt(Z)}g=I}if(1===Te)switch(g){case j:case R:case I:case $:case X:case L:case z:case K:Te=0;case F:case q:case N:case V:break;default:for(Te=0,Me=Z,y=g,Z--,g=I;Me<Pe;)switch(i.charCodeAt(Me++)){case N:case q:case I:++Z,g=y,Me=Pe;break;case Y:be>0&&(++Z,g=y);case j:Me=Pe}}switch(g){case j:for(He=He.trim(),y=He.charCodeAt(0),k=1,Me=++Z;Z<Pe;){switch(g=i.charCodeAt(Z)){case j:k++;break;case R:k--;break;case J:switch(v=i.charCodeAt(Z+1)){case H:case J:Z=Ge(v,Z,qe,i)}break;case D:g++;case L:g++;case $:case X:for(;Z++<qe&&i.charCodeAt(Z)!==g;);}if(0===k)break;Z++}switch(Ke=i.substring(Me,Z),y===ne&&(y=(He=He.replace(n,"").trim()).charCodeAt(0)),y){case U:switch(be>0&&(He=He.replace(r,"")),v=He.charCodeAt(1)){case he:case ae:case se:case G:s=t;break;default:s=Ee}if(Ke=Be(t,s,Ke,v,a+1),Me=Ke.length,we>0&&0===Me&&(Me=He.length),ke>0&&(s=Ne(Ee,He,Ce),u=We(Ie,Ke,s,t,me,de,Me,v,a,o),He=s.join(""),void 0!==u&&0===(Me=(Ke=u.trim()).length)&&(v=0,Ke="")),Me>0)switch(v){case se:He=He.replace(E,Ve);case he:case ae:case G:Ke=He+"{"+Ke+"}";break;case oe:He=He.replace(d,"$1 $2"+(je>0?Le:"")),Ke=He+"{"+Ke+"}",Ke=1===ve||2===ve&&Ue("@"+Ke,3)?"@"+A+Ke+"@"+Ke:"@"+Ke;break;default:Ke=He+Ke,o===fe&&(Ye+=Ke,Ke="")}else Ke="";break;default:Ke=Be(t,Ne(t,He,Ce),Ke,o,a+1)}Xe+=Ke,C=0,Te=0,P=0,be=0,Ce=0,M=0,He="",Ke="",g=i.charCodeAt(++Z);break;case R:case I:if(He=(be>0?He.replace(r,""):He).trim(),(Me=He.length)>1)switch(0===P&&((y=He.charCodeAt(0))===G||y>96&&y<123)&&(Me=(He=He.replace(" ",":")).length),ke>0&&void 0!==(u=We(Se,He,t,e,me,de,Ye.length,o,a,o))&&0===(Me=(He=u.trim()).length)&&(He="\0\0"),y=He.charCodeAt(0),v=He.charCodeAt(1),y){case ne:break;case U:if(v===ce||v===pe){$e+=He+i.charAt(Z);break}default:if(He.charCodeAt(Me-1)===Y)break;Ye+=Fe(He,y,v,He.charCodeAt(2))}C=0,Te=0,P=0,be=0,Ce=0,He="",g=i.charCodeAt(++Z)}}switch(g){case q:case N:if(p+f+h+c+xe===0)switch(T){case z:case X:case $:case U:case te:case Q:case H:case ee:case J:case G:case Y:case K:case I:case j:case R:break;default:P>0&&(Te=1)}p===J?p=0:ye+C===0&&o!==oe&&He.length>0&&(be=1,He+="\0"),ke*Re>0&&We(Ae,He,t,e,me,de,Ye.length,o,a,o),de=1,me++;break;case I:case R:if(p+f+h+c===0){de++;break}default:switch(de++,Ze=i.charAt(Z),g){case F:case V:if(f+c+p===0)switch(b){case K:case Y:case F:case V:Ze="";break;default:g!==V&&(Ze=" ")}break;case ne:Ze="\\0";break;case re:Ze="\\f";break;case ie:Ze="\\v";break;case W:f+p+c===0&&ye>0&&(Ce=1,be=1,Ze="\f"+Ze);break;case 108:if(f+p+c+_e===0&&P>0)switch(Z-P){case 2:b===ue&&i.charCodeAt(Z-3)===Y&&(_e=b);case 8:w===le&&(_e=w)}break;case Y:f+p+c===0&&(P=Z);break;case K:p+h+f+c===0&&(be=1,Ze+="\r");break;case $:case X:0===p&&(f=f===g?0:0===f?g:f);break;case D:f+p+h===0&&c++;break;case B:f+p+h===0&&c--;break;case z:f+p+c===0&&h--;break;case L:if(f+p+c===0){if(0===C)switch(2*b+3*w){case 533:break;default:k=0,C=1}h++}break;case U:p+h+f+c+P+M===0&&(M=1);break;case H:case J:if(f+c+h>0)break;switch(p){case 0:switch(2*g+3*i.charCodeAt(Z+1)){case 235:p=J;break;case 220:Me=Z,p=H}break;case H:g===J&&b===H&&Me+2!==Z&&(33===i.charCodeAt(Me+2)&&(Ye+=i.substring(Me,Z+1)),Ze="",p=0)}}if(0===p){if(ye+f+c+M===0&&o!==oe&&g!==I)switch(g){case K:case te:case Q:case ee:case z:case L:if(0===C){switch(b){case F:case V:case N:case q:Ze+="\0";break;default:Ze="\0"+Ze+(g===K?"":"\0")}be=1}else switch(g){case L:P+7===Z&&108===b&&(P=0),C=++k;break;case z:0==(C=--k)&&(be=1,Ze+="\0")}break;case F:case V:switch(b){case ne:case j:case R:case I:case K:case re:case F:case V:case N:case q:break;default:0===C&&(be=1,Ze+="\0")}}He+=Ze,g!==V&&g!==F&&(T=g)}}w=b,b=g,Z++}if(Me=Ye.length,we>0&&0===Me&&0===Xe.length&&0===t[0].length==0&&(o!==ae||1===t.length&&(ye>0?ze:De)===t[0])&&(Me=t.join(",").length+2),Me>0){if(s=0===ye&&o!==oe?function(e){for(var t,n,i=0,o=e.length,a=Array(o);i<o;++i){for(var s=e[i].split(l),u="",c=0,p=0,h=0,f=0,d=s.length;c<d;++c)if(!(0===(p=(n=s[c]).length)&&d>1)){if(h=u.charCodeAt(u.length-1),f=n.charCodeAt(0),t="",0!==c)switch(h){case H:case te:case Q:case ee:case V:case L:break;default:t=" "}switch(f){case W:n=t+ze;case te:case Q:case ee:case V:case z:case L:break;case D:n=t+n+ze;break;case Y:switch(2*n.charCodeAt(1)+3*n.charCodeAt(2)){case 530:if(ge>0){n=t+n.substring(8,p-1);break}default:(c<1||s[c-1].length<1)&&(n=t+ze+n)}break;case K:t="";default:n=p>1&&n.indexOf(":")>0?t+n.replace(x,"$1"+ze+"$2"):t+n+ze}u+=n}a[i]=u.replace(r,"").trim()}return a}(t):t,ke>0&&void 0!==(u=We(Oe,Ye,s,e,me,de,Me,o,a,o))&&0===(Ye=u).length)return $e+Ye+Xe;if(Ye=s.join(",")+"{"+Ye+"}",ve*_e!=0){switch(2!==ve||Ue(Ye,2)||(_e=0),_e){case le:Ye=Ye.replace(_,":"+S+"$1")+Ye;break;case ue:Ye=Ye.replace(m,"::"+A+"input-$1")+Ye.replace(m,"::"+S+"$1")+Ye.replace(m,":"+O+"input-$1")+Ye}_e=0}}return $e+Ye+Xe}function Ne(e,t,n){var r=t.trim().split(c),i=r,o=r.length,a=e.length;switch(a){case 0:case 1:for(var s=0,u=0===a?"":e[0]+" ";s<o;++s)i[s]=qe(u,i[s],n,a).trim();break;default:for(var s=0,l=0,i=[];s<o;++s)for(var p=0;p<a;++p)i[l++]=qe(e[p]+" ",r[s],n,a).trim()}return i}function qe(e,t,n,r){var i=t,o=i.charCodeAt(0);switch(o<33&&(o=(i=i.trim()).charCodeAt(0)),o){case W:switch(ye+r){case 0:case 1:if(0===e.trim().length)break;default:return i.replace(p,"$1"+e.trim())}break;case Y:switch(i.charCodeAt(1)){case 103:if(ge>0&&ye>0)return i.replace(h,"$1").replace(p,"$1"+De);break;default:return e.trim()+i.replace(p,"$1"+e.trim())}default:if(n*ye>0&&i.indexOf("\f")>0)return i.replace(p,(e.charCodeAt(0)===Y?"":"$1")+e.trim())}return e+i}function Fe(e,t,n,r){var l,c=0,p=e+";",h=2*t+3*n+4*r;if(944===h)return function(e){var t=e.length,n=e.indexOf(":",9)+1,r=e.substring(0,n).trim(),i=e.substring(n,t-1).trim();switch(e.charCodeAt(9)*je){case 0:break;case G:if(110!==e.charCodeAt(10))break;default:for(var o=i.split((i="",s)),a=0,n=0,t=o.length;a<t;n=0,++a){for(var l=o[a],c=l.split(u);l=c[n];){var p=l.charCodeAt(0);if(1===je&&(p>U&&p<90||p>96&&p<123||p===Z||p===G&&l.charCodeAt(1)!==G))switch(isNaN(parseFloat(l))+(-1!==l.indexOf("("))){case 1:switch(l){case"infinite":case"alternate":case"backwards":case"running":case"normal":case"forwards":case"both":case"none":case"linear":case"ease":case"ease-in":case"ease-out":case"ease-in-out":case"paused":case"reverse":case"alternate-reverse":case"inherit":case"initial":case"unset":case"step-start":case"step-end":break;default:l+=Le}}c[n++]=l}i+=(0===a?"":",")+c.join(" ")}}return i=r+i+";",1===ve||2===ve&&Ue(i,1)?A+i+i:i}(p);if(0===ve||2===ve&&!Ue(p,1))return p;switch(h){case 1015:return 97===p.charCodeAt(10)?A+p+p:p;case 951:return 116===p.charCodeAt(3)?A+p+p:p;case 963:return 110===p.charCodeAt(5)?A+p+p:p;case 1009:if(100!==p.charCodeAt(4))break;case 969:case 942:return A+p+p;case 978:return A+p+S+p+p;case 1019:case 983:return A+p+S+p+O+p+p;case 883:return p.charCodeAt(8)===G?A+p+p:p.indexOf("image-set(",11)>0?p.replace(P,"$1"+A+"$2")+p:p;case 932:if(p.charCodeAt(4)===G)switch(p.charCodeAt(5)){case 103:return A+"box-"+p.replace("-grow","")+A+p+O+p.replace("grow","positive")+p;case 115:return A+p+O+p.replace("shrink","negative")+p;case 98:return A+p+O+p.replace("basis","preferred-size")+p}return A+p+O+p+p;case 964:return A+p+O+"flex-"+p+p;case 1023:if(99!==p.charCodeAt(8))break;return l=p.substring(p.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),A+"box-pack"+l+A+p+O+"flex-pack"+l+p;case 1005:return o.test(p)?p.replace(i,":"+A)+p.replace(i,":"+S)+p:p;case 1e3:switch(l=p.substring(13).trim(),c=l.indexOf("-")+1,l.charCodeAt(0)+l.charCodeAt(c)){case 226:l=p.replace(w,"tb");break;case 232:l=p.replace(w,"tb-rl");break;case 220:l=p.replace(w,"lr");break;default:return p}return A+p+O+l+p;case 1017:if(-1===p.indexOf("sticky",9))return p;case 975:switch(c=(p=e).length-10,l=(33===p.charCodeAt(c)?p.substring(0,c):p).substring(e.indexOf(":",7)+1).trim(),h=l.charCodeAt(0)+(0|l.charCodeAt(7))){case 203:if(l.charCodeAt(8)<111)break;case 115:p=p.replace(l,A+l)+";"+p;break;case 207:case 102:p=p.replace(l,A+(h>102?"inline-":"")+"box")+";"+p.replace(l,A+l)+";"+p.replace(l,O+l+"box")+";"+p}return p+";";case 938:if(p.charCodeAt(5)===G)switch(p.charCodeAt(6)){case 105:return l=p.replace("-items",""),A+p+A+"box-"+l+O+"flex-"+l+p;case 115:return A+p+O+"flex-item-"+p.replace(k,"")+p;default:return A+p+O+"flex-line-pack"+p.replace("align-content","").replace(k,"")+p}break;case 973:case 989:if(p.charCodeAt(3)!==G||122===p.charCodeAt(4))break;case 931:case 953:if(!0===M.test(e))return 115===(l=e.substring(e.indexOf(":")+1)).charCodeAt(0)?Fe(e.replace("stretch","fill-available"),t,n,r).replace(":fill-available",":stretch"):p.replace(l,A+l)+p.replace(l,S+l.replace("fill-",""))+p;break;case 962:if(p=A+p+(102===p.charCodeAt(5)?O+p:"")+p,n+r===211&&105===p.charCodeAt(13)&&p.indexOf("transform",10)>0)return p.substring(0,p.indexOf(";",27)+1).replace(a,"$1"+A+"$2")+p}return p}function Ue(e,t){var n=e.indexOf(1===t?":":"{"),r=e.substring(0,3!==t?n:10),i=e.substring(n+1,e.length-1);return Ce(2!==t?r:r.replace(C,"$1"),i,t)}function Ve(e,t){var n=Fe(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(T," or ($1)").substring(4):"("+t+")"}function We(e,t,n,r,i,o,a,s,u,l){for(var c,p=0,h=t;p<ke;++p)switch(c=Te[p].call(He,e,h,n,r,i,o,a,s,u,l)){case void 0:case!1:case!0:case null:break;default:h=c}if(h!==t)return h}function Ge(e,t,n,r){for(var i=t+1;i<n;++i)switch(r.charCodeAt(i)){case J:if(e===H&&r.charCodeAt(i-1)===H&&t+2!==i)return i+1;break;case N:if(e===J)return i+1}return i}function Ze(e){for(var t in e){var n=e[t];switch(t){case"keyframe":je=0|n;break;case"global":ge=0|n;break;case"cascade":ye=0|n;break;case"compress":be=0|n;break;case"semicolon":xe=0|n;break;case"preserve":we=0|n;break;case"prefix":Ce=null,n?"function"!=typeof n?ve=1:(ve=2,Ce=n):ve=0}}return Ze}function He(t,n){if(void 0!==this&&this.constructor===He)return e(t);var i=t,o=i.charCodeAt(0);o<33&&(o=(i=i.trim()).charCodeAt(0)),je>0&&(Le=i.replace(f,o===D?"":"-")),o=1,1===ye?De=i:ze=i;var a,s=[De];ke>0&&void 0!==(a=We(Pe,n,s,s,me,de,0,0,0,0))&&"string"==typeof a&&(n=a);var u=Be(Ee,s,n,0,0);return ke>0&&void 0!==(a=We(Me,u,s,s,me,de,u.length,0,0,0))&&"string"!=typeof(u=a)&&(o=0),Le="",De="",ze="",_e=0,me=1,de=1,be*o==0?u:function(e){return e.replace(r,"").replace(y,"").replace(v,"$1").replace(g,"$1").replace(b," ")}(u)}return He.use=function e(t){switch(t){case void 0:case null:ke=Te.length=0;break;default:if("function"==typeof t)Te[ke++]=t;else if("object"==typeof t)for(var n=0,r=t.length;n<r;++n)e(t[n]);else Re=0|!!t}return e},He.set=Ze,void 0!==t&&Ze(t),He}(null)},function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,u=a(e),l=1;l<arguments.length;l++){for(var c in n=Object(arguments[l]))i.call(n,c)&&(u[c]=n[c]);if(r){s=r(n);for(var p=0;p<s.length;p++)o.call(n,s[p])&&(u[s[p]]=n[s[p]])}}return u}},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){"use strict";e.exports=function(e){}},function(e,t,n){"use strict";e.exports=n(58)},function(e,t,n){"use strict";n.r(t);var r=!0;t.default=function(e,t){if(!r){if(e)return;var n="Warning: "+t;"undefined"!=typeof console&&console.warn(n);try{throw Error(n)}catch(e){}}}},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,l=[],c=!1,p=-1;function h(){c&&u&&(c=!1,u.length?l=u.concat(l):p=-1,l.length&&f())}function f(){if(!c){var e=s(h);c=!0;for(var t=l.length;t;){for(u=l,l=[];++p<t;)u&&u[p].run();p=-1,t=l.length}u=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new d(e,t)),1!==l.length||c||s(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(1));i(n(0));function i(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.railroad,n=e.cause,i=e.weather,o=e.accident_type,a=e.image,s=e.city;return r.default.createElement("as-infowindow",{src:a},r.default.createElement("h1",{className:"as-title"},s),r.default.createElement("p",null,r.default.createElement("span",{className:"as-badge"},o)),r.default.createElement("br",null),r.default.createElement("p",{className:"as-caption"},n),r.default.createElement("br",null),r.default.createElement("h4",{className:"as-subheader"},"Company"),r.default.createElement("p",{className:"as-body"},t),r.default.createElement("br",null),r.default.createElement("h4",{className:"as-subheader"},"Weather"),r.default.createElement("p",{className:"as-body"},i))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(65));i(n(66));function i(e){return e&&e.__esModule?e:{default:e}}t.default={railaccidents:r.default}},function(e,t,n){
/*!
 * CARTO VL js https://carto.com/
 * Version: 0.9.0
 * 
 */
var r;window,r=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/index.js")}({"./node_modules/@babel/runtime/helpers/arrayWithHoles.js":
/*!***************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/arrayWithHoles.js ***!
  \***************************************************************/
/*! no static exports found */function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},"./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js":
/*!******************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js ***!
  \******************************************************************/
/*! no static exports found */function(e,t){e.exports=function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}},"./node_modules/@babel/runtime/helpers/assertThisInitialized.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/assertThisInitialized.js ***!
  \**********************************************************************/
/*! no static exports found */function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},"./node_modules/@babel/runtime/helpers/asyncToGenerator.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/asyncToGenerator.js ***!
  \*****************************************************************/
/*! no static exports found */function(e,t){function n(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise(function(i,o){var a=e.apply(t,r);function s(e){n(a,i,o,s,u,"next",e)}function u(e){n(a,i,o,s,u,"throw",e)}s(void 0)})}}},"./node_modules/@babel/runtime/helpers/classCallCheck.js":
/*!***************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/classCallCheck.js ***!
  \***************************************************************/
/*! no static exports found */function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},"./node_modules/@babel/runtime/helpers/construct.js":
/*!**********************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/construct.js ***!
  \**********************************************************/
/*! no static exports found */function(e,t,n){var r=n(/*! ./setPrototypeOf */"./node_modules/@babel/runtime/helpers/setPrototypeOf.js");function i(t,n,o){return!function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?e.exports=i=function(e,t,n){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return n&&r(o,n.prototype),o}:e.exports=i=Reflect.construct,i.apply(null,arguments)}e.exports=i},"./node_modules/@babel/runtime/helpers/createClass.js":
/*!************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/createClass.js ***!
  \************************************************************/
/*! no static exports found */function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},"./node_modules/@babel/runtime/helpers/defineProperty.js":
/*!***************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/defineProperty.js ***!
  \***************************************************************/
/*! no static exports found */function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},"./node_modules/@babel/runtime/helpers/get.js":
/*!****************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/get.js ***!
  \****************************************************/
/*! no static exports found */function(e,t,n){n(/*! ./getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js");var r=n(/*! ./superPropBase */"./node_modules/@babel/runtime/helpers/superPropBase.js");function i(t,n,o){return"undefined"!=typeof Reflect&&Reflect.get?e.exports=i=Reflect.get:e.exports=i=function(e,t,n){var i=r(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}},i(t,n,o||t)}e.exports=i},"./node_modules/@babel/runtime/helpers/getPrototypeOf.js":
/*!***************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/getPrototypeOf.js ***!
  \***************************************************************/
/*! no static exports found */function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},"./node_modules/@babel/runtime/helpers/inherits.js":
/*!*********************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/inherits.js ***!
  \*********************************************************/
/*! no static exports found */function(e,t,n){var r=n(/*! ./setPrototypeOf */"./node_modules/@babel/runtime/helpers/setPrototypeOf.js");e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},"./node_modules/@babel/runtime/helpers/isNativeFunction.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/isNativeFunction.js ***!
  \*****************************************************************/
/*! no static exports found */function(e,t){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}},"./node_modules/@babel/runtime/helpers/iterableToArray.js":
/*!****************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/iterableToArray.js ***!
  \****************************************************************/
/*! no static exports found */function(e,t){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},"./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js ***!
  \*********************************************************************/
/*! no static exports found */function(e,t){e.exports=function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}},"./node_modules/@babel/runtime/helpers/nonIterableRest.js":
/*!****************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/nonIterableRest.js ***!
  \****************************************************************/
/*! no static exports found */function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},"./node_modules/@babel/runtime/helpers/nonIterableSpread.js":
/*!******************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/nonIterableSpread.js ***!
  \******************************************************************/
/*! no static exports found */function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},"./node_modules/@babel/runtime/helpers/objectSpread.js":
/*!*************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/objectSpread.js ***!
  \*************************************************************/
/*! no static exports found */function(e,t,n){var r=n(/*! ./defineProperty */"./node_modules/@babel/runtime/helpers/defineProperty.js");e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){r(e,t,n[t])})}return e}},"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js ***!
  \**************************************************************************/
/*! no static exports found */function(e,t,n){var r=n(/*! ../helpers/typeof */"./node_modules/@babel/runtime/helpers/typeof.js"),i=n(/*! ./assertThisInitialized */"./node_modules/@babel/runtime/helpers/assertThisInitialized.js");e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?i(e):t}},"./node_modules/@babel/runtime/helpers/set.js":
/*!****************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/set.js ***!
  \****************************************************/
/*! no static exports found */function(e,t,n){n(/*! ./getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js");var r=n(/*! ./superPropBase */"./node_modules/@babel/runtime/helpers/superPropBase.js"),i=n(/*! ./defineProperty */"./node_modules/@babel/runtime/helpers/defineProperty.js");function o(e,t,n,a){return(o="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,o){var a,s=r(e,t);if(s){if((a=Object.getOwnPropertyDescriptor(s,t)).set)return a.set.call(o,n),!0;if(!a.writable)return!1}if(a=Object.getOwnPropertyDescriptor(o,t)){if(!a.writable)return!1;a.value=n,Object.defineProperty(o,t,a)}else i(o,t,n);return!0})(e,t,n,a)}e.exports=function(e,t,n,r,i){if(!o(e,t,n,r||e)&&i)throw new Error("failed to set property");return n}},"./node_modules/@babel/runtime/helpers/setPrototypeOf.js":
/*!***************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/setPrototypeOf.js ***!
  \***************************************************************/
/*! no static exports found */function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},"./node_modules/@babel/runtime/helpers/slicedToArray.js":
/*!**************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/slicedToArray.js ***!
  \**************************************************************/
/*! no static exports found */function(e,t,n){var r=n(/*! ./arrayWithHoles */"./node_modules/@babel/runtime/helpers/arrayWithHoles.js"),i=n(/*! ./iterableToArrayLimit */"./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js"),o=n(/*! ./nonIterableRest */"./node_modules/@babel/runtime/helpers/nonIterableRest.js");e.exports=function(e,t){return r(e)||i(e,t)||o()}},"./node_modules/@babel/runtime/helpers/superPropBase.js":
/*!**************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/superPropBase.js ***!
  \**************************************************************/
/*! no static exports found */function(e,t,n){var r=n(/*! ./getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js");e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e}},"./node_modules/@babel/runtime/helpers/toConsumableArray.js":
/*!******************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/toConsumableArray.js ***!
  \******************************************************************/
/*! no static exports found */function(e,t,n){var r=n(/*! ./arrayWithoutHoles */"./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js"),i=n(/*! ./iterableToArray */"./node_modules/@babel/runtime/helpers/iterableToArray.js"),o=n(/*! ./nonIterableSpread */"./node_modules/@babel/runtime/helpers/nonIterableSpread.js");e.exports=function(e){return r(e)||i(e)||o()}},"./node_modules/@babel/runtime/helpers/typeof.js":
/*!*******************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/typeof.js ***!
  \*******************************************************/
/*! no static exports found */function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=r=function(e){return n(e)}:e.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},r(t)}e.exports=r},"./node_modules/@babel/runtime/helpers/wrapNativeSuper.js":
/*!****************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/wrapNativeSuper.js ***!
  \****************************************************************/
/*! no static exports found */function(e,t,n){var r=n(/*! ./getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),i=n(/*! ./setPrototypeOf */"./node_modules/@babel/runtime/helpers/setPrototypeOf.js"),o=n(/*! ./isNativeFunction */"./node_modules/@babel/runtime/helpers/isNativeFunction.js"),a=n(/*! ./construct */"./node_modules/@babel/runtime/helpers/construct.js");function s(t){var n="function"==typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!o(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return a(e,arguments,r(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},s(t)}e.exports=s},"./node_modules/@babel/runtime/regenerator/index.js":
/*!**********************************************************!*\
  !*** ./node_modules/@babel/runtime/regenerator/index.js ***!
  \**********************************************************/
/*! no static exports found */function(e,t,n){e.exports=n(/*! regenerator-runtime */"./node_modules/regenerator-runtime/runtime-module.js")},"./node_modules/cartocolor/cartocolor.js":
/*!***********************************************!*\
  !*** ./node_modules/cartocolor/cartocolor.js ***!
  \***********************************************/
/*! no static exports found */function(e,t,n){var r,i;!function(){var o={Burg:{2:["#ffc6c4","#672044"],3:["#ffc6c4","#cc607d","#672044"],4:["#ffc6c4","#e38191","#ad466c","#672044"],5:["#ffc6c4","#ee919b","#cc607d","#9e3963","#672044"],6:["#ffc6c4","#f29ca3","#da7489","#b95073","#93345d","#672044"],7:["#ffc6c4","#f4a3a8","#e38191","#cc607d","#ad466c","#8b3058","#672044"],tags:["quantitative"]},BurgYl:{2:["#fbe6c5","#70284a"],3:["#fbe6c5","#dc7176","#70284a"],4:["#fbe6c5","#ee8a82","#c8586c","#70284a"],5:["#fbe6c5","#f2a28a","#dc7176","#b24b65","#70284a"],6:["#fbe6c5","#f4b191","#e7807d","#d06270","#a44360","#70284a"],7:["#fbe6c5","#f5ba98","#ee8a82","#dc7176","#c8586c","#9c3f5d","#70284a"],tags:["quantitative"]},RedOr:{2:["#f6d2a9","#b13f64"],3:["#f6d2a9","#ea8171","#b13f64"],4:["#f6d2a9","#f19c7c","#dd686c","#b13f64"],5:["#f6d2a9","#f3aa84","#ea8171","#d55d6a","#b13f64"],6:["#f6d2a9","#f4b28a","#ef9177","#e3726d","#cf5669","#b13f64"],7:["#f6d2a9","#f5b78e","#f19c7c","#ea8171","#dd686c","#ca5268","#b13f64"],tags:["quantitative"]},OrYel:{2:["#ecda9a","#ee4d5a"],3:["#ecda9a","#f7945d","#ee4d5a"],4:["#ecda9a","#f3ad6a","#f97b57","#ee4d5a"],5:["#ecda9a","#f1b973","#f7945d","#f86f56","#ee4d5a"],6:["#ecda9a","#f0c079","#f5a363","#f98558","#f76856","#ee4d5a"],7:["#ecda9a","#efc47e","#f3ad6a","#f7945d","#f97b57","#f66356","#ee4d5a"],tags:["quantitative"]},Peach:{2:["#fde0c5","#eb4a40"],3:["#fde0c5","#f59e72","#eb4a40"],4:["#fde0c5","#f8b58b","#f2855d","#eb4a40"],5:["#fde0c5","#f9c098","#f59e72","#f17854","#eb4a40"],6:["#fde0c5","#fac7a1","#f7ac80","#f38f65","#f0704f","#eb4a40"],7:["#fde0c5","#facba6","#f8b58b","#f59e72","#f2855d","#ef6a4c","#eb4a40"],tags:["quantitative"]},PinkYl:{2:["#fef6b5","#e15383"],3:["#fef6b5","#ffa679","#e15383"],4:["#fef6b5","#ffc285","#fa8a76","#e15383"],5:["#fef6b5","#ffd08e","#ffa679","#f67b77","#e15383"],6:["#fef6b5","#ffd795","#ffb77f","#fd9576","#f37378","#e15383"],7:["#fef6b5","#ffdd9a","#ffc285","#ffa679","#fa8a76","#f16d7a","#e15383"],tags:["quantitative"]},Mint:{2:["#e4f1e1","#0d585f"],3:["#e4f1e1","#63a6a0","#0d585f"],4:["#e4f1e1","#89c0b6","#448c8a","#0d585f"],5:["#E4F1E1","#9CCDC1","#63A6A0","#337F7F","#0D585F"],6:["#e4f1e1","#abd4c7","#7ab5ad","#509693","#2c7778","#0d585f"],7:["#e4f1e1","#b4d9cc","#89c0b6","#63a6a0","#448c8a","#287274","#0d585f"],tags:["quantitative"]},BluGrn:{2:["#c4e6c3","#1d4f60"],3:["#c4e6c3","#4da284","#1d4f60"],4:["#c4e6c3","#6dbc90","#36877a","#1d4f60"],5:["#c4e6c3","#80c799","#4da284","#2d7974","#1d4f60"],6:["#c4e6c3","#8dce9f","#5fb28b","#3e927e","#297071","#1d4f60"],7:["#c4e6c3","#96d2a4","#6dbc90","#4da284","#36877a","#266b6e","#1d4f60"],tags:["quantitative"]},DarkMint:{2:["#d2fbd4","#123f5a"],3:["#d2fbd4","#559c9e","#123f5a"],4:["#d2fbd4","#7bbcb0","#3a7c89","#123f5a"],5:["#d2fbd4","#8eccb9","#559c9e","#2b6c7f","#123f5a"],6:["#d2fbd4","#9cd5be","#6cafa9","#458892","#266377","#123f5a"],7:["#d2fbd4","#a5dbc2","#7bbcb0","#559c9e","#3a7c89","#235d72","#123f5a"],tags:["quantitative"]},Emrld:{2:["#d3f2a3","#074050"],3:["#d3f2a3","#4c9b82","#074050"],4:["#d3f2a3","#6cc08b","#217a79","#074050"],5:["#d3f2a3","#82d091","#4c9b82","#19696f","#074050"],6:["#d3f2a3","#8fda94","#60b187","#35877d","#145f69","#074050"],7:["#d3f2a3","#97e196","#6cc08b","#4c9b82","#217a79","#105965","#074050"],tags:["quantitative"]},ag_GrnYl:{2:["#245668","#EDEF5D"],3:["#245668","#39AB7E","#EDEF5D"],4:["#245668","#0D8F81","#6EC574","#EDEF5D"],5:["#245668","#04817E","#39AB7E","#8BD16D","#EDEF5D"],6:["#245668","#09787C","#1D9A81","#58BB79","#9DD869","#EDEF5D"],7:["#245668","#0F7279","#0D8F81","#39AB7E","#6EC574","#A9DC67","#EDEF5D"],tags:["aggregation"]},BluYl:{2:["#f7feae","#045275"],3:["#f7feae","#46aea0","#045275"],4:["#f7feae","#7ccba2","#089099","#045275"],5:["#f7feae","#9bd8a4","#46aea0","#058092","#045275"],6:["#f7feae","#ace1a4","#68bfa1","#2a9c9c","#02778e","#045275"],7:["#f7feae","#b7e6a5","#7ccba2","#46aea0","#089099","#00718b","#045275"],tags:["quantitative"]},Teal:{2:["#d1eeea","#2a5674"],3:["#d1eeea","#68abb8","#2a5674"],4:["#d1eeea","#85c4c9","#4f90a6","#2a5674"],5:["#d1eeea","#96d0d1","#68abb8","#45829b","#2a5674"],6:["#d1eeea","#a1d7d6","#79bbc3","#599bae","#3f7994","#2a5674"],7:["#d1eeea","#a8dbd9","#85c4c9","#68abb8","#4f90a6","#3b738f","#2a5674"],tags:["quantitative"]},TealGrn:{2:["#b0f2bc","#257d98"],3:["#b0f2bc","#4cc8a3","#257d98"],4:["#b0f2bc","#67dba5","#38b2a3","#257d98"],5:["#b0f2bc","#77e2a8","#4cc8a3","#31a6a2","#257d98"],6:["#b0f2bc","#82e6aa","#5bd4a4","#3fbba3","#2e9ea1","#257d98"],7:["#b0f2bc","#89e8ac","#67dba5","#4cc8a3","#38b2a3","#2c98a0","#257d98"],tags:["quantitative"]},Purp:{2:["#f3e0f7","#63589f"],3:["#f3e0f7","#b998dd","#63589f"],4:["#f3e0f7","#d1afe8","#9f82ce","#63589f"],5:["#f3e0f7","#dbbaed","#b998dd","#9178c4","#63589f"],6:["#f3e0f7","#e0c2ef","#c8a5e4","#aa8bd4","#8871be","#63589f"],7:["#f3e0f7","#e4c7f1","#d1afe8","#b998dd","#9f82ce","#826dba","#63589f"],tags:["quantitative"]},PurpOr:{3:["#f9ddda","#ce78b3","#573b88"],4:["#f9ddda","#e597b9","#ad5fad","#573b88"],5:["#f9ddda","#eda8bd","#ce78b3","#9955a8","#573b88"],6:["#f9ddda","#f0b2c1","#dd8ab6","#bb69b0","#8c4fa4","#573b88"],7:["#f9ddda","#f2b9c4","#e597b9","#ce78b3","#ad5fad","#834ba0","#573b88"],tags:["quantitative"]},Sunset:{2:["#f3e79b","#5c53a5"],3:["#f3e79b","#eb7f86","#5c53a5"],4:["#f3e79b","#f8a07e","#ce6693","#5c53a5"],5:["#f3e79b","#fab27f","#eb7f86","#b95e9a","#5c53a5"],6:["#f3e79b","#fabc82","#f59280","#dc6f8e","#ab5b9e","#5c53a5"],7:["#f3e79b","#fac484","#f8a07e","#eb7f86","#ce6693","#a059a0","#5c53a5"],tags:["quantitative"]},Magenta:{2:["#f3cbd3","#6c2167"],3:["#f3cbd3","#ca699d","#6c2167"],4:["#f3cbd3","#dd88ac","#b14d8e","#6c2167"],5:["#f3cbd3","#e498b4","#ca699d","#a24186","#6c2167"],6:["#f3cbd3","#e7a2b9","#d67ba5","#bc5894","#983a81","#6c2167"],7:["#f3cbd3","#eaa9bd","#dd88ac","#ca699d","#b14d8e","#91357d","#6c2167"],tags:["quantitative"]},SunsetDark:{2:["#fcde9c","#7c1d6f"],3:["#fcde9c","#e34f6f","#7c1d6f"],4:["#fcde9c","#f0746e","#dc3977","#7c1d6f"],5:["#fcde9c","#f58670","#e34f6f","#d72d7c","#7c1d6f"],6:["#fcde9c","#f89872","#ec666d","#df4273","#c5287b","#7c1d6f"],7:["#fcde9c","#faa476","#f0746e","#e34f6f","#dc3977","#b9257a","#7c1d6f"],tags:["quantitative"]},ag_Sunset:{2:["#4b2991","#edd9a3"],3:["#4b2991","#ea4f88","#edd9a3"],4:["#4b2991","#c0369d","#fa7876","#edd9a3"],5:["#4b2991","#a52fa2","#ea4f88","#fa9074","#edd9a3"],6:["#4b2991","#932da3","#d43f96","#f7667c","#f89f77","#edd9a3"],7:["#4b2991","#872ca2","#c0369d","#ea4f88","#fa7876","#f6a97a","#edd9a3"],tags:["aggregation"]},BrwnYl:{2:["#ede5cf","#541f3f"],3:["#ede5cf","#c1766f","#541f3f"],4:["#ede5cf","#d39c83","#a65461","#541f3f"],5:["#ede5cf","#daaf91","#c1766f","#95455a","#541f3f"],6:["#ede5cf","#ddba9b","#cd8c7a","#b26166","#8a3c56","#541f3f"],7:["#ede5cf","#e0c2a2","#d39c83","#c1766f","#a65461","#813753","#541f3f"],tags:["quantitative"]},ArmyRose:{2:["#929b4f","#db8195"],3:["#a3ad62","#fdfbe4","#df91a3"],4:["#929b4f","#d9dbaf","#f3d1ca","#db8195"],5:["#879043","#c1c68c","#fdfbe4","#ebb4b8","#d8758b"],6:["#7f883b","#b0b874","#e3e4be","#f6ddd1","#e4a0ac","#d66d85"],7:["#798234","#a3ad62","#d0d3a2","#fdfbe4","#f0c6c3","#df91a3","#d46780"],tags:["diverging"]},Fall:{2:["#3d5941","#ca562c"],3:["#3d5941","#f6edbd","#ca562c"],4:["#3d5941","#b5b991","#edbb8a","#ca562c"],5:["#3d5941","#96a07c","#f6edbd","#e6a272","#ca562c"],6:["#3d5941","#839170","#cecea2","#f1cf9e","#e19464","#ca562c"],7:["#3d5941","#778868","#b5b991","#f6edbd","#edbb8a","#de8a5a","#ca562c"],tags:["diverging"]},Geyser:{2:["#008080","#ca562c"],3:["#008080","#f6edbd","#ca562c"],4:["#008080","#b4c8a8","#edbb8a","#ca562c"],5:["#008080","#92b69e","#f6edbd","#e6a272","#ca562c"],6:["#008080","#7eab98","#ced7b1","#f1cf9e","#e19464","#ca562c"],7:["#008080","#70a494","#b4c8a8","#f6edbd","#edbb8a","#de8a5a","#ca562c"],tags:["diverging"]},Temps:{2:["#009392","#cf597e"],3:["#009392","#e9e29c","#cf597e"],4:["#009392","#9ccb86","#eeb479","#cf597e"],5:["#009392","#71be83","#e9e29c","#ed9c72","#cf597e"],6:["#009392","#52b684","#bcd48c","#edc783","#eb8d71","#cf597e"],7:["#009392","#39b185","#9ccb86","#e9e29c","#eeb479","#e88471","#cf597e"],tags:["diverging"]},TealRose:{2:["#009392","#d0587e"],3:["#009392","#f1eac8","#d0587e"],4:["#009392","#91b8aa","#f1eac8","#dfa0a0","#d0587e"],5:["#009392","#91b8aa","#f1eac8","#dfa0a0","#d0587e"],6:["#009392","#72aaa1","#b1c7b3","#e5b9ad","#d98994","#d0587e"],7:["#009392","#72aaa1","#b1c7b3","#f1eac8","#e5b9ad","#d98994","#d0587e"],tags:["diverging"]},Tropic:{2:["#009B9E","#C75DAB"],3:["#009B9E","#F1F1F1","#C75DAB"],4:["#009B9E","#A7D3D4","#E4C1D9","#C75DAB"],5:["#009B9E","#7CC5C6","#F1F1F1","#DDA9CD","#C75DAB"],6:["#009B9E","#5DBCBE","#C6DFDF","#E9D4E2","#D99BC6","#C75DAB"],7:["#009B9E","#42B7B9","#A7D3D4","#F1F1F1","#E4C1D9","#D691C1","#C75DAB"],tags:["diverging"]},Earth:{2:["#A16928","#2887a1"],3:["#A16928","#edeac2","#2887a1"],4:["#A16928","#d6bd8d","#b5c8b8","#2887a1"],5:["#A16928","#caa873","#edeac2","#98b7b2","#2887a1"],6:["#A16928","#c29b64","#e0cfa2","#cbd5bc","#85adaf","#2887a1"],7:["#A16928","#bd925a","#d6bd8d","#edeac2","#b5c8b8","#79a7ac","#2887a1"],tags:["diverging"]},Antique:{2:["#855C75","#D9AF6B","#7C7C7C"],3:["#855C75","#D9AF6B","#AF6458","#7C7C7C"],4:["#855C75","#D9AF6B","#AF6458","#736F4C","#7C7C7C"],5:["#855C75","#D9AF6B","#AF6458","#736F4C","#526A83","#7C7C7C"],6:["#855C75","#D9AF6B","#AF6458","#736F4C","#526A83","#625377","#7C7C7C"],7:["#855C75","#D9AF6B","#AF6458","#736F4C","#526A83","#625377","#68855C","#7C7C7C"],8:["#855C75","#D9AF6B","#AF6458","#736F4C","#526A83","#625377","#68855C","#9C9C5E","#7C7C7C"],9:["#855C75","#D9AF6B","#AF6458","#736F4C","#526A83","#625377","#68855C","#9C9C5E","#A06177","#7C7C7C"],10:["#855C75","#D9AF6B","#AF6458","#736F4C","#526A83","#625377","#68855C","#9C9C5E","#A06177","#8C785D","#7C7C7C"],11:["#855C75","#D9AF6B","#AF6458","#736F4C","#526A83","#625377","#68855C","#9C9C5E","#A06177","#8C785D","#467378","#7C7C7C"],tags:["qualitative"]},Bold:{2:["#7F3C8D","#11A579","#A5AA99"],3:["#7F3C8D","#11A579","#3969AC","#A5AA99"],4:["#7F3C8D","#11A579","#3969AC","#F2B701","#A5AA99"],5:["#7F3C8D","#11A579","#3969AC","#F2B701","#E73F74","#A5AA99"],6:["#7F3C8D","#11A579","#3969AC","#F2B701","#E73F74","#80BA5A","#A5AA99"],7:["#7F3C8D","#11A579","#3969AC","#F2B701","#E73F74","#80BA5A","#E68310","#A5AA99"],8:["#7F3C8D","#11A579","#3969AC","#F2B701","#E73F74","#80BA5A","#E68310","#008695","#A5AA99"],9:["#7F3C8D","#11A579","#3969AC","#F2B701","#E73F74","#80BA5A","#E68310","#008695","#CF1C90","#A5AA99"],10:["#7F3C8D","#11A579","#3969AC","#F2B701","#E73F74","#80BA5A","#E68310","#008695","#CF1C90","#f97b72","#A5AA99"],11:["#7F3C8D","#11A579","#3969AC","#F2B701","#E73F74","#80BA5A","#E68310","#008695","#CF1C90","#f97b72","#4b4b8f","#A5AA99"],tags:["qualitative"]},Pastel:{2:["#66C5CC","#F6CF71","#B3B3B3"],3:["#66C5CC","#F6CF71","#F89C74","#B3B3B3"],4:["#66C5CC","#F6CF71","#F89C74","#DCB0F2","#B3B3B3"],5:["#66C5CC","#F6CF71","#F89C74","#DCB0F2","#87C55F","#B3B3B3"],6:["#66C5CC","#F6CF71","#F89C74","#DCB0F2","#87C55F","#9EB9F3","#B3B3B3"],7:["#66C5CC","#F6CF71","#F89C74","#DCB0F2","#87C55F","#9EB9F3","#FE88B1","#B3B3B3"],8:["#66C5CC","#F6CF71","#F89C74","#DCB0F2","#87C55F","#9EB9F3","#FE88B1","#C9DB74","#B3B3B3"],9:["#66C5CC","#F6CF71","#F89C74","#DCB0F2","#87C55F","#9EB9F3","#FE88B1","#C9DB74","#8BE0A4","#B3B3B3"],10:["#66C5CC","#F6CF71","#F89C74","#DCB0F2","#87C55F","#9EB9F3","#FE88B1","#C9DB74","#8BE0A4","#B497E7","#B3B3B3"],11:["#66C5CC","#F6CF71","#F89C74","#DCB0F2","#87C55F","#9EB9F3","#FE88B1","#C9DB74","#8BE0A4","#B497E7","#D3B484","#B3B3B3"],tags:["qualitative"]},Prism:{2:["#5F4690","#1D6996","#666666"],3:["#5F4690","#1D6996","#38A6A5","#666666"],4:["#5F4690","#1D6996","#38A6A5","#0F8554","#666666"],5:["#5F4690","#1D6996","#38A6A5","#0F8554","#73AF48","#666666"],6:["#5F4690","#1D6996","#38A6A5","#0F8554","#73AF48","#EDAD08","#666666"],7:["#5F4690","#1D6996","#38A6A5","#0F8554","#73AF48","#EDAD08","#E17C05","#666666"],8:["#5F4690","#1D6996","#38A6A5","#0F8554","#73AF48","#EDAD08","#E17C05","#CC503E","#666666"],9:["#5F4690","#1D6996","#38A6A5","#0F8554","#73AF48","#EDAD08","#E17C05","#CC503E","#94346E","#666666"],10:["#5F4690","#1D6996","#38A6A5","#0F8554","#73AF48","#EDAD08","#E17C05","#CC503E","#94346E","#6F4070","#666666"],11:["#5F4690","#1D6996","#38A6A5","#0F8554","#73AF48","#EDAD08","#E17C05","#CC503E","#94346E","#6F4070","#994E95","#666666"],tags:["qualitative"]},Safe:{2:["#88CCEE","#CC6677","#888888"],3:["#88CCEE","#CC6677","#DDCC77","#888888"],4:["#88CCEE","#CC6677","#DDCC77","#117733","#888888"],5:["#88CCEE","#CC6677","#DDCC77","#117733","#332288","#888888"],6:["#88CCEE","#CC6677","#DDCC77","#117733","#332288","#AA4499","#888888"],7:["#88CCEE","#CC6677","#DDCC77","#117733","#332288","#AA4499","#44AA99","#888888"],8:["#88CCEE","#CC6677","#DDCC77","#117733","#332288","#AA4499","#44AA99","#999933","#888888"],9:["#88CCEE","#CC6677","#DDCC77","#117733","#332288","#AA4499","#44AA99","#999933","#882255","#888888"],10:["#88CCEE","#CC6677","#DDCC77","#117733","#332288","#AA4499","#44AA99","#999933","#882255","#661100","#888888"],11:["#88CCEE","#CC6677","#DDCC77","#117733","#332288","#AA4499","#44AA99","#999933","#882255","#661100","#6699CC","#888888"],tags:["qualitative","colorblind"]},Vivid:{2:["#E58606","#5D69B1","#A5AA99"],3:["#E58606","#5D69B1","#52BCA3","#A5AA99"],4:["#E58606","#5D69B1","#52BCA3","#99C945","#A5AA99"],5:["#E58606","#5D69B1","#52BCA3","#99C945","#CC61B0","#A5AA99"],6:["#E58606","#5D69B1","#52BCA3","#99C945","#CC61B0","#24796C","#A5AA99"],7:["#E58606","#5D69B1","#52BCA3","#99C945","#CC61B0","#24796C","#DAA51B","#A5AA99"],8:["#E58606","#5D69B1","#52BCA3","#99C945","#CC61B0","#24796C","#DAA51B","#2F8AC4","#A5AA99"],9:["#E58606","#5D69B1","#52BCA3","#99C945","#CC61B0","#24796C","#DAA51B","#2F8AC4","#764E9F","#A5AA99"],10:["#E58606","#5D69B1","#52BCA3","#99C945","#CC61B0","#24796C","#DAA51B","#2F8AC4","#764E9F","#ED645A","#A5AA99"],11:["#E58606","#5D69B1","#52BCA3","#99C945","#CC61B0","#24796C","#DAA51B","#2F8AC4","#764E9F","#ED645A","#CC3A8E","#A5AA99"],tags:["qualitative"]}},a={Blues:{tags:["quantitative"]},BrBG:{tags:["diverging"]},Greys:{tags:["quantitative"]},PiYG:{tags:["diverging"]},PRGn:{tags:["diverging"]},Purples:{tags:["quantitative"]},RdYlGn:{tags:["diverging"]},Spectral:{tags:["diverging"]},YlOrBr:{tags:["quantitative"]},YlGn:{tags:["quantitative"]},YlGnBu:{tags:["quantitative"]},YlOrRd:{tags:["quantitative"]}},s=n(/*! colorbrewer */"./node_modules/colorbrewer/index.js");for(var u in s){var l=s[u],c={};for(var p in l)c[p]=l[p];u in a&&(c.tags=a[u].tags),o["cb_"+u]=c}void 0===(i="function"==typeof(r=o)?r.call(t,n,t,e):r)||(e.exports=i)}()},"./node_modules/cartocolor/index.js":
/*!******************************************!*\
  !*** ./node_modules/cartocolor/index.js ***!
  \******************************************/
/*! no static exports found */function(e,t,n){e.exports=n(/*! ./cartocolor */"./node_modules/cartocolor/cartocolor.js")},"./node_modules/colorbrewer/colorbrewer.js":
/*!*************************************************!*\
  !*** ./node_modules/colorbrewer/colorbrewer.js ***!
  \*************************************************/
/*! no static exports found */function(e,t,n){var r,i;void 0===(i="function"==typeof(r={YlGn:{3:["#f7fcb9","#addd8e","#31a354"],4:["#ffffcc","#c2e699","#78c679","#238443"],5:["#ffffcc","#c2e699","#78c679","#31a354","#006837"],6:["#ffffcc","#d9f0a3","#addd8e","#78c679","#31a354","#006837"],7:["#ffffcc","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],8:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],9:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"]},YlGnBu:{3:["#edf8b1","#7fcdbb","#2c7fb8"],4:["#ffffcc","#a1dab4","#41b6c4","#225ea8"],5:["#ffffcc","#a1dab4","#41b6c4","#2c7fb8","#253494"],6:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#2c7fb8","#253494"],7:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],8:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],9:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"]},GnBu:{3:["#e0f3db","#a8ddb5","#43a2ca"],4:["#f0f9e8","#bae4bc","#7bccc4","#2b8cbe"],5:["#f0f9e8","#bae4bc","#7bccc4","#43a2ca","#0868ac"],6:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#43a2ca","#0868ac"],7:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],8:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],9:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"]},BuGn:{3:["#e5f5f9","#99d8c9","#2ca25f"],4:["#edf8fb","#b2e2e2","#66c2a4","#238b45"],5:["#edf8fb","#b2e2e2","#66c2a4","#2ca25f","#006d2c"],6:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#2ca25f","#006d2c"],7:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],8:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],9:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"]},PuBuGn:{3:["#ece2f0","#a6bddb","#1c9099"],4:["#f6eff7","#bdc9e1","#67a9cf","#02818a"],5:["#f6eff7","#bdc9e1","#67a9cf","#1c9099","#016c59"],6:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#1c9099","#016c59"],7:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],8:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],9:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"]},PuBu:{3:["#ece7f2","#a6bddb","#2b8cbe"],4:["#f1eef6","#bdc9e1","#74a9cf","#0570b0"],5:["#f1eef6","#bdc9e1","#74a9cf","#2b8cbe","#045a8d"],6:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#2b8cbe","#045a8d"],7:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],8:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],9:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"]},BuPu:{3:["#e0ecf4","#9ebcda","#8856a7"],4:["#edf8fb","#b3cde3","#8c96c6","#88419d"],5:["#edf8fb","#b3cde3","#8c96c6","#8856a7","#810f7c"],6:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8856a7","#810f7c"],7:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],8:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],9:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"]},RdPu:{3:["#fde0dd","#fa9fb5","#c51b8a"],4:["#feebe2","#fbb4b9","#f768a1","#ae017e"],5:["#feebe2","#fbb4b9","#f768a1","#c51b8a","#7a0177"],6:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#c51b8a","#7a0177"],7:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],8:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],9:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"]},PuRd:{3:["#e7e1ef","#c994c7","#dd1c77"],4:["#f1eef6","#d7b5d8","#df65b0","#ce1256"],5:["#f1eef6","#d7b5d8","#df65b0","#dd1c77","#980043"],6:["#f1eef6","#d4b9da","#c994c7","#df65b0","#dd1c77","#980043"],7:["#f1eef6","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],8:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],9:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"]},OrRd:{3:["#fee8c8","#fdbb84","#e34a33"],4:["#fef0d9","#fdcc8a","#fc8d59","#d7301f"],5:["#fef0d9","#fdcc8a","#fc8d59","#e34a33","#b30000"],6:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#e34a33","#b30000"],7:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],8:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],9:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"]},YlOrRd:{3:["#ffeda0","#feb24c","#f03b20"],4:["#ffffb2","#fecc5c","#fd8d3c","#e31a1c"],5:["#ffffb2","#fecc5c","#fd8d3c","#f03b20","#bd0026"],6:["#ffffb2","#fed976","#feb24c","#fd8d3c","#f03b20","#bd0026"],7:["#ffffb2","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],8:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],9:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"]},YlOrBr:{3:["#fff7bc","#fec44f","#d95f0e"],4:["#ffffd4","#fed98e","#fe9929","#cc4c02"],5:["#ffffd4","#fed98e","#fe9929","#d95f0e","#993404"],6:["#ffffd4","#fee391","#fec44f","#fe9929","#d95f0e","#993404"],7:["#ffffd4","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],8:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],9:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"]},Purples:{3:["#efedf5","#bcbddc","#756bb1"],4:["#f2f0f7","#cbc9e2","#9e9ac8","#6a51a3"],5:["#f2f0f7","#cbc9e2","#9e9ac8","#756bb1","#54278f"],6:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#756bb1","#54278f"],7:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],8:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],9:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"]},Blues:{3:["#deebf7","#9ecae1","#3182bd"],4:["#eff3ff","#bdd7e7","#6baed6","#2171b5"],5:["#eff3ff","#bdd7e7","#6baed6","#3182bd","#08519c"],6:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#3182bd","#08519c"],7:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],8:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],9:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"]},Greens:{3:["#e5f5e0","#a1d99b","#31a354"],4:["#edf8e9","#bae4b3","#74c476","#238b45"],5:["#edf8e9","#bae4b3","#74c476","#31a354","#006d2c"],6:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#31a354","#006d2c"],7:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],8:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],9:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"]},Oranges:{3:["#fee6ce","#fdae6b","#e6550d"],4:["#feedde","#fdbe85","#fd8d3c","#d94701"],5:["#feedde","#fdbe85","#fd8d3c","#e6550d","#a63603"],6:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#e6550d","#a63603"],7:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],8:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],9:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"]},Reds:{3:["#fee0d2","#fc9272","#de2d26"],4:["#fee5d9","#fcae91","#fb6a4a","#cb181d"],5:["#fee5d9","#fcae91","#fb6a4a","#de2d26","#a50f15"],6:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#de2d26","#a50f15"],7:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],8:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],9:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"]},Greys:{3:["#f0f0f0","#bdbdbd","#636363"],4:["#f7f7f7","#cccccc","#969696","#525252"],5:["#f7f7f7","#cccccc","#969696","#636363","#252525"],6:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#636363","#252525"],7:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],8:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],9:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"]},PuOr:{3:["#f1a340","#f7f7f7","#998ec3"],4:["#e66101","#fdb863","#b2abd2","#5e3c99"],5:["#e66101","#fdb863","#f7f7f7","#b2abd2","#5e3c99"],6:["#b35806","#f1a340","#fee0b6","#d8daeb","#998ec3","#542788"],7:["#b35806","#f1a340","#fee0b6","#f7f7f7","#d8daeb","#998ec3","#542788"],8:["#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788"],9:["#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788"],10:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],11:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"]},BrBG:{3:["#d8b365","#f5f5f5","#5ab4ac"],4:["#a6611a","#dfc27d","#80cdc1","#018571"],5:["#a6611a","#dfc27d","#f5f5f5","#80cdc1","#018571"],6:["#8c510a","#d8b365","#f6e8c3","#c7eae5","#5ab4ac","#01665e"],7:["#8c510a","#d8b365","#f6e8c3","#f5f5f5","#c7eae5","#5ab4ac","#01665e"],8:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e"],9:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e"],10:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],11:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"]},PRGn:{3:["#af8dc3","#f7f7f7","#7fbf7b"],4:["#7b3294","#c2a5cf","#a6dba0","#008837"],5:["#7b3294","#c2a5cf","#f7f7f7","#a6dba0","#008837"],6:["#762a83","#af8dc3","#e7d4e8","#d9f0d3","#7fbf7b","#1b7837"],7:["#762a83","#af8dc3","#e7d4e8","#f7f7f7","#d9f0d3","#7fbf7b","#1b7837"],8:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837"],9:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837"],10:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],11:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"]},PiYG:{3:["#e9a3c9","#f7f7f7","#a1d76a"],4:["#d01c8b","#f1b6da","#b8e186","#4dac26"],5:["#d01c8b","#f1b6da","#f7f7f7","#b8e186","#4dac26"],6:["#c51b7d","#e9a3c9","#fde0ef","#e6f5d0","#a1d76a","#4d9221"],7:["#c51b7d","#e9a3c9","#fde0ef","#f7f7f7","#e6f5d0","#a1d76a","#4d9221"],8:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221"],9:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221"],10:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],11:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"]},RdBu:{3:["#ef8a62","#f7f7f7","#67a9cf"],4:["#ca0020","#f4a582","#92c5de","#0571b0"],5:["#ca0020","#f4a582","#f7f7f7","#92c5de","#0571b0"],6:["#b2182b","#ef8a62","#fddbc7","#d1e5f0","#67a9cf","#2166ac"],7:["#b2182b","#ef8a62","#fddbc7","#f7f7f7","#d1e5f0","#67a9cf","#2166ac"],8:["#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac"],9:["#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac"],10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"]},RdGy:{3:["#ef8a62","#ffffff","#999999"],4:["#ca0020","#f4a582","#bababa","#404040"],5:["#ca0020","#f4a582","#ffffff","#bababa","#404040"],6:["#b2182b","#ef8a62","#fddbc7","#e0e0e0","#999999","#4d4d4d"],7:["#b2182b","#ef8a62","#fddbc7","#ffffff","#e0e0e0","#999999","#4d4d4d"],8:["#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d"],9:["#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d"],10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"]},RdYlBu:{3:["#fc8d59","#ffffbf","#91bfdb"],4:["#d7191c","#fdae61","#abd9e9","#2c7bb6"],5:["#d7191c","#fdae61","#ffffbf","#abd9e9","#2c7bb6"],6:["#d73027","#fc8d59","#fee090","#e0f3f8","#91bfdb","#4575b4"],7:["#d73027","#fc8d59","#fee090","#ffffbf","#e0f3f8","#91bfdb","#4575b4"],8:["#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4"],9:["#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4"],10:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],11:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"]},Spectral:{3:["#fc8d59","#ffffbf","#99d594"],4:["#d7191c","#fdae61","#abdda4","#2b83ba"],5:["#d7191c","#fdae61","#ffffbf","#abdda4","#2b83ba"],6:["#d53e4f","#fc8d59","#fee08b","#e6f598","#99d594","#3288bd"],7:["#d53e4f","#fc8d59","#fee08b","#ffffbf","#e6f598","#99d594","#3288bd"],8:["#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd"],9:["#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd"],10:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],11:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"]},RdYlGn:{3:["#fc8d59","#ffffbf","#91cf60"],4:["#d7191c","#fdae61","#a6d96a","#1a9641"],5:["#d7191c","#fdae61","#ffffbf","#a6d96a","#1a9641"],6:["#d73027","#fc8d59","#fee08b","#d9ef8b","#91cf60","#1a9850"],7:["#d73027","#fc8d59","#fee08b","#ffffbf","#d9ef8b","#91cf60","#1a9850"],8:["#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850"],9:["#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850"],10:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],11:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"]},Accent:{3:["#7fc97f","#beaed4","#fdc086"],4:["#7fc97f","#beaed4","#fdc086","#ffff99"],5:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0"],6:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f"],7:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17"],8:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"]},Dark2:{3:["#1b9e77","#d95f02","#7570b3"],4:["#1b9e77","#d95f02","#7570b3","#e7298a"],5:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e"],6:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02"],7:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d"],8:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"]},Paired:{3:["#a6cee3","#1f78b4","#b2df8a"],4:["#a6cee3","#1f78b4","#b2df8a","#33a02c"],5:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99"],6:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c"],7:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f"],8:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00"],9:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6"],10:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a"],11:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99"],12:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"]},Pastel1:{3:["#fbb4ae","#b3cde3","#ccebc5"],4:["#fbb4ae","#b3cde3","#ccebc5","#decbe4"],5:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6"],6:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc"],7:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd"],8:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec"],9:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Pastel2:{3:["#b3e2cd","#fdcdac","#cbd5e8"],4:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4"],5:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9"],6:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae"],7:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc"],8:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"]},Set1:{3:["#e41a1c","#377eb8","#4daf4a"],4:["#e41a1c","#377eb8","#4daf4a","#984ea3"],5:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00"],6:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33"],7:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628"],8:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf"],9:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"]},Set2:{3:["#66c2a5","#fc8d62","#8da0cb"],4:["#66c2a5","#fc8d62","#8da0cb","#e78ac3"],5:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854"],6:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f"],7:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494"],8:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"]},Set3:{3:["#8dd3c7","#ffffb3","#bebada"],4:["#8dd3c7","#ffffb3","#bebada","#fb8072"],5:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3"],6:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462"],7:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69"],8:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5"],9:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9"],10:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd"],11:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5"],12:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"]}})?r.call(t,n,t,e):r)||(e.exports=i)},"./node_modules/colorbrewer/index.js":
/*!*******************************************!*\
  !*** ./node_modules/colorbrewer/index.js ***!
  \*******************************************/
/*! no static exports found */function(e,t,n){e.exports=n(/*! ./colorbrewer.js */"./node_modules/colorbrewer/colorbrewer.js")},"./node_modules/earcut/src/earcut.js":
/*!*******************************************!*\
  !*** ./node_modules/earcut/src/earcut.js ***!
  \*******************************************/
/*! no static exports found */function(e,t,n){"use strict";function r(e,t,n){n=n||2;var r,s,u,l,c,f,m,_=t&&t.length,y=_?t[0]*n:e.length,v=i(e,0,y,n,!0),g=[];if(!v)return g;if(_&&(v=function(e,t,n,r){var a,s,u,l,c,f=[];for(a=0,s=t.length;a<s;a++)u=t[a]*r,l=a<s-1?t[a+1]*r:e.length,(c=i(e,u,l,r,!1))===c.next&&(c.steiner=!0),f.push(d(c));for(f.sort(p),a=0;a<f.length;a++)h(f[a],n),n=o(n,n.next);return n}(e,t,v,n)),e.length>80*n){r=u=e[0],s=l=e[1];for(var b=n;b<y;b+=n)(c=e[b])<r&&(r=c),(f=e[b+1])<s&&(s=f),c>u&&(u=c),f>l&&(l=f);m=0!==(m=Math.max(u-r,l-s))?1/m:0}return a(v,g,n,r,s,m),g}function i(e,t,n,r,i){var o,a;if(i===k(e,t,n,r)>0)for(o=t;o<n;o+=r)a=w(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=w(o,e[o],e[o+1],a);return a&&v(a,a.next)&&(E(a),a=a.next),a}function o(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!v(r,r.next)&&0!==y(r.prev,r,r.next))r=r.next;else{if(E(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function a(e,t,n,r,i,p,h){if(e){!h&&p&&function(e,t,n,r){var i=e;do{null===i.z&&(i.z=f(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,a,s,u,l=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<l&&(s++,r=r.nextZ);t++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1)}(i)}(e,r,i,p);for(var d,m,_=e;e.prev!==e.next;)if(d=e.prev,m=e.next,p?u(e,r,i,p):s(e))t.push(d.i/n),t.push(e.i/n),t.push(m.i/n),E(e),e=m.next,_=m.next;else if((e=m)===_){h?1===h?a(e=l(e,t,n),t,n,r,i,p,2):2===h&&c(e,t,n,r,i,p):a(o(e),t,n,r,i,p,1);break}}}function s(e){var t=e.prev,n=e,r=e.next;if(y(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(m(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&y(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function u(e,t,n,r){var i=e.prev,o=e,a=e.next;if(y(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,l=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,p=f(s,u,t,n,r),h=f(l,c,t,n,r),d=e.prevZ,_=e.nextZ;d&&d.z>=p&&_&&_.z<=h;){if(d!==e.prev&&d!==e.next&&m(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&y(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,_!==e.prev&&_!==e.next&&m(i.x,i.y,o.x,o.y,a.x,a.y,_.x,_.y)&&y(_.prev,_,_.next)>=0)return!1;_=_.nextZ}for(;d&&d.z>=p;){if(d!==e.prev&&d!==e.next&&m(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&y(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;_&&_.z<=h;){if(_!==e.prev&&_!==e.next&&m(i.x,i.y,o.x,o.y,a.x,a.y,_.x,_.y)&&y(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function l(e,t,n){var r=e;do{var i=r.prev,o=r.next.next;!v(i,o)&&g(i,r,r.next,o)&&b(i,o)&&b(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),E(r),E(r.next),r=e=o),r=r.next}while(r!==e);return r}function c(e,t,n,r,i,s){var u=e;do{for(var l=u.next.next;l!==u.prev;){if(u.i!==l.i&&_(u,l)){var c=x(u,l);return u=o(u,u.next),c=o(c,c.next),a(u,t,n,r,i,s),void a(c,t,n,r,i,s)}l=l.next}u=u.next}while(u!==e)}function p(e,t){return e.x-t.x}function h(e,t){if(t=function(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===a)return n.prev;var u,l=n,c=n.x,p=n.y,h=1/0;r=n.next;for(;r!==l;)i>=r.x&&r.x>=c&&i!==r.x&&m(o<p?i:a,o,c,p,o<p?a:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<h||u===h&&r.x>n.x)&&b(r,e)&&(n=r,h=u),r=r.next;return n}(e,t)){var n=x(t,e);o(n,n.next)}}function f(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function d(e){var t=e,n=e;do{t.x<n.x&&(n=t),t=t.next}while(t!==e);return n}function m(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function _(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&g(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&b(e,t)&&b(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)}function y(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function v(e,t){return e.x===t.x&&e.y===t.y}function g(e,t,n,r){return!!(v(e,t)&&v(n,r)||v(e,r)&&v(n,t))||y(e,t,n)>0!=y(e,t,r)>0&&y(n,r,e)>0!=y(n,r,t)>0}function b(e,t){return y(e.prev,e,e.next)<0?y(e,t,e.next)>=0&&y(e,e.prev,t)>=0:y(e,t,e.prev)<0||y(e,e.next,t)<0}function x(e,t){var n=new T(e.i,e.x,e.y),r=new T(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function w(e,t,n,r){var i=new T(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function E(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function T(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function k(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}e.exports=r,e.exports.default=r,r.deviation=function(e,t,n,r){var i=t&&t.length,o=i?t[0]*n:e.length,a=Math.abs(k(e,0,o,n));if(i)for(var s=0,u=t.length;s<u;s++){var l=t[s]*n,c=s<u-1?t[s+1]*n:e.length;a-=Math.abs(k(e,l,c,n))}var p=0;for(s=0;s<r.length;s+=3){var h=r[s]*n,f=r[s+1]*n,d=r[s+2]*n;p+=Math.abs((e[h]-e[d])*(e[f+1]-e[h+1])-(e[h]-e[f])*(e[d+1]-e[h+1]))}return 0===a&&0===p?0:Math.abs((p-a)/a)},r.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)n.vertices.push(e[i][o][a]);i>0&&(r+=e[i-1].length,n.holes.push(r))}return n}},"./node_modules/gl-matrix/lib/gl-matrix.js":
/*!*************************************************!*\
  !*** ./node_modules/gl-matrix/lib/gl-matrix.js ***!
  \*************************************************/
/*! exports provided: glMatrix, mat2, mat2d, mat3, mat4, quat, quat2, vec2, vec3, vec4 */function(e,t,n){"use strict";n.r(t);var r=n(/*! ./gl-matrix/common.js */"./node_modules/gl-matrix/lib/gl-matrix/common.js");n.d(t,"glMatrix",function(){return r});var i=n(/*! ./gl-matrix/mat2.js */"./node_modules/gl-matrix/lib/gl-matrix/mat2.js");n.d(t,"mat2",function(){return i});var o=n(/*! ./gl-matrix/mat2d.js */"./node_modules/gl-matrix/lib/gl-matrix/mat2d.js");n.d(t,"mat2d",function(){return o});var a=n(/*! ./gl-matrix/mat3.js */"./node_modules/gl-matrix/lib/gl-matrix/mat3.js");n.d(t,"mat3",function(){return a});var s=n(/*! ./gl-matrix/mat4.js */"./node_modules/gl-matrix/lib/gl-matrix/mat4.js");n.d(t,"mat4",function(){return s});var u=n(/*! ./gl-matrix/quat.js */"./node_modules/gl-matrix/lib/gl-matrix/quat.js");n.d(t,"quat",function(){return u});var l=n(/*! ./gl-matrix/quat2.js */"./node_modules/gl-matrix/lib/gl-matrix/quat2.js");n.d(t,"quat2",function(){return l});var c=n(/*! ./gl-matrix/vec2.js */"./node_modules/gl-matrix/lib/gl-matrix/vec2.js");n.d(t,"vec2",function(){return c});var p=n(/*! ./gl-matrix/vec3.js */"./node_modules/gl-matrix/lib/gl-matrix/vec3.js");n.d(t,"vec3",function(){return p});var h=n(/*! ./gl-matrix/vec4.js */"./node_modules/gl-matrix/lib/gl-matrix/vec4.js");n.d(t,"vec4",function(){return h})},"./node_modules/gl-matrix/lib/gl-matrix/common.js":
/*!********************************************************!*\
  !*** ./node_modules/gl-matrix/lib/gl-matrix/common.js ***!
  \********************************************************/
/*! exports provided: EPSILON, ARRAY_TYPE, RANDOM, setMatrixArrayType, toRadian, equals */function(e,t,n){"use strict";n.r(t),n.d(t,"EPSILON",function(){return r}),n.d(t,"ARRAY_TYPE",function(){return i}),n.d(t,"RANDOM",function(){return o}),n.d(t,"setMatrixArrayType",function(){return a}),n.d(t,"toRadian",function(){return u}),n.d(t,"equals",function(){return l});var r=1e-6,i="undefined"!=typeof Float32Array?Float32Array:Array,o=Math.random;function a(e){i=e}var s=Math.PI/180;function u(e){return e*s}function l(e,t){return Math.abs(e-t)<=r*Math.max(1,Math.abs(e),Math.abs(t))}},"./node_modules/gl-matrix/lib/gl-matrix/mat2.js":
/*!******************************************************!*\
  !*** ./node_modules/gl-matrix/lib/gl-matrix/mat2.js ***!
  \******************************************************/
/*! exports provided: create, clone, copy, identity, fromValues, set, transpose, invert, adjoint, determinant, multiply, rotate, scale, fromRotation, fromScaling, str, frob, LDU, add, subtract, exactEquals, equals, multiplyScalar, multiplyScalarAndAdd, mul, sub */function(e,t,n){"use strict";n.r(t),n.d(t,"create",function(){return i}),n.d(t,"clone",function(){return o}),n.d(t,"copy",function(){return a}),n.d(t,"identity",function(){return s}),n.d(t,"fromValues",function(){return u}),n.d(t,"set",function(){return l}),n.d(t,"transpose",function(){return c}),n.d(t,"invert",function(){return p}),n.d(t,"adjoint",function(){return h}),n.d(t,"determinant",function(){return f}),n.d(t,"multiply",function(){return d}),n.d(t,"rotate",function(){return m}),n.d(t,"scale",function(){return _}),n.d(t,"fromRotation",function(){return y}),n.d(t,"fromScaling",function(){return v}),n.d(t,"str",function(){return g}),n.d(t,"frob",function(){return b}),n.d(t,"LDU",function(){return x}),n.d(t,"add",function(){return w}),n.d(t,"subtract",function(){return E}),n.d(t,"exactEquals",function(){return T}),n.d(t,"equals",function(){return k}),n.d(t,"multiplyScalar",function(){return C}),n.d(t,"multiplyScalarAndAdd",function(){return M}),n.d(t,"mul",function(){return P}),n.d(t,"sub",function(){return A});var r=n(/*! ./common.js */"./node_modules/gl-matrix/lib/gl-matrix/common.js");function i(){var e=new r.ARRAY_TYPE(4);return r.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e}function o(e){var t=new r.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function a(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function s(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e}function u(e,t,n,i){var o=new r.ARRAY_TYPE(4);return o[0]=e,o[1]=t,o[2]=n,o[3]=i,o}function l(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e}function c(e,t){if(e===t){var n=t[1];e[1]=t[2],e[2]=n}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e}function p(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*o-i*r;return a?(a=1/a,e[0]=o*a,e[1]=-r*a,e[2]=-i*a,e[3]=n*a,e):null}function h(e,t){var n=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=n,e}function f(e){return e[0]*e[3]-e[2]*e[1]}function d(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=n[0],u=n[1],l=n[2],c=n[3];return e[0]=r*s+o*u,e[1]=i*s+a*u,e[2]=r*l+o*c,e[3]=i*l+a*c,e}function m(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u+o*s,e[1]=i*u+a*s,e[2]=r*-s+o*u,e[3]=i*-s+a*u,e}function _(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=n[0],u=n[1];return e[0]=r*s,e[1]=i*s,e[2]=o*u,e[3]=a*u,e}function y(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e}function v(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e}function g(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function b(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2))}function x(e,t,n,r){return e[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-e[2]*n[1],[e,t,n]}function w(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}function E(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function T(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function k(e,t){var n=e[0],i=e[1],o=e[2],a=e[3],s=t[0],u=t[1],l=t[2],c=t[3];return Math.abs(n-s)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-u)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-l)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(a-c)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))}function C(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function M(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e}var P=d,A=E},"./node_modules/gl-matrix/lib/gl-matrix/mat2d.js":
/*!*******************************************************!*\
  !*** ./node_modules/gl-matrix/lib/gl-matrix/mat2d.js ***!
  \*******************************************************/
/*! exports provided: create, clone, copy, identity, fromValues, set, invert, determinant, multiply, rotate, scale, translate, fromRotation, fromScaling, fromTranslation, str, frob, add, subtract, multiplyScalar, multiplyScalarAndAdd, exactEquals, equals, mul, sub */function(e,t,n){"use strict";n.r(t),n.d(t,"create",function(){return i}),n.d(t,"clone",function(){return o}),n.d(t,"copy",function(){return a}),n.d(t,"identity",function(){return s}),n.d(t,"fromValues",function(){return u}),n.d(t,"set",function(){return l}),n.d(t,"invert",function(){return c}),n.d(t,"determinant",function(){return p}),n.d(t,"multiply",function(){return h}),n.d(t,"rotate",function(){return f}),n.d(t,"scale",function(){return d}),n.d(t,"translate",function(){return m}),n.d(t,"fromRotation",function(){return _}),n.d(t,"fromScaling",function(){return y}),n.d(t,"fromTranslation",function(){return v}),n.d(t,"str",function(){return g}),n.d(t,"frob",function(){return b}),n.d(t,"add",function(){return x}),n.d(t,"subtract",function(){return w}),n.d(t,"multiplyScalar",function(){return E}),n.d(t,"multiplyScalarAndAdd",function(){return T}),n.d(t,"exactEquals",function(){return k}),n.d(t,"equals",function(){return C}),n.d(t,"mul",function(){return M}),n.d(t,"sub",function(){return P});var r=n(/*! ./common.js */"./node_modules/gl-matrix/lib/gl-matrix/common.js");function i(){var e=new r.ARRAY_TYPE(6);return r.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[4]=0,e[5]=0),e[0]=1,e[3]=1,e}function o(e){var t=new r.ARRAY_TYPE(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function a(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function s(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function u(e,t,n,i,o,a){var s=new r.ARRAY_TYPE(6);return s[0]=e,s[1]=t,s[2]=n,s[3]=i,s[4]=o,s[5]=a,s}function l(e,t,n,r,i,o,a){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=o,e[5]=a,e}function c(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=n*o-r*i;return u?(u=1/u,e[0]=o*u,e[1]=-r*u,e[2]=-i*u,e[3]=n*u,e[4]=(i*s-o*a)*u,e[5]=(r*a-n*s)*u,e):null}function p(e){return e[0]*e[3]-e[1]*e[2]}function h(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],l=n[0],c=n[1],p=n[2],h=n[3],f=n[4],d=n[5];return e[0]=r*l+o*c,e[1]=i*l+a*c,e[2]=r*p+o*h,e[3]=i*p+a*h,e[4]=r*f+o*d+s,e[5]=i*f+a*d+u,e}function f(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],l=Math.sin(n),c=Math.cos(n);return e[0]=r*c+o*l,e[1]=i*c+a*l,e[2]=r*-l+o*c,e[3]=i*-l+a*c,e[4]=s,e[5]=u,e}function d(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],l=n[0],c=n[1];return e[0]=r*l,e[1]=i*l,e[2]=o*c,e[3]=a*c,e[4]=s,e[5]=u,e}function m(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],l=n[0],c=n[1];return e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=r*l+o*c+s,e[5]=i*l+a*c+u,e}function _(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e[4]=0,e[5]=0,e}function y(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function v(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function g(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function b(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)}function x(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e}function w(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e}function E(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e}function T(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e}function k(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function C(e,t){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=t[0],c=t[1],p=t[2],h=t[3],f=t[4],d=t[5];return Math.abs(n-l)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(i-c)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(o-p)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-h)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(s-f)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(f))&&Math.abs(u-d)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(d))}var M=h,P=w},"./node_modules/gl-matrix/lib/gl-matrix/mat3.js":
/*!******************************************************!*\
  !*** ./node_modules/gl-matrix/lib/gl-matrix/mat3.js ***!
  \******************************************************/
/*! exports provided: create, fromMat4, clone, copy, fromValues, set, identity, transpose, invert, adjoint, determinant, multiply, translate, rotate, scale, fromTranslation, fromRotation, fromScaling, fromMat2d, fromQuat, normalFromMat4, projection, str, frob, add, subtract, multiplyScalar, multiplyScalarAndAdd, exactEquals, equals, mul, sub */function(e,t,n){"use strict";n.r(t),n.d(t,"create",function(){return i}),n.d(t,"fromMat4",function(){return o}),n.d(t,"clone",function(){return a}),n.d(t,"copy",function(){return s}),n.d(t,"fromValues",function(){return u}),n.d(t,"set",function(){return l}),n.d(t,"identity",function(){return c}),n.d(t,"transpose",function(){return p}),n.d(t,"invert",function(){return h}),n.d(t,"adjoint",function(){return f}),n.d(t,"determinant",function(){return d}),n.d(t,"multiply",function(){return m}),n.d(t,"translate",function(){return _}),n.d(t,"rotate",function(){return y}),n.d(t,"scale",function(){return v}),n.d(t,"fromTranslation",function(){return g}),n.d(t,"fromRotation",function(){return b}),n.d(t,"fromScaling",function(){return x}),n.d(t,"fromMat2d",function(){return w}),n.d(t,"fromQuat",function(){return E}),n.d(t,"normalFromMat4",function(){return T}),n.d(t,"projection",function(){return k}),n.d(t,"str",function(){return C}),n.d(t,"frob",function(){return M}),n.d(t,"add",function(){return P}),n.d(t,"subtract",function(){return A}),n.d(t,"multiplyScalar",function(){return S}),n.d(t,"multiplyScalarAndAdd",function(){return O}),n.d(t,"exactEquals",function(){return I}),n.d(t,"equals",function(){return R}),n.d(t,"mul",function(){return j}),n.d(t,"sub",function(){return L});var r=n(/*! ./common.js */"./node_modules/gl-matrix/lib/gl-matrix/common.js");function i(){var e=new r.ARRAY_TYPE(9);return r.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function o(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function a(e){var t=new r.ARRAY_TYPE(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function s(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function u(e,t,n,i,o,a,s,u,l){var c=new r.ARRAY_TYPE(9);return c[0]=e,c[1]=t,c[2]=n,c[3]=i,c[4]=o,c[5]=a,c[6]=s,c[7]=u,c[8]=l,c}function l(e,t,n,r,i,o,a,s,u,l){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=o,e[5]=a,e[6]=s,e[7]=u,e[8]=l,e}function c(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function p(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function h(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],l=t[7],c=t[8],p=c*a-s*l,h=-c*o+s*u,f=l*o-a*u,d=n*p+r*h+i*f;return d?(d=1/d,e[0]=p*d,e[1]=(-c*r+i*l)*d,e[2]=(s*r-i*a)*d,e[3]=h*d,e[4]=(c*n-i*u)*d,e[5]=(-s*n+i*o)*d,e[6]=f*d,e[7]=(-l*n+r*u)*d,e[8]=(a*n-r*o)*d,e):null}function f(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],l=t[7],c=t[8];return e[0]=a*c-s*l,e[1]=i*l-r*c,e[2]=r*s-i*a,e[3]=s*u-o*c,e[4]=n*c-i*u,e[5]=i*o-n*s,e[6]=o*l-a*u,e[7]=r*u-n*l,e[8]=n*a-r*o,e}function d(e){var t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],l=e[8];return t*(l*o-a*u)+n*(-l*i+a*s)+r*(u*i-o*s)}function m(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],p=t[8],h=n[0],f=n[1],d=n[2],m=n[3],_=n[4],y=n[5],v=n[6],g=n[7],b=n[8];return e[0]=h*r+f*a+d*l,e[1]=h*i+f*s+d*c,e[2]=h*o+f*u+d*p,e[3]=m*r+_*a+y*l,e[4]=m*i+_*s+y*c,e[5]=m*o+_*u+y*p,e[6]=v*r+g*a+b*l,e[7]=v*i+g*s+b*c,e[8]=v*o+g*u+b*p,e}function _(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],p=t[8],h=n[0],f=n[1];return e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=u,e[6]=h*r+f*a+l,e[7]=h*i+f*s+c,e[8]=h*o+f*u+p,e}function y(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],p=t[8],h=Math.sin(n),f=Math.cos(n);return e[0]=f*r+h*a,e[1]=f*i+h*s,e[2]=f*o+h*u,e[3]=f*a-h*r,e[4]=f*s-h*i,e[5]=f*u-h*o,e[6]=l,e[7]=c,e[8]=p,e}function v(e,t,n){var r=n[0],i=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function g(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function b(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function x(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function w(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function E(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n+n,s=r+r,u=i+i,l=n*a,c=r*a,p=r*s,h=i*a,f=i*s,d=i*u,m=o*a,_=o*s,y=o*u;return e[0]=1-p-d,e[3]=c-y,e[6]=h+_,e[1]=c+y,e[4]=1-l-d,e[7]=f-m,e[2]=h-_,e[5]=f+m,e[8]=1-l-p,e}function T(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],l=t[7],c=t[8],p=t[9],h=t[10],f=t[11],d=t[12],m=t[13],_=t[14],y=t[15],v=n*s-r*a,g=n*u-i*a,b=n*l-o*a,x=r*u-i*s,w=r*l-o*s,E=i*l-o*u,T=c*m-p*d,k=c*_-h*d,C=c*y-f*d,M=p*_-h*m,P=p*y-f*m,A=h*y-f*_,S=v*A-g*P+b*M+x*C-w*k+E*T;return S?(S=1/S,e[0]=(s*A-u*P+l*M)*S,e[1]=(u*C-a*A-l*k)*S,e[2]=(a*P-s*C+l*T)*S,e[3]=(i*P-r*A-o*M)*S,e[4]=(n*A-i*C+o*k)*S,e[5]=(r*C-n*P-o*T)*S,e[6]=(m*E-_*w+y*x)*S,e[7]=(_*b-d*E-y*g)*S,e[8]=(d*w-m*b+y*v)*S,e):null}function k(e,t,n){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function C(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function M(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))}function P(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e}function A(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e}function S(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e}function O(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e}function I(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function R(e,t){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],p=e[8],h=t[0],f=t[1],d=t[2],m=t[3],_=t[4],y=t[5],v=t[6],g=t[7],b=t[8];return Math.abs(n-h)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(i-f)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(o-d)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(a-m)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(s-_)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(_))&&Math.abs(u-y)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(l-v)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(c-g)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(p-b)<=r.EPSILON*Math.max(1,Math.abs(p),Math.abs(b))}var j=m,L=A},"./node_modules/gl-matrix/lib/gl-matrix/mat4.js":
/*!******************************************************!*\
  !*** ./node_modules/gl-matrix/lib/gl-matrix/mat4.js ***!
  \******************************************************/
/*! exports provided: create, clone, copy, fromValues, set, identity, transpose, invert, adjoint, determinant, multiply, translate, scale, rotate, rotateX, rotateY, rotateZ, fromTranslation, fromScaling, fromRotation, fromXRotation, fromYRotation, fromZRotation, fromRotationTranslation, fromQuat2, getTranslation, getScaling, getRotation, fromRotationTranslationScale, fromRotationTranslationScaleOrigin, fromQuat, frustum, perspective, perspectiveFromFieldOfView, ortho, lookAt, targetTo, str, frob, add, subtract, multiplyScalar, multiplyScalarAndAdd, exactEquals, equals, mul, sub */function(e,t,n){"use strict";n.r(t),n.d(t,"create",function(){return i}),n.d(t,"clone",function(){return o}),n.d(t,"copy",function(){return a}),n.d(t,"fromValues",function(){return s}),n.d(t,"set",function(){return u}),n.d(t,"identity",function(){return l}),n.d(t,"transpose",function(){return c}),n.d(t,"invert",function(){return p}),n.d(t,"adjoint",function(){return h}),n.d(t,"determinant",function(){return f}),n.d(t,"multiply",function(){return d}),n.d(t,"translate",function(){return m}),n.d(t,"scale",function(){return _}),n.d(t,"rotate",function(){return y}),n.d(t,"rotateX",function(){return v}),n.d(t,"rotateY",function(){return g}),n.d(t,"rotateZ",function(){return b}),n.d(t,"fromTranslation",function(){return x}),n.d(t,"fromScaling",function(){return w}),n.d(t,"fromRotation",function(){return E}),n.d(t,"fromXRotation",function(){return T}),n.d(t,"fromYRotation",function(){return k}),n.d(t,"fromZRotation",function(){return C}),n.d(t,"fromRotationTranslation",function(){return M}),n.d(t,"fromQuat2",function(){return P}),n.d(t,"getTranslation",function(){return A}),n.d(t,"getScaling",function(){return S}),n.d(t,"getRotation",function(){return O}),n.d(t,"fromRotationTranslationScale",function(){return I}),n.d(t,"fromRotationTranslationScaleOrigin",function(){return R}),n.d(t,"fromQuat",function(){return j}),n.d(t,"frustum",function(){return L}),n.d(t,"perspective",function(){return z}),n.d(t,"perspectiveFromFieldOfView",function(){return D}),n.d(t,"ortho",function(){return B}),n.d(t,"lookAt",function(){return N}),n.d(t,"targetTo",function(){return q}),n.d(t,"str",function(){return F}),n.d(t,"frob",function(){return U}),n.d(t,"add",function(){return V}),n.d(t,"subtract",function(){return W}),n.d(t,"multiplyScalar",function(){return G}),n.d(t,"multiplyScalarAndAdd",function(){return Z}),n.d(t,"exactEquals",function(){return H}),n.d(t,"equals",function(){return K}),n.d(t,"mul",function(){return Y}),n.d(t,"sub",function(){return X});var r=n(/*! ./common.js */"./node_modules/gl-matrix/lib/gl-matrix/common.js");function i(){var e=new r.ARRAY_TYPE(16);return r.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function o(e){var t=new r.ARRAY_TYPE(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function a(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function s(e,t,n,i,o,a,s,u,l,c,p,h,f,d,m,_){var y=new r.ARRAY_TYPE(16);return y[0]=e,y[1]=t,y[2]=n,y[3]=i,y[4]=o,y[5]=a,y[6]=s,y[7]=u,y[8]=l,y[9]=c,y[10]=p,y[11]=h,y[12]=f,y[13]=d,y[14]=m,y[15]=_,y}function u(e,t,n,r,i,o,a,s,u,l,c,p,h,f,d,m,_){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=o,e[5]=a,e[6]=s,e[7]=u,e[8]=l,e[9]=c,e[10]=p,e[11]=h,e[12]=f,e[13]=d,e[14]=m,e[15]=_,e}function l(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function c(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],o=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=o,e[11]=t[14],e[12]=i,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function p(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],l=t[7],c=t[8],p=t[9],h=t[10],f=t[11],d=t[12],m=t[13],_=t[14],y=t[15],v=n*s-r*a,g=n*u-i*a,b=n*l-o*a,x=r*u-i*s,w=r*l-o*s,E=i*l-o*u,T=c*m-p*d,k=c*_-h*d,C=c*y-f*d,M=p*_-h*m,P=p*y-f*m,A=h*y-f*_,S=v*A-g*P+b*M+x*C-w*k+E*T;return S?(S=1/S,e[0]=(s*A-u*P+l*M)*S,e[1]=(i*P-r*A-o*M)*S,e[2]=(m*E-_*w+y*x)*S,e[3]=(h*w-p*E-f*x)*S,e[4]=(u*C-a*A-l*k)*S,e[5]=(n*A-i*C+o*k)*S,e[6]=(_*b-d*E-y*g)*S,e[7]=(c*E-h*b+f*g)*S,e[8]=(a*P-s*C+l*T)*S,e[9]=(r*C-n*P-o*T)*S,e[10]=(d*w-m*b+y*v)*S,e[11]=(p*b-c*w-f*v)*S,e[12]=(s*k-a*M-u*T)*S,e[13]=(n*M-r*k+i*T)*S,e[14]=(m*g-d*x-_*v)*S,e[15]=(c*x-p*g+h*v)*S,e):null}function h(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],l=t[7],c=t[8],p=t[9],h=t[10],f=t[11],d=t[12],m=t[13],_=t[14],y=t[15];return e[0]=s*(h*y-f*_)-p*(u*y-l*_)+m*(u*f-l*h),e[1]=-(r*(h*y-f*_)-p*(i*y-o*_)+m*(i*f-o*h)),e[2]=r*(u*y-l*_)-s*(i*y-o*_)+m*(i*l-o*u),e[3]=-(r*(u*f-l*h)-s*(i*f-o*h)+p*(i*l-o*u)),e[4]=-(a*(h*y-f*_)-c*(u*y-l*_)+d*(u*f-l*h)),e[5]=n*(h*y-f*_)-c*(i*y-o*_)+d*(i*f-o*h),e[6]=-(n*(u*y-l*_)-a*(i*y-o*_)+d*(i*l-o*u)),e[7]=n*(u*f-l*h)-a*(i*f-o*h)+c*(i*l-o*u),e[8]=a*(p*y-f*m)-c*(s*y-l*m)+d*(s*f-l*p),e[9]=-(n*(p*y-f*m)-c*(r*y-o*m)+d*(r*f-o*p)),e[10]=n*(s*y-l*m)-a*(r*y-o*m)+d*(r*l-o*s),e[11]=-(n*(s*f-l*p)-a*(r*f-o*p)+c*(r*l-o*s)),e[12]=-(a*(p*_-h*m)-c*(s*_-u*m)+d*(s*h-u*p)),e[13]=n*(p*_-h*m)-c*(r*_-i*m)+d*(r*h-i*p),e[14]=-(n*(s*_-u*m)-a*(r*_-i*m)+d*(r*u-i*s)),e[15]=n*(s*h-u*p)-a*(r*h-i*p)+c*(r*u-i*s),e}function f(e){var t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=e[9],p=e[10],h=e[11],f=e[12],d=e[13],m=e[14],_=e[15];return(t*a-n*o)*(p*_-h*m)-(t*s-r*o)*(c*_-h*d)+(t*u-i*o)*(c*m-p*d)+(n*s-r*a)*(l*_-h*f)-(n*u-i*a)*(l*m-p*f)+(r*u-i*s)*(l*d-c*f)}function d(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],p=t[8],h=t[9],f=t[10],d=t[11],m=t[12],_=t[13],y=t[14],v=t[15],g=n[0],b=n[1],x=n[2],w=n[3];return e[0]=g*r+b*s+x*p+w*m,e[1]=g*i+b*u+x*h+w*_,e[2]=g*o+b*l+x*f+w*y,e[3]=g*a+b*c+x*d+w*v,g=n[4],b=n[5],x=n[6],w=n[7],e[4]=g*r+b*s+x*p+w*m,e[5]=g*i+b*u+x*h+w*_,e[6]=g*o+b*l+x*f+w*y,e[7]=g*a+b*c+x*d+w*v,g=n[8],b=n[9],x=n[10],w=n[11],e[8]=g*r+b*s+x*p+w*m,e[9]=g*i+b*u+x*h+w*_,e[10]=g*o+b*l+x*f+w*y,e[11]=g*a+b*c+x*d+w*v,g=n[12],b=n[13],x=n[14],w=n[15],e[12]=g*r+b*s+x*p+w*m,e[13]=g*i+b*u+x*h+w*_,e[14]=g*o+b*l+x*f+w*y,e[15]=g*a+b*c+x*d+w*v,e}function m(e,t,n){var r=n[0],i=n[1],o=n[2],a=void 0,s=void 0,u=void 0,l=void 0,c=void 0,p=void 0,h=void 0,f=void 0,d=void 0,m=void 0,_=void 0,y=void 0;return t===e?(e[12]=t[0]*r+t[4]*i+t[8]*o+t[12],e[13]=t[1]*r+t[5]*i+t[9]*o+t[13],e[14]=t[2]*r+t[6]*i+t[10]*o+t[14],e[15]=t[3]*r+t[7]*i+t[11]*o+t[15]):(a=t[0],s=t[1],u=t[2],l=t[3],c=t[4],p=t[5],h=t[6],f=t[7],d=t[8],m=t[9],_=t[10],y=t[11],e[0]=a,e[1]=s,e[2]=u,e[3]=l,e[4]=c,e[5]=p,e[6]=h,e[7]=f,e[8]=d,e[9]=m,e[10]=_,e[11]=y,e[12]=a*r+c*i+d*o+t[12],e[13]=s*r+p*i+m*o+t[13],e[14]=u*r+h*i+_*o+t[14],e[15]=l*r+f*i+y*o+t[15]),e}function _(e,t,n){var r=n[0],i=n[1],o=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function y(e,t,n,i){var o,a,s,u,l,c,p,h,f,d,m,_,y,v,g,b,x,w,E,T,k,C,M,P,A=i[0],S=i[1],O=i[2],I=Math.sqrt(A*A+S*S+O*O);return I<r.EPSILON?null:(A*=I=1/I,S*=I,O*=I,o=Math.sin(n),s=1-(a=Math.cos(n)),u=t[0],l=t[1],c=t[2],p=t[3],h=t[4],f=t[5],d=t[6],m=t[7],_=t[8],y=t[9],v=t[10],g=t[11],b=A*A*s+a,x=S*A*s+O*o,w=O*A*s-S*o,E=A*S*s-O*o,T=S*S*s+a,k=O*S*s+A*o,C=A*O*s+S*o,M=S*O*s-A*o,P=O*O*s+a,e[0]=u*b+h*x+_*w,e[1]=l*b+f*x+y*w,e[2]=c*b+d*x+v*w,e[3]=p*b+m*x+g*w,e[4]=u*E+h*T+_*k,e[5]=l*E+f*T+y*k,e[6]=c*E+d*T+v*k,e[7]=p*E+m*T+g*k,e[8]=u*C+h*M+_*P,e[9]=l*C+f*M+y*P,e[10]=c*C+d*M+v*P,e[11]=p*C+m*M+g*P,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function v(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[4],a=t[5],s=t[6],u=t[7],l=t[8],c=t[9],p=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+l*r,e[5]=a*i+c*r,e[6]=s*i+p*r,e[7]=u*i+h*r,e[8]=l*i-o*r,e[9]=c*i-a*r,e[10]=p*i-s*r,e[11]=h*i-u*r,e}function g(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],u=t[3],l=t[8],c=t[9],p=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-l*r,e[1]=a*i-c*r,e[2]=s*i-p*r,e[3]=u*i-h*r,e[8]=o*r+l*i,e[9]=a*r+c*i,e[10]=s*r+p*i,e[11]=u*r+h*i,e}function b(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],u=t[3],l=t[4],c=t[5],p=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+l*r,e[1]=a*i+c*r,e[2]=s*i+p*r,e[3]=u*i+h*r,e[4]=l*i-o*r,e[5]=c*i-a*r,e[6]=p*i-s*r,e[7]=h*i-u*r,e}function x(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function w(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function E(e,t,n){var i,o,a,s=n[0],u=n[1],l=n[2],c=Math.sqrt(s*s+u*u+l*l);return c<r.EPSILON?null:(s*=c=1/c,u*=c,l*=c,i=Math.sin(t),a=1-(o=Math.cos(t)),e[0]=s*s*a+o,e[1]=u*s*a+l*i,e[2]=l*s*a-u*i,e[3]=0,e[4]=s*u*a-l*i,e[5]=u*u*a+o,e[6]=l*u*a+s*i,e[7]=0,e[8]=s*l*a+u*i,e[9]=u*l*a-s*i,e[10]=l*l*a+o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function T(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function k(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function C(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function M(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=r+r,u=i+i,l=o+o,c=r*s,p=r*u,h=r*l,f=i*u,d=i*l,m=o*l,_=a*s,y=a*u,v=a*l;return e[0]=1-(f+m),e[1]=p+v,e[2]=h-y,e[3]=0,e[4]=p-v,e[5]=1-(c+m),e[6]=d+_,e[7]=0,e[8]=h+y,e[9]=d-_,e[10]=1-(c+f),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function P(e,t){var n=new r.ARRAY_TYPE(3),i=-t[0],o=-t[1],a=-t[2],s=t[3],u=t[4],l=t[5],c=t[6],p=t[7],h=i*i+o*o+a*a+s*s;return h>0?(n[0]=2*(u*s+p*i+l*a-c*o)/h,n[1]=2*(l*s+p*o+c*i-u*a)/h,n[2]=2*(c*s+p*a+u*o-l*i)/h):(n[0]=2*(u*s+p*i+l*a-c*o),n[1]=2*(l*s+p*o+c*i-u*a),n[2]=2*(c*s+p*a+u*o-l*i)),M(e,t,n),e}function A(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function S(e,t){var n=t[0],r=t[1],i=t[2],o=t[4],a=t[5],s=t[6],u=t[8],l=t[9],c=t[10];return e[0]=Math.sqrt(n*n+r*r+i*i),e[1]=Math.sqrt(o*o+a*a+s*s),e[2]=Math.sqrt(u*u+l*l+c*c),e}function O(e,t){var n=t[0]+t[5]+t[10],r=0;return n>0?(r=2*Math.sqrt(n+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&&t[0]>t[10]?(r=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r),e}function I(e,t,n,r){var i=t[0],o=t[1],a=t[2],s=t[3],u=i+i,l=o+o,c=a+a,p=i*u,h=i*l,f=i*c,d=o*l,m=o*c,_=a*c,y=s*u,v=s*l,g=s*c,b=r[0],x=r[1],w=r[2];return e[0]=(1-(d+_))*b,e[1]=(h+g)*b,e[2]=(f-v)*b,e[3]=0,e[4]=(h-g)*x,e[5]=(1-(p+_))*x,e[6]=(m+y)*x,e[7]=0,e[8]=(f+v)*w,e[9]=(m-y)*w,e[10]=(1-(p+d))*w,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function R(e,t,n,r,i){var o=t[0],a=t[1],s=t[2],u=t[3],l=o+o,c=a+a,p=s+s,h=o*l,f=o*c,d=o*p,m=a*c,_=a*p,y=s*p,v=u*l,g=u*c,b=u*p,x=r[0],w=r[1],E=r[2],T=i[0],k=i[1],C=i[2],M=(1-(m+y))*x,P=(f+b)*x,A=(d-g)*x,S=(f-b)*w,O=(1-(h+y))*w,I=(_+v)*w,R=(d+g)*E,j=(_-v)*E,L=(1-(h+m))*E;return e[0]=M,e[1]=P,e[2]=A,e[3]=0,e[4]=S,e[5]=O,e[6]=I,e[7]=0,e[8]=R,e[9]=j,e[10]=L,e[11]=0,e[12]=n[0]+T-(M*T+S*k+R*C),e[13]=n[1]+k-(P*T+O*k+j*C),e[14]=n[2]+C-(A*T+I*k+L*C),e[15]=1,e}function j(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n+n,s=r+r,u=i+i,l=n*a,c=r*a,p=r*s,h=i*a,f=i*s,d=i*u,m=o*a,_=o*s,y=o*u;return e[0]=1-p-d,e[1]=c+y,e[2]=h-_,e[3]=0,e[4]=c-y,e[5]=1-l-d,e[6]=f+m,e[7]=0,e[8]=h+_,e[9]=f-m,e[10]=1-l-p,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function L(e,t,n,r,i,o,a){var s=1/(n-t),u=1/(i-r),l=1/(o-a);return e[0]=2*o*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*u,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(i+r)*u,e[10]=(a+o)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*l,e[15]=0,e}function z(e,t,n,r,i){var o=1/Math.tan(t/2),a=void 0;return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(a=1/(r-i),e[10]=(i+r)*a,e[14]=2*i*r*a):(e[10]=-1,e[14]=-2*r),e}function D(e,t,n,r){var i=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),u=2/(a+s),l=2/(i+o);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=-(a-s)*u*.5,e[9]=(i-o)*l*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e}function B(e,t,n,r,i,o,a){var s=1/(t-n),u=1/(r-i),l=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*u,e[14]=(a+o)*l,e[15]=1,e}function N(e,t,n,i){var o=void 0,a=void 0,s=void 0,u=void 0,c=void 0,p=void 0,h=void 0,f=void 0,d=void 0,m=void 0,_=t[0],y=t[1],v=t[2],g=i[0],b=i[1],x=i[2],w=n[0],E=n[1],T=n[2];return Math.abs(_-w)<r.EPSILON&&Math.abs(y-E)<r.EPSILON&&Math.abs(v-T)<r.EPSILON?l(e):(h=_-w,f=y-E,d=v-T,o=b*(d*=m=1/Math.sqrt(h*h+f*f+d*d))-x*(f*=m),a=x*(h*=m)-g*d,s=g*f-b*h,(m=Math.sqrt(o*o+a*a+s*s))?(o*=m=1/m,a*=m,s*=m):(o=0,a=0,s=0),u=f*s-d*a,c=d*o-h*s,p=h*a-f*o,(m=Math.sqrt(u*u+c*c+p*p))?(u*=m=1/m,c*=m,p*=m):(u=0,c=0,p=0),e[0]=o,e[1]=u,e[2]=h,e[3]=0,e[4]=a,e[5]=c,e[6]=f,e[7]=0,e[8]=s,e[9]=p,e[10]=d,e[11]=0,e[12]=-(o*_+a*y+s*v),e[13]=-(u*_+c*y+p*v),e[14]=-(h*_+f*y+d*v),e[15]=1,e)}function q(e,t,n,r){var i=t[0],o=t[1],a=t[2],s=r[0],u=r[1],l=r[2],c=i-n[0],p=o-n[1],h=a-n[2],f=c*c+p*p+h*h;f>0&&(c*=f=1/Math.sqrt(f),p*=f,h*=f);var d=u*h-l*p,m=l*c-s*h,_=s*p-u*c;return(f=d*d+m*m+_*_)>0&&(d*=f=1/Math.sqrt(f),m*=f,_*=f),e[0]=d,e[1]=m,e[2]=_,e[3]=0,e[4]=p*_-h*m,e[5]=h*d-c*_,e[6]=c*m-p*d,e[7]=0,e[8]=c,e[9]=p,e[10]=h,e[11]=0,e[12]=i,e[13]=o,e[14]=a,e[15]=1,e}function F(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function U(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))}function V(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e}function W(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}function G(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e}function Z(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e[9]=t[9]+n[9]*r,e[10]=t[10]+n[10]*r,e[11]=t[11]+n[11]*r,e[12]=t[12]+n[12]*r,e[13]=t[13]+n[13]*r,e[14]=t[14]+n[14]*r,e[15]=t[15]+n[15]*r,e}function H(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function K(e,t){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],p=e[8],h=e[9],f=e[10],d=e[11],m=e[12],_=e[13],y=e[14],v=e[15],g=t[0],b=t[1],x=t[2],w=t[3],E=t[4],T=t[5],k=t[6],C=t[7],M=t[8],P=t[9],A=t[10],S=t[11],O=t[12],I=t[13],R=t[14],j=t[15];return Math.abs(n-g)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(i-b)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(o-x)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(a-w)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(s-E)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(u-T)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(l-k)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(k))&&Math.abs(c-C)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(C))&&Math.abs(p-M)<=r.EPSILON*Math.max(1,Math.abs(p),Math.abs(M))&&Math.abs(h-P)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(P))&&Math.abs(f-A)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(A))&&Math.abs(d-S)<=r.EPSILON*Math.max(1,Math.abs(d),Math.abs(S))&&Math.abs(m-O)<=r.EPSILON*Math.max(1,Math.abs(m),Math.abs(O))&&Math.abs(_-I)<=r.EPSILON*Math.max(1,Math.abs(_),Math.abs(I))&&Math.abs(y-R)<=r.EPSILON*Math.max(1,Math.abs(y),Math.abs(R))&&Math.abs(v-j)<=r.EPSILON*Math.max(1,Math.abs(v),Math.abs(j))}var Y=d,X=W},"./node_modules/gl-matrix/lib/gl-matrix/quat.js":
/*!******************************************************!*\
  !*** ./node_modules/gl-matrix/lib/gl-matrix/quat.js ***!
  \******************************************************/
/*! exports provided: create, identity, setAxisAngle, getAxisAngle, multiply, rotateX, rotateY, rotateZ, calculateW, slerp, random, invert, conjugate, fromMat3, fromEuler, str, clone, fromValues, copy, set, add, mul, scale, dot, lerp, length, len, squaredLength, sqrLen, normalize, exactEquals, equals, rotationTo, sqlerp, setAxes */function(e,t,n){"use strict";n.r(t),n.d(t,"create",function(){return s}),n.d(t,"identity",function(){return u}),n.d(t,"setAxisAngle",function(){return l}),n.d(t,"getAxisAngle",function(){return c}),n.d(t,"multiply",function(){return p}),n.d(t,"rotateX",function(){return h}),n.d(t,"rotateY",function(){return f}),n.d(t,"rotateZ",function(){return d}),n.d(t,"calculateW",function(){return m}),n.d(t,"slerp",function(){return _}),n.d(t,"random",function(){return y}),n.d(t,"invert",function(){return v}),n.d(t,"conjugate",function(){return g}),n.d(t,"fromMat3",function(){return b}),n.d(t,"fromEuler",function(){return x}),n.d(t,"str",function(){return w}),n.d(t,"clone",function(){return A}),n.d(t,"fromValues",function(){return S}),n.d(t,"copy",function(){return O}),n.d(t,"set",function(){return I}),n.d(t,"add",function(){return R}),n.d(t,"mul",function(){return j}),n.d(t,"scale",function(){return L}),n.d(t,"dot",function(){return z}),n.d(t,"lerp",function(){return D}),n.d(t,"length",function(){return B}),n.d(t,"len",function(){return N}),n.d(t,"squaredLength",function(){return q}),n.d(t,"sqrLen",function(){return F}),n.d(t,"normalize",function(){return U}),n.d(t,"exactEquals",function(){return V}),n.d(t,"equals",function(){return W}),n.d(t,"rotationTo",function(){return G}),n.d(t,"sqlerp",function(){return Z}),n.d(t,"setAxes",function(){return H});var r=n(/*! ./common.js */"./node_modules/gl-matrix/lib/gl-matrix/common.js"),i=n(/*! ./mat3.js */"./node_modules/gl-matrix/lib/gl-matrix/mat3.js"),o=n(/*! ./vec3.js */"./node_modules/gl-matrix/lib/gl-matrix/vec3.js"),a=n(/*! ./vec4.js */"./node_modules/gl-matrix/lib/gl-matrix/vec4.js");function s(){var e=new r.ARRAY_TYPE(4);return r.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function u(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function l(e,t,n){n*=.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}function c(e,t){var n=2*Math.acos(t[3]),i=Math.sin(n/2);return i>r.EPSILON?(e[0]=t[0]/i,e[1]=t[1]/i,e[2]=t[2]/i):(e[0]=1,e[1]=0,e[2]=0),n}function p(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=n[0],u=n[1],l=n[2],c=n[3];return e[0]=r*c+a*s+i*l-o*u,e[1]=i*c+a*u+o*s-r*l,e[2]=o*c+a*l+r*u-i*s,e[3]=a*c-r*s-i*u-o*l,e}function h(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u+a*s,e[1]=i*u+o*s,e[2]=o*u-i*s,e[3]=a*u-r*s,e}function f(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u-o*s,e[1]=i*u+a*s,e[2]=o*u+r*s,e[3]=a*u-i*s,e}function d(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u+i*s,e[1]=i*u-r*s,e[2]=o*u+a*s,e[3]=a*u-o*s,e}function m(e,t){var n=t[0],r=t[1],i=t[2];return e[0]=n,e[1]=r,e[2]=i,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),e}function _(e,t,n,i){var o=t[0],a=t[1],s=t[2],u=t[3],l=n[0],c=n[1],p=n[2],h=n[3],f=void 0,d=void 0,m=void 0,_=void 0,y=void 0;return(d=o*l+a*c+s*p+u*h)<0&&(d=-d,l=-l,c=-c,p=-p,h=-h),1-d>r.EPSILON?(f=Math.acos(d),m=Math.sin(f),_=Math.sin((1-i)*f)/m,y=Math.sin(i*f)/m):(_=1-i,y=i),e[0]=_*o+y*l,e[1]=_*a+y*c,e[2]=_*s+y*p,e[3]=_*u+y*h,e}function y(e){var t=r.RANDOM(),n=r.RANDOM(),i=r.RANDOM(),o=Math.sqrt(1-t),a=Math.sqrt(t);return e[0]=o*Math.sin(2*Math.PI*n),e[1]=o*Math.cos(2*Math.PI*n),e[2]=a*Math.sin(2*Math.PI*i),e[3]=a*Math.cos(2*Math.PI*i),e}function v(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*n+r*r+i*i+o*o,s=a?1/a:0;return e[0]=-n*s,e[1]=-r*s,e[2]=-i*s,e[3]=o*s,e}function g(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function b(e,t){var n=t[0]+t[4]+t[8],r=void 0;if(n>0)r=Math.sqrt(n+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[3*i+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;r=Math.sqrt(t[3*i+i]-t[3*o+o]-t[3*a+a]+1),e[i]=.5*r,r=.5/r,e[3]=(t[3*o+a]-t[3*a+o])*r,e[o]=(t[3*o+i]+t[3*i+o])*r,e[a]=(t[3*a+i]+t[3*i+a])*r}return e}function x(e,t,n,r){var i=.5*Math.PI/180;t*=i,n*=i,r*=i;var o=Math.sin(t),a=Math.cos(t),s=Math.sin(n),u=Math.cos(n),l=Math.sin(r),c=Math.cos(r);return e[0]=o*u*c-a*s*l,e[1]=a*s*c+o*u*l,e[2]=a*u*l-o*s*c,e[3]=a*u*c+o*s*l,e}function w(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}var E,T,k,C,M,P,A=a.clone,S=a.fromValues,O=a.copy,I=a.set,R=a.add,j=p,L=a.scale,z=a.dot,D=a.lerp,B=a.length,N=B,q=a.squaredLength,F=q,U=a.normalize,V=a.exactEquals,W=a.equals,G=(E=o.create(),T=o.fromValues(1,0,0),k=o.fromValues(0,1,0),function(e,t,n){var r=o.dot(t,n);return r<-.999999?(o.cross(E,T,t),o.len(E)<1e-6&&o.cross(E,k,t),o.normalize(E,E),l(e,E,Math.PI),e):r>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(o.cross(E,t,n),e[0]=E[0],e[1]=E[1],e[2]=E[2],e[3]=1+r,U(e,e))}),Z=(C=s(),M=s(),function(e,t,n,r,i,o){return _(C,t,i,o),_(M,n,r,o),_(e,C,M,2*o*(1-o)),e}),H=(P=i.create(),function(e,t,n,r){return P[0]=n[0],P[3]=n[1],P[6]=n[2],P[1]=r[0],P[4]=r[1],P[7]=r[2],P[2]=-t[0],P[5]=-t[1],P[8]=-t[2],U(e,b(e,P))})},"./node_modules/gl-matrix/lib/gl-matrix/quat2.js":
/*!*******************************************************!*\
  !*** ./node_modules/gl-matrix/lib/gl-matrix/quat2.js ***!
  \*******************************************************/
/*! exports provided: create, clone, fromValues, fromRotationTranslationValues, fromRotationTranslation, fromTranslation, fromRotation, fromMat4, copy, identity, set, getReal, getDual, setReal, setDual, getTranslation, translate, rotateX, rotateY, rotateZ, rotateByQuatAppend, rotateByQuatPrepend, rotateAroundAxis, add, multiply, mul, scale, dot, lerp, invert, conjugate, length, len, squaredLength, sqrLen, normalize, str, exactEquals, equals */function(e,t,n){"use strict";n.r(t),n.d(t,"create",function(){return a}),n.d(t,"clone",function(){return s}),n.d(t,"fromValues",function(){return u}),n.d(t,"fromRotationTranslationValues",function(){return l}),n.d(t,"fromRotationTranslation",function(){return c}),n.d(t,"fromTranslation",function(){return p}),n.d(t,"fromRotation",function(){return h}),n.d(t,"fromMat4",function(){return f}),n.d(t,"copy",function(){return d}),n.d(t,"identity",function(){return m}),n.d(t,"set",function(){return _}),n.d(t,"getReal",function(){return y}),n.d(t,"getDual",function(){return v}),n.d(t,"setReal",function(){return g}),n.d(t,"setDual",function(){return b}),n.d(t,"getTranslation",function(){return x}),n.d(t,"translate",function(){return w}),n.d(t,"rotateX",function(){return E}),n.d(t,"rotateY",function(){return T}),n.d(t,"rotateZ",function(){return k}),n.d(t,"rotateByQuatAppend",function(){return C}),n.d(t,"rotateByQuatPrepend",function(){return M}),n.d(t,"rotateAroundAxis",function(){return P}),n.d(t,"add",function(){return A}),n.d(t,"multiply",function(){return S}),n.d(t,"mul",function(){return O}),n.d(t,"scale",function(){return I}),n.d(t,"dot",function(){return R}),n.d(t,"lerp",function(){return j}),n.d(t,"invert",function(){return L}),n.d(t,"conjugate",function(){return z}),n.d(t,"length",function(){return D}),n.d(t,"len",function(){return B}),n.d(t,"squaredLength",function(){return N}),n.d(t,"sqrLen",function(){return q}),n.d(t,"normalize",function(){return F}),n.d(t,"str",function(){return U}),n.d(t,"exactEquals",function(){return V}),n.d(t,"equals",function(){return W});var r=n(/*! ./common.js */"./node_modules/gl-matrix/lib/gl-matrix/common.js"),i=n(/*! ./quat.js */"./node_modules/gl-matrix/lib/gl-matrix/quat.js"),o=n(/*! ./mat4.js */"./node_modules/gl-matrix/lib/gl-matrix/mat4.js");function a(){var e=new r.ARRAY_TYPE(8);return r.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0),e[3]=1,e}function s(e){var t=new r.ARRAY_TYPE(8);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function u(e,t,n,i,o,a,s,u){var l=new r.ARRAY_TYPE(8);return l[0]=e,l[1]=t,l[2]=n,l[3]=i,l[4]=o,l[5]=a,l[6]=s,l[7]=u,l}function l(e,t,n,i,o,a,s){var u=new r.ARRAY_TYPE(8);u[0]=e,u[1]=t,u[2]=n,u[3]=i;var l=.5*o,c=.5*a,p=.5*s;return u[4]=l*i+c*n-p*t,u[5]=c*i+p*e-l*n,u[6]=p*i+l*t-c*e,u[7]=-l*e-c*t-p*n,u}function c(e,t,n){var r=.5*n[0],i=.5*n[1],o=.5*n[2],a=t[0],s=t[1],u=t[2],l=t[3];return e[0]=a,e[1]=s,e[2]=u,e[3]=l,e[4]=r*l+i*u-o*s,e[5]=i*l+o*a-r*u,e[6]=o*l+r*s-i*a,e[7]=-r*a-i*s-o*u,e}function p(e,t){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=.5*t[0],e[5]=.5*t[1],e[6]=.5*t[2],e[7]=0,e}function h(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}function f(e,t){var n=i.create();o.getRotation(n,t);var a=new r.ARRAY_TYPE(3);return o.getTranslation(a,t),c(e,n,a),e}function d(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function m(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}function _(e,t,n,r,i,o,a,s,u){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=o,e[5]=a,e[6]=s,e[7]=u,e}var y=i.copy;function v(e,t){return e[0]=t[4],e[1]=t[5],e[2]=t[6],e[3]=t[7],e}var g=i.copy;function b(e,t){return e[4]=t[0],e[5]=t[1],e[6]=t[2],e[7]=t[3],e}function x(e,t){var n=t[4],r=t[5],i=t[6],o=t[7],a=-t[0],s=-t[1],u=-t[2],l=t[3];return e[0]=2*(n*l+o*a+r*u-i*s),e[1]=2*(r*l+o*s+i*a-n*u),e[2]=2*(i*l+o*u+n*s-r*a),e}function w(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=.5*n[0],u=.5*n[1],l=.5*n[2],c=t[4],p=t[5],h=t[6],f=t[7];return e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=a*s+i*l-o*u+c,e[5]=a*u+o*s-r*l+p,e[6]=a*l+r*u-i*s+h,e[7]=-r*s-i*u-o*l+f,e}function E(e,t,n){var r=-t[0],o=-t[1],a=-t[2],s=t[3],u=t[4],l=t[5],c=t[6],p=t[7],h=u*s+p*r+l*a-c*o,f=l*s+p*o+c*r-u*a,d=c*s+p*a+u*o-l*r,m=p*s-u*r-l*o-c*a;return i.rotateX(e,t,n),r=e[0],o=e[1],a=e[2],s=e[3],e[4]=h*s+m*r+f*a-d*o,e[5]=f*s+m*o+d*r-h*a,e[6]=d*s+m*a+h*o-f*r,e[7]=m*s-h*r-f*o-d*a,e}function T(e,t,n){var r=-t[0],o=-t[1],a=-t[2],s=t[3],u=t[4],l=t[5],c=t[6],p=t[7],h=u*s+p*r+l*a-c*o,f=l*s+p*o+c*r-u*a,d=c*s+p*a+u*o-l*r,m=p*s-u*r-l*o-c*a;return i.rotateY(e,t,n),r=e[0],o=e[1],a=e[2],s=e[3],e[4]=h*s+m*r+f*a-d*o,e[5]=f*s+m*o+d*r-h*a,e[6]=d*s+m*a+h*o-f*r,e[7]=m*s-h*r-f*o-d*a,e}function k(e,t,n){var r=-t[0],o=-t[1],a=-t[2],s=t[3],u=t[4],l=t[5],c=t[6],p=t[7],h=u*s+p*r+l*a-c*o,f=l*s+p*o+c*r-u*a,d=c*s+p*a+u*o-l*r,m=p*s-u*r-l*o-c*a;return i.rotateZ(e,t,n),r=e[0],o=e[1],a=e[2],s=e[3],e[4]=h*s+m*r+f*a-d*o,e[5]=f*s+m*o+d*r-h*a,e[6]=d*s+m*a+h*o-f*r,e[7]=m*s-h*r-f*o-d*a,e}function C(e,t,n){var r=n[0],i=n[1],o=n[2],a=n[3],s=t[0],u=t[1],l=t[2],c=t[3];return e[0]=s*a+c*r+u*o-l*i,e[1]=u*a+c*i+l*r-s*o,e[2]=l*a+c*o+s*i-u*r,e[3]=c*a-s*r-u*i-l*o,s=t[4],u=t[5],l=t[6],c=t[7],e[4]=s*a+c*r+u*o-l*i,e[5]=u*a+c*i+l*r-s*o,e[6]=l*a+c*o+s*i-u*r,e[7]=c*a-s*r-u*i-l*o,e}function M(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=n[0],u=n[1],l=n[2],c=n[3];return e[0]=r*c+a*s+i*l-o*u,e[1]=i*c+a*u+o*s-r*l,e[2]=o*c+a*l+r*u-i*s,e[3]=a*c-r*s-i*u-o*l,s=n[4],u=n[5],l=n[6],c=n[7],e[4]=r*c+a*s+i*l-o*u,e[5]=i*c+a*u+o*s-r*l,e[6]=o*c+a*l+r*u-i*s,e[7]=a*c-r*s-i*u-o*l,e}function P(e,t,n,i){if(Math.abs(i)<r.EPSILON)return d(e,t);var o=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);i*=.5;var a=Math.sin(i),s=a*n[0]/o,u=a*n[1]/o,l=a*n[2]/o,c=Math.cos(i),p=t[0],h=t[1],f=t[2],m=t[3];e[0]=p*c+m*s+h*l-f*u,e[1]=h*c+m*u+f*s-p*l,e[2]=f*c+m*l+p*u-h*s,e[3]=m*c-p*s-h*u-f*l;var _=t[4],y=t[5],v=t[6],g=t[7];return e[4]=_*c+g*s+y*l-v*u,e[5]=y*c+g*u+v*s-_*l,e[6]=v*c+g*l+_*u-y*s,e[7]=g*c-_*s-y*u-v*l,e}function A(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e}function S(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=n[4],u=n[5],l=n[6],c=n[7],p=t[4],h=t[5],f=t[6],d=t[7],m=n[0],_=n[1],y=n[2],v=n[3];return e[0]=r*v+a*m+i*y-o*_,e[1]=i*v+a*_+o*m-r*y,e[2]=o*v+a*y+r*_-i*m,e[3]=a*v-r*m-i*_-o*y,e[4]=r*c+a*s+i*l-o*u+p*v+d*m+h*y-f*_,e[5]=i*c+a*u+o*s-r*l+h*v+d*_+f*m-p*y,e[6]=o*c+a*l+r*u-i*s+f*v+d*y+p*_-h*m,e[7]=a*c-r*s-i*u-o*l+d*v-p*m-h*_-f*y,e}var O=S;function I(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e}var R=i.dot;function j(e,t,n,r){var i=1-r;return R(t,n)<0&&(r=-r),e[0]=t[0]*i+n[0]*r,e[1]=t[1]*i+n[1]*r,e[2]=t[2]*i+n[2]*r,e[3]=t[3]*i+n[3]*r,e[4]=t[4]*i+n[4]*r,e[5]=t[5]*i+n[5]*r,e[6]=t[6]*i+n[6]*r,e[7]=t[7]*i+n[7]*r,e}function L(e,t){var n=N(t);return e[0]=-t[0]/n,e[1]=-t[1]/n,e[2]=-t[2]/n,e[3]=t[3]/n,e[4]=-t[4]/n,e[5]=-t[5]/n,e[6]=-t[6]/n,e[7]=t[7]/n,e}function z(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=t[7],e}var D=i.length,B=D,N=i.squaredLength,q=N;function F(e,t){var n=N(t);if(n>0){n=Math.sqrt(n);var r=t[0]/n,i=t[1]/n,o=t[2]/n,a=t[3]/n,s=t[4],u=t[5],l=t[6],c=t[7],p=r*s+i*u+o*l+a*c;e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=(s-r*p)/n,e[5]=(u-i*p)/n,e[6]=(l-o*p)/n,e[7]=(c-a*p)/n}return e}function U(e){return"quat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+")"}function V(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]}function W(e,t){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],p=t[0],h=t[1],f=t[2],d=t[3],m=t[4],_=t[5],y=t[6],v=t[7];return Math.abs(n-p)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(p))&&Math.abs(i-h)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(o-f)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(a-d)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(s-m)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(u-_)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(_))&&Math.abs(l-y)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(c-v)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(v))}},"./node_modules/gl-matrix/lib/gl-matrix/vec2.js":
/*!******************************************************!*\
  !*** ./node_modules/gl-matrix/lib/gl-matrix/vec2.js ***!
  \******************************************************/
/*! exports provided: create, clone, fromValues, copy, set, add, subtract, multiply, divide, ceil, floor, min, max, round, scale, scaleAndAdd, distance, squaredDistance, length, squaredLength, negate, inverse, normalize, dot, cross, lerp, random, transformMat2, transformMat2d, transformMat3, transformMat4, rotate, angle, str, exactEquals, equals, len, sub, mul, div, dist, sqrDist, sqrLen, forEach */function(e,t,n){"use strict";n.r(t),n.d(t,"create",function(){return i}),n.d(t,"clone",function(){return o}),n.d(t,"fromValues",function(){return a}),n.d(t,"copy",function(){return s}),n.d(t,"set",function(){return u}),n.d(t,"add",function(){return l}),n.d(t,"subtract",function(){return c}),n.d(t,"multiply",function(){return p}),n.d(t,"divide",function(){return h}),n.d(t,"ceil",function(){return f}),n.d(t,"floor",function(){return d}),n.d(t,"min",function(){return m}),n.d(t,"max",function(){return _}),n.d(t,"round",function(){return y}),n.d(t,"scale",function(){return v}),n.d(t,"scaleAndAdd",function(){return g}),n.d(t,"distance",function(){return b}),n.d(t,"squaredDistance",function(){return x}),n.d(t,"length",function(){return w}),n.d(t,"squaredLength",function(){return E}),n.d(t,"negate",function(){return T}),n.d(t,"inverse",function(){return k}),n.d(t,"normalize",function(){return C}),n.d(t,"dot",function(){return M}),n.d(t,"cross",function(){return P}),n.d(t,"lerp",function(){return A}),n.d(t,"random",function(){return S}),n.d(t,"transformMat2",function(){return O}),n.d(t,"transformMat2d",function(){return I}),n.d(t,"transformMat3",function(){return R}),n.d(t,"transformMat4",function(){return j}),n.d(t,"rotate",function(){return L}),n.d(t,"angle",function(){return z}),n.d(t,"str",function(){return D}),n.d(t,"exactEquals",function(){return B}),n.d(t,"equals",function(){return N}),n.d(t,"len",function(){return F}),n.d(t,"sub",function(){return U}),n.d(t,"mul",function(){return V}),n.d(t,"div",function(){return W}),n.d(t,"dist",function(){return G}),n.d(t,"sqrDist",function(){return Z}),n.d(t,"sqrLen",function(){return H}),n.d(t,"forEach",function(){return K});var r=n(/*! ./common.js */"./node_modules/gl-matrix/lib/gl-matrix/common.js");function i(){var e=new r.ARRAY_TYPE(2);return r.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0),e}function o(e){var t=new r.ARRAY_TYPE(2);return t[0]=e[0],t[1]=e[1],t}function a(e,t){var n=new r.ARRAY_TYPE(2);return n[0]=e,n[1]=t,n}function s(e,t){return e[0]=t[0],e[1]=t[1],e}function u(e,t,n){return e[0]=t,e[1]=n,e}function l(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function c(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function p(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e}function h(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e}function f(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function d(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function m(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}function _(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}function y(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function v(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function g(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e}function b(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)}function x(e,t){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function w(e){var t=e[0],n=e[1];return Math.sqrt(t*t+n*n)}function E(e){var t=e[0],n=e[1];return t*t+n*n}function T(e,t){return e[0]=-t[0],e[1]=-t[1],e}function k(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function C(e,t){var n=t[0],r=t[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i),e}function M(e,t){return e[0]*t[0]+e[1]*t[1]}function P(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e}function A(e,t,n,r){var i=t[0],o=t[1];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e}function S(e,t){t=t||1;var n=2*r.RANDOM()*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e}function O(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i,e[1]=n[1]*r+n[3]*i,e}function I(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i+n[4],e[1]=n[1]*r+n[3]*i+n[5],e}function R(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[3]*i+n[6],e[1]=n[1]*r+n[4]*i+n[7],e}function j(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e}function L(e,t,n,r){var i=t[0]-n[0],o=t[1]-n[1],a=Math.sin(r),s=Math.cos(r);return e[0]=i*s-o*a+n[0],e[1]=i*a+o*s+n[1],e}function z(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],a=n*n+r*r;a>0&&(a=1/Math.sqrt(a));var s=i*i+o*o;s>0&&(s=1/Math.sqrt(s));var u=(n*i+r*o)*a*s;return u>1?0:u<-1?Math.PI:Math.acos(u)}function D(e){return"vec2("+e[0]+", "+e[1]+")"}function B(e,t){return e[0]===t[0]&&e[1]===t[1]}function N(e,t){var n=e[0],i=e[1],o=t[0],a=t[1];return Math.abs(n-o)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-a)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(a))}var q,F=w,U=c,V=p,W=h,G=b,Z=x,H=E,K=(q=i(),function(e,t,n,r,i,o){var a=void 0,s=void 0;for(t||(t=2),n||(n=0),s=r?Math.min(r*t+n,e.length):e.length,a=n;a<s;a+=t)q[0]=e[a],q[1]=e[a+1],i(q,q,o),e[a]=q[0],e[a+1]=q[1];return e})},"./node_modules/gl-matrix/lib/gl-matrix/vec3.js":
/*!******************************************************!*\
  !*** ./node_modules/gl-matrix/lib/gl-matrix/vec3.js ***!
  \******************************************************/
/*! exports provided: create, clone, length, fromValues, copy, set, add, subtract, multiply, divide, ceil, floor, min, max, round, scale, scaleAndAdd, distance, squaredDistance, squaredLength, negate, inverse, normalize, dot, cross, lerp, hermite, bezier, random, transformMat4, transformMat3, transformQuat, rotateX, rotateY, rotateZ, angle, str, exactEquals, equals, sub, mul, div, dist, sqrDist, len, sqrLen, forEach */function(e,t,n){"use strict";n.r(t),n.d(t,"create",function(){return i}),n.d(t,"clone",function(){return o}),n.d(t,"length",function(){return a}),n.d(t,"fromValues",function(){return s}),n.d(t,"copy",function(){return u}),n.d(t,"set",function(){return l}),n.d(t,"add",function(){return c}),n.d(t,"subtract",function(){return p}),n.d(t,"multiply",function(){return h}),n.d(t,"divide",function(){return f}),n.d(t,"ceil",function(){return d}),n.d(t,"floor",function(){return m}),n.d(t,"min",function(){return _}),n.d(t,"max",function(){return y}),n.d(t,"round",function(){return v}),n.d(t,"scale",function(){return g}),n.d(t,"scaleAndAdd",function(){return b}),n.d(t,"distance",function(){return x}),n.d(t,"squaredDistance",function(){return w}),n.d(t,"squaredLength",function(){return E}),n.d(t,"negate",function(){return T}),n.d(t,"inverse",function(){return k}),n.d(t,"normalize",function(){return C}),n.d(t,"dot",function(){return M}),n.d(t,"cross",function(){return P}),n.d(t,"lerp",function(){return A}),n.d(t,"hermite",function(){return S}),n.d(t,"bezier",function(){return O}),n.d(t,"random",function(){return I}),n.d(t,"transformMat4",function(){return R}),n.d(t,"transformMat3",function(){return j}),n.d(t,"transformQuat",function(){return L}),n.d(t,"rotateX",function(){return z}),n.d(t,"rotateY",function(){return D}),n.d(t,"rotateZ",function(){return B}),n.d(t,"angle",function(){return N}),n.d(t,"str",function(){return q}),n.d(t,"exactEquals",function(){return F}),n.d(t,"equals",function(){return U}),n.d(t,"sub",function(){return W}),n.d(t,"mul",function(){return G}),n.d(t,"div",function(){return Z}),n.d(t,"dist",function(){return H}),n.d(t,"sqrDist",function(){return K}),n.d(t,"len",function(){return Y}),n.d(t,"sqrLen",function(){return X}),n.d(t,"forEach",function(){return $});var r=n(/*! ./common.js */"./node_modules/gl-matrix/lib/gl-matrix/common.js");function i(){var e=new r.ARRAY_TYPE(3);return r.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function o(e){var t=new r.ARRAY_TYPE(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function a(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}function s(e,t,n){var i=new r.ARRAY_TYPE(3);return i[0]=e,i[1]=t,i[2]=n,i}function u(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function l(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}function c(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function p(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function h(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function f(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function d(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function m(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function _(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function y(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function v(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function g(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function b(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}function x(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)}function w(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i}function E(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function T(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function k(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function C(e,t){var n=t[0],r=t[1],i=t[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o),e}function M(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function P(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],u=n[2];return e[0]=i*u-o*s,e[1]=o*a-r*u,e[2]=r*s-i*a,e}function A(e,t,n,r){var i=t[0],o=t[1],a=t[2];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e[2]=a+r*(n[2]-a),e}function S(e,t,n,r,i,o){var a=o*o,s=a*(2*o-3)+1,u=a*(o-2)+o,l=a*(o-1),c=a*(3-2*o);return e[0]=t[0]*s+n[0]*u+r[0]*l+i[0]*c,e[1]=t[1]*s+n[1]*u+r[1]*l+i[1]*c,e[2]=t[2]*s+n[2]*u+r[2]*l+i[2]*c,e}function O(e,t,n,r,i,o){var a=1-o,s=a*a,u=o*o,l=s*a,c=3*o*s,p=3*u*a,h=u*o;return e[0]=t[0]*l+n[0]*c+r[0]*p+i[0]*h,e[1]=t[1]*l+n[1]*c+r[1]*p+i[1]*h,e[2]=t[2]*l+n[2]*c+r[2]*p+i[2]*h,e}function I(e,t){t=t||1;var n=2*r.RANDOM()*Math.PI,i=2*r.RANDOM()-1,o=Math.sqrt(1-i*i)*t;return e[0]=Math.cos(n)*o,e[1]=Math.sin(n)*o,e[2]=i*t,e}function R(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,e[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,e[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,e[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,e}function j(e,t,n){var r=t[0],i=t[1],o=t[2];return e[0]=r*n[0]+i*n[3]+o*n[6],e[1]=r*n[1]+i*n[4]+o*n[7],e[2]=r*n[2]+i*n[5]+o*n[8],e}function L(e,t,n){var r=n[0],i=n[1],o=n[2],a=n[3],s=t[0],u=t[1],l=t[2],c=i*l-o*u,p=o*s-r*l,h=r*u-i*s,f=i*h-o*p,d=o*c-r*h,m=r*p-i*c,_=2*a;return c*=_,p*=_,h*=_,f*=2,d*=2,m*=2,e[0]=s+c+f,e[1]=u+p+d,e[2]=l+h+m,e}function z(e,t,n,r){var i=[],o=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e}function D(e,t,n,r){var i=[],o=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e}function B(e,t,n,r){var i=[],o=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e}function N(e,t){var n=s(e[0],e[1],e[2]),r=s(t[0],t[1],t[2]);C(n,n),C(r,r);var i=M(n,r);return i>1?0:i<-1?Math.PI:Math.acos(i)}function q(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function F(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function U(e,t){var n=e[0],i=e[1],o=e[2],a=t[0],s=t[1],u=t[2];return Math.abs(n-a)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-s)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(o-u)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))}var V,W=p,G=h,Z=f,H=x,K=w,Y=a,X=E,$=(V=i(),function(e,t,n,r,i,o){var a=void 0,s=void 0;for(t||(t=3),n||(n=0),s=r?Math.min(r*t+n,e.length):e.length,a=n;a<s;a+=t)V[0]=e[a],V[1]=e[a+1],V[2]=e[a+2],i(V,V,o),e[a]=V[0],e[a+1]=V[1],e[a+2]=V[2];return e})},"./node_modules/gl-matrix/lib/gl-matrix/vec4.js":
/*!******************************************************!*\
  !*** ./node_modules/gl-matrix/lib/gl-matrix/vec4.js ***!
  \******************************************************/
/*! exports provided: create, clone, fromValues, copy, set, add, subtract, multiply, divide, ceil, floor, min, max, round, scale, scaleAndAdd, distance, squaredDistance, length, squaredLength, negate, inverse, normalize, dot, lerp, random, transformMat4, transformQuat, str, exactEquals, equals, sub, mul, div, dist, sqrDist, len, sqrLen, forEach */function(e,t,n){"use strict";n.r(t),n.d(t,"create",function(){return i}),n.d(t,"clone",function(){return o}),n.d(t,"fromValues",function(){return a}),n.d(t,"copy",function(){return s}),n.d(t,"set",function(){return u}),n.d(t,"add",function(){return l}),n.d(t,"subtract",function(){return c}),n.d(t,"multiply",function(){return p}),n.d(t,"divide",function(){return h}),n.d(t,"ceil",function(){return f}),n.d(t,"floor",function(){return d}),n.d(t,"min",function(){return m}),n.d(t,"max",function(){return _}),n.d(t,"round",function(){return y}),n.d(t,"scale",function(){return v}),n.d(t,"scaleAndAdd",function(){return g}),n.d(t,"distance",function(){return b}),n.d(t,"squaredDistance",function(){return x}),n.d(t,"length",function(){return w}),n.d(t,"squaredLength",function(){return E}),n.d(t,"negate",function(){return T}),n.d(t,"inverse",function(){return k}),n.d(t,"normalize",function(){return C}),n.d(t,"dot",function(){return M}),n.d(t,"lerp",function(){return P}),n.d(t,"random",function(){return A}),n.d(t,"transformMat4",function(){return S}),n.d(t,"transformQuat",function(){return O}),n.d(t,"str",function(){return I}),n.d(t,"exactEquals",function(){return R}),n.d(t,"equals",function(){return j}),n.d(t,"sub",function(){return z}),n.d(t,"mul",function(){return D}),n.d(t,"div",function(){return B}),n.d(t,"dist",function(){return N}),n.d(t,"sqrDist",function(){return q}),n.d(t,"len",function(){return F}),n.d(t,"sqrLen",function(){return U}),n.d(t,"forEach",function(){return V});var r=n(/*! ./common.js */"./node_modules/gl-matrix/lib/gl-matrix/common.js");function i(){var e=new r.ARRAY_TYPE(4);return r.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function o(e){var t=new r.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function a(e,t,n,i){var o=new r.ARRAY_TYPE(4);return o[0]=e,o[1]=t,o[2]=n,o[3]=i,o}function s(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function u(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e}function l(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}function c(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function p(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}function h(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e}function f(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function d(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function m(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e}function _(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e}function y(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function v(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function g(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e}function b(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],o=t[3]-e[3];return Math.sqrt(n*n+r*r+i*i+o*o)}function x(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],o=t[3]-e[3];return n*n+r*r+i*i+o*o}function w(e){var t=e[0],n=e[1],r=e[2],i=e[3];return Math.sqrt(t*t+n*n+r*r+i*i)}function E(e){var t=e[0],n=e[1],r=e[2],i=e[3];return t*t+n*n+r*r+i*i}function T(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function k(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function C(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),e[0]=n*a,e[1]=r*a,e[2]=i*a,e[3]=o*a),e}function M(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function P(e,t,n,r){var i=t[0],o=t[1],a=t[2],s=t[3];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e[2]=a+r*(n[2]-a),e[3]=s+r*(n[3]-s),e}function A(e,t){var n,i,o,a,s,u;t=t||1;do{s=(n=2*r.RANDOM()-1)*n+(i=2*r.RANDOM()-1)*i}while(s>=1);do{u=(o=2*r.RANDOM()-1)*o+(a=2*r.RANDOM()-1)*a}while(u>=1);var l=Math.sqrt((1-s)/u);return e[0]=t*n,e[1]=t*i,e[2]=t*o*l,e[3]=t*a*l,e}function S(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,e}function O(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],u=n[2],l=n[3],c=l*r+s*o-u*i,p=l*i+u*r-a*o,h=l*o+a*i-s*r,f=-a*r-s*i-u*o;return e[0]=c*l+f*-a+p*-u-h*-s,e[1]=p*l+f*-s+h*-a-c*-u,e[2]=h*l+f*-u+c*-s-p*-a,e[3]=t[3],e}function I(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function R(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function j(e,t){var n=e[0],i=e[1],o=e[2],a=e[3],s=t[0],u=t[1],l=t[2],c=t[3];return Math.abs(n-s)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-u)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-l)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(a-c)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))}var L,z=c,D=p,B=h,N=b,q=x,F=w,U=E,V=(L=i(),function(e,t,n,r,i,o){var a=void 0,s=void 0;for(t||(t=4),n||(n=0),s=r?Math.min(r*t+n,e.length):e.length,a=n;a<s;a+=t)L[0]=e[a],L[1]=e[a+1],L[2]=e[a+2],L[3]=e[a+3],i(L,L,o),e[a]=L[0],e[a+1]=L[1],e[a+2]=L[2],e[a+3]=L[3];return e})},"./node_modules/inherits/inherits_browser.js":
/*!***************************************************!*\
  !*** ./node_modules/inherits/inherits_browser.js ***!
  \***************************************************/
/*! no static exports found */function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},"./node_modules/jsep/build/jsep.js":
/*!*****************************************!*\
  !*** ./node_modules/jsep/build/jsep.js ***!
  \*****************************************/
/*! no static exports found */function(e,t,n){!function(n){"use strict";var r=function(e,t){var n=new Error(e+" at character "+t);throw n.index=t,n.description=e,n},i=!0,o={"-":i,"!":i,"~":i,"+":i},a={"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},s={$:i,_:i},u=function(e){var t,n=0;for(var r in e)(t=r.length)>n&&e.hasOwnProperty(r)&&(n=t);return n},l=u(o),c=u(a),p={true:!0,false:!1,null:null},h=function(e){return a[e]||0},f=function(e,t,n){return{type:"||"===e||"&&"===e?"LogicalExpression":"BinaryExpression",operator:e,left:t,right:n}},d=function(e){return e>=48&&e<=57},m=function(e){return e>=65&&e<=90||e>=97&&e<=122||e>=128&&!a[String.fromCharCode(e)]||s.hasOwnProperty(String.fromCharCode(e))},_=function(e){return e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e>=128&&!a[String.fromCharCode(e)]||s.hasOwnProperty(String.fromCharCode(e))},y=function(e){for(var t,n,i=0,s=e.charAt,u=e.charCodeAt,y=function(t){return s.call(e,t)},v=function(t){return u.call(e,t)},g=e.length,b=function(){for(var e=v(i);32===e||9===e||10===e||13===e;)e=v(++i)},x=function(){var e,t,n=E();return b(),63!==v(i)?n:(i++,(e=x())||r("Expected expression",i),b(),58===v(i)?(i++,(t=x())||r("Expected expression",i),{type:"ConditionalExpression",test:n,consequent:e,alternate:t}):void r("Expected :",i))},w=function(){b();for(var t=e.substr(i,c),n=t.length;n>0;){if(a.hasOwnProperty(t)&&(!m(v(i))||i+t.length<e.length&&!_(v(i+t.length))))return i+=n,t;t=t.substr(0,--n)}return!1},E=function(){var e,t,n,o,a,s,u,l;if(s=T(),!(t=w()))return s;for(a={value:t,prec:h(t)},(u=T())||r("Expected expression after "+t,i),o=[s,a,u];(t=w())&&0!==(n=h(t));){for(a={value:t,prec:n};o.length>2&&n<=o[o.length-2].prec;)u=o.pop(),t=o.pop().value,s=o.pop(),e=f(t,s,u),o.push(e);(e=T())||r("Expected expression after "+t,i),o.push(a,e)}for(e=o[l=o.length-1];l>1;)e=f(o[l-1].value,o[l-2],e),l-=2;return e},T=function(){var t,n,r;if(b(),t=v(i),d(t)||46===t)return k();if(39===t||34===t)return C();if(91===t)return O();for(r=(n=e.substr(i,l)).length;r>0;){if(o.hasOwnProperty(n)&&(!m(v(i))||i+n.length<e.length&&!_(v(i+n.length))))return i+=r,{type:"UnaryExpression",operator:n,argument:T(),prefix:!0};n=n.substr(0,--r)}return!(!m(t)&&40!==t)&&A()},k=function(){for(var e,t,n="";d(v(i));)n+=y(i++);if(46===v(i))for(n+=y(i++);d(v(i));)n+=y(i++);if("e"===(e=y(i))||"E"===e){for(n+=y(i++),"+"!==(e=y(i))&&"-"!==e||(n+=y(i++));d(v(i));)n+=y(i++);d(v(i-1))||r("Expected exponent ("+n+y(i)+")",i)}return t=v(i),m(t)?r("Variable names cannot start with a number ("+n+y(i)+")",i):46===t&&r("Unexpected period",i),{type:"Literal",value:parseFloat(n),raw:n}},C=function(){for(var e,t="",n=y(i++),o=!1;i<g;){if((e=y(i++))===n){o=!0;break}if("\\"===e)switch(e=y(i++)){case"n":t+="\n";break;case"r":t+="\r";break;case"t":t+="\t";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:t+=e}else t+=e}return o||r('Unclosed quote after "'+t+'"',i),{type:"Literal",value:t,raw:n+t+n}},M=function(){var t,n=v(i),o=i;for(m(n)?i++:r("Unexpected "+y(i),i);i<g&&(n=v(i),_(n));)i++;return t=e.slice(o,i),p.hasOwnProperty(t)?{type:"Literal",value:p[t],raw:t}:"this"===t?{type:"ThisExpression"}:{type:"Identifier",name:t}},P=function(e){for(var t,n,o=[],a=!1;i<g;){if(b(),(t=v(i))===e){a=!0,i++;break}44===t?i++:((n=x())&&"Compound"!==n.type||r("Expected comma",i),o.push(n))}return a||r("Expected "+String.fromCharCode(e),i),o},A=function(){var e,t;for(t=40===(e=v(i))?S():M(),b(),e=v(i);46===e||91===e||40===e;)i++,46===e?(b(),t={type:"MemberExpression",computed:!1,object:t,property:M()}):91===e?(t={type:"MemberExpression",computed:!0,object:t,property:x()},b(),93!==(e=v(i))&&r("Unclosed [",i),i++):40===e&&(t={type:"CallExpression",arguments:P(41),callee:t}),b(),e=v(i);return t},S=function(){i++;var e=x();if(b(),41===v(i))return i++,e;r("Unclosed (",i)},O=function(){return i++,{type:"ArrayExpression",elements:P(93)}},I=[];i<g;)59===(t=v(i))||44===t?i++:(n=x())?I.push(n):i<g&&r('Unexpected "'+y(i)+'"',i);return 1===I.length?I[0]:{type:"Compound",body:I}};y.version="0.3.4",y.toString=function(){return"JavaScript Expression Parser (JSEP) v"+y.version},y.addUnaryOp=function(e){return l=Math.max(e.length,l),o[e]=i,this},y.addBinaryOp=function(e,t){return c=Math.max(e.length,c),a[e]=t,this},y.addIdentifierChar=function(e){return s[e]=i,this},y.addLiteral=function(e,t){return p[e]=t,this},y.removeUnaryOp=function(e){return delete o[e],e.length===l&&(l=u(o)),this},y.removeAllUnaryOps=function(){return o={},l=0,this},y.removeIdentifierChar=function(e){return delete s[e],this},y.removeBinaryOp=function(e){return delete a[e],e.length===c&&(c=u(a)),this},y.removeAllBinaryOps=function(){return a={},c=0,this},y.removeLiteral=function(e){return delete p[e],this},y.removeAllLiterals=function(){return p={},this},void 0!==e&&e.exports?t=e.exports=y:t.parse=y}()},"./node_modules/lru-cache/index.js":
/*!*****************************************!*\
  !*** ./node_modules/lru-cache/index.js ***!
  \*****************************************/
/*! no static exports found */function(e,t,n){"use strict";e.exports=y;var r,i=n(/*! pseudomap */"./node_modules/pseudomap/map.js"),o=n(/*! util */"./node_modules/util/util.js"),a=n(/*! yallist */"./node_modules/lru-cache/node_modules/yallist/yallist.js"),s=(r="function"==typeof Symbol?function(e){return Symbol(e)}:function(e){return"_"+e})("max"),u=r("length"),l=r("lengthCalculator"),c=r("allowStale"),p=r("maxAge"),h=r("dispose"),f=r("noDisposeOnSet"),d=r("lruList"),m=r("cache");function _(){return 1}function y(e){if(!(this instanceof y))return new y(e);"number"==typeof e&&(e={max:e}),e||(e={});var t=this[s]=e.max;(!t||"number"!=typeof t||t<=0)&&(this[s]=1/0);var n=e.length||_;"function"!=typeof n&&(n=_),this[l]=n,this[c]=e.stale||!1,this[p]=e.maxAge||0,this[h]=e.dispose,this[f]=e.noDisposeOnSet||!1,this.reset()}function v(e,t,n,r){var i=n.value;b(e,i)&&(w(e,n),e[c]||(i=void 0)),i&&t.call(r,i.value,i.key,e)}function g(e,t,n){var r=e[m].get(t);if(r){var i=r.value;b(e,i)?(w(e,r),e[c]||(i=void 0)):n&&e[d].unshiftNode(r),i&&(i=i.value)}return i}function b(e,t){if(!t||!t.maxAge&&!e[p])return!1;var n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[p]&&n>e[p]}function x(e){if(e[u]>e[s])for(var t=e[d].tail;e[u]>e[s]&&null!==t;){var n=t.prev;w(e,t),t=n}}function w(e,t){if(t){var n=t.value;e[h]&&e[h](n.key,n.value),e[u]-=n.length,e[m].delete(n.key),e[d].removeNode(t)}}function E(e,t,n,r,i){this.key=e,this.value=t,this.length=n,this.now=r,this.maxAge=i||0}Object.defineProperty(y.prototype,"max",{set:function(e){(!e||"number"!=typeof e||e<=0)&&(e=1/0),this[s]=e,x(this)},get:function(){return this[s]},enumerable:!0}),Object.defineProperty(y.prototype,"allowStale",{set:function(e){this[c]=!!e},get:function(){return this[c]},enumerable:!0}),Object.defineProperty(y.prototype,"maxAge",{set:function(e){(!e||"number"!=typeof e||e<0)&&(e=0),this[p]=e,x(this)},get:function(){return this[p]},enumerable:!0}),Object.defineProperty(y.prototype,"lengthCalculator",{set:function(e){"function"!=typeof e&&(e=_),e!==this[l]&&(this[l]=e,this[u]=0,this[d].forEach(function(e){e.length=this[l](e.value,e.key),this[u]+=e.length},this)),x(this)},get:function(){return this[l]},enumerable:!0}),Object.defineProperty(y.prototype,"length",{get:function(){return this[u]},enumerable:!0}),Object.defineProperty(y.prototype,"itemCount",{get:function(){return this[d].length},enumerable:!0}),y.prototype.rforEach=function(e,t){t=t||this;for(var n=this[d].tail;null!==n;){var r=n.prev;v(this,e,n,t),n=r}},y.prototype.forEach=function(e,t){t=t||this;for(var n=this[d].head;null!==n;){var r=n.next;v(this,e,n,t),n=r}},y.prototype.keys=function(){return this[d].toArray().map(function(e){return e.key},this)},y.prototype.values=function(){return this[d].toArray().map(function(e){return e.value},this)},y.prototype.reset=function(){this[h]&&this[d]&&this[d].length&&this[d].forEach(function(e){this[h](e.key,e.value)},this),this[m]=new i,this[d]=new a,this[u]=0},y.prototype.dump=function(){return this[d].map(function(e){if(!b(this,e))return{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}},this).toArray().filter(function(e){return e})},y.prototype.dumpLru=function(){return this[d]},y.prototype.inspect=function(e,t){var n="LRUCache {",r=!1;this[c]&&(n+="\n  allowStale: true",r=!0);var i=this[s];i&&i!==1/0&&(r&&(n+=","),n+="\n  max: "+o.inspect(i,t),r=!0);var a=this[p];a&&(r&&(n+=","),n+="\n  maxAge: "+o.inspect(a,t),r=!0);var h=this[l];h&&h!==_&&(r&&(n+=","),n+="\n  length: "+o.inspect(this[u],t),r=!0);var f=!1;return this[d].forEach(function(e){f?n+=",\n  ":(r&&(n+=",\n"),f=!0,n+="\n  ");var i=o.inspect(e.key).split("\n").join("\n  "),s={value:e.value};e.maxAge!==a&&(s.maxAge=e.maxAge),h!==_&&(s.length=e.length),b(this,e)&&(s.stale=!0),s=o.inspect(s,t).split("\n").join("\n  "),n+=i+" => "+s}),(f||r)&&(n+="\n"),n+="}"},y.prototype.set=function(e,t,n){var r=(n=n||this[p])?Date.now():0,i=this[l](t,e);if(this[m].has(e)){if(i>this[s])return w(this,this[m].get(e)),!1;var o=this[m].get(e).value;return this[h]&&(this[f]||this[h](e,o.value)),o.now=r,o.maxAge=n,o.value=t,this[u]+=i-o.length,o.length=i,this.get(e),x(this),!0}var a=new E(e,t,i,r,n);return a.length>this[s]?(this[h]&&this[h](e,t),!1):(this[u]+=a.length,this[d].unshift(a),this[m].set(e,this[d].head),x(this),!0)},y.prototype.has=function(e){return!!this[m].has(e)&&!b(this,this[m].get(e).value)},y.prototype.get=function(e){return g(this,e,!0)},y.prototype.peek=function(e){return g(this,e,!1)},y.prototype.pop=function(){var e=this[d].tail;return e?(w(this,e),e.value):null},y.prototype.del=function(e){w(this,this[m].get(e))},y.prototype.load=function(e){this.reset();for(var t=Date.now(),n=e.length-1;n>=0;n--){var r=e[n],i=r.e||0;if(0===i)this.set(r.k,r.v);else{var o=i-t;o>0&&this.set(r.k,r.v,o)}}},y.prototype.prune=function(){var e=this;this[m].forEach(function(t,n){g(e,n,!1)})}},"./node_modules/lru-cache/node_modules/yallist/yallist.js":
/*!****************************************************************!*\
  !*** ./node_modules/lru-cache/node_modules/yallist/yallist.js ***!
  \****************************************************************/
/*! no static exports found */function(e,t){function n(e){var t=this;if(t instanceof n||(t=new n),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach(function(e){t.push(e)});else if(arguments.length>0)for(var r=0,i=arguments.length;r<i;r++)t.push(arguments[r]);return t}function r(e,t){e.tail=new o(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function i(e,t){e.head=new o(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function o(e,t,n,r){if(!(this instanceof o))return new o(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}e.exports=n,n.Node=o,n.create=n,n.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null},n.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},n.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},n.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)r(this,arguments[e]);return this.length},n.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)i(this,arguments[e]);return this.length},n.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},n.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},n.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;null!==n;r++)e.call(t,n.value,r,this),n=n.next},n.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;null!==n;r--)e.call(t,n.value,r,this),n=n.prev},n.prototype.get=function(e){for(var t=0,n=this.head;null!==n&&t<e;t++)n=n.next;if(t===e&&null!==n)return n.value},n.prototype.getReverse=function(e){for(var t=0,n=this.tail;null!==n&&t<e;t++)n=n.prev;if(t===e&&null!==n)return n.value},n.prototype.map=function(e,t){t=t||this;for(var r=new n,i=this.head;null!==i;)r.push(e.call(t,i.value,this)),i=i.next;return r},n.prototype.mapReverse=function(e,t){t=t||this;for(var r=new n,i=this.tail;null!==i;)r.push(e.call(t,i.value,this)),i=i.prev;return r},n.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,n=this.head.value}for(var i=0;null!==r;i++)n=e(n,r.value,i),r=r.next;return n},n.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,n=this.tail.value}for(var i=this.length-1;null!==r;i--)n=e(n,r.value,i),r=r.prev;return n},n.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;null!==n;t++)e[t]=n.value,n=n.next;return e},n.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;null!==n;t++)e[t]=n.value,n=n.prev;return e},n.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=0,o=this.head;null!==o&&i<e;i++)o=o.next;for(;null!==o&&i<t;i++,o=o.next)r.push(o.value);return r},n.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=this.length,o=this.tail;null!==o&&i>t;i--)o=o.prev;for(;null!==o&&i>e;i--,o=o.prev)r.push(o.value);return r},n.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;null!==n;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this}},"./node_modules/mitt/dist/mitt.es.js":
/*!*******************************************!*\
  !*** ./node_modules/mitt/dist/mitt.es.js ***!
  \*******************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),t.default=function(e){return e=e||Object.create(null),{on:function(t,n){(e[t]||(e[t]=[])).push(n)},off:function(t,n){e[t]&&e[t].splice(e[t].indexOf(n)>>>0,1)},emit:function(t,n){(e[t]||[]).slice().map(function(e){e(n)}),(e["*"]||[]).slice().map(function(e){e(t,n)})}}}},"./node_modules/process/browser.js":
/*!*****************************************!*\
  !*** ./node_modules/process/browser.js ***!
  \*****************************************/
/*! no static exports found */function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,l=[],c=!1,p=-1;function h(){c&&u&&(c=!1,u.length?l=u.concat(l):p=-1,l.length&&f())}function f(){if(!c){var e=s(h);c=!0;for(var t=l.length;t;){for(u=l,l=[];++p<t;)u&&u[p].run();p=-1,t=l.length}u=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new d(e,t)),1!==l.length||c||s(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},"./node_modules/pseudomap/map.js":
/*!***************************************!*\
  !*** ./node_modules/pseudomap/map.js ***!
  \***************************************/
/*! no static exports found */function(e,t,n){(function(t){"pseudomap"===t.env.npm_package_name&&"test"===t.env.npm_lifecycle_script&&(t.env.TEST_PSEUDOMAP="true"),"function"!=typeof Map||t.env.TEST_PSEUDOMAP?e.exports=n(/*! ./pseudomap */"./node_modules/pseudomap/pseudomap.js"):e.exports=Map}).call(this,n(/*! ./../process/browser.js */"./node_modules/process/browser.js"))},"./node_modules/pseudomap/pseudomap.js":
/*!*********************************************!*\
  !*** ./node_modules/pseudomap/pseudomap.js ***!
  \*********************************************/
/*! no static exports found */function(e,t){var n=Object.prototype.hasOwnProperty;function r(e){if(!(this instanceof r))throw new TypeError("Constructor PseudoMap requires 'new'");if(this.clear(),e)if(e instanceof r||"function"==typeof Map&&e instanceof Map)e.forEach(function(e,t){this.set(t,e)},this);else{if(!Array.isArray(e))throw new TypeError("invalid argument");e.forEach(function(e){this.set(e[0],e[1])},this)}}function i(e,t){return e===t||e!=e&&t!=t}function o(e,t,n){this.key=e,this.value=t,this._index=n}function a(e,t){for(var r=0,o="_"+t,a=o;n.call(e,a);a=o+r++)if(i(e[a].key,t))return e[a]}e.exports=r,r.prototype.forEach=function(e,t){t=t||this,Object.keys(this._data).forEach(function(n){"size"!==n&&e.call(t,this._data[n].value,this._data[n].key)},this)},r.prototype.has=function(e){return!!a(this._data,e)},r.prototype.get=function(e){var t=a(this._data,e);return t&&t.value},r.prototype.set=function(e,t){!function(e,t,r){for(var a=0,s="_"+t,u=s;n.call(e,u);u=s+a++)if(i(e[u].key,t))return void(e[u].value=r);e.size++,e[u]=new o(t,r,u)}(this._data,e,t)},r.prototype.delete=function(e){var t=a(this._data,e);t&&(delete this._data[t._index],this._data.size--)},r.prototype.clear=function(){var e=Object.create(null);e.size=0,Object.defineProperty(this,"_data",{value:e,enumerable:!1,configurable:!0,writable:!1})},Object.defineProperty(r.prototype,"size",{get:function(){return this._data.size},set:function(e){},enumerable:!0,configurable:!0}),r.prototype.values=r.prototype.keys=r.prototype.entries=function(){throw new Error("iterators are not implemented in this version")}},"./node_modules/regenerator-runtime/runtime-module.js":
/*!************************************************************!*\
  !*** ./node_modules/regenerator-runtime/runtime-module.js ***!
  \************************************************************/
/*! no static exports found */function(e,t,n){var r=function(){return this||"object"==typeof self&&self}()||Function("return this")(),i=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,o=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,e.exports=n(/*! ./runtime */"./node_modules/regenerator-runtime/runtime.js"),i)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(e){r.regeneratorRuntime=void 0}},"./node_modules/regenerator-runtime/runtime.js":
/*!*****************************************************!*\
  !*** ./node_modules/regenerator-runtime/runtime.js ***!
  \*****************************************************/
/*! no static exports found */function(e,t){!function(t){"use strict";var n,r=Object.prototype,i=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag",l="object"==typeof e,c=t.regeneratorRuntime;if(c)l&&(e.exports=c);else{(c=t.regeneratorRuntime=l?e.exports:{}).wrap=b;var p="suspendedStart",h="suspendedYield",f="executing",d="completed",m={},_={};_[a]=function(){return this};var y=Object.getPrototypeOf,v=y&&y(y(O([])));v&&v!==r&&i.call(v,a)&&(_=v);var g=T.prototype=w.prototype=Object.create(_);E.prototype=g.constructor=T,T.constructor=E,T[u]=E.displayName="GeneratorFunction",c.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===E||"GeneratorFunction"===(t.displayName||t.name))},c.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,T):(e.__proto__=T,u in e||(e[u]="GeneratorFunction")),e.prototype=Object.create(g),e},c.awrap=function(e){return{__await:e}},k(C.prototype),C.prototype[s]=function(){return this},c.AsyncIterator=C,c.async=function(e,t,n,r){var i=new C(b(e,t,n,r));return c.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},k(g),g[u]="Generator",g[a]=function(){return this},g.toString=function(){return"[object Generator]"},c.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},c.values=O,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(A),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,i){return s.type="throw",s.arg=e,t.next=r,i&&(t.method="next",t.arg=n),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=i.call(a,"catchLoc"),l=i.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=n),m}}}function b(e,t,n,r){var i=t&&t.prototype instanceof w?t:w,o=Object.create(i.prototype),a=new S(r||[]);return o._invoke=function(e,t,n){var r=p;return function(i,o){if(r===f)throw new Error("Generator is already running");if(r===d){if("throw"===i)throw o;return I()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=M(a,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===p)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var u=x(e,t,n);if("normal"===u.type){if(r=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=d,n.method="throw",n.arg=u.arg)}}}(e,n,a),o}function x(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function w(){}function E(){}function T(){}function k(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function C(e){var t;this._invoke=function(n,r){function o(){return new Promise(function(t,o){!function t(n,r,o,a){var s=x(e[n],e,r);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==typeof l&&i.call(l,"__await")?Promise.resolve(l.__await).then(function(e){t("next",e,o,a)},function(e){t("throw",e,o,a)}):Promise.resolve(l).then(function(e){u.value=e,o(u)},function(e){return t("throw",e,o,a)})}a(s.arg)}(n,r,t,o)})}return t=t?t.then(o,o):o()}}function M(e,t){var r=e.iterator[t.method];if(r===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,M(e,t),"throw"===t.method))return m;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=x(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,m;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,m):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function O(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(i.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=n,t.done=!0,t};return o.next=o}}return{next:I}}function I(){return{value:n,done:!0}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")())},"./node_modules/util/support/isBufferBrowser.js":
/*!******************************************************!*\
  !*** ./node_modules/util/support/isBufferBrowser.js ***!
  \******************************************************/
/*! no static exports found */function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},"./node_modules/util/util.js":
/*!***********************************!*\
  !*** ./node_modules/util/util.js ***!
  \***********************************/
/*! no static exports found */function(e,t,n){(function(e,r){var i=/%[sdj%]/g;t.format=function(e){if(!y(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(s(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,o=r.length,a=String(e).replace(i,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),u=r[n];n<o;u=r[++n])m(u)||!b(u)?a+=" "+u:a+=" "+s(u);return a},t.deprecate=function(n,i){if(v(e.process))return function(){return t.deprecate(n,i).apply(this,arguments)};if(!0===r.noDeprecation)return n;var o=!1;return function(){if(!o){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?console.trace(i):console.error(i),o=!0}return n.apply(this,arguments)}};var o,a={};function s(e,n){var r={seen:[],stylize:l};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),d(n)?r.showHidden=n:n&&t._extend(r,n),v(r.showHidden)&&(r.showHidden=!1),v(r.depth)&&(r.depth=2),v(r.colors)&&(r.colors=!1),v(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),c(r,e,r.depth)}function u(e,t){var n=s.styles[t];return n?"["+s.colors[n][0]+"m"+e+"["+s.colors[n][1]+"m":e}function l(e,t){return e}function c(e,n,r){if(e.customInspect&&n&&E(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return y(i)||(i=c(e,i,r)),i}var o=function(e,t){if(v(t))return e.stylize("undefined","undefined");if(y(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(_(t))return e.stylize(""+t,"number");if(d(t))return e.stylize(""+t,"boolean");if(m(t))return e.stylize("null","null")}(e,n);if(o)return o;var a=Object.keys(n),s=function(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(n)),w(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return p(n);if(0===a.length){if(E(n)){var u=n.name?": "+n.name:"";return e.stylize("[Function"+u+"]","special")}if(g(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(x(n))return e.stylize(Date.prototype.toString.call(n),"date");if(w(n))return p(n)}var l,b="",T=!1,k=["{","}"];(f(n)&&(T=!0,k=["[","]"]),E(n))&&(b=" [Function"+(n.name?": "+n.name:"")+"]");return g(n)&&(b=" "+RegExp.prototype.toString.call(n)),x(n)&&(b=" "+Date.prototype.toUTCString.call(n)),w(n)&&(b=" "+p(n)),0!==a.length||T&&0!=n.length?r<0?g(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),l=T?function(e,t,n,r,i){for(var o=[],a=0,s=t.length;a<s;++a)P(t,String(a))?o.push(h(e,t,n,r,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(h(e,t,n,r,i,!0))}),o}(e,n,r,s,a):a.map(function(t){return h(e,n,r,s,t,T)}),e.seen.pop(),function(e,t,n){if(e.reduce(function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(l,b,k)):k[0]+b+k[1]}function p(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,n,r,i,o){var a,s,u;if((u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),P(r,i)||(a="["+i+"]"),s||(e.seen.indexOf(u.value)<0?(s=m(n)?c(e,u.value,null):c(e,u.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),v(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function f(e){return Array.isArray(e)}function d(e){return"boolean"==typeof e}function m(e){return null===e}function _(e){return"number"==typeof e}function y(e){return"string"==typeof e}function v(e){return void 0===e}function g(e){return b(e)&&"[object RegExp]"===T(e)}function b(e){return"object"==typeof e&&null!==e}function x(e){return b(e)&&"[object Date]"===T(e)}function w(e){return b(e)&&("[object Error]"===T(e)||e instanceof Error)}function E(e){return"function"==typeof e}function T(e){return Object.prototype.toString.call(e)}function k(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(v(o)&&(o=r.env.NODE_DEBUG||""),e=e.toUpperCase(),!a[e])if(new RegExp("\\b"+e+"\\b","i").test(o)){var n=r.pid;a[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else a[e]=function(){};return a[e]},t.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=f,t.isBoolean=d,t.isNull=m,t.isNullOrUndefined=function(e){return null==e},t.isNumber=_,t.isString=y,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=v,t.isRegExp=g,t.isObject=b,t.isDate=x,t.isError=w,t.isFunction=E,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(/*! ./support/isBuffer */"./node_modules/util/support/isBufferBrowser.js");var C=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function M(){var e=new Date,t=[k(e.getHours()),k(e.getMinutes()),k(e.getSeconds())].join(":");return[e.getDate(),C[e.getMonth()],t].join(" ")}function P(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",M(),t.format.apply(t,arguments))},t.inherits=n(/*! inherits */"./node_modules/inherits/inherits_browser.js"),t._extend=function(e,t){if(!t||!b(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,n(/*! ./../webpack/buildin/global.js */"./node_modules/webpack/buildin/global.js"),n(/*! ./../process/browser.js */"./node_modules/process/browser.js"))},"./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},"./node_modules/worker-loader/dist/workers/InlineWorker.js":
/*!*****************************************************************!*\
  !*** ./node_modules/worker-loader/dist/workers/InlineWorker.js ***!
  \*****************************************************************/
/*! no static exports found */function(e,t,n){"use strict";var r=window.URL||window.webkitURL;e.exports=function(e,t){try{try{var n;try{(n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(e),n=n.getBlob()}catch(t){n=new Blob([e])}return new Worker(r.createObjectURL(n))}catch(t){return new Worker("data:application/javascript,"+encodeURIComponent(e))}}catch(e){if(!t)throw Error("Inline worker is not supported");return new Worker(t)}}},"./package.json":
/*!**********************!*\
  !*** ./package.json ***!
  \**********************/
/*! exports provided: name, version, sideEffects, description, repository, author, contributors, license, files, dependencies, devDependencies, module, main, scripts, browserslist, default */function(e){e.exports={name:"@carto/carto-vl",version:"0.9.0",sideEffects:!1,description:"CARTO Vector library",repository:{type:"git",url:"git://github.com/CartoDB/carto-vl.git"},author:{name:"CARTO",url:"https://carto.com/"},contributors:["David Manzanares <dmanzanares@carto.com>","Iago Lastra <iago@carto.com>","Jess Arroyo Torrens <jarroyo@carto.com>","Javier Goizueta <jgoizueta@carto.com>","Mamata Akella <makella@carto.com>","Ral Ochoa <rochoa@carto.com>","Ariana Escobar <ariana@carto.com>","Elena Torro <elena@carto.com>","Vctor Velarde <victor@carto.com>"],license:"BSD-3-Clause",files:["src","dist"],dependencies:{"@babel/runtime":"^7.0.0","@mapbox/vector-tile":"^1.3.0",cartocolor:"^4.0.0",earcut:"^2.1.2","gl-matrix":"^2.8.1",jsep:"CartoDB/jsep#additional-char-ids-packaged","lru-cache":"^4.1.1",mitt:"^1.1.3",pbf:"^3.1.0"},devDependencies:{"@babel/core":"^7.0.0","@babel/plugin-transform-runtime":"^7.1.0","@babel/preset-env":"^7.0.0","@carto/mapbox-gl":"0.48.0-carto1","babel-loader":"^8.0.0",chai:"^4.1.2","chai-as-promised":"^7.1.1","current-git-branch":"^1.0.1",eslint:"^4.15.0","eslint-config-semistandard":"^12.0.1","eslint-config-standard":"^11.0.0","eslint-plugin-import":"^2.13.0","eslint-plugin-node":"^6.0.1","eslint-plugin-promise":"^3.8.0","eslint-plugin-standard":"^3.1.0","exquisite-sst":"^1.5.0",fastly:"^2.2.0",glob:"^7.1.2","http-server":"^0.11.1","jasmine-core":"^2.99.1",jsdoc:"^3.5.5","jsdoc-escape-at":"^1.0.1",karma:"^2.0.2","karma-chrome-launcher":"^2.2.0","karma-falcon-benchmark":"^0.1.0","karma-falcon-benchmark-reporter":"^0.0.0","karma-jasmine":"^1.1.2","karma-mocha-reporter":"^2.2.5","karma-sourcemap-loader":"^0.3.7","karma-webpack":"3.0.0","lodash.template":"^4.4.0",mocha:"^5.0.0",puppeteer:"^1.1.0",s3:"^4.4.0",serve:"^7.2.0",sloc:"^0.2.0","svg-inline-loader":"^0.8.0","wait-on":"^2.1.0",webpack:"^4.17.1","webpack-cli":"^2.1.4","webpack-glsl-loader":"^1.0.1","worker-loader":"^2.0.0"},module:"dist/carto-vl.js",main:"dist/carto-vl.js",scripts:{build:"yarn build:dev && yarn build:min","build:dev":"webpack --config webpack/webpack.config.js","build:min":"webpack --config webpack/webpack.min.config.js","build:watch":"webpack -w --config webpack/webpack.config.js",docs:"rm -rf docs/public; jsdoc --configure config/jsdoc/public-conf.json","docs:all":"rm -rf docs/all; jsdoc --configure config/jsdoc/all-conf.json",lint:"eslint .","lint:fix":"eslint . --fix",test:"yarn test:unit && yarn lint && yarn docs","test:unit":"karma start --single-run --browsers ChromeHeadlessNoSandbox test/unit/karma.conf.js","test:unit:min":"MIN=1 yarn test:unit","test:watch":"karma start --no-single-run --auto-watch --browsers ChromeHeadlessNoSandbox test/unit/karma.conf.js","test:watchc":"karma start --no-single-run --auto-watch --browsers Chrome test/unit/karma.conf.js","test:user":"karma start --single-run --browsers ChromeHeadlessNoSandbox test/integration/user/karma.conf.js","test:user:min":"MIN=1 yarn test:user","test:user:watch":"karma start --no-single-run --auto-watch --browsers ChromeHeadlessNoSandbox test/integration/user/karma.conf.js","test:user:watchc":"karma start --no-single-run --browsers Chrome test/integration/user/karma.conf.js","test:browser":"karma start --no-single-run --browsers Chrome test/unit/karma.conf.js","test:render":"yarn build:dev && mocha test/integration/render/render.test.js --timeout 15000","test:render:min":"yarn build:min && MIN=1 mocha test/integration/render/render.test.js --timeout 15000","test:render:clean":"rm -rf test/integration/render/scenarios/**/**/reference.png","test:render:prepare":"yarn build:dev && node test/integration/render/render.prepare.js ","test:e2e":"./scripts/run-local-e2e.sh","test:e2e:clean":"rm -rf test/acceptance/e2e/**/reference.png","test:e2e:prepare":"yarn build:dev && node test/acceptance/e2e.prepare.js ","test:fps":"node test/benchmark/fps/benchmark.js","test:perf":"karma start --single-run --browsers Chrome test/benchmark/karma.conf.js",serve:"yarn build:dev && yarn docs && http-server --cors",preversion:"./scripts/preversion.sh",postversion:"git push origin HEAD --follow-tags",prepublishOnly:"./scripts/release.sh","cdn:branch:publish":"./scripts/publish-branch.sh",ghpublish:'git checkout gh-pages && git pull origin gh-pages && git merge master && yarn build && yarn docs && git commit -a -m "Auto generated gh-pages" && git push origin gh-pages && git checkout master',loc:"sloc src/ examples/"},browserslist:["defaults","not ie <12","not edge <17"]}},"./src/Layer.js":
/*!**********************!*\
  !*** ./src/Layer.js ***!
  \**********************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return C});var r=n(/*! @babel/runtime/helpers/toConsumableArray */"./node_modules/@babel/runtime/helpers/toConsumableArray.js"),i=n.n(r),o=n(/*! @babel/runtime/regenerator */"./node_modules/@babel/runtime/regenerator/index.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/asyncToGenerator */"./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),h=n.n(p),f=n(/*! mitt */"./node_modules/mitt/dist/mitt.es.js"),d=n(/*! ./utils/util */"./src/utils/util.js"),m=n(/*! ./Viz */"./src/Viz.js"),_=n(/*! ./sources/Base */"./src/sources/Base.js"),y=n(/*! ./renderer/Renderer */"./src/renderer/Renderer.js"),v=n(/*! ./renderer/RenderLayer */"./src/renderer/RenderLayer.js"),g=n(/*! ../src/errors/carto-validation-error */"./src/errors/carto-validation-error.js"),b=n(/*! ../src/errors/carto-runtime-error */"./src/errors/carto-runtime-error.js"),x=n(/*! ./renderer/viz/expressions */"./src/renderer/viz/expressions.js"),w=n(/*! ./constants/layer */"./src/constants/layer.js"),E=n(/*! gl-matrix */"./node_modules/gl-matrix/lib/gl-matrix.js"),T=n(/*! ./utils/geometry */"./src/utils/geometry.js"),k=new WeakMap,C=function(){function e(t,n,r){c()(this,e),this._checkId(t),this._checkSource(n),this._checkViz(r),this._init(t,n,r)}var t,n,r,o,s,l;return h()(e,[{key:"_init",value:function(e,t,n){var r=this;n._boundLayer=this,this._context=new Promise(function(e){r._contextInitialize=e}),this.id=e,this.type="custom",this.metadata=null,this._state="init",this._visible=!0,this._isLoaded=!1,this._matrix=null,this._fireUpdateOnNextRender=!1,this._emitter=Object(f.default)(),this._oldDataframes=new Set,this._renderLayer=new v.default,this._atomicChangeUID=0,this.update(t,n)}},{key:"on",value:function(e,t){return this._emitter.on(e,t)}},{key:"off",value:function(e,t){return this._emitter.off(e,t)}},{key:"addTo",value:function(e,t){var n=this;try{e.addLayer(this,t)}catch(r){if(!/Style is not done loading/.test(r))throw new b.default("Error adding layer to map: ".concat(r));e.on("load",function(){e.addLayer(n,t)})}}},{key:"remove",value:function(){this.map&&this.map.removeLayer(this.id)}},{key:"update",value:(l=u()(a.a.mark(function e(t,n){var r,i,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=this._viz),this._checkSource(t),this._checkViz(n),t=t._clone(),this._atomicChangeUID++,r=this._atomicChangeUID,i=n.loadImages(),e.next=9,t.requestMetadata(n);case 9:return o=e.sent,e.next=12,i;case 12:return e.next=14,this._context;case 14:if(!(this._atomicChangeUID>r)){e.next=16;break}throw new b.default("Another atomic change was done before this one committed (1)");case 16:return this.metadata=o,t.bindLayer(this._onDataframeAdded.bind(this),this._onDataLoaded.bind(this)),this._source!==t&&this._freeSource(),this._source=t,this._noFirstRequestData=!1,this.requestData(),n.setDefaultsIfRequired(this.metadata.geomType),e.next=25,this._context;case 25:if(!(this._atomicChangeUID>r)){e.next=27;break}throw new b.default("Another atomic change was done before this one committed (2)");case 27:this._viz&&this._viz.onChange(null),n.setDefaultsIfRequired(this._renderLayer.type),this._viz=n,n.onChange(this._vizChanged.bind(this)),this._compileShaders(n,o),this._needRefresh();case 33:case"end":return e.stop()}},e,this)})),function(e,t){return l.apply(this,arguments)})},{key:"blendToViz",value:(s=u()(a.a.mark(function e(t){var n,r,i=this,o=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:400,r=o.length>2&&void 0!==o[2]?o[2]:x.cubic,this._checkViz(t),t.setDefaultsIfRequired(this.metadata.geomType),!this._viz||this._source.requiresNewMetadata(t)){e.next=13;break}Object.keys(this._viz.variables).map(function(e){t.variables[e]=i._viz.variables[e]}),t.color._blendFrom(this._viz.color,n,r),t.strokeColor._blendFrom(this._viz.strokeColor,n,r),t.width._blendFrom(this._viz.width,n,r),t.strokeWidth._blendFrom(this._viz.strokeWidth,n,r),t.filter._blendFrom(this._viz.filter,n,r),e.next=14;break;case 13:return e.abrupt("return",this.update(this._source,t));case 14:return e.abrupt("return",this._vizChanged(t).then(function(){i._viz&&i._viz.onChange(null),t.setDefaultsIfRequired(i._renderLayer.type),i._viz=t,i._viz.onChange(i._vizChanged.bind(i))}));case 15:case"end":return e.stop()}},e,this)})),function(e){return s.apply(this,arguments)})},{key:"show",value:function(){this.map.setLayoutProperty(this.id,"visibility","visible"),this._visible=!0,this._noFirstRequestData=!1,this._fireUpdateOnNextRender=!0,this.requestData()}},{key:"hide",value:function(){this.map.setLayoutProperty(this.id,"visibility","none"),this._visible=!1,this._fireUpdateOnNextRender=!0,this._fire("updated")}},{key:"requestMetadata",value:(o=u()(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=t||this._viz){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",this._source.requestMetadata(t));case 4:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"requestData",value:(r=u()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.metadata&&this._visible){e.next=2;break}return e.abrupt("return");case 2:this._needRefresh();case 3:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"hasDataframes",value:function(){return this._renderLayer.hasDataframes()}},{key:"getNumFeatures",value:function(){return this._renderLayer.getNumFeatures()}},{key:"getFeaturesAtPosition",value:function(e){return this._visible?this._renderLayer.getFeaturesAtPosition(e).map(this._addLayerIdToFeature.bind(this)):[]}},{key:"isAnimated",value:function(){return this._viz&&this._viz.isAnimated()}},{key:"onAdd",value:function(e,t){this.gl=t,this.map=e,this.renderer=function(e,t){if(!k.get(e)){var n=new y.default;n.initialize(t),k.set(e,n)}return k.get(e)}(e,t),this._renderLayer.setRenderer(this.renderer),this._contextInitialize()}},{key:"onRemove",value:function(e,t){}},{key:"prerender",value:function(e,t){d.default.equalArrays(this._matrix,t)?!this._noFirstRequestData&&this._source&&this._visible&&(this._source.requestData(this._getZoom(),this._getViewport()),this._noFirstRequestData=!0):(this._matrix=t,this.renderer.matrix=t,this._setRendererZoomCenter(t),this._source&&this._visible&&this._source.requestData(this._getZoom(),this._getViewport()),this._fireUpdateOnNextRender=!0)}},{key:"render",value:function(e,t){this._paintLayer(),this.isAnimated()&&this._needRefresh()}},{key:"_paintLayer",value:function(){if(this._viz&&this._viz.colorShader){this._renderLayer.setViz(this._viz),this.renderer.renderLayer(this._renderLayer,{zoomLevel:this.map.getZoom()});var e=!d.default.isSetsEqual(this._oldDataframes,new Set(this._renderLayer.getActiveDataframes()));(this.isAnimated()||this._fireUpdateOnNextRender||e)&&(this._oldDataframes=new Set(this._renderLayer.getActiveDataframes()),this._fireUpdateOnNextRender=!1,this._fire("updated")),this._isLoaded||"dataLoaded"!==this._state||(this._isLoaded=!0,this._fire("loaded"))}}},{key:"_fire",value:function(e,t){try{return this._emitter.emit(e,t)}catch(e){console.error(e)}}},{key:"_onDataframeAdded",value:function(e){var t=this;e.setFreeObserver(function(){t.map.triggerRepaint()}),this._renderLayer.addDataframe(e),this._viz&&this._viz.setDefaultsIfRequired(e.type),this.map.triggerRepaint()}},{key:"_needRefresh",value:function(){this._fireUpdateOnNextRender=!0,this.map.triggerRepaint()}},{key:"_onDataLoaded",value:function(){this._state="dataLoaded",this._needRefresh()}},{key:"_addLayerIdToFeature",value:function(e){return e.layerId=this.id,e}},{key:"_compileShaders",value:function(e,t){e.compileShaders(this.gl,t)}},{key:"_vizChanged",value:(n=u()(a.a.mark(function e(t){var n=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._cache){e.next=2;break}return e.abrupt("return",this._cache);case 2:return this._cache=this._requestVizChanges(t).then(function(){n._cache=null}),e.abrupt("return",this._cache);case 4:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"_requestVizChanges",value:(t=u()(a.a.mark(function e(t){var n,r,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._context;case 2:if(this._source){e.next=4;break}throw new g.default("".concat(g.CartoValidationTypes.MISSING_REQUIRED," a 'source' is required before changing the viz."));case 4:return n=this._source,r=t.loadImages(),e.next=8,n.requestMetadata(t);case 8:return i=e.sent,e.next=11,r;case 11:if(this._source===n){e.next=13;break}throw new b.default("A source change was made before the metadata was retrieved, therefore, metadata is stale and it cannot be longer consumed");case 13:return this.metadata=i,this._compileShaders(t,this.metadata),this._needRefresh(),e.abrupt("return",this.requestData());case 17:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"_checkId",value:function(e){if(d.default.isUndefined(e))throw new g.default("".concat(g.CartoValidationTypes.MISSING_REQUIRED," 'id'"));if(!d.default.isString(e))throw new g.default("".concat(g.CartoValidationTypes.INCORRECT_TYPE," 'id' property must be a string."));if(""===e)throw new g.default("".concat(g.CartoValidationTypes.INCORRECT_VALUE," 'id' property must be not empty."))}},{key:"_checkSource",value:function(e){if(d.default.isUndefined(e))throw new g.default("".concat(g.CartoValidationTypes.MISSING_REQUIRED," 'source'"));if(!(e instanceof _.default))throw new g.default("".concat(g.CartoValidationTypes.INCORRECT_TYPE," The given object is not a valid 'source'. See \"carto.source\"."))}},{key:"_checkViz",value:function(e){if(d.default.isUndefined(e))throw new g.default("".concat(g.CartoValidationTypes.MISSING_REQUIRED," 'viz'"));if(!(e instanceof m.default))throw new g.default("".concat(g.CartoValidationTypes.INCORRECT_TYPE," The given object is not a valid 'viz'. See \"carto.Viz\"."));if(e._boundLayer&&e._boundLayer!==this)throw new g.default("".concat(g.CartoValidationTypes.INCORRECT_VALUE," The given Viz object is already bound to another layer. Vizs cannot be shared between different layers."))}},{key:"_setRendererZoomCenter",value:function(e){var t,n;t=d.default.computeMapZoom(this.map),n=d.default.computeMapCenter(this.map),this.renderer.setZoom(t),this.renderer.setCenter(n)}},{key:"_getViewport",value:function(){var e=E.mat4.invert([],this._matrix),t=[[-1,-1],[-1,1],[1,-1],[1,1]].map(function(t){return T.unproject.apply(void 0,[e].concat(i()(t)))}).map(function(e){return e.map(function(e){return 2*e-1})}),n=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],r=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];t.forEach(function(e){n[0]=Math.min(n[0],e[0]),n[1]=Math.min(n[1],e[1]),r[0]=Math.max(r[0],e[0]),r[1]=Math.max(r[1],e[1])}),n[1]=-n[1],r[1]=-r[1];var o=n[1];return n[1]=r[1],r[1]=o,n.concat(r)}},{key:"_getZoom",value:function(){return this.map.getZoom()}},{key:"_freeSource",value:function(){this._source&&this._source.free(),this._renderLayer.freeDataframes()}},{key:"visibility",get:function(){return this._visible?w.layerVisibility.VISIBLE:w.layerVisibility.HIDDEN}},{key:"visible",get:function(){return this._visible}},{key:"viz",get:function(){return this._viz}}]),e}()},"./src/Viz.js":
/*!********************!*\
  !*** ./src/Viz.js ***!
  \********************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return z});var r=n(/*! @babel/runtime/helpers/toConsumableArray */"./node_modules/@babel/runtime/helpers/toConsumableArray.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),u=n.n(s),l=n(/*! ./renderer/schema */"./src/renderer/schema.js"),c=n(/*! ./renderer/shaders/index */"./src/renderer/shaders/index.js"),p=n(/*! ./renderer/shaders/shaderCompiler */"./src/renderer/shaders/shaderCompiler.js"),h=n(/*! ./renderer/viz/expressions */"./src/renderer/viz/expressions.js"),f=n(/*! ./renderer/viz/expressions/base */"./src/renderer/viz/expressions/base.js"),d=n(/*! ./renderer/viz/expressions/utils */"./src/renderer/viz/expressions/utils.js"),m=n(/*! ./renderer/viz/parser */"./src/renderer/viz/parser.js"),_=n(/*! ./utils/util */"./src/utils/util.js"),y=n(/*! ../src/errors/carto-validation-error */"./src/errors/carto-validation-error.js"),v=n(/*! ../src/errors/carto-runtime-error */"./src/errors/carto-runtime-error.js"),g=n(/*! ./renderer/shaders/geometry/point/pointVertexShader.glsl */"./src/renderer/shaders/geometry/point/pointVertexShader.glsl"),b=n.n(g),x=n(/*! ./renderer/shaders/geometry/point/pointFragmentShader.glsl */"./src/renderer/shaders/geometry/point/pointFragmentShader.glsl"),w=n.n(x),E=n(/*! ./renderer/shaders/geometry/line/lineVertexShader.glsl */"./src/renderer/shaders/geometry/line/lineVertexShader.glsl"),T=n.n(E),k=n(/*! ./renderer/shaders/geometry/line/lineFragmentShader.glsl */"./src/renderer/shaders/geometry/line/lineFragmentShader.glsl"),C=n.n(k),M=n(/*! ./renderer/shaders/geometry/polygon/polygonVertexShader.glsl */"./src/renderer/shaders/geometry/polygon/polygonVertexShader.glsl"),P=n.n(M),A=n(/*! ./renderer/shaders/geometry/polygon/polygonFragmentShader.glsl */"./src/renderer/shaders/geometry/polygon/polygonFragmentShader.glsl"),S=n.n(A),O=n(/*! ./renderer/viz/expressions/SVG */"./src/renderer/viz/expressions/SVG.js"),I=n(/*! ./renderer/viz/defaultSVGs */"./src/renderer/viz/defaultSVGs.js"),R=n(/*! ./renderer/viz/expressions/Placement */"./src/renderer/viz/expressions/Placement.js"),j=n(/*! ./renderer/viz/expressions/transformation/Translate */"./src/renderer/viz/expressions/transformation/Translate.js"),L=["color","width","strokeColor","strokeWidth","order","filter","symbol","symbolPlacement","transform","resolution","variables"],z=function(){function e(t){var n=this;a()(this,e);var r=this._getVizDefinition(t);this._checkVizSpec(r),Object.keys(r).forEach(function(e){n._defineProperty(e,r[e])}),Object.keys(r).includes("variables")||this._defineProperty("variables",{}),this.updated=!0,this._changeCallback=null,this._updateRootExpressionList(),this._updateRootExpressions(),this._resolveAliases(),this._validateAliasDAG()}return u()(e,[{key:"loadImages",value:function(){return Promise.all(this._getRootExpressions().map(function(e){return e.loadImages()}))}},{key:"_defineProperty",value:function(e,t){var n=this;if(L.includes(e)){Object.defineProperty(this,e,{get:function(){return n["_"+e]},set:function(t){"resolution"!==e&&(t=Object(d.implicitCast)(t)),n["_"+e]=t,n._changed()}});var r=t;if("variables"===e){var i=!1;r=new Proxy({},{get:function(e,t){return e[t]},set:function(e,t,r){return r=Object(d.implicitCast)(r),e[t]=r,n["__cartovl_variable_"+t]=r,i&&n._changed(),!0}}),Object.keys(t).map(function(e){r[e]=t[e]}),i=!0}this["_"+e]=r}}},{key:"_getRootExpressions",value:function(){return this._rootExpressions}},{key:"_getRootStyleExpressions",value:function(){return this._rootStyleExpressions}},{key:"_updateRootExpressions",value:function(){var e=this;this._getRootExpressions().forEach(function(t){t.parent=e,t.notify=e._changed.bind(e)})}},{key:"isAnimated",value:function(){return this._getRootStyleExpressions().some(function(e){return e.isAnimated()})}},{key:"onChange",value:function(e){this._changeCallback=e}},{key:"_changed",value:function(){this._updateRootExpressionList(),this._resolveAliases(),this._validateAliasDAG(),this._changeCallback&&this._changeCallback(this)}},{key:"_updateRootExpressionList",value:function(){this._rootExpressions=[this.color,this.width,this.strokeColor,this.strokeWidth,this.order,this.filter,this.symbol,this.symbolPlacement,this.transform].concat(i()(Object.values(this.variables))),this._rootStyleExpressions=[this.color,this.width,this.strokeColor,this.strokeWidth,this.order,this.filter,this.symbol,this.symbolPlacement,this.transform]}},{key:"getMinimumNeededSchema",value:function(){return this._getRootExpressions().filter(function(e){return e&&e._getMinimumNeededSchema}).map(function(e){return e._getMinimumNeededSchema()}).reduce(l.default.union,l.default.IDENTITY)}},{key:"setDefaultsIfRequired",value:function(e){if(this._geomType=e,!this._appliedDefaults){var t=this._getDefaultGeomStyle(e);t&&(this._appliedDefaults=!0,this.color.default&&(this.color=t.COLOR_EXPRESSION()),this.width.default&&(this.width=t.WIDTH_EXPRESSION()),this.strokeColor.default&&(this.strokeColor=t.STROKE_COLOR_EXPRESSION()),this.strokeWidth.default&&(this.strokeWidth=t.STROKE_WIDTH_EXPRESSION()),this._updateRootExpressions())}}},{key:"_getDefaultGeomStyle",value:function(e){return"point"===e?{COLOR_EXPRESSION:function(){return D(h.hex("#EE4D5A"))},WIDTH_EXPRESSION:function(){return D(h.number(7))},STROKE_COLOR_EXPRESSION:function(){return D(h.hex("#FFF"))},STROKE_WIDTH_EXPRESSION:function(){return D(h.number(1))}}:"line"===e?{COLOR_EXPRESSION:function(){return D(h.hex("#4CC8A3"))},WIDTH_EXPRESSION:function(){return D(h.number(1.5))},STROKE_COLOR_EXPRESSION:function(){return D(h.hex("#FFF"))},STROKE_WIDTH_EXPRESSION:function(){return D(h.number(1))}}:"polygon"===e?{COLOR_EXPRESSION:function(){return D(h.hex("#826DBA"))},WIDTH_EXPRESSION:function(){return D(h.number(1))},STROKE_COLOR_EXPRESSION:function(){return D(h.hex("#FFF"))},STROKE_WIDTH_EXPRESSION:function(){return D(h.number(1))}}:void 0}},{key:"_resolveAliases",value:function(){var e=this;this._getRootExpressions().forEach(function(t){t._resolveAliases(e.variables)})}},{key:"_validateAliasDAG",value:function(){for(var e=new Set,t=new Set,n=function n(r){if(!e.has(r)){if(t.has(r))throw new v.default("Viz contains a circular dependency");t.add(r),r._getDependencies().forEach(n),e.add(r)}},r=this._getRootExpressions().map(function(e){return e._getDependencies()}).reduce(function(e,t){return i()(e).concat(i()(t))},[]);r.length;)n(r.pop())}},{key:"compileShaders",value:function(e,t){var n,r;this._getRootExpressions().forEach(function(e){return e._bindMetadata(t)}),n=this,r={color:"color",strokeColor:"color",width:"number",strokeWidth:"number",order:"orderer",filter:"number",symbol:"image",symbolPlacement:"placement",transform:"transformation"},Object.keys(r).forEach(function(e){var t=n[e].type,i=r[e];if(t!==i)throw new y.default("".concat(y.CartoValidationTypes.INCORRECT_TYPE," Viz property '").concat(e,"': must be of type '").concat(i,"' but it was of type '").concat(t,"'"))}),this.colorShader=Object(p.compileShader)(e,c.default.styler.colorShaderGLSL,{color:this.color},this),this.widthShader=Object(p.compileShader)(e,c.default.styler.widthShaderGLSL,{width:this.width},this),this.strokeColorShader=Object(p.compileShader)(e,c.default.styler.colorShaderGLSL,{color:this.strokeColor},this),this.strokeWidthShader=Object(p.compileShader)(e,c.default.styler.widthShaderGLSL,{width:this.strokeWidth},this),this.filterShader=Object(p.compileShader)(e,c.default.styler.filterShaderGLSL,{filter:this.filter},this),this.symbol.default||(this.symbolShader=Object(p.compileShader)(e,c.default.symbolizer.symbolShaderGLSL,{symbol:this.symbol,symbolPlacement:this.symbolPlacement,transform:this.transform},this)),this._geomType&&"point"!==this._geomType||(this.pointShader=Object(p.compileShader)(e,{vertexShader:b.a,fragmentShader:w.a},{transform:this.transform},this)),this._geomType&&"line"!==this._geomType||(this.lineShader=Object(p.compileShader)(e,{vertexShader:T.a,fragmentShader:C.a},{transform:this.transform},this)),this._geomType&&"polygon"!==this._geomType||(this.polygonShader=Object(p.compileShader)(e,{vertexShader:P.a,fragmentShader:S.a},{transform:this.transform},this))}},{key:"replaceChild",value:function(e,t){var n=this;if(Object.values(this.variables).includes(e)){var r=Object.keys(this.variables).find(function(t){return n.variables[t]===e});this.variables[r]=t,t.parent=this,t.notify=e.notify}else if(e===this.color)this.color=t,t.parent=this,t.notify=e.notify;else if(e===this.width)this.width=t,t.parent=this,t.notify=e.notify;else if(e===this.strokeColor)this.strokeColor=t,t.parent=this,t.notify=e.notify;else if(e===this.strokeWidth)this.strokeWidth=t,t.parent=this,t.notify=e.notify;else if(e===this.filter)this.filter=t,t.parent=this,t.notify=e.notify;else if(e===this.symbol)this.symbol=t,t.parent=this,t.notify=e.notify;else if(e===this.symbolPlacement)this.symbolPlacement=t,t.parent=this,t.notify=e.notify;else{if(e!==this.transform)throw new v.default("No child found");this.transform=t,t.parent=this,t.notify=e.notify}}},{key:"_getVizDefinition",value:function(e){if(_.default.isUndefined(e))return this._setDefaults({});if(_.default.isObject(e))return this._setDefaults(e);if(_.default.isString(e))return this._setDefaults(Object(m.parseVizDefinition)(e));throw new y.default("".concat(y.CartoValidationTypes.INCORRECT_VALUE," viz 'definition' should be a vizSpec object or a valid viz string."))}},{key:"_setDefaults",value:function(e){if(_.default.isUndefined(e.color)){var t=h.rgba(0,0,0,0);e.color=_.default.isUndefined(e.symbol)?D(h.rgb(0,0,0)):t}return _.default.isUndefined(e.width)&&(e.width=D(h.number(1))),_.default.isUndefined(e.strokeColor)&&(e.strokeColor=D(h.rgb(0,0,0))),_.default.isUndefined(e.strokeWidth)&&(e.strokeWidth=D(h.number(0))),_.default.isUndefined(e.order)&&(e.order=D(h.noOrder())),_.default.isUndefined(e.filter)&&(e.filter=D(h.constant(1))),_.default.isUndefined(e.resolution)&&(e.resolution=1),_.default.isUndefined(e.symbol)&&(e.symbol=D(new O.default(I.default.circle))),_.default.isUndefined(e.symbolPlacement)&&(e.symbolPlacement=D(new R.default(h.constant(0),h.constant(1)))),_.default.isUndefined(e.transform)&&(e.transform=D(new j.default(h.constant(0),h.constant(0)))),e.variables=e.variables||{},e}},{key:"_checkVizSpec",value:function(e){if(e.width=Object(d.implicitCast)(e.width),e.strokeWidth=Object(d.implicitCast)(e.strokeWidth),e.symbolPlacement=Object(d.implicitCast)(e.symbolPlacement),e.transform=Object(d.implicitCast)(e.transform),e.symbol=Object(d.implicitCast)(e.symbol),e.filter=Object(d.implicitCast)(e.filter),!_.default.isNumber(e.resolution))throw new y.default("".concat(y.CartoValidationTypes.INCORRECT_TYPE," 'resolution' property must be a number."));if(e.resolution<=0)throw new y.default("".concat(y.CartoValidationTypes.INCORRECT_VALUE," 'resolution' must be greater than ").concat(0,"."));if(e.resolution>=256)throw new y.default("".concat(y.CartoValidationTypes.INCORRECT_VALUE," 'resolution' must be less than ").concat(256,"."));for(var t in["color","strokeColor","width","strokeWidth","order","filter","symbol","symbolPlacement","transform"].forEach(function(t){if(!(e[t]instanceof f.default))throw new y.default("".concat(y.CartoValidationTypes.INCORRECT_TYPE," '").concat(t,"' parameter is not a valid viz Expresion."))}),e)-1===L.indexOf(t)&&console.warn("Property '".concat(t,"' is not supported"))}},{key:"toString",value:function(){var e=this,t=Object.keys(this.variables).map(function(t){return"@".concat(t,": ").concat(e.variables[t].toString(),"\n")});return"color: ".concat(this.color.toString(),"\n            strokeColor: ").concat(this.strokeColor.toString(),"\n            width: ").concat(this.width.toString(),"\n            strokeWidth: ").concat(this.strokeWidth.toString(),"\n            filter: ").concat(this.filter.toString(),"\n            order: ").concat(this.order.toString(),"\n            symbol: ").concat(this.symbol.toString(),"\n            symbolPlacement: ").concat(this.symbolPlacement.toString(),"\n            offset: ").concat(this.offset.toString(),"\n            ").concat(t).replace(/ {4}/g,"")}},{key:"geometryType",get:function(){return this._geomType}}]),e}();function D(e){return e.default=!0,e}},"./src/basemaps.js":
/*!*************************!*\
  !*** ./src/basemaps.js ***!
  \*************************/
/*! exports provided: voyager, darkmatter, positron */function(e,t,n){"use strict";n.r(t),n.d(t,"voyager",function(){return r}),n.d(t,"darkmatter",function(){return i}),n.d(t,"positron",function(){return o});var r="https://basemaps.cartocdn.com/gl/voyager-gl-style/style.json",i="https://basemaps.cartocdn.com/gl/dark-matter-gl-style/style.json",o="https://basemaps.cartocdn.com/gl/positron-gl-style/style.json"},"./src/client/rsys.js":
/*!****************************!*\
  !*** ./src/client/rsys.js ***!
  \****************************/
/*! exports provided: wToR, rTiles, getRsysFromTile, default */function(e,t,n){"use strict";n.r(t),n.d(t,"wToR",function(){return o}),n.d(t,"rTiles",function(){return a}),n.d(t,"getRsysFromTile",function(){return s});var r=n(/*! @babel/runtime/helpers/slicedToArray */"./node_modules/@babel/runtime/helpers/slicedToArray.js"),i=n.n(r);function o(e,t,n){return{x:(e-n.center.x)/n.scale,y:(t-n.center.y)/n.scale}}function a(e,t){return function(e,t){for(var n=i()(t,4),r=n[0],o=n[1],a=n[2],s=n[3],u=1<<e,l=function(e){return Math.min(Math.max(e,0),u-1)},c=l(Math.floor(u*(r+1)*.5)),p=l(Math.ceil(u*(a+1)*.5)-1),h=l(Math.floor(u*(1-s)*.5)),f=l(Math.ceil(u*(1-o)*.5)-1),d=[],m=c;m<=p;++m)for(var _=h;_<=f;++_)d.push({x:m,y:_,z:e});return d}((arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.ceil)(e),t)}function s(e,t,n){return{center:{x:(e+.5)/Math.pow(2,n)*2-1,y:2*(1-(t+.5)/Math.pow(2,n))-1},scale:1/Math.pow(2,n)}}t.default={rTiles:a,getRsysFromTile:s,wToR:o}},"./src/client/windshaft-filtering.js":
/*!*******************************************!*\
  !*** ./src/client/windshaft-filtering.js ***!
  \*******************************************/
/*! exports provided: getFiltering, getSQLWhere, getAggregationFilters */function(e,t,n){"use strict";n.r(t),n.d(t,"getFiltering",function(){return O}),n.d(t,"getSQLWhere",function(){return I}),n.d(t,"getAggregationFilters",function(){return R});var r=n(/*! @babel/runtime/helpers/toConsumableArray */"./node_modules/@babel/runtime/helpers/toConsumableArray.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),u=n.n(s),l=n(/*! ../renderer/viz/expressions/binary */"./src/renderer/viz/expressions/binary.js"),c=n(/*! ../renderer/viz/expressions/belongs */"./src/renderer/viz/expressions/belongs.js"),p=n(/*! ../renderer/viz/expressions/between */"./src/renderer/viz/expressions/between.js"),h=n(/*! ../renderer/viz/expressions/basic/property */"./src/renderer/viz/expressions/basic/property.js"),f=n(/*! ../renderer/viz/expressions/blend */"./src/renderer/viz/expressions/blend.js"),d=n(/*! ../renderer/viz/expressions/transition */"./src/renderer/viz/expressions/transition.js"),m=n(/*! ../renderer/viz/expressions/basic/number */"./src/renderer/viz/expressions/basic/number.js"),_=n(/*! ../renderer/viz/expressions/basic/constant */"./src/renderer/viz/expressions/basic/constant.js"),y=n(/*! ../renderer/viz/expressions/basic/category */"./src/renderer/viz/expressions/basic/category.js"),v=n(/*! ../renderer/viz/expressions/aggregation/cluster/ClusterAvg */"./src/renderer/viz/expressions/aggregation/cluster/ClusterAvg.js"),g=n(/*! ../renderer/viz/expressions/aggregation/cluster/ClusterMax */"./src/renderer/viz/expressions/aggregation/cluster/ClusterMax.js"),b=n(/*! ../renderer/viz/expressions/aggregation/cluster/ClusterMin */"./src/renderer/viz/expressions/aggregation/cluster/ClusterMin.js"),x=n(/*! ../renderer/viz/expressions/aggregation/cluster/ClusterMode */"./src/renderer/viz/expressions/aggregation/cluster/ClusterMode.js"),w=n(/*! ../renderer/viz/expressions/aggregation/cluster/ClusterSum */"./src/renderer/viz/expressions/aggregation/cluster/ClusterSum.js"),E=n(/*! ../renderer/schema */"./src/renderer/schema.js"),T=function(){function e(t){a()(this,e),this._onlyAggregateFilters=t.exclusive}return u()(e,[{key:"getFilters",value:function(e){var t={},n=this._and(e).filter(Boolean),r=!0,i=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value,l=u.property,c=t[l];if(c){if(!this._compatibleAndFilters(c,u.filters))return{};Object.assign(c[0],u.filters[0])}else t[l]=u.filters}}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return t}},{key:"_and",value:function(e){return e.isA(l.And)?this._and(e.a).concat(this._and(e.b)).filter(Boolean):[this._or(e)].filter(Boolean)}},{key:"_or",value:function(e){if(e.isA(l.Or)){var t=this._basicCondition(e.a),n=this._basicCondition(e.b);if(t&&n&&t.property===n.property)return t.filters=t.filters.concat(n.filters),t}return this._basicCondition(e)}},{key:"_removeBlend",value:function(e){return e.isA(f.default)&&e.originalMix.isA(d.default)?e.b:e}},{key:"_basicCondition",value:function(e){return e=this._removeBlend(e),this._between(e)||this._equals(e)||this._notEquals(e)||this._lessThan(e)||this._lessThanOrEqualTo(e)||this._greaterThan(e)||this._greaterThanOrEqualTo(e)||this._in(e)||this._notIn(e)}},{key:"_value",value:function(e){if((e=this._removeBlend(e)).isA(m.default)||e.isA(_.default)||e.isA(y.default))return e.expr}},{key:"_between",value:function(e){if(e.isA(p.default)){var t=this._aggregation(e.input),n=t&&this._value(e.lowerLimit),r=t&&n&&this._value(e.upperLimit);if(r)return t.filters.push({greater_than_or_equal_to:n,less_than_or_equal_to:r}),t}}},{key:"_in",value:function(e){var t=this;if(e.isA(c.In)){var n=this._aggregation(e.input),r=e.list.elems.map(function(e){return t._value(e)}).filter(function(e){return null!==e});if(n&&r.length>0&&r.length===e.list.elems.length)return n.filters.push({in:r}),n}}},{key:"_notIn",value:function(e){var t=this;if(e.isA(c.Nin)){var n=this._aggregation(e.input),r=e.list.elems.map(function(e){return t._value(e)}).filter(function(e){return null!==e});if(n&&r.length>0&&r.length===e.list.elems.length)return n.filters.push({not_in:r}),n}}},{key:"_equals",value:function(e){return this._cmpOp(e,l.Equals,"equal")}},{key:"_notEquals",value:function(e){return this._cmpOp(e,l.NotEquals,"not_equal")}},{key:"_lessThan",value:function(e){return this._cmpOp(e,l.LessThan,"less_than","greater_than")}},{key:"_lessThanOrEqualTo",value:function(e){return this._cmpOp(e,l.LessThanOrEqualTo,"less_than_or_equal_to","greater_than_or_equal_to")}},{key:"_greaterThan",value:function(e){return this._cmpOp(e,l.GreaterThan,"greater_than","less_than")}},{key:"_greaterThanOrEqualTo",value:function(e){return this._cmpOp(e,l.GreaterThanOrEqualTo,"greater_than_or_equal_to","less_than_or_equal_to")}},{key:"_aggregation",value:function(e){if((e=this._removeBlend(e)).isA(v.default)||e.isA(g.default)||e.isA(b.default)||e.isA(x.default)||e.isA(w.default)){var t=this._property(e.property);if(t)return t.property=E.column.aggColumn(t.property,e.aggName),t}if(!this._onlyAggregateFilters)return this._property(e)}},{key:"_property",value:function(e){if((e=this._removeBlend(e)).isA(h.default))return{property:e.name,filters:[]}}},{key:"_cmpOp",value:function(e,t,n,r){if(r=r||n,e.isA(t)){var i=this._aggregation(e.a),o=i&&this._value(e.b),a=n;if(o||(o=(i=this._aggregation(e.b))&&this._value(e.a),a=r),o){var s={};return s[a]=o,i.filters.push(s),i}}}},{key:"_compatibleAndFilters",value:function(e,t){if(0===e.length||0===t.length)return!0;if(1===e.length&&1===t.length){var n=e[0],r=t[0];if(1===Object.keys(n).length&&1===Object.keys(r).length){var i=Object.keys(n)[0],o=Object.keys(r)[0],a=["less_than","less_than_or_equal_to"],s=["greater_than","greater_than_or_equal_to"];return a.includes(i)&&s.includes(o)||a.includes(o)&&s.includes(i)}}return!1}}]),e}(),k=function(){function e(){a()(this,e)}return u()(e,[{key:"getFilter",value:function(e){return this._filter(e)}},{key:"_filter",value:function(e){return this._and(e)||this._or(e)||this._in(e)||this._notIn(e)||this._between(e)||this._equals(e)||this._notEquals(e)||this._lessThan(e)||this._lessThanOrEqualTo(e)||this._greaterThan(e)||this._greaterThanOrEqualTo(e)||this._blend(e)||null}},{key:"_and",value:function(e){if(e.isA(l.And)){var t=[this._filter(e.a),this._filter(e.b)].filter(Boolean).reduce(function(e,t){return e.concat(t)},[]);if(t.length)return 1===t.length?t[0]:{type:"and",left:t[0],right:t[1]}}}},{key:"_or",value:function(e){if(e.isA(l.Or)){var t=this._filter(e.a),n=this._filter(e.b);if(t&&n)return{type:"or",left:t,right:n}}}},{key:"_lessThan",value:function(e){return this._cmpOp(e,l.LessThan,"lessThan")}},{key:"_lessThanOrEqualTo",value:function(e){return this._cmpOp(e,l.LessThanOrEqualTo,"lessThanOrEqualTo")}},{key:"_greaterThan",value:function(e){return this._cmpOp(e,l.GreaterThan,"greaterThan")}},{key:"_greaterThanOrEqualTo",value:function(e){return this._cmpOp(e,l.GreaterThanOrEqualTo,"greaterThanOrEqualTo")}},{key:"_equals",value:function(e){return this._cmpOp(e,l.Equals,"equals")}},{key:"_notEquals",value:function(e){return this._cmpOp(e,l.NotEquals,"notEquals")}},{key:"_cmpOp",value:function(e,t,n){if(e.isA(t)){var r=this._property(e.a)||this._value(e.a),i=this._property(e.b)||this._value(e.b);if(r&&i)return{type:n,left:r,right:i}}}},{key:"_blend",value:function(e){if(e.isA(f.default)&&e.originalMix.isA(d.default))return this._filter(e.b)}},{key:"_property",value:function(e){if(e.isA(h.default))return{type:"property",property:e.name}}},{key:"_value",value:function(e){if(e.isA(m.default)||e.isA(_.default)||e.isA(y.default))return{type:"value",value:e.expr}}},{key:"_in",value:function(e){var t=this;if(e.isA(c.In)){var n=this._property(e.input),r=e.list.elems.map(function(e){return t._value(e)});if(n&&r.length>0&&r.length===e.list.elems.length)return{type:"in",property:n.property,values:r.map(function(e){return e.value})}}}},{key:"_notIn",value:function(e){var t=this;if(e.isA(c.Nin)){var n=this._property(e.input),r=e.list.elems.map(function(e){return t._value(e)});if(n&&r.length>0&&r.length===e.list.elems.length)return{type:"notIn",property:n.property,values:r.map(function(e){return e.value})}}}},{key:"_between",value:function(e){if(e.isA(p.default)){var t=this._property(e.input),n=this._value(e.lowerLimit),r=this._value(e.upperLimit);if(t&&n&&r)return{type:"between",property:t.property,lower:n.value,upper:r.value}}}}]),e}();function C(e){return e.type?"(".concat(S[e.type](e),")"):M(e)}function M(e){return isFinite(e)?String(e):"'".concat(e.replace(/\'/g,"''"),"'")}function P(e){return e.match(/^[a-z\d_]+$/)||(e='"'.concat(e.replace(/\"/g,'""'),'"')),e}function A(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.map(function(e){return C(e)}).join(e)}var S={and:function(e){return A(" AND ",e.left,e.right)},or:function(e){return A(" OR ",e.left,e.right)},between:function(e){return"".concat(P(e.property)," BETWEEN ").concat(M(e.lower)," AND ").concat(M(e.upper))},in:function(e){return"".concat(P(e.property)," IN (").concat(A.apply(void 0,[","].concat(i()(e.values))),")")},notIn:function(e){return"".concat(P(e.property)," NOT IN (").concat(A.apply(void 0,[","].concat(i()(e.values))),")")},equals:function(e){return A(" = ",e.left,e.right)},notEquals:function(e){return A(" <> ",e.left,e.right)},lessThan:function(e){return A(" < ",e.left,e.right)},lessThanOrEqualTo:function(e){return A(" <= ",e.left,e.right)},greaterThan:function(e){return A(" > ",e.left,e.right)},greaterThanOrEqualTo:function(e){return A(" >= ",e.left,e.right)},property:function(e){return P(e.property)},value:function(e){return M(e.value)}};function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new T(t),r={preaggregation:new k(t).getFilter(e.filter),aggregation:n.getFilters(e.filter)};return r.preaggregation||r.aggregation?r:null}function I(e){var t;return(e=e&&e.preaggregation)&&Object.keys(e).length>0&&(t=C(e)),t?"WHERE "+t:""}function R(e){return e&&e.aggregation}},"./src/client/windshaft.js":
/*!*********************************!*\
  !*** ./src/client/windshaft.js ***!
  \*********************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return b});var r=n(/*! @babel/runtime/regenerator */"./node_modules/@babel/runtime/regenerator/index.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/asyncToGenerator */"./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),c=n.n(l),p=n(/*! ../../package */"./package.json"),h=n(/*! ../sources/MVT */"./src/sources/MVT.js"),f=n(/*! ../renderer/Metadata */"./src/renderer/Metadata.js"),d=n(/*! ../renderer/schema */"./src/renderer/schema.js"),m=n(/*! ../renderer/viz/expressions/time */"./src/renderer/viz/expressions/time.js"),_=n(/*! ./windshaft-filtering */"./src/client/windshaft-filtering.js"),y=n(/*! ../errors/carto-validation-error */"./src/errors/carto-validation-error.js"),v=n(/*! ../errors/carto-maps-api-error */"./src/errors/carto-maps-api-error.js"),g=2048,b=function(){function e(t){u()(this,e),this._source=t,this._exclusive=!0,this._MNS=null,this._promiseMNS=null,this.inProgressInstantiations={}}var t,n,r,o,s;return c()(e,[{key:"bindLayer",value:function(e,t){this._addDataframe=e,this._dataLoadedCallback=t,this._mvtClient.bindLayer(e,t)}},{key:"_getInstantiationID",value:function(e,t,n,r){return JSON.stringify({MNS:d.default.simplify(e),resolution:t,filtering:r.backendFilters?n:null,options:r})}},{key:"getMetadata",value:(s=a()(i.a.mark(function e(t){var n,r,o,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.getMinimumNeededSchema(),this._checkAcceptableMNS(n),r=t.resolution,o=_.getFiltering(t,{exclusive:this._exclusive}),this._forceIncludeCartodbId(n),!this._needToInstantiate(n,r,o)){e.next=10;break}return e.next=8,this._repeatableInstantiate(n,r,o);case 8:a=e.sent,this._updateStateAfterInstantiating(a);case 10:return e.abrupt("return",this.metadata);case 11:case"end":return e.stop()}},e,this)})),function(e){return s.apply(this,arguments)})},{key:"_forceIncludeCartodbId",value:function(e){e.cartodb_id||(e.cartodb_id=[{type:"unaggregated"}])}},{key:"requiresNewMetadata",value:function(e){var t=e.getMinimumNeededSchema();this._checkAcceptableMNS(t);var n=e.resolution,r=_.getFiltering(e,{exclusive:this._exclusive});return this._forceIncludeCartodbId(t),this._needToInstantiate(t,n,r)}},{key:"_checkAcceptableMNS",value:function(e){Object.keys(e).forEach(function(t){var n=e[t],r=n.some(function(e){return"aggregated"===e.type}),i=n.some(function(e){return"unaggregated"===e.type});if(r&&i)throw new y.default("".concat(y.CartoValidationTypes.INCORRECT_VALUE," Incompatible combination of cluster aggregation usages (").concat(JSON.stringify(n.filter(function(e){return"aggregated"===e.type})),") with unaggregated usage for property '").concat(t,"'"))})}},{key:"getData",value:function(e,t){if(this._mvtClient)return this._mvtClient.requestData(e,t)}},{key:"_needToInstantiate",value:function(e,t,n){return!d.default.equals(this._MNS,e)||t!==this.resolution||JSON.stringify(n)!==JSON.stringify(this.filtering)&&this.metadata.featureCount>2e6}},{key:"_isInstantiated",value:function(){return!!this.metadata}},{key:"_intantiationChoices",value:function(e){var t={backendFilters:!0};return e&&e.featureCount>=0&&(t.backendFilters=e.featureCount>2e6||!e.backendFiltersApplied),t}},{key:"_instantiateUncached",value:(o=a()(i.a.mark(function e(t,n,r){var o,a,s,u,l,c,p,h,f,d,m,y,v,g=arguments;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=g.length>3&&void 0!==g[3]?g[3]:{backendFilters:!0},a=g.length>4&&void 0!==g[4]?g[4]:null,s=this._getConfig(),e.next=5,this._generateAggregation(t,n);case 5:return u=e.sent,l=this._buildSelectClause(t),c=this._buildQuery(l),p="(".concat(c,") AS tmp"),h=o.backendFilters?r:null,f=!1,h&&this._requiresAggregation(t)&&(u.filters=_.getAggregationFilters(h),u.filters&&(f=!0),this._exclusive||(h=null)),h&&(d=this._buildQuery(l,h),f=f||d!==c,c=d),e.next=15,this._getInstantiationPromise(p,s,u,c,l,a);case 15:return m=e.sent,y=m.urlTemplates,(v=m.metadata).backendFiltersApplied=f,e.abrupt("return",{MNS:t,resolution:n,filters:r,metadata:v,urlTemplates:y});case 20:case"end":return e.stop()}},e,this)})),function(e,t,n){return o.apply(this,arguments)})},{key:"_updateStateAfterInstantiating",value:function(e){var t=e.MNS,n=e.resolution,r=e.filters,i=e.metadata,o=e.urlTemplates;this._mvtClient&&this._mvtClient.free(),this._mvtClient=new h.default(o),this._mvtClient._workerName="windshaft",this._mvtClient.bindLayer(this._addDataframe,this._dataLoadedCallback),this.urlTemplates=o,this.metadata=i,this._mvtClient._metadata=i,this._MNS=t,this.filtering=r,this.resolution=n,this._checkLayerMeta(t)}},{key:"_instantiate",value:(r=a()(i.a.mark(function e(t,n,r,o,a){var s,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=this._getInstantiationID(t,n,r,o),!this.inProgressInstantiations[s]){e.next=3;break}return e.abrupt("return",this.inProgressInstantiations[s]);case 3:return u=this._instantiateUncached(t,n,r,o,a),this.inProgressInstantiations[s]=u,e.abrupt("return",u);case 6:case"end":return e.stop()}},e,this)})),function(e,t,n,i,o){return r.apply(this,arguments)})},{key:"_repeatableInstantiate",value:(n=a()(i.a.mark(function e(t,n,r){var o,a,s,u=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=null,a=this._intantiationChoices(this.metadata),s=function(e){return o=e.metadata,u._intantiationChoices(e.metadata)},e.abrupt("return",x(a,s,function(e){return u._instantiate(t,n,r,e,o)}));case 4:case"end":return e.stop()}},e,this)})),function(e,t,r){return n.apply(this,arguments)})},{key:"_checkLayerMeta",value:function(e){if(!this._isAggregated()&&this._requiresAggregation(e))throw new v.default("".concat(v.CartoMapsAPITypes.NOT_SUPPORTED," Aggregation not supported for this dataset"))}},{key:"_isAggregated",value:function(){return this.metadata&&this.metadata.isAggregated}},{key:"_requiresAggregation",value:function(e){return Object.values(e).some(function(e){return e.some(function(e){return"aggregated"===e.type})})}},{key:"_generateAggregation",value:function(e,t){var n={columns:{},dimensions:{},placement:"centroid",resolution:t,threshold:1};return Object.keys(e).forEach(function(t){"cartodb_id"!==t&&e[t].forEach(function(e){"aggregated"===e.type?n.columns[d.default.column.aggColumn(t,e.op)]={aggregate_function:e.op,aggregated_column:t}:n.dimensions[t]=t})}),n}},{key:"_buildSelectClause",value:function(e){var t=Object.keys(e).concat(["the_geom_webmercator","cartodb_id"]);return t.filter(function(e,n){return t.indexOf(e)===n})}},{key:"_buildQuery",value:function(e,t){var n=e.map(function(e){return'"'.concat(e,'"')}).join(),r=t?_.getSQLWhere(t):"";return"SELECT ".concat(n," FROM ").concat(this._source._getFromClause()," ").concat(r)}},{key:"_getConfig",value:function(){return{apiKey:this._source._apiKey,username:this._source._username,serverURL:this._source._serverURL}}},{key:"free",value:function(){this._mvtClient&&this._mvtClient.free()}},{key:"_getInstantiationPromise",value:(t=a()(i.a.mark(function e(t,n,r,o,a){var s,u,l,c,p,h,f=arguments;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=f.length>5&&void 0!==f[5]?f[5]:null,u={buffersize:{mvt:1},layers:[{type:"mapnik",options:{sql:o,aggregation:r,dates_as_numbers:!0}}]},s||(l=["the_geom","the_geom_webmercator"],c=a.filter(function(e){return!l.includes(e)}),u.layers[0].options.metadata={geometryType:!0,columnStats:{topCategories:32768,includeNulls:!0},sample:{num_rows:1e3,include_columns:c}}),e.prev=3,e.next=6,fetch(E(n,u));case 6:p=e.sent,e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(3),new v.default("Failed to connect to Maps API with your user('".concat(this._source._username,"')"));case 12:return e.next=14,p.json();case 14:if(h=e.sent,p.ok){e.next=23;break}if(401!==p.status){e.next=20;break}throw new v.default("".concat(v.CartoMapsAPITypes.SECURITY," Unauthorized access to Maps API: invalid combination of user('").concat(this._source._username,"') and apiKey('").concat(this._source._apiKey,"')"));case 20:if(403!==p.status){e.next=22;break}throw new v.default("".concat(v.CartoMapsAPITypes.SECURITY," Unauthorized access to dataset: the provided apiKey('").concat(this._source._apiKey,"') doesn't provide access to the requested data"));case 22:throw new v.default("SQL errors: ".concat(JSON.stringify(h.errors)));case 23:return e.abrupt("return",{urlTemplates:h.metadata.tilejson.vector.tiles,metadata:s||this._adaptMetadata(h.metadata.layers[0].meta,r)});case 24:case"end":return e.stop()}},e,this,[[3,9]])})),function(e,n,r,i,o){return t.apply(this,arguments)})},{key:"_adaptMetadata",value:function(e,t){e.datesAsNumbers=e.dates_as_numbers;var n=e.stats,r=e.aggregation,i=e.datesAsNumbers,o=n.hasOwnProperty("featureCount")?n.featureCount:n.estimatedFeatureCount,a=function(e){switch(e){case"ST_MultiPolygon":case"ST_Polygon":return"polygon";case"ST_Point":return"point";case"ST_MultiLineString":case"ST_LineString":return"line";default:throw new v.default("".concat(v.CartoMapsAPITypes.NOT_SUPPORTED," Unimplemented geometry type '").concat(e,"'."))}}(n.geometryType),s=n.columns;Object.keys(t.columns).forEach(function(e){var t=d.default.column.getBase(e),n=d.default.column.getAggFN(e);s[t].aggregations||(s[t].aggregations={}),s[t].aggregations[n]=e}),Object.values(s).map(function(e){e.type=function(e){if("string"===e)return"category";return e}(e.type)}),Object.keys(s).forEach(function(e){var t=s[e];"category"===t.type&&t.categories?t.categories.forEach(function(e){e.name=e.category,delete e.category}):i&&i.includes(e)&&(t.type="date",["min","max","avg"].map(function(e){t[e]&&(t[e]=new m.default(1e3*t[e]).value)}))}),"point"===a&&(s[d.CLUSTER_FEATURE_COUNT]={type:"number"});return new f.default({properties:s,featureCount:o,sample:n.sample,geomType:a,isAggregated:r.mvt,idProperty:"cartodb_id"})}}]),e}();function x(e,t,n){return w.apply(this,arguments)}function w(){return(w=a()(i.a.mark(function e(t,n,r){var o,a,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=r(t),e.next=3,o;case 3:if(a=e.sent,s=n(a),JSON.stringify(t)!==JSON.stringify(s)){e.next=9;break}return e.abrupt("return",o);case 9:return e.abrupt("return",r(s));case 10:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function E(e,t){var n=JSON.stringify(t),r=T("api_key",e.apiKey),i=T("client","vl-".concat(p.version)),o=[r,i,T("config",n)],a=k(C(e),o);return a.length<g?new Request(a,{method:"GET",headers:{Accept:"application/json"}}):new Request(k(C(e),[r,i]),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:n})}function T(e,t){return"".concat(e,"=").concat(encodeURIComponent(t))}function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return"".concat(e,"?").concat(t.join("&"))}function C(e,t){var n="".concat(e.serverURL,"/api/v1/map");return t&&(n+=t),n}},"./src/constants/layer.js":
/*!********************************!*\
  !*** ./src/constants/layer.js ***!
  \********************************/
/*! exports provided: layerVisibility, RESOLUTION_ZOOMLEVEL_ZERO */function(e,t,n){"use strict";n.r(t),n.d(t,"layerVisibility",function(){return r}),n.d(t,"RESOLUTION_ZOOMLEVEL_ZERO",function(){return i});var r=Object.freeze({VISIBLE:"visible",HIDDEN:"none"}),i=512},"./src/errors/carto-error.js":
/*!***********************************!*\
  !*** ./src/errors/carto-error.js ***!
  \***********************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return h});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/wrapNativeSuper */"./node_modules/@babel/runtime/helpers/wrapNativeSuper.js"),h=function(e){function t(e){var n;if(i()(this,t),!e||!e.message)throw Error("Invalid CartoError, a message is mandatory");return(n=a()(this,u()(t).call(this,e.message))).name="CartoError",n.originalError=e,n}return c()(t,e),t}(n.n(p)()(Error))},"./src/errors/carto-maps-api-error.js":
/*!********************************************!*\
  !*** ./src/errors/carto-maps-api-error.js ***!
  \********************************************/
/*! exports provided: default, CartoMapsAPITypes */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return p}),n.d(t,"CartoMapsAPITypes",function(){return h});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),c=n.n(l),p=function(e){function t(e){var n;return i()(this,t),(n=a()(this,u()(t).call(this,{message:e}))).name="CartoMapsAPIError",n}return c()(t,e),t}(n(/*! ./carto-error */"./src/errors/carto-error.js").default),h={NOT_SUPPORTED:"[Not supported]:",SECURITY:"[Security]:"}},"./src/errors/carto-parsing-error.js":
/*!*******************************************!*\
  !*** ./src/errors/carto-parsing-error.js ***!
  \*******************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return p});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),c=n.n(l),p=function(e){function t(e){var n;return i()(this,t),(n=a()(this,u()(t).call(this,{message:e}))).name="CartoParsingError",n}return c()(t,e),t}(n(/*! ./carto-error */"./src/errors/carto-error.js").default)},"./src/errors/carto-runtime-error.js":
/*!*******************************************!*\
  !*** ./src/errors/carto-runtime-error.js ***!
  \*******************************************/
/*! exports provided: default, CartoRuntimeTypes */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return p}),n.d(t,"CartoRuntimeTypes",function(){return h});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),c=n.n(l),p=function(e){function t(e){var n;return i()(this,t),(n=a()(this,u()(t).call(this,{message:e}))).name="CartoRuntimeError",n}return c()(t,e),t}(n(/*! ./carto-error */"./src/errors/carto-error.js").default),h={NOT_SUPPORTED:"[Not supported]:",WEB_GL:"[WebGL]:",MVT:"[MVT]:"}},"./src/errors/carto-validation-error.js":
/*!**********************************************!*\
  !*** ./src/errors/carto-validation-error.js ***!
  \**********************************************/
/*! exports provided: default, CartoValidationTypes */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return p}),n.d(t,"CartoValidationTypes",function(){return h});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),c=n.n(l),p=function(e){function t(e){var n;return i()(this,t),(n=a()(this,u()(t).call(this,{message:e}))).name="CartoValidationError",n}return c()(t,e),t}(n(/*! ./carto-error */"./src/errors/carto-error.js").default),h={MISSING_REQUIRED:"[Missing required property]:",INCORRECT_TYPE:"[Property with an incorrect type]:",INCORRECT_VALUE:"[Incorrect value]:",TOO_MANY_ARGS:"[Too many arguments]:"}},"./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/*! exports provided: version, on, off, setDefaultAuth, setDefaultConfig, source, expressions, Layer, Viz, Interactivity, basemaps, default */function(e,t,n){"use strict";n.r(t),n.d(t,"source",function(){return _});var r=n(/*! ./setup/auth-service */"./src/setup/auth-service.js");n.d(t,"setDefaultAuth",function(){return r.setDefaultAuth});var i=n(/*! ./setup/config-service */"./src/setup/config-service.js");n.d(t,"setDefaultConfig",function(){return i.setDefaultConfig});var o=n(/*! ./Viz */"./src/Viz.js");n.d(t,"Viz",function(){return o.default});var a=n(/*! ./interactivity/Interactivity */"./src/interactivity/Interactivity.js");n.d(t,"Interactivity",function(){return a.default});var s=n(/*! ./Layer */"./src/Layer.js");n.d(t,"Layer",function(){return s.default});var u=n(/*! ./renderer/viz/expressions */"./src/renderer/viz/expressions.js");n.d(t,"expressions",function(){return u});var l=n(/*! ./sources/Dataset */"./src/sources/Dataset.js"),c=n(/*! ./sources/GeoJSON */"./src/sources/GeoJSON.js"),p=n(/*! ./sources/MVT */"./src/sources/MVT.js"),h=n(/*! ./sources/SQL */"./src/sources/SQL.js"),f=n(/*! ./utils/events */"./src/utils/events.js");n.d(t,"on",function(){return f.on}),n.d(t,"off",function(){return f.off});var d=n(/*! ./basemaps */"./src/basemaps.js");n.d(t,"basemaps",function(){return d});var m=n(/*! ../package.json */"./package.json");n.d(t,"version",function(){return m.version});var _={Dataset:l.default,SQL:h.default,GeoJSON:c.default,MVT:p.default};t.default={version:m.version,on:f.on,off:f.off,setDefaultAuth:r.setDefaultAuth,setDefaultConfig:i.setDefaultConfig,source:_,expressions:u,Layer:s.default,Viz:o.default,Interactivity:a.default,basemaps:d}},"./src/interactivity/Interactivity.js":
/*!********************************************!*\
  !*** ./src/interactivity/Interactivity.js ***!
  \********************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return f});var r=n(/*! @babel/runtime/helpers/toConsumableArray */"./node_modules/@babel/runtime/helpers/toConsumableArray.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),u=n.n(s),l=n(/*! mitt */"./node_modules/mitt/dist/mitt.es.js"),c=n(/*! ../Layer */"./src/Layer.js"),p=n(/*! ../errors/carto-validation-error */"./src/errors/carto-validation-error.js"),h=["featureClick","featureClickOut","featureEnter","featureHover","featureLeave"],f=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{autoChangePointer:!0};a()(this,e),t instanceof c.default&&(t=[t]),function(e){if(!Array.isArray(e))throw new p.default("".concat(p.CartoValidationTypes.INCORRECT_TYPE,' Invalid layer list, parameter must be an array of "carto.Layer" objects.'));if(!e.length)throw new p.default("".concat(p.CartoValidationTypes.INCORRECT_VALUE," Invalid argument, layer list must not be empty."));if(!e.every(function(e){return e instanceof c.default}))throw new p.default("".concat(p.CartoValidationTypes.INCORRECT_TYPE,' Invalid layer, layer must be an instance of "carto.Layer".'))}(t),this._init(t,n)}return u()(e,[{key:"on",value:function(e,t){return d(e),this._numListeners[e]=(this._numListeners[e]||0)+1,this._emitter.on(e,t)}},{key:"off",value:function(e,t){return d(e),this._numListeners[e]=this._numListeners[e]-1,this._emitter.off(e,t)}},{key:"_init",value:function(e,t){var n=this;return this._emitter=Object(l.default)(),this._layerList=e,this._prevHoverFeatures=[],this._prevClickFeatures=[],this._numListeners={},Promise.all(e.map(function(e){return e._context})).then(function(){!function(e){if(!e.every(function(t){return t.map===e[0].map}))throw new p.default("".concat(p.CartoValidationTypes.INCORRECT_VALUE," Invalid argument, all layers must belong to the same map."))}(e),n._subscribeToLayerEvents(e),n._subscribeToMapEvents(e[0].map)}).then(function(){t.autoChangePointer&&n._setInteractiveCursor()})}},{key:"_setInteractiveCursor",value:function(){var e=this,t=this._layerList[0].map;t.__carto_interacivities||(t.__carto_interacivities=new Set),this.on("featureHover",function(n){n.features.length?t.__carto_interacivities.add(e):t.__carto_interacivities.delete(e),t.getCanvas().style.cursor=t.__carto_interacivities.size>0?"pointer":""})}},{key:"_subscribeToMapEvents",value:function(e){e.on("mousemove",this._onMouseMove.bind(this)),e.on("click",this._onClick.bind(this))}},{key:"_subscribeToLayerEvents",value:function(e){var t=this;e.forEach(function(e){e.on("updated",t._onLayerUpdated.bind(t))})}},{key:"_onLayerUpdated",value:function(){this._onMouseMove(this._mouseEvent,!0)}},{key:"_onMouseMove",value:function(e,t){if(this._mouseEvent=e,e&&(this._numListeners.featureEnter||this._numListeners.featureHover||this._numListeners.featureLeave)){var n=this._createFeatureEvent(e),r=n.features,i=this._getDiffFeatures(this._prevHoverFeatures,r),o=this._getDiffFeatures(r,this._prevHoverFeatures);i.length>0&&this._fireEvent("featureLeave",{coordinates:n.coordinates,position:n.position,features:i}),o.length>0&&this._fireEvent("featureEnter",{coordinates:n.coordinates,position:n.position,features:o}),this._prevHoverFeatures=r,(!t||t&&(i.length||o.length))&&this._fireEvent("featureHover",n)}}},{key:"_onClick",value:function(e){if(this._numListeners.featureClick||this._numListeners.featureClickOut){var t=this._createFeatureEvent(e),n=t.features,r=this._getDiffFeatures(this._prevClickFeatures,n);r.length>0&&this._fireEvent("featureClickOut",{coordinates:t.coordinates,position:t.position,features:r}),this._prevClickFeatures=t.features,this._fireEvent("featureClick",t)}}},{key:"_createFeatureEvent",value:function(e){var t=this._getFeaturesAtPosition(e.point);return{coordinates:e.lngLat,position:e.point,features:t}}},{key:"_fireEvent",value:function(e,t){this._emitter.emit(e,t)}},{key:"_getFeaturesAtPosition",value:function(e){var t;return(t=[]).concat.apply(t,i()(this._layerList.map(function(t){return t.getFeaturesAtPosition(e)})))}},{key:"_getDiffFeatures",value:function(e,t){var n=this._getFeatureIDs(t);return e.filter(function(e){return!n.includes(e.id)})}},{key:"_getFeatureIDs",value:function(e){return e.map(function(e){return e.id})}}]),e}();function d(e){if(!h.includes(e))throw new p.default("".concat(p.CartoValidationTypes.INCORRECT_VALUE," Unrecognized event: '").concat(e,"'. Available events: ").concat(h.join(", "),"."))}},"./src/interactivity/feature.js":
/*!**************************************!*\
  !*** ./src/interactivity/feature.js ***!
  \**************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return u});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! ./featureVizProperty */"./src/interactivity/featureVizProperty.js"),u=function(){function e(t,n,r,o,a){i()(this,e);var u={};Object.keys(n.variables).map(function(e){u[e]=new s.default("__cartovl_variable_".concat(e),t,n,r,o,a)}),this.id=t[a],this.color=new s.default("color",t,n,r,o,a),this.width=new s.default("width",t,n,r,o,a),this.strokeColor=new s.default("strokeColor",t,n,r,o,a),this.strokeWidth=new s.default("strokeWidth",t,n,r,o,a),this.symbol=new s.default("symbol",t,n,r,o,a),this.symbolPlacement=new s.default("symbolPlacement",t,n,r,o,a),this.variables=u}return a()(e,[{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;for(var t in this.color.reset(e),this.width.reset(e),this.strokeColor.reset(e),this.strokeWidth.reset(e),this.symbol.reset(e),this.symbolPlacement.reset(e),this.variables)this.variables[t].reset(e)}}]),e}()},"./src/interactivity/featureVizProperty.js":
/*!*************************************************!*\
  !*** ./src/interactivity/featureVizProperty.js ***!
  \*************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return l});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! ../renderer/viz/expressions */"./src/renderer/viz/expressions.js"),u=n(/*! ../renderer/viz/parser */"./src/renderer/viz/parser.js"),l=function(){function e(t,n,r,o,a,l){i()(this,e),this._propertyName=t,this._properties=n,this._viz=r,this.blendTo=function(e,t,n,r,i,o){return function(a){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;if("string"==typeof a&&(a=Object(u.parseVizExpression)(a)),n[t]&&n[t][e])n[t][e].a.blendTo(a,l);else{var c=Object(s.blend)(a,r[e],Object(s.blend)(1,Object(s.notEquals)(Object(s.property)(o),t),Object(s.transition)(l)));i(t,e,c,n),r.replaceChild(r[e],c),r[e].notify()}}}(t,n[l],o,r,a,l),this.reset=function(e,t,n,r,i){return function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;n[t]&&n[t][e]&&(n[t][e].replaceChild(n[t][e].mix,Object(s.blend)(Object(s.notEquals)(Object(s.property)(i),t),Object(s.transition)(0),Object(s.transition)(o))),r[e].notify(),n[t][e]=void 0)}}(t,n[l],o,r,l)}return a()(e,[{key:"value",get:function(){return this._viz[this._propertyName].eval(this._properties)}}]),e}()},"./src/renderer/Dataframe.js":
/*!***********************************!*\
  !*** ./src/renderer/Dataframe.js ***!
  \***********************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return x});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),h=n.n(p),f=n(/*! ../../src/utils/geometry */"./src/utils/geometry.js"),d=n(/*! ../utils/collision */"./src/utils/collision.js"),m=n(/*! ./DummyDataframe */"./src/renderer/DummyDataframe.js"),_=n(/*! ../constants/layer */"./src/constants/layer.js"),y=new Map,v=1,g=-1,b=0,x=function(e){function t(){return i()(this,t),u()(this,c()(t).apply(this,arguments))}return h()(t,e),a()(t,[{key:"setFreeObserver",value:function(e){this.freeObserver=e}},{key:"bindRenderer",value:function(e){var t=e.gl;this.renderer=e;var n=this.decodedGeom.vertices,r=this.decodedGeom.breakpoints;this.addProperties(this.properties);var i=this.renderer.RTT_WIDTH,o=Math.ceil(this.numFeatures/i);this.height=o,this.vertexBuffer=t.createBuffer(),this.featureIDBuffer=t.createBuffer(),this.texColor=this._createStyleDataframeTexture(this.numFeatures),this.texWidth=this._createStyleDataframeTexture(this.numFeatures),this.texStrokeColor=this._createStyleDataframeTexture(this.numFeatures),this.texStrokeWidth=this._createStyleDataframeTexture(this.numFeatures),this.texFilter=this._createStyleDataframeTexture(this.numFeatures);for(var a=new Float32Array(n.length),s=0,u={},l={},c=0;c<this.numFeatures;c++)u[c]=c%i/(i-1),l[c]=o>1?Math.floor(c/i)/(o-1):.5;if(r.length)for(var p=0;p<n.length;p+=2){for(;p===r[s];)s++;a[p+0]=u[s],a[p+1]=l[s]}else for(var h=0;h<n.length;h+=6)a[h+0]=u[s],a[h+1]=l[s],0===a[h+0]&&(a[h+0]+=1/65536),0===a[h+1]&&(a[h+1]+=1/65536),a[h+2]=-a[h+0],a[h+3]=a[h+1],a[h+4]=a[h+0],a[h+5]=-a[h+1],s++;t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW),this.decodedGeom.normals&&(this.normalBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.normalBuffer),t.bufferData(t.ARRAY_BUFFER,this.decodedGeom.normals,t.STATIC_DRAW)),t.bindBuffer(t.ARRAY_BUFFER,this.featureIDBuffer),t.bufferData(t.ARRAY_BUFFER,a,t.STATIC_DRAW)}},{key:"getFeaturesAtPosition",value:function(e,t){if(!this.matrix)return[];switch(this.type){case"point":return this._getPointsAtPosition(e,t);case"line":return this._getFeaturesAtPositionFromTriangles("line",e,t);case"polygon":return this._getFeaturesAtPositionFromTriangles("polygon",e,t);default:return[]}}},{key:"inViewport",value:function(e){if(!this.matrix)return!1;switch(this.type){case"point":return this._isPointInViewport(e);case"line":case"polygon":return this._isPolygonInViewport(e);default:return!1}}},{key:"getPropertyTexture",value:function(e){if(this.propertyTex[e])return this.propertyTex[e];var t=this.properties[e],n=this.renderer.gl,r=this.renderer.RTT_WIDTH,i=Math.ceil(this.numFeatures/r);return this.height=i,this.propertyTex[e]=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.propertyTex[e]),n.texImage2D(n.TEXTURE_2D,0,n.ALPHA,r,i,0,n.ALPHA,n.FLOAT,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),this.propertyTex[e]}},{key:"free",value:function(){var e=this;if(this.propertyTex){var t=this.renderer.gl;this.propertyTex.map(function(e){return t.deleteTexture(e)}),t.deleteTexture(this.texColor),t.deleteTexture(this.texStrokeColor),t.deleteTexture(this.texWidth),t.deleteTexture(this.texStrokeWidth),t.deleteTexture(this.texFilter),t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.featureIDBuffer)}var n=this.freeObserver;Object.keys(this).map(function(t){e[t]=null}),this.freed=!0,n&&n(this)}},{key:"_isPointInViewport",value:function(e){var t=this.matrix,n=this.decodedGeom.vertices[6*e+0],r=this.decodedGeom.vertices[6*e+1],i=t[0]*n+t[4]*r+t[12],o=t[1]*n+t[5]*r+t[13],a=t[3]*n+t[7]*r+t[15];return i>-a&&i<a&&o>-a&&o<a}},{key:"_isPolygonInViewport",value:function(e){var t=this._aabb[e],n=this._compareAABBs(t);if(n===b){var r=this.decodedGeom.vertices,i=this.decodedGeom.normals,o=this.decodedGeom.featureIDToVertexIndex.get(e);return this._isPolygonCollidingViewport(r,i,o.start,o.end)}return n===v}},{key:"_compareAABBs",value:function(e){if(null===e)return g;var t=this._projectToNDC(e.minx,e.miny),n=this._projectToNDC(e.minx,e.maxy),r=this._projectToNDC(e.maxx,e.miny),i=this._projectToNDC(e.maxx,e.maxy),o={minx:Math.min(t.x,n.x,r.x,i.x),miny:Math.min(t.y,n.y,r.y,i.y),maxx:Math.max(t.x,n.x,r.x,i.x),maxy:Math.max(t.y,n.y,r.y,i.y)},a={minx:-1,miny:-1,maxx:1,maxy:1};switch(!0){case function(e,t){return e.minx>=t.minx&&e.maxx<=t.maxx&&e.miny>=t.miny&&e.maxy<=t.maxy}(o,a):return v;case w(o,a):return g;default:return b}}},{key:"_isPolygonCollidingViewport",value:function(e,t,n,r){if(!this.matrix)return!1;for(var i={minx:-1,miny:-1,maxx:1,maxy:1},o=n;o<r;o+=6){var a=this._projectToNDC(e[o+0],e[o+1]),s=this._projectToNDC(e[o+2],e[o+3]),u=this._projectToNDC(e[o+4],e[o+5]),l=[{x:a.x,y:a.y},{x:s.x,y:s.y},{x:u.x,y:u.y}];if(Object(d.triangleCollides)(l,i))return!0}return!1}},{key:"_projectToNDC",value:function(e,t){var n=this.matrix,r=n[0]*e+n[4]*t+n[12],i=n[1]*e+n[5]*t+n[13],o=n[3]*e+n[7]*t+n[15];return{x:r/o,y:i/o}}},{key:"_getPointsAtPosition",value:function(e,t){for(var n=this.decodedGeom.vertices,r=[],i=this.renderer.gl.canvas.width/window.devicePixelRatio,o=this.renderer.gl.canvas.height/window.devicePixelRatio,a=0;a<n.length;a+=6){var s=a/6,u=this.getFeature(s);if(!this._isFeatureFiltered(u,t.filter)){var l={x:n[a],y:n[a+1]},c=this._projectToNDC(l.x,l.y);c.x*=.5,c.y*=-.5,c.x+=.5,c.y+=.5,c.x*=i,c.y*=o;var p=this._computePointRadius(u,t);if(!t.transform.default){var h=t.transform.eval(u);c.x+=h.x,c.y-=h.y}Object(f.pointInCircle)(e,c,p)&&r.push(this.getFeature(s))}}return r}},{key:"_computePointRadius",value:function(e,t){return(Math.min(t.width.eval(e),1024)+Math.min(t.strokeWidth.eval(e),1024))/2}},{key:"_computeLineWidthScale",value:function(e,t){return Math.min(t.width.eval(e),1024)/2/this.scale/(Math.pow(2,this.renderer.drawMetadata.zoomLevel)*_.RESOLUTION_ZOOMLEVEL_ZERO)}},{key:"_computePolygonWidthScale",value:function(e,t){return Math.min(t.strokeWidth.eval(e),1024)/2/this.scale/(Math.pow(2,this.renderer.drawMetadata.zoomLevel)*_.RESOLUTION_ZOOMLEVEL_ZERO)}},{key:"_getFeaturesAtPositionFromTriangles",value:function(e,t,n){for(var r,i=this.decodedGeom.vertices,o=this.decodedGeom.normals,a=this.decodedGeom.breakpoints,s=[],u=-1,l={x:0,y:0},c=this.renderer.gl.canvas.width/window.devicePixelRatio,p=this.renderer.gl.canvas.height/window.devicePixelRatio,h=0;h<i.length;h+=6){if(0===h||h>=a[u]){u++;var d=this.getFeature(u);if(!n.transform.default){var m=n.transform.eval(d);l.x=m[0],l.y=m[1]}if(r="line"===e?this._computeLineWidthScale(d,n):this._computePolygonWidthScale(d,n),this._isFeatureFiltered(d,n.filter)||!this._isPointInAABB(t,l,"line"===e?n.width.eval(d):n.strokeWidth.eval(d),u)){h=a[u]-6;continue}}var _=this._projectToNDC(i[h+0]+o[h+0]*r,i[h+1]+o[h+1]*r),y=this._projectToNDC(i[h+2]+o[h+2]*r,i[h+3]+o[h+3]*r),v=this._projectToNDC(i[h+4]+o[h+4]*r,i[h+5]+o[h+5]*r);_.x*=.5,_.y*=-.5,_.x+=.5,_.y+=.5,y.x*=.5,y.y*=-.5,y.x+=.5,y.y+=.5,v.x*=.5,v.y*=-.5,v.x+=.5,v.y+=.5,Object(f.pointInTriangle)(t,{x:_.x*c+l.x,y:_.y*p-l.y},{x:y.x*c+l.x,y:y.y*p-l.y},{x:v.x*c+l.x,y:v.y*p-l.y})&&(s.push(this.getFeature(u)),h=a[u]-6)}return s}},{key:"_isPointInAABB",value:function(e,t,n,r){var i=this._aabb[r];if(null===i||!this.matrix)return!1;var o=this._projectToNDC(i.minx,i.miny),a=this._projectToNDC(i.minx,i.maxy),s=this._projectToNDC(i.maxx,i.miny),u=this._projectToNDC(i.maxx,i.maxy),l={minx:Math.min(o.x,a.x,s.x,u.x),miny:Math.min(o.y,a.y,s.y,u.y),maxx:Math.max(o.x,a.x,s.x,u.x),maxy:Math.max(o.y,a.y,s.y,u.y)},c=this.renderer.gl.canvas.width/window.devicePixelRatio,p=this.renderer.gl.canvas.height/window.devicePixelRatio,h=2*t.x/c,f=2*t.y/p,d=e.x/c*2-1,m=-(e.y/p*2-1);return!w(l,{minx:d+h-2*n/c,miny:m-f-2*n/p,maxx:d+h+2*n/c,maxy:m-f+2*n/p})}},{key:"_isFeatureFiltered",value:function(e,t){return t.eval(e)<.5}},{key:"_genFeatureClass",value:function(){var e=this;if(y.has(this.metadata))this._cls=y.get(this.metadata);else{for(var t=function e(t,n){i()(this,e),this._index=t,this._dataframe=n},n=this.metadata,r={},o=function(t){var i=e.metadata.propertyKeys[t];r[i]={get:function(){var e=this._index;return"category"===n.properties[i].type?n.IDToCategory.get(this._dataframe.properties[i][e]):this._dataframe.properties[i][e]}}},a=0;a<this.metadata.propertyKeys.length;a++)o(a);Object.defineProperties(t.prototype,r),y.set(this.metadata,t),this._cls=t}}},{key:"_getFeatureProperty",value:function(e,t){return"category"===this.metadata.properties[t].type?this.metadata.IDToCategory.get(this.properties[t][e]):this.properties[t][e]}},{key:"getFeature",value:function(e){if(this.cachedFeatures||(this.cachedFeatures=new Array(this.numFeatures)),void 0!==this.cachedFeatures[e])return this.cachedFeatures[e];this._cls||this._genFeatureClass();var t=new this._cls(e,this);return this.cachedFeatures[e]=t,t}},{key:"_addProperty",value:function(e){Object.keys(this.propertyTex).length<32&&this.getPropertyTexture(e)}},{key:"addProperties",value:function(e){for(var t=0;t<this.metadata.propertyKeys.length;t++){var n=this.metadata.propertyKeys[t];this._addProperty(n)}this._genFeatureClass()}},{key:"_createStyleDataframeTexture",value:function(e){var t=this.renderer.gl,n=this.renderer.RTT_WIDTH,r=Math.ceil(e/n),i=t.createTexture();return t.bindTexture(t.TEXTURE_2D,i),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n,r,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),i}}]),t}(m.default);function w(e,t){return e.minx>t.maxx||e.miny>t.maxy||e.maxx<t.minx||e.maxy<t.miny}},"./src/renderer/DummyDataframe.js":
/*!****************************************!*\
  !*** ./src/renderer/DummyDataframe.js ***!
  \****************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return s});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! ./decoder */"./src/renderer/decoder/index.js"),a=n(/*! ../utils/geometry */"./src/utils/geometry.js"),s=function e(t){var n=t.center,r=t.scale,s=t.geom,u=t.properties,l=t.type,c=t.active,p=t.size,h=t.metadata;i()(this,e),this.active=c,this.center=n,this.properties=u,this.scale=r,this.type=l,this.decodedGeom=Object(o.decodeGeom)(l,s),this.numVertex="point"===l?3*p:this.decodedGeom.vertices.length/2,this.numFeatures="point"===l?p:this.decodedGeom.breakpoints.length||this.numVertex,this.propertyTex=[],this.metadata=h,this.propertyCount=0,this._aabb=Object(a.computeAABB)(s,l),this.t1=[.1,.1,.1,.1],this.t2=[.1,.1,.1,.1],this.t3=[.1,.1,.1,.1],this.t4=[.1,.1,.1,.1]}},"./src/renderer/Metadata.js":
/*!**********************************!*\
  !*** ./src/renderer/Metadata.js ***!
  \**********************************/
/*! exports provided: IDENTITY, default */function(e,t,n){"use strict";n.r(t),n.d(t,"IDENTITY",function(){return s}),n.d(t,"default",function(){return u});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s={properties:{}},u=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{properties:{}},r=n.properties,o=n.featureCount,a=n.sample,s=n.geomType,u=n.isAggregated,l=n.idProperty;i()(this,e),this.properties=r,this.featureCount=o,this.sample=a,this.geomType=s,this.isAggregated=u,this.idProperty=l||"cartodb_id",this.categoryToID=new Map,this.IDToCategory=new Map,this.numCategories=0,Object.values(r).map(function(e){e.categories=e.categories||[],e.categories.map(function(n){return t.categorizeString(e,n.name,!0)})}),this.propertyKeys=Object.keys(this.properties)}return a()(e,[{key:"categorizeString",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return void 0===t&&(t=null),this.categoryToID.has(t)?this.categoryToID.get(t):(n||this.properties[e].categories.push({name:t,frequency:Number.NaN}),this.categoryToID.set(t,this.numCategories),this.IDToCategory.set(this.numCategories,t),this.numCategories++,this.numCategories-1)}},{key:"propertyNames",value:function(e){var t=this.properties[e];return t.aggregations?Object.keys(t.aggregations).map(function(e){return t.aggregations[e]}):[e]}}]),e}()},"./src/renderer/RenderLayer.js":
/*!*************************************!*\
  !*** ./src/renderer/RenderLayer.js ***!
  \*************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return p});var r=n(/*! @babel/runtime/helpers/toConsumableArray */"./node_modules/@babel/runtime/helpers/toConsumableArray.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),u=n.n(s),l=n(/*! ../interactivity/feature */"./src/interactivity/feature.js"),c=n(/*! ../errors/carto-validation-error */"./src/errors/carto-validation-error.js"),p=function(){function e(){a()(this,e),this.dataframes=[],this.renderer=null,this.viz=null,this.type=null,this.customizedFeatures={},this.idProperty=null}return u()(e,[{key:"addDataframe",value:function(e){this.type&&this._checkDataframeType(e),this.type=e.type,this.renderer&&e.bindRenderer(this.renderer),this.dataframes.push(e),this.idProperty=e.metadata.idProperty}},{key:"setRenderer",value:function(e){this.renderer=e,this.dataframes.forEach(function(t){return t.bindRenderer(e)})}},{key:"setViz",value:function(e){this.viz=e}},{key:"getActiveDataframes",value:function(){this.dataframes=this.dataframes.filter(function(e){return!e.freed});var e=this.dataframes.filter(function(e){return e.active&&e.numVertex});return e.length&&void 0!==e[0].orderID&&(e=e.sort(function(e,t){return e.orderID-t.orderID})),e}},{key:"hasDataframes",value:function(){return this.getActiveDataframes().length>0}},{key:"getNumFeatures",value:function(){return this.getActiveDataframes().map(function(e){return e.numFeatures}).reduce(function(e,t){return e+t},0)}},{key:"_checkDataframeType",value:function(e){if(this.type!==e.type)throw new c.default("".concat(c.CartoValidationTypes.INCORRECT_TYPE," Layer dataframes must always be of the same type"))}},{key:"getFeaturesAtPosition",value:function(e){var t,n=this;return this.viz?(t=[]).concat.apply(t,i()(this.getActiveDataframes().map(function(t){return t.getFeaturesAtPosition(e,n.viz)}))).map(function(e){return new l.default(e,n.viz,n.customizedFeatures,n.trackFeatureViz,n.idProperty)}):[]}},{key:"trackFeatureViz",value:function(e,t,n,r){r[e]=r[e]||{},r[e][t]=n}},{key:"freeDataframes",value:function(){this.dataframes.map(function(e){return e.free()}),this.dataframes=[],this.type=null}}]),e}()},"./src/renderer/Renderer.js":
/*!**********************************!*\
  !*** ./src/renderer/Renderer.js ***!
  \**********************************/
/*! exports provided: RTT_WIDTH, default */function(e,t,n){"use strict";n.r(t),n.d(t,"RTT_WIDTH",function(){return f}),n.d(t,"default",function(){return d});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! ./shaders */"./src/renderer/shaders/index.js"),u=n(/*! ./viz/expressions */"./src/renderer/viz/expressions.js"),l=n(/*! ../errors/carto-runtime-error */"./src/errors/carto-runtime-error.js"),c=n(/*! gl-matrix */"./node_modules/gl-matrix/lib/gl-matrix.js"),p=n(/*! ../constants/layer */"./src/constants/layer.js"),h=Date.now(),f=1024,d=function(){function e(t){if(i()(this,e),t){if(this.gl=t.getContext("webgl"),!this.gl)throw new l.default("".concat(l.CartoRuntimeTypes.WEB_GL," WebGL 1 is unsupported"));this._initGL(this.gl)}this._center={x:0,y:0},this._zoom=1,this.RTT_WIDTH=f,this.dataframes=[]}return a()(e,[{key:"initialize",value:function(e){this._initGL(e)}},{key:"setCenter",value:function(e){this._center.x=e.x,this._center.y=e.y}},{key:"setZoom",value:function(e){this._zoom=e}},{key:"getBounds",value:function(){var e=this._zoom*this._getAspect(),t=this._zoom;return[this._center.x-e,this._center.y-t,this._center.x+e,this._center.y+t]}},{key:"_initGL",value:function(e){if(this.gl=e,!e.getExtension("OES_texture_float"))throw new l.default("".concat(l.CartoRuntimeTypes.WEB_GL," WebGL extension 'OES_texture_float' is unsupported"));var t=e.getParameter(e.MAX_RENDERBUFFER_SIZE);if(t<f)throw new l.default("".concat(l.CartoRuntimeTypes.WEB_GL," WebGL parameter 'gl.MAX_RENDERBUFFER_SIZE' is below the requirement: ").concat(t," < ").concat(f));this._initShaders(),this.auxFB=e.createFramebuffer(),this.bigTriangleVBO=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.bigTriangleVBO);var n=new Float32Array([10,-10,0,10,-10,-10]);e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW),this.zeroTex=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.zeroTex),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),this._AATex=e.createTexture(),this._AAFB=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindTexture(e.TEXTURE_2D,this.zeroTex)}},{key:"_getAspect",value:function(){return this.gl?this.gl.canvas.width/this.gl.canvas.height:1}},{key:"_runViewportAggregations",value:function(e){var t=this,n=e.getActiveDataframes(),r=e.viz,i=this._getViewportExpressions(r._getRootExpressions());if(i.length){var o=n.length?n[0].metadata:null;i.forEach(function(e){return e._resetViewportAgg(o)});var a=i.length,s=new Set;n.forEach(function(e){for(var n=0;n<e.numFeatures;n++){var u=e.properties[o.idProperty][n];if(!s.has(u)&&e.inViewport(n,r)){s.add(u);var l=t._featureFromDataFrame(e,n,o);if(!(r.filter.eval(l)<.5))for(var c=0;c<a;c++)i[c].accumViewportAgg(l)}}})}}},{key:"_getViewportExpressions",value:function(e){var t=[];return e.map(function e(n){n._isViewport?t.push(n):n._getChildren().map(e)}),t}},{key:"_featureFromDataFrame",value:function(e,t,n){return e.getFeature(t)}},{key:"renderLayer",value:function(e,t){var n=this;this.drawMetadata=t;var r=e.getActiveDataframes(),i=e.viz,o=this.gl;if(this._updateDataframeMatrices(r),this._runViewportAggregations(e),r.length){i._getRootExpressions().map(function(e){return e._dataReady()}),o.enable(o.CULL_FACE),o.disable(o.BLEND),o.disable(o.DEPTH_TEST),o.disable(o.STENCIL_TEST),o.depthMask(!1),o.bindFramebuffer(o.FRAMEBUFFER,this.auxFB);var a=function(e,r,a,s){var u=a.textureIds.get(i);o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,r,0),o.viewport(0,0,f,e.height),o.clear(o.COLOR_BUFFER_BIT),o.useProgram(a.program),t.freeTexUnit=Object.keys(u).length,s._setTimestamp((Date.now()-h)/1e3),s._preDraw(a.program,t,o),Object.keys(u).forEach(function(t,n){o.activeTexture(o.TEXTURE0+n),o.bindTexture(o.TEXTURE_2D,e.getPropertyTexture(t)),o.uniform1i(u[t],n)}),o.enableVertexAttribArray(a.vertexAttribute),o.bindBuffer(o.ARRAY_BUFFER,n.bigTriangleVBO),o.vertexAttribPointer(a.vertexAttribute,2,o.FLOAT,!1,0,0),o.drawArrays(o.TRIANGLES,0,3),o.disableVertexAttribArray(a.vertexAttribute)};if(r.map(function(e){return a(e,e.texColor,i.colorShader,i.color)}),r.map(function(e){return a(e,e.texWidth,i.widthShader,i.width)}),r.map(function(e){return a(e,e.texStrokeColor,i.strokeColorShader,i.strokeColor)}),r.map(function(e){return a(e,e.texStrokeWidth,i.strokeWidthShader,i.strokeWidth)}),r.map(function(e){return a(e,e.texFilter,i.filterShader,i.filter)}),o.blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA),o.enable(o.BLEND),o.bindFramebuffer(o.FRAMEBUFFER,null),o.viewport(0,0,o.drawingBufferWidth,o.drawingBufferHeight),"point"!==e.type){var s=(window.devicePixelRatio||1)>=2?1:2;o.bindFramebuffer(o.FRAMEBUFFER,this._AAFB);var l=[o.drawingBufferWidth,o.drawingBufferHeight],c=l[0],d=l[1];if(c!==this._width||d!==this._height){o.bindTexture(o.TEXTURE_2D,this._AATex),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,c*s,d*s,0,o.RGBA,o.UNSIGNED_BYTE,null),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,this._AATex,0);var m=o.createRenderbuffer();o.bindRenderbuffer(o.RENDERBUFFER,m),o.renderbufferStorage(o.RENDERBUFFER,o.DEPTH_COMPONENT16,c*s,d*s),o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_ATTACHMENT,o.RENDERBUFFER,m);var _=[c,d];this._width=_[0],this._height=_[1]}o.viewport(0,0,c*s,d*s),o.clear(o.COLOR_BUFFER_BIT)}var y=function(e){var t=e.viz.order,n=[0],r=[1030];t.isA(u.Asc)?(n=Array.from({length:64},function(e,t){return 2*(63-t)}),r=Array.from({length:64},function(e,t){return 0===t?1030:2*(63-t+1)})):t.isA(u.Desc)&&(n=Array.from({length:64},function(e,t){return 2*t}),r=Array.from({length:64},function(e,t){return 63===t?1030:2*(t+1)}));return{orderingMins:n,orderingMaxs:r}}(e),v=y.orderingMins,g=y.orderingMaxs;"line"!==r[0].type&&"polygon"!==r[0].type||(o.clearDepth(1),o.depthRange(0,1),o.depthFunc(o.NOTEQUAL),o.depthMask(!0),o.enable(o.DEPTH_TEST));v.map(function(e,n){!function(e){r.forEach(function(n){var r=0,a=null;if(a=i.symbol.default?"point"===n.type?i.pointShader:"line"===n.type?i.lineShader:i.polygonShader:i.symbolShader,o.useProgram(a.program),o.uniform1f(a.orderMinWidth,v[e]),o.uniform1f(a.orderMaxWidth,g[e]),o.uniform1f(a.normalScale,1/(Math.pow(2,t.zoomLevel)*p.RESOLUTION_ZOOMLEVEL_ZERO*n.scale)),o.enableVertexAttribArray(a.vertexPositionAttribute),o.bindBuffer(o.ARRAY_BUFFER,n.vertexBuffer),o.vertexAttribPointer(a.vertexPositionAttribute,2,o.FLOAT,!1,0,0),o.enableVertexAttribArray(a.featureIdAttr),o.bindBuffer(o.ARRAY_BUFFER,n.featureIDBuffer),o.vertexAttribPointer(a.featureIdAttr,2,o.FLOAT,!1,0,0),"line"!==n.type&&"polygon"!==n.type||(o.enableVertexAttribArray(a.normalAttr),o.bindBuffer(o.ARRAY_BUFFER,n.normalBuffer),o.vertexAttribPointer(a.normalAttr,2,o.FLOAT,!1,0,0)),o.activeTexture(o.TEXTURE0+r),o.bindTexture(o.TEXTURE_2D,n.texColor),o.uniform1i(a.colorTexture,r),r++,o.activeTexture(o.TEXTURE0+r),o.bindTexture(o.TEXTURE_2D,n.texWidth),o.uniform1i(a.widthTexture,r),r++,o.activeTexture(o.TEXTURE0+r),o.bindTexture(o.TEXTURE_2D,n.texFilter),o.uniform1i(a.filterTexture,r),r++,o.uniform2f(a.resolution,o.canvas.width,o.canvas.height),i.symbol.default)"line"!==n.type&&(o.activeTexture(o.TEXTURE0+r),o.bindTexture(o.TEXTURE_2D,n.texStrokeColor),o.uniform1i(a.strokeColorTexture,r),r++,o.activeTexture(o.TEXTURE0+r),o.bindTexture(o.TEXTURE_2D,n.texStrokeWidth),o.uniform1i(a.strokeWidthTexture,r),r++);else{var s=i.symbolShader.textureIds.get(i);t.freeTexUnit=r+Object.keys(s).length,i.symbol._setTimestamp((Date.now()-h)/1e3),i.symbol._preDraw(i.symbolShader.program,t,o),i.symbolPlacement._setTimestamp((Date.now()-h)/1e3),i.symbolPlacement._preDraw(i.symbolShader.program,t,o),r=t.freeTexUnit,Object.keys(s).forEach(function(e){o.activeTexture(o.TEXTURE0+r),o.bindTexture(o.TEXTURE_2D,n.getPropertyTexture(e)),o.uniform1i(s[e],r),r++})}if("line"!==n.type&&"polygon"!==n.type||o.clear(o.DEPTH_BUFFER_BIT),!i.transform.default){var u=a.textureIds.get(i);t.freeTexUnit=r+Object.keys(u).length,i.transform._setTimestamp((Date.now()-h)/1e3),i.transform._preDraw(a.program,t,o),r=t.freeTexUnit,Object.keys(u).forEach(function(e){o.activeTexture(o.TEXTURE0+r),o.bindTexture(o.TEXTURE_2D,n.getPropertyTexture(e)),o.uniform1i(u[e],r),r++}),o.uniform2f(a.resolution,o.canvas.width,o.canvas.height)}o.uniformMatrix4fv(a.matrix,!1,n.matrix),o.drawArrays(o.TRIANGLES,0,n.numVertex),o.disableVertexAttribArray(a.vertexPositionAttribute),o.disableVertexAttribArray(a.featureIdAttr),"line"!==n.type&&"polygon"!==n.type||(o.disableVertexAttribArray(a.normalAttr),o.disable(o.DEPTH_TEST))})}(n)}),"point"!==e.type&&(o.bindFramebuffer(o.FRAMEBUFFER,null),o.viewport(0,0,o.drawingBufferWidth,o.drawingBufferHeight),o.useProgram(this._aaBlendShader.program),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,this._AATex),o.uniform1i(this._aaBlendShader.readTU,0),o.enableVertexAttribArray(this._aaBlendShader.vertexAttribute),o.bindBuffer(o.ARRAY_BUFFER,this.bigTriangleVBO),o.vertexAttribPointer(this._aaBlendShader.vertexAttribute,2,o.FLOAT,!1,0,0),o.drawArrays(o.TRIANGLES,0,3),o.disableVertexAttribArray(this._aaBlendShader.vertexAttribute)),o.disable(o.CULL_FACE)}}},{key:"_updateDataframeMatrices",value:function(e){var t=this;e.forEach(function(e){var n=[],r=[];c.mat4.copy(n,t.matrix),c.mat4.identity(r),c.mat4.translate(r,r,[.5,.5,0]),c.mat4.scale(r,r,[.5,-.5,1]),c.mat4.translate(r,r,[e.center.x,e.center.y,0]),c.mat4.scale(r,r,[e.scale,e.scale,1]),c.mat4.multiply(n,n,r),e.matrix=n})}},{key:"_initShaders",value:function(){this._aaBlendShader=new s.default.AABlender(this.gl)}}]),e}()},"./src/renderer/decoder/common.js":
/*!****************************************!*\
  !*** ./src/renderer/decoder/common.js ***!
  \****************************************/
/*! exports provided: addLineString, resizeBuffer */function(e,t,n){"use strict";n.r(t),n.d(t,"addLineString",function(){return i}),n.d(t,"resizeBuffer",function(){return o});var r=n(/*! ../../utils/geometry */"./src/utils/geometry.js");function i(e,t,n,i,o){var a,s,u,l,c,p;if(e.length>=4){if(a=[e[0],e[1]],s=[e[2],e[3]],l=Object(r.getLineNormal)(a,s),a[0]===s[0]&&a[1]===s[1])return n;for(var h=4;h<=e.length;h+=2){if((p=!(o&&o(h)))&&(t.vertices[n]=a[0],t.normals[n++]=-l[0],t.vertices[n]=a[1],t.normals[n++]=-l[1],t.vertices[n]=a[0],t.normals[n++]=l[0],t.vertices[n]=a[1],t.normals[n++]=l[1],t.vertices[n]=s[0],t.normals[n++]=l[0],t.vertices[n]=s[1],t.normals[n++]=l[1],t.vertices[n]=a[0],t.normals[n++]=-l[0],t.vertices[n]=a[1],t.normals[n++]=-l[1],t.vertices[n]=s[0],t.normals[n++]=l[0],t.vertices[n]=s[1],t.normals[n++]=l[1],t.vertices[n]=s[0],t.normals[n++]=-l[0],t.vertices[n]=s[1],t.normals[n++]=-l[1]),h<=e.length-2?u=[e[h],e[h+1]]:i&&(u=[e[2],e[3]]),u){if(u[0]===s[0]&&u[1]===s[1])return n;if(c=Object(r.getLineNormal)(s,u),p){var f=Object(r.getJoinNormal)(l,c),d=f.turnLeft,m=f.joinNormal,_=d?l:Object(r.neg)(c),y=d?c:Object(r.neg)(l);t.vertices[n]=s[0],t.normals[n++]=0,t.vertices[n]=s[1],t.normals[n++]=i?1e-37:0,t.vertices[n]=s[0],t.normals[n++]=_[0],t.vertices[n]=s[1],t.normals[n++]=_[1],t.vertices[n]=s[0],t.normals[n++]=y[0],t.vertices[n]=s[1],t.normals[n++]=y[1],m&&(t.vertices[n]=s[0],t.normals[n++]=m[0],t.vertices[n]=s[1],t.normals[n++]=m[1],t.vertices[n]=s[0],t.normals[n++]=y[0],t.vertices[n]=s[1],t.normals[n++]=y[1],t.vertices[n]=s[0],t.normals[n++]=_[0],t.vertices[n]=s[1],t.normals[n++]=_[1])}}a=s,s=u,l=c,u=null}}return n}function o(e,t){var n=new Float32Array(t);return n.set(e),n}},"./src/renderer/decoder/index.js":
/*!***************************************!*\
  !*** ./src/renderer/decoder/index.js ***!
  \***************************************/
/*! exports provided: decodeGeom */function(e,t,n){"use strict";n.r(t),n.d(t,"decodeGeom",function(){return s});var r=n(/*! ./pointDecoder */"./src/renderer/decoder/pointDecoder.js"),i=n(/*! ./lineDecoder */"./src/renderer/decoder/lineDecoder.js"),o=n(/*! ./polygonDecoder */"./src/renderer/decoder/polygonDecoder.js"),a=n(/*! ../../errors/carto-runtime-error */"./src/errors/carto-runtime-error.js");function s(e,t){switch(e){case"point":return Object(r.decodePoint)(t);case"line":return Object(i.decodeLine)(t);case"polygon":return Object(o.decodePolygon)(t);default:throw new a.default("".concat(a.CartoRuntimeTypes.NOT_SUPPORTED," Unimplemented geometry type: '").concat(e,"'."))}}},"./src/renderer/decoder/lineDecoder.js":
/*!*********************************************!*\
  !*** ./src/renderer/decoder/lineDecoder.js ***!
  \*********************************************/
/*! exports provided: decodeLine */function(e,t,n){"use strict";n.r(t),n.d(t,"decodeLine",function(){return s});var r=n(/*! ./common */"./src/renderer/decoder/common.js"),i=24,o=0,a={vertices:new Float32Array(1048576),normals:new Float32Array(1048576)};function s(e){var t=[],n=new Map;o=0;for(var s=0;s<e.length;s++){for(var l=e[s],c=0;c<l.length;c++)u(i*l[c].length),o=Object(r.addLineString)(l[c],a,o);n.set(t.length,0===t.length?{start:0,end:o}:{start:n.get(t.length-1).end,end:o}),t.push(o)}for(var p=new ArrayBuffer(4*o),h=new ArrayBuffer(4*o),f=new Float32Array(p),d=new Float32Array(h),m=0;m<o;m++)f[m]=a.vertices[m],d[m]=a.normals[m];return{vertices:f,normals:d,verticesArrayBuffer:p,normalsArrayBuffer:h,featureIDToVertexIndex:n,breakpoints:t}}function u(e){var t=o+e;if(t>a.vertices.length){var n=2*t;a.vertices=Object(r.resizeBuffer)(a.vertices,n),a.normals=Object(r.resizeBuffer)(a.normals,n)}}},"./src/renderer/decoder/pointDecoder.js":
/*!**********************************************!*\
  !*** ./src/renderer/decoder/pointDecoder.js ***!
  \**********************************************/
/*! exports provided: decodePoint */function(e,t,n){"use strict";function r(e){return{verticesArrayBuffer:e,vertices:new Float32Array(e),breakpoints:[]}}n.r(t),n.d(t,"decodePoint",function(){return r})},"./src/renderer/decoder/polygonDecoder.js":
/*!************************************************!*\
  !*** ./src/renderer/decoder/polygonDecoder.js ***!
  \************************************************/
/*! exports provided: decodePolygon */function(e,t,n){"use strict";n.r(t),n.d(t,"decodePolygon",function(){return l});var r=n(/*! earcut */"./node_modules/earcut/src/earcut.js"),i=n(/*! ./common */"./src/renderer/decoder/common.js"),o=2,a=24,s=0,u={vertices:new Float32Array(2097152),normals:new Float32Array(2097152)};function l(e){var t=[],n=new Map;s=0;for(var l=0;l<e.length;l++){for(var f=e[l],d=function(e){var t=f[e],n=r(t.flat,t.holes);c(o*n.length+a*t.flat.length);for(var l=0;l<n.length;l++)p(t.flat,2*n[l]);s=Object(i.addLineString)(t.flat,u,s,!0,function(e){return t.holes.includes((e-2)/2)||h(t,e-4,e-2)})},m=0;m<f.length;m++)d(m);n.set(t.length,0===t.length?{start:0,end:s}:{start:n.get(t.length-1).end,end:s}),t.push(s)}for(var _=new ArrayBuffer(4*s),y=new ArrayBuffer(4*s),v=new Float32Array(_),g=new Float32Array(y),b=0;b<s;b++)v[b]=u.vertices[b],g[b]=u.normals[b];return{vertices:v,normals:g,verticesArrayBuffer:_,normalsArrayBuffer:y,featureIDToVertexIndex:n,breakpoints:t}}function c(e){var t=s+e;if(t>u.vertices.length){var n=2*t;u.vertices=Object(i.resizeBuffer)(u.vertices,n),u.normals=Object(i.resizeBuffer)(u.normals,n)}}function p(e,t){u.vertices[s]=e[t],u.normals[s++]=0,u.vertices[s]=e[t+1],u.normals[s++]=0}function h(e,t,n){return!!(e.clipped.includes(t)&&e.clipped.includes(n)&&e.clippedType[e.clipped.indexOf(t)]&e.clippedType[e.clipped.indexOf(n)])}},"./src/renderer/schema.js":
/*!********************************!*\
  !*** ./src/renderer/schema.js ***!
  \********************************/
/*! exports provided: IDENTITY, union, equals, CLUSTER_FEATURE_COUNT, column, default */function(e,t,n){"use strict";n.r(t),n.d(t,"IDENTITY",function(){return o}),n.d(t,"union",function(){return a}),n.d(t,"equals",function(){return s}),n.d(t,"CLUSTER_FEATURE_COUNT",function(){return c}),n.d(t,"column",function(){return p});var r=n(/*! @babel/runtime/helpers/toConsumableArray */"./node_modules/@babel/runtime/helpers/toConsumableArray.js"),i=n.n(r),o={};function a(e,t){var n={};return new Set(Object.keys(e).concat(Object.keys(t))).forEach(function(r){var o=e[r]||[],a=t[r]||[],s=i()(o).concat(i()(a));n[r]=s}),n}function s(e,t){return!(!e||!t)&&JSON.stringify(u(e))===JSON.stringify(u(t))}function u(e){var t={};return Object.keys(e).sort().forEach(function(n){var r=i()(new Set(e[n].map(function(e){return JSON.stringify(e)})));r.sort(),r=r.map(function(e){return JSON.parse(e)}),t[n]=r}),t}var l=new RegExp("^_cdb_agg_[a-zA-Z0-9]+_"),c="_cdb_feature_count",p={isAggregated:function(e){return e.startsWith("_cdb_agg_")},getBase:function(e){return e.replace(l,"")},getAggFN:function(e){var t=e.substr("_cdb_agg_".length);return t.substr(0,t.indexOf("_"))},aggColumn:function(e,t){return"".concat("_cdb_agg_").concat(t,"_").concat(e)}};t.default={column:p,equals:s,union:a,IDENTITY:o,simplify:u}},"./src/renderer/shaders/Cache.js":
/*!***************************************!*\
  !*** ./src/renderer/shaders/Cache.js ***!
  \***************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return s});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=function(){function e(){i()(this,e),this.caches=new WeakMap}return a()(e,[{key:"get",value:function(e,t){if(this.caches.has(e))return this.caches.get(e)[t]}},{key:"set",value:function(e,t,n){if(this.caches.has(e)){this.caches.get(e)[t]=n}else{var r={};r[t]=n,this.caches.set(e,r)}}},{key:"has",value:function(e,t){return void 0!==this.get(e,t)}}]),e}()},"./src/renderer/shaders/common/antialiasing/AntiAliasingShader.js":
/*!************************************************************************!*\
  !*** ./src/renderer/shaders/common/antialiasing/AntiAliasingShader.js ***!
  \************************************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return c});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! ../../utils */"./src/renderer/shaders/utils.js"),a=n(/*! ./antialiasingFragmentShader.glsl */"./src/renderer/shaders/common/antialiasing/antialiasingFragmentShader.glsl"),s=n.n(a),u=n(/*! ./antialiasingVertexShader.glsl */"./src/renderer/shaders/common/antialiasing/antialiasingVertexShader.glsl"),l=n.n(u),c=function e(t){i()(this,e),Object.assign(this,Object(o.compileProgram)(t,l.a,s.a)),this.vertexAttribute=t.getAttribLocation(this.program,"vertex"),this.readTU=t.getUniformLocation(this.program,"aaTex")}},"./src/renderer/shaders/common/antialiasing/antialiasingFragmentShader.glsl":
/*!**********************************************************************************!*\
  !*** ./src/renderer/shaders/common/antialiasing/antialiasingFragmentShader.glsl ***!
  \**********************************************************************************/
/*! no static exports found */function(e,t){e.exports="precision highp float;\n\nvarying  vec2 uv;\n\nuniform sampler2D aaTex;\n\nvoid main(void) {\n    vec4 aa = texture2D(aaTex, uv);\n    gl_FragColor = aa;\n}\n"},"./src/renderer/shaders/common/antialiasing/antialiasingVertexShader.glsl":
/*!********************************************************************************!*\
  !*** ./src/renderer/shaders/common/antialiasing/antialiasingVertexShader.glsl ***!
  \********************************************************************************/
/*! no static exports found */function(e,t){e.exports="precision highp float;\nattribute vec2 vertex;\n\nvarying  vec2 uv;\n\nvoid main(void) {\n    uv = vertex*0.5+vec2(0.5);\n    gl_Position = vec4(vertex, 0.5, 1.);\n}\n"},"./src/renderer/shaders/geometry/line/lineFragmentShader.glsl":
/*!********************************************************************!*\
  !*** ./src/renderer/shaders/geometry/line/lineFragmentShader.glsl ***!
  \********************************************************************/
/*! no static exports found */function(e,t){e.exports="precision highp float;\n\nvarying lowp vec4 color;\n\nvoid main(void) {\n    gl_FragColor = color;\n}\n"},"./src/renderer/shaders/geometry/line/lineVertexShader.glsl":
/*!******************************************************************!*\
  !*** ./src/renderer/shaders/geometry/line/lineVertexShader.glsl ***!
  \******************************************************************/
/*! no static exports found */function(e,t){e.exports="// Line Vertex Shader\nprecision highp float;\n\nattribute vec2 vertexPosition;\nattribute vec2 featureID;\nattribute vec2 normal;\n\nuniform float normalScale;\nuniform vec2 resolution;\nuniform mat4 matrix;\n\nuniform sampler2D colorTex;\nuniform sampler2D widthTex;\nuniform sampler2D filterTex;\n\nvarying lowp vec4 color;\n\nfloat decodeWidth(vec2 enc) {\n  return enc.x*(255.*4.) + 4.*enc.y;\n}\n\n$propertyPreface\n$transform_preface\n\nvoid main(void) {\n    color = texture2D(colorTex, featureID);\n    float filtering = texture2D(filterTex, featureID).a;\n    color.a *= filtering;\n    color.rgb *= color.a;\n    float size = decodeWidth(texture2D(widthTex, featureID).rg);\n\n    // 64 is computed based on RTT_WIDTH and the depth buffer precision\n    // 64 = 2^(BUFFER_BITS)/RTT_WIDTH = 2^16/1024 = 64\n    float z = featureID.y * 63. / 64. + featureID.x / (64.);\n\n    // Set z range (-1, 1)\n    z = z * 2. - 1.;\n\n    vec2 n = normal*size*normalScale;\n    vec4 p =  matrix*vec4(vertexPosition+n, 0., 1.);\n    p/=p.w;\n\n    p.xy = $transform_inline(p.xy*resolution)/resolution;\n    if (size==0. || color.a==0.){\n        p.x=10000.;\n    }\n    p.z=z;\n    gl_Position  = p;\n}\n"},"./src/renderer/shaders/geometry/point/pointFragmentShader.glsl":
/*!**********************************************************************!*\
  !*** ./src/renderer/shaders/geometry/point/pointFragmentShader.glsl ***!
  \**********************************************************************/
/*! no static exports found */function(e,t){e.exports="precision highp float;\n\nvarying lowp vec4 color;\nvarying lowp vec4 stroke;\nvarying highp float dp;\nvarying highp float fillScale;\nvarying highp float strokeScale;\nvarying highp vec2 pointCoord;\n\nfloat distanceAntialias(vec2 p){\n    return 1. - smoothstep(1.-dp*1.4142, 1.+dp*1.4142, length(p));\n}\n\nvoid main(void) {\n    vec2 p = pointCoord;\n    vec4 c = color;\n\n    vec4 s = stroke;\n\n    c.a *= distanceAntialias(p*fillScale);\n    c.rgb*=c.a;\n\n    s.a *= distanceAntialias(p);\n    s.a *= 1.-distanceAntialias((strokeScale)*p);\n    s.rgb*=s.a;\n\n    c=s+(1.-s.a)*c;\n\n    gl_FragColor = c;\n}\n"},"./src/renderer/shaders/geometry/point/pointVertexShader.glsl":
/*!********************************************************************!*\
  !*** ./src/renderer/shaders/geometry/point/pointVertexShader.glsl ***!
  \********************************************************************/
/*! no static exports found */function(e,t){e.exports="precision highp float;\n\nattribute vec2 vertexPosition;\nattribute vec2 featureID;\n\nuniform float orderMinWidth;\nuniform float orderMaxWidth;\nuniform vec2 resolution;\nuniform mat4 matrix;\n\nuniform sampler2D colorTex;\nuniform sampler2D widthTex;\nuniform sampler2D strokeColorTex;\nuniform sampler2D strokeWidthTex;\nuniform sampler2D filterTex;\n//TODO order bucket texture\n\nvarying highp vec4 color;\nvarying highp vec4 stroke;\nvarying highp float dp;\nvarying highp float fillScale;\nvarying highp float strokeScale;\nvarying highp vec2 pointCoord;\n\nfloat decodeWidth(vec2 enc) {\n  return enc.x*(255.*4.) + 4.*enc.y;\n}\n\n$propertyPreface\n$transform_preface\n\nvec2 transform(vec2 p){\n    return $transform_inline(p*resolution*0.5)/resolution*2.;\n}\n\nvoid main(void) {\n  color = texture2D(colorTex, abs(featureID));\n  stroke = texture2D(strokeColorTex, abs(featureID));\n  float filtering = texture2D(filterTex, abs(featureID)).a;\n  color.a *= filtering;\n  stroke.a *= filtering;\n  float size = decodeWidth(texture2D(widthTex, abs(featureID)).rg);\n  float fillSize = size;\n  float strokeSize = decodeWidth(texture2D(strokeWidthTex, abs(featureID)).rg);\n  size += strokeSize;\n  fillScale = min(size / fillSize, 1.);\n  strokeScale = size / max(0.001, (fillSize - strokeSize));\n  if (fillScale == strokeScale) {\n    stroke.a = 0.;\n  }\n  dp = 1.0 / (size + 1.);\n  float sizeNormalizer = (size +1.)/size;\n\n  vec4 p =  matrix*vec4(vertexPosition, 0., 1.);\n  p/=p.w;\n  vec2 size2 = (2.*size+4.)/resolution;\n\n    if (featureID.y<0.){\n        pointCoord = vec2(0.866025, -0.5)*2.*sizeNormalizer;\n        p.xy += transform(size2*vec2(0.866025, -0.5));\n    }else if (featureID.x<0.){\n        pointCoord = vec2(-0.866025, -0.5)*2.*sizeNormalizer;\n        p.xy += transform(size2*vec2(-0.866025, -0.5));\n    }else{\n        pointCoord = vec2(0., 1.)*2.*sizeNormalizer;\n        p.xy += transform(vec2(0.,size2.y));\n    }\n\n  if (size == 0. || (stroke.a == 0. && color.a == 0.) || size < orderMinWidth || size >= orderMaxWidth) {\n    p.z = p.w*2.;\n  }\n\n  gl_Position = p;\n}\n"},"./src/renderer/shaders/geometry/polygon/polygonFragmentShader.glsl":
/*!**************************************************************************!*\
  !*** ./src/renderer/shaders/geometry/polygon/polygonFragmentShader.glsl ***!
  \**************************************************************************/
/*! no static exports found */function(e,t){e.exports="precision lowp float;\n\nvarying lowp vec4 color;\n\nvoid main(void) {\n    gl_FragColor = color;\n}\n"},"./src/renderer/shaders/geometry/polygon/polygonVertexShader.glsl":
/*!************************************************************************!*\
  !*** ./src/renderer/shaders/geometry/polygon/polygonVertexShader.glsl ***!
  \************************************************************************/
/*! no static exports found */function(e,t){e.exports="precision mediump float;\n\nattribute vec2 vertexPosition;\nattribute vec2 featureID;\nattribute vec2 normal;\n\nuniform float normalScale;\nuniform vec2 resolution;\n\nuniform sampler2D colorTex;\nuniform sampler2D strokeColorTex;\nuniform sampler2D strokeWidthTex;\nuniform sampler2D filterTex;\nuniform mat4 matrix;\n\nvarying lowp vec4 color;\n\nfloat decodeWidth(vec2 enc) {\n  return enc.x*(255.*4.) + 4.*enc.y;\n}\n\n$propertyPreface\n$transform_preface\n\nvoid main(void) {\n    // 64 is computed based on RTT_WIDTH and the depth buffer precision\n    // 64 = 2^(BUFFER_BITS)/RTT_WIDTH = 2^16/1024 = 64\n    float z = featureID.y * 63. / 64. + featureID.x / 64.;\n\n    vec4 c;\n    if (normal == vec2(0.)){\n        c = texture2D(colorTex, featureID);\n    }else{\n        z = mod(z + (z > 0.5 ? -1./64. : 1./64.), 1.);\n        c = texture2D(strokeColorTex, featureID);\n    }\n    z = 2.*z - 1.;\n    float filtering = texture2D(filterTex, featureID).a;\n    c.a *= filtering;\n    float size = decodeWidth(texture2D(strokeWidthTex, featureID).rg);\n\n    vec2 n = normal*size*normalScale;\n    vec4 p =  matrix*vec4(vertexPosition+n, 0., 1.);\n    p/=p.w;\n\n    p.xy = $transform_inline(p.xy*resolution*0.5)/resolution*2.;\n\n    if (c.a==0.){\n        p.x=10000.;\n    }\n    p.z=z;\n    color = vec4(c.rgb*c.a, c.a);\n    gl_Position  = p;\n}\n"},"./src/renderer/shaders/index.js":
/*!***************************************!*\
  !*** ./src/renderer/shaders/index.js ***!
  \***************************************/
/*! exports provided: styler, symbolizer, AABlender, default */function(e,t,n){"use strict";n.r(t),n.d(t,"AABlender",function(){return a});var r=n(/*! ./common/antialiasing/AntiAliasingShader */"./src/renderer/shaders/common/antialiasing/AntiAliasingShader.js"),i=n(/*! ./styler/stylerShaders */"./src/renderer/shaders/styler/stylerShaders.js");n.d(t,"styler",function(){return i});var o=n(/*! ./symbolizer/symbolizerShaders */"./src/renderer/shaders/symbolizer/symbolizerShaders.js");n.d(t,"symbolizer",function(){return o});var a=r.default;t.default={styler:i,symbolizer:o,AABlender:a}},"./src/renderer/shaders/shaderCompiler.js":
/*!************************************************!*\
  !*** ./src/renderer/shaders/shaderCompiler.js ***!
  \************************************************/
/*! exports provided: compileShader */function(e,t,n){"use strict";n.r(t),n.d(t,"compileShader",function(){return l});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! ./utils */"./src/renderer/shaders/utils.js"),u=function(){function e(){i()(this,e),this._ids=new Map}return a()(e,[{key:"getID",value:function(e){if(this._ids.has(e))return this._ids.get(e);var t=this._ids.size;return this._ids.set(e,t),t}}]),e}();function l(e,t,n,r){var i={},o=function(e){return void 0===i[e]&&(i[e]=Object.keys(i).length),"texture2D(propertyTex".concat(i[e],", abs(featureID)).a")},a={},l=new u;Object.keys(n).forEach(function(e){var t=n[e];t._setUID(l);var r=t._applyToShaderSource(o);a[e+"_preface"]=r.preface,a[e+"_inline"]=r.inline}),a.propertyPreface=Object.keys(i).map(function(e){return"uniform sampler2D propertyTex".concat(i[e],";")}).join("\n");var c=Object(s.createShaderFromTemplate)(e,t,a);return Object.keys(i).map(function(t){i[t]=e.getUniformLocation(c.program,"propertyTex".concat(i[t]))}),Object.values(n).forEach(function(t){t._postShaderCompile(c.program,e)}),c.textureIds||(c.textureIds=new Map),c.textureIds.set(r,i),c._codes=a,c._template=t,c}},"./src/renderer/shaders/styler/stylerEncodeWidth.glsl":
/*!************************************************************!*\
  !*** ./src/renderer/shaders/styler/stylerEncodeWidth.glsl ***!
  \************************************************************/
/*! no static exports found */function(e,t){e.exports="vec2 encodeWidth(float x) {\n    if (!(x<=0. || x>=0.) ){\n        // Convert NaN widths to `0`\n        // Do not remove this, some GPUs will convert NaN floats to 1. when\n        // packing the shader output to a RGBA UNSIGNED BYTE textures\n        x = 0.;\n    }\n    float high, low;\n    x = clamp(x, 0., 1023.);\n    high = floor(x/4.);\n    low = (x-high*4.)/4.;\n    return vec2(high/255., low);\n}\n\n$width_preface\n"},"./src/renderer/shaders/styler/stylerFragmentShader.glsl":
/*!***************************************************************!*\
  !*** ./src/renderer/shaders/styler/stylerFragmentShader.glsl ***!
  \***************************************************************/
/*! no static exports found */function(e,t){e.exports="precision highp float;\n\nvarying vec2 uv;\n\nvec2 featureID;\n\n$propertyPreface\n$style_preface\n\nvoid main(void) {\n    featureID = abs(uv);\n    gl_FragColor = $style_inline;\n}\n"},"./src/renderer/shaders/styler/stylerShaders.js":
/*!******************************************************!*\
  !*** ./src/renderer/shaders/styler/stylerShaders.js ***!
  \******************************************************/
/*! exports provided: colorShaderGLSL, filterShaderGLSL, widthShaderGLSL */function(e,t,n){"use strict";n.r(t),n.d(t,"colorShaderGLSL",function(){return l}),n.d(t,"filterShaderGLSL",function(){return c}),n.d(t,"widthShaderGLSL",function(){return p});var r=n(/*! ./stylerEncodeWidth.glsl */"./src/renderer/shaders/styler/stylerEncodeWidth.glsl"),i=n.n(r),o=n(/*! ./stylerFragmentShader.glsl */"./src/renderer/shaders/styler/stylerFragmentShader.glsl"),a=n.n(o),s=n(/*! ./stylerVertexShader.glsl */"./src/renderer/shaders/styler/stylerVertexShader.glsl"),u=n.n(s),l={vertexShader:"".concat(u.a),fragmentShader:"".concat(a.a).replace("$style_inline","$color_inline").replace("$style_preface","$color_preface")},c={vertexShader:"".concat(u.a),fragmentShader:"".concat(a.a).replace("$style_inline","vec4($filter_inline)").replace("$style_preface","$filter_preface")},p={vertexShader:"".concat(u.a),fragmentShader:"".concat(a.a).replace("$style_inline","vec4(encodeWidth($width_inline), vec2(0.))").replace("$style_preface","".concat(i.a))}},"./src/renderer/shaders/styler/stylerVertexShader.glsl":
/*!*************************************************************!*\
  !*** ./src/renderer/shaders/styler/stylerVertexShader.glsl ***!
  \*************************************************************/
/*! no static exports found */function(e,t){e.exports="precision highp float;\nattribute vec2 vertex;\n\nvarying  vec2 uv;\n\nvoid main(void) {\n    uv = vertex*0.5+vec2(0.5);\n    gl_Position = vec4(vertex, 0.5, 1.);\n}\n"},"./src/renderer/shaders/symbolizer/symbolizerFragmentShader.glsl":
/*!***********************************************************************!*\
  !*** ./src/renderer/shaders/symbolizer/symbolizerFragmentShader.glsl ***!
  \***********************************************************************/
/*! no static exports found */function(e,t){e.exports="precision highp float;\n\nvarying highp vec2 featureIDVar;\nvarying highp vec4 color;\nvarying highp vec2 pointCoord;\nvarying highp float filtering;\n\n$symbol_preface\n$propertyPreface\n\nvoid main(void) {\n    vec2 featureID = abs(featureIDVar);\n    vec2 imageUV = pointCoord*0.5+vec2(0.5);\n    vec4 symbolColor = $symbol_inline;\n    vec4 noOverrideColor = vec4(0.);\n\n    vec4 c;\n    if (color != noOverrideColor){\n        c = color * vec4(vec3(1), symbolColor.a);\n    }else{\n        c = symbolColor;\n    }\n    c.a *= filtering;\n    if (imageUV!=clamp(imageUV, 0.,1.)){\n        c.a = 0.;\n    }\n\n    gl_FragColor = vec4(c.rgb*c.a, c.a);\n}\n"},"./src/renderer/shaders/symbolizer/symbolizerShaders.js":
/*!**************************************************************!*\
  !*** ./src/renderer/shaders/symbolizer/symbolizerShaders.js ***!
  \**************************************************************/
/*! exports provided: symbolShaderGLSL */function(e,t,n){"use strict";n.r(t),n.d(t,"symbolShaderGLSL",function(){return a});var r=n(/*! ./symbolizerFragmentShader.glsl */"./src/renderer/shaders/symbolizer/symbolizerFragmentShader.glsl"),i=n.n(r),o=n(/*! ./symbolizerVertexShader.glsl */"./src/renderer/shaders/symbolizer/symbolizerVertexShader.glsl"),a={vertexShader:"".concat(n.n(o).a),fragmentShader:"".concat(i.a)}},"./src/renderer/shaders/symbolizer/symbolizerVertexShader.glsl":
/*!*********************************************************************!*\
  !*** ./src/renderer/shaders/symbolizer/symbolizerVertexShader.glsl ***!
  \*********************************************************************/
/*! no static exports found */function(e,t){e.exports="precision highp float;\n\nattribute vec2 vertexPosition;\nattribute vec2 featureID;\n\nuniform float orderMinWidth;\nuniform float orderMaxWidth;\nuniform float devicePixelRatio;\nuniform vec2 resolution;\nuniform mat4 matrix;\n\nuniform sampler2D colorTex;\nuniform sampler2D widthTex;\nuniform sampler2D filterTex;\n//TODO order bucket texture\n\nvarying highp vec2 featureIDVar;\nvarying highp vec4 color;\nvarying highp vec2 pointCoord;\nvarying highp float filtering;\n\nfloat decodeWidth(vec2 enc) {\n  return enc.x*(255.*4.) + 4.*enc.y;\n}\n\n$symbolPlacement_preface\n$propertyPreface\n$transform_preface\n\nvec2 transform(vec2 p){\n    return $transform_inline(p*resolution)/resolution;\n}\n\nvoid main(void) {\n    featureIDVar = abs(featureID);\n    color = texture2D(colorTex, abs(featureID));\n    filtering = texture2D(filterTex, abs(featureID)).a;\n\n    float size = decodeWidth(texture2D(widthTex, abs(featureID)).rg);\n    float fillSize = size;\n\n    vec4 p =  matrix*vec4(vertexPosition, 0., 1.);\n    p/=p.w;\n    float sizeNormalizer = (size +2.)/size;\n    vec2 size2 = (2.*size+4.)/resolution;\n\n    if (featureID.y<0.){\n        pointCoord = vec2(0.866025, -0.5)*2.*sizeNormalizer;\n        p.xy += transform(size2*vec2(0.866025, -0.5));\n    }else if (featureID.x<0.){\n        pointCoord = vec2(-0.866025, -0.5)*2.*sizeNormalizer;\n        p.xy += transform(size2*vec2(-0.866025, -0.5));\n    }else{\n        pointCoord = vec2(0., 1.)*2.*sizeNormalizer;\n        p.xy += transform(vec2(0.,size2.y));\n    }\n    pointCoord.y = -pointCoord.y;\n\n\n    p.xy += ($symbolPlacement_inline)*size/resolution;\n\n\n    vec4 noOverrideColor = vec4(0.);\n    if (size==0. || (color.a==0. && color != noOverrideColor) || size<orderMinWidth || size>=orderMaxWidth){\n        p.x=10000.;\n    }\n\n    gl_Position  = p;\n}\n"},"./src/renderer/shaders/utils.js":
/*!***************************************!*\
  !*** ./src/renderer/shaders/utils.js ***!
  \***************************************/
/*! exports provided: compileProgram, createShaderFromTemplate */function(e,t,n){"use strict";n.r(t),n.d(t,"compileProgram",function(){return u}),n.d(t,"createShaderFromTemplate",function(){return c});var r=n(/*! ./Cache */"./src/renderer/shaders/Cache.js"),i=n(/*! ../../errors/carto-runtime-error */"./src/errors/carto-runtime-error.js"),o=1,a=new r.default,s=new r.default;function u(e,t,n){var r=t+n;if(s.has(e,r))return s.get(e,r);var a={},u=l(e,t,e.VERTEX_SHADER),c=l(e,n,e.FRAGMENT_SHADER);if(a.program=e.createProgram(),e.attachShader(a.program,u),e.attachShader(a.program,c),e.linkProgram(a.program),e.deleteShader(u),e.deleteShader(c),!e.getProgramParameter(a.program,e.LINK_STATUS))throw new i.default("".concat(i.CartoRuntimeTypes.WEB_GL," Unable to link the shader program: ").concat(e.getProgramInfoLog(a.program),"."));return a.programID=o++,s.set(e,r,a),a}function l(e,t,n){if(a.has(e,t))return a.get(e,t);var r=e.createShader(n);if(e.shaderSource(r,t),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS)){var o=e.getShaderInfoLog(r);throw e.deleteShader(r),new i.default("".concat(i.CartoRuntimeTypes.WEB_GL," An error occurred compiling the shaders: ").concat(o,"\nSource:\n").concat(t))}return a.set(e,t,r),r}function c(e,t,n){var r=t.vertexShader,i=t.fragmentShader;Object.keys(n).forEach(function(e){r=r.replace("$"+e,n[e]),i=i.replace("$"+e,n[e])});var o=u(e,r,i);return o.vertexPositionAttribute=e.getAttribLocation(o.program,"vertexPosition"),o.featureIdAttr=e.getAttribLocation(o.program,"featureID"),o.normalAttr=e.getAttribLocation(o.program,"normal"),o.colorTexture=e.getUniformLocation(o.program,"colorTex"),o.strokeColorTexture=e.getUniformLocation(o.program,"strokeColorTex"),o.strokeWidthTexture=e.getUniformLocation(o.program,"strokeWidthTex"),o.widthTexture=e.getUniformLocation(o.program,"widthTex"),o.orderMinWidth=e.getUniformLocation(o.program,"orderMinWidth"),o.orderMaxWidth=e.getUniformLocation(o.program,"orderMaxWidth"),o.filterTexture=e.getUniformLocation(o.program,"filterTex"),o.normalScale=e.getUniformLocation(o.program,"normalScale"),o.resolution=e.getUniformLocation(o.program,"resolution"),o.matrix=e.getUniformLocation(o.program,"matrix"),o}},"./src/renderer/viz/colorspaces.js":
/*!*****************************************!*\
  !*** ./src/renderer/viz/colorspaces.js ***!
  \*****************************************/
/*! exports provided: sRGBToCielab, cielabToSRGB, interpolateRGBAinCieLAB */function(e,t,n){"use strict";n.r(t),n.d(t,"sRGBToCielab",function(){return i}),n.d(t,"cielabToSRGB",function(){return o}),n.d(t,"interpolateRGBAinCieLAB",function(){return a});var r=n(/*! ./expressions/utils */"./src/renderer/viz/expressions/utils.js");function i(e){return function(e){var t=e.x,n=e.y,r=e.z,i=e.a,o=s,a=u,c=l,p=function(e){return e>=.008856451679035631?Math.pow(e,.333333333333333):841/108*e+4/29};return{l:116*p(n/a)-16,a:500*(p(t/o)-p(n/a)),b:200*(p(n/a)-p(r/c)),alpha:i}}(function(e){var t=function(e){var t=e.r,n=e.g,r=e.b,i=e.a,o=function(e){return e<=.0404482362771076?e/12.92:Math.pow((e+.055)/1.055,2.4)};return{r:o(t),g:o(n),b:o(r),a:i}}(e),n=t.r,r=t.g,i=t.b,o=t.a;return{x:.41239558896741424*n+.3575834307637148*r+.18049264738170157*i,y:.21258623078559555*n+.7151703037034108*r+.07220049864333623*i,z:.019297215491746945*n+.11918386458084854*r+.9504971251315798*i,a:o}}(e))}function o(e){return function(e){var t=e.x,n=e.y,i=e.z,o=e.a,a=Object(r.clamp)(3.2406*t-1.5372*n-.4986*i,0,1),s=Object(r.clamp)(-.9689*t+1.8758*n+.0415*i,0,1),u=Object(r.clamp)(.0557*t-.204*n+1.057*i,0,1);return function(e){var t=e.r,n=e.g,r=e.b,i=e.a,o=function(e){return e<=.0031306684425005883?12.92*e:1.055*Math.pow(e,.4166666666666667)-.055};return{r:o(t),g:o(n),b:o(r),a:i}}({r:a,g:s,b:u,a:o})}((n=(t=e).l,i=t.a,o=t.b,a=t.alpha,{x:s*(c=function(e){return e>=.20689655172413793?e*e*e:108/841*(e-4/29)})((n+16)/116+i/500),y:u*c((n+16)/116),z:l*c((n+16)/116-o/200),a:a}));var t,n,i,o,a,c}function a(e,t,n){var r=i({r:e.r/255,g:e.g/255,b:e.b/255,a:e.a}),a=i({r:t.r/255,g:t.g/255,b:t.b/255,a:t.a}),s=o({l:(1-n)*r.l+n*a.l,a:(1-n)*r.a+n*a.a,b:(1-n)*r.b+n*a.b,alpha:(1-n)*r.alpha+n*a.alpha});return{r:Math.round(255*s.r),g:Math.round(255*s.g),b:Math.round(255*s.b),a:s.a}}var s=.950456,u=1,l=1.088754},"./src/renderer/viz/defaultSVGs.js":
/*!*****************************************!*\
  !*** ./src/renderer/viz/defaultSVGs.js ***!
  \*****************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t);var r=n(/*! ./svgs/bicycle.svg */"./src/renderer/viz/svgs/bicycle.svg"),i=n.n(r),o=n(/*! ./svgs/building.svg */"./src/renderer/viz/svgs/building.svg"),a=n.n(o),s=n(/*! ./svgs/bus.svg */"./src/renderer/viz/svgs/bus.svg"),u=n.n(s),l=n(/*! ./svgs/car.svg */"./src/renderer/viz/svgs/car.svg"),c=n.n(l),p=n(/*! ./svgs/circle.svg */"./src/renderer/viz/svgs/circle.svg"),h=n.n(p),f=n(/*! ./svgs/circleOutline.svg */"./src/renderer/viz/svgs/circleOutline.svg"),d=n.n(f),m=n(/*! ./svgs/cross.svg */"./src/renderer/viz/svgs/cross.svg"),_=n.n(m),y=n(/*! ./svgs/house.svg */"./src/renderer/viz/svgs/house.svg"),v=n.n(y),g=n(/*! ./svgs/flag.svg */"./src/renderer/viz/svgs/flag.svg"),b=n.n(g),x=n(/*! ./svgs/marker.svg */"./src/renderer/viz/svgs/marker.svg"),w=n.n(x),E=n(/*! ./svgs/markerOutline.svg */"./src/renderer/viz/svgs/markerOutline.svg"),T=n.n(E),k=n(/*! ./svgs/plus.svg */"./src/renderer/viz/svgs/plus.svg"),C=n.n(k),M=n(/*! ./svgs/square.svg */"./src/renderer/viz/svgs/square.svg"),P=n.n(M),A=n(/*! ./svgs/squareOutline.svg */"./src/renderer/viz/svgs/squareOutline.svg"),S=n.n(A),O=n(/*! ./svgs/star.svg */"./src/renderer/viz/svgs/star.svg"),I=n.n(O),R=n(/*! ./svgs/starOutline.svg */"./src/renderer/viz/svgs/starOutline.svg"),j=n.n(R),L=n(/*! ./svgs/triangle.svg */"./src/renderer/viz/svgs/triangle.svg"),z=n.n(L),D=n(/*! ./svgs/triangleOutline.svg */"./src/renderer/viz/svgs/triangleOutline.svg"),B=n.n(D);t.default={bicycle:i.a,building:a.a,bus:u.a,car:c.a,circle:h.a,circleOutline:d.a,cross:_.a,house:v.a,flag:b.a,marker:w.a,markerOutline:T.a,plus:C.a,square:P.a,squareOutline:S.a,star:I.a,starOutline:j.a,triangle:z.a,triangleOutline:B.a}},"./src/renderer/viz/expressions.js":
/*!*****************************************!*\
  !*** ./src/renderer/viz/expressions.js ***!
  \*****************************************/
/*! exports provided: transition, nin, in, between, mul, div, add, sub, pow, mod, greaterThan, greaterThanOrEqualTo, lessThan, lessThanOrEqualTo, equals, notEquals, and, or, gt, gte, lt, lte, eq, neq, blend, buckets, cielab, clusterAvg, clusterMax, clusterMin, clusterMode, clusterSum, clusterCount, constant, image, svg, hex, hsl, hsla, hsv, hsva, cubic, ilinear, linear, list, namedColor, now, number, opacity, asc, desc, noOrder, width, reverse, property, prop, globalQuantiles, viewportQuantiles, globalEqIntervals, viewportEqIntervals, globalStandardDev, viewportStandardDev, ramp, rgb, rgba, category, time, date, top, fade, animation, log, sqrt, sin, cos, tan, sign, abs, isNaN, not, floor, ceil, variable, var, viewportAvg, viewportMax, viewportMin, viewportSum, viewportCount, viewportPercentile, viewportHistogram, viewportFeatures, globalAvg, globalMax, globalMin, globalSum, globalCount, globalPercentile, zoom, scaled, zoomrange, placement, translate, rotate, alphaNormalize, HOLD, TRUE, FALSE, PI, E, BICYCLE, BUILDING, BUS, CAR, CIRCLE, CIRCLE_OUTLINE, CROSS, FLAG, HOUSE, MARKER, MARKER_OUTLINE, PLUS, SQUARE, SQUARE_OUTLINE, STAR, STAR_OUTLINE, TRIANGLE, TRIANGLE_OUTLINE, ALIGN_CENTER, ALIGN_BOTTOM, palettes, Asc, Desc */function(e,t,n){"use strict";n.r(t),n.d(t,"transition",function(){return ve}),n.d(t,"nin",function(){return be}),n.d(t,"in",function(){return ge}),n.d(t,"between",function(){return xe}),n.d(t,"mul",function(){return we}),n.d(t,"div",function(){return Ee}),n.d(t,"add",function(){return Te}),n.d(t,"sub",function(){return ke}),n.d(t,"pow",function(){return Ce}),n.d(t,"mod",function(){return Me}),n.d(t,"greaterThan",function(){return Pe}),n.d(t,"greaterThanOrEqualTo",function(){return Ae}),n.d(t,"lessThan",function(){return Se}),n.d(t,"lessThanOrEqualTo",function(){return Oe}),n.d(t,"equals",function(){return Ie}),n.d(t,"notEquals",function(){return Re}),n.d(t,"and",function(){return je}),n.d(t,"or",function(){return Le}),n.d(t,"gt",function(){return ze}),n.d(t,"gte",function(){return De}),n.d(t,"lt",function(){return Be}),n.d(t,"lte",function(){return Ne}),n.d(t,"eq",function(){return qe}),n.d(t,"neq",function(){return Fe}),n.d(t,"blend",function(){return Ue}),n.d(t,"buckets",function(){return Ve}),n.d(t,"cielab",function(){return We}),n.d(t,"clusterAvg",function(){return Ge}),n.d(t,"clusterMax",function(){return Ze}),n.d(t,"clusterMin",function(){return He}),n.d(t,"clusterMode",function(){return Ke}),n.d(t,"clusterSum",function(){return Ye}),n.d(t,"clusterCount",function(){return Xe}),n.d(t,"constant",function(){return $e}),n.d(t,"image",function(){return Je}),n.d(t,"svg",function(){return Qe}),n.d(t,"hex",function(){return et}),n.d(t,"hsl",function(){return tt}),n.d(t,"hsla",function(){return nt}),n.d(t,"hsv",function(){return rt}),n.d(t,"hsva",function(){return it}),n.d(t,"cubic",function(){return ot}),n.d(t,"ilinear",function(){return at}),n.d(t,"linear",function(){return st}),n.d(t,"list",function(){return ut}),n.d(t,"namedColor",function(){return lt}),n.d(t,"now",function(){return ct}),n.d(t,"number",function(){return pt}),n.d(t,"opacity",function(){return ht}),n.d(t,"asc",function(){return ft}),n.d(t,"desc",function(){return dt}),n.d(t,"noOrder",function(){return mt}),n.d(t,"width",function(){return _t}),n.d(t,"reverse",function(){return yt}),n.d(t,"property",function(){return vt}),n.d(t,"prop",function(){return vt}),n.d(t,"globalQuantiles",function(){return gt}),n.d(t,"viewportQuantiles",function(){return bt}),n.d(t,"globalEqIntervals",function(){return xt}),n.d(t,"viewportEqIntervals",function(){return wt}),n.d(t,"globalStandardDev",function(){return Et}),n.d(t,"viewportStandardDev",function(){return Tt}),n.d(t,"ramp",function(){return kt}),n.d(t,"rgb",function(){return Ct}),n.d(t,"rgba",function(){return Mt}),n.d(t,"category",function(){return Pt}),n.d(t,"time",function(){return At}),n.d(t,"date",function(){return At}),n.d(t,"top",function(){return St}),n.d(t,"fade",function(){return Ot}),n.d(t,"animation",function(){return It}),n.d(t,"log",function(){return Rt}),n.d(t,"sqrt",function(){return jt}),n.d(t,"sin",function(){return Lt}),n.d(t,"cos",function(){return zt}),n.d(t,"tan",function(){return Dt}),n.d(t,"sign",function(){return Bt}),n.d(t,"abs",function(){return Nt}),n.d(t,"isNaN",function(){return qt}),n.d(t,"not",function(){return Ft}),n.d(t,"floor",function(){return Ut}),n.d(t,"ceil",function(){return Vt}),n.d(t,"variable",function(){return Wt}),n.d(t,"var",function(){return Wt}),n.d(t,"viewportAvg",function(){return Gt}),n.d(t,"viewportMax",function(){return Zt}),n.d(t,"viewportMin",function(){return Ht}),n.d(t,"viewportSum",function(){return Kt}),n.d(t,"viewportCount",function(){return Yt}),n.d(t,"viewportPercentile",function(){return Xt}),n.d(t,"viewportHistogram",function(){return $t}),n.d(t,"viewportFeatures",function(){return Jt}),n.d(t,"globalAvg",function(){return Qt}),n.d(t,"globalMax",function(){return en}),n.d(t,"globalMin",function(){return tn}),n.d(t,"globalSum",function(){return nn}),n.d(t,"globalCount",function(){return rn}),n.d(t,"globalPercentile",function(){return on}),n.d(t,"zoom",function(){return an}),n.d(t,"scaled",function(){return sn}),n.d(t,"zoomrange",function(){return un}),n.d(t,"placement",function(){return ln}),n.d(t,"translate",function(){return cn}),n.d(t,"rotate",function(){return pn}),n.d(t,"alphaNormalize",function(){return hn}),n.d(t,"HOLD",function(){return fn}),n.d(t,"TRUE",function(){return dn}),n.d(t,"FALSE",function(){return mn}),n.d(t,"PI",function(){return _n}),n.d(t,"E",function(){return yn}),n.d(t,"BICYCLE",function(){return vn}),n.d(t,"BUILDING",function(){return gn}),n.d(t,"BUS",function(){return bn}),n.d(t,"CAR",function(){return xn}),n.d(t,"CIRCLE",function(){return wn}),n.d(t,"CIRCLE_OUTLINE",function(){return En}),n.d(t,"CROSS",function(){return Tn}),n.d(t,"FLAG",function(){return kn}),n.d(t,"HOUSE",function(){return Cn}),n.d(t,"MARKER",function(){return Mn}),n.d(t,"MARKER_OUTLINE",function(){return Pn}),n.d(t,"PLUS",function(){return An}),n.d(t,"SQUARE",function(){return Sn}),n.d(t,"SQUARE_OUTLINE",function(){return On}),n.d(t,"STAR",function(){return In}),n.d(t,"STAR_OUTLINE",function(){return Rn}),n.d(t,"TRIANGLE",function(){return jn}),n.d(t,"TRIANGLE_OUTLINE",function(){return Ln}),n.d(t,"ALIGN_CENTER",function(){return zn}),n.d(t,"ALIGN_BOTTOM",function(){return Dn});var r=n(/*! @babel/runtime/helpers/construct */"./node_modules/@babel/runtime/helpers/construct.js"),i=n.n(r),o=n(/*! ./expressions/transition */"./src/renderer/viz/expressions/transition.js"),a=n(/*! ./expressions/belongs */"./src/renderer/viz/expressions/belongs.js"),s=n(/*! ./expressions/between */"./src/renderer/viz/expressions/between.js"),u=n(/*! ./expressions/binary */"./src/renderer/viz/expressions/binary.js"),l=n(/*! ./expressions/blend */"./src/renderer/viz/expressions/blend.js"),c=n(/*! ./expressions/buckets */"./src/renderer/viz/expressions/buckets.js"),p=n(/*! ./expressions/basic/category */"./src/renderer/viz/expressions/basic/category.js"),h=n(/*! ./expressions/color/CIELab */"./src/renderer/viz/expressions/color/CIELab.js"),f=n(/*! ./expressions/aggregation/cluster/ClusterAvg */"./src/renderer/viz/expressions/aggregation/cluster/ClusterAvg.js"),d=n(/*! ./expressions/aggregation/cluster/ClusterMax */"./src/renderer/viz/expressions/aggregation/cluster/ClusterMax.js"),m=n(/*! ./expressions/aggregation/cluster/ClusterMin */"./src/renderer/viz/expressions/aggregation/cluster/ClusterMin.js"),_=n(/*! ./expressions/aggregation/cluster/ClusterMode */"./src/renderer/viz/expressions/aggregation/cluster/ClusterMode.js"),y=n(/*! ./expressions/aggregation/cluster/ClusterSum */"./src/renderer/viz/expressions/aggregation/cluster/ClusterSum.js"),v=n(/*! ./expressions/aggregation/cluster/ClusterCount */"./src/renderer/viz/expressions/aggregation/cluster/ClusterCount.js"),g=n(/*! ./expressions/basic/constant */"./src/renderer/viz/expressions/basic/constant.js"),b=n(/*! ./expressions/color/hex */"./src/renderer/viz/expressions/color/hex.js"),x=n(/*! ./expressions/color/hsl */"./src/renderer/viz/expressions/color/hsl.js"),w=n(/*! ./expressions/color/hsv */"./src/renderer/viz/expressions/color/hsv.js"),E=n(/*! ./expressions/interpolators */"./src/renderer/viz/expressions/interpolators.js"),T=n(/*! ./expressions/linear */"./src/renderer/viz/expressions/linear.js"),k=n(/*! ./expressions/color/NamedColor */"./src/renderer/viz/expressions/color/NamedColor.js"),C=n(/*! ./expressions/now */"./src/renderer/viz/expressions/now.js"),M=n(/*! ./expressions/basic/number */"./src/renderer/viz/expressions/basic/number.js"),P=n(/*! ./expressions/color/Opacity */"./src/renderer/viz/expressions/color/Opacity.js"),A=n(/*! ./expressions/ordering */"./src/renderer/viz/expressions/ordering.js");n.d(t,"Asc",function(){return A.Asc}),n.d(t,"Desc",function(){return A.Desc});var S=n(/*! ./expressions/color/palettes */"./src/renderer/viz/expressions/color/palettes.js");n.d(t,"palettes",function(){return S.default});var O=n(/*! ./expressions/reverse/reverse */"./src/renderer/viz/expressions/reverse/reverse.js"),I=n(/*! ./expressions/basic/property */"./src/renderer/viz/expressions/basic/property.js"),R=n(/*! ./expressions/classification/GlobalEqIntervals */"./src/renderer/viz/expressions/classification/GlobalEqIntervals.js"),j=n(/*! ./expressions/classification/GlobalQuantiles */"./src/renderer/viz/expressions/classification/GlobalQuantiles.js"),L=n(/*! ./expressions/classification/GlobalStandardDev */"./src/renderer/viz/expressions/classification/GlobalStandardDev.js"),z=n(/*! ./expressions/classification/ViewportEqIntervals */"./src/renderer/viz/expressions/classification/ViewportEqIntervals.js"),D=n(/*! ./expressions/classification/ViewportQuantiles */"./src/renderer/viz/expressions/classification/ViewportQuantiles.js"),B=n(/*! ./expressions/classification/ViewportStandardDev */"./src/renderer/viz/expressions/classification/ViewportStandardDev.js"),N=n(/*! ./expressions/Ramp */"./src/renderer/viz/expressions/Ramp.js"),q=n(/*! ./expressions/basic/List */"./src/renderer/viz/expressions/basic/List.js"),F=n(/*! ./expressions/color/rgb */"./src/renderer/viz/expressions/color/rgb.js"),U=n(/*! ./expressions/time */"./src/renderer/viz/expressions/time.js"),V=n(/*! ./expressions/top */"./src/renderer/viz/expressions/top.js"),W=n(/*! ./expressions/Fade */"./src/renderer/viz/expressions/Fade.js"),G=n(/*! ./expressions/Animation */"./src/renderer/viz/expressions/Animation.js"),Z=n(/*! ./expressions/unary */"./src/renderer/viz/expressions/unary.js"),H=n(/*! ./expressions/basic/variable */"./src/renderer/viz/expressions/basic/variable.js"),K=n(/*! ./expressions/aggregation/viewport/ViewportAvg */"./src/renderer/viz/expressions/aggregation/viewport/ViewportAvg.js"),Y=n(/*! ./expressions/aggregation/viewport/ViewportMax */"./src/renderer/viz/expressions/aggregation/viewport/ViewportMax.js"),X=n(/*! ./expressions/aggregation/viewport/ViewportMin */"./src/renderer/viz/expressions/aggregation/viewport/ViewportMin.js"),$=n(/*! ./expressions/aggregation/viewport/ViewportSum */"./src/renderer/viz/expressions/aggregation/viewport/ViewportSum.js"),J=n(/*! ./expressions/aggregation/viewport/ViewportCount */"./src/renderer/viz/expressions/aggregation/viewport/ViewportCount.js"),Q=n(/*! ./expressions/aggregation/viewport/ViewportPercentile */"./src/renderer/viz/expressions/aggregation/viewport/ViewportPercentile.js"),ee=n(/*! ./expressions/aggregation/viewport/ViewportHistogram */"./src/renderer/viz/expressions/aggregation/viewport/ViewportHistogram.js"),te=n(/*! ./expressions/aggregation/global/GlobalAvg */"./src/renderer/viz/expressions/aggregation/global/GlobalAvg.js"),ne=n(/*! ./expressions/aggregation/global/GlobalCount */"./src/renderer/viz/expressions/aggregation/global/GlobalCount.js"),re=n(/*! ./expressions/aggregation/global/GlobalMax */"./src/renderer/viz/expressions/aggregation/global/GlobalMax.js"),ie=n(/*! ./expressions/aggregation/global/GlobalMin */"./src/renderer/viz/expressions/aggregation/global/GlobalMin.js"),oe=n(/*! ./expressions/aggregation/global/GlobalSum */"./src/renderer/viz/expressions/aggregation/global/GlobalSum.js"),ae=n(/*! ./expressions/aggregation/global/GlobalPercentile */"./src/renderer/viz/expressions/aggregation/global/GlobalPercentile.js"),se=n(/*! ./expressions/viewportFeatures */"./src/renderer/viz/expressions/viewportFeatures.js"),ue=n(/*! ./expressions/zoom */"./src/renderer/viz/expressions/zoom.js"),le=n(/*! ./expressions/Placement */"./src/renderer/viz/expressions/Placement.js"),ce=n(/*! ./expressions/Image */"./src/renderer/viz/expressions/Image.js"),pe=n(/*! ./expressions/SVG */"./src/renderer/viz/expressions/SVG.js"),he=n(/*! ./defaultSVGs */"./src/renderer/viz/defaultSVGs.js"),fe=n(/*! ./expressions/Zoomrange */"./src/renderer/viz/expressions/Zoomrange.js"),de=n(/*! ./expressions/Scaled */"./src/renderer/viz/expressions/Scaled.js"),me=n(/*! ./expressions/AlphaNormalize */"./src/renderer/viz/expressions/AlphaNormalize.js"),_e=n(/*! ./expressions/transformation/Translate */"./src/renderer/viz/expressions/transformation/Translate.js"),ye=n(/*! ./expressions/transformation/Rotate */"./src/renderer/viz/expressions/transformation/Rotate.js"),ve=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(o.default,t)},ge=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(a.In,t)},be=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(a.Nin,t)},xe=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(s.default,t)},we=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(u.Mul,t)},Ee=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(u.Div,t)},Te=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(u.Add,t)},ke=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(u.Sub,t)},Ce=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(u.Pow,t)},Me=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(u.Mod,t)},Pe=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(u.GreaterThan,t)},Ae=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(u.GreaterThanOrEqualTo,t)},Se=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(u.LessThan,t)},Oe=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(u.LessThanOrEqualTo,t)},Ie=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(u.Equals,t)},Re=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(u.NotEquals,t)},je=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(u.And,t)},Le=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(u.Or,t)},ze=Pe,De=Ae,Be=Se,Ne=Oe,qe=Ie,Fe=Re,Ue=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(l.default,t)},Ve=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(c.default,t)},We=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(h.default,t)},Ge=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(f.default,t)},Ze=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(d.default,t)},He=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(m.default,t)},Ke=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(_.default,t)},Ye=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(y.default,t)},Xe=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(v.default,t)},$e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(g.default,t)},Je=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(ce.default,t)},Qe=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(pe.default,t)},et=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(b.default,t)},tt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(x.HSL,t)},nt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(x.HSLA,t)},rt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(w.HSV,t)},it=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(w.HSVA,t)},ot=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(E.Cubic,t)},at=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(E.ILinear,t)},st=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(T.default,t)},ut=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(q.default,t)},lt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(k.default,t)},ct=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(C.default,t)},pt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(M.default,t)},ht=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(P.default,t)},ft=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(A.Asc,t)},dt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(A.Desc,t)},mt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(A.NoOrder,t)},_t=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(A.Width,t)},yt=O.default,vt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(I.default,t)},gt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(j.default,t)},bt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(D.default,t)},xt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(R.default,t)},wt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(z.default,t)},Et=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(L.default,t)},Tt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(B.default,t)},kt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(N.default,t)},Ct=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(F.RGB,t)},Mt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(F.RGBA,t)},Pt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(p.default,t)},At=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(U.default,t)},St=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(V.default,t)},Ot=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(W.Fade,t)},It=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(G.Animation,t)},Rt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(Z.Log,t)},jt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(Z.Sqrt,t)},Lt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(Z.Sin,t)},zt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(Z.Cos,t)},Dt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(Z.Tan,t)},Bt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(Z.Sign,t)},Nt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(Z.Abs,t)},qt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(Z.IsNaN,t)},Ft=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(Z.Not,t)},Ut=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(Z.Floor,t)},Vt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(Z.Ceil,t)},Wt=function(){return H.default.apply(void 0,arguments)},Gt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(K.default,t)},Zt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(Y.default,t)},Ht=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(X.default,t)},Kt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()($.default,t)},Yt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(J.default,t)},Xt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(Q.default,t)},$t=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(ee.default,t)},Jt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(se.default,t)},Qt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(te.default,t)},en=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(re.default,t)},tn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(ie.default,t)},nn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(oe.default,t)},rn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(ne.default,t)},on=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(ae.default,t)},an=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(ue.default,t)},sn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(de.default,t)},un=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(fe.default,t)},ln=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(le.default,t)},cn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(_e.default,t)},pn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(ye.default,t)},hn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i()(me.default,t)},fn=new g.default(Number.MAX_SAFE_INTEGER),dn=new g.default(1),mn=new g.default(0),_n=new g.default(Math.PI),yn=new g.default(Math.E),vn=new pe.default(he.default.bicycle),gn=new pe.default(he.default.building),bn=new pe.default(he.default.bus),xn=new pe.default(he.default.car),wn=new pe.default(he.default.circle),En=new pe.default(he.default.circleOutline),Tn=new pe.default(he.default.cross),kn=new pe.default(he.default.flag),Cn=new pe.default(he.default.house),Mn=new pe.default(he.default.marker),Pn=new pe.default(he.default.markerOutline),An=new pe.default(he.default.plus),Sn=new pe.default(he.default.square),On=new pe.default(he.default.squareOutline),In=new pe.default(he.default.star),Rn=new pe.default(he.default.starOutline),jn=new pe.default(he.default.triangle),Ln=new pe.default(he.default.triangleOutline),zn=new le.default($e(0),$e(0)),Dn=new le.default($e(0),$e(1))},"./src/renderer/viz/expressions/AlphaNormalize.js":
/*!********************************************************!*\
  !*** ./src/renderer/viz/expressions/AlphaNormalize.js ***!
  \********************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return g});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/get */"./node_modules/@babel/runtime/helpers/get.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(f),m=n(/*! ./base */"./src/renderer/viz/expressions/base.js"),_=n(/*! ../expressions */"./src/renderer/viz/expressions.js"),y=n(/*! ./utils */"./src/renderer/viz/expressions/utils.js"),v=n(/*! ./basic/property */"./src/renderer/viz/expressions/basic/property.js"),g=function(e){function t(e,n){var r;return i()(this,t),Object(y.checkMaxArguments)(arguments,2,"alphaNormalize"),Object(y.checkExpression)("alphaNormalize","input",0,e),Object(y.checkExpression)("alphaNormalize","normalizer",1,n),(r=u()(this,c()(t).call(this,{_impostor:Object(_.opacity)(e,Object(_.div)(n,Object(_.globalMax)(n)))})))._input=e,r._normalizer=n,r.type="color",r.inlineMaker=function(e){return e._impostor},r}return d()(t,e),a()(t,[{key:"_bindMetadata",value:function(e){this._input._bindMetadata(e),this._normalizer._bindMetadata(e),Object(y.checkType)("alphaNormalize","input",0,"color",this._input),Object(y.checkType)("alphaNormalize","normalizer",1,"number",this._normalizer),Object(y.checkInstance)("alphaNormalize","normalizer",1,v.default,this._normalizer),h()(c()(t.prototype),"_bindMetadata",this).call(this,e)}},{key:"eval",value:function(e){return this._impostor.eval(e)}},{key:"value",get:function(){return this.eval()}}]),t}(m.default)},"./src/renderer/viz/expressions/Animation.js":
/*!***************************************************!*\
  !*** ./src/renderer/viz/expressions/Animation.js ***!
  \***************************************************/
/*! exports provided: Animation */function(e,t,n){"use strict";n.r(t),n.d(t,"Animation",function(){return k});var r=n(/*! @babel/runtime/helpers/toConsumableArray */"./node_modules/@babel/runtime/helpers/toConsumableArray.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/get */"./node_modules/@babel/runtime/helpers/get.js"),d=n.n(f),m=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),_=n.n(m),y=n(/*! ./base */"./src/renderer/viz/expressions/base.js"),v=n(/*! ./Fade */"./src/renderer/viz/expressions/Fade.js"),g=n(/*! ./utils */"./src/renderer/viz/expressions/utils.js"),b=n(/*! ../expressions */"./src/renderer/viz/expressions.js"),x=n(/*! ./basic/property */"./src/renderer/viz/expressions/basic/property.js"),w=n(/*! ../../../utils/util */"./src/utils/util.js"),E=new Set,T=new Set,k=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new v.Fade;a()(this,t),Object(g.checkMaxArguments)(arguments,3,"animation"),r=Object(g.implicitCast)(r);var o=e=Object(g.implicitCast)(e);e.isA(x.default)&&(e=Object(b.linear)(e,Object(b.globalMin)(e),Object(b.globalMax)(e)));var s=Object(b.number)(0);return(n=c()(this,h()(t).call(this,{_input:e,progress:s,fade:i,duration:r}))).type="number",n._originalInput=o,n._paused=!1,n.preface="\n        #ifndef ANIMATION\n        #define ANIMATION\n\n        float animation(float _input, float progress, float duration, float fadeIn, float fadeOut){\n            float x = 0.;\n\n            // Check for NaN\n            if (_input <= 0.0 || 0.0 <= _input){\n                x = 1. - clamp(abs(_input - progress) * duration / (_input > progress ? fadeIn: fadeOut), 0., 1.);\n            }\n\n            return x;\n        }\n\n        #endif\n    ",n.inlineMaker=function(e){return"animation(".concat(e._input,", ").concat(e.progress,", ").concat(e.duration,", ").concat(e.fade.in,", ").concat(e.fade.out,")")},n}return _()(t,e),u()(t,[{key:"isAnimated",value:function(){return!this.paused}},{key:"_dataReady",value:function(){if(E.has(this)&&(E.delete(this),T.add(this)),T.has(this)){if((E=new Set(i()(E).filter(function(e){for(;e.parent;)e=e.parent;return!!e._getRootExpressions}))).size>0)return;i()(T.values()).map(function(e){"default"===e._paused&&e.play()}),T.clear()}}},{key:"_postShaderCompile",value:function(e,n){E.add(this),this._paused||(this._paused="default"),d()(h()(t.prototype),"_postShaderCompile",this).call(this,e,n)}},{key:"_setTimestamp",value:function(e){if(d()(h()(t.prototype),"_setTimestamp",this).call(this,e),!this._paused||void 0!==this._lastTime){var n=0,r=1/this.duration.value;void 0!==this._lastTime&&(n=e-this._lastTime),this._lastTime=e,this._paused||(this.progress.expr=(this.progress.expr+r*n)%1)}}},{key:"eval",value:function(e){var t=this._input.eval(e);if(Number.isNaN(t))return 0;var n=this.progress.value,r=this.duration.value,i=this.fade.fadeIn.eval(e),o=this.fade.fadeOut.eval(e);return 1-Object(g.clamp)(Math.abs(t-n)*r/(t>n?i:o),0,1)}},{key:"getProgressValue",value:function(){var e=this.progress.eval(),t=this._input.min.eval(),n=this._input.max.eval();if(!(t instanceof Date))return e*(n-t)+t;var r=t.getTime(),i=n.getTime();return new Date((1-e)*r+i*e)}},{key:"setTimestamp",value:function(e){var t=Object(w.castDate)(e),n=this._input.min.eval(),r=this._input.max.eval();if(t.getTime()<n)throw new RangeError("animation.setTimestamp requires the date parameter to be higher than the lower limit");if(t.getTime()>r)throw new RangeError("animation.setTimestamp requires the date parameter to be lower than the higher limit");this.progress.expr=(t.getTime()-n)/(r-n)}},{key:"getProgressPct",value:function(){return this.progress.value}},{key:"setProgressPct",value:function(e){if((e=Number.parseFloat(e))<0||e>1)throw new TypeError("animation.setProgressPct requires a number between 0 and 1 as parameter but got: ".concat(e));this.progress.expr=e}},{key:"pause",value:function(){this._paused=!0}},{key:"play",value:function(){this._paused=!1}},{key:"stop",value:function(){this.progress.expr=0,this._paused=!0}},{key:"_bindMetadata",value:function(e){this._originalInput._bindMetadata(e),this.duration._bindMetadata(e),Object(g.checkType)("animation","input",0,["number","date"],this._originalInput),Object(g.checkType)("animation","duration",1,"number",this.duration),d()(h()(t.prototype),"_bindMetadata",this).call(this,e),Object(g.checkType)("animation","input",0,"number",this._input),Object(g.checkType)("animation","fade",2,"fade",this.fade),Object(g.checkFeatureIndependent)("animation","duration",1,this.duration)}}]),t}(y.default)},"./src/renderer/viz/expressions/CategoryIndex.js":
/*!*******************************************************!*\
  !*** ./src/renderer/viz/expressions/CategoryIndex.js ***!
  \*******************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return v});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/get */"./node_modules/@babel/runtime/helpers/get.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(f),m=n(/*! ./base */"./src/renderer/viz/expressions/base.js"),_=n(/*! ./utils */"./src/renderer/viz/expressions/utils.js"),y=256,v=function(e){function t(e){var n;return i()(this,t),Object(_.checkMaxArguments)(arguments,1,"categoryIndex"),e=Object(_.implicitCast)(e),Object(_.checkExpression)("categoryIndex","property",0,e),(n=u()(this,c()(t).call(this,{property:e})))._numTranslatedCategories=null,n.type="category",n._translatePixels=new Float32Array(y*y),n._translateArray=[],n._numTranslatedCategories=0,n._numTranslatedCategoriesGL=0,n}return d()(t,e),a()(t,[{key:"_bindMetadata",value:function(e){h()(c()(t.prototype),"_bindMetadata",this).call(this,e),Object(_.checkType)("categoryIndex","property",0,"category",this.property),this._metadata=e,this._calcTranslated()}},{key:"eval",value:function(e){var t=this.property.eval(e),n=this._metadata.categoryToID.get(t);return this._translateArray[n]}},{key:"_preDraw",value:function(e,t,n){n.activeTexture(n.TEXTURE0+t.freeTexUnit),this._numTranslatedCategoriesGL!==this.numCategories?(this._numTranslatedCategoriesGL=this.numCategories,this._calcTranslated(),this._translateTexture=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this._translateTexture),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),n.texImage2D(n.TEXTURE_2D,0,n.ALPHA,y,y,0,n.ALPHA,n.FLOAT,this._translatePixels),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE)):n.bindTexture(n.TEXTURE_2D,this._translateTexture),n.uniform1i(this._getBinding(e).texRampTranslateLoc,t.freeTexUnit),t.freeTexUnit++}},{key:"_applyToShaderSource",value:function(e){var t=y.toFixed(20),n=this.property._applyToShaderSource(e);return{inline:"ramp_translate".concat(this._uid,"(").concat(n.inline,")"),preface:"\n                    uniform sampler2D texRampTranslate".concat(this._uid,";\n                    float ramp_translate").concat(this._uid,"(float s){\n                        vec2 v = vec2(mod(s, ").concat(t,"), floor(s / ").concat(t,"));\n                        return texture2D(texRampTranslate").concat(this._uid,", v/").concat(t,").a;\n                    }")}}},{key:"_postShaderCompile",value:function(e,t){this._getBinding(e).texRampTranslateLoc=t.getUniformLocation(e,"texRampTranslate".concat(this._uid))}},{key:"_calcTranslated",value:function(){var e=this._metadata.properties[this.property.name],t=this.numCategories;if(this._numTranslatedCategories!==t){this._numTranslatedCategories=t;for(var n=0;n<t;n++){var r=this._metadata.categoryToID.get(e.categories[n].name),i=n/(t-1),o={x:r%y,y:Math.floor(r/y)};this._translatePixels[y*o.y+o.x]=i,this._translateArray.push(i)}}}},{key:"_getLegendData",value:function(){for(var e=this._metadata.properties[this.property.name].categories,t=e.length,n=t-1,r=[],i=0;i<t;i++){var o=e[i].name,a=i/n;r.push({key:o,value:a})}return{data:r}}},{key:"numCategories",get:function(){return this._metadata.properties[this.property.name].categories.length}},{key:"numCategoriesWithoutOthers",get:function(){return this.numCategories}}]),t}(m.default)},"./src/renderer/viz/expressions/Fade.js":
/*!**********************************************!*\
  !*** ./src/renderer/viz/expressions/Fade.js ***!
  \**********************************************/
/*! exports provided: Fade */function(e,t,n){"use strict";n.r(t),n.d(t,"Fade",function(){return g});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/get */"./node_modules/@babel/runtime/helpers/get.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(f),m=n(/*! ./base */"./src/renderer/viz/expressions/base.js"),_=n(/*! ./utils */"./src/renderer/viz/expressions/utils.js"),y=.15,v=void 0,g=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v;i()(this,t),Object(_.checkMaxArguments)(arguments,2,"fade");var o=n===v?Object(_.implicitCast)(y):Object(_.implicitCast)(n),a=r===v?o:Object(_.implicitCast)(r);return Object(_.checkExpression)("fade","param1",0,o),Object(_.checkExpression)("fade","param2",1,a),(e=u()(this,c()(t).call(this,{fadeIn:o,fadeOut:a}))).type="fade",e.inlineMaker=function(e){return{in:e.fadeIn,out:e.fadeOut}},e}return d()(t,e),a()(t,[{key:"_bindMetadata",value:function(e){h()(c()(t.prototype),"_bindMetadata",this).call(this,e),Object(_.checkType)("fade","param1",0,"number",this.fadeIn),Object(_.checkType)("fade","param2",1,"number",this.fadeOut)}}]),t}(m.default)},"./src/renderer/viz/expressions/Image.js":
/*!***********************************************!*\
  !*** ./src/renderer/viz/expressions/Image.js ***!
  \***********************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return m});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),h=n.n(p),f=n(/*! ./base */"./src/renderer/viz/expressions/base.js"),d=n(/*! ./utils */"./src/renderer/viz/expressions/utils.js"),m=function(e){function t(e){var n;return i()(this,t),Object(d.checkMaxArguments)(arguments,1,"image"),Object(d.checkString)("image","url",0,e),(n=u()(this,c()(t).call(this,{}))).type="image",n.canvas=null,n.url=e,n._promise=new Promise(function(e,t){n.image=new window.Image,n.image.onload=function(){n.canvas=function(e){var t=document.createElement("canvas");t.width=256,t.height=256;var n=t.getContext("2d"),r=Math.max(e.width,e.height),i=e.width/r*256,o=e.height/r*256;return n.drawImage(e,1+(256-i)/2,1+(256-o)/2,i-2,o-2),t}(n.image),n.image=null,e()},n.image.onerror=t,n.image.crossOrigin="anonymous",n.image.src=n.url}),n}return h()(t,e),a()(t,[{key:"loadImages",value:function(){return this.count=this.count+1||1,this._promise}},{key:"eval",value:function(){return this.url}},{key:"_free",value:function(e){this.texture&&e.deleteTexture(this.texture)}},{key:"_applyToShaderSource",value:function(){return{preface:this._prefaceCode("uniform sampler2D texSprite".concat(this._uid,";")),inline:"texture2D(texSprite".concat(this._uid,", imageUV).rgba")}}},{key:"_postShaderCompile",value:function(e,t){this._getBinding(e)._texLoc=t.getUniformLocation(e,"texSprite".concat(this._uid))}},{key:"_preDraw",value:function(e,t,n){!this.init&&this.canvas&&(this.init=!0,n.activeTexture(n.TEXTURE0+t.freeTexUnit),this.texture=n.createTexture(),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),n.bindTexture(n.TEXTURE_2D,this.texture),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,this.canvas),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR_MIPMAP_LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.generateMipmap(n.TEXTURE_2D),this.canvas=null),this.texture&&(n.activeTexture(n.TEXTURE0+t.freeTexUnit),n.bindTexture(n.TEXTURE_2D,this.texture),n.uniform1i(this._getBinding(e)._texLoc,t.freeTexUnit),t.freeTexUnit++)}}]),t}(f.default)},"./src/renderer/viz/expressions/ListImage.js":
/*!***************************************************!*\
  !*** ./src/renderer/viz/expressions/ListImage.js ***!
  \***************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return y});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/get */"./node_modules/@babel/runtime/helpers/get.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(f),m=n(/*! ./base */"./src/renderer/viz/expressions/base.js"),_=n(/*! ./utils */"./src/renderer/viz/expressions/utils.js"),y=function(e){function t(){return i()(this,t),u()(this,c()(t).apply(this,arguments))}return d()(t,e),a()(t,[{key:"_bindMetadata",value:function(e){h()(c()(t.prototype),"_bindMetadata",this).call(this,e),this.numImages=this.elems.length,this._getChildren().forEach(function(e,t){return Object(_.checkType)("imageArray","imageArray[".concat(t,"]"),0,"image",e)})}},{key:"eval",value:function(e){return this.elems.map(function(t){return t.eval(e)})}},{key:"_applyToShaderSource",value:function(){return{preface:this._prefaceCode("\n                uniform sampler2D atlas".concat(this._uid,";\n\n                vec4 atlas").concat(this._uid,"Fn(vec2 imageUV, float category) {\n                    return texture2D(atlas").concat(this._uid,", imageUV/16. + vec2(mod(category, 16.), floor(category/16.))/16. ).rgba;\n                }\n            ")),inline:"atlas".concat(this._uid,"Fn")}}},{key:"_postShaderCompile",value:function(e,t){this._getBinding(e).texLoc=t.getUniformLocation(e,"atlas".concat(this._uid))}},{key:"_preDraw",value:function(e,t,n){this.init=!0;for(var r=0;r<this.numImages;r++){var i=this["image-".concat(r)];this.init=this.init&&i.canvas}if(this.init&&!this.texture){n.activeTexture(n.TEXTURE0+t.freeTexUnit),this.texture=n.createTexture(),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),n.bindTexture(n.TEXTURE_2D,this.texture),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,4096,4096,0,n.RGBA,n.UNSIGNED_BYTE,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR_MIPMAP_LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);for(var o=0,a=0,s=0;s<this.numImages;s++){var u=this["image-".concat(s)];n.texSubImage2D(n.TEXTURE_2D,0,o,a,n.RGBA,n.UNSIGNED_BYTE,u.canvas),(o+=256)+256>4096&&(o=0,a+=256)}n.generateMipmap(n.TEXTURE_2D)}this.texture&&(n.activeTexture(n.TEXTURE0+t.freeTexUnit),n.bindTexture(n.TEXTURE_2D,this.texture),n.uniform1i(this._getBinding(e).texLoc,t.freeTexUnit),t.freeTexUnit++)}}]),t}(m.default)},"./src/renderer/viz/expressions/ListTransform.js":
/*!*******************************************************!*\
  !*** ./src/renderer/viz/expressions/ListTransform.js ***!
  \*******************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return y});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/get */"./node_modules/@babel/runtime/helpers/get.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(f),m=n(/*! ./base */"./src/renderer/viz/expressions/base.js"),_=n(/*! ./utils */"./src/renderer/viz/expressions/utils.js"),y=function(e){function t(){return i()(this,t),u()(this,c()(t).apply(this,arguments))}return d()(t,e),a()(t,[{key:"_bindMetadata",value:function(e){h()(c()(t.prototype),"_bindMetadata",this).call(this,e),this._getChildren().forEach(function(e,t){return Object(_.checkType)("ListTransformation","ListTransformation[".concat(t,"]"),0,"transformation",e)}),this.type="transformation"}},{key:"eval",value:function(e){return this.elems.map(function(t){return t.eval(e)})}},{key:"_applyToShaderSource",value:function(e){var t=this.elems.map(function(t){return t._applyToShaderSource(e)});return{preface:this._prefaceCode("\n                ".concat(t.map(function(e){return e.preface}).join("\n"),"\n\n                vec2 listTransform").concat(this._uid,"(vec2 p) {\n                    ").concat(t.map(function(e){return"p = ".concat(e.inline,"(p);")}).join("\n"),"\n                    return p;\n                }\n            ")),inline:"listTransform".concat(this._uid)}}}]),t}(m.default)},"./src/renderer/viz/expressions/Placement.js":
/*!***************************************************!*\
  !*** ./src/renderer/viz/expressions/Placement.js ***!
  \***************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return y});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/get */"./node_modules/@babel/runtime/helpers/get.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(f),m=n(/*! ./base */"./src/renderer/viz/expressions/base.js"),_=n(/*! ./utils */"./src/renderer/viz/expressions/utils.js"),y=function(e){function t(e,n){var r;return i()(this,t),Object(_.checkMaxArguments)(arguments,2,"placement"),e=Object(_.implicitCast)(e),n=Object(_.implicitCast)(n),(r=u()(this,c()(t).call(this,{x:e,y:n}))).inlineMaker=function(e){return"vec2(".concat(e.x,", ").concat(e.y,")")},r.type="placement",r}return d()(t,e),a()(t,[{key:"eval",value:function(e){return[this.x.eval(e),this.y.eval(e)]}},{key:"_bindMetadata",value:function(e){h()(c()(t.prototype),"_bindMetadata",this).call(this,e),Object(_.checkType)("placement","x",0,"number",this.x),Object(_.checkType)("placement","y",1,"number",this.y)}}]),t}(m.default)},"./src/renderer/viz/expressions/Ramp.js":
/*!**********************************************!*\
  !*** ./src/renderer/viz/expressions/Ramp.js ***!
  \**********************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return b});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/get */"./node_modules/@babel/runtime/helpers/get.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(f),m=n(/*! ./base */"./src/renderer/viz/expressions/base.js"),_=n(/*! ./utils */"./src/renderer/viz/expressions/utils.js"),y=n(/*! ./RampImage */"./src/renderer/viz/expressions/RampImage.js"),v=n(/*! ./RampGeneric */"./src/renderer/viz/expressions/RampGeneric.js"),g=n(/*! ./constants */"./src/renderer/viz/expressions/constants.js"),b=function(e){function t(e,n){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g.DEFAULT_RAMP_OTHERS;return i()(this,t),Object(_.checkMaxArguments)(arguments,3,"ramp"),e=Object(_.implicitCast)(e),n=Object(_.implicitCast)(n),Object(_.checkExpression)("ramp","input",0,e),Object(_.checkExpression)("ramp","palette",1,n),o!==g.DEFAULT_RAMP_OTHERS&&(o=Object(_.implicitCast)(o),Object(_.checkExpression)("ramp","others",2,o)),(r=u()(this,c()(t).call(this,{input:e,palette:n}))).palette=n,r.others=o,r._defaultOthers=o===g.DEFAULT_RAMP_OTHERS,r}return d()(t,e),a()(t,[{key:"_bindMetadata",value:function(e){switch(h()(c()(t.prototype),"_bindMetadata",this).call(this,e),this.palette.type){case"image-list":Object.setPrototypeOf(this,y.default.prototype);break;default:Object.setPrototypeOf(this,v.default.prototype)}return this._bindMetadata(e)}}]),t}(m.default)},"./src/renderer/viz/expressions/RampGeneric.js":
/*!*****************************************************!*\
  !*** ./src/renderer/viz/expressions/RampGeneric.js ***!
  \*****************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return A});var r=n(/*! @babel/runtime/helpers/objectSpread */"./node_modules/@babel/runtime/helpers/objectSpread.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/get */"./node_modules/@babel/runtime/helpers/get.js"),d=n.n(f),m=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),_=n.n(m),y=n(/*! ./utils */"./src/renderer/viz/expressions/utils.js"),v=n(/*! ./basic/property */"./src/renderer/viz/expressions/basic/property.js"),g=n(/*! ./linear */"./src/renderer/viz/expressions/linear.js"),b=n(/*! ./color/CIELab.glsl */"./src/renderer/viz/expressions/color/CIELab.glsl"),x=n.n(b),w=n(/*! ./CategoryIndex */"./src/renderer/viz/expressions/CategoryIndex.js"),E=n(/*! ./constants */"./src/renderer/viz/expressions/constants.js"),T=n(/*! ./color/palettes/Palette */"./src/renderer/viz/expressions/color/palettes/Palette.js"),k=n(/*! ./base */"./src/renderer/viz/expressions/base.js"),C=n(/*! ./basic/constant */"./src/renderer/viz/expressions/basic/constant.js"),M=n(/*! ./color/NamedColor */"./src/renderer/viz/expressions/color/NamedColor.js"),P=n(/*! ./aggregation/cluster/ClusterAggregation */"./src/renderer/viz/expressions/aggregation/cluster/ClusterAggregation.js"),A=function(e){function t(){return a()(this,t),c()(this,h()(t).apply(this,arguments))}return _()(t,e),u()(t,[{key:"_bindMetadata",value:function(e){var n=new C.default(1),r=new M.default("gray");d()(h()(t.prototype),"_bindMetadata",this).call(this,e),this.type=this.palette.childType,this.others===E.DEFAULT_RAMP_OTHERS?(this.others="number-list"===this.palette.type?n:r,this.others._bindMetadata(e)):(this.others._bindMetadata(e),Object(y.checkType)("ramp","others",2,this.palette.childType,this.others)),(this.input.isA(v.default)||this.input.isA(P.default))&&(this.input="number"===this.input.type?new g.default(this.input):new w.default(this.input),this.input._bindMetadata(e)),Object(y.checkType)("ramp","input",0,["number","category"],this.input),this.childrenNames.push("others"),this._metadata=e}},{key:"eval",value:function(e){var t=this.input.eval(e);return this._calcEval(t,e)}},{key:"_calcEval",value:function(e,t){var n=this._getPalette(),r=n.palette,i=n.others,o=this.palette.isA(T.default)?r.map(function(e){return e.eval(t)}):this.palette.eval(t);if(e===E.OTHERS_INDEX)return i.eval(t);var a=o.length-1,s=Math.floor(e*a),u=Math.ceil(e*a),l=Object(y.fract)(e*a);return Object(y.mix)(o[s],o[u],l)}},{key:"getLegendData",value:function(e){var t=this,n=Object.assign({},E.DEFAULT_OPTIONS,e),r=this.input.type,o=this.input._getLegendData(n),a=o.data.map(function(e){var n=e.key,r=e.value;return{key:n,value:r=t._calcEval(r,void 0)}});return i()({type:r},o,{data:a})}},{key:"_applyToShaderSource",value:function(e){var t=this.input._applyToShaderSource(e),n=this._getPalette(),r=n.palette,i=n.others,o=r.map(function(t){return t._applyToShaderSource(e)}),a=i._applyToShaderSource(e),s="number-list"===this.palette.type?function(e){return S(e.map(function(e){return e.inline}))}(o):function(e){return"cielabToSRGBA(".concat(S(e.map(function(e){return"sRGBAToCieLAB(".concat(e.inline,")")})),")")}(o),u="number-list"===this.palette.type?"float":"vec4",l="ramp_color".concat(this._uid,"(").concat(t.inline,")");return{preface:this._prefaceCode("\n            ".concat(t.preface,"\n            ").concat(x.a,"\n            ").concat(o.map(function(e){return e.preface}).join("\n"),"\n            ").concat(a.preface,"\n\n            ").concat(u," ramp_color").concat(this._uid,"(float x){\n                return x==").concat(E.OTHERS_GLSL_VALUE,"\n                    ? ").concat(a.inline,"\n                    : ").concat(s,";\n            }")),inline:l}}},{key:"_getPalette",value:function(){return this.palette.isA(T.default)?this._getColorPalette():{palette:this.palette.elems,others:this.others}}},{key:"_getColorPalette",value:function(){var e=this.palette.getColors(this.input.numCategoriesWithoutOthers);return{palette:e.colors,others:this._defaultOthers&&e.othersColor?e.othersColor:this.others}}}]),t}(k.default);function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e[t];return t===e.length-1?n:function(e,t,n,r){var i=(n/(r-1)).toFixed(20),o=(1/(r-1)).toFixed(20),a="clamp((x - ".concat(i,")/").concat(o,", 0., 1.)");return"mix(".concat(e,", ").concat(t,", ").concat(a,")")}(n,S(e,t+1),t,e.length)}},"./src/renderer/viz/expressions/RampImage.js":
/*!***************************************************!*\
  !*** ./src/renderer/viz/expressions/RampImage.js ***!
  \***************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return C});var r=n(/*! @babel/runtime/helpers/objectSpread */"./node_modules/@babel/runtime/helpers/objectSpread.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/get */"./node_modules/@babel/runtime/helpers/get.js"),d=n.n(f),m=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),_=n.n(m),y=n(/*! ../defaultSVGs */"./src/renderer/viz/defaultSVGs.js"),v=n(/*! ./utils */"./src/renderer/viz/expressions/utils.js"),g=n(/*! ./basic/property */"./src/renderer/viz/expressions/basic/property.js"),b=n(/*! ./CategoryIndex */"./src/renderer/viz/expressions/CategoryIndex.js"),x=n(/*! ./ListImage */"./src/renderer/viz/expressions/ListImage.js"),w=n(/*! ./SVG */"./src/renderer/viz/expressions/SVG.js"),E=n(/*! ./base */"./src/renderer/viz/expressions/base.js"),T=n(/*! ./constants */"./src/renderer/viz/expressions/constants.js"),k=new w.default(y.default.circle),C=function(e){function t(){return a()(this,t),c()(this,h()(t).apply(this,arguments))}return _()(t,e),u()(t,[{key:"_bindMetadata",value:function(e){E.default.prototype._bindMetadata.call(this,e),this.type=this.palette.childType,Object(v.checkType)("ramp","input",0,"category",this.input),Object(v.checkInstance)("ramp","palette",1,x.default,this.palette),this.others===T.DEFAULT_RAMP_OTHERS?this.others=k:Object(v.checkType)("ramp","others",2,"image",this.others),this.input.isA(g.default)&&(this.input=new b.default(this.input),this.input._bindMetadata(e)),this.others._bindMetadata(e),this.childrenNames.push("others")}},{key:"eval",value:function(e){var t=this.input.eval(e);return this._calcEval(t)}},{key:"_calcEval",value:function(e){var t=Math.round(e*(this.input.numCategoriesWithoutOthers-1));return this.palette.eval()[t]||this.others.eval()}},{key:"getLegendData",value:function(e){var t=this,n=Object.assign({},T.DEFAULT_OPTIONS,e),r=this.input.type,o=this.input._getLegendData(n),a=o.data.map(function(e){var n=e.key,r=e.value;return{key:n,value:r=t._calcEval(r)}});return i()({type:r},o,{data:a})}},{key:"_applyToShaderSource",value:function(e){var t=this.input._applyToShaderSource(e),n=this.palette._applyToShaderSource(e),r=this.others._applyToShaderSource(e);return{preface:this._prefaceCode("\n                uniform float rampImageMultiplier".concat(this._uid,";\n\n                ").concat(t.preface,"\n                ").concat(n.preface,"\n                ").concat(r.preface,"\n\n                vec4 rampImage").concat(this._uid,"(vec2 imageUV, float index){\n                    if (index == ").concat(T.OTHERS_GLSL_VALUE,"){\n                        return ").concat(r.inline,";\n                    }\n                    return ").concat(n.inline,"(imageUV, rampImageMultiplier").concat(this._uid,"*index);\n                }\n            ")),inline:"rampImage".concat(this._uid,"(imageUV, ").concat(t.inline,")")}}},{key:"_postShaderCompile",value:function(e,n){d()(h()(t.prototype),"_postShaderCompile",this).call(this,e,n),this._getBinding(e)._multiplierLoc=n.getUniformLocation(e,"rampImageMultiplier".concat(this._uid))}},{key:"_preDraw",value:function(e,n,r){d()(h()(t.prototype),"_preDraw",this).call(this,e,n,r),r.uniform1f(this._getBinding(e)._multiplierLoc,this.input.numCategoriesWithoutOthers-1)}}]),t}(E.default)},"./src/renderer/viz/expressions/SVG.js":
/*!*********************************************!*\
  !*** ./src/renderer/viz/expressions/SVG.js ***!
  \*********************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return f});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),c=n.n(l),p=n(/*! ./Image */"./src/renderer/viz/expressions/Image.js"),h=n(/*! ./utils */"./src/renderer/viz/expressions/utils.js"),f=function(e){function t(e){return i()(this,t),Object(h.checkMaxArguments)(arguments,1,"svg"),a()(this,u()(t).call(this,"data:image/svg+xml,".concat(encodeURIComponent(e))))}return c()(t,e),t}(p.default)},"./src/renderer/viz/expressions/Scaled.js":
/*!************************************************!*\
  !*** ./src/renderer/viz/expressions/Scaled.js ***!
  \************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return v});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/get */"./node_modules/@babel/runtime/helpers/get.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(f),m=n(/*! ./base */"./src/renderer/viz/expressions/base.js"),_=n(/*! ../expressions */"./src/renderer/viz/expressions.js"),y=n(/*! ./utils */"./src/renderer/viz/expressions/utils.js"),v=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return i()(this,t),e=Object(y.implicitCast)(e),r=Object(y.implicitCast)(r),(n=u()(this,c()(t).call(this,{scale:Object(_.div)(Object(_.mul)(e,0),Object(_.pow)(2,r))}))).type="number",n.inlineMaker=function(e){return e.scale},n}return d()(t,e),a()(t,[{key:"eval",value:function(){return this.scale.eval()}},{key:"_bindMetadata",value:function(e){h()(c()(t.prototype),"_bindMetadata",this).call(this,e),Object(y.checkType)("scaled","width",0,"number",this.scale.a.a),Object(y.checkType)("scaled","zoomlevel",1,"number",this.scale.b)}},{key:"_preDraw",value:function(e,n,r){this.scale.a.b.expr=Math.pow(2,n.zoomLevel),h()(c()(t.prototype),"_preDraw",this).call(this,e,n,r)}}]),t}(m.default)},"./src/renderer/viz/expressions/Zoomrange.js":
/*!***************************************************!*\
  !*** ./src/renderer/viz/expressions/Zoomrange.js ***!
  \***************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return x});var r=n(/*! @babel/runtime/helpers/toConsumableArray */"./node_modules/@babel/runtime/helpers/toConsumableArray.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/get */"./node_modules/@babel/runtime/helpers/get.js"),d=n.n(f),m=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),_=n.n(m),y=n(/*! ./base */"./src/renderer/viz/expressions/base.js"),v=n(/*! ../expressions */"./src/renderer/viz/expressions.js"),g=n(/*! ../../../errors/carto-validation-error */"./src/errors/carto-validation-error.js"),b=n(/*! ./utils */"./src/renderer/viz/expressions/utils.js"),x=function(e){function t(e){var n;return a()(this,t),e=Object(b.implicitCast)(e),n=c()(this,h()(t).call(this,{})),Object(b.checkExpression)("zoomrange","zoomBreakpointList",0,e),n.zoomBreakpointList=e,n.type="number",n.inlineMaker=function(e){return e._impostor},n}return _()(t,e),u()(t,[{key:"_bindMetadata",value:function(e){if(this.zoomBreakpointList._bindMetadata(e),Object(b.checkType)("zoomrange","zoomBreakpointList",0,"number-list",this.zoomBreakpointList),this.zoomBreakpointList.elems.length<2)throw new g.default("".concat(g.CartoValidationTypes.INCORRECT_VALUE," zoomrange() function must receive a list with at least two elements."));var n=i()(this.zoomBreakpointList.elems);this._impostor=function e(t,n,r){if(1===t.length)return 1;var i=t[0];var o=t[1];t.shift();return Object(v.blend)(n/r,e(t,n+1,r),Object(v.linear)(Object(v.pow)(2,Object(v.zoom)()),Object(v.pow)(2,i),Object(v.pow)(2,o)))}(n,0,n.length-1),this.childrenNames.push("_impostor"),d()(h()(t.prototype),"_bindMetadata",this).call(this,e)}},{key:"eval",value:function(e){return this._impostor.eval(e)}}]),t}(y.default)},"./src/renderer/viz/expressions/aggregation/cluster/ClusterAggregation.js":
/*!********************************************************************************!*\
  !*** ./src/renderer/viz/expressions/aggregation/cluster/ClusterAggregation.js ***!
  \********************************************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return x});var r=n(/*! @babel/runtime/helpers/defineProperty */"./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/get */"./node_modules/@babel/runtime/helpers/get.js"),d=n.n(f),m=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),_=n.n(m),y=n(/*! ../../base */"./src/renderer/viz/expressions/base.js"),v=n(/*! ../../basic/property */"./src/renderer/viz/expressions/basic/property.js"),g=n(/*! ../../utils */"./src/renderer/viz/expressions/utils.js"),b=n(/*! ../../../../schema */"./src/renderer/schema.js"),x=function(e){function t(e){var n,r=e.property,i=e.expressionName,o=e.aggName,s=e.aggType;return a()(this,t),Object(g.checkExpression)(i,"property",0,r),(n=c()(this,h()(t).call(this,{property:r})))._aggName=o,n._expressionName=i,n.type=s,n}return _()(t,e),u()(t,[{key:"eval",value:function(e){return e[b.column.aggColumn(this.property.name,this._aggName)]}},{key:"_bindMetadata",value:function(e){d()(h()(t.prototype),"_bindMetadata",this).call(this,e),Object(g.checkInstance)(this._expressionName,"property",0,v.default,this.property),Object(g.checkType)(this._expressionName,"property",0,this.type,this.property)}},{key:"_resolveAliases",value:function(){}},{key:"_applyToShaderSource",value:function(e){return{preface:"",inline:"".concat(e(b.column.aggColumn(this.property.name,this._aggName)))}}},{key:"_postShaderCompile",value:function(){}},{key:"_getMinimumNeededSchema",value:function(){return i()({},this.property.name,[{type:"aggregated",op:this._aggName}])}},{key:"name",get:function(){return this.property.name}},{key:"aggName",get:function(){return this._aggName}},{key:"numCategories",get:function(){return this.property.numCategories}},{key:"categories",get:function(){return this.property.categories}}]),t}(y.default)},"./src/renderer/viz/expressions/aggregation/cluster/ClusterAvg.js":
/*!************************************************************************!*\
  !*** ./src/renderer/viz/expressions/aggregation/cluster/ClusterAvg.js ***!
  \************************************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return f});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),c=n.n(l),p=n(/*! ./ClusterAggregation */"./src/renderer/viz/expressions/aggregation/cluster/ClusterAggregation.js"),h=n(/*! ../../utils */"./src/renderer/viz/expressions/utils.js"),f=function(e){function t(e){return i()(this,t),Object(h.checkMaxArguments)(arguments,1,"clusterAvg"),a()(this,u()(t).call(this,{property:e,expressionName:"clusterAvg",aggName:"avg",aggType:"number"}))}return c()(t,e),t}(p.default)},"./src/renderer/viz/expressions/aggregation/cluster/ClusterCount.js":
/*!**************************************************************************!*\
  !*** ./src/renderer/viz/expressions/aggregation/cluster/ClusterCount.js ***!
  \**************************************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return v});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/get */"./node_modules/@babel/runtime/helpers/get.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(f),m=n(/*! ../../base */"./src/renderer/viz/expressions/base.js"),_=n(/*! ../../utils */"./src/renderer/viz/expressions/utils.js"),y=n(/*! ../../../../schema */"./src/renderer/schema.js"),v=function(e){function t(){var e;return i()(this,t),Object(_.checkMaxArguments)(arguments,0,"clusterCount"),(e=u()(this,c()(t).call(this,{}))).type="number",e._hasClusterFeatureCount=!1,e}return d()(t,e),a()(t,[{key:"eval",value:function(e){return Number(e[y.CLUSTER_FEATURE_COUNT])||1}},{key:"_bindMetadata",value:function(e){h()(c()(t.prototype),"_bindMetadata",this).call(this,e),this._hasClusterFeatureCount=void 0!==e.properties[y.CLUSTER_FEATURE_COUNT]}},{key:"_applyToShaderSource",value:function(e){return{preface:"",inline:this._hasClusterFeatureCount?e(y.CLUSTER_FEATURE_COUNT):"1."}}}]),t}(m.default)},"./src/renderer/viz/expressions/aggregation/cluster/ClusterMax.js":
/*!************************************************************************!*\
  !*** ./src/renderer/viz/expressions/aggregation/cluster/ClusterMax.js ***!
  \************************************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return f});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),c=n.n(l),p=n(/*! ./ClusterAggregation */"./src/renderer/viz/expressions/aggregation/cluster/ClusterAggregation.js"),h=n(/*! ../../utils */"./src/renderer/viz/expressions/utils.js"),f=function(e){function t(e){return i()(this,t),Object(h.checkMaxArguments)(arguments,1,"clusterMax"),a()(this,u()(t).call(this,{property:e,expressionName:"clusterMax",aggName:"max",aggType:"number"}))}return c()(t,e),t}(p.default)},"./src/renderer/viz/expressions/aggregation/cluster/ClusterMin.js":
/*!************************************************************************!*\
  !*** ./src/renderer/viz/expressions/aggregation/cluster/ClusterMin.js ***!
  \************************************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return f});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),c=n.n(l),p=n(/*! ./ClusterAggregation */"./src/renderer/viz/expressions/aggregation/cluster/ClusterAggregation.js"),h=n(/*! ../../utils */"./src/renderer/viz/expressions/utils.js"),f=function(e){function t(e){return i()(this,t),Object(h.checkMaxArguments)(arguments,1,"clusterMin"),a()(this,u()(t).call(this,{property:e,expressionName:"clusterMin",aggName:"min",aggType:"number"}))}return c()(t,e),t}(p.default)},"./src/renderer/viz/expressions/aggregation/cluster/ClusterMode.js":
/*!*************************************************************************!*\
  !*** ./src/renderer/viz/expressions/aggregation/cluster/ClusterMode.js ***!
  \*************************************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return f});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),c=n.n(l),p=n(/*! ./ClusterAggregation */"./src/renderer/viz/expressions/aggregation/cluster/ClusterAggregation.js"),h=n(/*! ../../utils */"./src/renderer/viz/expressions/utils.js"),f=function(e){function t(e){return i()(this,t),Object(h.checkMaxArguments)(arguments,1,"clusterMode"),a()(this,u()(t).call(this,{property:e,expressionName:"clusterMode",aggName:"mode",aggType:"category"}))}return c()(t,e),t}(p.default)},"./src/renderer/viz/expressions/aggregation/cluster/ClusterSum.js":
/*!************************************************************************!*\
  !*** ./src/renderer/viz/expressions/aggregation/cluster/ClusterSum.js ***!
  \************************************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return f});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),c=n.n(l),p=n(/*! ./ClusterAggregation */"./src/renderer/viz/expressions/aggregation/cluster/ClusterAggregation.js"),h=n(/*! ../../utils */"./src/renderer/viz/expressions/utils.js"),f=function(e){function t(e){return i()(this,t),Object(h.checkMaxArguments)(arguments,1,"clusterSum"),a()(this,u()(t).call(this,{property:e,expressionName:"clusterSum",aggName:"sum",aggType:"number"}))}return c()(t,e),t}(p.default)},"./src/renderer/viz/expressions/aggregation/global/GlobalAggregation.js":
/*!******************************************************************************!*\
  !*** ./src/renderer/viz/expressions/aggregation/global/GlobalAggregation.js ***!
  \******************************************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return k});var r=n(/*! @babel/runtime/helpers/defineProperty */"./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/assertThisInitialized */"./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/get */"./node_modules/@babel/runtime/helpers/get.js"),d=n.n(f),m=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),_=n.n(m),y=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),v=n.n(y),g=n(/*! @babel/runtime/helpers/set */"./node_modules/@babel/runtime/helpers/set.js"),b=n.n(g),x=n(/*! ../../base */"./src/renderer/viz/expressions/base.js"),w=n(/*! ../../../expressions */"./src/renderer/viz/expressions.js"),E=n(/*! ../../utils */"./src/renderer/viz/expressions/utils.js"),T=n(/*! ../../../../../errors/carto-validation-error */"./src/errors/carto-validation-error.js"),k=function(e){function t(e){var n,r=e.property,i=e.name,o=e.type;return a()(this,t),(n=h()(this,v()(t).call(this,{_value:Object(w.number)(0)}))).property=Object(E.implicitCast)(r),n._name=i,n.type=o,b()(v()(t.prototype),"inlineMaker",function(e){return e._value},c()(n),!0),n}return _()(t,e),u()(t,[{key:"isFeatureDependent",value:function(){return!1}},{key:"eval",value:function(){return this._value.expr}},{key:"_bindMetadata",value:function(e){if(d()(v()(t.prototype),"_bindMetadata",this).call(this,e),this.property._bindMetadata(e),void 0===e.properties[this.property.name][this._name])throw new T.default("".concat(T.CartoValidationTypes.MISSING_REQUIRED," Metadata ").concat(this._name," for property ").concat(this.property.name," is not defined"));this._value.expr=e.properties[this.property.name][this._name]}},{key:"_getMinimumNeededSchema",value:function(){return i()({},this.property.name,[])}},{key:"value",get:function(){return this._value.expr}}]),t}(x.default)},"./src/renderer/viz/expressions/aggregation/global/GlobalAvg.js":
/*!**********************************************************************!*\
  !*** ./src/renderer/viz/expressions/aggregation/global/GlobalAvg.js ***!
  \**********************************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return f});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),c=n.n(l),p=n(/*! ./GlobalAggregation */"./src/renderer/viz/expressions/aggregation/global/GlobalAggregation.js"),h=n(/*! ../../utils */"./src/renderer/viz/expressions/utils.js"),f=function(e){function t(e){return i()(this,t),Object(h.checkMaxArguments)(arguments,1,"globalAvg"),a()(this,u()(t).call(this,{property:e,name:"avg",type:"number"}))}return c()(t,e),t}(p.default)},"./src/renderer/viz/expressions/aggregation/global/GlobalCount.js":
/*!************************************************************************!*\
  !*** ./src/renderer/viz/expressions/aggregation/global/GlobalCount.js ***!
  \************************************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return f});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),c=n.n(l),p=n(/*! ./GlobalAggregation */"./src/renderer/viz/expressions/aggregation/global/GlobalAggregation.js"),h=n(/*! ../../utils */"./src/renderer/viz/expressions/utils.js"),f=function(e){function t(e){return i()(this,t),Object(h.checkMaxArguments)(arguments,1,"globalCount"),a()(this,u()(t).call(this,{property:e,name:"count",type:"number"}))}return c()(t,e),t}(p.default)},"./src/renderer/viz/expressions/aggregation/global/GlobalMax.js":
/*!**********************************************************************!*\
  !*** ./src/renderer/viz/expressions/aggregation/global/GlobalMax.js ***!
  \**********************************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return f});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),c=n.n(l),p=n(/*! ./GlobalAggregation */"./src/renderer/viz/expressions/aggregation/global/GlobalAggregation.js"),h=n(/*! ../../utils */"./src/renderer/viz/expressions/utils.js"),f=function(e){function t(e){return i()(this,t),Object(h.checkMaxArguments)(arguments,1,"globalMax"),a()(this,u()(t).call(this,{property:e,name:"max",type:"number"}))}return c()(t,e),t}(p.default)},"./src/renderer/viz/expressions/aggregation/global/GlobalMin.js":
/*!**********************************************************************!*\
  !*** ./src/renderer/viz/expressions/aggregation/global/GlobalMin.js ***!
  \**********************************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return f});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),c=n.n(l),p=n(/*! ./GlobalAggregation */"./src/renderer/viz/expressions/aggregation/global/GlobalAggregation.js"),h=n(/*! ../../utils */"./src/renderer/viz/expressions/utils.js"),f=function(e){function t(e){return i()(this,t),Object(h.checkMaxArguments)(arguments,1,"globalMin"),a()(this,u()(t).call(this,{property:e,name:"min",type:"number"}))}return c()(t,e),t}(p.default)},"./src/renderer/viz/expressions/aggregation/global/GlobalPercentile.js":
/*!*****************************************************************************!*\
  !*** ./src/renderer/viz/expressions/aggregation/global/GlobalPercentile.js ***!
  \*****************************************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return x});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/set */"./node_modules/@babel/runtime/helpers/set.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/get */"./node_modules/@babel/runtime/helpers/get.js"),d=n.n(f),m=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),_=n.n(m),y=n(/*! ../../base */"./src/renderer/viz/expressions/base.js"),v=n(/*! ../../../expressions */"./src/renderer/viz/expressions.js"),g=n(/*! ../../utils */"./src/renderer/viz/expressions/utils.js"),b=n(/*! ../../../../../errors/carto-validation-error */"./src/errors/carto-validation-error.js"),x=function(e){function t(e,n){var r;if(i()(this,t),Object(g.checkMaxArguments)(arguments,2,"globalPercentile"),!Number.isFinite(n))throw new b.default("".concat(b.CartoValidationTypes.INCORRECT_TYPE," 'percentile' must be a fixed literal number"));return(r=u()(this,h()(t).call(this,{_value:Object(v.number)(0)}))).property=e,r.percentile=n,r}return _()(t,e),a()(t,[{key:"isFeatureDependent",value:function(){return!1}},{key:"_bindMetadata",value:function(e){var n=this;d()(h()(t.prototype),"_bindMetadata",this).call(this,e),this.property._bindMetadata(e),this.type="number",c()(h()(t.prototype),"inlineMaker",function(e){return e._value},this,!0);var r=e.sample.map(function(e){return e[n.property.name]});r.sort(function(e,t){return e-t});var i=this.percentile/100;this._value.expr=r[Math.floor(i*r.length)]}},{key:"_getMinimumNeededSchema",value:function(){return this.property._getMinimumNeededSchema()}},{key:"value",get:function(){return this._value.expr}}]),t}(y.default)},"./src/renderer/viz/expressions/aggregation/global/GlobalSum.js":
/*!**********************************************************************!*\
  !*** ./src/renderer/viz/expressions/aggregation/global/GlobalSum.js ***!
  \**********************************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return f});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),c=n.n(l),p=n(/*! ./GlobalAggregation */"./src/renderer/viz/expressions/aggregation/global/GlobalAggregation.js"),h=n(/*! ../../utils */"./src/renderer/viz/expressions/utils.js"),f=function(e){function t(e){return i()(this,t),Object(h.checkMaxArguments)(arguments,1,"globalSum"),a()(this,u()(t).call(this,{property:e,name:"sum"}))}return c()(t,e),t}(p.default)},"./src/renderer/viz/expressions/aggregation/viewport/ViewportAggregation.js":
/*!**********************************************************************************!*\
  !*** ./src/renderer/viz/expressions/aggregation/viewport/ViewportAggregation.js ***!
  \**********************************************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return v});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/get */"./node_modules/@babel/runtime/helpers/get.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(f),m=n(/*! ../../base */"./src/renderer/viz/expressions/base.js"),_=n(/*! ../../utils */"./src/renderer/viz/expressions/utils.js"),y=n(/*! ../../../expressions */"./src/renderer/viz/expressions.js"),v=function(e){function t(e){var n,r=e.property;return i()(this,t),(n=u()(this,c()(t).call(this,{property:Object(_.implicitCast)(r),_impostor:Object(y.number)(0)})))._isViewport=!0,n.type="number",n.inlineMaker=function(e){return e._impostor},n}return d()(t,e),a()(t,[{key:"isFeatureDependent",value:function(){return!1}},{key:"_bindMetadata",value:function(e){h()(c()(t.prototype),"_bindMetadata",this).call(this,e)}},{key:"_getMinimumNeededSchema",value:function(){return this.property._getMinimumNeededSchema()}},{key:"_preDraw",value:function(){var e;this._impostor.expr=this.eval();for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];(e=h()(c()(t.prototype),"_preDraw",this)).call.apply(e,[this].concat(r))}}]),t}(m.default)},"./src/renderer/viz/expressions/aggregation/viewport/ViewportAvg.js":
/*!**************************************************************************!*\
  !*** ./src/renderer/viz/expressions/aggregation/viewport/ViewportAvg.js ***!
  \**************************************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return m});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),h=n.n(p),f=n(/*! ./ViewportAggregation */"./src/renderer/viz/expressions/aggregation/viewport/ViewportAggregation.js"),d=n(/*! ../../utils */"./src/renderer/viz/expressions/utils.js"),m=function(e){function t(e){var n;return i()(this,t),Object(d.checkMaxArguments)(arguments,1,"viewportAvg"),(n=u()(this,c()(t).call(this,{property:e})))._sum=0,n._count=0,n}return h()(t,e),a()(t,[{key:"eval",value:function(){return this.value}},{key:"accumViewportAgg",value:function(e){var t=this.property.eval(e);Number.isNaN(t)||(this._count++,this._sum+=t)}},{key:"_resetViewportAgg",value:function(){this._sum=0,this._count=0}},{key:"value",get:function(){return this._sum/this._count}}]),t}(f.default)},"./src/renderer/viz/expressions/aggregation/viewport/ViewportCount.js":
/*!****************************************************************************!*\
  !*** ./src/renderer/viz/expressions/aggregation/viewport/ViewportCount.js ***!
  \****************************************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return _});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),h=n.n(p),f=n(/*! ./ViewportAggregation */"./src/renderer/viz/expressions/aggregation/viewport/ViewportAggregation.js"),d=n(/*! ../../../expressions */"./src/renderer/viz/expressions.js"),m=n(/*! ../../utils */"./src/renderer/viz/expressions/utils.js"),_=function(e){function t(){var e;return i()(this,t),Object(m.checkMaxArguments)(arguments,1,"viewportCount"),(e=u()(this,c()(t).call(this,{property:Object(d.number)(0)})))._value=0,e}return h()(t,e),a()(t,[{key:"eval",value:function(){return this.value}},{key:"accumViewportAgg",value:function(){this._value++}},{key:"_resetViewportAgg",value:function(){this._value=0}},{key:"value",get:function(){return this._value}}]),t}(f.default)},"./src/renderer/viz/expressions/aggregation/viewport/ViewportHistogram.js":
/*!********************************************************************************!*\
  !*** ./src/renderer/viz/expressions/aggregation/viewport/ViewportHistogram.js ***!
  \********************************************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return x});var r=n(/*! @babel/runtime/helpers/slicedToArray */"./node_modules/@babel/runtime/helpers/slicedToArray.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/toConsumableArray */"./node_modules/@babel/runtime/helpers/toConsumableArray.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),d=n.n(f),m=n(/*! @babel/runtime/helpers/get */"./node_modules/@babel/runtime/helpers/get.js"),_=n.n(m),y=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),v=n.n(y),g=n(/*! ../../base */"./src/renderer/viz/expressions/base.js"),b=n(/*! ../../utils */"./src/renderer/viz/expressions/utils.js"),x=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;return u()(this,t),Object(b.checkMaxArguments)(arguments,3,"viewportHistogram"),(n=h()(this,d()(t).call(this,{x:Object(b.implicitCast)(e),weight:Object(b.implicitCast)(r)}))).type="histogram",n._size=i,n._isViewport=!0,n.inlineMaker=function(){return null},n}return v()(t,e),c()(t,[{key:"accumViewportAgg",value:function(e){var t=this.x.eval(e);if(void 0!==t){var n=this.weight.eval(e),r=this._histogram.get(t)||0;this._histogram.set(t,r+n)}}},{key:"eval",value:function(){return null===this._cached?this._histogram?(this._cached="number"===this.x.type?function(e,t){for(var n=a()(e),r=n.length,i=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,s=0;s<r;s++){var u=n[s][0];i=Math.min(i,u),o=Math.max(o,u)}for(var l=Array(t).fill(0),c=o-i,p=t-1,h=0;h<r;h++){var f=n[h][0],d=n[h][1],m=Math.min(Math.floor(t*(f-i)/c),p);l[m]+=d}return l.map(function(e,n){return{x:[i+n/t*c,i+(n+1)/t*c],y:e}})}(this._histogram,this._size):(e=this._histogram,a()(e).map(function(e){var t=i()(e,2),n=t[0],r=t[1];return{x:n,y:r}}).sort(w)),this._cached):null:this._cached;var e}},{key:"getJoinedValues",value:function(e){return Object(b.checkArray)("viewportHistogram.getJoinedValues","values",0,e),e.length?this.value.map(function(t){var n=e.find(function(e){return e.key===t.x});return{frequency:t.y,key:t.x,value:-1!==n?n.value:null}}):[]}},{key:"_bindMetadata",value:function(e){_()(d()(t.prototype),"_bindMetadata",this).call(this,e),this._metadata=e}},{key:"_resetViewportAgg",value:function(e){e&&this._bindMetadata(e),this._cached=null,this._histogram=new Map}}]),t}(g.default);function w(e,t){return t.y-e.y==0?e.x.localeCompare(t.x):t.y-e.y}},"./src/renderer/viz/expressions/aggregation/viewport/ViewportMax.js":
/*!**************************************************************************!*\
  !*** ./src/renderer/viz/expressions/aggregation/viewport/ViewportMax.js ***!
  \**************************************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return m});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),h=n.n(p),f=n(/*! ./ViewportAggregation */"./src/renderer/viz/expressions/aggregation/viewport/ViewportAggregation.js"),d=n(/*! ../../utils */"./src/renderer/viz/expressions/utils.js"),m=function(e){function t(e){var n;return i()(this,t),Object(d.checkMaxArguments)(arguments,1,"viewportMax"),(n=u()(this,c()(t).call(this,{property:e})))._value=Number.NEGATIVE_INFINITY,n}return h()(t,e),a()(t,[{key:"eval",value:function(){return this.value}},{key:"accumViewportAgg",value:function(e){var t=this.property.eval(e);Number.isNaN(t)||(this._value=Math.max(this._value,t))}},{key:"_resetViewportAgg",value:function(){this._value=Number.NEGATIVE_INFINITY}},{key:"value",get:function(){return this._value}}]),t}(f.default)},"./src/renderer/viz/expressions/aggregation/viewport/ViewportMin.js":
/*!**************************************************************************!*\
  !*** ./src/renderer/viz/expressions/aggregation/viewport/ViewportMin.js ***!
  \**************************************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return m});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),h=n.n(p),f=n(/*! ./ViewportAggregation */"./src/renderer/viz/expressions/aggregation/viewport/ViewportAggregation.js"),d=n(/*! ../../utils */"./src/renderer/viz/expressions/utils.js"),m=function(e){function t(e){var n;return i()(this,t),Object(d.checkMaxArguments)(arguments,1,"viewportMin"),(n=u()(this,c()(t).call(this,{property:e})))._value=Number.POSITIVE_INFINITY,n}return h()(t,e),a()(t,[{key:"eval",value:function(){return this.value}},{key:"accumViewportAgg",value:function(e){var t=this.property.eval(e);Number.isNaN(t)||(this._value=Math.min(this._value,t))}},{key:"_resetViewportAgg",value:function(){this._value=Number.POSITIVE_INFINITY}},{key:"value",get:function(){return this._value}}]),t}(f.default)},"./src/renderer/viz/expressions/aggregation/viewport/ViewportPercentile.js":
/*!*********************************************************************************!*\
  !*** ./src/renderer/viz/expressions/aggregation/viewport/ViewportPercentile.js ***!
  \*********************************************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return w});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/assertThisInitialized */"./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/get */"./node_modules/@babel/runtime/helpers/get.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(f),m=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),_=n.n(m),y=n(/*! @babel/runtime/helpers/set */"./node_modules/@babel/runtime/helpers/set.js"),v=n.n(y),g=n(/*! ./ViewportAggregation */"./src/renderer/viz/expressions/aggregation/viewport/ViewportAggregation.js"),b=n(/*! ../../../expressions */"./src/renderer/viz/expressions.js"),x=n(/*! ../../utils */"./src/renderer/viz/expressions/utils.js"),w=function(e){function t(e,n){var r;return i()(this,t),Object(x.checkMaxArguments)(arguments,2,"viewportPercentile"),(r=c()(this,_()(t).call(this,{property:e,_impostor:Object(b.number)(0)})))._isViewport=!0,r.percentile=Object(x.implicitCast)(n),r.type="number",v()(_()(t.prototype),"inlineMaker",function(e){return e.impostor},u()(r),!0),r}return d()(t,e),a()(t,[{key:"eval",value:function(e){if(null===this._value){var t=(r=this.percentile.eval(e),i=this._array.length,Math.floor(r/100*i)),n=Object(x.clamp)(t,0,this._array.length-1);this._array.sort(function(e,t){return e-t}),this._value=this._array[n]}var r,i;return this._value}},{key:"_getMinimumNeededSchema",value:function(){return this.property._getMinimumNeededSchema()}},{key:"_resetViewportAgg",value:function(){this._value=null,this._array=[]}},{key:"accumViewportAgg",value:function(e){var t=this.property.eval(e);this._array.push(t)}},{key:"_preDraw",value:function(){var e;this.impostor.expr=this.eval();for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];(e=h()(_()(t.prototype),"_preDraw",this)).call.apply(e,[this].concat(r))}},{key:"value",get:function(){return this.eval()}}]),t}(g.default)},"./src/renderer/viz/expressions/aggregation/viewport/ViewportSum.js":
/*!**************************************************************************!*\
  !*** ./src/renderer/viz/expressions/aggregation/viewport/ViewportSum.js ***!
  \**************************************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return m});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),h=n.n(p),f=n(/*! ./ViewportAggregation */"./src/renderer/viz/expressions/aggregation/viewport/ViewportAggregation.js"),d=n(/*! ../../utils */"./src/renderer/viz/expressions/utils.js"),m=function(e){function t(e){var n;return i()(this,t),Object(d.checkMaxArguments)(arguments,1,"viewportSum"),(n=u()(this,c()(t).call(this,{property:e})))._value=0,n}return h()(t,e),a()(t,[{key:"eval",value:function(){return this.value}},{key:"accumViewportAgg",value:function(e){var t=this.property.eval(e);Number.isNaN(t)||(this._value=this._value+t)}},{key:"_resetViewportAgg",value:function(){this._value=0}},{key:"value",get:function(){return this._value}}]),t}(f.default)},"./src/renderer/viz/expressions/base.js":
/*!**********************************************!*\
  !*** ./src/renderer/viz/expressions/base.js ***!
  \**********************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return h});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! ./utils */"./src/renderer/viz/expressions/utils.js"),u=n(/*! ../expressions */"./src/renderer/viz/expressions.js"),l=n(/*! ../../schema */"./src/renderer/schema.js"),c=n(/*! ../../../errors/carto-validation-error */"./src/errors/carto-validation-error.js"),p=n(/*! ../../../errors/carto-runtime-error */"./src/errors/carto-runtime-error.js"),h=function(){function e(t){i()(this,e),this._initializeChildren(t),this._addParentToChildren(),this.preface="",this._shaderBindings=new Map,this.expressionName=function(e){if(e.toUpperCase()===e)return e.toLowerCase();return e.charAt(0).toLowerCase()+e.slice(1)}(this.constructor.name)}return a()(e,[{key:"eval",value:function(e){throw new p.default("Unimplemented")}},{key:"toString",value:function(){return"".concat(this.expressionName,"(").concat(this._getChildren().map(function(e){return e.toString()}).join(", "),")")}},{key:"isAnimated",value:function(){return this._getChildren().some(function(e){return e.isAnimated()})}},{key:"blendTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;e=Object(s.implicitCast)(e);var n=this.parent,r=Object(u.blend)(this,e,Object(u.transition)(t));return n.replaceChild(this,r),r.notify(),e}},{key:"isA",value:function(e){return this instanceof e}},{key:"notify",value:function(){this.parent.notify()}},{key:"accumViewportAgg",value:function(e){this._getChildren().forEach(function(t){return t.accumViewportAgg(e)})}},{key:"loadImages",value:function(){return Promise.all(this._getChildren().map(function(e){return e.loadImages()}))}},{key:"_bindMetadata",value:function(e){this._getChildren().forEach(function(t){return t._bindMetadata(e)})}},{key:"_initializeChildren",value:function(e){Array.isArray(e)?this._initializeChildrenArray(e):this._initializeChildrenObject(e)}},{key:"_initializeChildrenArray",value:function(e){var t=this;if(this.maxParameters&&this.maxParameters<e.length)throw new c.default("".concat(c.CartoValidationTypes.TOO_MANY_ARGS," Extra parameters, got ").concat(e.length," but maximum is ").concat(this.maxParameters));this.childrenNames=[],e.map(function(e,n){var r="".concat(e.type,"-").concat(n);t.childrenNames.push(r),t[r]=Object(s.implicitCast)(e)})}},{key:"_initializeChildrenObject",value:function(e){var t=this;if(this.childrenNames=Object.keys(e),this.maxParameters&&this.maxParameters<this.childrenNames.length)throw new c.default("".concat(c.CartoValidationTypes.TOO_MANY_ARGS," Extra parameters, got ").concat(this.childrenNames.length," but maximum is ").concat(this.maxParameters));Object.keys(e).map(function(n){t[n]=Object(s.implicitCast)(e[n])})}},{key:"_addParentToChildren",value:function(){var e=this;this._getChildren().map(function(t){t.parent=e})}},{key:"_setUID",value:function(e){this._uid=e.getID(this),this._getChildren().map(function(t){return t._setUID(e)})}},{key:"_dataReady",value:function(){this._getChildren().map(function(e){return e._dataReady()})}},{key:"isFeatureDependent",value:function(){return this._getChildren().some(function(e){return e.isFeatureDependent()})}},{key:"_prefaceCode",value:function(e){return e?"\n".concat(this._buildGLSLCode(e),"\n"):""}},{key:"_buildGLSLCode",value:function(e){return"\n            #ifndef DEF_".concat(this._uid,"\n            #define DEF_").concat(this._uid,"\n            ").concat(e,"\n            #endif")}},{key:"_getDependencies",value:function(){return this._getChildren().map(function(e){return e._getDependencies()}).reduce(function(e,t){return e.concat(t)},[])}},{key:"_resolveAliases",value:function(e){this._getChildren().map(function(t){return t._resolveAliases(e)})}},{key:"_setGenericGLSL",value:function(e,t){this.inlineMaker=e,this.preface=t||""}},{key:"_applyToShaderSource",value:function(e){var t=this,n=this.childrenNames.map(function(n){return t[n]._applyToShaderSource(e)}),r={};return n.map(function(e,n){r[t.childrenNames[n]]=e.inline}),{preface:this._prefaceCode(n.map(function(e){return e.preface}).reduce(function(e,t){return e+t},"")+this.preface),inline:this.inlineMaker(r,e)}}},{key:"_postShaderCompile",value:function(e,t){var n=this;this.childrenNames.forEach(function(r){return n[r]._postShaderCompile(e,t)})}},{key:"_getBinding",value:function(e){return this._shaderBindings.has(e)||this._shaderBindings.set(e,{}),this._shaderBindings.get(e)}},{key:"_resetViewportAgg",value:function(e){this._getChildren().forEach(function(t){return t._resetViewportAgg(e)})}},{key:"_setTimestamp",value:function(e){var t=this;this.childrenNames.forEach(function(n){return t[n]._setTimestamp(e)})}},{key:"_preDraw",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this.childrenNames.forEach(function(t){var r;return(r=e[t])._preDraw.apply(r,n)})}},{key:"replaceChild",value:function(e,t){var n=this;this[this.childrenNames.find(function(t){return n[t]===e})]=t,t.parent=this,t.notify=e.notify}},{key:"_blendFrom",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!this.default||!e.default){e=Object(s.implicitCast)(e);var r=this.parent,i=Object(u.blend)(e,this,Object(u.transition)(t),n);r.replaceChild(this,i),i.notify()}}},{key:"_getChildren",value:function(){var e=this;return this.childrenNames.map(function(t){return e[t]})}},{key:"_getMinimumNeededSchema",value:function(){return this._getChildren().map(function(e){return e._getMinimumNeededSchema()}).reduce(l.union,l.IDENTITY)}},{key:"value",get:function(){return this.eval()}}]),e}()},"./src/renderer/viz/expressions/basic/List.js":
/*!****************************************************!*\
  !*** ./src/renderer/viz/expressions/basic/List.js ***!
  \****************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return w});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/get */"./node_modules/@babel/runtime/helpers/get.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(f),m=n(/*! ../base */"./src/renderer/viz/expressions/base.js"),_=n(/*! ../utils */"./src/renderer/viz/expressions/utils.js"),y=n(/*! ../ListImage */"./src/renderer/viz/expressions/ListImage.js"),v=n(/*! ./ListGeneric */"./src/renderer/viz/expressions/basic/ListGeneric.js"),g=n(/*! ../ListTransform */"./src/renderer/viz/expressions/ListTransform.js"),b=n(/*! ../../../../errors/carto-validation-error */"./src/errors/carto-validation-error.js"),x=["number","category","color","time","image","transformation"],w=function(e){function t(e){var n;if(i()(this,t),Object(_.checkMaxArguments)(arguments,1,"list"),!e)throw new b.default("".concat(b.CartoValidationTypes.MISSING_REQUIRED," list(): invalid parameters: must receive at least one argument."));if(Array.isArray(e)||(e=[e]),!(e=e.map(_.implicitCast)).length)throw new b.default("".concat(b.CartoValidationTypes.MISSING_REQUIRED," list(): invalid parameters: must receive at least one argument."));return e.map(function(e,t){Object(_.checkExpression)("list","item[".concat(t,"]"),t,e)}),(n=u()(this,c()(t).call(this,e))).elems=e,n}return d()(t,e),a()(t,[{key:"_bindMetadata",value:function(e){var n=this;if(h()(c()(t.prototype),"_bindMetadata",this).call(this,e),this._setTypes(),-1===x.indexOf(this.childType))throw new b.default("".concat(b.CartoValidationTypes.INCORRECT_TYPE," list(): invalid parameters type: ").concat(this.childType,"."));switch(this.elems.map(function(e,t){if(Object(_.checkExpression)("list","item[".concat(t,"]"),t,e),e.type!==n.childType)throw new b.default("".concat(b.CartoValidationTypes.INCORRECT_TYPE," list(): invalid ").concat(Object(_.getOrdinalFromIndex)(t+1)," parameter type, invalid argument type combination."))}),this.elems[0].type){case"image":Object.setPrototypeOf(this,y.default.prototype);break;case"transformation":Object.setPrototypeOf(this,g.default.prototype);break;default:Object.setPrototypeOf(this,v.default.prototype)}return this._bindMetadata(e)}},{key:"_setTypes",value:function(){this.childType=this.elems[0].type,this.type="".concat(this.childType,"-list")}}]),t}(m.default)},"./src/renderer/viz/expressions/basic/ListGeneric.js":
/*!***********************************************************!*\
  !*** ./src/renderer/viz/expressions/basic/ListGeneric.js ***!
  \***********************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return f});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),h=n.n(p),f=function(e){function t(){return i()(this,t),u()(this,c()(t).apply(this,arguments))}return h()(t,e),a()(t,[{key:"eval",value:function(e){return this.elems.map(function(t){return t.eval(e)})}},{key:"_applyToShaderSource",value:function(e){var t=this.elems.map(function(t){return t._applyToShaderSource(e)});return{preface:t.map(function(e){return e.preface}).join("\n"),inline:t.map(function(e){return e.inline})}}},{key:"value",get:function(){return this.elems.map(function(e){return e.value})}}]),t}(n(/*! ../base */"./src/renderer/viz/expressions/base.js").default)},"./src/renderer/viz/expressions/basic/category.js":
/*!********************************************************!*\
  !*** ./src/renderer/viz/expressions/basic/category.js ***!
  \********************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return m});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),h=n.n(p),f=n(/*! ../base */"./src/renderer/viz/expressions/base.js"),d=n(/*! ../utils */"./src/renderer/viz/expressions/utils.js"),m=function(e){function t(e){var n;return i()(this,t),Object(d.checkMaxArguments)(arguments,1,"category"),Object(d.checkString)("category","categoryName",0,e),(n=u()(this,c()(t).call(this,{}))).expr=e,n.type="category",n}return h()(t,e),a()(t,[{key:"eval",value:function(){return this.expr}},{key:"isAnimated",value:function(){return!1}},{key:"_bindMetadata",value:function(e){this._metadata=e}},{key:"_applyToShaderSource",value:function(){return{preface:this._prefaceCode("uniform float cat".concat(this._uid,";\n")),inline:"cat".concat(this._uid)}}},{key:"_postShaderCompile",value:function(e,t){this._getBinding(e).uniformLocation=t.getUniformLocation(e,"cat".concat(this._uid))}},{key:"_preDraw",value:function(e,t,n){var r=this._metadata.categoryToID.get(this.expr);n.uniform1f(this._getBinding(e).uniformLocation,r)}},{key:"value",get:function(){return this.expr}}]),t}(f.default)},"./src/renderer/viz/expressions/basic/constant.js":
/*!********************************************************!*\
  !*** ./src/renderer/viz/expressions/basic/constant.js ***!
  \********************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return m});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),h=n.n(p),f=n(/*! ../base */"./src/renderer/viz/expressions/base.js"),d=n(/*! ../utils */"./src/renderer/viz/expressions/utils.js"),m=function(e){function t(e){var n;return i()(this,t),Object(d.checkMaxArguments)(arguments,1,"constant"),Object(d.checkNumber)("constant","x",0,e),(n=u()(this,c()(t).call(this,{}))).expr=e,n.type="number",n.inlineMaker=function(){return"(".concat(e.toFixed(20),")")},n}return h()(t,e),a()(t,[{key:"toString",value:function(){return this.expr}},{key:"eval",value:function(){return this.expr}},{key:"value",get:function(){return this.eval()}}]),t}(f.default)},"./src/renderer/viz/expressions/basic/number.js":
/*!******************************************************!*\
  !*** ./src/renderer/viz/expressions/basic/number.js ***!
  \******************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return m});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),h=n.n(p),f=n(/*! ../base */"./src/renderer/viz/expressions/base.js"),d=n(/*! ../utils */"./src/renderer/viz/expressions/utils.js"),m=function(e){function t(e){var n;return i()(this,t),Object(d.checkMaxArguments)(arguments,1,"number"),Object(d.checkNumber)("number","x",0,e),(n=u()(this,c()(t).call(this,{}))).expr=e,n.type="number",n}return h()(t,e),a()(t,[{key:"eval",value:function(){return this.expr}},{key:"toString",value:function(){return"".concat(this.expr)}},{key:"isAnimated",value:function(){return!1}},{key:"_applyToShaderSource",value:function(){return{preface:this._prefaceCode("uniform float number".concat(this._uid,";")),inline:"number".concat(this._uid)}}},{key:"_postShaderCompile",value:function(e,t){this._getBinding(e).uniformLocation=t.getUniformLocation(e,"number".concat(this._uid))}},{key:"_preDraw",value:function(e,t,n){n.uniform1f(this._getBinding(e).uniformLocation,this.expr)}},{key:"value",get:function(){return this.eval()}}]),t}(f.default)},"./src/renderer/viz/expressions/basic/property.js":
/*!********************************************************!*\
  !*** ./src/renderer/viz/expressions/basic/property.js ***!
  \********************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return w});var r=n(/*! @babel/runtime/helpers/defineProperty */"./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/assertThisInitialized */"./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(f),m=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),_=n.n(m),y=n(/*! @babel/runtime/helpers/get */"./node_modules/@babel/runtime/helpers/get.js"),v=n.n(y),g=n(/*! ../base */"./src/renderer/viz/expressions/base.js"),b=n(/*! ../utils */"./src/renderer/viz/expressions/utils.js"),x=n(/*! ../../../../errors/carto-validation-error */"./src/errors/carto-validation-error.js"),w=function(e){function t(e){var n;if(a()(this,t),Object(b.checkMaxArguments)(arguments,1,"property"),Object(b.checkString)("property","name",0,e),""===e)throw new x.default("".concat(x.CartoValidationTypes.INCORRECT_VALUE," property(): invalid parameter, zero-length string"));return(n=h()(this,_()(t).call(this,{}))).name=e,n.expressionName=e,v()(_()(t.prototype),"_setGenericGLSL",c()(n)).call(c()(n),function(e,t){return t(n.name)}),n}return d()(t,e),u()(t,[{key:"isFeatureDependent",value:function(){return!0}},{key:"eval",value:function(e){if(!e)throw new x.default("".concat(x.CartoValidationTypes.MISSING_REQUIRED," A property needs to be evaluated in a 'feature'."));return e[this.name]&&e[this.name]===Number.MIN_SAFE_INTEGER?Number.NaN:e[this.name]}},{key:"toString",value:function(){return"$".concat(this.expressionName)}},{key:"_bindMetadata",value:function(e){var t=e.properties[this.name];if(!t)throw new x.default("".concat(x.CartoValidationTypes.MISSING_REQUIRED," Property '").concat(this.name,"' does not exist"));this._metadata=e,this.type=t.type,"category"!==this.type||this.numCategories||Object.defineProperty(this,"numCategories",{get:function(){return t.categories.length}})}},{key:"_applyToShaderSource",value:function(e){return{preface:"",inline:e(this.name)}}},{key:"_getMinimumNeededSchema",value:function(){return i()({},this.name,[{type:"unaggregated"}])}},{key:"value",get:function(){return this.eval()}},{key:"categories",get:function(){return"category"===this.type?this._metadata.properties[this.name].categories:void 0}}]),t}(g.default)},"./src/renderer/viz/expressions/basic/variable.js":
/*!********************************************************!*\
  !*** ./src/renderer/viz/expressions/basic/variable.js ***!
  \********************************************************/
/*! exports provided: Variable, default */function(e,t,n){"use strict";n.r(t),n.d(t,"Variable",function(){return d}),n.d(t,"default",function(){return m});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),c=n.n(l),p=n(/*! ../base */"./src/renderer/viz/expressions/base.js"),h=n(/*! ../utils */"./src/renderer/viz/expressions/utils.js"),f=n(/*! ../../../../errors/carto-validation-error */"./src/errors/carto-validation-error.js"),d=function(e){function t(){return i()(this,t),a()(this,u()(t).call(this,{}))}return c()(t,e),t}(p.default);function m(e){if(Object(h.checkMaxArguments)(arguments,1,"variable"),Object(h.checkString)("variable","name",0,e),""===e)throw new f.default("".concat(f.CartoValidationTypes.INCORRECT_VALUE," variable(): invalid parameter, zero-length string"));var t,n=function(n){if(!n[e])throw new f.default("".concat(f.CartoValidationTypes.MISSING_REQUIRED," variable() with name '").concat(e,"' doesn't exist"));t=n[e]},r=function(){return[t]},i={set:function(e,n,r){if("parent"===n)e[n]=r;else if("notify"===n)e[n]=r;else{if(!t||!t[n])return!1;t[n]=r}return!0},get:function(e,i){return"parent"===i?e[i]:"_resolveAliases"===i?n:"_getDependencies"===i?r:"notify"===i?e[i]:"blendTo"===i?e[i]:t&&t[i]?(o=t[i])&&"[object Function]"==={}.toString.call(o)?t[i].bind(t):t[i]:e[i];var o}};return new Proxy(new d,i)}},"./src/renderer/viz/expressions/belongs.js":
/*!*************************************************!*\
  !*** ./src/renderer/viz/expressions/belongs.js ***!
  \*************************************************/
/*! exports provided: In, Nin */function(e,t,n){"use strict";n.r(t),n.d(t,"In",function(){return y}),n.d(t,"Nin",function(){return v});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/get */"./node_modules/@babel/runtime/helpers/get.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(f),m=n(/*! ./utils */"./src/renderer/viz/expressions/utils.js"),_=n(/*! ./base */"./src/renderer/viz/expressions/base.js"),y=g("in",function(e){if(0===e.length)return function(){return"0."};return function(t){return"((".concat(e.map(function(e,n){return"(".concat(t.input," == ").concat(t.list[n],")")}).join(" || "),")? 1.: 0.)")}},function(e,t){return t.some(function(t){return t===e})?1:0});var v=g("nin",function(e){if(0===e.length)return function(){return"1."};return function(t){return"((".concat(e.map(function(e,n){return"(".concat(t.input," != ").concat(t.list[n],")")}).join(" && "),")? 1.: 0.)")}},function(e,t){return t.some(function(t){return t===e})?0:1});function g(e,t,n){return function(r){function o(n,r){var a;return i()(this,o),Object(m.checkMaxArguments)(arguments,2,e),n=Object(m.implicitCast)(n),r=Object(m.implicitCast)(r),Object(m.checkExpression)(e,"input",0,n),Object(m.checkExpression)(e,"list",1,r),(a=u()(this,c()(o).call(this,{input:n,list:r}))).inlineMaker=t(a.list.elems),a.type="number",a}return d()(o,r),a()(o,[{key:"eval",value:function(e){return n(this.input.eval(e),this.list.eval(e))}},{key:"_bindMetadata",value:function(t){h()(c()(o.prototype),"_bindMetadata",this).call(this,t),Object(m.checkType)(e,"input",0,"category",this.input),Object(m.checkType)(e,"list",1,"category-list",this.list)}}]),o}(_.default)}},"./src/renderer/viz/expressions/between.js":
/*!*************************************************!*\
  !*** ./src/renderer/viz/expressions/between.js ***!
  \*************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return y});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/get */"./node_modules/@babel/runtime/helpers/get.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(f),m=n(/*! ./base */"./src/renderer/viz/expressions/base.js"),_=n(/*! ./utils */"./src/renderer/viz/expressions/utils.js"),y=function(e){function t(e,n,r){var o;return i()(this,t),Object(_.checkMaxArguments)(arguments,3,"between"),e=Object(_.implicitCast)(e),n=Object(_.implicitCast)(n),r=Object(_.implicitCast)(r),(o=u()(this,c()(t).call(this,{input:e,lowerLimit:n,upperLimit:r}))).type="number",o.inlineMaker=function(e){return"((".concat(e.input," >= ").concat(e.lowerLimit," &&  ").concat(e.input," <= ").concat(e.upperLimit,") ? 1. : 0.)")},o}return d()(t,e),a()(t,[{key:"eval",value:function(e){var t=this.input.eval(e),n=this.lowerLimit.eval(e),r=this.upperLimit.eval(e);return t>=n&&t<=r?1:0}},{key:"_bindMetadata",value:function(e){h()(c()(t.prototype),"_bindMetadata",this).call(this,e),Object(_.checkType)("between","input",0,"number",this.input),Object(_.checkType)("between","lowerLimit",1,"number",this.lowerLimit),Object(_.checkType)("between","upperLimit",2,"number",this.upperLimit)}}]),t}(m.default)},"./src/renderer/viz/expressions/binary.js":
/*!************************************************!*\
  !*** ./src/renderer/viz/expressions/binary.js ***!
  \************************************************/
/*! exports provided: Mul, Div, Add, Sub, Mod, Pow, GreaterThan, GreaterThanOrEqualTo, LessThan, LessThanOrEqualTo, Equals, NotEquals, Or, And */function(e,t,n){"use strict";n.r(t),n.d(t,"Mul",function(){return k}),n.d(t,"Div",function(){return C}),n.d(t,"Add",function(){return M}),n.d(t,"Sub",function(){return P}),n.d(t,"Mod",function(){return A}),n.d(t,"Pow",function(){return S}),n.d(t,"GreaterThan",function(){return O}),n.d(t,"GreaterThanOrEqualTo",function(){return I}),n.d(t,"LessThan",function(){return R}),n.d(t,"LessThanOrEqualTo",function(){return j}),n.d(t,"Equals",function(){return L}),n.d(t,"NotEquals",function(){return z}),n.d(t,"Or",function(){return D}),n.d(t,"And",function(){return B});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/get */"./node_modules/@babel/runtime/helpers/get.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(f),m=n(/*! ../expressions */"./src/renderer/viz/expressions.js"),_=n(/*! ./utils */"./src/renderer/viz/expressions/utils.js"),y=n(/*! ./base */"./src/renderer/viz/expressions/base.js"),v=n(/*! ../../../errors/carto-validation-error */"./src/errors/carto-validation-error.js"),g=0,b=1,x=2,w=4,E=8,T=16,k=N("mul",b|x|w|T,function(e,t){return e*t},function(e,t){return"(".concat(e," * ").concat(t,")")}),C=N("div",b|x|w|T,function(e,t){return e/t},function(e,t){return"(".concat(e," / ").concat(t,")")}),M=N("add",b|w|T,function(e,t){return e+t},function(e,t){return"(".concat(e," + ").concat(t,")")}),P=N("sub",b|w|T,function(e,t){return e-t},function(e,t){return"(".concat(e," - ").concat(t,")")}),A=N("mod",b,function(e,t){return e%t},function(e,t){return"mod(".concat(e,", ").concat(t,")")}),S=N("pow",b,function(e,t){return Math.pow(e,t)},function(e,t){return"pow(".concat(e,", ").concat(t,")")}),O=N("greaterThan",b,function(e,t){return e>t?1:0},function(e,t){return"(".concat(e,">").concat(t,"? 1.:0.)")}),I=N("greaterThanOrEqualTo",b,function(e,t){return e>=t?1:0},function(e,t){return"(".concat(e,">=").concat(t,"? 1.:0.)")}),R=N("lessThan",b,function(e,t){return e<t?1:0},function(e,t){return"(".concat(e,"<").concat(t,"? 1.:0.)")}),j=N("lessThanOrEqualTo",b,function(e,t){return e<=t?1:0},function(e,t){return"(".concat(e,"<=").concat(t,"? 1.:0.)")}),L=N("equals",b|E,function(e,t){return e===t?1:0},function(e,t){return"(".concat(e,"==").concat(t,"? 1.:0.)")}),z=N("notEquals",b|E,function(e,t){return e!==t?1:0},function(e,t){return"(".concat(e,"!=").concat(t,"? 1.:0.)")}),D=N("or",b,function(e,t){return Math.min(e+t,1)},function(e,t){return"min(".concat(e," + ").concat(t,", 1.)")}),B=N("and",b,function(e,t){return Math.min(e*t,1)},function(e,t){return"min(".concat(e," * ").concat(t,", 1.)")});function N(e,t,n,r){return function(o){function s(t,o){var a;if(i()(this,s),Object(_.checkMaxArguments)(arguments,2,e),Number.isFinite(t)&&Number.isFinite(o))return u()(a,Object(m.number)(n(t,o)));var l=function(e,t){if(e.type&&t.type)return"number"===e.type&&"number"===t.type?b:"number"===e.type&&"color"===t.type?x:"color"===e.type&&"number"===t.type?x:"color"===e.type&&"color"===t.type?w:"category"===e.type&&"category"===t.type?E:"image"===e.type&&"color"===t.type||"image"===e.type&&"color"===t.type||"image"===e.type&&"image"===t.type||"color"===e.type&&"image"===t.type?T:g;if(!e.type&&!t.type)return;var n=e.type||t.type;if("color"===n)return x}(t=Object(_.implicitCast)(t),o=Object(_.implicitCast)(o));return(a=u()(this,c()(s).call(this,{a:t,b:o}))).expressionName=e,a.type=q(l),a.inlineMaker=function(e){return r(e.a,e.b)},a}return d()(s,o),a()(s,[{key:"eval",value:function(e){return n(this.a.eval(e),this.b.eval(e))}},{key:"_bindMetadata",value:function(n){h()(c()(s.prototype),"_bindMetadata",this).call(this,n);var r=[this.a,this.b],i=r[0],o=r[1],a=function(e,t){return e.type&&t.type?"number"===e.type&&"number"===t.type?b:"number"===e.type&&"color"===t.type?x:"color"===e.type&&"number"===t.type?x:"color"===e.type&&"color"===t.type?w:"category"===e.type&&"category"===t.type?E:"image"===e.type&&"color"===t.type||"image"===e.type&&"color"===t.type||"image"===e.type&&"image"===t.type||"color"===e.type&&"image"===t.type?T:g:void 0}(i,o);if(a===g||!(a&t))throw new v.default("".concat(v.CartoValidationTypes.INCORRECT_TYPE," ").concat(e,"(): invalid parameter types\n'x' type was ").concat(i.type,", 'y' type was ").concat(o.type));this.type=q(a)}},{key:"value",get:function(){return this.eval()}}]),s}(y.default)}function q(e){switch(e){case b:return"number";case x:case w:return"color";case E:return"number";case T:return"image";default:return}}},"./src/renderer/viz/expressions/blend.js":
/*!***********************************************!*\
  !*** ./src/renderer/viz/expressions/blend.js ***!
  \***********************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return g});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/get */"./node_modules/@babel/runtime/helpers/get.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(f),m=n(/*! ./utils */"./src/renderer/viz/expressions/utils.js"),_=n(/*! ./transition */"./src/renderer/viz/expressions/transition.js"),y=n(/*! ./base */"./src/renderer/viz/expressions/base.js"),v=n(/*! ../../../errors/carto-validation-error */"./src/errors/carto-validation-error.js"),g=function(e){function t(e,n,r,o){var a;i()(this,t),Object(m.checkMaxArguments)(arguments,4,"blend"),e=Object(m.implicitCast)(e),n=Object(m.implicitCast)(n),r=Object(m.implicitCast)(r),Object(m.checkExpression)("blend","a",0,e),Object(m.checkExpression)("blend","b",1,n),Object(m.checkExpression)("blend","mix",2,r),e.type&&n.type&&b(e,n);var s=r;return o&&(r=o(r)),(a=u()(this,c()(t).call(this,{a:e,b:n,mix:r}))).originalMix=s,e.type&&n.type&&(a.type=e.type),a.inlineMaker=function(e){return"mix(".concat(e.a,", ").concat(e.b,", clamp(").concat(e.mix,", 0., 1.))")},a}return d()(t,e),a()(t,[{key:"eval",value:function(e){var t=Object(m.clamp)(this.mix.eval(e),0,1),n=this.a.eval(e),r=this.b.eval(e);return Object(m.mix)(n,r,t)}},{key:"replaceChild",value:function(e,n){e===this.mix&&(this.originalMix=n),h()(c()(t.prototype),"replaceChild",this).call(this,e,n)}},{key:"_bindMetadata",value:function(e){h()(c()(t.prototype),"_bindMetadata",this).call(this,e),b(this.a,this.b),Object(m.checkType)("blend","mix",2,"number",this.mix),this.type=this.a.type}},{key:"_preDraw",value:function(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];(e=h()(c()(t.prototype),"_preDraw",this)).call.apply(e,[this].concat(r)),this.originalMix.isA(_.default)&&!this.originalMix.isAnimated()&&(this.parent.replaceChild(this,this.b),this.notify())}}]),t}(y.default);function b(e,t){if(e.type!==t.type||!["number","color","image","placement"].includes(e.type))throw new v.default("".concat(v.CartoValidationTypes.INCORRECT_TYPE," blend(): invalid parameter types\n\t'a' type was '").concat(e.type,"'\n\t'b' type was '").concat(t.type,"'"))}},"./src/renderer/viz/expressions/buckets.js":
/*!*************************************************!*\
  !*** ./src/renderer/viz/expressions/buckets.js ***!
  \*************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return g});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/get */"./node_modules/@babel/runtime/helpers/get.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(f),m=n(/*! ./base */"./src/renderer/viz/expressions/base.js"),_=n(/*! ./utils */"./src/renderer/viz/expressions/utils.js"),y=n(/*! ../../../errors/carto-validation-error */"./src/errors/carto-validation-error.js"),v=n(/*! ./constants */"./src/renderer/viz/expressions/constants.js"),g=function(e){function t(e,n){var r;i()(this,t),Object(_.checkMaxArguments)(arguments,2,"buckets");var o={input:e=Object(_.implicitCast)(e),list:n=Object(_.implicitCast)(n)};return(r=u()(this,c()(t).call(this,o))).numCategories=null,r.numCategoriesWithoutOthers=null,r.type="category",r}return d()(t,e),a()(t,[{key:"eval",value:function(e){var t=this.input.eval(e),n=this.numCategoriesWithoutOthers-1||1;if("category"===this.input.type){for(var r=0;r<this.list.elems.length;r++)if(t===this.list.elems[r].eval(e))return r/n;return v.OTHERS_INDEX}for(var i=0;i<this.list.elems.length;i++)if(t<this.list.elems[i].eval(e))return i/n;return 1}},{key:"_bindMetadata",value:function(e){var n=this;if(h()(c()(t.prototype),"_bindMetadata",this).call(this,e),"number"!==this.input.type&&"category"!==this.input.type)throw new y.default("".concat(y.CartoValidationTypes.INCORRECT_TYPE," buckets(): invalid first parameter type\n\t'input' type was ").concat(this.input.type));Object(_.checkType)("buckets","list",1,["number-list","category-list"],this.list),this.list.elems.map(function(e,t){if(n.input.type!==e.type)throw new y.default("".concat(y.CartoValidationTypes.INCORRECT_TYPE," buckets(): invalid ").concat(Object(_.getOrdinalFromIndex)(t+1)," parameter type")+"\n\texpected type was ".concat(n.input.type,"\n\tactual type was ").concat(e.type));if("number"!==e.type&&"category"!==e.type)throw new y.default("".concat(y.CartoValidationTypes.INCORRECT_TYPE," buckets(): invalid ").concat(Object(_.getOrdinalFromIndex)(t+1)," parameter type\n\ttype was ").concat(e.type))}),this.numCategories=this.list.elems.length+1,this.numCategoriesWithoutOthers="category"===this.input.type?this.numCategories-1:this.numCategories}},{key:"_applyToShaderSource",value:function(e){var t=this,n=this.childrenNames.map(function(n){return t[n]._applyToShaderSource(e)}),r={};n.map(function(e,n){r[t.childrenNames[n]]=e});var i="buckets".concat(this._uid),o="category"===this.input.type?"==":"<",a=this.numCategoriesWithoutOthers-1||1,s=this.list.elems.map(function(e,t){return"".concat(t>0?"else":""," if (x").concat(o,"(").concat(r.list.inline[t],")){\n                return ").concat(t,"./").concat(a.toFixed(20),";\n            }")}).join(""),u="float ".concat(i,"(float x){\n            ").concat(s,"\n            return ").concat("category"===this.input.type?v.OTHERS_GLSL_VALUE:(this.numCategories-1).toFixed(20),";\n        }");return{preface:this._prefaceCode(r.input.preface+r.list.preface+u),inline:"".concat(i,"(").concat(r.input.inline,")")}}},{key:"_getLegendData",value:function(e){var t=this.toString(),n=this.list.elems.map(function(e){return e.eval()});return{data:"number"===this.input.type?function(e){for(var t=[],n=0;n<=e.length;n++){var r=n-1>=0?e[n-1]:Number.NEGATIVE_INFINITY,i=n<e.length?e[n]:Number.POSITIVE_INFINITY,o=[r,i],a=n/e.length;t.push({key:o,value:a})}return t}(n):function(e,t){var n=e.length-1,r=e.map(function(e,t){var r=e,i=t/n;return{key:r,value:i}});return r.push({key:t.othersLabel,value:v.OTHERS_INDEX}),r}(n,e),name:t}}}]),t}(m.default)},"./src/renderer/viz/expressions/classification/Classifier.js":
/*!*******************************************************************!*\
  !*** ./src/renderer/viz/expressions/classification/Classifier.js ***!
  \*******************************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return v});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/get */"./node_modules/@babel/runtime/helpers/get.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(f),m=n(/*! ../base */"./src/renderer/viz/expressions/base.js"),_=n(/*! ../../expressions */"./src/renderer/viz/expressions.js"),y=0,v=function(e){function t(e,n){var r;if(i()(this,t),n<=1)throw new RangeError("The number of 'buckets' must be >=2, but ".concat(n," was used."));var o=function(e,t){for(var n=[],r=0;r<t-1;r++)e["arg".concat(r)]=Object(_.number)(0),n.push(e["arg".concat(r)]);return n}(e,n);return(r=u()(this,c()(t).call(this,e))).classifierUID=y++,r.numCategories=n,r.numCategoriesWithoutOthers=n,r.breakpoints=o,r.type="category",r}return d()(t,e),a()(t,[{key:"toString",value:function(){return"".concat(this.expressionName,"(").concat(this.input.toString(),", ").concat(this.numCategories,")")}},{key:"eval",value:function(e){var t=this.input.eval(e),n=this.breakpoints.findIndex(function(e){return t<=e.expr}),r=this.numCategories-1||1;return-1===n?1:n/r}},{key:"getBreakpointList",value:function(){return this._genBreakpoints(),this.breakpoints.map(function(e){return e.expr})}},{key:"_genBreakpoints",value:function(){}},{key:"_applyToShaderSource",value:function(e){var t=this,n=this.childrenNames.map(function(n){return t[n]._applyToShaderSource(e)}),r={};n.map(function(e,n){r[t.childrenNames[n]]=e.inline});var i="classifier".concat(this.classifierUID),o=this.numCategories-1||1,a=this.breakpoints.map(function(e,t){return"".concat(t>0?"else":""," if (x<(").concat(r["arg".concat(t)],")){\n                return ").concat((t/o).toFixed(20),";\n            }")}).join(""),s="float ".concat(i,"(float x){\n            ").concat(a,"\n            return 1.;\n        }");return{preface:this._prefaceCode(n.map(function(e){return e.preface}).reduce(function(e,t){return e+t},"")+s),inline:"".concat(i,"(").concat(r.input,")")}}},{key:"_preDraw",value:function(e,n,r){this._genBreakpoints(),h()(c()(t.prototype),"_preDraw",this).call(this,e,n,r)}},{key:"_getLegendData",value:function(){for(var e=this.getBreakpointList(),t=e.length,n=this.toString(),r=[],i=0;i<=t;i++){var o=[e[i-1]||Number.NEGATIVE_INFINITY,e[i]||Number.POSITIVE_INFINITY],a=i/t;r.push({key:o,value:a})}return{name:n,data:r}}}]),t}(m.default)},"./src/renderer/viz/expressions/classification/GlobalEqIntervals.js":
/*!**************************************************************************!*\
  !*** ./src/renderer/viz/expressions/classification/GlobalEqIntervals.js ***!
  \**************************************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return v});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/get */"./node_modules/@babel/runtime/helpers/get.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(f),m=n(/*! ./Classifier */"./src/renderer/viz/expressions/classification/Classifier.js"),_=n(/*! ../basic/property */"./src/renderer/viz/expressions/basic/property.js"),y=n(/*! ../utils */"./src/renderer/viz/expressions/utils.js"),v=function(e){function t(e,n){return i()(this,t),Object(y.checkMaxArguments)(arguments,2,"globalEqIntervals"),Object(y.checkInstance)("globalEqIntervals","input",0,_.default,e&&(e.property||e)),Object(y.checkNumber)("globalEqIntervals","buckets",1,n),u()(this,c()(t).call(this,{input:e},n))}return d()(t,e),a()(t,[{key:"_bindMetadata",value:function(e){var n=this;h()(c()(t.prototype),"_bindMetadata",this).call(this,e),Object(y.checkExpression)("globalEqIntervals","input",0,this.input),Object(y.checkType)("globalEqIntervals","input",0,"number",this.input);var r=e.properties[this.input.name],i=r.min,o=r.max;this.min=i,this.max=o,this.breakpoints.map(function(e,t){var r=(t+1)/n.numCategories;e.expr=i+(o-i)*r})}}]),t}(m.default)},"./src/renderer/viz/expressions/classification/GlobalQuantiles.js":
/*!************************************************************************!*\
  !*** ./src/renderer/viz/expressions/classification/GlobalQuantiles.js ***!
  \************************************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return v});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/get */"./node_modules/@babel/runtime/helpers/get.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(f),m=n(/*! ./Classifier */"./src/renderer/viz/expressions/classification/Classifier.js"),_=n(/*! ../basic/property */"./src/renderer/viz/expressions/basic/property.js"),y=n(/*! ../utils */"./src/renderer/viz/expressions/utils.js"),v=function(e){function t(e,n){return i()(this,t),Object(y.checkMaxArguments)(arguments,2,"globalQuantiles"),Object(y.checkInstance)("globalQuantiles","input",0,_.default,e&&(e.property||e)),Object(y.checkNumber)("globalQuantiles","buckets",1,n),u()(this,c()(t).call(this,{input:e},n))}return d()(t,e),a()(t,[{key:"_bindMetadata",value:function(e){var n=this;h()(c()(t.prototype),"_bindMetadata",this).call(this,e),Object(y.checkExpression)("globalQuantiles","input",0,this.input),Object(y.checkType)("globalQuantiles","input",0,"number",this.input);var r=e.sample.map(function(e){return e[n.input.name]});r.sort(function(e,t){return e-t}),this.breakpoints.map(function(e,t){var i=(t+1)/n.numCategories;e.expr=r[Math.floor(i*r.length)]})}}]),t}(m.default)},"./src/renderer/viz/expressions/classification/GlobalStandardDev.js":
/*!**************************************************************************!*\
  !*** ./src/renderer/viz/expressions/classification/GlobalStandardDev.js ***!
  \**************************************************************************/
/*! exports provided: default, calculateBreakpoints */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return x}),n.d(t,"calculateBreakpoints",function(){return w});var r=n(/*! @babel/runtime/helpers/toConsumableArray */"./node_modules/@babel/runtime/helpers/toConsumableArray.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/get */"./node_modules/@babel/runtime/helpers/get.js"),d=n.n(f),m=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),_=n.n(m),y=n(/*! ./Classifier */"./src/renderer/viz/expressions/classification/Classifier.js"),v=n(/*! ../basic/property */"./src/renderer/viz/expressions/basic/property.js"),g=n(/*! ../utils */"./src/renderer/viz/expressions/utils.js"),b=n(/*! ../stats */"./src/renderer/viz/expressions/stats.js"),x=function(e){function t(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(a()(this,t),Object(g.checkMaxArguments)(arguments,3,"globalStandardDev"),Object(g.checkInstance)("globalStandardDev","input",0,v.default,e&&(e.property||e)),Object(g.checkNumber)("globalStandardDev","buckets",1,n),Object(g.checkNumber)("globalStandardDev","classSize",2,i),i<=0)throw new RangeError("The 'classSize must be > 0.0, but '".concat(i,"' was used."));return(r=c()(this,h()(t).call(this,{input:e},n)))._classSize=i,r._sample=[],r}return _()(t,e),u()(t,[{key:"_bindMetadata",value:function(e){var n=this;d()(h()(t.prototype),"_bindMetadata",this).call(this,e),Object(g.checkExpression)("globalStandardDev","input",0,this.input),Object(g.checkType)("globalStandardDev","input",0,"number",this.input);var r=e.sample.map(function(e){return e[n.input.name]}),i=w(Object(b.average)(r),Object(b.standardDeviation)(r),this.numCategories,this._classSize);this.breakpoints.forEach(function(e,t){e.expr=i[t]})}}]),t}(y.default);function w(e,t,n,r){var o,a=[],s=[],u=n%2==0?0:1;do{var l=u*(t*r);a.push(e+l),s.push(e-l),(o=i()(new Set(a.concat(s)))).sort(function(e,t){return e-t}),u++}while(o.length<n-1);return o}},"./src/renderer/viz/expressions/classification/ViewportEqIntervals.js":
/*!****************************************************************************!*\
  !*** ./src/renderer/viz/expressions/classification/ViewportEqIntervals.js ***!
  \****************************************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return v});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/get */"./node_modules/@babel/runtime/helpers/get.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(f),m=n(/*! ./Classifier */"./src/renderer/viz/expressions/classification/Classifier.js"),_=n(/*! ../../expressions */"./src/renderer/viz/expressions.js"),y=n(/*! ../utils */"./src/renderer/viz/expressions/utils.js"),v=function(e){function t(e,n){i()(this,t),Object(y.checkMaxArguments)(arguments,2,"viewportEqIntervals"),Object(y.checkNumber)("viewportEqIntervals","buckets",1,n);var r={input:e,_min:Object(_.viewportMin)(e),_max:Object(_.viewportMax)(e)};return u()(this,c()(t).call(this,r,n))}return d()(t,e),a()(t,[{key:"_bindMetadata",value:function(e){h()(c()(t.prototype),"_bindMetadata",this).call(this,e),Object(y.checkType)("viewportEqIntervals","input",0,["number"],this.input)}},{key:"_genBreakpoints",value:function(){var e=this,t=this._min.eval(),n=this._max.eval();this.breakpoints.map(function(r,i){var o=(i+1)/e.numCategories;r.expr=t+(n-t)*o})}}]),t}(m.default)},"./src/renderer/viz/expressions/classification/ViewportQuantiles.js":
/*!**************************************************************************!*\
  !*** ./src/renderer/viz/expressions/classification/ViewportQuantiles.js ***!
  \**************************************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return v});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/get */"./node_modules/@babel/runtime/helpers/get.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(f),m=n(/*! ./Classifier */"./src/renderer/viz/expressions/classification/Classifier.js"),_=n(/*! ../utils */"./src/renderer/viz/expressions/utils.js"),y=n(/*! ../../expressions */"./src/renderer/viz/expressions.js"),v=function(e){function t(e,n){i()(this,t),Object(_.checkMaxArguments)(arguments,2,"viewportQuantiles"),Object(_.checkNumber)("viewportQuantiles","buckets",1,n);var r={input:e,_histogram:Object(y.viewportHistogram)(e)};return u()(this,c()(t).call(this,r,n))}return d()(t,e),a()(t,[{key:"_bindMetadata",value:function(e){h()(c()(t.prototype),"_bindMetadata",this).call(this,e),Object(_.checkType)("viewportQuantiles","input",0,["number"],this.input)}},{key:"_genBreakpoints",value:function(){var e=this,t=this._histogram.value,n=t.length,r=t[0].x[0],i=t[n-1].x[1],o=0,a=t.map(function(e){var t=e.y;return o+=t}),s=0,u=a[n-1],l=[];this.breakpoints.map(function(t,o){for(;s<n&&!(a[s]>(o+1)/e.numCategories*u);s++);var c=s/n*(i-r)+r;l.push(c),t.expr=c})}}]),t}(m.default)},"./src/renderer/viz/expressions/classification/ViewportStandardDev.js":
/*!****************************************************************************!*\
  !*** ./src/renderer/viz/expressions/classification/ViewportStandardDev.js ***!
  \****************************************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return g});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/get */"./node_modules/@babel/runtime/helpers/get.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(f),m=n(/*! ./Classifier */"./src/renderer/viz/expressions/classification/Classifier.js"),_=n(/*! ../utils */"./src/renderer/viz/expressions/utils.js"),y=n(/*! ../../expressions */"./src/renderer/viz/expressions.js"),v=n(/*! ./GlobalStandardDev */"./src/renderer/viz/expressions/classification/GlobalStandardDev.js"),g=function(e){function t(e,n){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(i()(this,t),Object(_.checkMaxArguments)(arguments,3,"viewportStandardDev"),Object(_.checkNumber)("viewportStandardDev","buckets",1,n),Object(_.checkNumber)("viewportStandardDev","classSize",2,o),o<=0)throw new RangeError("The 'classSize' must be > 0.0, but '".concat(o,"' was used."));var a={input:e,_histogram:Object(y.viewportHistogram)(e)};return(r=u()(this,c()(t).call(this,a,n)))._classSize=o,r}return d()(t,e),a()(t,[{key:"_bindMetadata",value:function(e){h()(c()(t.prototype),"_bindMetadata",this).call(this,e),Object(_.checkType)("viewportStandardDev","input",0,["number"],this.input)}},{key:"_genBreakpoints",value:function(){var e=this._averageFrom(this._histogram.value),t=this._standardDevFrom(this._histogram.value,e),n=Object(v.calculateBreakpoints)(e,t,this.numCategories,this._classSize);this.breakpoints.forEach(function(e,t){e.expr=n[t]})}},{key:"_averageFrom",value:function(e){var t=0,n=0;return e.forEach(function(e){var r=e.x,i=e.y;t+=i;var o=(r[0]+r[1])/2;n+=o*i}),n/t}},{key:"_standardDevFrom",value:function(e,t){var n=0,r=0;e.forEach(function(e){var i=e.x,o=e.y;n+=o;var a=(i[0]+i[1])/2-t;r+=o*a*a});var i=r/n;return Math.sqrt(i)}}]),t}(m.default)},"./src/renderer/viz/expressions/color/CIELab.glsl":
/*!********************************************************!*\
  !*** ./src/renderer/viz/expressions/color/CIELab.glsl ***!
  \********************************************************/
/*! no static exports found */function(e,t){e.exports='#ifndef CIELAB_TO_SRGBA\n#define CIELAB_TO_SRGBA\n\nconst mat3 XYZ_2_RGB = (mat3(\n    3.2404542,-1.5371385,-0.4985314,\n    -0.9692660, 1.8760108, 0.0415560,\n    0.0556434,-0.2040259, 1.0572252\n));\nconst float SRGB_GAMMA = 1.0 / 2.2;\n\nvec3 rgb_to_srgb_approx(vec3 rgb) {\n    return pow(rgb, vec3(SRGB_GAMMA));\n}\n\nfloat f1(float t){\n    const float sigma = 6./29.;\n    if (t>sigma){\n        return t*t*t;\n    }else{\n        return 3.*sigma*sigma*(t-4./29.);\n    }\n}\n\nvec3 cielabtoxyz(vec3 c) {\n    const float xn = 95.047/100.;\n    const float yn = 100./100.;\n    const float zn = 108.883/100.;\n    return vec3(xn*f1((c.x+16.)/116.  + c.y/500. ),\n                yn*f1((c.x+16.)/116.),\n                zn*f1((c.x+16.)/116.  - c.z/200. )\n            );\n}\n\nvec3 xyztorgb(vec3 c){\n    return c * XYZ_2_RGB;\n}\n\nvec3 xyztosrgb(vec3 c) { // FIXME naming\n    return rgb_to_srgb_approx(xyztorgb(c));\n}\n\nvec4 cielabToSRGBA(vec4 cielab){\n    return vec4(xyztosrgb(cielabtoxyz(\n        vec3(\n            clamp(cielab.r, 0., 100.),\n            clamp(cielab.g, -128., 128.),\n            clamp(cielab.b, -128., 128.)\n        )\n    )), cielab.a);\n}\n#endif\n\n\n#ifndef SRGBA_TO_CIELAB\n#define SRGBA_TO_CIELAB\nvec4 sRGBToXYZ (vec4 srgba);\nvec4 sRGBToLinearRGB (vec4 srgba);\nfloat inverseGammaCorrection(float t);\nvec4 XYZToCieLab (vec4 xyza);\nfloat XYZToCieLabAux(float t);\n\nvec4 sRGBAToCieLAB(vec4 srgba){\n    return XYZToCieLab(sRGBToXYZ(srgba));\n}\n\n// Convert sRGB to CIE XYZ with the D65 white point\nvec4 sRGBToXYZ (vec4 srgba) {\n    // Poynton, "Frequently Asked Questions About Color," page 10\n    // Wikipedia: http://en.wikipedia.org/wiki/SRGB\n    // Wikipedia: http://en.wikipedia.org/wiki/CIE_1931_color_space\n    vec4 rgba = sRGBToLinearRGB(srgba);\n    return vec4(\n        (0.4123955889674142161 * rgba.r + 0.3575834307637148171 * rgba.g + 0.1804926473817015735 * rgba.b),\n        (0.2125862307855955516 * rgba.r + 0.7151703037034108499 * rgba.g + 0.07220049864333622685 * rgba.b),\n        (0.01929721549174694484 * rgba.r + 0.1191838645808485318 * rgba.g + 0.9504971251315797660 * rgba.b),\n        rgba.a\n    );\n}\n\nvec4 sRGBToLinearRGB (vec4 srgba) {\n    // http://en.wikipedia.org/wiki/SRGB\n    return vec4(\n        inverseGammaCorrection(srgba.r),\n        inverseGammaCorrection(srgba.g),\n        inverseGammaCorrection(srgba.b),\n        srgba.a\n    );\n}\n\nfloat inverseGammaCorrection(float t) {\n    return t <= 0.0404482362771076 ? t / 12.92 : pow((t + 0.055) / 1.055, 2.4);\n}\n\n\nfloat WHITEPOINT_D65_X = 0.950456;\nfloat WHITEPOINT_D65_Y = 1.0;\nfloat WHITEPOINT_D65_Z = 1.088754;\n\n// Convert CIE XYZ to CIE L*a*b* (CIELAB) with the D65 white point\nvec4 XYZToCieLab (vec4 xyza) {\n    // Wikipedia: http://en.wikipedia.org/wiki/Lab_color_space\n\n    float xn = WHITEPOINT_D65_X;\n    float yn = WHITEPOINT_D65_Y;\n    float zn = WHITEPOINT_D65_Z;\n\n    return vec4(\n        116. * XYZToCieLabAux(xyza.y / yn) - 16.,\n        500. * (XYZToCieLabAux(xyza.x / xn) - XYZToCieLabAux(xyza.y / yn)),\n        200. * (XYZToCieLabAux(xyza.y / yn) - XYZToCieLabAux(xyza.z / zn)),\n        xyza.a\n    );\n}\n\nfloat XYZToCieLabAux(float t) {\n    return t >= 8.85645167903563082e-3\n            ? pow(t, 0.333333333333333) : (841.0 / 108.0) * t + 4.0 / 29.0;\n}\n\n#endif\n'},"./src/renderer/viz/expressions/color/CIELab.js":
/*!******************************************************!*\
  !*** ./src/renderer/viz/expressions/color/CIELab.js ***!
  \******************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return g});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/get */"./node_modules/@babel/runtime/helpers/get.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(f),m=n(/*! ../base */"./src/renderer/viz/expressions/base.js"),_=n(/*! ../utils */"./src/renderer/viz/expressions/utils.js"),y=n(/*! ./CIELab.glsl */"./src/renderer/viz/expressions/color/CIELab.glsl"),v=n.n(y),g=function(e){function t(e,n,r){var o;return i()(this,t),Object(_.checkMaxArguments)(arguments,3,"cielab"),e=Object(_.implicitCast)(e),n=Object(_.implicitCast)(n),r=Object(_.implicitCast)(r),Object(_.checkExpression)("cielab","l",0,e),Object(_.checkExpression)("cielab","a",1,n),Object(_.checkExpression)("cielab","b",2,r),(o=u()(this,c()(t).call(this,{l:e,a:n,b:r}))).type="color",o._setGenericGLSL(function(e){return"cielabToSRGBA(vec4(".concat(e.l,", ").concat(e.a,", ").concat(e.b,", 1.))")},v.a),o}return d()(t,e),a()(t,[{key:"_bindMetadata",value:function(e){h()(c()(t.prototype),"_bindMetadata",this).call(this,e),Object(_.checkType)("cielab","l",0,"number",this.l),Object(_.checkType)("cielab","a",1,"number",this.a),Object(_.checkType)("cielab","b",2,"number",this.b)}}]),t}(m.default)},"./src/renderer/viz/expressions/color/NamedColor.js":
/*!**********************************************************!*\
  !*** ./src/renderer/viz/expressions/color/NamedColor.js ***!
  \**********************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return y});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),h=n.n(p),f=n(/*! ../base */"./src/renderer/viz/expressions/base.js"),d=n(/*! ../utils */"./src/renderer/viz/expressions/utils.js"),m=n(/*! ./cssColorNames */"./src/renderer/viz/expressions/color/cssColorNames.js"),_=n(/*! ../../../../errors/carto-validation-error */"./src/errors/carto-validation-error.js"),y=function(e){function t(e){var n;if(i()(this,t),Object(d.checkMaxArguments)(arguments,1,"namedColor"),Object(d.checkString)("namedColor","colorName",0,e),!m.CSS_COLOR_NAMES.includes(e.toLowerCase())){var r=Object(d.getStringErrorPreface)("namedColor","colorName",0);throw new _.default("".concat(_.CartoValidationTypes.INCORRECT_VALUE," ").concat(r,"\nInvalid color name:  '").concat(e,"'"))}return(n=u()(this,c()(t).call(this,{}))).type="color",n.name=e,n.expressionName=e,n.color=function(e){if(v[e])return v[e];var t=document.createElement("div");t.style.backgroundColor=e,document.body.appendChild(t);var n=getComputedStyle(t).backgroundColor;document.body.removeChild(t);var r=/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/.exec(n),i={r:Number(r[1]),g:Number(r[2]),b:Number(r[3]),a:r[4]||1};return v[e]=i,i}(n.name),n.inlineMaker=function(){return"vec4(".concat((n.color.r/255).toFixed(4),", ").concat((n.color.g/255).toFixed(4),", ").concat((n.color.b/255).toFixed(4),", ").concat(1..toFixed(4),")")},n}return h()(t,e),a()(t,[{key:"eval",value:function(){return this.color}},{key:"toString",value:function(){return this.expressionName}},{key:"value",get:function(){return this.eval()}}]),t}(f.default),v={}},"./src/renderer/viz/expressions/color/Opacity.js":
/*!*******************************************************!*\
  !*** ./src/renderer/viz/expressions/color/Opacity.js ***!
  \*******************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return v});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/get */"./node_modules/@babel/runtime/helpers/get.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(f),m=n(/*! ../base */"./src/renderer/viz/expressions/base.js"),_=n(/*! ../../expressions */"./src/renderer/viz/expressions.js"),y=n(/*! ../utils */"./src/renderer/viz/expressions/utils.js"),v=function(e){function t(e,n){var r;return i()(this,t),Object(y.checkMaxArguments)(arguments,2,"opacity"),Number.isFinite(n)&&(n=Object(_.number)(n)),Object(y.checkExpression)("opacity","input",0,e),Object(y.checkExpression)("opacity","alpha",1,n),(r=u()(this,c()(t).call(this,{input:e,alpha:n}))).inlineMaker=function(e){return"vec4((".concat(e.input,").rgb, ").concat(e.alpha,")")},r}return d()(t,e),a()(t,[{key:"eval",value:function(e){var t=this.input.eval(e),n=this.alpha.eval(e);return t.a=n,t}},{key:"_bindMetadata",value:function(e){h()(c()(t.prototype),"_bindMetadata",this).call(this,e),Object(y.checkType)("opacity","input",0,["color","image"],this.input),Object(y.checkType)("opacity","alpha",1,"number",this.alpha),this.type=this.input.type}},{key:"value",get:function(){return this.eval()}}]),t}(m.default)},"./src/renderer/viz/expressions/color/cssColorNames.js":
/*!*************************************************************!*\
  !*** ./src/renderer/viz/expressions/color/cssColorNames.js ***!
  \*************************************************************/
/*! exports provided: CSS_COLOR_NAMES */function(e,t,n){"use strict";n.r(t),n.d(t,"CSS_COLOR_NAMES",function(){return r});var r=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","transparent","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"]},"./src/renderer/viz/expressions/color/hex.js":
/*!***************************************************!*\
  !*** ./src/renderer/viz/expressions/color/hex.js ***!
  \***************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return _});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),h=n.n(p),f=n(/*! ../base */"./src/renderer/viz/expressions/base.js"),d=n(/*! ../utils */"./src/renderer/viz/expressions/utils.js"),m=n(/*! ../../../../errors/carto-validation-error */"./src/errors/carto-validation-error.js"),_=function(e){function t(e){var n;i()(this,t),Object(d.checkMaxArguments)(arguments,1,"hex"),Object(d.checkString)("hex","hexadecimalColor",0,e),(n=u()(this,c()(t).call(this,{}))).type="color";try{n.color=Object(d.hexToRgb)(e)}catch(e){var r=Object(d.getStringErrorPreface)("hex","hexadecimalColor",0);throw new m.default("".concat(m.CartoValidationTypes.INCORRECT_VALUE," ").concat(r," \nInvalid hexadecimal color string"))}return n.hexadecimalColor=e,n.inlineMaker=function(){return"vec4(".concat((n.color.r/255).toFixed(4),", ").concat((n.color.g/255).toFixed(4),", ").concat((n.color.b/255).toFixed(4),", ").concat(n.color.a.toFixed(4),")")},n}return h()(t,e),a()(t,[{key:"toString",value:function(){return this.hexadecimalColor}},{key:"eval",value:function(){return this.color}},{key:"value",get:function(){return this.eval()}}]),t}(f.default)},"./src/renderer/viz/expressions/color/hsl.js":
/*!***************************************************!*\
  !*** ./src/renderer/viz/expressions/color/hsl.js ***!
  \***************************************************/
/*! exports provided: HSL, HSLA */function(e,t,n){"use strict";n.r(t),n.d(t,"HSL",function(){return b}),n.d(t,"HSLA",function(){return x});var r=n(/*! @babel/runtime/helpers/slicedToArray */"./node_modules/@babel/runtime/helpers/slicedToArray.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/get */"./node_modules/@babel/runtime/helpers/get.js"),d=n.n(f),m=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),_=n.n(m),y=n(/*! ../base */"./src/renderer/viz/expressions/base.js"),v=n(/*! ../utils */"./src/renderer/viz/expressions/utils.js"),g=n(/*! ../../../../errors/carto-validation-error */"./src/errors/carto-validation-error.js"),b=w("hsl",!1),x=w("hsla",!0);function w(e,t){return function(r){function o(n,r,s,u){var l;a()(this,o),Object(v.checkMaxArguments)(arguments,4,"hsla");var p=[n,r,s,u].map(v.implicitCast),f=i()(p,4);n=f[0],r=f[1],s=f[2],u=f[3];var d={h:n,s:r,l:s};return t&&(Object(v.checkExpression)(e,"a",3,u),d.a=u),Object(v.checkExpression)(e,"h",0,n),Object(v.checkExpression)(e,"s",1,r),Object(v.checkExpression)(e,"l",2,s),(l=c()(this,h()(o).call(this,d))).type="color",l}return _()(o,r),u()(o,[{key:"eval",value:function(e){var n=this,r=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"category"===t.type?t.eval(e)/(n?t.numCategories+1:t.numCategories):t.eval(e)};return function(r,i,o){var a={r:Math.abs(6*r-3)-1,g:2-Math.abs(6*r-2),b:2-Math.abs(6*r-4),a:t?n.a.eval(e):1},s=(1-Math.abs(2*o-1))*i;return a.r=Object(v.clamp)(a.r,0,1),a.g=Object(v.clamp)(a.g,0,1),a.b=Object(v.clamp)(a.b,0,1),a.r=255*((a.r-.5)*s+o),a.g=255*((a.g-.5)*s+o),a.b=255*((a.b-.5)*s+o),a}(Object(v.clamp)(r(this.h,!0),0,1),Object(v.clamp)(r(this.s),0,1),Object(v.clamp)(r(this.l),0,1))}},{key:"_bindMetadata",value:function(e){var r=this;d()(h()(o.prototype),"_bindMetadata",this).call(this,e),n("h",0,this.h),n("s",1,this.s),n("l",2,this.l),t&&Object(v.checkType)("hsla","a",3,"number",this.a);var i=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"category"===e.type?"/".concat(t?e.numCategories+1:e.numCategories,"."):""};d()(h()(o.prototype),"_setGenericGLSL",this).call(this,function(e){return"vec4(HSLtoRGB(vec3(\n                    ".concat(e.h).concat(i(r.h,!0),",\n                    clamp(").concat(e.s).concat(i(r.s),", 0., 1.),\n                    clamp(").concat(e.l).concat(i(r.l),", 0., 1.)\n                )), ").concat(t?"clamp(".concat(e.a,", 0., 1.)"):"1.",")")},"\n    #ifndef HSL2RGB\n    #define HSL2RGB\n    vec3 HSLtoRGB(vec3 HSL) {\n      float R = abs(HSL.x * 6. - 3.) - 1.;\n      float G = 2. - abs(HSL.x * 6. - 2.);\n      float B = 2. - abs(HSL.x * 6. - 4.);\n      float C = (1. - abs(2. * HSL.z - 1.)) * HSL.y;\n      vec3 RGB = clamp(vec3(R,G,B), 0., 1.);\n      return (RGB - 0.5) * C + HSL.z;\n    }\n    #endif\n    ")}},{key:"value",get:function(){return this.eval()}}]),o}(y.default);function n(t,n,r){if(Object(v.checkExpression)(e,t,n,r),"number"!==r.type&&"category"!==r.type&&void 0!==r.type)throw new g.default("".concat(g.CartoValidationTypes.INCORRECT_TYPE," ").concat(e,"(): invalid parameter\n\t").concat(t," type was: '").concat(r.type,"'"))}}},"./src/renderer/viz/expressions/color/hsv.js":
/*!***************************************************!*\
  !*** ./src/renderer/viz/expressions/color/hsv.js ***!
  \***************************************************/
/*! exports provided: HSV, HSVA */function(e,t,n){"use strict";n.r(t),n.d(t,"HSV",function(){return v}),n.d(t,"HSVA",function(){return g});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/get */"./node_modules/@babel/runtime/helpers/get.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(f),m=n(/*! ../base */"./src/renderer/viz/expressions/base.js"),_=n(/*! ../utils */"./src/renderer/viz/expressions/utils.js"),y=n(/*! ../../../../errors/carto-validation-error */"./src/errors/carto-validation-error.js"),v=b("hsv",!1),g=b("hsva",!0);function b(e,t){return function(r){function o(n,r,a,s){var l;i()(this,o),t?Object(_.checkMaxArguments)(arguments,4,e):Object(_.checkMaxArguments)(arguments,3,e);var p={h:n=Object(_.implicitCast)(n),s:r=Object(_.implicitCast)(r),v:a=Object(_.implicitCast)(a)};return t&&(s=Object(_.implicitCast)(s),Object(_.checkExpression)(e,"a",3,s),p.a=s),Object(_.checkExpression)(e,"h",0,n),Object(_.checkExpression)(e,"s",1,r),Object(_.checkExpression)(e,"v",2,a),(l=u()(this,c()(o).call(this,p))).type="color",l}return d()(o,r),a()(o,[{key:"eval",value:function(e){var n=this,r=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"category"===t.type?t.eval(e)/(n?t.numCategories+1:t.numCategories):t.eval(e)};return function(r,i,o){var a={r:Math.abs(6*r-3)-1,g:2-Math.abs(6*r-2),b:2-Math.abs(6*r-4),a:t?Object(_.clamp)(n.a.eval(e),0,1):1};return a.r=Object(_.clamp)(a.r,0,1),a.g=Object(_.clamp)(a.g,0,1),a.b=Object(_.clamp)(a.b,0,1),a.r=((a.r-1)*i+1)*o*255,a.g=((a.g-1)*i+1)*o*255,a.b=((a.b-1)*i+1)*o*255,a}(Object(_.clamp)(r(this.h,!0),0,1),Object(_.clamp)(r(this.s),0,1),Object(_.clamp)(r(this.v),0,1))}},{key:"_bindMetadata",value:function(e){var r=this;h()(c()(o.prototype),"_bindMetadata",this).call(this,e),n("h",0,this.h),n("s",1,this.s),n("v",2,this.v),t&&Object(_.checkType)("hsva","a",3,"number",this.a);var i=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"category"===e.type?"/".concat(t?e.numCategories+1:e.numCategories,"."):""};h()(c()(o.prototype),"_setGenericGLSL",this).call(this,function(e){return"vec4(HSVtoRGB(vec3(\n                    ".concat(e.h).concat(i(r.h,!0),",\n                    clamp(").concat(e.s).concat(i(r.s),", 0.,1.),\n                    clamp(").concat(e.v).concat(i(r.v),", 0.,1.)\n                )), ").concat(t?"clamp(".concat(e.a,", 0.,1.)"):"1.",")")},"\n    #ifndef HSV2RGB\n    #define HSV2RGB\n    vec3 HSVtoRGB(vec3 HSV) {\n      float R = abs(HSV.x * 6. - 3.) - 1.;\n      float G = 2. - abs(HSV.x * 6. - 2.);\n      float B = 2. - abs(HSV.x * 6. - 4.);\n      vec3 RGB = clamp(vec3(R,G,B), 0., 1.);\n      return ((RGB - 1.) * HSV.y + 1.) * HSV.z;\n    }\n    #endif\n    ")}},{key:"value",get:function(){return this.eval()}}]),o}(m.default);function n(t,n,r){if(Object(_.checkExpression)(e,t,n,r),"number"!==r.type&&"category"!==r.type&&void 0!==r.type)throw new y.default("".concat(y.CartoValidationTypes.INCORRECT_TYPE," ").concat(e,"(): invalid parameter\n\t").concat(t," type was: '").concat(r.type,"'"))}}},"./src/renderer/viz/expressions/color/palettes.js":
/*!********************************************************!*\
  !*** ./src/renderer/viz/expressions/color/palettes.js ***!
  \********************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t);var r=n(/*! cartocolor */"./node_modules/cartocolor/index.js"),i=n(/*! ./palettes/Palette */"./src/renderer/viz/expressions/color/palettes/Palette.js"),o={};Object.keys(r).map(function(e){o["".concat(e.toUpperCase())]=new i.default(e,r[e])}),t.default=o},"./src/renderer/viz/expressions/color/palettes/Palette.js":
/*!****************************************************************!*\
  !*** ./src/renderer/viz/expressions/color/palettes/Palette.js ***!
  \****************************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return x});var r=n(/*! @babel/runtime/helpers/toConsumableArray */"./node_modules/@babel/runtime/helpers/toConsumableArray.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/typeof */"./node_modules/@babel/runtime/helpers/typeof.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),d=n.n(f),m=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),_=n.n(m),y=n(/*! ../../base */"./src/renderer/viz/expressions/base.js"),v=n(/*! ../../utils */"./src/renderer/viz/expressions/utils.js"),g=n(/*! ../rgb */"./src/renderer/viz/expressions/color/rgb.js"),b=n(/*! ../../../expressions */"./src/renderer/viz/expressions.js"),x=function(e){function t(e,n){var r;return u()(this,t),(r=h()(this,d()(t).call(this,{}))).type="palette",r.childType="color",r.name=e,r.subPalettes=new Proxy(n,{get:function(e,t){if("symbol"!==a()(t)&&Number.isSafeInteger(Number(t))&&Array.isArray(e[t]))return e[t].map(v.hexToRgb)}}),r.expressionName=e,r.tags=n.tags,r}return _()(t,e),c()(t,[{key:"getColors",value:function(e){var t=this._getBestSubPalette(e);if(this.isQualitative()){var n=t.pop();return{colors:t,othersColor:n}}return{colors:t,othersColor:null}}},{key:"toString",value:function(){return this.expressionName}},{key:"_getBestSubPalette",value:function(e){e=e<=2?2:e;var t=this.getLongestSubPalette();return(e<t.length?i()(this.subPalettes[e]):i()(t)).map(function(e){return new g.RGBA(Object(b.constant)(e.r),Object(b.constant)(e.g),Object(b.constant)(e.b),Object(b.constant)(e.a))})}},{key:"getLongestSubPalette",value:function(){for(var e=this.subPalettes,t=20;t>=0;t--)if(e[t])return e[t]}},{key:"isQualitative",value:function(){return this.tags.includes("qualitative")}},{key:"isQuantitative",value:function(){return this.tags.includes("quantitative")}}]),t}(y.default)},"./src/renderer/viz/expressions/color/rgb.js":
/*!***************************************************!*\
  !*** ./src/renderer/viz/expressions/color/rgb.js ***!
  \***************************************************/
/*! exports provided: RGB, RGBA */function(e,t,n){"use strict";n.r(t),n.d(t,"RGB",function(){return g}),n.d(t,"RGBA",function(){return b});var r=n(/*! @babel/runtime/helpers/slicedToArray */"./node_modules/@babel/runtime/helpers/slicedToArray.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/get */"./node_modules/@babel/runtime/helpers/get.js"),d=n.n(f),m=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),_=n.n(m),y=n(/*! ../base */"./src/renderer/viz/expressions/base.js"),v=n(/*! ../utils */"./src/renderer/viz/expressions/utils.js"),g=x("rgb",!1),b=x("rgba",!0);function x(e,t){return function(n){function r(n,o,s,u){var l;a()(this,r),Object(v.checkMaxArguments)(arguments,4,"rgba");var p=[n,o,s,u].map(v.implicitCast),f=i()(p,4);n=f[0],o=f[1],s=f[2],u=f[3],Object(v.checkExpression)(e,"r",0,n),Object(v.checkExpression)(e,"g",1,o),Object(v.checkExpression)(e,"b",2,s);var d={r:n,g:o,b:s};return t&&(Object(v.checkExpression)(e,"a",3,u),d.a=u),(l=c()(this,h()(r).call(this,d))).type="color",l.inlineMaker=function(e){return"vec4(".concat(e.r,"/255., ").concat(e.g,"/255., ").concat(e.b,"/255., ").concat(t?e.a:"1.",")")},l}return _()(r,n),u()(r,[{key:"eval",value:function(e){return{r:this.r.eval(e),g:this.g.eval(e),b:this.b.eval(e),a:t?this.a.eval(e):1}}},{key:"_bindMetadata",value:function(n){d()(h()(r.prototype),"_bindMetadata",this).call(this,n),Object(v.checkType)(e,"r",0,"number",this.r),Object(v.checkType)(e,"g",1,"number",this.g),Object(v.checkType)(e,"b",2,"number",this.b),t&&Object(v.checkType)("rgba","a",3,"number",this.a)}},{key:"value",get:function(){return this.eval()}}]),r}(y.default)}},"./src/renderer/viz/expressions/constants.js":
/*!***************************************************!*\
  !*** ./src/renderer/viz/expressions/constants.js ***!
  \***************************************************/
/*! exports provided: DEFAULT_RAMP_OTHERS, DEFAULT_SAMPLES, OTHERS_GLSL_VALUE, OTHERS_INDEX, OTHERS_LABEL, DEFAULT_OPTIONS */function(e,t,n){"use strict";n.r(t),n.d(t,"DEFAULT_RAMP_OTHERS",function(){return r}),n.d(t,"DEFAULT_SAMPLES",function(){return i}),n.d(t,"OTHERS_GLSL_VALUE",function(){return o}),n.d(t,"OTHERS_INDEX",function(){return a}),n.d(t,"OTHERS_LABEL",function(){return s}),n.d(t,"DEFAULT_OPTIONS",function(){return u});var r="DEFAULT_RAMP_OTHERS",i=10,o="(-1.)",a=-1,s="CARTO_VL_OTHERS",u={othersLabel:s,samples:i}},"./src/renderer/viz/expressions/interpolators.js":
/*!*******************************************************!*\
  !*** ./src/renderer/viz/expressions/interpolators.js ***!
  \*******************************************************/
/*! exports provided: ILinear, Cubic, BounceEaseIn */function(e,t,n){"use strict";n.r(t),n.d(t,"ILinear",function(){return v}),n.d(t,"Cubic",function(){return g}),n.d(t,"BounceEaseIn",function(){return b});var r=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/get */"./node_modules/@babel/runtime/helpers/get.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(f),m=n(/*! ./utils */"./src/renderer/viz/expressions/utils.js"),_=n(/*! ./base */"./src/renderer/viz/expressions/base.js"),y=n(/*! ../../../errors/carto-validation-error */"./src/errors/carto-validation-error.js"),v=function(e){function t(){return u()(this,t),c()(this,h()(t).apply(this,arguments))}return d()(t,e),t}(x("iLinear",function(e){return e},void 0,function(e){return e})),g=function(e){function t(){return u()(this,t),c()(this,h()(t).apply(this,arguments))}return d()(t,e),t}(x("cubic",function(e){return"cubicEaseInOut(".concat(e,")")},"\n    #ifndef CUBIC\n    #define CUBIC\n    float cubicEaseInOut(float p){\n        if (p < 0.5) {\n            return 4. * p * p * p;\n        }else {\n            float f = ((2. * p) - 2.);\n            return 0.5 * f * f * f + 1.;\n        }\n    }\n    #endif\n",function(e){return e})),b=function(e){function t(){return u()(this,t),c()(this,h()(t).apply(this,arguments))}return d()(t,e),t}(x("bounceEaseIn",function(e){return"BounceEaseIn(".concat(e,")")},"\n    #ifndef BOUNCE_EASE_IN\n    #define BOUNCE_EASE_IN\n    float BounceEaseIn_BounceEaseOut(float p)\n    {\n        if(p < 4./11.0)\n        {\n            return (121. * p * p)/16.0;\n        }\n        else if(p < 8./11.0)\n        {\n            return (363./40.0 * p * p) - (99./10.0 * p) + 17./5.0;\n        }\n        else if(p < 9./10.0)\n        {\n            return (4356./361.0 * p * p) - (35442./1805.0 * p) + 16061./1805.0;\n        }\n        else\n        {\n            return (54./5.0 * p * p) - (513./25.0 * p) + 268./25.0;\n        }\n    }\n    float BounceEaseIn(float p)\n    {\n        return 1. - BounceEaseOut(1. - p);\n    }\n    #endif\n\n",function(e){return e}));function x(e,t,n,r){var o=function(o){function s(t){return u()(this,s),Object(m.checkMaxArguments)(arguments,1,e),t=Object(m.implicitCast)(t),c()(this,h()(s).call(this,{m:t}))}return d()(s,o),i()(s,[{key:"eval",value:function(e){return r(this.m.eval(e))}},{key:"_bindMetadata",value:function(e){if(a()(h()(s.prototype),"_bindMetadata",this).call(this,e),"number"!==this.m.type)throw new y.default("".concat(y.CartoValidationTypes.INCORRECT_TYPE," Blending cannot be performed by '").concat(this.m.type,"'"));this.type="number",this._setGenericGLSL(function(e){return t(e.m)},n)}}]),s}(_.default);return o.type="interpolator",o}},"./src/renderer/viz/expressions/linear.js":
/*!************************************************!*\
  !*** ./src/renderer/viz/expressions/linear.js ***!
  \************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return v});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/get */"./node_modules/@babel/runtime/helpers/get.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(f),m=n(/*! ./base */"./src/renderer/viz/expressions/base.js"),_=n(/*! ./utils */"./src/renderer/viz/expressions/utils.js"),y=n(/*! ../expressions */"./src/renderer/viz/expressions.js"),v=function(e){function t(e,n,r){var o;return i()(this,t),Object(_.checkMaxArguments)(arguments,3,"linear"),e=Object(_.implicitCast)(e),void 0===n&&void 0===r&&(n=Object(y.globalMin)(e),r=Object(y.globalMax)(e)),n=Object(_.implicitCast)(n),r=Object(_.implicitCast)(r),Object(_.checkExpression)("linear","input",0,e),Object(_.checkExpression)("linear","min",1,n),Object(_.checkExpression)("linear","max",2,r),(o=u()(this,c()(t).call(this,{input:e,min:n,max:r}))).type="number",o}return d()(t,e),a()(t,[{key:"eval",value:function(e){if("date"===this.input.type){var t=this.input.eval(e),n=this.min.eval().getTime(),r=this.max.eval().getTime(),i=this._metadata,o=i.properties[this.input.name].min.getTime(),a=i.properties[this.input.name].max.getTime()-o,s=(n-o)/a;return(t-s)/((r-o)/a-s)}var u=this.input.eval(e),l=this.min.eval(e);return(u-l)/(this.max.eval(e)-l)}},{key:"_bindMetadata",value:function(e){if(h()(c()(t.prototype),"_bindMetadata",this).call(this,e),"date"===this.input.type){var n=this.min.eval().getTime(),r=this.max.eval().getTime();this._metadata=e;var i=e.properties[this.input.name].min.getTime(),o=e.properties[this.input.name].max.getTime()-i,a=(n-i)/o,s=(r-i)/o;this.inlineMaker=function(e){return"((".concat(e.input,"-(").concat(a.toFixed(20),"))/(").concat((s-a).toFixed(20),"))")}}else Object(_.checkType)("linear","input",0,"number",this.input),Object(_.checkType)("linear","min",1,"number",this.min),Object(_.checkType)("linear","max",2,"number",this.max),this.inlineMaker=function(e){return"((".concat(e.input,"-").concat(e.min,")/(").concat(e.max,"-").concat(e.min,"))")}}},{key:"_getLegendData",value:function(e){for(var t=this.min.eval(),n=this.max.eval(),r=1/(e.samples-1),i=this.toString(),o=[],a=0;o.length<e.samples;a+=r){var s=Object(_.clamp)(a,0,1),u=a*(n-t)+t;o.push({key:u,value:s})}return{data:o,min:t,max:n,name:i}}}]),t}(m.default)},"./src/renderer/viz/expressions/now.js":
/*!*********************************************!*\
  !*** ./src/renderer/viz/expressions/now.js ***!
  \*********************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return b});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/assertThisInitialized */"./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),d=n.n(f),m=n(/*! @babel/runtime/helpers/set */"./node_modules/@babel/runtime/helpers/set.js"),_=n.n(m),y=n(/*! ./base */"./src/renderer/viz/expressions/base.js"),v=n(/*! ../expressions */"./src/renderer/viz/expressions.js"),g=n(/*! ./utils */"./src/renderer/viz/expressions/utils.js"),b=function(e){function t(){var e;return i()(this,t),Object(g.checkMaxArguments)(arguments,0,"now"),(e=c()(this,d()(t).call(this,{now:Object(v.number)(0)}))).type="number",_()(d()(t.prototype),"inlineMaker",function(e){return e.now},u()(e),!0),e}return h()(t,e),a()(t,[{key:"eval",value:function(){return this.now.expr}},{key:"isAnimated",value:function(){return!0}},{key:"_setTimestamp",value:function(e){this.now.expr=e}},{key:"value",get:function(){return this.eval()}}]),t}(y.default)},"./src/renderer/viz/expressions/ordering.js":
/*!**************************************************!*\
  !*** ./src/renderer/viz/expressions/ordering.js ***!
  \**************************************************/
/*! exports provided: Asc, Desc, NoOrder, Width */function(e,t,n){"use strict";n.r(t),n.d(t,"Asc",function(){return f}),n.d(t,"Desc",function(){return d}),n.d(t,"NoOrder",function(){return m}),n.d(t,"Width",function(){return _});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),c=n.n(l),p=n(/*! ./base */"./src/renderer/viz/expressions/base.js"),h=n(/*! ./utils */"./src/renderer/viz/expressions/utils.js"),f=function(e){function t(e){var n;return i()(this,t),Object(h.checkMaxArguments)(arguments,1,"asc"),n=a()(this,u()(t).call(this,{})),Object(h.checkInstance)("asc","by",0,_,e),n.type="orderer",n}return c()(t,e),t}(p.default),d=function(e){function t(e){var n;return i()(this,t),Object(h.checkMaxArguments)(arguments,1,"desc"),n=a()(this,u()(t).call(this,{})),Object(h.checkInstance)("desc","by",0,_,e),n.type="orderer",n}return c()(t,e),t}(p.default),m=function(e){function t(){var e;return i()(this,t),Object(h.checkMaxArguments)(arguments,0,"noOrder"),(e=a()(this,u()(t).call(this,{}))).type="orderer",e}return c()(t,e),t}(p.default),_=function(e){function t(){var e;return i()(this,t),Object(h.checkMaxArguments)(arguments,1,"width"),(e=a()(this,u()(t).call(this,{}))).type="propertyReference",e}return c()(t,e),t}(p.default)},"./src/renderer/viz/expressions/reverse/ReverseList.js":
/*!*************************************************************!*\
  !*** ./src/renderer/viz/expressions/reverse/ReverseList.js ***!
  \*************************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return g});var r=n(/*! @babel/runtime/helpers/toConsumableArray */"./node_modules/@babel/runtime/helpers/toConsumableArray.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/get */"./node_modules/@babel/runtime/helpers/get.js"),d=n.n(f),m=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),_=n.n(m),y=n(/*! ../base */"./src/renderer/viz/expressions/base.js"),v=n(/*! ../utils */"./src/renderer/viz/expressions/utils.js"),g=function(e){function t(e){var n;if(a()(this,t),n=c()(this,h()(t).call(this,{array:e})),Object(v.checkExpression)("reverseList","array",0,e),n.array.elems){var r=n.array.elems[0].type;n.type="".concat(r,"-list")}return n}return _()(t,e),u()(t,[{key:"_bindMetadata",value:function(e){this.array._bindMetadata(e),Object(v.checkType)("reverse","array",0,["palette","number-list","category-list","color-list","time-list","image-list"],this.array),this.type=this.array.type,this.childType=this.array.childType,d()(h()(t.prototype),"_bindMetadata",this).call(this,e)}},{key:"eval",value:function(e){return this.elems.map(function(t){return t.eval(e)})}},{key:"elems",get:function(){return i()(this.array.elems).reverse()}},{key:"value",get:function(){return this.elems.map(function(e){return e.value})}}]),t}(y.default)},"./src/renderer/viz/expressions/reverse/ReversePalette.js":
/*!****************************************************************!*\
  !*** ./src/renderer/viz/expressions/reverse/ReversePalette.js ***!
  \****************************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return m});var r=n(/*! @babel/runtime/helpers/toConsumableArray */"./node_modules/@babel/runtime/helpers/toConsumableArray.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(f),m=function(e){function t(e){var n;return a()(this,t),(n=c()(this,h()(t).call(this,e.name,e.subPalettes))).type="palette",n._originalPalette=e,n.tags=e.tags,n.subPalettes=new Proxy(e.subPalettes,{get:function(e,t){return Number.isFinite(Number(t))&&Array.isArray(e[t])?n._reversePalette(e[t]):e[t]}}),n}return d()(t,e),u()(t,[{key:"getLongestSubPalette",value:function(){return this._reversePalette(this._originalPalette.getLongestSubPalette())}},{key:"_reversePalette",value:function(e){if(this.isQualitative()){var t=i()(e),n=t.pop();return i()(t.reverse()).concat([n])}return i()(e).reverse()}}]),t}(n(/*! ../color/palettes/Palette */"./src/renderer/viz/expressions/color/palettes/Palette.js").default)},"./src/renderer/viz/expressions/reverse/reverse.js":
/*!*********************************************************!*\
  !*** ./src/renderer/viz/expressions/reverse/reverse.js ***!
  \*********************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return a});var r=n(/*! ../utils */"./src/renderer/viz/expressions/utils.js"),i=n(/*! ./ReversePalette */"./src/renderer/viz/expressions/reverse/ReversePalette.js"),o=n(/*! ./ReverseList */"./src/renderer/viz/expressions/reverse/ReverseList.js");function a(e){return Object(r.checkMaxArguments)(arguments,1,"reverse"),"palette"===(e=Object(r.implicitCast)(e)).type?new i.default(e):new o.default(e)}},"./src/renderer/viz/expressions/stats.js":
/*!***********************************************!*\
  !*** ./src/renderer/viz/expressions/stats.js ***!
  \***********************************************/
/*! exports provided: average, variance, standardDeviation */function(e,t,n){"use strict";n.r(t),n.d(t,"average",function(){return r}),n.d(t,"variance",function(){return i}),n.d(t,"standardDeviation",function(){return o});var r=function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t/e.length},i=function(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r]-t;n.push(i*i)}return n},o=function(e){var t=r(e),n=r(i(e,t));return Math.sqrt(n)}},"./src/renderer/viz/expressions/time.js":
/*!**********************************************!*\
  !*** ./src/renderer/viz/expressions/time.js ***!
  \**********************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return _});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),h=n.n(p),f=n(/*! ./base */"./src/renderer/viz/expressions/base.js"),d=n(/*! ../../../utils/util */"./src/utils/util.js"),m=n(/*! ./utils */"./src/renderer/viz/expressions/utils.js"),_=function(e){function t(e){var n;return i()(this,t),Object(m.checkMaxArguments)(arguments,1,"time"),(n=u()(this,c()(t).call(this,{}))).type="time",n.date=d.castDate(e),n.inlineMaker=function(){},n}return h()(t,e),a()(t,[{key:"eval",value:function(){return this.date}},{key:"isAnimated",value:function(){return!1}},{key:"value",get:function(){return this.eval()}}]),t}(f.default)},"./src/renderer/viz/expressions/top.js":
/*!*********************************************!*\
  !*** ./src/renderer/viz/expressions/top.js ***!
  \*********************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return T});var r=n(/*! @babel/runtime/helpers/toConsumableArray */"./node_modules/@babel/runtime/helpers/toConsumableArray.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/get */"./node_modules/@babel/runtime/helpers/get.js"),d=n.n(f),m=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),_=n.n(m),y=n(/*! ./base */"./src/renderer/viz/expressions/base.js"),v=n(/*! ./utils */"./src/renderer/viz/expressions/utils.js"),g=n(/*! ./basic/property */"./src/renderer/viz/expressions/basic/property.js"),b=n(/*! ../expressions */"./src/renderer/viz/expressions.js"),x=n(/*! ../../../errors/carto-validation-error */"./src/errors/carto-validation-error.js"),w=n(/*! ./constants */"./src/renderer/viz/expressions/constants.js"),E=16,T=function(e){function t(e,n){var r;a()(this,t),Object(v.checkMaxArguments)(arguments,2,"top"),n=Object(v.implicitCast)(n),Object(v.checkInstance)("top","property",0,g.default,e);for(var i={property:e,buckets:n},o=0;o<E;o++)i["_top".concat(o)]=Object(b.number)(0);return(r=c()(this,h()(t).call(this,i))).type="category",r}return _()(t,e),u()(t,[{key:"eval",value:function(e){var t=this._metadata.properties[this.property.name],n=i()(t.categories).sort(function(e,t){return t.frequency-e.frequency}),r=this.property.eval(e),o=n.findIndex(function(e){return e.name===r}),a=this.numCategoriesWithoutOthers-1||1;return o>=this.numBuckets||-1===o?w.OTHERS_INDEX:o/a}},{key:"_bindMetadata",value:function(e){d()(h()(t.prototype),"_bindMetadata",this).call(this,e),Object(v.checkType)("top","property",0,"category",this.property),Object(v.checkFeatureIndependent)("top","buckets",1,this.buckets),Object(v.checkType)("top","buckets",1,"number",this.buckets),this._metadata=e,this._textureBuckets=null}},{key:"_applyToShaderSource",value:function(e){var t=this,n={};return this.childrenNames.forEach(function(r){n[r]=t[r]._applyToShaderSource(e)}),{preface:this._prefaceCode(Object.values(n).map(function(e){return e.preface}).join("")+"\n            uniform float numCategoriesWithoutOthers".concat(this._uid,";\n\n            float top").concat(this._uid,"(float id){\n                float r;\n                if (").concat(n._top0.inline," == id){\n                    r = 0.;\n                } else if (").concat(n._top1.inline," == id){\n                    r = 1.;\n                } else if (").concat(n._top2.inline," == id){\n                    r = 2.;\n                } else if (").concat(n._top3.inline," == id){\n                    r = 3.;\n                } else if (").concat(n._top4.inline," == id){\n                    r = 4.;\n                } else if (").concat(n._top5.inline," == id){\n                    r = 5.;\n                } else if (").concat(n._top6.inline," == id){\n                    r = 6.;\n                } else if (").concat(n._top7.inline," == id){\n                    r = 7.;\n                } else if (").concat(n._top8.inline," == id){\n                    r = 8.;\n                } else if (").concat(n._top9.inline," == id){\n                    r = 9.;\n                } else if (").concat(n._top10.inline," == id){\n                    r = 10.;\n                } else if (").concat(n._top11.inline," == id){\n                    r = 11.;\n                } else if (").concat(n._top12.inline," == id){\n                    r = 12.;\n                } else if (").concat(n._top13.inline," == id){\n                    r = 13.;\n                } else if (").concat(n._top14.inline," == id){\n                    r = 14.;\n                } else if (").concat(n._top15.inline," == id){\n                    r = 15.;\n                }else{\n                    return ").concat(w.OTHERS_GLSL_VALUE,";\n                }\n                return r/(numCategoriesWithoutOthers").concat(this._uid,"-1.);\n            }")),inline:"top".concat(this._uid,"(").concat(n.property.inline,")")}}},{key:"_postShaderCompile",value:function(e,n){this._numCategoriesLoc=n.getUniformLocation(e,"numCategoriesWithoutOthers".concat(this._uid)),d()(h()(t.prototype),"_postShaderCompile",this).call(this,e,n)}},{key:"_preDraw",value:function(e,n,r){for(var o=this,a=this.numBuckets,s=this._metadata.properties[this.property.name],u=i()(s.categories).sort(function(e,t){return t.frequency-e.frequency}),l=0;l<E;l++)this["_top".concat(l)].expr=Number.POSITIVE_INFINITY;u.forEach(function(e,t){t<a&&(o["_top".concat(t)].expr=o._metadata.categoryToID.get(e.name))}),r.uniform1f(this._numCategoriesLoc,this.numCategoriesWithoutOthers),d()(h()(t.prototype),"_preDraw",this).call(this,e,n,r)}},{key:"_getLegendData",value:function(){var e=this._metadata.properties[this.property.name],t=i()(e.categories).sort(function(e,t){return t.frequency-e.frequency}),n=this.numBuckets,r=[],o=this.toString(),a=this.numCategoriesWithoutOthers-1||1;return t.forEach(function(e,t){if(t<n){var i=e.name,o=t/a;r.push({key:i,value:o})}}),r.push({key:w.OTHERS_LABEL,value:w.OTHERS_INDEX}),{name:o,data:r}}},{key:"numCategories",get:function(){return this.numBuckets+1}},{key:"numCategoriesWithoutOthers",get:function(){return this.numCategories-1}},{key:"numBuckets",get:function(){var e=Math.round(this.buckets.eval());if(e>this.property.numCategories&&(e=this.property.numCategories),e>E){var t=this.buckets.eval();setTimeout(function(){throw new x.default("".concat(x.CartoValidationTypes.INCORRECT_VALUE," top() function has a limit of ").concat(E," buckets but '").concat(t,"' buckets were specified."))}),e=0}return e}}]),t}(y.default)},"./src/renderer/viz/expressions/transformation/Rotate.js":
/*!***************************************************************!*\
  !*** ./src/renderer/viz/expressions/transformation/Rotate.js ***!
  \***************************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return y});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/get */"./node_modules/@babel/runtime/helpers/get.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(f),m=n(/*! ../base */"./src/renderer/viz/expressions/base.js"),_=n(/*! ../utils */"./src/renderer/viz/expressions/utils.js"),y=function(e){function t(e){var n;return i()(this,t),Object(_.checkMaxArguments)(arguments,1,"rotate"),e=Object(_.implicitCast)(e),(n=u()(this,c()(t).call(this,{angle:e}))).type="transformation",n}return d()(t,e),a()(t,[{key:"_applyToShaderSource",value:function(e){var t=this.angle._applyToShaderSource(e);return{preface:this._prefaceCode("\n                ".concat(t.preface,"\n\n                #ifndef DEGREES_TO_RADIANS\n                #define DEGREES_TO_RADIANS\n                float degreesToRadians(float degrees){\n                    return degrees/360.*2.*3.14159265359;\n                }\n                #endif\n                \n                vec2 rotate").concat(this._uid,"(vec2 p){\n                    float angle = degreesToRadians(").concat(t.inline,");\n                    mat2 M = mat2(cos(angle), -sin(angle),\n                                  sin(angle),  cos(angle));\n                    return M * p;\n                }")),inline:"rotate".concat(this._uid)}}},{key:"eval",value:function(e){return[0,0]}},{key:"_bindMetadata",value:function(e){h()(c()(t.prototype),"_bindMetadata",this).call(this,e),Object(_.checkType)("rotate","angle",0,"number",this.angle)}}]),t}(m.default)},"./src/renderer/viz/expressions/transformation/Translate.js":
/*!******************************************************************!*\
  !*** ./src/renderer/viz/expressions/transformation/Translate.js ***!
  \******************************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return y});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/get */"./node_modules/@babel/runtime/helpers/get.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(f),m=n(/*! ../base */"./src/renderer/viz/expressions/base.js"),_=n(/*! ../utils */"./src/renderer/viz/expressions/utils.js"),y=function(e){function t(e,n){var r;return i()(this,t),Object(_.checkMaxArguments)(arguments,2,"translate"),e=Object(_.implicitCast)(e),n=Object(_.implicitCast)(n),(r=u()(this,c()(t).call(this,{x:e,y:n}))).type="transformation",r}return d()(t,e),a()(t,[{key:"_applyToShaderSource",value:function(e){var t=this.x._applyToShaderSource(e),n=this.y._applyToShaderSource(e);return{preface:this._prefaceCode("\n                ".concat(t.preface,"\n                ").concat(n.preface,"\n\n                vec2 translate").concat(this._uid,"(vec2 p){\n                    return p+vec2(").concat(t.inline,", ").concat(n.inline,");\n                }")),inline:"translate".concat(this._uid)}}},{key:"eval",value:function(e){return[this.x.eval(e),this.y.eval(e)]}},{key:"_bindMetadata",value:function(e){h()(c()(t.prototype),"_bindMetadata",this).call(this,e),Object(_.checkType)("translate","x",0,"number",this.x),Object(_.checkType)("translate","y",1,"number",this.y)}}]),t}(m.default)},"./src/renderer/viz/expressions/transition.js":
/*!****************************************************!*\
  !*** ./src/renderer/viz/expressions/transition.js ***!
  \****************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return _});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),h=n.n(p),f=n(/*! ./base */"./src/renderer/viz/expressions/base.js"),d=n(/*! ./utils */"./src/renderer/viz/expressions/utils.js"),m=n(/*! ../../../errors/carto-validation-error */"./src/errors/carto-validation-error.js"),_=function(e){function t(e){var n;if(i()(this,t),Object(d.checkMaxArguments)(arguments,1,"transition"),Object(d.checkNumber)("transition","duration",0,e),e<0){var r=Object(d.getStringErrorPreface)("transition","duration",0);throw new m.default("".concat(m.CartoValidationTypes.INCORRECT_VALUE," ").concat(r," 'duration' must be greater than or equal to 0."))}return(n=u()(this,c()(t).call(this,{}))).aTime=Date.now(),n.bTime=n.aTime+Number(e),n.type="number",n}return h()(t,e),a()(t,[{key:"eval",value:function(){var e=Date.now();return this.mix=(e-this.aTime)/(this.bTime-this.aTime),Math.min(this.mix,1)}},{key:"isAnimated",value:function(){return!this.mix||this.mix<=1}},{key:"_applyToShaderSource",value:function(){return{preface:this._prefaceCode("uniform float anim".concat(this._uid,";\n")),inline:"anim".concat(this._uid)}}},{key:"_postShaderCompile",value:function(e,t){this._getBinding(e).uniformLocation=t.getUniformLocation(e,"anim".concat(this._uid))}},{key:"_preDraw",value:function(e,t,n){var r=Date.now();this.mix=(r-this.aTime)/(this.bTime-this.aTime),this.mix>1?n.uniform1f(this._getBinding(e).uniformLocation,1):n.uniform1f(this._getBinding(e).uniformLocation,this.mix)}}]),t}(f.default)},"./src/renderer/viz/expressions/unary.js":
/*!***********************************************!*\
  !*** ./src/renderer/viz/expressions/unary.js ***!
  \***********************************************/
/*! exports provided: Log, Sqrt, Sin, Cos, Tan, Sign, Abs, IsNaN, Not, Floor, Ceil */function(e,t,n){"use strict";n.r(t),n.d(t,"Log",function(){return v}),n.d(t,"Sqrt",function(){return g}),n.d(t,"Sin",function(){return b}),n.d(t,"Cos",function(){return x}),n.d(t,"Tan",function(){return w}),n.d(t,"Sign",function(){return E}),n.d(t,"Abs",function(){return T}),n.d(t,"IsNaN",function(){return k}),n.d(t,"Not",function(){return C}),n.d(t,"Floor",function(){return M}),n.d(t,"Ceil",function(){return P});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/get */"./node_modules/@babel/runtime/helpers/get.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(f),m=n(/*! ./utils */"./src/renderer/viz/expressions/utils.js"),_=n(/*! ./base */"./src/renderer/viz/expressions/base.js"),y=n(/*! ../../../errors/carto-validation-error */"./src/errors/carto-validation-error.js"),v=A("log",function(e){return Math.log(e)},function(e){return"log(".concat(e,")")}),g=A("sqrt",function(e){return Math.sqrt(e)},function(e){return"sqrt(".concat(e,")")}),b=A("sin",function(e){return Math.sin(e)},function(e){return"sin(".concat(e,")")}),x=A("cos",function(e){return Math.cos(e)},function(e){return"cos(".concat(e,")")}),w=A("tan",function(e){return Math.tan(e)},function(e){return"tan(".concat(e,")")}),E=A("sign",function(e){return Math.sign(e)},function(e){return"sign(".concat(e,")")}),T=A("abs",function(e){return Math.abs(e)},function(e){return"abs(".concat(e,")")}),k=A("isNaN",function(e){return Number.isNaN(e)?1:0},function(e){return"((".concat(e," == ").concat(Number.MIN_SAFE_INTEGER.toFixed(20),") ? 1. : 0.)")}),C=A("not",function(e){return 1-e},function(e){return"(1.0 - ".concat(e,")")}),M=A("floor",function(e){return Math.floor(e)},function(e){return"floor(".concat(e,")")}),P=A("ceil",function(e){return Math.ceil(e)},function(e){return"ceil(".concat(e,")")});function A(e,t,n){return function(r){function o(t){var r;return i()(this,o),Object(m.checkMaxArguments)(arguments,1,e),t=Object(m.implicitCast)(t),(r=u()(this,c()(o).call(this,{a:t}))).type="number",r.expressionName=e,r.inlineMaker=function(e){return n(e.a)},r}return d()(o,r),a()(o,[{key:"eval",value:function(e){return t(this.a.eval(e))}},{key:"_bindMetadata",value:function(t){if(h()(c()(o.prototype),"_bindMetadata",this).call(this,t),Object(m.checkType)(e,"x",0,"number",this.a),"number"!==this.a.type)throw new y.default("".concat(y.CartoValidationTypes.INCORRECT_TYPE," Unary operation cannot be performed to '").concat(this.a.type,"'"))}},{key:"value",get:function(){return this.eval()}}]),o}(_.default)}},"./src/renderer/viz/expressions/utils.js":
/*!***********************************************!*\
  !*** ./src/renderer/viz/expressions/utils.js ***!
  \***********************************************/
/*! exports provided: DEFAULT, checkMaxArguments, implicitCast, hexToRgb, getOrdinalFromIndex, getStringErrorPreface, throwInvalidType, throwInvalidInstance, throwInvalidNumber, throwInvalidArray, throwInvalidString, isArgConstructorTimeTyped, checkExpression, checkType, checkInstance, checkNumber, checkString, checkArray, checkFeatureIndependent, clamp, mix, fract */function(e,t,n){"use strict";n.r(t),n.d(t,"DEFAULT",function(){return c}),n.d(t,"checkMaxArguments",function(){return p}),n.d(t,"implicitCast",function(){return h}),n.d(t,"hexToRgb",function(){return f}),n.d(t,"getOrdinalFromIndex",function(){return d}),n.d(t,"getStringErrorPreface",function(){return m}),n.d(t,"throwInvalidType",function(){return _}),n.d(t,"throwInvalidInstance",function(){return y}),n.d(t,"throwInvalidNumber",function(){return v}),n.d(t,"throwInvalidArray",function(){return g}),n.d(t,"throwInvalidString",function(){return b}),n.d(t,"isArgConstructorTimeTyped",function(){return x}),n.d(t,"checkExpression",function(){return w}),n.d(t,"checkType",function(){return E}),n.d(t,"checkInstance",function(){return T}),n.d(t,"checkNumber",function(){return k}),n.d(t,"checkString",function(){return C}),n.d(t,"checkArray",function(){return M}),n.d(t,"checkFeatureIndependent",function(){return P}),n.d(t,"clamp",function(){return A}),n.d(t,"mix",function(){return S}),n.d(t,"fract",function(){return O});var r=n(/*! @babel/runtime/helpers/typeof */"./node_modules/@babel/runtime/helpers/typeof.js"),i=n.n(r),o=n(/*! ../expressions */"./src/renderer/viz/expressions.js"),a=n(/*! ./base */"./src/renderer/viz/expressions/base.js"),s=n(/*! ../../../errors/carto-validation-error */"./src/errors/carto-validation-error.js"),u=n(/*! ../../../errors/carto-parsing-error */"./src/errors/carto-parsing-error.js"),l=n(/*! ../colorspaces */"./src/renderer/viz/colorspaces.js"),c=void 0;function p(e,t,n){if(e.length>t)throw new s.default("".concat(s.CartoValidationTypes.TOO_MANY_ARGS," Expression '").concat(n,"' accepts ").concat(t," arguments, but ").concat(e.length," were passed."))}function h(e){return I(e)?Object(o.number)(e):"string"==typeof e?Object(o.category)(e):Array.isArray(e)?Object(o.list)(e):e}function f(e){var t=/^#?([a-f\d]{1})([a-f\d]{1})([a-f\d]{1})$/i.exec(e);if(t)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:1};if(t=/^#?([a-f\d]{1})([a-f\d]{1})([a-f\d]{1})([a-f\d]{1})$/i.exec(e))return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:parseInt(t[4]+t[4],16)/255};if(t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e))return{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16),a:1};if(t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e))return{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16),a:parseInt(t[4],16)/255};throw new u.default("Invalid hexadecimal color")}function d(e){return{1:"first",2:"second",3:"third",4:"fourth"}[e]||String(e)}function m(e,t,n){return"".concat(e,"(): invalid ").concat(d(n+1)," parameter '").concat(t,"'")}function _(e,t,n,r,i){throw new s.default("".concat(s.CartoValidationTypes.INCORRECT_TYPE," ").concat(m(e,t,n),"\n    expected type was '").concat(r,"', actual type was '").concat(i,"'"))}function y(e,t,n,r){throw new s.default("".concat(s.CartoValidationTypes.INCORRECT_TYPE," ").concat(m(e,t,n),"\n    expected type was instance of '").concat(r.name,"'"))}function v(e,t,n,r){throw new s.default("".concat(s.CartoValidationTypes.INCORRECT_TYPE," ").concat(m(e,t,n),"\n    type of '").concat(r,"' is ").concat(i()(r),", 'number' was expected"))}function g(e,t,n,r){throw new s.default("".concat(s.CartoValidationTypes.INCORRECT_TYPE," ").concat(m(e,t,n),"\n    '").concat(r,"' is not an array"))}function b(e,t,n,r){throw new s.default("".concat(s.CartoValidationTypes.INCORRECT_TYPE," ").concat(m(e,t,n),"\n    expected type was 'string', but ").concat(r,"' is not a string"))}function x(e){switch(e){case"number":case"number-list":case"number-property":case"category":case"category-list":case"category-property":return!1;default:return!0}}function w(e,t,n,r){if(!(r instanceof a.default))throw new s.default("".concat(s.CartoValidationTypes.INCORRECT_TYPE," ").concat(m(e,t,n),"\n        '").concat(r,'\' is not of type "carto.expressions.Base"'))}function E(e,t,n,r,i){if(w(e,t,n,i),Array.isArray(r)){if(!r.some(function(e){return i.type===e}))throw new s.default("".concat(s.CartoValidationTypes.INCORRECT_TYPE," ").concat(m(e,t,n),"\n            expected type was one of ").concat(r.join(),", actual type was '").concat(i.type,"'"))}else i.type!==r&&_(e,t,n,r,i.type)}function T(e,t,n,r,i){w(e,t,n,i),i.isA(r)||y(e,t,n,r)}function k(e,t,n,r){I(r)||v(e,t,n,r)}function C(e,t,n,r){"string"!=typeof r&&b(e,t,n,r)}function M(e,t,n,r){Array.isArray(r)||g(e,t,n,r)}function P(e,t,n,r){if(r.isFeatureDependent())throw new s.default("".concat(s.CartoValidationTypes.INCORRECT_VALUE," ").concat(m(e,t,n),"\n        parameter cannot be feature dependent"))}function A(e,t,n){return Math.min(Math.max(e,t),n)}function S(e,t,n){return"number"==typeof e?e*(1-n)+t*n:Object(l.interpolateRGBAinCieLAB)(e,t,n)}function O(e){return e-Math.floor(e)}function I(e){return Number.isFinite(e)||e===1/0||e===-1/0||Number.isNaN(e)}},"./src/renderer/viz/expressions/viewportFeatures.js":
/*!**********************************************************!*\
  !*** ./src/renderer/viz/expressions/viewportFeatures.js ***!
  \**********************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return g});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),h=n.n(p),f=n(/*! ./base */"./src/renderer/viz/expressions/base.js"),d=n(/*! ./basic/property */"./src/renderer/viz/expressions/basic/property.js"),m=n(/*! ./utils */"./src/renderer/viz/expressions/utils.js"),_=n(/*! ../../schema */"./src/renderer/schema.js"),y=n(/*! ../../../errors/carto-validation-error */"./src/errors/carto-validation-error.js"),v=n(/*! ../../../errors/carto-runtime-error */"./src/errors/carto-runtime-error.js"),g=function(e){function t(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return i()(this,t),r=r.map(function(e){return Object(m.implicitCast)(e)}),(e=u()(this,c()(t).call(this,function(e){var t=0,n={};return e.forEach(function(e){n["p"+ ++t]=e}),n}(r)))).expr=[],e.type="featureList",e._isViewport=!0,e._requiredProperties=r,e._FeatureProxy=null,e}return h()(t,e),a()(t,[{key:"_applyToShaderSource",value:function(){throw new v.default("'viewportFeatures' cannot be used in visualizations.")}},{key:"isFeatureDependent",value:function(){return!1}},{key:"eval",value:function(){return this.expr}},{key:"_resetViewportAgg",value:function(){if(!this._FeatureProxy){if(!this._requiredProperties.every(function(e){return e.isA(d.default)}))throw new y.default("".concat(y.CartoValidationTypes.INCORRECT_TYPE," viewportFeatures arguments can only be properties"));var e=Object.keys(_.default.simplify(this._getMinimumNeededSchema()));this._FeatureProxy=this.genViewportFeatureClass(e)}this.expr=[]}},{key:"accumViewportAgg",value:function(e){this.expr.push(new this._FeatureProxy(e))}},{key:"genViewportFeatureClass",value:function(e){var t=function e(t){i()(this,e),this._feature=t};return e.forEach(function(e){Object.defineProperty(t.prototype,e,{get:function(){return this._feature[e]}})}),t}},{key:"value",get:function(){return this.expr}}]),t}(f.default)},"./src/renderer/viz/expressions/zoom.js":
/*!**********************************************!*\
  !*** ./src/renderer/viz/expressions/zoom.js ***!
  \**********************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return b});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/assertThisInitialized */"./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),d=n.n(f),m=n(/*! @babel/runtime/helpers/set */"./node_modules/@babel/runtime/helpers/set.js"),_=n.n(m),y=n(/*! ./base */"./src/renderer/viz/expressions/base.js"),v=n(/*! ../expressions */"./src/renderer/viz/expressions.js"),g=n(/*! ./utils */"./src/renderer/viz/expressions/utils.js"),b=function(e){function t(){var e;return i()(this,t),Object(g.checkMaxArguments)(arguments,0,"zoom"),(e=c()(this,d()(t).call(this,{zoom:Object(v.number)(0)}))).type="number",_()(d()(t.prototype),"inlineMaker",function(e){return e.zoom},u()(e),!0),e}return h()(t,e),a()(t,[{key:"eval",value:function(){return this.zoom.expr}},{key:"_preDraw",value:function(e,t,n){this.zoom.expr=t.zoomLevel,this.zoom._preDraw(e,t,n)}}]),t}(y.default)},"./src/renderer/viz/parser.js":
/*!************************************!*\
  !*** ./src/renderer/viz/parser.js ***!
  \************************************/
/*! exports provided: parseVizExpression, parseVizDefinition, cleanComments */function(e,t,n){"use strict";n.r(t),n.d(t,"parseVizExpression",function(){return y}),n.d(t,"parseVizDefinition",function(){return v}),n.d(t,"cleanComments",function(){return E});var r=n(/*! @babel/runtime/helpers/toConsumableArray */"./node_modules/@babel/runtime/helpers/toConsumableArray.js"),i=n.n(r),o=n(/*! jsep */"./node_modules/jsep/build/jsep.js"),a=n.n(o),s=n(/*! ./expressions */"./src/renderer/viz/expressions.js"),u=n(/*! ./expressions/utils */"./src/renderer/viz/expressions/utils.js"),l=n(/*! ./expressions/color/cssColorNames */"./src/renderer/viz/expressions/color/cssColorNames.js"),c=n(/*! ./expressions/color/NamedColor */"./src/renderer/viz/expressions/color/NamedColor.js"),p=n(/*! ./expressions/color/hex */"./src/renderer/viz/expressions/color/hex.js"),h=n(/*! ./expressions/base */"./src/renderer/viz/expressions/base.js"),f=n(/*! ../../errors/carto-parsing-error */"./src/errors/carto-parsing-error.js"),d=[],m={};Object.keys(s).filter(function(e){return e[0]===e[0].toLowerCase()}).map(function(e){m[e.toLocaleLowerCase()]=s[e]}),m.true=s.TRUE,m.false=s.FALSE,m.align_center=s.ALIGN_CENTER,m.align_bottom=s.ALIGN_BOTTOM,m.pi=s.PI,m.e=s.E,m.hold=s.HOLD,m.bicycle=s.BICYCLE,m.building=s.BUILDING,m.bus=s.BUS,m.car=s.CAR,m.circle=s.CIRCLE,m.circle_outline=s.CIRCLE_OUTLINE,m.cross=s.CROSS,m.flag=s.FLAG,m.house=s.HOUSE,m.marker=s.MARKER,m.marker_outline=s.MARKER_OUTLINE,m.plus=s.PLUS,m.square=s.SQUARE,m.square_outline=s.SQUARE_OUTLINE,m.star=s.STAR,m.star_outline=s.STAR_OUTLINE,m.triangle=s.TRIANGLE,m.triangle_outline=s.TRIANGLE_OUTLINE;var _=h.default.prototype.blendTo;function y(e){x();var t=Object(u.implicitCast)(b(a()(e)));return w(),t}function v(e){x();var t=a()(E(e)),n={variables:{}};return"Compound"===t.type?t.body.map(function(e){return g(n,e)}):g(n,t),w(),n}function g(e,t){if(":"!==t.operator)throw new f.default("Invalid syntax.");t.left.name.length&&"@"===t.left.name[0]&&(t.left.name="__cartovl_variable_"+t.left.name.substr(1));var n=t.left.name;if(!n)throw new f.default("Invalid syntax.");if(n.startsWith("__cartovl_variable_")){if((n=t.left.name.substr("__cartovl_variable_".length))in e.variables)throw new f.default("Variable '".concat(n,"' is already defined."));e.variables[n]=Object(u.implicitCast)(b(t.right))}else{if(n in e)throw new f.default("Property '".concat(n,"' is already defined."));var r=b(t.right);e[n]="resolution"===n?r:Object(u.implicitCast)(r)}}function b(e){if("CallExpression"===e.type)return function(e){var t=e.callee.name.toLowerCase();if(d.includes(t))return e.arguments.map(function(e){return b(e)})[0];var n=e.arguments.map(function(e){return b(e)});if(m[t])return m[t].apply(m,i()(n));throw new f.default("Invalid function name '".concat(e.callee.name,"'."))}(e);if("Literal"===e.type)return e.value;if("ArrayExpression"===e.type)return e.elements.map(function(e){return b(e)});if("BinaryExpression"===e.type)return function(e){var t=b(e.left),n=b(e.right);switch(e.operator.toLowerCase()){case"*":return s.mul(t,n);case"/":return s.div(t,n);case"+":return s.add(t,n);case"-":return s.sub(t,n);case"%":return s.mod(t,n);case"^":return s.pow(t,n);case">":return s.greaterThan(t,n);case">=":return s.greaterThanOrEqualTo(t,n);case"<":return s.lessThan(t,n);case"<=":return s.lessThanOrEqualTo(t,n);case"==":return s.equals(t,n);case"!=":return s.notEquals(t,n);case"and":return s.and(t,n);case"or":return s.or(t,n);case"in":return s.in(t,n);case"nin":return s.nin(t,n);default:throw new f.default("Invalid binary operator '".concat(e.operator,"'."))}}(e);if("UnaryExpression"===e.type)return function(e){switch(e.operator){case"-":return s.mul(-1,b(e.argument));case"+":return b(e.argument);default:throw new f.default("Invalid unary operator '".concat(e.operator,"'."))}}(e);if("Identifier"===e.type)return function(e){if(e.name.length&&"@"===e.name[0]&&(e.name="__cartovl_variable_"+e.name.substr(1)),e.name.startsWith("__cartovl_variable_"))return s.variable(e.name.substr("__cartovl_variable_".length));if("#"===e.name[0])return new p.default(e.name);if("$"===e.name[0])return s.property(e.name.substring(1));if(s.palettes[e.name.toUpperCase()])return s.palettes[e.name.toUpperCase()];if(m[e.name.toLowerCase()])return m[e.name.toLowerCase()];if(l.CSS_COLOR_NAMES.includes(e.name.toLowerCase()))return new c.default(e.name.toLowerCase());throw new f.default("Invalid expression '".concat(JSON.stringify(e),"'."))}(e);throw new f.default("Invalid expression '".concat(JSON.stringify(e),"'."))}function x(){a.a.addBinaryOp(":",0),a.a.addBinaryOp("^",11),a.a.addBinaryOp("or",1),a.a.addBinaryOp("OR",1),a.a.addBinaryOp("and",2),a.a.addBinaryOp("AND",2),a.a.addBinaryOp("in",13),a.a.addBinaryOp("IN",1),a.a.addBinaryOp("nin",13),a.a.addBinaryOp("NIN",13),a.a.addIdentifierChar("@"),a.a.addIdentifierChar("#"),a.a.removeLiteral("true"),a.a.removeLiteral("false")}function w(){a.a.removeBinaryOp("in"),a.a.removeBinaryOp("IN"),a.a.removeBinaryOp("nin"),a.a.removeBinaryOp("NIN"),a.a.removeBinaryOp("and"),a.a.removeBinaryOp("AND"),a.a.removeBinaryOp("or"),a.a.removeBinaryOp("OR"),a.a.removeBinaryOp("^"),a.a.removeBinaryOp(":"),a.a.removeIdentifierChar("@"),a.a.removeIdentifierChar("#"),a.a.addLiteral("true"),a.a.addLiteral("false")}function E(e){for(var t={singleQuote:!1,doubleQuote:!1,blockComment:!1,lineComment:!1,escape:0},n=0,r=(e=("_"+e+"_").split("")).length;n<r;n++)if(t.singleQuote)"\\"===e[n]?t.escape++:"'"===e[n]&&t.escape%2==0&&(t.singleQuote=!1,t.escape=0);else if(t.doubleQuote)"\\"===e[n]?t.escape++:'"'===e[n]&&t.escape%2==0&&(t.doubleQuote=!1,t.escape=0);else if(t.blockComment)"*"===e[n]&&"/"===e[n+1]&&(e[n+1]="",t.blockComment=!1),e[n]="";else if(t.lineComment)"\n"!==e[n+1]&&"\r"!==e[n+1]||(t.lineComment=!1),n+1<r&&(e[n]="");else if(t.doubleQuote='"'===e[n],t.singleQuote="'"===e[n],"/"===e[n]){if("*"===e[n+1]){e[n]="",t.blockComment=!0;continue}if("/"===e[n+1]){e[n]="",t.lineComment=!0;continue}}return e.join("").slice(1,-1)}h.default.prototype.blendTo=function(e){"string"==typeof e&&(e=y(e));for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return _.bind(this).apply(void 0,[e].concat(n))}},"./src/renderer/viz/svgs/bicycle.svg":
/*!*******************************************!*\
  !*** ./src/renderer/viz/svgs/bicycle.svg ***!
  \*******************************************/
/*! no static exports found */function(e,t){e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15"><path d="M7.5 2c-.676-.01-.676 1.01 0 1H9v1.266L6.197 6.6 5.223 4H5.5c.676.01.676-1.01 0-1h-2c-.676-.01-.676 1.01 0 1h.652l.891 2.375A3.45 3.45 0 0 0 3.5 6C1.573 6 0 7.573 0 9.5S1.573 13 3.5 13 7 11.427 7 9.5c0-.67-.2-1.291-.53-1.824l2.821-2.35.463 1.16C8.71 7.094 8 8.211 8 9.5c0 1.927 1.573 3.5 3.5 3.5S15 11.427 15 9.5 13.427 6 11.5 6c-.283 0-.554.043-.818.107L10 4.402V2.5a.5.5 0 0 0-.5-.5h-2zm-4 5a2.48 2.48 0 0 1 1.555.553L3.18 9.115c-.511.427.128 1.195.64.77l1.875-1.563c.188.352.305.75.305 1.178C6 10.887 4.887 12 3.5 12S1 10.887 1 9.5 2.113 7 3.5 7zm8 0C12.887 7 14 8.113 14 9.5S12.887 12 11.5 12 9 10.887 9 9.5c0-.877.447-1.642 1.125-2.088l.91 2.274c.246.623 1.18.25.93-.372l-.908-2.27C11.2 7.02 11.348 7 11.5 7z"></path></svg>'},"./src/renderer/viz/svgs/building.svg":
/*!********************************************!*\
  !*** ./src/renderer/viz/svgs/building.svg ***!
  \********************************************/
/*! no static exports found */function(e,t){e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15"><path d="M3 2v11h5v-3h3v3h1V2H3zm4 10H4v-2h3v2zm0-3H4V7h3v2zm0-3H4V4h3v2zm4 3H8V7h3v2zm0-3H8V4h3v2z"></path></svg>'},"./src/renderer/viz/svgs/bus.svg":
/*!***************************************!*\
  !*** ./src/renderer/viz/svgs/bus.svg ***!
  \***************************************/
/*! no static exports found */function(e,t){e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15"><path d="M4 0C2.636 0 1 .743 1 2.746V12s0 1 1 1v1s0 1 1 1 1-1 1-1v-1h7v1s0 1 1 1 1-1 1-1v-1s1 0 1-1V2.746C14 .701 12.764 0 11.4 0H4zm.25 1.5h6.5a.25.25 0 1 1 0 .5h-6.5a.25.25 0 1 1 0-.5zM3 3h9c1 0 1 .967 1 .967V7s0 1-1 1H3C2 8 2 7 2 7V4s0-1 1-1zm0 7a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm9 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"></path></svg>'},"./src/renderer/viz/svgs/car.svg":
/*!***************************************!*\
  !*** ./src/renderer/viz/svgs/car.svg ***!
  \***************************************/
/*! no static exports found */function(e,t){e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15"><path d="M14 7a1.5 1.5 0 0 0-1.15-1.45l-1.39-3.24A.5.5 0 0 0 11 2H4a.5.5 0 0 0-.44.28L2.15 5.54A1.5 1.5 0 0 0 1 7v3.5h1v1a1 1 0 1 0 2 0v-1h7v1a1 1 0 1 0 2 0v-1h1V7zM4.3 3h6.4l1.05 2.5h-8.5L4.3 3zM3 9a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm9 0a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"></path></svg>'},"./src/renderer/viz/svgs/circle.svg":
/*!******************************************!*\
  !*** ./src/renderer/viz/svgs/circle.svg ***!
  \******************************************/
/*! no static exports found */function(e,t){e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15"><path d="M14 7.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z"></path></svg>'},"./src/renderer/viz/svgs/circleOutline.svg":
/*!*************************************************!*\
  !*** ./src/renderer/viz/svgs/circleOutline.svg ***!
  \*************************************************/
/*! no static exports found */function(e,t){e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15"><path d="M7.5 0a7.5 7.5 0 1 1 0 15 7.5 7.5 0 0 1 0-15zm0 1.667a5.833 5.833 0 1 0 0 11.666 5.833 5.833 0 0 0 0-11.666z"></path></svg>'},"./src/renderer/viz/svgs/cross.svg":
/*!*****************************************!*\
  !*** ./src/renderer/viz/svgs/cross.svg ***!
  \*****************************************/
/*! no static exports found */function(e,t){e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15"><path d="M2.64 1.27L7.5 6.13l4.84-4.84A.92.92 0 0 1 13 1a1 1 0 0 1 1 1 .9.9 0 0 1-.27.66L8.84 7.5l4.89 4.89A.9.9 0 0 1 14 13a1 1 0 0 1-1 1 .92.92 0 0 1-.69-.27L7.5 8.87l-4.85 4.85A.92.92 0 0 1 2 14a1 1 0 0 1-1-1 .9.9 0 0 1 .27-.66L6.16 7.5 1.27 2.61A.9.9 0 0 1 1 2a1 1 0 0 1 1-1c.24.003.47.1.64.27z"></path></svg>'},"./src/renderer/viz/svgs/flag.svg":
/*!****************************************!*\
  !*** ./src/renderer/viz/svgs/flag.svg ***!
  \****************************************/
/*! no static exports found */function(e,t){e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15"><path d="M6.65 2C5.43 2 4.48 3.38 4.11 3.82a.49.49 0 0 0-.11.32v4.4a.44.44 0 0 0 .72.36 3 3 0 0 1 1.93-1.17C8.06 7.73 8.6 9 10.07 9a5.28 5.28 0 0 0 2.73-1.09.49.49 0 0 0 .2-.4V2.45a.44.44 0 0 0-.62-.45 5.75 5.75 0 0 1-2.31 1.06C8.6 3.08 8.12 2 6.65 2zM2.5 3a1 1 0 1 1 0-2 1 1 0 0 1 0 2zM3 4v9.48a.5.5 0 0 1-1 0V4a.5.5 0 0 1 1 0z"></path></svg>'},"./src/renderer/viz/svgs/house.svg":
/*!*****************************************!*\
  !*** ./src/renderer/viz/svgs/house.svg ***!
  \*****************************************/
/*! no static exports found */function(e,t){e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15"><path d="M2 13.748c0 .138.112.25.25.25h3.749v-3h3v3h3.749a.25.25 0 0 0 .25-.25v-5.75H2v5.75zm11.93-7.17l-.932-.82V2a1 1 0 1 0-2 0v2L7.681 1.09a.25.25 0 0 0-.353-.011l-.011.011-6.25 5.463a.25.25 0 0 0 .18.42L3 7h10.747a.25.25 0 0 0 .183-.421z"></path></svg>'},"./src/renderer/viz/svgs/marker.svg":
/*!******************************************!*\
  !*** ./src/renderer/viz/svgs/marker.svg ***!
  \******************************************/
/*! no static exports found */function(e,t){e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15"><path d="M7.5 0C5.068 0 2.23 1.486 2.23 5.27c0 2.568 4.054 8.244 5.27 9.73 1.081-1.486 5.27-7.027 5.27-9.73C12.77 1.487 9.932 0 7.5 0z"></path></svg>'},"./src/renderer/viz/svgs/markerOutline.svg":
/*!*************************************************!*\
  !*** ./src/renderer/viz/svgs/markerOutline.svg ***!
  \*************************************************/
/*! no static exports found */function(e,t){e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15"><path data-name="Layer 7" d="M7.5 14.941l-.4-.495c-.973-1.189-4.9-6.556-4.9-9.16A5.066 5.066 0 0 1 7.036 0q.222-.01.445 0a5.066 5.066 0 0 1 5.286 4.836q.01.225 0 .45c0 2.213-2.669 6.111-4.678 8.851zM7.481.986a4.077 4.077 0 0 0-4.3 4.3c0 1.832 2.759 6.038 4.286 8.034 1.25-1.71 4.315-5.989 4.315-8.034a4.077 4.077 0 0 0-4.3-4.3z"></path></svg>'},"./src/renderer/viz/svgs/plus.svg":
/*!****************************************!*\
  !*** ./src/renderer/viz/svgs/plus.svg ***!
  \****************************************/
/*! no static exports found */function(e,t){e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15"><path d="M7 1c-.6 0-1 .4-1 1v4H2c-.6 0-1 .4-1 1v1c0 .6.4 1 1 1h4v4c0 .6.4 1 1 1h1c.6 0 1-.4 1-1V9h4c.6 0 1-.4 1-1V7c0-.6-.4-1-1-1H9V2c0-.6-.4-1-1-1H7z" fill="#010101"></path></svg>'},"./src/renderer/viz/svgs/square.svg":
/*!******************************************!*\
  !*** ./src/renderer/viz/svgs/square.svg ***!
  \******************************************/
/*! no static exports found */function(e,t){e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15"><path d="M13 14H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h11a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1z"></path></svg>'},"./src/renderer/viz/svgs/squareOutline.svg":
/*!*************************************************!*\
  !*** ./src/renderer/viz/svgs/squareOutline.svg ***!
  \*************************************************/
/*! no static exports found */function(e,t){e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15"><path d="M12.7 2.3v10.4H2.3V2.3h10.4M13 1H2a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1z"></path></svg>'},"./src/renderer/viz/svgs/star.svg":
/*!****************************************!*\
  !*** ./src/renderer/viz/svgs/star.svg ***!
  \****************************************/
/*! no static exports found */function(e,t){e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15"><path d="M7.5 0l-2 5h-5l4 3.5-2 6 5-3.5 5 3.5-2-6 4-3.5h-5l-2-5z"></path></svg>'},"./src/renderer/viz/svgs/starOutline.svg":
/*!***********************************************!*\
  !*** ./src/renderer/viz/svgs/starOutline.svg ***!
  \***********************************************/
/*! no static exports found */function(e,t){e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15"><path d="M7.5 3.19l1.07 2.68.25.63h3l-2 1.75-.5.44.23.63 1 3.13-2.48-1.77-.57-.4-.57.4-2.52 1.77 1-3.13.21-.63-.5-.44-2-1.75h3l.25-.63L7.5 3.19M7.5.5l-2 5h-5l4 3.5-2 6 5-3.5 5 3.5-2-6 4-3.5h-5l-2-5z" fill="#010101"></path></svg>'},"./src/renderer/viz/svgs/triangle.svg":
/*!********************************************!*\
  !*** ./src/renderer/viz/svgs/triangle.svg ***!
  \********************************************/
/*! no static exports found */function(e,t){e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15"><path d="M7.538 2c-.294 0-.488.177-.615.385l-5.846 9.538C1 12 1 12.153 1 12.308c0 .538.385.692.692.692h11.616c.384 0 .692-.154.692-.692 0-.154 0-.231-.077-.385l-5.77-9.538C8.029 2.177 7.789 2 7.539 2z"></path></svg>'},"./src/renderer/viz/svgs/triangleOutline.svg":
/*!***************************************************!*\
  !*** ./src/renderer/viz/svgs/triangleOutline.svg ***!
  \***************************************************/
/*! no static exports found */function(e,t){e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15"><path d="M7.524 1.5a.77.77 0 0 0-.69.395l-5.5 9.87C1.022 12.307 1.395 13 2 13h11c.605 0 .978-.692.666-1.236l-5.5-9.869a.773.773 0 0 0-.642-.395zM7.5 3.9l4.127 7.47H3.373L7.5 3.9z"></path></svg>'},"./src/setup/auth-service.js":
/*!***********************************!*\
  !*** ./src/setup/auth-service.js ***!
  \***********************************/
/*! exports provided: setDefaultAuth, getDefaultAuth, checkAuth, cleanDefaultAuth */function(e,t,n){"use strict";n.r(t),n.d(t,"setDefaultAuth",function(){return a}),n.d(t,"getDefaultAuth",function(){return s}),n.d(t,"checkAuth",function(){return l}),n.d(t,"cleanDefaultAuth",function(){return u});var r,i=n(/*! ../utils/util */"./src/utils/util.js"),o=n(/*! ../../src/errors/carto-validation-error */"./src/errors/carto-validation-error.js");function a(e){l(e),r=e}function s(){return r}function u(){r=void 0}function l(e){if(i.isUndefined(e))throw new o.default("".concat(o.CartoValidationTypes.MISSING_REQUIRED," 'auth'"));if(!i.isObject(e))throw new o.default("".concat(o.CartoValidationTypes.INCORRECT_TYPE," 'auth' property must be an object."));e.username=i.isUndefined(e.username)?e.user:e.username,function(e){if(i.isUndefined(e))throw new o.default("".concat(o.CartoValidationTypes.MISSING_REQUIRED," 'apiKey'"));if(!i.isString(e))throw new o.default("".concat(o.CartoValidationTypes.INCORRECT_TYPE," 'apiKey' property must be a string."));if(""===e)throw new o.default("".concat(o.CartoValidationTypes.INCORRECT_VALUE," 'apiKey' property must be not empty."))}(e.apiKey),function(e){if(i.isUndefined(e))throw new o.default("".concat(o.CartoValidationTypes.MISSING_REQUIRED," 'username'"));if(!i.isString(e))throw new o.default("".concat(o.CartoValidationTypes.INCORRECT_TYPE," 'username' property must be a string."));if(""===e)throw new o.default("".concat(o.CartoValidationTypes.INCORRECT_VALUE," 'username' property must be not empty."))}(e.username)}},"./src/setup/config-service.js":
/*!*************************************!*\
  !*** ./src/setup/config-service.js ***!
  \*************************************/
/*! exports provided: setDefaultConfig, getDefaultConfig, checkConfig, cleanDefaultConfig */function(e,t,n){"use strict";n.r(t),n.d(t,"setDefaultConfig",function(){return a}),n.d(t,"getDefaultConfig",function(){return s}),n.d(t,"checkConfig",function(){return l}),n.d(t,"cleanDefaultConfig",function(){return u});var r,i=n(/*! ../utils/util */"./src/utils/util.js"),o=n(/*! ../../src/errors/carto-validation-error */"./src/errors/carto-validation-error.js");function a(e){l(e),r=e}function s(){return r}function u(){r=void 0}function l(e){if(e){if(!i.isObject(e))throw new o.default("".concat(o.CartoValidationTypes.INCORRECT_TYPE," 'config' property must be an object."));!function(e){if(!i.isString(e))throw new o.default("".concat(o.CartoValidationTypes.INCORRECT_TYPE," 'serverURL' property must be a string."))}(e.serverURL)}}},"./src/sources/Base.js":
/*!*****************************!*\
  !*** ./src/sources/Base.js ***!
  \*****************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return o});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=function e(){i()(this,e)}},"./src/sources/BaseWindshaft.js":
/*!**************************************!*\
  !*** ./src/sources/BaseWindshaft.js ***!
  \**************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return g});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/assertThisInitialized */"./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),d=n.n(f),m=n(/*! ./Base */"./src/sources/Base.js"),_=n(/*! ../client/windshaft */"./src/client/windshaft.js"),y=n(/*! ../setup/auth-service */"./src/setup/auth-service.js"),v=n(/*! ../setup/config-service */"./src/setup/config-service.js"),g=function(e){function t(){var e;return i()(this,t),(e=u()(this,c()(t).call(this)))._client=new _.default(d()(d()(e))),e}return h()(t,e),a()(t,[{key:"initialize",value:function(e,t){this._auth=e||Object(y.getDefaultAuth)(),this._config=t||Object(v.getDefaultConfig)(),Object(y.checkAuth)(this._auth),Object(v.checkConfig)(this._config),this._apiKey=this._auth.apiKey,this._username=this._auth.username,this._serverURL=this._generateURL(this._auth,this._config)}},{key:"bindLayer",value:function(){var e;(e=this._client).bindLayer.apply(e,arguments)}},{key:"requiresNewMetadata",value:function(e){return this._client.requiresNewMetadata(e)}},{key:"requestMetadata",value:function(e){return this._client.getMetadata(e)}},{key:"requestData",value:function(e,t){return this._client.getData(e,t)}},{key:"free",value:function(){this._client.free()}},{key:"_generateURL",value:function(e,t){var n=t&&t.serverURL||"https://{user}.carto.com";return n=n.replace(/{user}/,e.username)}}]),t}(m.default)},"./src/sources/DataframeCache.js":
/*!***************************************!*\
  !*** ./src/sources/DataframeCache.js ***!
  \***************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return u});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! lru-cache */"./node_modules/lru-cache/index.js"),u=function(){function e(){i()(this,e);this._cache=s({max:256,length:function(){return 1},maxAge:36e5,dispose:function(e,t){t.then(function(e){e.empty||e.free()})}})}return a()(e,[{key:"get",value:function(e,t){var n=this._cache.get(e);if(n)return n;var r=t(e);return this._cache.set(e,r),r}},{key:"free",value:function(){this._cache.reset()}}]),e}()},"./src/sources/Dataset.js":
/*!********************************!*\
  !*** ./src/sources/Dataset.js ***!
  \********************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return m});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),h=n.n(p),f=n(/*! ../../src/errors/carto-validation-error */"./src/errors/carto-validation-error.js"),d=n(/*! ../utils/util */"./src/utils/util.js"),m=function(e){function t(e,n,r){var o;return i()(this,t),(o=u()(this,c()(t).call(this)))._checkTableName(e),o._tableName=e,o.initialize(n,r),o}return h()(t,e),a()(t,[{key:"_getFromClause",value:function(){return this._tableName}},{key:"_clone",value:function(){return new t(this._tableName,this._auth,this._config)}},{key:"_checkTableName",value:function(e){if(d.default.isUndefined(e))throw new f.default("".concat(f.CartoValidationTypes.MISSING_REQUIRED," 'tableName'"));if(!d.default.isString(e))throw new f.default("".concat(f.CartoValidationTypes.INCORRECT_TYPE," 'tableName' property must be a string."));if(""===e)throw new f.default("".concat(f.CartoValidationTypes.INCORRECT_VALUE," 'tableName' property must be not empty."))}}]),t}(n(/*! ./BaseWindshaft */"./src/sources/BaseWindshaft.js").default)},"./src/sources/GeoJSON.js":
/*!********************************!*\
  !*** ./src/sources/GeoJSON.js ***!
  \********************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return E});var r=n(/*! @babel/runtime/helpers/toConsumableArray */"./node_modules/@babel/runtime/helpers/toConsumableArray.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(f),m=n(/*! ../client/rsys */"./src/client/rsys.js"),_=n(/*! ../renderer/Dataframe */"./src/renderer/Dataframe.js"),y=n(/*! ../renderer/Metadata */"./src/renderer/Metadata.js"),v=n(/*! ../../src/errors/carto-validation-error */"./src/errors/carto-validation-error.js"),g=n(/*! ../../src/errors/carto-runtime-error */"./src/errors/carto-runtime-error.js"),b=n(/*! ../utils/util */"./src/utils/util.js"),x=n(/*! ./Base */"./src/sources/Base.js"),w=n(/*! ../renderer/schema */"./src/renderer/schema.js"),E=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(a()(this,t),(n=c()(this,h()(t).call(this)))._checkData(e),n._type="",n._categoryStringToIDMap={},n._numCategories=0,n._numFields=new Set,n._catFields=new Set,n._dateFields=new Set,n._providedDateColumns=new Set(r.dateColumns),n._properties={},n._boundColumns=new Set,n._data=e,"FeatureCollection"===e.type)n._features=e.features;else{if("Feature"!==e.type)throw new v.default("".concat(v.CartoValidationTypes.INCORRECT_VALUE," 'data' property must be a GeoJSON object."));n._features=[e]}return n._features=n._initializeFeatureProperties(n._features),n._setCoordinatesCenter(),n}return d()(t,e),u()(t,[{key:"bindLayer",value:function(e,t){this._addDataframe=e,this._dataLoadedCallback=t}},{key:"requestMetadata",value:function(e){return Promise.resolve(this._computeMetadata(e))}},{key:"requestData",value:function(){var e=this;if(this._dataframe){var t=this._decodeUnboundProperties();return this._dataframe.addProperties(t),void Object.keys(t).forEach(function(t){e._boundColumns.add(t)})}var n=new _.default({active:!0,center:this._dataframeCenter,geom:this._decodeGeometry(),properties:this._decodeUnboundProperties(),scale:1,size:this._features.length,type:this._getDataframeType(this._type),metadata:this._metadata});this._boundColumns=new Set(Object.keys(n.properties)),this._dataframe=n,this._addDataframe(n),this._dataLoadedCallback()}},{key:"requiresNewMetadata",value:function(){return!1}},{key:"_clone",value:function(){return new t(this._data,{dateColumns:Array.from(this._providedDateColumns)})}},{key:"_checkData",value:function(e){if(b.default.isUndefined(e))throw new v.default("".concat(v.CartoValidationTypes.MISSING_REQUIRED," 'data'"));if(!b.default.isObject(e))throw new v.default("".concat(v.CartoValidationTypes.INCORRECT_TYPE," 'data' property must be an object."))}},{key:"_initializeFeatureProperties",value:function(e){for(var t=0;t<e.length;t++)e[t].properties=e[t].properties||{};return e}},{key:"_computeMetadata",value:function(e){var t=this,n=[];this._addNumericColumnField("cartodb_id");for(var r=this._features.length,i=new Set(Object.keys(w.default.simplify(e.getMinimumNeededSchema()))),o=0;o<this._features.length;o++){for(var a=this._features[o].properties,s=Object.keys(a),u=0,l=s.length;u<l;u++){var c=s[u];if(i.has(c)&&!this._boundColumns.has(c)){var p=a[c];this._addPropertyToMetadata(c,p)}}this._sampleFeatureOnMetadata(a,n,this._features.length)}this._numFields.forEach(function(e){var n=t._properties[e];n.avg=n.sum/n.count});var h="";r>0&&(h=this._getDataframeType(this._features[0].geometry.type));return this._metadata=new y.default({properties:this._properties,featureCount:r,sample:n,geomType:h,idProperty:"cartodb_id"}),this._metadata}},{key:"_sampleFeatureOnMetadata",value:function(e,t,n){if(n>1e3){var r=1e3/n;if(Math.random()>r)return}t.push(e)}},{key:"_addNumericPropertyToMetadata",value:function(e,t){if(this._catFields.has(e)||this._dateFields.has(e))throw new v.default("".concat(v.CartoValidationTypes.INCORRECT_TYPE," Unsupported GeoJSON: the property '").concat(e,"' has different types in different features."));this._addNumericColumnField(e);var n=this._properties[e];n.min=Math.min(n.min,t),n.max=Math.max(n.max,t),n.sum+=t}},{key:"_addNumericColumnField",value:function(e){this._numFields.has(e)||(this._numFields.add(e),this._properties[e]={type:"number",min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY,avg:Number.NaN,sum:0,count:0})}},{key:"_addDatePropertyToMetadata",value:function(e,t){if(this._catFields.has(e)||this._numFields.has(e))throw new g.default("".concat(g.CartoRuntimeTypes.NOT_SUPPORTED," Unsupported GeoJSON: the property '").concat(e,"' has different types in different features."));this._addDateColumnField(e);var n=this._properties[e],r=b.default.castDate(t);n.min=n.min?b.default.castDate(Math.min(n.min,r)):r,n.max=n.max?b.default.castDate(Math.max(n.max,r)):r,n.sum+=t,n.count++}},{key:"_addDateColumnField",value:function(e){this._dateFields.has(e)||(this._dateFields.add(e),this._properties[e]={type:"date",min:null,max:null,avg:null,sum:0,count:0})}},{key:"_addPropertyToMetadata",value:function(e,t){return this._providedDateColumns.has(e)?this._addDatePropertyToMetadata(e,t):Number.isFinite(t)?this._addNumericPropertyToMetadata(e,t):void this._addCategoryPropertyToMetadata(e,t)}},{key:"_addCategoryPropertyToMetadata",value:function(e,t){if(this._numFields.has(e)||this._dateFields.has(e))throw new g.default("".concat(g.CartoRuntimeTypes.NOT_SUPPORTED," Unsupported GeoJSON: the property '").concat(e,"' has different types in different features."));this._catFields.has(e)||(this._catFields.add(e),this._properties[e]={type:"category",categories:[]});var n=this._properties[e],r=n.categories.find(function(e){return e.name===t});r?r.frequency++:n.categories.push({name:t,frequency:1})}},{key:"_decodeUnboundProperties",value:function(){var e=this,t={};i()(this._numFields).concat(i()(this._catFields)).concat(i()(this._dateFields)).map(function(n){e._boundColumns.has(n)||(t[n]=new Float32Array(e._features.length+1024))});for(var n=i()(this._catFields).filter(function(t){return!e._boundColumns.has(t)}),r=i()(this._numFields).filter(function(t){return!e._boundColumns.has(t)}),o=i()(this._dateFields).filter(function(t){return!e._boundColumns.has(t)}),a=function(i){var a=e._features[i];n.forEach(function(n){t[n][i]=e._metadata.categorizeString(n,a.properties[n],!0)}),r.forEach(function(e){"cartodb_id"!==e||Number.isFinite(a.properties.cartodb_id)||(a.properties.cartodb_id=-i);var n=Number(a.properties[e]);t[e][i]=Number.isNaN(n)?Number.MIN_SAFE_INTEGER:n}),o.forEach(function(n){var r=e._properties[n],o=b.default.castDate(a.properties[n]).getTime(),s=r.min,u=r.max,l=(o-s.getTime())/(u.getTime()-s.getTime());t[n][i]=l})},s=0;s<this._features.length;s++)a(s);return t}},{key:"_getDataframeType",value:function(e){switch(e){case"Point":return"point";case"LineString":case"MultiLineString":return"line";case"Polygon":case"MultiPolygon":return"polygon";default:return""}}},{key:"_fetchFeatureGeometry",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=null,r=this._features.length,i=e.sample?Math.max(1,Math.floor(r/e.sample)):1,o=0;o<r;o+=i){var a=this._features[o];"Feature"===a.type&&t(o,a.geometry)}return n}},{key:"_allocGeometry",value:function(){return"Point"===this._type?new Float32Array(6*this._features.length):[]}},{key:"_decodeGeometry",value:function(){var e=this,t=this._allocGeometry();return this._fetchFeatureGeometry({},function(n,r){var i=r.type,o=r.coordinates;if(e._type!==i)throw new v.default("".concat(v.CartoValidationTypes.INCORRECT_TYPE," multiple geometry types not supported: found '").concat(i,"' instead of '").concat(e._type,"'."));if("Point"===i){var a=e._computePointGeometry(o);t[6*n+0]=a.x,t[6*n+1]=a.y,t[6*n+2]=a.x,t[6*n+3]=a.y,t[6*n+4]=a.x,t[6*n+5]=a.y}else if("LineString"===i){var s=e._computeLineStringGeometry(o);t.push([s])}else if("MultiLineString"===i){var u=e._computeMultiLineStringGeometry(o);t.push(u)}else if("Polygon"===i){var l=e._computePolygonGeometry(o);t.push([l])}else if("MultiPolygon"===i){var c=e._computeMultiPolygonGeometry(o);t.push(c)}}),t}},{key:"_computePointGeometry",value:function(e){var t=e[1],n=e[0],r=b.default.projectToWebMercator({lat:t,lng:n});return m.wToR(r.x,r.y,{scale:b.default.WM_R,center:this._center})}},{key:"_computeLineStringGeometry",value:function(e,t){for(var n=[],r=0;r<e.length;r++){var i=this._computePointGeometry(e[t?e.length-r-1:r]);n.push(i.x,i.y)}return n}},{key:"_computeMultiLineStringGeometry",value:function(e){for(var t=[],n=0;n<e.length;n++){var r=this._computeLineStringGeometry(e[n]);r.length>0&&t.push(r)}return t}},{key:"_computePolygonGeometry",value:function(e){var t={flat:[],holes:[],clipped:[]},n=0,r=!1;if(e.length){r=this._isReversed(e[0]);var i=this._computeLineStringGeometry(e[0],r);t.flat=t.flat.concat(i)}for(var o=1;o<e.length;o++){r!==this._isReversed(e[o])&&(n+=e[o-1].length,t.holes.push(n));var a=this._computeLineStringGeometry(e[o],r);t.flat=t.flat.concat(a)}return t}},{key:"_computeMultiPolygonGeometry",value:function(e){for(var t=[],n=0;n<e.length;n++){var r=this._computePolygonGeometry(e[n]);r.flat.length>0&&t.push(r)}return t}},{key:"_isReversed",value:function(e){for(var t,n=0,r=e[0],i=0;i<e.length-1;i++)n+=((t=e[i+1])[1]-r[1])*(t[0]+r[0]),r=t;return n>=0}},{key:"_samplePoint",value:function(e){var t=e.type,n=e.coordinates;return"Point"===t?n:"LineString"===t?n[0]:"MultiLineString"===t||"Polygon"===t?n[0][0]:"MultiPolygon"===t?n[0][0][0]:void 0}},{key:"_setCoordinatesCenter",value:function(){var e=this,t=0,n=0,r=0;this._fetchFeatureGeometry({sample:10},function(i,o){e._type||(e._type=o.type);var a=e._samplePoint(o),s=b.default.projectToWebMercator({lng:a[0],lat:a[1]});t+=s.x,n+=s.y,r+=1}),r>1&&(t/=r,n/=r),this._center={x:t,y:n},this._dataframeCenter=m.wToR(this._center.x,this._center.y,{scale:b.default.WM_R,center:{x:0,y:0}})}},{key:"free",value:function(){}}]),t}(x.default)},"./src/sources/MVT.js":
/*!****************************!*\
  !*** ./src/sources/MVT.js ***!
  \****************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return E});var r=n(/*! @babel/runtime/regenerator */"./node_modules/@babel/runtime/regenerator/index.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/asyncToGenerator */"./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),h=n.n(p),f=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),d=n.n(f),m=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),_=n.n(m),y=n(/*! ../renderer/Dataframe */"./src/renderer/Dataframe.js"),v=n(/*! ../renderer/Metadata */"./src/renderer/Metadata.js"),g=n(/*! ./Base */"./src/sources/Base.js"),b=n(/*! ./TileClient */"./src/sources/TileClient.js"),x=n(/*! ./MVTWorkers.worker */"./src/sources/MVTWorkers.worker.js"),w=n.n(x),E=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new v.default,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{layerID:void 0,viewportZoomToSourceZoom:Math.ceil,maxZoom:void 0};return u()(this,t),(n=h()(this,d()(t).call(this)))._templateURL=e,r instanceof v.default||(r=new v.default(r)),n._metadata=r,n._tileClient=new b.default(e),n._options=i,n._options.viewportZoomToSourceZoom=n._options.viewportZoomToSourceZoom||Math.ceil,n._workerDispatch={},n._mID=0,n._workerName="MVT",n}var n;return _()(t,e),c()(t,[{key:"_clone",value:function(){return new t(this._templateURL,JSON.parse(JSON.stringify(this._metadata)),this._options)}},{key:"bindLayer",value:function(e,t){this._tileClient.bindLayer(e,t)}},{key:"requestMetadata",value:(n=a()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._metadata);case 1:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"requestData",value:function(e,t){var n=this;return this._tileClient.requestData(e,t,function(e,t,r,i){return new Promise(function(o){if("."===i[0]){var a=window.location.pathname.split("/");a.pop();var s=a.join("/");i="".concat(window.location.protocol,"//").concat(window.location.host,"/").concat(s,"/").concat(i)}else"/"===i[0]&&(i="".concat(window.location.protocol,"//").concat(window.location.host).concat(i));n._worker.postMessage({x:e,y:t,z:r,url:i,layerID:n._options.layerID,metadata:n._metadataSent?void 0:n._metadata,mID:n._mID,workerName:n._workerName}),n._metadataSent=!0,n._workerDispatch[n._mID]=o,n._mID++})},function(e){return void 0===n._options.maxZoom?n._options.viewportZoomToSourceZoom(e):Math.min(n._options.viewportZoomToSourceZoom(e),n._options.maxZoom)})}},{key:"free",value:function(){this._tileClient.free()}},{key:"_worker",get:function(){var e=this;return this._workerInstance||(this._workerInstance=new w.a,this._workerInstance.onmessage=function(t){var n=t.data.mID,r=t.data.dataframe,i=r.metadata;r.empty||(Object.setPrototypeOf(r,y.default.prototype),e._metadata.numCategories=i.numCategories,e._metadata.categoryToID=i.categoryToID,e._metadata.IDToCategory=i.IDToCategory,e._metadata.geomType=i.geomType,r.metadata=e._metadata),e._workerDispatch[n](r)}),this._workerInstance}}]),t}(g.default)},"./src/sources/MVTWorkers.worker.js":
/*!******************************************!*\
  !*** ./src/sources/MVTWorkers.worker.js ***!
  \******************************************/
/*! no static exports found */function(e,t,n){e.exports=function(){return n(/*! !./node_modules/worker-loader/dist/workers/InlineWorker.js */"./node_modules/worker-loader/dist/workers/InlineWorker.js")('/*!\n * CARTO VL js https://carto.com/\n * Version: 0.9.0\n * \n */\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== \'undefined\' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: \'Module\' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, \'__esModule\', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === \'object\' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, \'default\', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != \'string\') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module[\'default\']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, \'a\', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = "";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = "./src/sources/MVTWorkers.worker.js");\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ "./node_modules/@babel/runtime/helpers/arrayWithHoles.js":\n/*!***************************************************************!*\\\n  !*** ./node_modules/@babel/runtime/helpers/arrayWithHoles.js ***!\n  \\***************************************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;\n\n/***/ }),\n\n/***/ "./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js":\n/*!******************************************************************!*\\\n  !*** ./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js ***!\n  \\******************************************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nmodule.exports = _arrayWithoutHoles;\n\n/***/ }),\n\n/***/ "./node_modules/@babel/runtime/helpers/assertThisInitialized.js":\n/*!**********************************************************************!*\\\n  !*** ./node_modules/@babel/runtime/helpers/assertThisInitialized.js ***!\n  \\**********************************************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;\n\n/***/ }),\n\n/***/ "./node_modules/@babel/runtime/helpers/asyncToGenerator.js":\n/*!*****************************************************************!*\\\n  !*** ./node_modules/@babel/runtime/helpers/asyncToGenerator.js ***!\n  \\*****************************************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;\n\n/***/ }),\n\n/***/ "./node_modules/@babel/runtime/helpers/classCallCheck.js":\n/*!***************************************************************!*\\\n  !*** ./node_modules/@babel/runtime/helpers/classCallCheck.js ***!\n  \\***************************************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError("Cannot call a class as a function");\n  }\n}\n\nmodule.exports = _classCallCheck;\n\n/***/ }),\n\n/***/ "./node_modules/@babel/runtime/helpers/construct.js":\n/*!**********************************************************!*\\\n  !*** ./node_modules/@babel/runtime/helpers/construct.js ***!\n  \\**********************************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar setPrototypeOf = __webpack_require__(/*! ./setPrototypeOf */ "./node_modules/@babel/runtime/helpers/setPrototypeOf.js");\n\nfunction isNativeReflectConstruct() {\n  if (typeof Reflect === "undefined" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === "function") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    module.exports = _construct = Reflect.construct;\n  } else {\n    module.exports = _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}\n\nmodule.exports = _construct;\n\n/***/ }),\n\n/***/ "./node_modules/@babel/runtime/helpers/createClass.js":\n/*!************************************************************!*\\\n  !*** ./node_modules/@babel/runtime/helpers/createClass.js ***!\n  \\************************************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if ("value" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;\n\n/***/ }),\n\n/***/ "./node_modules/@babel/runtime/helpers/getPrototypeOf.js":\n/*!***************************************************************!*\\\n  !*** ./node_modules/@babel/runtime/helpers/getPrototypeOf.js ***!\n  \\***************************************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\nfunction _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;\n\n/***/ }),\n\n/***/ "./node_modules/@babel/runtime/helpers/inherits.js":\n/*!*********************************************************!*\\\n  !*** ./node_modules/@babel/runtime/helpers/inherits.js ***!\n  \\*********************************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar setPrototypeOf = __webpack_require__(/*! ./setPrototypeOf */ "./node_modules/@babel/runtime/helpers/setPrototypeOf.js");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== "function" && superClass !== null) {\n    throw new TypeError("Super expression must either be null or a function");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;\n\n/***/ }),\n\n/***/ "./node_modules/@babel/runtime/helpers/isNativeFunction.js":\n/*!*****************************************************************!*\\\n  !*** ./node_modules/@babel/runtime/helpers/isNativeFunction.js ***!\n  \\*****************************************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\nfunction _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf("[native code]") !== -1;\n}\n\nmodule.exports = _isNativeFunction;\n\n/***/ }),\n\n/***/ "./node_modules/@babel/runtime/helpers/iterableToArray.js":\n/*!****************************************************************!*\\\n  !*** ./node_modules/@babel/runtime/helpers/iterableToArray.js ***!\n  \\****************************************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;\n\n/***/ }),\n\n/***/ "./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js":\n/*!*********************************************************************!*\\\n  !*** ./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js ***!\n  \\*********************************************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i["return"] != null) _i["return"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;\n\n/***/ }),\n\n/***/ "./node_modules/@babel/runtime/helpers/nonIterableRest.js":\n/*!****************************************************************!*\\\n  !*** ./node_modules/@babel/runtime/helpers/nonIterableRest.js ***!\n  \\****************************************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\nfunction _nonIterableRest() {\n  throw new TypeError("Invalid attempt to destructure non-iterable instance");\n}\n\nmodule.exports = _nonIterableRest;\n\n/***/ }),\n\n/***/ "./node_modules/@babel/runtime/helpers/nonIterableSpread.js":\n/*!******************************************************************!*\\\n  !*** ./node_modules/@babel/runtime/helpers/nonIterableSpread.js ***!\n  \\******************************************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\nfunction _nonIterableSpread() {\n  throw new TypeError("Invalid attempt to spread non-iterable instance");\n}\n\nmodule.exports = _nonIterableSpread;\n\n/***/ }),\n\n/***/ "./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js":\n/*!**************************************************************************!*\\\n  !*** ./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js ***!\n  \\**************************************************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _typeof = __webpack_require__(/*! ../helpers/typeof */ "./node_modules/@babel/runtime/helpers/typeof.js");\n\nvar assertThisInitialized = __webpack_require__(/*! ./assertThisInitialized */ "./node_modules/@babel/runtime/helpers/assertThisInitialized.js");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === "object" || typeof call === "function")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;\n\n/***/ }),\n\n/***/ "./node_modules/@babel/runtime/helpers/setPrototypeOf.js":\n/*!***************************************************************!*\\\n  !*** ./node_modules/@babel/runtime/helpers/setPrototypeOf.js ***!\n  \\***************************************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\nfunction _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;\n\n/***/ }),\n\n/***/ "./node_modules/@babel/runtime/helpers/slicedToArray.js":\n/*!**************************************************************!*\\\n  !*** ./node_modules/@babel/runtime/helpers/slicedToArray.js ***!\n  \\**************************************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar arrayWithHoles = __webpack_require__(/*! ./arrayWithHoles */ "./node_modules/@babel/runtime/helpers/arrayWithHoles.js");\n\nvar iterableToArrayLimit = __webpack_require__(/*! ./iterableToArrayLimit */ "./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js");\n\nvar nonIterableRest = __webpack_require__(/*! ./nonIterableRest */ "./node_modules/@babel/runtime/helpers/nonIterableRest.js");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;\n\n/***/ }),\n\n/***/ "./node_modules/@babel/runtime/helpers/toConsumableArray.js":\n/*!******************************************************************!*\\\n  !*** ./node_modules/@babel/runtime/helpers/toConsumableArray.js ***!\n  \\******************************************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar arrayWithoutHoles = __webpack_require__(/*! ./arrayWithoutHoles */ "./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js");\n\nvar iterableToArray = __webpack_require__(/*! ./iterableToArray */ "./node_modules/@babel/runtime/helpers/iterableToArray.js");\n\nvar nonIterableSpread = __webpack_require__(/*! ./nonIterableSpread */ "./node_modules/@babel/runtime/helpers/nonIterableSpread.js");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;\n\n/***/ }),\n\n/***/ "./node_modules/@babel/runtime/helpers/typeof.js":\n/*!*******************************************************!*\\\n  !*** ./node_modules/@babel/runtime/helpers/typeof.js ***!\n  \\*******************************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\nfunction _typeof2(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;\n\n/***/ }),\n\n/***/ "./node_modules/@babel/runtime/helpers/wrapNativeSuper.js":\n/*!****************************************************************!*\\\n  !*** ./node_modules/@babel/runtime/helpers/wrapNativeSuper.js ***!\n  \\****************************************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar getPrototypeOf = __webpack_require__(/*! ./getPrototypeOf */ "./node_modules/@babel/runtime/helpers/getPrototypeOf.js");\n\nvar setPrototypeOf = __webpack_require__(/*! ./setPrototypeOf */ "./node_modules/@babel/runtime/helpers/setPrototypeOf.js");\n\nvar isNativeFunction = __webpack_require__(/*! ./isNativeFunction */ "./node_modules/@babel/runtime/helpers/isNativeFunction.js");\n\nvar construct = __webpack_require__(/*! ./construct */ "./node_modules/@babel/runtime/helpers/construct.js");\n\nfunction _wrapNativeSuper(Class) {\n  var _cache = typeof Map === "function" ? new Map() : undefined;\n\n  module.exports = _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== "function") {\n      throw new TypeError("Super expression must either be null or a function");\n    }\n\n    if (typeof _cache !== "undefined") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}\n\nmodule.exports = _wrapNativeSuper;\n\n/***/ }),\n\n/***/ "./node_modules/@babel/runtime/regenerator/index.js":\n/*!**********************************************************!*\\\n  !*** ./node_modules/@babel/runtime/regenerator/index.js ***!\n  \\**********************************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(/*! regenerator-runtime */ "./node_modules/regenerator-runtime/runtime-module.js");\n\n\n/***/ }),\n\n/***/ "./node_modules/@mapbox/point-geometry/index.js":\n/*!******************************************************!*\\\n  !*** ./node_modules/@mapbox/point-geometry/index.js ***!\n  \\******************************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n"use strict";\n\n\nmodule.exports = Point;\n\n/**\n * A standalone point geometry with useful accessor, comparison, and\n * modification methods.\n *\n * @class Point\n * @param {Number} x the x-coordinate. this could be longitude or screen\n * pixels, or any other sort of unit.\n * @param {Number} y the y-coordinate. this could be latitude or screen\n * pixels, or any other sort of unit.\n * @example\n * var point = new Point(-77, 38);\n */\nfunction Point(x, y) {\n    this.x = x;\n    this.y = y;\n}\n\nPoint.prototype = {\n\n    /**\n     * Clone this point, returning a new point that can be modified\n     * without affecting the old one.\n     * @return {Point} the clone\n     */\n    clone: function() { return new Point(this.x, this.y); },\n\n    /**\n     * Add this point\'s x & y coordinates to another point,\n     * yielding a new point.\n     * @param {Point} p the other point\n     * @return {Point} output point\n     */\n    add:     function(p) { return this.clone()._add(p); },\n\n    /**\n     * Subtract this point\'s x & y coordinates to from point,\n     * yielding a new point.\n     * @param {Point} p the other point\n     * @return {Point} output point\n     */\n    sub:     function(p) { return this.clone()._sub(p); },\n\n    /**\n     * Multiply this point\'s x & y coordinates by point,\n     * yielding a new point.\n     * @param {Point} p the other point\n     * @return {Point} output point\n     */\n    multByPoint:    function(p) { return this.clone()._multByPoint(p); },\n\n    /**\n     * Divide this point\'s x & y coordinates by point,\n     * yielding a new point.\n     * @param {Point} p the other point\n     * @return {Point} output point\n     */\n    divByPoint:     function(p) { return this.clone()._divByPoint(p); },\n\n    /**\n     * Multiply this point\'s x & y coordinates by a factor,\n     * yielding a new point.\n     * @param {Point} k factor\n     * @return {Point} output point\n     */\n    mult:    function(k) { return this.clone()._mult(k); },\n\n    /**\n     * Divide this point\'s x & y coordinates by a factor,\n     * yielding a new point.\n     * @param {Point} k factor\n     * @return {Point} output point\n     */\n    div:     function(k) { return this.clone()._div(k); },\n\n    /**\n     * Rotate this point around the 0, 0 origin by an angle a,\n     * given in radians\n     * @param {Number} a angle to rotate around, in radians\n     * @return {Point} output point\n     */\n    rotate:  function(a) { return this.clone()._rotate(a); },\n\n    /**\n     * Rotate this point around p point by an angle a,\n     * given in radians\n     * @param {Number} a angle to rotate around, in radians\n     * @param {Point} p Point to rotate around\n     * @return {Point} output point\n     */\n    rotateAround:  function(a,p) { return this.clone()._rotateAround(a,p); },\n\n    /**\n     * Multiply this point by a 4x1 transformation matrix\n     * @param {Array<Number>} m transformation matrix\n     * @return {Point} output point\n     */\n    matMult: function(m) { return this.clone()._matMult(m); },\n\n    /**\n     * Calculate this point but as a unit vector from 0, 0, meaning\n     * that the distance from the resulting point to the 0, 0\n     * coordinate will be equal to 1 and the angle from the resulting\n     * point to the 0, 0 coordinate will be the same as before.\n     * @return {Point} unit vector point\n     */\n    unit:    function() { return this.clone()._unit(); },\n\n    /**\n     * Compute a perpendicular point, where the new y coordinate\n     * is the old x coordinate and the new x coordinate is the old y\n     * coordinate multiplied by -1\n     * @return {Point} perpendicular point\n     */\n    perp:    function() { return this.clone()._perp(); },\n\n    /**\n     * Return a version of this point with the x & y coordinates\n     * rounded to integers.\n     * @return {Point} rounded point\n     */\n    round:   function() { return this.clone()._round(); },\n\n    /**\n     * Return the magitude of this point: this is the Euclidean\n     * distance from the 0, 0 coordinate to this point\'s x and y\n     * coordinates.\n     * @return {Number} magnitude\n     */\n    mag: function() {\n        return Math.sqrt(this.x * this.x + this.y * this.y);\n    },\n\n    /**\n     * Judge whether this point is equal to another point, returning\n     * true or false.\n     * @param {Point} other the other point\n     * @return {boolean} whether the points are equal\n     */\n    equals: function(other) {\n        return this.x === other.x &&\n               this.y === other.y;\n    },\n\n    /**\n     * Calculate the distance from this point to another point\n     * @param {Point} p the other point\n     * @return {Number} distance\n     */\n    dist: function(p) {\n        return Math.sqrt(this.distSqr(p));\n    },\n\n    /**\n     * Calculate the distance from this point to another point,\n     * without the square root step. Useful if you\'re comparing\n     * relative distances.\n     * @param {Point} p the other point\n     * @return {Number} distance\n     */\n    distSqr: function(p) {\n        var dx = p.x - this.x,\n            dy = p.y - this.y;\n        return dx * dx + dy * dy;\n    },\n\n    /**\n     * Get the angle from the 0, 0 coordinate to this point, in radians\n     * coordinates.\n     * @return {Number} angle\n     */\n    angle: function() {\n        return Math.atan2(this.y, this.x);\n    },\n\n    /**\n     * Get the angle from this point to another point, in radians\n     * @param {Point} b the other point\n     * @return {Number} angle\n     */\n    angleTo: function(b) {\n        return Math.atan2(this.y - b.y, this.x - b.x);\n    },\n\n    /**\n     * Get the angle between this point and another point, in radians\n     * @param {Point} b the other point\n     * @return {Number} angle\n     */\n    angleWith: function(b) {\n        return this.angleWithSep(b.x, b.y);\n    },\n\n    /*\n     * Find the angle of the two vectors, solving the formula for\n     * the cross product a x b = |a||b|sin() for .\n     * @param {Number} x the x-coordinate\n     * @param {Number} y the y-coordinate\n     * @return {Number} the angle in radians\n     */\n    angleWithSep: function(x, y) {\n        return Math.atan2(\n            this.x * y - this.y * x,\n            this.x * x + this.y * y);\n    },\n\n    _matMult: function(m) {\n        var x = m[0] * this.x + m[1] * this.y,\n            y = m[2] * this.x + m[3] * this.y;\n        this.x = x;\n        this.y = y;\n        return this;\n    },\n\n    _add: function(p) {\n        this.x += p.x;\n        this.y += p.y;\n        return this;\n    },\n\n    _sub: function(p) {\n        this.x -= p.x;\n        this.y -= p.y;\n        return this;\n    },\n\n    _mult: function(k) {\n        this.x *= k;\n        this.y *= k;\n        return this;\n    },\n\n    _div: function(k) {\n        this.x /= k;\n        this.y /= k;\n        return this;\n    },\n\n    _multByPoint: function(p) {\n        this.x *= p.x;\n        this.y *= p.y;\n        return this;\n    },\n\n    _divByPoint: function(p) {\n        this.x /= p.x;\n        this.y /= p.y;\n        return this;\n    },\n\n    _unit: function() {\n        this._div(this.mag());\n        return this;\n    },\n\n    _perp: function() {\n        var y = this.y;\n        this.y = this.x;\n        this.x = -y;\n        return this;\n    },\n\n    _rotate: function(angle) {\n        var cos = Math.cos(angle),\n            sin = Math.sin(angle),\n            x = cos * this.x - sin * this.y,\n            y = sin * this.x + cos * this.y;\n        this.x = x;\n        this.y = y;\n        return this;\n    },\n\n    _rotateAround: function(angle, p) {\n        var cos = Math.cos(angle),\n            sin = Math.sin(angle),\n            x = p.x + cos * (this.x - p.x) - sin * (this.y - p.y),\n            y = p.y + sin * (this.x - p.x) + cos * (this.y - p.y);\n        this.x = x;\n        this.y = y;\n        return this;\n    },\n\n    _round: function() {\n        this.x = Math.round(this.x);\n        this.y = Math.round(this.y);\n        return this;\n    }\n};\n\n/**\n * Construct a point from an array if necessary, otherwise if the input\n * is already a Point, or an unknown type, return it unchanged\n * @param {Array<Number>|Point|*} a any kind of input value\n * @return {Point} constructed point, or passed-through value.\n * @example\n * // this\n * var point = Point.convert([0, 1]);\n * // is equivalent to\n * var point = new Point(0, 1);\n */\nPoint.convert = function (a) {\n    if (a instanceof Point) {\n        return a;\n    }\n    if (Array.isArray(a)) {\n        return new Point(a[0], a[1]);\n    }\n    return a;\n};\n\n\n/***/ }),\n\n/***/ "./node_modules/@mapbox/vector-tile/index.js":\n/*!***************************************************!*\\\n  !*** ./node_modules/@mapbox/vector-tile/index.js ***!\n  \\***************************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports.VectorTile = __webpack_require__(/*! ./lib/vectortile.js */ "./node_modules/@mapbox/vector-tile/lib/vectortile.js");\nmodule.exports.VectorTileFeature = __webpack_require__(/*! ./lib/vectortilefeature.js */ "./node_modules/@mapbox/vector-tile/lib/vectortilefeature.js");\nmodule.exports.VectorTileLayer = __webpack_require__(/*! ./lib/vectortilelayer.js */ "./node_modules/@mapbox/vector-tile/lib/vectortilelayer.js");\n\n\n/***/ }),\n\n/***/ "./node_modules/@mapbox/vector-tile/lib/vectortile.js":\n/*!************************************************************!*\\\n  !*** ./node_modules/@mapbox/vector-tile/lib/vectortile.js ***!\n  \\************************************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n"use strict";\n\n\nvar VectorTileLayer = __webpack_require__(/*! ./vectortilelayer */ "./node_modules/@mapbox/vector-tile/lib/vectortilelayer.js");\n\nmodule.exports = VectorTile;\n\nfunction VectorTile(pbf, end) {\n    this.layers = pbf.readFields(readTile, {}, end);\n}\n\nfunction readTile(tag, layers, pbf) {\n    if (tag === 3) {\n        var layer = new VectorTileLayer(pbf, pbf.readVarint() + pbf.pos);\n        if (layer.length) layers[layer.name] = layer;\n    }\n}\n\n\n\n/***/ }),\n\n/***/ "./node_modules/@mapbox/vector-tile/lib/vectortilefeature.js":\n/*!*******************************************************************!*\\\n  !*** ./node_modules/@mapbox/vector-tile/lib/vectortilefeature.js ***!\n  \\*******************************************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n"use strict";\n\n\nvar Point = __webpack_require__(/*! @mapbox/point-geometry */ "./node_modules/@mapbox/point-geometry/index.js");\n\nmodule.exports = VectorTileFeature;\n\nfunction VectorTileFeature(pbf, end, extent, keys, values) {\n    // Public\n    this.properties = {};\n    this.extent = extent;\n    this.type = 0;\n\n    // Private\n    this._pbf = pbf;\n    this._geometry = -1;\n    this._keys = keys;\n    this._values = values;\n\n    pbf.readFields(readFeature, this, end);\n}\n\nfunction readFeature(tag, feature, pbf) {\n    if (tag == 1) feature.id = pbf.readVarint();\n    else if (tag == 2) readTag(pbf, feature);\n    else if (tag == 3) feature.type = pbf.readVarint();\n    else if (tag == 4) feature._geometry = pbf.pos;\n}\n\nfunction readTag(pbf, feature) {\n    var end = pbf.readVarint() + pbf.pos;\n\n    while (pbf.pos < end) {\n        var key = feature._keys[pbf.readVarint()],\n            value = feature._values[pbf.readVarint()];\n        feature.properties[key] = value;\n    }\n}\n\nVectorTileFeature.types = [\'Unknown\', \'Point\', \'LineString\', \'Polygon\'];\n\nVectorTileFeature.prototype.loadGeometry = function() {\n    var pbf = this._pbf;\n    pbf.pos = this._geometry;\n\n    var end = pbf.readVarint() + pbf.pos,\n        cmd = 1,\n        length = 0,\n        x = 0,\n        y = 0,\n        lines = [],\n        line;\n\n    while (pbf.pos < end) {\n        if (length <= 0) {\n            var cmdLen = pbf.readVarint();\n            cmd = cmdLen & 0x7;\n            length = cmdLen >> 3;\n        }\n\n        length--;\n\n        if (cmd === 1 || cmd === 2) {\n            x += pbf.readSVarint();\n            y += pbf.readSVarint();\n\n            if (cmd === 1) { // moveTo\n                if (line) lines.push(line);\n                line = [];\n            }\n\n            line.push(new Point(x, y));\n\n        } else if (cmd === 7) {\n\n            // Workaround for https://github.com/mapbox/mapnik-vector-tile/issues/90\n            if (line) {\n                line.push(line[0].clone()); // closePolygon\n            }\n\n        } else {\n            throw new Error(\'unknown command \' + cmd);\n        }\n    }\n\n    if (line) lines.push(line);\n\n    return lines;\n};\n\nVectorTileFeature.prototype.bbox = function() {\n    var pbf = this._pbf;\n    pbf.pos = this._geometry;\n\n    var end = pbf.readVarint() + pbf.pos,\n        cmd = 1,\n        length = 0,\n        x = 0,\n        y = 0,\n        x1 = Infinity,\n        x2 = -Infinity,\n        y1 = Infinity,\n        y2 = -Infinity;\n\n    while (pbf.pos < end) {\n        if (length <= 0) {\n            var cmdLen = pbf.readVarint();\n            cmd = cmdLen & 0x7;\n            length = cmdLen >> 3;\n        }\n\n        length--;\n\n        if (cmd === 1 || cmd === 2) {\n            x += pbf.readSVarint();\n            y += pbf.readSVarint();\n            if (x < x1) x1 = x;\n            if (x > x2) x2 = x;\n            if (y < y1) y1 = y;\n            if (y > y2) y2 = y;\n\n        } else if (cmd !== 7) {\n            throw new Error(\'unknown command \' + cmd);\n        }\n    }\n\n    return [x1, y1, x2, y2];\n};\n\nVectorTileFeature.prototype.toGeoJSON = function(x, y, z) {\n    var size = this.extent * Math.pow(2, z),\n        x0 = this.extent * x,\n        y0 = this.extent * y,\n        coords = this.loadGeometry(),\n        type = VectorTileFeature.types[this.type],\n        i, j;\n\n    function project(line) {\n        for (var j = 0; j < line.length; j++) {\n            var p = line[j], y2 = 180 - (p.y + y0) * 360 / size;\n            line[j] = [\n                (p.x + x0) * 360 / size - 180,\n                360 / Math.PI * Math.atan(Math.exp(y2 * Math.PI / 180)) - 90\n            ];\n        }\n    }\n\n    switch (this.type) {\n    case 1:\n        var points = [];\n        for (i = 0; i < coords.length; i++) {\n            points[i] = coords[i][0];\n        }\n        coords = points;\n        project(coords);\n        break;\n\n    case 2:\n        for (i = 0; i < coords.length; i++) {\n            project(coords[i]);\n        }\n        break;\n\n    case 3:\n        coords = classifyRings(coords);\n        for (i = 0; i < coords.length; i++) {\n            for (j = 0; j < coords[i].length; j++) {\n                project(coords[i][j]);\n            }\n        }\n        break;\n    }\n\n    if (coords.length === 1) {\n        coords = coords[0];\n    } else {\n        type = \'Multi\' + type;\n    }\n\n    var result = {\n        type: "Feature",\n        geometry: {\n            type: type,\n            coordinates: coords\n        },\n        properties: this.properties\n    };\n\n    if (\'id\' in this) {\n        result.id = this.id;\n    }\n\n    return result;\n};\n\n// classifies an array of rings into polygons with outer rings and holes\n\nfunction classifyRings(rings) {\n    var len = rings.length;\n\n    if (len <= 1) return [rings];\n\n    var polygons = [],\n        polygon,\n        ccw;\n\n    for (var i = 0; i < len; i++) {\n        var area = signedArea(rings[i]);\n        if (area === 0) continue;\n\n        if (ccw === undefined) ccw = area < 0;\n\n        if (ccw === area < 0) {\n            if (polygon) polygons.push(polygon);\n            polygon = [rings[i]];\n\n        } else {\n            polygon.push(rings[i]);\n        }\n    }\n    if (polygon) polygons.push(polygon);\n\n    return polygons;\n}\n\nfunction signedArea(ring) {\n    var sum = 0;\n    for (var i = 0, len = ring.length, j = len - 1, p1, p2; i < len; j = i++) {\n        p1 = ring[i];\n        p2 = ring[j];\n        sum += (p2.x - p1.x) * (p1.y + p2.y);\n    }\n    return sum;\n}\n\n\n/***/ }),\n\n/***/ "./node_modules/@mapbox/vector-tile/lib/vectortilelayer.js":\n/*!*****************************************************************!*\\\n  !*** ./node_modules/@mapbox/vector-tile/lib/vectortilelayer.js ***!\n  \\*****************************************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n"use strict";\n\n\nvar VectorTileFeature = __webpack_require__(/*! ./vectortilefeature.js */ "./node_modules/@mapbox/vector-tile/lib/vectortilefeature.js");\n\nmodule.exports = VectorTileLayer;\n\nfunction VectorTileLayer(pbf, end) {\n    // Public\n    this.version = 1;\n    this.name = null;\n    this.extent = 4096;\n    this.length = 0;\n\n    // Private\n    this._pbf = pbf;\n    this._keys = [];\n    this._values = [];\n    this._features = [];\n\n    pbf.readFields(readLayer, this, end);\n\n    this.length = this._features.length;\n}\n\nfunction readLayer(tag, layer, pbf) {\n    if (tag === 15) layer.version = pbf.readVarint();\n    else if (tag === 1) layer.name = pbf.readString();\n    else if (tag === 5) layer.extent = pbf.readVarint();\n    else if (tag === 2) layer._features.push(pbf.pos);\n    else if (tag === 3) layer._keys.push(pbf.readString());\n    else if (tag === 4) layer._values.push(readValueMessage(pbf));\n}\n\nfunction readValueMessage(pbf) {\n    var value = null,\n        end = pbf.readVarint() + pbf.pos;\n\n    while (pbf.pos < end) {\n        var tag = pbf.readVarint() >> 3;\n\n        value = tag === 1 ? pbf.readString() :\n            tag === 2 ? pbf.readFloat() :\n            tag === 3 ? pbf.readDouble() :\n            tag === 4 ? pbf.readVarint64() :\n            tag === 5 ? pbf.readVarint() :\n            tag === 6 ? pbf.readSVarint() :\n            tag === 7 ? pbf.readBoolean() : null;\n    }\n\n    return value;\n}\n\n// return feature `i` from this layer as a `VectorTileFeature`\nVectorTileLayer.prototype.feature = function(i) {\n    if (i < 0 || i >= this._features.length) throw new Error(\'feature index out of bounds\');\n\n    this._pbf.pos = this._features[i];\n\n    var end = this._pbf.readVarint() + this._pbf.pos;\n    return new VectorTileFeature(this._pbf, end, this.extent, this._keys, this._values);\n};\n\n\n/***/ }),\n\n/***/ "./node_modules/earcut/src/earcut.js":\n/*!*******************************************!*\\\n  !*** ./node_modules/earcut/src/earcut.js ***!\n  \\*******************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n"use strict";\n\n\nmodule.exports = earcut;\nmodule.exports.default = earcut;\n\nfunction earcut(data, holeIndices, dim) {\n\n    dim = dim || 2;\n\n    var hasHoles = holeIndices && holeIndices.length,\n        outerLen = hasHoles ? holeIndices[0] * dim : data.length,\n        outerNode = linkedList(data, 0, outerLen, dim, true),\n        triangles = [];\n\n    if (!outerNode) return triangles;\n\n    var minX, minY, maxX, maxY, x, y, invSize;\n\n    if (hasHoles) outerNode = eliminateHoles(data, holeIndices, outerNode, dim);\n\n    // if the shape is not too simple, we\'ll use z-order curve hash later; calculate polygon bbox\n    if (data.length > 80 * dim) {\n        minX = maxX = data[0];\n        minY = maxY = data[1];\n\n        for (var i = dim; i < outerLen; i += dim) {\n            x = data[i];\n            y = data[i + 1];\n            if (x < minX) minX = x;\n            if (y < minY) minY = y;\n            if (x > maxX) maxX = x;\n            if (y > maxY) maxY = y;\n        }\n\n        // minX, minY and invSize are later used to transform coords into integers for z-order calculation\n        invSize = Math.max(maxX - minX, maxY - minY);\n        invSize = invSize !== 0 ? 1 / invSize : 0;\n    }\n\n    earcutLinked(outerNode, triangles, dim, minX, minY, invSize);\n\n    return triangles;\n}\n\n// create a circular doubly linked list from polygon points in the specified winding order\nfunction linkedList(data, start, end, dim, clockwise) {\n    var i, last;\n\n    if (clockwise === (signedArea(data, start, end, dim) > 0)) {\n        for (i = start; i < end; i += dim) last = insertNode(i, data[i], data[i + 1], last);\n    } else {\n        for (i = end - dim; i >= start; i -= dim) last = insertNode(i, data[i], data[i + 1], last);\n    }\n\n    if (last && equals(last, last.next)) {\n        removeNode(last);\n        last = last.next;\n    }\n\n    return last;\n}\n\n// eliminate colinear or duplicate points\nfunction filterPoints(start, end) {\n    if (!start) return start;\n    if (!end) end = start;\n\n    var p = start,\n        again;\n    do {\n        again = false;\n\n        if (!p.steiner && (equals(p, p.next) || area(p.prev, p, p.next) === 0)) {\n            removeNode(p);\n            p = end = p.prev;\n            if (p === p.next) break;\n            again = true;\n\n        } else {\n            p = p.next;\n        }\n    } while (again || p !== end);\n\n    return end;\n}\n\n// main ear slicing loop which triangulates a polygon (given as a linked list)\nfunction earcutLinked(ear, triangles, dim, minX, minY, invSize, pass) {\n    if (!ear) return;\n\n    // interlink polygon nodes in z-order\n    if (!pass && invSize) indexCurve(ear, minX, minY, invSize);\n\n    var stop = ear,\n        prev, next;\n\n    // iterate through ears, slicing them one by one\n    while (ear.prev !== ear.next) {\n        prev = ear.prev;\n        next = ear.next;\n\n        if (invSize ? isEarHashed(ear, minX, minY, invSize) : isEar(ear)) {\n            // cut off the triangle\n            triangles.push(prev.i / dim);\n            triangles.push(ear.i / dim);\n            triangles.push(next.i / dim);\n\n            removeNode(ear);\n\n            // skipping the next vertice leads to less sliver triangles\n            ear = next.next;\n            stop = next.next;\n\n            continue;\n        }\n\n        ear = next;\n\n        // if we looped through the whole remaining polygon and can\'t find any more ears\n        if (ear === stop) {\n            // try filtering points and slicing again\n            if (!pass) {\n                earcutLinked(filterPoints(ear), triangles, dim, minX, minY, invSize, 1);\n\n            // if this didn\'t work, try curing all small self-intersections locally\n            } else if (pass === 1) {\n                ear = cureLocalIntersections(ear, triangles, dim);\n                earcutLinked(ear, triangles, dim, minX, minY, invSize, 2);\n\n            // as a last resort, try splitting the remaining polygon into two\n            } else if (pass === 2) {\n                splitEarcut(ear, triangles, dim, minX, minY, invSize);\n            }\n\n            break;\n        }\n    }\n}\n\n// check whether a polygon node forms a valid ear with adjacent nodes\nfunction isEar(ear) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can\'t be an ear\n\n    // now make sure we don\'t have other points inside the potential ear\n    var p = ear.next.next;\n\n    while (p !== ear.prev) {\n        if (pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.next;\n    }\n\n    return true;\n}\n\nfunction isEarHashed(ear, minX, minY, invSize) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can\'t be an ear\n\n    // triangle bbox; min & max are calculated like this for speed\n    var minTX = a.x < b.x ? (a.x < c.x ? a.x : c.x) : (b.x < c.x ? b.x : c.x),\n        minTY = a.y < b.y ? (a.y < c.y ? a.y : c.y) : (b.y < c.y ? b.y : c.y),\n        maxTX = a.x > b.x ? (a.x > c.x ? a.x : c.x) : (b.x > c.x ? b.x : c.x),\n        maxTY = a.y > b.y ? (a.y > c.y ? a.y : c.y) : (b.y > c.y ? b.y : c.y);\n\n    // z-order range for the current triangle bbox;\n    var minZ = zOrder(minTX, minTY, minX, minY, invSize),\n        maxZ = zOrder(maxTX, maxTY, minX, minY, invSize);\n\n    var p = ear.prevZ,\n        n = ear.nextZ;\n\n    // look for points inside the triangle in both directions\n    while (p && p.z >= minZ && n && n.z <= maxZ) {\n        if (p !== ear.prev && p !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n\n        if (n !== ear.prev && n !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y) &&\n            area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    // look for remaining points in decreasing z-order\n    while (p && p.z >= minZ) {\n        if (p !== ear.prev && p !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n    }\n\n    // look for remaining points in increasing z-order\n    while (n && n.z <= maxZ) {\n        if (n !== ear.prev && n !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y) &&\n            area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    return true;\n}\n\n// go through all polygon nodes and cure small local self-intersections\nfunction cureLocalIntersections(start, triangles, dim) {\n    var p = start;\n    do {\n        var a = p.prev,\n            b = p.next.next;\n\n        if (!equals(a, b) && intersects(a, p, p.next, b) && locallyInside(a, b) && locallyInside(b, a)) {\n\n            triangles.push(a.i / dim);\n            triangles.push(p.i / dim);\n            triangles.push(b.i / dim);\n\n            // remove two nodes involved\n            removeNode(p);\n            removeNode(p.next);\n\n            p = start = b;\n        }\n        p = p.next;\n    } while (p !== start);\n\n    return p;\n}\n\n// try splitting polygon into two and triangulate them independently\nfunction splitEarcut(start, triangles, dim, minX, minY, invSize) {\n    // look for a valid diagonal that divides the polygon into two\n    var a = start;\n    do {\n        var b = a.next.next;\n        while (b !== a.prev) {\n            if (a.i !== b.i && isValidDiagonal(a, b)) {\n                // split the polygon in two by the diagonal\n                var c = splitPolygon(a, b);\n\n                // filter colinear points around the cuts\n                a = filterPoints(a, a.next);\n                c = filterPoints(c, c.next);\n\n                // run earcut on each half\n                earcutLinked(a, triangles, dim, minX, minY, invSize);\n                earcutLinked(c, triangles, dim, minX, minY, invSize);\n                return;\n            }\n            b = b.next;\n        }\n        a = a.next;\n    } while (a !== start);\n}\n\n// link every hole into the outer loop, producing a single-ring polygon without holes\nfunction eliminateHoles(data, holeIndices, outerNode, dim) {\n    var queue = [],\n        i, len, start, end, list;\n\n    for (i = 0, len = holeIndices.length; i < len; i++) {\n        start = holeIndices[i] * dim;\n        end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n        list = linkedList(data, start, end, dim, false);\n        if (list === list.next) list.steiner = true;\n        queue.push(getLeftmost(list));\n    }\n\n    queue.sort(compareX);\n\n    // process holes from left to right\n    for (i = 0; i < queue.length; i++) {\n        eliminateHole(queue[i], outerNode);\n        outerNode = filterPoints(outerNode, outerNode.next);\n    }\n\n    return outerNode;\n}\n\nfunction compareX(a, b) {\n    return a.x - b.x;\n}\n\n// find a bridge between vertices that connects hole with an outer ring and and link it\nfunction eliminateHole(hole, outerNode) {\n    outerNode = findHoleBridge(hole, outerNode);\n    if (outerNode) {\n        var b = splitPolygon(outerNode, hole);\n        filterPoints(b, b.next);\n    }\n}\n\n// David Eberly\'s algorithm for finding a bridge between hole and outer polygon\nfunction findHoleBridge(hole, outerNode) {\n    var p = outerNode,\n        hx = hole.x,\n        hy = hole.y,\n        qx = -Infinity,\n        m;\n\n    // find a segment intersected by a ray from the hole\'s leftmost point to the left;\n    // segment\'s endpoint with lesser x will be potential connection point\n    do {\n        if (hy <= p.y && hy >= p.next.y && p.next.y !== p.y) {\n            var x = p.x + (hy - p.y) * (p.next.x - p.x) / (p.next.y - p.y);\n            if (x <= hx && x > qx) {\n                qx = x;\n                if (x === hx) {\n                    if (hy === p.y) return p;\n                    if (hy === p.next.y) return p.next;\n                }\n                m = p.x < p.next.x ? p : p.next;\n            }\n        }\n        p = p.next;\n    } while (p !== outerNode);\n\n    if (!m) return null;\n\n    if (hx === qx) return m.prev; // hole touches outer segment; pick lower endpoint\n\n    // look for points inside the triangle of hole point, segment intersection and endpoint;\n    // if there are no points found, we have a valid connection;\n    // otherwise choose the point of the minimum angle with the ray as connection point\n\n    var stop = m,\n        mx = m.x,\n        my = m.y,\n        tanMin = Infinity,\n        tan;\n\n    p = m.next;\n\n    while (p !== stop) {\n        if (hx >= p.x && p.x >= mx && hx !== p.x &&\n                pointInTriangle(hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y)) {\n\n            tan = Math.abs(hy - p.y) / (hx - p.x); // tangential\n\n            if ((tan < tanMin || (tan === tanMin && p.x > m.x)) && locallyInside(p, hole)) {\n                m = p;\n                tanMin = tan;\n            }\n        }\n\n        p = p.next;\n    }\n\n    return m;\n}\n\n// interlink polygon nodes in z-order\nfunction indexCurve(start, minX, minY, invSize) {\n    var p = start;\n    do {\n        if (p.z === null) p.z = zOrder(p.x, p.y, minX, minY, invSize);\n        p.prevZ = p.prev;\n        p.nextZ = p.next;\n        p = p.next;\n    } while (p !== start);\n\n    p.prevZ.nextZ = null;\n    p.prevZ = null;\n\n    sortLinked(p);\n}\n\n// Simon Tatham\'s linked list merge sort algorithm\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\nfunction sortLinked(list) {\n    var i, p, q, e, tail, numMerges, pSize, qSize,\n        inSize = 1;\n\n    do {\n        p = list;\n        list = null;\n        tail = null;\n        numMerges = 0;\n\n        while (p) {\n            numMerges++;\n            q = p;\n            pSize = 0;\n            for (i = 0; i < inSize; i++) {\n                pSize++;\n                q = q.nextZ;\n                if (!q) break;\n            }\n            qSize = inSize;\n\n            while (pSize > 0 || (qSize > 0 && q)) {\n\n                if (pSize !== 0 && (qSize === 0 || !q || p.z <= q.z)) {\n                    e = p;\n                    p = p.nextZ;\n                    pSize--;\n                } else {\n                    e = q;\n                    q = q.nextZ;\n                    qSize--;\n                }\n\n                if (tail) tail.nextZ = e;\n                else list = e;\n\n                e.prevZ = tail;\n                tail = e;\n            }\n\n            p = q;\n        }\n\n        tail.nextZ = null;\n        inSize *= 2;\n\n    } while (numMerges > 1);\n\n    return list;\n}\n\n// z-order of a point given coords and inverse of the longer side of data bbox\nfunction zOrder(x, y, minX, minY, invSize) {\n    // coords are transformed into non-negative 15-bit integer range\n    x = 32767 * (x - minX) * invSize;\n    y = 32767 * (y - minY) * invSize;\n\n    x = (x | (x << 8)) & 0x00FF00FF;\n    x = (x | (x << 4)) & 0x0F0F0F0F;\n    x = (x | (x << 2)) & 0x33333333;\n    x = (x | (x << 1)) & 0x55555555;\n\n    y = (y | (y << 8)) & 0x00FF00FF;\n    y = (y | (y << 4)) & 0x0F0F0F0F;\n    y = (y | (y << 2)) & 0x33333333;\n    y = (y | (y << 1)) & 0x55555555;\n\n    return x | (y << 1);\n}\n\n// find the leftmost node of a polygon ring\nfunction getLeftmost(start) {\n    var p = start,\n        leftmost = start;\n    do {\n        if (p.x < leftmost.x) leftmost = p;\n        p = p.next;\n    } while (p !== start);\n\n    return leftmost;\n}\n\n// check if a point lies within a convex triangle\nfunction pointInTriangle(ax, ay, bx, by, cx, cy, px, py) {\n    return (cx - px) * (ay - py) - (ax - px) * (cy - py) >= 0 &&\n           (ax - px) * (by - py) - (bx - px) * (ay - py) >= 0 &&\n           (bx - px) * (cy - py) - (cx - px) * (by - py) >= 0;\n}\n\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\nfunction isValidDiagonal(a, b) {\n    return a.next.i !== b.i && a.prev.i !== b.i && !intersectsPolygon(a, b) &&\n           locallyInside(a, b) && locallyInside(b, a) && middleInside(a, b);\n}\n\n// signed area of a triangle\nfunction area(p, q, r) {\n    return (q.y - p.y) * (r.x - q.x) - (q.x - p.x) * (r.y - q.y);\n}\n\n// check if two points are equal\nfunction equals(p1, p2) {\n    return p1.x === p2.x && p1.y === p2.y;\n}\n\n// check if two segments intersect\nfunction intersects(p1, q1, p2, q2) {\n    if ((equals(p1, q1) && equals(p2, q2)) ||\n        (equals(p1, q2) && equals(p2, q1))) return true;\n    return area(p1, q1, p2) > 0 !== area(p1, q1, q2) > 0 &&\n           area(p2, q2, p1) > 0 !== area(p2, q2, q1) > 0;\n}\n\n// check if a polygon diagonal intersects any polygon segments\nfunction intersectsPolygon(a, b) {\n    var p = a;\n    do {\n        if (p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\n                intersects(p, p.next, a, b)) return true;\n        p = p.next;\n    } while (p !== a);\n\n    return false;\n}\n\n// check if a polygon diagonal is locally inside the polygon\nfunction locallyInside(a, b) {\n    return area(a.prev, a, a.next) < 0 ?\n        area(a, b, a.next) >= 0 && area(a, a.prev, b) >= 0 :\n        area(a, b, a.prev) < 0 || area(a, a.next, b) < 0;\n}\n\n// check if the middle point of a polygon diagonal is inside the polygon\nfunction middleInside(a, b) {\n    var p = a,\n        inside = false,\n        px = (a.x + b.x) / 2,\n        py = (a.y + b.y) / 2;\n    do {\n        if (((p.y > py) !== (p.next.y > py)) && p.next.y !== p.y &&\n                (px < (p.next.x - p.x) * (py - p.y) / (p.next.y - p.y) + p.x))\n            inside = !inside;\n        p = p.next;\n    } while (p !== a);\n\n    return inside;\n}\n\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\nfunction splitPolygon(a, b) {\n    var a2 = new Node(a.i, a.x, a.y),\n        b2 = new Node(b.i, b.x, b.y),\n        an = a.next,\n        bp = b.prev;\n\n    a.next = b;\n    b.prev = a;\n\n    a2.next = an;\n    an.prev = a2;\n\n    b2.next = a2;\n    a2.prev = b2;\n\n    bp.next = b2;\n    b2.prev = bp;\n\n    return b2;\n}\n\n// create a node and optionally link it with previous one (in a circular doubly linked list)\nfunction insertNode(i, x, y, last) {\n    var p = new Node(i, x, y);\n\n    if (!last) {\n        p.prev = p;\n        p.next = p;\n\n    } else {\n        p.next = last.next;\n        p.prev = last;\n        last.next.prev = p;\n        last.next = p;\n    }\n    return p;\n}\n\nfunction removeNode(p) {\n    p.next.prev = p.prev;\n    p.prev.next = p.next;\n\n    if (p.prevZ) p.prevZ.nextZ = p.nextZ;\n    if (p.nextZ) p.nextZ.prevZ = p.prevZ;\n}\n\nfunction Node(i, x, y) {\n    // vertice index in coordinates array\n    this.i = i;\n\n    // vertex coordinates\n    this.x = x;\n    this.y = y;\n\n    // previous and next vertice nodes in a polygon ring\n    this.prev = null;\n    this.next = null;\n\n    // z-order curve value\n    this.z = null;\n\n    // previous and next nodes in z-order\n    this.prevZ = null;\n    this.nextZ = null;\n\n    // indicates whether this is a steiner point\n    this.steiner = false;\n}\n\n// return a percentage difference between the polygon area and its triangulation area;\n// used to verify correctness of triangulation\nearcut.deviation = function (data, holeIndices, dim, triangles) {\n    var hasHoles = holeIndices && holeIndices.length;\n    var outerLen = hasHoles ? holeIndices[0] * dim : data.length;\n\n    var polygonArea = Math.abs(signedArea(data, 0, outerLen, dim));\n    if (hasHoles) {\n        for (var i = 0, len = holeIndices.length; i < len; i++) {\n            var start = holeIndices[i] * dim;\n            var end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n            polygonArea -= Math.abs(signedArea(data, start, end, dim));\n        }\n    }\n\n    var trianglesArea = 0;\n    for (i = 0; i < triangles.length; i += 3) {\n        var a = triangles[i] * dim;\n        var b = triangles[i + 1] * dim;\n        var c = triangles[i + 2] * dim;\n        trianglesArea += Math.abs(\n            (data[a] - data[c]) * (data[b + 1] - data[a + 1]) -\n            (data[a] - data[b]) * (data[c + 1] - data[a + 1]));\n    }\n\n    return polygonArea === 0 && trianglesArea === 0 ? 0 :\n        Math.abs((trianglesArea - polygonArea) / polygonArea);\n};\n\nfunction signedArea(data, start, end, dim) {\n    var sum = 0;\n    for (var i = start, j = end - dim; i < end; i += dim) {\n        sum += (data[j] - data[i]) * (data[i + 1] + data[j + 1]);\n        j = i;\n    }\n    return sum;\n}\n\n// turn a polygon in a multi-dimensional array form (e.g. as in GeoJSON) into a form Earcut accepts\nearcut.flatten = function (data) {\n    var dim = data[0][0].length,\n        result = {vertices: [], holes: [], dimensions: dim},\n        holeIndex = 0;\n\n    for (var i = 0; i < data.length; i++) {\n        for (var j = 0; j < data[i].length; j++) {\n            for (var d = 0; d < dim; d++) result.vertices.push(data[i][j][d]);\n        }\n        if (i > 0) {\n            holeIndex += data[i - 1].length;\n            result.holes.push(holeIndex);\n        }\n    }\n    return result;\n};\n\n\n/***/ }),\n\n/***/ "./node_modules/gl-matrix/lib/gl-matrix.js":\n/*!*************************************************!*\\\n  !*** ./node_modules/gl-matrix/lib/gl-matrix.js ***!\n  \\*************************************************/\n/*! exports provided: glMatrix, mat2, mat2d, mat3, mat4, quat, quat2, vec2, vec3, vec4 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _gl_matrix_common_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./gl-matrix/common.js */ "./node_modules/gl-matrix/lib/gl-matrix/common.js");\n/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, "glMatrix", function() { return _gl_matrix_common_js__WEBPACK_IMPORTED_MODULE_0__; });\n/* harmony import */ var _gl_matrix_mat2_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./gl-matrix/mat2.js */ "./node_modules/gl-matrix/lib/gl-matrix/mat2.js");\n/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, "mat2", function() { return _gl_matrix_mat2_js__WEBPACK_IMPORTED_MODULE_1__; });\n/* harmony import */ var _gl_matrix_mat2d_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./gl-matrix/mat2d.js */ "./node_modules/gl-matrix/lib/gl-matrix/mat2d.js");\n/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, "mat2d", function() { return _gl_matrix_mat2d_js__WEBPACK_IMPORTED_MODULE_2__; });\n/* harmony import */ var _gl_matrix_mat3_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./gl-matrix/mat3.js */ "./node_modules/gl-matrix/lib/gl-matrix/mat3.js");\n/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, "mat3", function() { return _gl_matrix_mat3_js__WEBPACK_IMPORTED_MODULE_3__; });\n/* harmony import */ var _gl_matrix_mat4_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./gl-matrix/mat4.js */ "./node_modules/gl-matrix/lib/gl-matrix/mat4.js");\n/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, "mat4", function() { return _gl_matrix_mat4_js__WEBPACK_IMPORTED_MODULE_4__; });\n/* harmony import */ var _gl_matrix_quat_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./gl-matrix/quat.js */ "./node_modules/gl-matrix/lib/gl-matrix/quat.js");\n/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, "quat", function() { return _gl_matrix_quat_js__WEBPACK_IMPORTED_MODULE_5__; });\n/* harmony import */ var _gl_matrix_quat2_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./gl-matrix/quat2.js */ "./node_modules/gl-matrix/lib/gl-matrix/quat2.js");\n/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, "quat2", function() { return _gl_matrix_quat2_js__WEBPACK_IMPORTED_MODULE_6__; });\n/* harmony import */ var _gl_matrix_vec2_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./gl-matrix/vec2.js */ "./node_modules/gl-matrix/lib/gl-matrix/vec2.js");\n/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, "vec2", function() { return _gl_matrix_vec2_js__WEBPACK_IMPORTED_MODULE_7__; });\n/* harmony import */ var _gl_matrix_vec3_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./gl-matrix/vec3.js */ "./node_modules/gl-matrix/lib/gl-matrix/vec3.js");\n/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, "vec3", function() { return _gl_matrix_vec3_js__WEBPACK_IMPORTED_MODULE_8__; });\n/* harmony import */ var _gl_matrix_vec4_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./gl-matrix/vec4.js */ "./node_modules/gl-matrix/lib/gl-matrix/vec4.js");\n/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, "vec4", function() { return _gl_matrix_vec4_js__WEBPACK_IMPORTED_MODULE_9__; });\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n/***/ }),\n\n/***/ "./node_modules/gl-matrix/lib/gl-matrix/common.js":\n/*!********************************************************!*\\\n  !*** ./node_modules/gl-matrix/lib/gl-matrix/common.js ***!\n  \\********************************************************/\n/*! exports provided: EPSILON, ARRAY_TYPE, RANDOM, setMatrixArrayType, toRadian, equals */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EPSILON", function() { return EPSILON; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ARRAY_TYPE", function() { return ARRAY_TYPE; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RANDOM", function() { return RANDOM; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setMatrixArrayType", function() { return setMatrixArrayType; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "toRadian", function() { return toRadian; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "equals", function() { return equals; });\n/**\r\n * Common utilities\r\n * @module glMatrix\r\n */\r\n\r\n// Configuration Constants\r\nvar EPSILON = 0.000001;\r\nvar ARRAY_TYPE = typeof Float32Array !== \'undefined\' ? Float32Array : Array;\r\nvar RANDOM = Math.random;\r\n\r\n/**\r\n * Sets the type of array used when creating new vectors and matrices\r\n *\r\n * @param {Type} type Array type, such as Float32Array or Array\r\n */\r\nfunction setMatrixArrayType(type) {\r\n  ARRAY_TYPE = type;\r\n}\r\n\r\nvar degree = Math.PI / 180;\r\n\r\n/**\r\n * Convert Degree To Radian\r\n *\r\n * @param {Number} a Angle in Degrees\r\n */\r\nfunction toRadian(a) {\r\n  return a * degree;\r\n}\r\n\r\n/**\r\n * Tests whether or not the arguments have approximately the same value, within an absolute\r\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\r\n * than or equal to 1.0, and a relative tolerance is used for larger values)\r\n *\r\n * @param {Number} a The first number to test.\r\n * @param {Number} b The second number to test.\r\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\r\n */\r\nfunction equals(a, b) {\r\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\r\n}\n\n/***/ }),\n\n/***/ "./node_modules/gl-matrix/lib/gl-matrix/mat2.js":\n/*!******************************************************!*\\\n  !*** ./node_modules/gl-matrix/lib/gl-matrix/mat2.js ***!\n  \\******************************************************/\n/*! exports provided: create, clone, copy, identity, fromValues, set, transpose, invert, adjoint, determinant, multiply, rotate, scale, fromRotation, fromScaling, str, frob, LDU, add, subtract, exactEquals, equals, multiplyScalar, multiplyScalarAndAdd, mul, sub */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "create", function() { return create; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "clone", function() { return clone; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "copy", function() { return copy; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "identity", function() { return identity; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fromValues", function() { return fromValues; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "set", function() { return set; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "transpose", function() { return transpose; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "invert", function() { return invert; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "adjoint", function() { return adjoint; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "determinant", function() { return determinant; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "multiply", function() { return multiply; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rotate", function() { return rotate; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scale", function() { return scale; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fromRotation", function() { return fromRotation; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fromScaling", function() { return fromScaling; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "str", function() { return str; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "frob", function() { return frob; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LDU", function() { return LDU; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "add", function() { return add; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "subtract", function() { return subtract; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "exactEquals", function() { return exactEquals; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "equals", function() { return equals; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "multiplyScalar", function() { return multiplyScalar; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "multiplyScalarAndAdd", function() { return multiplyScalarAndAdd; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mul", function() { return mul; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sub", function() { return sub; });\n/* harmony import */ var _common_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./common.js */ "./node_modules/gl-matrix/lib/gl-matrix/common.js");\n\r\n\r\n/**\r\n * 2x2 Matrix\r\n * @module mat2\r\n */\r\n\r\n/**\r\n * Creates a new identity mat2\r\n *\r\n * @returns {mat2} a new 2x2 matrix\r\n */\r\nfunction create() {\r\n  var out = new _common_js__WEBPACK_IMPORTED_MODULE_0__["ARRAY_TYPE"](4);\r\n  if (_common_js__WEBPACK_IMPORTED_MODULE_0__["ARRAY_TYPE"] != Float32Array) {\r\n    out[1] = 0;\r\n    out[2] = 0;\r\n  }\r\n  out[0] = 1;\r\n  out[3] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a new mat2 initialized with values from an existing matrix\r\n *\r\n * @param {mat2} a matrix to clone\r\n * @returns {mat2} a new 2x2 matrix\r\n */\r\nfunction clone(a) {\r\n  var out = new _common_js__WEBPACK_IMPORTED_MODULE_0__["ARRAY_TYPE"](4);\r\n  out[0] = a[0];\r\n  out[1] = a[1];\r\n  out[2] = a[2];\r\n  out[3] = a[3];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Copy the values from one mat2 to another\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {mat2} a the source matrix\r\n * @returns {mat2} out\r\n */\r\nfunction copy(out, a) {\r\n  out[0] = a[0];\r\n  out[1] = a[1];\r\n  out[2] = a[2];\r\n  out[3] = a[3];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Set a mat2 to the identity matrix\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @returns {mat2} out\r\n */\r\nfunction identity(out) {\r\n  out[0] = 1;\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n  out[3] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Create a new mat2 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 2)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 3)\r\n * @returns {mat2} out A new 2x2 matrix\r\n */\r\nfunction fromValues(m00, m01, m10, m11) {\r\n  var out = new _common_js__WEBPACK_IMPORTED_MODULE_0__["ARRAY_TYPE"](4);\r\n  out[0] = m00;\r\n  out[1] = m01;\r\n  out[2] = m10;\r\n  out[3] = m11;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Set the components of a mat2 to the given values\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 2)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 3)\r\n * @returns {mat2} out\r\n */\r\nfunction set(out, m00, m01, m10, m11) {\r\n  out[0] = m00;\r\n  out[1] = m01;\r\n  out[2] = m10;\r\n  out[3] = m11;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Transpose the values of a mat2\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {mat2} a the source matrix\r\n * @returns {mat2} out\r\n */\r\nfunction transpose(out, a) {\r\n  // If we are transposing ourselves we can skip a few steps but have to cache\r\n  // some values\r\n  if (out === a) {\r\n    var a1 = a[1];\r\n    out[1] = a[2];\r\n    out[2] = a1;\r\n  } else {\r\n    out[0] = a[0];\r\n    out[1] = a[2];\r\n    out[2] = a[1];\r\n    out[3] = a[3];\r\n  }\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Inverts a mat2\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {mat2} a the source matrix\r\n * @returns {mat2} out\r\n */\r\nfunction invert(out, a) {\r\n  var a0 = a[0],\r\n      a1 = a[1],\r\n      a2 = a[2],\r\n      a3 = a[3];\r\n\r\n  // Calculate the determinant\r\n  var det = a0 * a3 - a2 * a1;\r\n\r\n  if (!det) {\r\n    return null;\r\n  }\r\n  det = 1.0 / det;\r\n\r\n  out[0] = a3 * det;\r\n  out[1] = -a1 * det;\r\n  out[2] = -a2 * det;\r\n  out[3] = a0 * det;\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the adjugate of a mat2\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {mat2} a the source matrix\r\n * @returns {mat2} out\r\n */\r\nfunction adjoint(out, a) {\r\n  // Caching this value is nessecary if out == a\r\n  var a0 = a[0];\r\n  out[0] = a[3];\r\n  out[1] = -a[1];\r\n  out[2] = -a[2];\r\n  out[3] = a0;\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the determinant of a mat2\r\n *\r\n * @param {mat2} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\r\nfunction determinant(a) {\r\n  return a[0] * a[3] - a[2] * a[1];\r\n}\r\n\r\n/**\r\n * Multiplies two mat2\'s\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {mat2} a the first operand\r\n * @param {mat2} b the second operand\r\n * @returns {mat2} out\r\n */\r\nfunction multiply(out, a, b) {\r\n  var a0 = a[0],\r\n      a1 = a[1],\r\n      a2 = a[2],\r\n      a3 = a[3];\r\n  var b0 = b[0],\r\n      b1 = b[1],\r\n      b2 = b[2],\r\n      b3 = b[3];\r\n  out[0] = a0 * b0 + a2 * b1;\r\n  out[1] = a1 * b0 + a3 * b1;\r\n  out[2] = a0 * b2 + a2 * b3;\r\n  out[3] = a1 * b2 + a3 * b3;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotates a mat2 by the given angle\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {mat2} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat2} out\r\n */\r\nfunction rotate(out, a, rad) {\r\n  var a0 = a[0],\r\n      a1 = a[1],\r\n      a2 = a[2],\r\n      a3 = a[3];\r\n  var s = Math.sin(rad);\r\n  var c = Math.cos(rad);\r\n  out[0] = a0 * c + a2 * s;\r\n  out[1] = a1 * c + a3 * s;\r\n  out[2] = a0 * -s + a2 * c;\r\n  out[3] = a1 * -s + a3 * c;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Scales the mat2 by the dimensions in the given vec2\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {mat2} a the matrix to rotate\r\n * @param {vec2} v the vec2 to scale the matrix by\r\n * @returns {mat2} out\r\n **/\r\nfunction scale(out, a, v) {\r\n  var a0 = a[0],\r\n      a1 = a[1],\r\n      a2 = a[2],\r\n      a3 = a[3];\r\n  var v0 = v[0],\r\n      v1 = v[1];\r\n  out[0] = a0 * v0;\r\n  out[1] = a1 * v0;\r\n  out[2] = a2 * v1;\r\n  out[3] = a3 * v1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a given angle\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat2.identity(dest);\r\n *     mat2.rotate(dest, dest, rad);\r\n *\r\n * @param {mat2} out mat2 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat2} out\r\n */\r\nfunction fromRotation(out, rad) {\r\n  var s = Math.sin(rad);\r\n  var c = Math.cos(rad);\r\n  out[0] = c;\r\n  out[1] = s;\r\n  out[2] = -s;\r\n  out[3] = c;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat2.identity(dest);\r\n *     mat2.scale(dest, dest, vec);\r\n *\r\n * @param {mat2} out mat2 receiving operation result\r\n * @param {vec2} v Scaling vector\r\n * @returns {mat2} out\r\n */\r\nfunction fromScaling(out, v) {\r\n  out[0] = v[0];\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n  out[3] = v[1];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns a string representation of a mat2\r\n *\r\n * @param {mat2} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\r\nfunction str(a) {\r\n  return \'mat2(\' + a[0] + \', \' + a[1] + \', \' + a[2] + \', \' + a[3] + \')\';\r\n}\r\n\r\n/**\r\n * Returns Frobenius norm of a mat2\r\n *\r\n * @param {mat2} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\r\nfunction frob(a) {\r\n  return Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2));\r\n}\r\n\r\n/**\r\n * Returns L, D and U matrices (Lower triangular, Diagonal and Upper triangular) by factorizing the input matrix\r\n * @param {mat2} L the lower triangular matrix\r\n * @param {mat2} D the diagonal matrix\r\n * @param {mat2} U the upper triangular matrix\r\n * @param {mat2} a the input matrix to factorize\r\n */\r\n\r\nfunction LDU(L, D, U, a) {\r\n  L[2] = a[2] / a[0];\r\n  U[0] = a[0];\r\n  U[1] = a[1];\r\n  U[3] = a[3] - L[2] * U[1];\r\n  return [L, D, U];\r\n}\r\n\r\n/**\r\n * Adds two mat2\'s\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {mat2} a the first operand\r\n * @param {mat2} b the second operand\r\n * @returns {mat2} out\r\n */\r\nfunction add(out, a, b) {\r\n  out[0] = a[0] + b[0];\r\n  out[1] = a[1] + b[1];\r\n  out[2] = a[2] + b[2];\r\n  out[3] = a[3] + b[3];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {mat2} a the first operand\r\n * @param {mat2} b the second operand\r\n * @returns {mat2} out\r\n */\r\nfunction subtract(out, a, b) {\r\n  out[0] = a[0] - b[0];\r\n  out[1] = a[1] - b[1];\r\n  out[2] = a[2] - b[2];\r\n  out[3] = a[3] - b[3];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {mat2} a The first matrix.\r\n * @param {mat2} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\r\nfunction exactEquals(a, b) {\r\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\r\n}\r\n\r\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {mat2} a The first matrix.\r\n * @param {mat2} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\r\nfunction equals(a, b) {\r\n  var a0 = a[0],\r\n      a1 = a[1],\r\n      a2 = a[2],\r\n      a3 = a[3];\r\n  var b0 = b[0],\r\n      b1 = b[1],\r\n      b2 = b[2],\r\n      b3 = b[3];\r\n  return Math.abs(a0 - b0) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a3), Math.abs(b3));\r\n}\r\n\r\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {mat2} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix\'s elements by\r\n * @returns {mat2} out\r\n */\r\nfunction multiplyScalar(out, a, b) {\r\n  out[0] = a[0] * b;\r\n  out[1] = a[1] * b;\r\n  out[2] = a[2] * b;\r\n  out[3] = a[3] * b;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Adds two mat2\'s after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat2} out the receiving vector\r\n * @param {mat2} a the first operand\r\n * @param {mat2} b the second operand\r\n * @param {Number} scale the amount to scale b\'s elements by before adding\r\n * @returns {mat2} out\r\n */\r\nfunction multiplyScalarAndAdd(out, a, b, scale) {\r\n  out[0] = a[0] + b[0] * scale;\r\n  out[1] = a[1] + b[1] * scale;\r\n  out[2] = a[2] + b[2] * scale;\r\n  out[3] = a[3] + b[3] * scale;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Alias for {@link mat2.multiply}\r\n * @function\r\n */\r\nvar mul = multiply;\r\n\r\n/**\r\n * Alias for {@link mat2.subtract}\r\n * @function\r\n */\r\nvar sub = subtract;\n\n/***/ }),\n\n/***/ "./node_modules/gl-matrix/lib/gl-matrix/mat2d.js":\n/*!*******************************************************!*\\\n  !*** ./node_modules/gl-matrix/lib/gl-matrix/mat2d.js ***!\n  \\*******************************************************/\n/*! exports provided: create, clone, copy, identity, fromValues, set, invert, determinant, multiply, rotate, scale, translate, fromRotation, fromScaling, fromTranslation, str, frob, add, subtract, multiplyScalar, multiplyScalarAndAdd, exactEquals, equals, mul, sub */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "create", function() { return create; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "clone", function() { return clone; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "copy", function() { return copy; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "identity", function() { return identity; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fromValues", function() { return fromValues; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "set", function() { return set; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "invert", function() { return invert; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "determinant", function() { return determinant; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "multiply", function() { return multiply; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rotate", function() { return rotate; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scale", function() { return scale; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "translate", function() { return translate; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fromRotation", function() { return fromRotation; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fromScaling", function() { return fromScaling; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fromTranslation", function() { return fromTranslation; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "str", function() { return str; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "frob", function() { return frob; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "add", function() { return add; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "subtract", function() { return subtract; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "multiplyScalar", function() { return multiplyScalar; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "multiplyScalarAndAdd", function() { return multiplyScalarAndAdd; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "exactEquals", function() { return exactEquals; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "equals", function() { return equals; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mul", function() { return mul; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sub", function() { return sub; });\n/* harmony import */ var _common_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./common.js */ "./node_modules/gl-matrix/lib/gl-matrix/common.js");\n\r\n\r\n/**\r\n * 2x3 Matrix\r\n * @module mat2d\r\n *\r\n * @description\r\n * A mat2d contains six elements defined as:\r\n * <pre>\r\n * [a, c, tx,\r\n *  b, d, ty]\r\n * </pre>\r\n * This is a short form for the 3x3 matrix:\r\n * <pre>\r\n * [a, c, tx,\r\n *  b, d, ty,\r\n *  0, 0, 1]\r\n * </pre>\r\n * The last row is ignored so the array is shorter and operations are faster.\r\n */\r\n\r\n/**\r\n * Creates a new identity mat2d\r\n *\r\n * @returns {mat2d} a new 2x3 matrix\r\n */\r\nfunction create() {\r\n  var out = new _common_js__WEBPACK_IMPORTED_MODULE_0__["ARRAY_TYPE"](6);\r\n  if (_common_js__WEBPACK_IMPORTED_MODULE_0__["ARRAY_TYPE"] != Float32Array) {\r\n    out[1] = 0;\r\n    out[2] = 0;\r\n    out[4] = 0;\r\n    out[5] = 0;\r\n  }\r\n  out[0] = 1;\r\n  out[3] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a new mat2d initialized with values from an existing matrix\r\n *\r\n * @param {mat2d} a matrix to clone\r\n * @returns {mat2d} a new 2x3 matrix\r\n */\r\nfunction clone(a) {\r\n  var out = new _common_js__WEBPACK_IMPORTED_MODULE_0__["ARRAY_TYPE"](6);\r\n  out[0] = a[0];\r\n  out[1] = a[1];\r\n  out[2] = a[2];\r\n  out[3] = a[3];\r\n  out[4] = a[4];\r\n  out[5] = a[5];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Copy the values from one mat2d to another\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {mat2d} a the source matrix\r\n * @returns {mat2d} out\r\n */\r\nfunction copy(out, a) {\r\n  out[0] = a[0];\r\n  out[1] = a[1];\r\n  out[2] = a[2];\r\n  out[3] = a[3];\r\n  out[4] = a[4];\r\n  out[5] = a[5];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Set a mat2d to the identity matrix\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @returns {mat2d} out\r\n */\r\nfunction identity(out) {\r\n  out[0] = 1;\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n  out[3] = 1;\r\n  out[4] = 0;\r\n  out[5] = 0;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Create a new mat2d with the given values\r\n *\r\n * @param {Number} a Component A (index 0)\r\n * @param {Number} b Component B (index 1)\r\n * @param {Number} c Component C (index 2)\r\n * @param {Number} d Component D (index 3)\r\n * @param {Number} tx Component TX (index 4)\r\n * @param {Number} ty Component TY (index 5)\r\n * @returns {mat2d} A new mat2d\r\n */\r\nfunction fromValues(a, b, c, d, tx, ty) {\r\n  var out = new _common_js__WEBPACK_IMPORTED_MODULE_0__["ARRAY_TYPE"](6);\r\n  out[0] = a;\r\n  out[1] = b;\r\n  out[2] = c;\r\n  out[3] = d;\r\n  out[4] = tx;\r\n  out[5] = ty;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Set the components of a mat2d to the given values\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {Number} a Component A (index 0)\r\n * @param {Number} b Component B (index 1)\r\n * @param {Number} c Component C (index 2)\r\n * @param {Number} d Component D (index 3)\r\n * @param {Number} tx Component TX (index 4)\r\n * @param {Number} ty Component TY (index 5)\r\n * @returns {mat2d} out\r\n */\r\nfunction set(out, a, b, c, d, tx, ty) {\r\n  out[0] = a;\r\n  out[1] = b;\r\n  out[2] = c;\r\n  out[3] = d;\r\n  out[4] = tx;\r\n  out[5] = ty;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Inverts a mat2d\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {mat2d} a the source matrix\r\n * @returns {mat2d} out\r\n */\r\nfunction invert(out, a) {\r\n  var aa = a[0],\r\n      ab = a[1],\r\n      ac = a[2],\r\n      ad = a[3];\r\n  var atx = a[4],\r\n      aty = a[5];\r\n\r\n  var det = aa * ad - ab * ac;\r\n  if (!det) {\r\n    return null;\r\n  }\r\n  det = 1.0 / det;\r\n\r\n  out[0] = ad * det;\r\n  out[1] = -ab * det;\r\n  out[2] = -ac * det;\r\n  out[3] = aa * det;\r\n  out[4] = (ac * aty - ad * atx) * det;\r\n  out[5] = (ab * atx - aa * aty) * det;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the determinant of a mat2d\r\n *\r\n * @param {mat2d} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\r\nfunction determinant(a) {\r\n  return a[0] * a[3] - a[1] * a[2];\r\n}\r\n\r\n/**\r\n * Multiplies two mat2d\'s\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {mat2d} a the first operand\r\n * @param {mat2d} b the second operand\r\n * @returns {mat2d} out\r\n */\r\nfunction multiply(out, a, b) {\r\n  var a0 = a[0],\r\n      a1 = a[1],\r\n      a2 = a[2],\r\n      a3 = a[3],\r\n      a4 = a[4],\r\n      a5 = a[5];\r\n  var b0 = b[0],\r\n      b1 = b[1],\r\n      b2 = b[2],\r\n      b3 = b[3],\r\n      b4 = b[4],\r\n      b5 = b[5];\r\n  out[0] = a0 * b0 + a2 * b1;\r\n  out[1] = a1 * b0 + a3 * b1;\r\n  out[2] = a0 * b2 + a2 * b3;\r\n  out[3] = a1 * b2 + a3 * b3;\r\n  out[4] = a0 * b4 + a2 * b5 + a4;\r\n  out[5] = a1 * b4 + a3 * b5 + a5;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotates a mat2d by the given angle\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {mat2d} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat2d} out\r\n */\r\nfunction rotate(out, a, rad) {\r\n  var a0 = a[0],\r\n      a1 = a[1],\r\n      a2 = a[2],\r\n      a3 = a[3],\r\n      a4 = a[4],\r\n      a5 = a[5];\r\n  var s = Math.sin(rad);\r\n  var c = Math.cos(rad);\r\n  out[0] = a0 * c + a2 * s;\r\n  out[1] = a1 * c + a3 * s;\r\n  out[2] = a0 * -s + a2 * c;\r\n  out[3] = a1 * -s + a3 * c;\r\n  out[4] = a4;\r\n  out[5] = a5;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Scales the mat2d by the dimensions in the given vec2\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {mat2d} a the matrix to translate\r\n * @param {vec2} v the vec2 to scale the matrix by\r\n * @returns {mat2d} out\r\n **/\r\nfunction scale(out, a, v) {\r\n  var a0 = a[0],\r\n      a1 = a[1],\r\n      a2 = a[2],\r\n      a3 = a[3],\r\n      a4 = a[4],\r\n      a5 = a[5];\r\n  var v0 = v[0],\r\n      v1 = v[1];\r\n  out[0] = a0 * v0;\r\n  out[1] = a1 * v0;\r\n  out[2] = a2 * v1;\r\n  out[3] = a3 * v1;\r\n  out[4] = a4;\r\n  out[5] = a5;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Translates the mat2d by the dimensions in the given vec2\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {mat2d} a the matrix to translate\r\n * @param {vec2} v the vec2 to translate the matrix by\r\n * @returns {mat2d} out\r\n **/\r\nfunction translate(out, a, v) {\r\n  var a0 = a[0],\r\n      a1 = a[1],\r\n      a2 = a[2],\r\n      a3 = a[3],\r\n      a4 = a[4],\r\n      a5 = a[5];\r\n  var v0 = v[0],\r\n      v1 = v[1];\r\n  out[0] = a0;\r\n  out[1] = a1;\r\n  out[2] = a2;\r\n  out[3] = a3;\r\n  out[4] = a0 * v0 + a2 * v1 + a4;\r\n  out[5] = a1 * v0 + a3 * v1 + a5;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a given angle\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat2d.identity(dest);\r\n *     mat2d.rotate(dest, dest, rad);\r\n *\r\n * @param {mat2d} out mat2d receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat2d} out\r\n */\r\nfunction fromRotation(out, rad) {\r\n  var s = Math.sin(rad),\r\n      c = Math.cos(rad);\r\n  out[0] = c;\r\n  out[1] = s;\r\n  out[2] = -s;\r\n  out[3] = c;\r\n  out[4] = 0;\r\n  out[5] = 0;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat2d.identity(dest);\r\n *     mat2d.scale(dest, dest, vec);\r\n *\r\n * @param {mat2d} out mat2d receiving operation result\r\n * @param {vec2} v Scaling vector\r\n * @returns {mat2d} out\r\n */\r\nfunction fromScaling(out, v) {\r\n  out[0] = v[0];\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n  out[3] = v[1];\r\n  out[4] = 0;\r\n  out[5] = 0;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat2d.identity(dest);\r\n *     mat2d.translate(dest, dest, vec);\r\n *\r\n * @param {mat2d} out mat2d receiving operation result\r\n * @param {vec2} v Translation vector\r\n * @returns {mat2d} out\r\n */\r\nfunction fromTranslation(out, v) {\r\n  out[0] = 1;\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n  out[3] = 1;\r\n  out[4] = v[0];\r\n  out[5] = v[1];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns a string representation of a mat2d\r\n *\r\n * @param {mat2d} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\r\nfunction str(a) {\r\n  return \'mat2d(\' + a[0] + \', \' + a[1] + \', \' + a[2] + \', \' + a[3] + \', \' + a[4] + \', \' + a[5] + \')\';\r\n}\r\n\r\n/**\r\n * Returns Frobenius norm of a mat2d\r\n *\r\n * @param {mat2d} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\r\nfunction frob(a) {\r\n  return Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + 1);\r\n}\r\n\r\n/**\r\n * Adds two mat2d\'s\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {mat2d} a the first operand\r\n * @param {mat2d} b the second operand\r\n * @returns {mat2d} out\r\n */\r\nfunction add(out, a, b) {\r\n  out[0] = a[0] + b[0];\r\n  out[1] = a[1] + b[1];\r\n  out[2] = a[2] + b[2];\r\n  out[3] = a[3] + b[3];\r\n  out[4] = a[4] + b[4];\r\n  out[5] = a[5] + b[5];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {mat2d} a the first operand\r\n * @param {mat2d} b the second operand\r\n * @returns {mat2d} out\r\n */\r\nfunction subtract(out, a, b) {\r\n  out[0] = a[0] - b[0];\r\n  out[1] = a[1] - b[1];\r\n  out[2] = a[2] - b[2];\r\n  out[3] = a[3] - b[3];\r\n  out[4] = a[4] - b[4];\r\n  out[5] = a[5] - b[5];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {mat2d} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix\'s elements by\r\n * @returns {mat2d} out\r\n */\r\nfunction multiplyScalar(out, a, b) {\r\n  out[0] = a[0] * b;\r\n  out[1] = a[1] * b;\r\n  out[2] = a[2] * b;\r\n  out[3] = a[3] * b;\r\n  out[4] = a[4] * b;\r\n  out[5] = a[5] * b;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Adds two mat2d\'s after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat2d} out the receiving vector\r\n * @param {mat2d} a the first operand\r\n * @param {mat2d} b the second operand\r\n * @param {Number} scale the amount to scale b\'s elements by before adding\r\n * @returns {mat2d} out\r\n */\r\nfunction multiplyScalarAndAdd(out, a, b, scale) {\r\n  out[0] = a[0] + b[0] * scale;\r\n  out[1] = a[1] + b[1] * scale;\r\n  out[2] = a[2] + b[2] * scale;\r\n  out[3] = a[3] + b[3] * scale;\r\n  out[4] = a[4] + b[4] * scale;\r\n  out[5] = a[5] + b[5] * scale;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {mat2d} a The first matrix.\r\n * @param {mat2d} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\r\nfunction exactEquals(a, b) {\r\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5];\r\n}\r\n\r\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {mat2d} a The first matrix.\r\n * @param {mat2d} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\r\nfunction equals(a, b) {\r\n  var a0 = a[0],\r\n      a1 = a[1],\r\n      a2 = a[2],\r\n      a3 = a[3],\r\n      a4 = a[4],\r\n      a5 = a[5];\r\n  var b0 = b[0],\r\n      b1 = b[1],\r\n      b2 = b[2],\r\n      b3 = b[3],\r\n      b4 = b[4],\r\n      b5 = b[5];\r\n  return Math.abs(a0 - b0) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a5), Math.abs(b5));\r\n}\r\n\r\n/**\r\n * Alias for {@link mat2d.multiply}\r\n * @function\r\n */\r\nvar mul = multiply;\r\n\r\n/**\r\n * Alias for {@link mat2d.subtract}\r\n * @function\r\n */\r\nvar sub = subtract;\n\n/***/ }),\n\n/***/ "./node_modules/gl-matrix/lib/gl-matrix/mat3.js":\n/*!******************************************************!*\\\n  !*** ./node_modules/gl-matrix/lib/gl-matrix/mat3.js ***!\n  \\******************************************************/\n/*! exports provided: create, fromMat4, clone, copy, fromValues, set, identity, transpose, invert, adjoint, determinant, multiply, translate, rotate, scale, fromTranslation, fromRotation, fromScaling, fromMat2d, fromQuat, normalFromMat4, projection, str, frob, add, subtract, multiplyScalar, multiplyScalarAndAdd, exactEquals, equals, mul, sub */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "create", function() { return create; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fromMat4", function() { return fromMat4; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "clone", function() { return clone; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "copy", function() { return copy; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fromValues", function() { return fromValues; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "set", function() { return set; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "identity", function() { return identity; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "transpose", function() { return transpose; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "invert", function() { return invert; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "adjoint", function() { return adjoint; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "determinant", function() { return determinant; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "multiply", function() { return multiply; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "translate", function() { return translate; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rotate", function() { return rotate; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scale", function() { return scale; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fromTranslation", function() { return fromTranslation; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fromRotation", function() { return fromRotation; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fromScaling", function() { return fromScaling; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fromMat2d", function() { return fromMat2d; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fromQuat", function() { return fromQuat; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "normalFromMat4", function() { return normalFromMat4; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "projection", function() { return projection; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "str", function() { return str; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "frob", function() { return frob; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "add", function() { return add; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "subtract", function() { return subtract; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "multiplyScalar", function() { return multiplyScalar; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "multiplyScalarAndAdd", function() { return multiplyScalarAndAdd; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "exactEquals", function() { return exactEquals; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "equals", function() { return equals; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mul", function() { return mul; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sub", function() { return sub; });\n/* harmony import */ var _common_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./common.js */ "./node_modules/gl-matrix/lib/gl-matrix/common.js");\n\r\n\r\n/**\r\n * 3x3 Matrix\r\n * @module mat3\r\n */\r\n\r\n/**\r\n * Creates a new identity mat3\r\n *\r\n * @returns {mat3} a new 3x3 matrix\r\n */\r\nfunction create() {\r\n  var out = new _common_js__WEBPACK_IMPORTED_MODULE_0__["ARRAY_TYPE"](9);\r\n  if (_common_js__WEBPACK_IMPORTED_MODULE_0__["ARRAY_TYPE"] != Float32Array) {\r\n    out[1] = 0;\r\n    out[2] = 0;\r\n    out[3] = 0;\r\n    out[5] = 0;\r\n    out[6] = 0;\r\n    out[7] = 0;\r\n  }\r\n  out[0] = 1;\r\n  out[4] = 1;\r\n  out[8] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Copies the upper-left 3x3 values into the given mat3.\r\n *\r\n * @param {mat3} out the receiving 3x3 matrix\r\n * @param {mat4} a   the source 4x4 matrix\r\n * @returns {mat3} out\r\n */\r\nfunction fromMat4(out, a) {\r\n  out[0] = a[0];\r\n  out[1] = a[1];\r\n  out[2] = a[2];\r\n  out[3] = a[4];\r\n  out[4] = a[5];\r\n  out[5] = a[6];\r\n  out[6] = a[8];\r\n  out[7] = a[9];\r\n  out[8] = a[10];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a new mat3 initialized with values from an existing matrix\r\n *\r\n * @param {mat3} a matrix to clone\r\n * @returns {mat3} a new 3x3 matrix\r\n */\r\nfunction clone(a) {\r\n  var out = new _common_js__WEBPACK_IMPORTED_MODULE_0__["ARRAY_TYPE"](9);\r\n  out[0] = a[0];\r\n  out[1] = a[1];\r\n  out[2] = a[2];\r\n  out[3] = a[3];\r\n  out[4] = a[4];\r\n  out[5] = a[5];\r\n  out[6] = a[6];\r\n  out[7] = a[7];\r\n  out[8] = a[8];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Copy the values from one mat3 to another\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the source matrix\r\n * @returns {mat3} out\r\n */\r\nfunction copy(out, a) {\r\n  out[0] = a[0];\r\n  out[1] = a[1];\r\n  out[2] = a[2];\r\n  out[3] = a[3];\r\n  out[4] = a[4];\r\n  out[5] = a[5];\r\n  out[6] = a[6];\r\n  out[7] = a[7];\r\n  out[8] = a[8];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Create a new mat3 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\r\n * @returns {mat3} A new mat3\r\n */\r\nfunction fromValues(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\r\n  var out = new _common_js__WEBPACK_IMPORTED_MODULE_0__["ARRAY_TYPE"](9);\r\n  out[0] = m00;\r\n  out[1] = m01;\r\n  out[2] = m02;\r\n  out[3] = m10;\r\n  out[4] = m11;\r\n  out[5] = m12;\r\n  out[6] = m20;\r\n  out[7] = m21;\r\n  out[8] = m22;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Set the components of a mat3 to the given values\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\r\n * @returns {mat3} out\r\n */\r\nfunction set(out, m00, m01, m02, m10, m11, m12, m20, m21, m22) {\r\n  out[0] = m00;\r\n  out[1] = m01;\r\n  out[2] = m02;\r\n  out[3] = m10;\r\n  out[4] = m11;\r\n  out[5] = m12;\r\n  out[6] = m20;\r\n  out[7] = m21;\r\n  out[8] = m22;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Set a mat3 to the identity matrix\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @returns {mat3} out\r\n */\r\nfunction identity(out) {\r\n  out[0] = 1;\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n  out[3] = 0;\r\n  out[4] = 1;\r\n  out[5] = 0;\r\n  out[6] = 0;\r\n  out[7] = 0;\r\n  out[8] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Transpose the values of a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the source matrix\r\n * @returns {mat3} out\r\n */\r\nfunction transpose(out, a) {\r\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\r\n  if (out === a) {\r\n    var a01 = a[1],\r\n        a02 = a[2],\r\n        a12 = a[5];\r\n    out[1] = a[3];\r\n    out[2] = a[6];\r\n    out[3] = a01;\r\n    out[5] = a[7];\r\n    out[6] = a02;\r\n    out[7] = a12;\r\n  } else {\r\n    out[0] = a[0];\r\n    out[1] = a[3];\r\n    out[2] = a[6];\r\n    out[3] = a[1];\r\n    out[4] = a[4];\r\n    out[5] = a[7];\r\n    out[6] = a[2];\r\n    out[7] = a[5];\r\n    out[8] = a[8];\r\n  }\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Inverts a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the source matrix\r\n * @returns {mat3} out\r\n */\r\nfunction invert(out, a) {\r\n  var a00 = a[0],\r\n      a01 = a[1],\r\n      a02 = a[2];\r\n  var a10 = a[3],\r\n      a11 = a[4],\r\n      a12 = a[5];\r\n  var a20 = a[6],\r\n      a21 = a[7],\r\n      a22 = a[8];\r\n\r\n  var b01 = a22 * a11 - a12 * a21;\r\n  var b11 = -a22 * a10 + a12 * a20;\r\n  var b21 = a21 * a10 - a11 * a20;\r\n\r\n  // Calculate the determinant\r\n  var det = a00 * b01 + a01 * b11 + a02 * b21;\r\n\r\n  if (!det) {\r\n    return null;\r\n  }\r\n  det = 1.0 / det;\r\n\r\n  out[0] = b01 * det;\r\n  out[1] = (-a22 * a01 + a02 * a21) * det;\r\n  out[2] = (a12 * a01 - a02 * a11) * det;\r\n  out[3] = b11 * det;\r\n  out[4] = (a22 * a00 - a02 * a20) * det;\r\n  out[5] = (-a12 * a00 + a02 * a10) * det;\r\n  out[6] = b21 * det;\r\n  out[7] = (-a21 * a00 + a01 * a20) * det;\r\n  out[8] = (a11 * a00 - a01 * a10) * det;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the adjugate of a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the source matrix\r\n * @returns {mat3} out\r\n */\r\nfunction adjoint(out, a) {\r\n  var a00 = a[0],\r\n      a01 = a[1],\r\n      a02 = a[2];\r\n  var a10 = a[3],\r\n      a11 = a[4],\r\n      a12 = a[5];\r\n  var a20 = a[6],\r\n      a21 = a[7],\r\n      a22 = a[8];\r\n\r\n  out[0] = a11 * a22 - a12 * a21;\r\n  out[1] = a02 * a21 - a01 * a22;\r\n  out[2] = a01 * a12 - a02 * a11;\r\n  out[3] = a12 * a20 - a10 * a22;\r\n  out[4] = a00 * a22 - a02 * a20;\r\n  out[5] = a02 * a10 - a00 * a12;\r\n  out[6] = a10 * a21 - a11 * a20;\r\n  out[7] = a01 * a20 - a00 * a21;\r\n  out[8] = a00 * a11 - a01 * a10;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the determinant of a mat3\r\n *\r\n * @param {mat3} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\r\nfunction determinant(a) {\r\n  var a00 = a[0],\r\n      a01 = a[1],\r\n      a02 = a[2];\r\n  var a10 = a[3],\r\n      a11 = a[4],\r\n      a12 = a[5];\r\n  var a20 = a[6],\r\n      a21 = a[7],\r\n      a22 = a[8];\r\n\r\n  return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\r\n}\r\n\r\n/**\r\n * Multiplies two mat3\'s\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the first operand\r\n * @param {mat3} b the second operand\r\n * @returns {mat3} out\r\n */\r\nfunction multiply(out, a, b) {\r\n  var a00 = a[0],\r\n      a01 = a[1],\r\n      a02 = a[2];\r\n  var a10 = a[3],\r\n      a11 = a[4],\r\n      a12 = a[5];\r\n  var a20 = a[6],\r\n      a21 = a[7],\r\n      a22 = a[8];\r\n\r\n  var b00 = b[0],\r\n      b01 = b[1],\r\n      b02 = b[2];\r\n  var b10 = b[3],\r\n      b11 = b[4],\r\n      b12 = b[5];\r\n  var b20 = b[6],\r\n      b21 = b[7],\r\n      b22 = b[8];\r\n\r\n  out[0] = b00 * a00 + b01 * a10 + b02 * a20;\r\n  out[1] = b00 * a01 + b01 * a11 + b02 * a21;\r\n  out[2] = b00 * a02 + b01 * a12 + b02 * a22;\r\n\r\n  out[3] = b10 * a00 + b11 * a10 + b12 * a20;\r\n  out[4] = b10 * a01 + b11 * a11 + b12 * a21;\r\n  out[5] = b10 * a02 + b11 * a12 + b12 * a22;\r\n\r\n  out[6] = b20 * a00 + b21 * a10 + b22 * a20;\r\n  out[7] = b20 * a01 + b21 * a11 + b22 * a21;\r\n  out[8] = b20 * a02 + b21 * a12 + b22 * a22;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Translate a mat3 by the given vector\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the matrix to translate\r\n * @param {vec2} v vector to translate by\r\n * @returns {mat3} out\r\n */\r\nfunction translate(out, a, v) {\r\n  var a00 = a[0],\r\n      a01 = a[1],\r\n      a02 = a[2],\r\n      a10 = a[3],\r\n      a11 = a[4],\r\n      a12 = a[5],\r\n      a20 = a[6],\r\n      a21 = a[7],\r\n      a22 = a[8],\r\n      x = v[0],\r\n      y = v[1];\r\n\r\n  out[0] = a00;\r\n  out[1] = a01;\r\n  out[2] = a02;\r\n\r\n  out[3] = a10;\r\n  out[4] = a11;\r\n  out[5] = a12;\r\n\r\n  out[6] = x * a00 + y * a10 + a20;\r\n  out[7] = x * a01 + y * a11 + a21;\r\n  out[8] = x * a02 + y * a12 + a22;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotates a mat3 by the given angle\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat3} out\r\n */\r\nfunction rotate(out, a, rad) {\r\n  var a00 = a[0],\r\n      a01 = a[1],\r\n      a02 = a[2],\r\n      a10 = a[3],\r\n      a11 = a[4],\r\n      a12 = a[5],\r\n      a20 = a[6],\r\n      a21 = a[7],\r\n      a22 = a[8],\r\n      s = Math.sin(rad),\r\n      c = Math.cos(rad);\r\n\r\n  out[0] = c * a00 + s * a10;\r\n  out[1] = c * a01 + s * a11;\r\n  out[2] = c * a02 + s * a12;\r\n\r\n  out[3] = c * a10 - s * a00;\r\n  out[4] = c * a11 - s * a01;\r\n  out[5] = c * a12 - s * a02;\r\n\r\n  out[6] = a20;\r\n  out[7] = a21;\r\n  out[8] = a22;\r\n  return out;\r\n};\r\n\r\n/**\r\n * Scales the mat3 by the dimensions in the given vec2\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the matrix to rotate\r\n * @param {vec2} v the vec2 to scale the matrix by\r\n * @returns {mat3} out\r\n **/\r\nfunction scale(out, a, v) {\r\n  var x = v[0],\r\n      y = v[1];\r\n\r\n  out[0] = x * a[0];\r\n  out[1] = x * a[1];\r\n  out[2] = x * a[2];\r\n\r\n  out[3] = y * a[3];\r\n  out[4] = y * a[4];\r\n  out[5] = y * a[5];\r\n\r\n  out[6] = a[6];\r\n  out[7] = a[7];\r\n  out[8] = a[8];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.translate(dest, dest, vec);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {vec2} v Translation vector\r\n * @returns {mat3} out\r\n */\r\nfunction fromTranslation(out, v) {\r\n  out[0] = 1;\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n  out[3] = 0;\r\n  out[4] = 1;\r\n  out[5] = 0;\r\n  out[6] = v[0];\r\n  out[7] = v[1];\r\n  out[8] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a given angle\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.rotate(dest, dest, rad);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat3} out\r\n */\r\nfunction fromRotation(out, rad) {\r\n  var s = Math.sin(rad),\r\n      c = Math.cos(rad);\r\n\r\n  out[0] = c;\r\n  out[1] = s;\r\n  out[2] = 0;\r\n\r\n  out[3] = -s;\r\n  out[4] = c;\r\n  out[5] = 0;\r\n\r\n  out[6] = 0;\r\n  out[7] = 0;\r\n  out[8] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.scale(dest, dest, vec);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {vec2} v Scaling vector\r\n * @returns {mat3} out\r\n */\r\nfunction fromScaling(out, v) {\r\n  out[0] = v[0];\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n\r\n  out[3] = 0;\r\n  out[4] = v[1];\r\n  out[5] = 0;\r\n\r\n  out[6] = 0;\r\n  out[7] = 0;\r\n  out[8] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Copies the values from a mat2d into a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat2d} a the matrix to copy\r\n * @returns {mat3} out\r\n **/\r\nfunction fromMat2d(out, a) {\r\n  out[0] = a[0];\r\n  out[1] = a[1];\r\n  out[2] = 0;\r\n\r\n  out[3] = a[2];\r\n  out[4] = a[3];\r\n  out[5] = 0;\r\n\r\n  out[6] = a[4];\r\n  out[7] = a[5];\r\n  out[8] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n* Calculates a 3x3 matrix from the given quaternion\r\n*\r\n* @param {mat3} out mat3 receiving operation result\r\n* @param {quat} q Quaternion to create matrix from\r\n*\r\n* @returns {mat3} out\r\n*/\r\nfunction fromQuat(out, q) {\r\n  var x = q[0],\r\n      y = q[1],\r\n      z = q[2],\r\n      w = q[3];\r\n  var x2 = x + x;\r\n  var y2 = y + y;\r\n  var z2 = z + z;\r\n\r\n  var xx = x * x2;\r\n  var yx = y * x2;\r\n  var yy = y * y2;\r\n  var zx = z * x2;\r\n  var zy = z * y2;\r\n  var zz = z * z2;\r\n  var wx = w * x2;\r\n  var wy = w * y2;\r\n  var wz = w * z2;\r\n\r\n  out[0] = 1 - yy - zz;\r\n  out[3] = yx - wz;\r\n  out[6] = zx + wy;\r\n\r\n  out[1] = yx + wz;\r\n  out[4] = 1 - xx - zz;\r\n  out[7] = zy - wx;\r\n\r\n  out[2] = zx - wy;\r\n  out[5] = zy + wx;\r\n  out[8] = 1 - xx - yy;\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n* Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\r\n*\r\n* @param {mat3} out mat3 receiving operation result\r\n* @param {mat4} a Mat4 to derive the normal matrix from\r\n*\r\n* @returns {mat3} out\r\n*/\r\nfunction normalFromMat4(out, a) {\r\n  var a00 = a[0],\r\n      a01 = a[1],\r\n      a02 = a[2],\r\n      a03 = a[3];\r\n  var a10 = a[4],\r\n      a11 = a[5],\r\n      a12 = a[6],\r\n      a13 = a[7];\r\n  var a20 = a[8],\r\n      a21 = a[9],\r\n      a22 = a[10],\r\n      a23 = a[11];\r\n  var a30 = a[12],\r\n      a31 = a[13],\r\n      a32 = a[14],\r\n      a33 = a[15];\r\n\r\n  var b00 = a00 * a11 - a01 * a10;\r\n  var b01 = a00 * a12 - a02 * a10;\r\n  var b02 = a00 * a13 - a03 * a10;\r\n  var b03 = a01 * a12 - a02 * a11;\r\n  var b04 = a01 * a13 - a03 * a11;\r\n  var b05 = a02 * a13 - a03 * a12;\r\n  var b06 = a20 * a31 - a21 * a30;\r\n  var b07 = a20 * a32 - a22 * a30;\r\n  var b08 = a20 * a33 - a23 * a30;\r\n  var b09 = a21 * a32 - a22 * a31;\r\n  var b10 = a21 * a33 - a23 * a31;\r\n  var b11 = a22 * a33 - a23 * a32;\r\n\r\n  // Calculate the determinant\r\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\r\n\r\n  if (!det) {\r\n    return null;\r\n  }\r\n  det = 1.0 / det;\r\n\r\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\r\n  out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\r\n  out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\r\n\r\n  out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\r\n  out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\r\n  out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\r\n\r\n  out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\r\n  out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\r\n  out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Generates a 2D projection matrix with the given bounds\r\n *\r\n * @param {mat3} out mat3 frustum matrix will be written into\r\n * @param {number} width Width of your gl context\r\n * @param {number} height Height of gl context\r\n * @returns {mat3} out\r\n */\r\nfunction projection(out, width, height) {\r\n  out[0] = 2 / width;\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n  out[3] = 0;\r\n  out[4] = -2 / height;\r\n  out[5] = 0;\r\n  out[6] = -1;\r\n  out[7] = 1;\r\n  out[8] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns a string representation of a mat3\r\n *\r\n * @param {mat3} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\r\nfunction str(a) {\r\n  return \'mat3(\' + a[0] + \', \' + a[1] + \', \' + a[2] + \', \' + a[3] + \', \' + a[4] + \', \' + a[5] + \', \' + a[6] + \', \' + a[7] + \', \' + a[8] + \')\';\r\n}\r\n\r\n/**\r\n * Returns Frobenius norm of a mat3\r\n *\r\n * @param {mat3} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\r\nfunction frob(a) {\r\n  return Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + Math.pow(a[6], 2) + Math.pow(a[7], 2) + Math.pow(a[8], 2));\r\n}\r\n\r\n/**\r\n * Adds two mat3\'s\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the first operand\r\n * @param {mat3} b the second operand\r\n * @returns {mat3} out\r\n */\r\nfunction add(out, a, b) {\r\n  out[0] = a[0] + b[0];\r\n  out[1] = a[1] + b[1];\r\n  out[2] = a[2] + b[2];\r\n  out[3] = a[3] + b[3];\r\n  out[4] = a[4] + b[4];\r\n  out[5] = a[5] + b[5];\r\n  out[6] = a[6] + b[6];\r\n  out[7] = a[7] + b[7];\r\n  out[8] = a[8] + b[8];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the first operand\r\n * @param {mat3} b the second operand\r\n * @returns {mat3} out\r\n */\r\nfunction subtract(out, a, b) {\r\n  out[0] = a[0] - b[0];\r\n  out[1] = a[1] - b[1];\r\n  out[2] = a[2] - b[2];\r\n  out[3] = a[3] - b[3];\r\n  out[4] = a[4] - b[4];\r\n  out[5] = a[5] - b[5];\r\n  out[6] = a[6] - b[6];\r\n  out[7] = a[7] - b[7];\r\n  out[8] = a[8] - b[8];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix\'s elements by\r\n * @returns {mat3} out\r\n */\r\nfunction multiplyScalar(out, a, b) {\r\n  out[0] = a[0] * b;\r\n  out[1] = a[1] * b;\r\n  out[2] = a[2] * b;\r\n  out[3] = a[3] * b;\r\n  out[4] = a[4] * b;\r\n  out[5] = a[5] * b;\r\n  out[6] = a[6] * b;\r\n  out[7] = a[7] * b;\r\n  out[8] = a[8] * b;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Adds two mat3\'s after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat3} out the receiving vector\r\n * @param {mat3} a the first operand\r\n * @param {mat3} b the second operand\r\n * @param {Number} scale the amount to scale b\'s elements by before adding\r\n * @returns {mat3} out\r\n */\r\nfunction multiplyScalarAndAdd(out, a, b, scale) {\r\n  out[0] = a[0] + b[0] * scale;\r\n  out[1] = a[1] + b[1] * scale;\r\n  out[2] = a[2] + b[2] * scale;\r\n  out[3] = a[3] + b[3] * scale;\r\n  out[4] = a[4] + b[4] * scale;\r\n  out[5] = a[5] + b[5] * scale;\r\n  out[6] = a[6] + b[6] * scale;\r\n  out[7] = a[7] + b[7] * scale;\r\n  out[8] = a[8] + b[8] * scale;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {mat3} a The first matrix.\r\n * @param {mat3} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\r\nfunction exactEquals(a, b) {\r\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8];\r\n}\r\n\r\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {mat3} a The first matrix.\r\n * @param {mat3} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\r\nfunction equals(a, b) {\r\n  var a0 = a[0],\r\n      a1 = a[1],\r\n      a2 = a[2],\r\n      a3 = a[3],\r\n      a4 = a[4],\r\n      a5 = a[5],\r\n      a6 = a[6],\r\n      a7 = a[7],\r\n      a8 = a[8];\r\n  var b0 = b[0],\r\n      b1 = b[1],\r\n      b2 = b[2],\r\n      b3 = b[3],\r\n      b4 = b[4],\r\n      b5 = b[5],\r\n      b6 = b[6],\r\n      b7 = b[7],\r\n      b8 = b[8];\r\n  return Math.abs(a0 - b0) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a8), Math.abs(b8));\r\n}\r\n\r\n/**\r\n * Alias for {@link mat3.multiply}\r\n * @function\r\n */\r\nvar mul = multiply;\r\n\r\n/**\r\n * Alias for {@link mat3.subtract}\r\n * @function\r\n */\r\nvar sub = subtract;\n\n/***/ }),\n\n/***/ "./node_modules/gl-matrix/lib/gl-matrix/mat4.js":\n/*!******************************************************!*\\\n  !*** ./node_modules/gl-matrix/lib/gl-matrix/mat4.js ***!\n  \\******************************************************/\n/*! exports provided: create, clone, copy, fromValues, set, identity, transpose, invert, adjoint, determinant, multiply, translate, scale, rotate, rotateX, rotateY, rotateZ, fromTranslation, fromScaling, fromRotation, fromXRotation, fromYRotation, fromZRotation, fromRotationTranslation, fromQuat2, getTranslation, getScaling, getRotation, fromRotationTranslationScale, fromRotationTranslationScaleOrigin, fromQuat, frustum, perspective, perspectiveFromFieldOfView, ortho, lookAt, targetTo, str, frob, add, subtract, multiplyScalar, multiplyScalarAndAdd, exactEquals, equals, mul, sub */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "create", function() { return create; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "clone", function() { return clone; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "copy", function() { return copy; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fromValues", function() { return fromValues; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "set", function() { return set; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "identity", function() { return identity; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "transpose", function() { return transpose; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "invert", function() { return invert; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "adjoint", function() { return adjoint; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "determinant", function() { return determinant; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "multiply", function() { return multiply; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "translate", function() { return translate; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scale", function() { return scale; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rotate", function() { return rotate; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rotateX", function() { return rotateX; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rotateY", function() { return rotateY; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rotateZ", function() { return rotateZ; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fromTranslation", function() { return fromTranslation; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fromScaling", function() { return fromScaling; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fromRotation", function() { return fromRotation; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fromXRotation", function() { return fromXRotation; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fromYRotation", function() { return fromYRotation; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fromZRotation", function() { return fromZRotation; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fromRotationTranslation", function() { return fromRotationTranslation; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fromQuat2", function() { return fromQuat2; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getTranslation", function() { return getTranslation; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getScaling", function() { return getScaling; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getRotation", function() { return getRotation; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fromRotationTranslationScale", function() { return fromRotationTranslationScale; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fromRotationTranslationScaleOrigin", function() { return fromRotationTranslationScaleOrigin; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fromQuat", function() { return fromQuat; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "frustum", function() { return frustum; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "perspective", function() { return perspective; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "perspectiveFromFieldOfView", function() { return perspectiveFromFieldOfView; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ortho", function() { return ortho; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "lookAt", function() { return lookAt; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "targetTo", function() { return targetTo; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "str", function() { return str; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "frob", function() { return frob; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "add", function() { return add; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "subtract", function() { return subtract; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "multiplyScalar", function() { return multiplyScalar; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "multiplyScalarAndAdd", function() { return multiplyScalarAndAdd; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "exactEquals", function() { return exactEquals; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "equals", function() { return equals; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mul", function() { return mul; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sub", function() { return sub; });\n/* harmony import */ var _common_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./common.js */ "./node_modules/gl-matrix/lib/gl-matrix/common.js");\n\r\n\r\n/**\r\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\r\n * @module mat4\r\n */\r\n\r\n/**\r\n * Creates a new identity mat4\r\n *\r\n * @returns {mat4} a new 4x4 matrix\r\n */\r\nfunction create() {\r\n  var out = new _common_js__WEBPACK_IMPORTED_MODULE_0__["ARRAY_TYPE"](16);\r\n  if (_common_js__WEBPACK_IMPORTED_MODULE_0__["ARRAY_TYPE"] != Float32Array) {\r\n    out[1] = 0;\r\n    out[2] = 0;\r\n    out[3] = 0;\r\n    out[4] = 0;\r\n    out[6] = 0;\r\n    out[7] = 0;\r\n    out[8] = 0;\r\n    out[9] = 0;\r\n    out[11] = 0;\r\n    out[12] = 0;\r\n    out[13] = 0;\r\n    out[14] = 0;\r\n  }\r\n  out[0] = 1;\r\n  out[5] = 1;\r\n  out[10] = 1;\r\n  out[15] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a new mat4 initialized with values from an existing matrix\r\n *\r\n * @param {mat4} a matrix to clone\r\n * @returns {mat4} a new 4x4 matrix\r\n */\r\nfunction clone(a) {\r\n  var out = new _common_js__WEBPACK_IMPORTED_MODULE_0__["ARRAY_TYPE"](16);\r\n  out[0] = a[0];\r\n  out[1] = a[1];\r\n  out[2] = a[2];\r\n  out[3] = a[3];\r\n  out[4] = a[4];\r\n  out[5] = a[5];\r\n  out[6] = a[6];\r\n  out[7] = a[7];\r\n  out[8] = a[8];\r\n  out[9] = a[9];\r\n  out[10] = a[10];\r\n  out[11] = a[11];\r\n  out[12] = a[12];\r\n  out[13] = a[13];\r\n  out[14] = a[14];\r\n  out[15] = a[15];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Copy the values from one mat4 to another\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\r\nfunction copy(out, a) {\r\n  out[0] = a[0];\r\n  out[1] = a[1];\r\n  out[2] = a[2];\r\n  out[3] = a[3];\r\n  out[4] = a[4];\r\n  out[5] = a[5];\r\n  out[6] = a[6];\r\n  out[7] = a[7];\r\n  out[8] = a[8];\r\n  out[9] = a[9];\r\n  out[10] = a[10];\r\n  out[11] = a[11];\r\n  out[12] = a[12];\r\n  out[13] = a[13];\r\n  out[14] = a[14];\r\n  out[15] = a[15];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Create a new mat4 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} A new mat4\r\n */\r\nfunction fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\r\n  var out = new _common_js__WEBPACK_IMPORTED_MODULE_0__["ARRAY_TYPE"](16);\r\n  out[0] = m00;\r\n  out[1] = m01;\r\n  out[2] = m02;\r\n  out[3] = m03;\r\n  out[4] = m10;\r\n  out[5] = m11;\r\n  out[6] = m12;\r\n  out[7] = m13;\r\n  out[8] = m20;\r\n  out[9] = m21;\r\n  out[10] = m22;\r\n  out[11] = m23;\r\n  out[12] = m30;\r\n  out[13] = m31;\r\n  out[14] = m32;\r\n  out[15] = m33;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Set the components of a mat4 to the given values\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} out\r\n */\r\nfunction set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\r\n  out[0] = m00;\r\n  out[1] = m01;\r\n  out[2] = m02;\r\n  out[3] = m03;\r\n  out[4] = m10;\r\n  out[5] = m11;\r\n  out[6] = m12;\r\n  out[7] = m13;\r\n  out[8] = m20;\r\n  out[9] = m21;\r\n  out[10] = m22;\r\n  out[11] = m23;\r\n  out[12] = m30;\r\n  out[13] = m31;\r\n  out[14] = m32;\r\n  out[15] = m33;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Set a mat4 to the identity matrix\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @returns {mat4} out\r\n */\r\nfunction identity(out) {\r\n  out[0] = 1;\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n  out[3] = 0;\r\n  out[4] = 0;\r\n  out[5] = 1;\r\n  out[6] = 0;\r\n  out[7] = 0;\r\n  out[8] = 0;\r\n  out[9] = 0;\r\n  out[10] = 1;\r\n  out[11] = 0;\r\n  out[12] = 0;\r\n  out[13] = 0;\r\n  out[14] = 0;\r\n  out[15] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Transpose the values of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\r\nfunction transpose(out, a) {\r\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\r\n  if (out === a) {\r\n    var a01 = a[1],\r\n        a02 = a[2],\r\n        a03 = a[3];\r\n    var a12 = a[6],\r\n        a13 = a[7];\r\n    var a23 = a[11];\r\n\r\n    out[1] = a[4];\r\n    out[2] = a[8];\r\n    out[3] = a[12];\r\n    out[4] = a01;\r\n    out[6] = a[9];\r\n    out[7] = a[13];\r\n    out[8] = a02;\r\n    out[9] = a12;\r\n    out[11] = a[14];\r\n    out[12] = a03;\r\n    out[13] = a13;\r\n    out[14] = a23;\r\n  } else {\r\n    out[0] = a[0];\r\n    out[1] = a[4];\r\n    out[2] = a[8];\r\n    out[3] = a[12];\r\n    out[4] = a[1];\r\n    out[5] = a[5];\r\n    out[6] = a[9];\r\n    out[7] = a[13];\r\n    out[8] = a[2];\r\n    out[9] = a[6];\r\n    out[10] = a[10];\r\n    out[11] = a[14];\r\n    out[12] = a[3];\r\n    out[13] = a[7];\r\n    out[14] = a[11];\r\n    out[15] = a[15];\r\n  }\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Inverts a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\r\nfunction invert(out, a) {\r\n  var a00 = a[0],\r\n      a01 = a[1],\r\n      a02 = a[2],\r\n      a03 = a[3];\r\n  var a10 = a[4],\r\n      a11 = a[5],\r\n      a12 = a[6],\r\n      a13 = a[7];\r\n  var a20 = a[8],\r\n      a21 = a[9],\r\n      a22 = a[10],\r\n      a23 = a[11];\r\n  var a30 = a[12],\r\n      a31 = a[13],\r\n      a32 = a[14],\r\n      a33 = a[15];\r\n\r\n  var b00 = a00 * a11 - a01 * a10;\r\n  var b01 = a00 * a12 - a02 * a10;\r\n  var b02 = a00 * a13 - a03 * a10;\r\n  var b03 = a01 * a12 - a02 * a11;\r\n  var b04 = a01 * a13 - a03 * a11;\r\n  var b05 = a02 * a13 - a03 * a12;\r\n  var b06 = a20 * a31 - a21 * a30;\r\n  var b07 = a20 * a32 - a22 * a30;\r\n  var b08 = a20 * a33 - a23 * a30;\r\n  var b09 = a21 * a32 - a22 * a31;\r\n  var b10 = a21 * a33 - a23 * a31;\r\n  var b11 = a22 * a33 - a23 * a32;\r\n\r\n  // Calculate the determinant\r\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\r\n\r\n  if (!det) {\r\n    return null;\r\n  }\r\n  det = 1.0 / det;\r\n\r\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\r\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\r\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\r\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\r\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\r\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\r\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\r\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\r\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\r\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\r\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\r\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\r\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\r\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\r\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\r\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the adjugate of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\r\nfunction adjoint(out, a) {\r\n  var a00 = a[0],\r\n      a01 = a[1],\r\n      a02 = a[2],\r\n      a03 = a[3];\r\n  var a10 = a[4],\r\n      a11 = a[5],\r\n      a12 = a[6],\r\n      a13 = a[7];\r\n  var a20 = a[8],\r\n      a21 = a[9],\r\n      a22 = a[10],\r\n      a23 = a[11];\r\n  var a30 = a[12],\r\n      a31 = a[13],\r\n      a32 = a[14],\r\n      a33 = a[15];\r\n\r\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\r\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\r\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\r\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\r\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\r\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\r\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\r\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\r\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\r\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\r\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\r\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\r\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\r\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\r\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\r\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the determinant of a mat4\r\n *\r\n * @param {mat4} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\r\nfunction determinant(a) {\r\n  var a00 = a[0],\r\n      a01 = a[1],\r\n      a02 = a[2],\r\n      a03 = a[3];\r\n  var a10 = a[4],\r\n      a11 = a[5],\r\n      a12 = a[6],\r\n      a13 = a[7];\r\n  var a20 = a[8],\r\n      a21 = a[9],\r\n      a22 = a[10],\r\n      a23 = a[11];\r\n  var a30 = a[12],\r\n      a31 = a[13],\r\n      a32 = a[14],\r\n      a33 = a[15];\r\n\r\n  var b00 = a00 * a11 - a01 * a10;\r\n  var b01 = a00 * a12 - a02 * a10;\r\n  var b02 = a00 * a13 - a03 * a10;\r\n  var b03 = a01 * a12 - a02 * a11;\r\n  var b04 = a01 * a13 - a03 * a11;\r\n  var b05 = a02 * a13 - a03 * a12;\r\n  var b06 = a20 * a31 - a21 * a30;\r\n  var b07 = a20 * a32 - a22 * a30;\r\n  var b08 = a20 * a33 - a23 * a30;\r\n  var b09 = a21 * a32 - a22 * a31;\r\n  var b10 = a21 * a33 - a23 * a31;\r\n  var b11 = a22 * a33 - a23 * a32;\r\n\r\n  // Calculate the determinant\r\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\r\n}\r\n\r\n/**\r\n * Multiplies two mat4s\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\r\nfunction multiply(out, a, b) {\r\n  var a00 = a[0],\r\n      a01 = a[1],\r\n      a02 = a[2],\r\n      a03 = a[3];\r\n  var a10 = a[4],\r\n      a11 = a[5],\r\n      a12 = a[6],\r\n      a13 = a[7];\r\n  var a20 = a[8],\r\n      a21 = a[9],\r\n      a22 = a[10],\r\n      a23 = a[11];\r\n  var a30 = a[12],\r\n      a31 = a[13],\r\n      a32 = a[14],\r\n      a33 = a[15];\r\n\r\n  // Cache only the current line of the second matrix\r\n  var b0 = b[0],\r\n      b1 = b[1],\r\n      b2 = b[2],\r\n      b3 = b[3];\r\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\r\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\r\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\r\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\r\n\r\n  b0 = b[4];b1 = b[5];b2 = b[6];b3 = b[7];\r\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\r\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\r\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\r\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\r\n\r\n  b0 = b[8];b1 = b[9];b2 = b[10];b3 = b[11];\r\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\r\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\r\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\r\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\r\n\r\n  b0 = b[12];b1 = b[13];b2 = b[14];b3 = b[15];\r\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\r\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\r\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\r\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Translate a mat4 by the given vector\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to translate\r\n * @param {vec3} v vector to translate by\r\n * @returns {mat4} out\r\n */\r\nfunction translate(out, a, v) {\r\n  var x = v[0],\r\n      y = v[1],\r\n      z = v[2];\r\n  var a00 = void 0,\r\n      a01 = void 0,\r\n      a02 = void 0,\r\n      a03 = void 0;\r\n  var a10 = void 0,\r\n      a11 = void 0,\r\n      a12 = void 0,\r\n      a13 = void 0;\r\n  var a20 = void 0,\r\n      a21 = void 0,\r\n      a22 = void 0,\r\n      a23 = void 0;\r\n\r\n  if (a === out) {\r\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\r\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\r\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\r\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\r\n  } else {\r\n    a00 = a[0];a01 = a[1];a02 = a[2];a03 = a[3];\r\n    a10 = a[4];a11 = a[5];a12 = a[6];a13 = a[7];\r\n    a20 = a[8];a21 = a[9];a22 = a[10];a23 = a[11];\r\n\r\n    out[0] = a00;out[1] = a01;out[2] = a02;out[3] = a03;\r\n    out[4] = a10;out[5] = a11;out[6] = a12;out[7] = a13;\r\n    out[8] = a20;out[9] = a21;out[10] = a22;out[11] = a23;\r\n\r\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\r\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\r\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\r\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\r\n  }\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to scale\r\n * @param {vec3} v the vec3 to scale the matrix by\r\n * @returns {mat4} out\r\n **/\r\nfunction scale(out, a, v) {\r\n  var x = v[0],\r\n      y = v[1],\r\n      z = v[2];\r\n\r\n  out[0] = a[0] * x;\r\n  out[1] = a[1] * x;\r\n  out[2] = a[2] * x;\r\n  out[3] = a[3] * x;\r\n  out[4] = a[4] * y;\r\n  out[5] = a[5] * y;\r\n  out[6] = a[6] * y;\r\n  out[7] = a[7] * y;\r\n  out[8] = a[8] * z;\r\n  out[9] = a[9] * z;\r\n  out[10] = a[10] * z;\r\n  out[11] = a[11] * z;\r\n  out[12] = a[12];\r\n  out[13] = a[13];\r\n  out[14] = a[14];\r\n  out[15] = a[15];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotates a mat4 by the given angle around the given axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {vec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\r\nfunction rotate(out, a, rad, axis) {\r\n  var x = axis[0],\r\n      y = axis[1],\r\n      z = axis[2];\r\n  var len = Math.sqrt(x * x + y * y + z * z);\r\n  var s = void 0,\r\n      c = void 0,\r\n      t = void 0;\r\n  var a00 = void 0,\r\n      a01 = void 0,\r\n      a02 = void 0,\r\n      a03 = void 0;\r\n  var a10 = void 0,\r\n      a11 = void 0,\r\n      a12 = void 0,\r\n      a13 = void 0;\r\n  var a20 = void 0,\r\n      a21 = void 0,\r\n      a22 = void 0,\r\n      a23 = void 0;\r\n  var b00 = void 0,\r\n      b01 = void 0,\r\n      b02 = void 0;\r\n  var b10 = void 0,\r\n      b11 = void 0,\r\n      b12 = void 0;\r\n  var b20 = void 0,\r\n      b21 = void 0,\r\n      b22 = void 0;\r\n\r\n  if (len < _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"]) {\r\n    return null;\r\n  }\r\n\r\n  len = 1 / len;\r\n  x *= len;\r\n  y *= len;\r\n  z *= len;\r\n\r\n  s = Math.sin(rad);\r\n  c = Math.cos(rad);\r\n  t = 1 - c;\r\n\r\n  a00 = a[0];a01 = a[1];a02 = a[2];a03 = a[3];\r\n  a10 = a[4];a11 = a[5];a12 = a[6];a13 = a[7];\r\n  a20 = a[8];a21 = a[9];a22 = a[10];a23 = a[11];\r\n\r\n  // Construct the elements of the rotation matrix\r\n  b00 = x * x * t + c;b01 = y * x * t + z * s;b02 = z * x * t - y * s;\r\n  b10 = x * y * t - z * s;b11 = y * y * t + c;b12 = z * y * t + x * s;\r\n  b20 = x * z * t + y * s;b21 = y * z * t - x * s;b22 = z * z * t + c;\r\n\r\n  // Perform rotation-specific matrix multiplication\r\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\r\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\r\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\r\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\r\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\r\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\r\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\r\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\r\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\r\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\r\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\r\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\r\n\r\n  if (a !== out) {\r\n    // If the source and destination differ, copy the unchanged last row\r\n    out[12] = a[12];\r\n    out[13] = a[13];\r\n    out[14] = a[14];\r\n    out[15] = a[15];\r\n  }\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotates a matrix by the given angle around the X axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\r\nfunction rotateX(out, a, rad) {\r\n  var s = Math.sin(rad);\r\n  var c = Math.cos(rad);\r\n  var a10 = a[4];\r\n  var a11 = a[5];\r\n  var a12 = a[6];\r\n  var a13 = a[7];\r\n  var a20 = a[8];\r\n  var a21 = a[9];\r\n  var a22 = a[10];\r\n  var a23 = a[11];\r\n\r\n  if (a !== out) {\r\n    // If the source and destination differ, copy the unchanged rows\r\n    out[0] = a[0];\r\n    out[1] = a[1];\r\n    out[2] = a[2];\r\n    out[3] = a[3];\r\n    out[12] = a[12];\r\n    out[13] = a[13];\r\n    out[14] = a[14];\r\n    out[15] = a[15];\r\n  }\r\n\r\n  // Perform axis-specific matrix multiplication\r\n  out[4] = a10 * c + a20 * s;\r\n  out[5] = a11 * c + a21 * s;\r\n  out[6] = a12 * c + a22 * s;\r\n  out[7] = a13 * c + a23 * s;\r\n  out[8] = a20 * c - a10 * s;\r\n  out[9] = a21 * c - a11 * s;\r\n  out[10] = a22 * c - a12 * s;\r\n  out[11] = a23 * c - a13 * s;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotates a matrix by the given angle around the Y axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\r\nfunction rotateY(out, a, rad) {\r\n  var s = Math.sin(rad);\r\n  var c = Math.cos(rad);\r\n  var a00 = a[0];\r\n  var a01 = a[1];\r\n  var a02 = a[2];\r\n  var a03 = a[3];\r\n  var a20 = a[8];\r\n  var a21 = a[9];\r\n  var a22 = a[10];\r\n  var a23 = a[11];\r\n\r\n  if (a !== out) {\r\n    // If the source and destination differ, copy the unchanged rows\r\n    out[4] = a[4];\r\n    out[5] = a[5];\r\n    out[6] = a[6];\r\n    out[7] = a[7];\r\n    out[12] = a[12];\r\n    out[13] = a[13];\r\n    out[14] = a[14];\r\n    out[15] = a[15];\r\n  }\r\n\r\n  // Perform axis-specific matrix multiplication\r\n  out[0] = a00 * c - a20 * s;\r\n  out[1] = a01 * c - a21 * s;\r\n  out[2] = a02 * c - a22 * s;\r\n  out[3] = a03 * c - a23 * s;\r\n  out[8] = a00 * s + a20 * c;\r\n  out[9] = a01 * s + a21 * c;\r\n  out[10] = a02 * s + a22 * c;\r\n  out[11] = a03 * s + a23 * c;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotates a matrix by the given angle around the Z axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\r\nfunction rotateZ(out, a, rad) {\r\n  var s = Math.sin(rad);\r\n  var c = Math.cos(rad);\r\n  var a00 = a[0];\r\n  var a01 = a[1];\r\n  var a02 = a[2];\r\n  var a03 = a[3];\r\n  var a10 = a[4];\r\n  var a11 = a[5];\r\n  var a12 = a[6];\r\n  var a13 = a[7];\r\n\r\n  if (a !== out) {\r\n    // If the source and destination differ, copy the unchanged last row\r\n    out[8] = a[8];\r\n    out[9] = a[9];\r\n    out[10] = a[10];\r\n    out[11] = a[11];\r\n    out[12] = a[12];\r\n    out[13] = a[13];\r\n    out[14] = a[14];\r\n    out[15] = a[15];\r\n  }\r\n\r\n  // Perform axis-specific matrix multiplication\r\n  out[0] = a00 * c + a10 * s;\r\n  out[1] = a01 * c + a11 * s;\r\n  out[2] = a02 * c + a12 * s;\r\n  out[3] = a03 * c + a13 * s;\r\n  out[4] = a10 * c - a00 * s;\r\n  out[5] = a11 * c - a01 * s;\r\n  out[6] = a12 * c - a02 * s;\r\n  out[7] = a13 * c - a03 * s;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {vec3} v Translation vector\r\n * @returns {mat4} out\r\n */\r\nfunction fromTranslation(out, v) {\r\n  out[0] = 1;\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n  out[3] = 0;\r\n  out[4] = 0;\r\n  out[5] = 1;\r\n  out[6] = 0;\r\n  out[7] = 0;\r\n  out[8] = 0;\r\n  out[9] = 0;\r\n  out[10] = 1;\r\n  out[11] = 0;\r\n  out[12] = v[0];\r\n  out[13] = v[1];\r\n  out[14] = v[2];\r\n  out[15] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.scale(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {vec3} v Scaling vector\r\n * @returns {mat4} out\r\n */\r\nfunction fromScaling(out, v) {\r\n  out[0] = v[0];\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n  out[3] = 0;\r\n  out[4] = 0;\r\n  out[5] = v[1];\r\n  out[6] = 0;\r\n  out[7] = 0;\r\n  out[8] = 0;\r\n  out[9] = 0;\r\n  out[10] = v[2];\r\n  out[11] = 0;\r\n  out[12] = 0;\r\n  out[13] = 0;\r\n  out[14] = 0;\r\n  out[15] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a given angle around a given axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotate(dest, dest, rad, axis);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {vec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\r\nfunction fromRotation(out, rad, axis) {\r\n  var x = axis[0],\r\n      y = axis[1],\r\n      z = axis[2];\r\n  var len = Math.sqrt(x * x + y * y + z * z);\r\n  var s = void 0,\r\n      c = void 0,\r\n      t = void 0;\r\n\r\n  if (len < _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"]) {\r\n    return null;\r\n  }\r\n\r\n  len = 1 / len;\r\n  x *= len;\r\n  y *= len;\r\n  z *= len;\r\n\r\n  s = Math.sin(rad);\r\n  c = Math.cos(rad);\r\n  t = 1 - c;\r\n\r\n  // Perform rotation-specific matrix multiplication\r\n  out[0] = x * x * t + c;\r\n  out[1] = y * x * t + z * s;\r\n  out[2] = z * x * t - y * s;\r\n  out[3] = 0;\r\n  out[4] = x * y * t - z * s;\r\n  out[5] = y * y * t + c;\r\n  out[6] = z * y * t + x * s;\r\n  out[7] = 0;\r\n  out[8] = x * z * t + y * s;\r\n  out[9] = y * z * t - x * s;\r\n  out[10] = z * z * t + c;\r\n  out[11] = 0;\r\n  out[12] = 0;\r\n  out[13] = 0;\r\n  out[14] = 0;\r\n  out[15] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from the given angle around the X axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateX(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\r\nfunction fromXRotation(out, rad) {\r\n  var s = Math.sin(rad);\r\n  var c = Math.cos(rad);\r\n\r\n  // Perform axis-specific matrix multiplication\r\n  out[0] = 1;\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n  out[3] = 0;\r\n  out[4] = 0;\r\n  out[5] = c;\r\n  out[6] = s;\r\n  out[7] = 0;\r\n  out[8] = 0;\r\n  out[9] = -s;\r\n  out[10] = c;\r\n  out[11] = 0;\r\n  out[12] = 0;\r\n  out[13] = 0;\r\n  out[14] = 0;\r\n  out[15] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from the given angle around the Y axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateY(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\r\nfunction fromYRotation(out, rad) {\r\n  var s = Math.sin(rad);\r\n  var c = Math.cos(rad);\r\n\r\n  // Perform axis-specific matrix multiplication\r\n  out[0] = c;\r\n  out[1] = 0;\r\n  out[2] = -s;\r\n  out[3] = 0;\r\n  out[4] = 0;\r\n  out[5] = 1;\r\n  out[6] = 0;\r\n  out[7] = 0;\r\n  out[8] = s;\r\n  out[9] = 0;\r\n  out[10] = c;\r\n  out[11] = 0;\r\n  out[12] = 0;\r\n  out[13] = 0;\r\n  out[14] = 0;\r\n  out[15] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from the given angle around the Z axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateZ(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\r\nfunction fromZRotation(out, rad) {\r\n  var s = Math.sin(rad);\r\n  var c = Math.cos(rad);\r\n\r\n  // Perform axis-specific matrix multiplication\r\n  out[0] = c;\r\n  out[1] = s;\r\n  out[2] = 0;\r\n  out[3] = 0;\r\n  out[4] = -s;\r\n  out[5] = c;\r\n  out[6] = 0;\r\n  out[7] = 0;\r\n  out[8] = 0;\r\n  out[9] = 0;\r\n  out[10] = 1;\r\n  out[11] = 0;\r\n  out[12] = 0;\r\n  out[13] = 0;\r\n  out[14] = 0;\r\n  out[15] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a quaternion rotation and vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {vec3} v Translation vector\r\n * @returns {mat4} out\r\n */\r\nfunction fromRotationTranslation(out, q, v) {\r\n  // Quaternion math\r\n  var x = q[0],\r\n      y = q[1],\r\n      z = q[2],\r\n      w = q[3];\r\n  var x2 = x + x;\r\n  var y2 = y + y;\r\n  var z2 = z + z;\r\n\r\n  var xx = x * x2;\r\n  var xy = x * y2;\r\n  var xz = x * z2;\r\n  var yy = y * y2;\r\n  var yz = y * z2;\r\n  var zz = z * z2;\r\n  var wx = w * x2;\r\n  var wy = w * y2;\r\n  var wz = w * z2;\r\n\r\n  out[0] = 1 - (yy + zz);\r\n  out[1] = xy + wz;\r\n  out[2] = xz - wy;\r\n  out[3] = 0;\r\n  out[4] = xy - wz;\r\n  out[5] = 1 - (xx + zz);\r\n  out[6] = yz + wx;\r\n  out[7] = 0;\r\n  out[8] = xz + wy;\r\n  out[9] = yz - wx;\r\n  out[10] = 1 - (xx + yy);\r\n  out[11] = 0;\r\n  out[12] = v[0];\r\n  out[13] = v[1];\r\n  out[14] = v[2];\r\n  out[15] = 1;\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a new mat4 from a dual quat.\r\n *\r\n * @param {mat4} out Matrix\r\n * @param {quat2} a Dual Quaternion\r\n * @returns {mat4} mat4 receiving operation result\r\n */\r\nfunction fromQuat2(out, a) {\r\n  var translation = new _common_js__WEBPACK_IMPORTED_MODULE_0__["ARRAY_TYPE"](3);\r\n  var bx = -a[0],\r\n      by = -a[1],\r\n      bz = -a[2],\r\n      bw = a[3],\r\n      ax = a[4],\r\n      ay = a[5],\r\n      az = a[6],\r\n      aw = a[7];\r\n\r\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw;\r\n  //Only scale if it makes sense\r\n  if (magnitude > 0) {\r\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\r\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\r\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\r\n  } else {\r\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\r\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\r\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\r\n  }\r\n  fromRotationTranslation(out, a, translation);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns the translation vector component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslation,\r\n *  the returned vector will be the same as the translation vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive translation component\r\n * @param  {mat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\r\nfunction getTranslation(out, mat) {\r\n  out[0] = mat[12];\r\n  out[1] = mat[13];\r\n  out[2] = mat[14];\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns the scaling factor component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslationScale\r\n *  with a normalized Quaternion paramter, the returned vector will be\r\n *  the same as the scaling vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive scaling factor component\r\n * @param  {mat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\r\nfunction getScaling(out, mat) {\r\n  var m11 = mat[0];\r\n  var m12 = mat[1];\r\n  var m13 = mat[2];\r\n  var m21 = mat[4];\r\n  var m22 = mat[5];\r\n  var m23 = mat[6];\r\n  var m31 = mat[8];\r\n  var m32 = mat[9];\r\n  var m33 = mat[10];\r\n\r\n  out[0] = Math.sqrt(m11 * m11 + m12 * m12 + m13 * m13);\r\n  out[1] = Math.sqrt(m21 * m21 + m22 * m22 + m23 * m23);\r\n  out[2] = Math.sqrt(m31 * m31 + m32 * m32 + m33 * m33);\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns a quaternion representing the rotational component\r\n *  of a transformation matrix. If a matrix is built with\r\n *  fromRotationTranslation, the returned quaternion will be the\r\n *  same as the quaternion originally supplied.\r\n * @param {quat} out Quaternion to receive the rotation component\r\n * @param {mat4} mat Matrix to be decomposed (input)\r\n * @return {quat} out\r\n */\r\nfunction getRotation(out, mat) {\r\n  // Algorithm taken from http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\r\n  var trace = mat[0] + mat[5] + mat[10];\r\n  var S = 0;\r\n\r\n  if (trace > 0) {\r\n    S = Math.sqrt(trace + 1.0) * 2;\r\n    out[3] = 0.25 * S;\r\n    out[0] = (mat[6] - mat[9]) / S;\r\n    out[1] = (mat[8] - mat[2]) / S;\r\n    out[2] = (mat[1] - mat[4]) / S;\r\n  } else if (mat[0] > mat[5] && mat[0] > mat[10]) {\r\n    S = Math.sqrt(1.0 + mat[0] - mat[5] - mat[10]) * 2;\r\n    out[3] = (mat[6] - mat[9]) / S;\r\n    out[0] = 0.25 * S;\r\n    out[1] = (mat[1] + mat[4]) / S;\r\n    out[2] = (mat[8] + mat[2]) / S;\r\n  } else if (mat[5] > mat[10]) {\r\n    S = Math.sqrt(1.0 + mat[5] - mat[0] - mat[10]) * 2;\r\n    out[3] = (mat[8] - mat[2]) / S;\r\n    out[0] = (mat[1] + mat[4]) / S;\r\n    out[1] = 0.25 * S;\r\n    out[2] = (mat[6] + mat[9]) / S;\r\n  } else {\r\n    S = Math.sqrt(1.0 + mat[10] - mat[0] - mat[5]) * 2;\r\n    out[3] = (mat[1] - mat[4]) / S;\r\n    out[0] = (mat[8] + mat[2]) / S;\r\n    out[1] = (mat[6] + mat[9]) / S;\r\n    out[2] = 0.25 * S;\r\n  }\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {vec3} v Translation vector\r\n * @param {vec3} s Scaling vector\r\n * @returns {mat4} out\r\n */\r\nfunction fromRotationTranslationScale(out, q, v, s) {\r\n  // Quaternion math\r\n  var x = q[0],\r\n      y = q[1],\r\n      z = q[2],\r\n      w = q[3];\r\n  var x2 = x + x;\r\n  var y2 = y + y;\r\n  var z2 = z + z;\r\n\r\n  var xx = x * x2;\r\n  var xy = x * y2;\r\n  var xz = x * z2;\r\n  var yy = y * y2;\r\n  var yz = y * z2;\r\n  var zz = z * z2;\r\n  var wx = w * x2;\r\n  var wy = w * y2;\r\n  var wz = w * z2;\r\n  var sx = s[0];\r\n  var sy = s[1];\r\n  var sz = s[2];\r\n\r\n  out[0] = (1 - (yy + zz)) * sx;\r\n  out[1] = (xy + wz) * sx;\r\n  out[2] = (xz - wy) * sx;\r\n  out[3] = 0;\r\n  out[4] = (xy - wz) * sy;\r\n  out[5] = (1 - (xx + zz)) * sy;\r\n  out[6] = (yz + wx) * sy;\r\n  out[7] = 0;\r\n  out[8] = (xz + wy) * sz;\r\n  out[9] = (yz - wx) * sz;\r\n  out[10] = (1 - (xx + yy)) * sz;\r\n  out[11] = 0;\r\n  out[12] = v[0];\r\n  out[13] = v[1];\r\n  out[14] = v[2];\r\n  out[15] = 1;\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     mat4.translate(dest, origin);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *     mat4.translate(dest, negativeOrigin);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {vec3} v Translation vector\r\n * @param {vec3} s Scaling vector\r\n * @param {vec3} o The origin vector around which to scale and rotate\r\n * @returns {mat4} out\r\n */\r\nfunction fromRotationTranslationScaleOrigin(out, q, v, s, o) {\r\n  // Quaternion math\r\n  var x = q[0],\r\n      y = q[1],\r\n      z = q[2],\r\n      w = q[3];\r\n  var x2 = x + x;\r\n  var y2 = y + y;\r\n  var z2 = z + z;\r\n\r\n  var xx = x * x2;\r\n  var xy = x * y2;\r\n  var xz = x * z2;\r\n  var yy = y * y2;\r\n  var yz = y * z2;\r\n  var zz = z * z2;\r\n  var wx = w * x2;\r\n  var wy = w * y2;\r\n  var wz = w * z2;\r\n\r\n  var sx = s[0];\r\n  var sy = s[1];\r\n  var sz = s[2];\r\n\r\n  var ox = o[0];\r\n  var oy = o[1];\r\n  var oz = o[2];\r\n\r\n  var out0 = (1 - (yy + zz)) * sx;\r\n  var out1 = (xy + wz) * sx;\r\n  var out2 = (xz - wy) * sx;\r\n  var out4 = (xy - wz) * sy;\r\n  var out5 = (1 - (xx + zz)) * sy;\r\n  var out6 = (yz + wx) * sy;\r\n  var out8 = (xz + wy) * sz;\r\n  var out9 = (yz - wx) * sz;\r\n  var out10 = (1 - (xx + yy)) * sz;\r\n\r\n  out[0] = out0;\r\n  out[1] = out1;\r\n  out[2] = out2;\r\n  out[3] = 0;\r\n  out[4] = out4;\r\n  out[5] = out5;\r\n  out[6] = out6;\r\n  out[7] = 0;\r\n  out[8] = out8;\r\n  out[9] = out9;\r\n  out[10] = out10;\r\n  out[11] = 0;\r\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\r\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\r\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\r\n  out[15] = 1;\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates a 4x4 matrix from the given quaternion\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat} q Quaternion to create matrix from\r\n *\r\n * @returns {mat4} out\r\n */\r\nfunction fromQuat(out, q) {\r\n  var x = q[0],\r\n      y = q[1],\r\n      z = q[2],\r\n      w = q[3];\r\n  var x2 = x + x;\r\n  var y2 = y + y;\r\n  var z2 = z + z;\r\n\r\n  var xx = x * x2;\r\n  var yx = y * x2;\r\n  var yy = y * y2;\r\n  var zx = z * x2;\r\n  var zy = z * y2;\r\n  var zz = z * z2;\r\n  var wx = w * x2;\r\n  var wy = w * y2;\r\n  var wz = w * z2;\r\n\r\n  out[0] = 1 - yy - zz;\r\n  out[1] = yx + wz;\r\n  out[2] = zx - wy;\r\n  out[3] = 0;\r\n\r\n  out[4] = yx - wz;\r\n  out[5] = 1 - xx - zz;\r\n  out[6] = zy + wx;\r\n  out[7] = 0;\r\n\r\n  out[8] = zx + wy;\r\n  out[9] = zy - wx;\r\n  out[10] = 1 - xx - yy;\r\n  out[11] = 0;\r\n\r\n  out[12] = 0;\r\n  out[13] = 0;\r\n  out[14] = 0;\r\n  out[15] = 1;\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Generates a frustum matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Number} left Left bound of the frustum\r\n * @param {Number} right Right bound of the frustum\r\n * @param {Number} bottom Bottom bound of the frustum\r\n * @param {Number} top Top bound of the frustum\r\n * @param {Number} near Near bound of the frustum\r\n * @param {Number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\r\nfunction frustum(out, left, right, bottom, top, near, far) {\r\n  var rl = 1 / (right - left);\r\n  var tb = 1 / (top - bottom);\r\n  var nf = 1 / (near - far);\r\n  out[0] = near * 2 * rl;\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n  out[3] = 0;\r\n  out[4] = 0;\r\n  out[5] = near * 2 * tb;\r\n  out[6] = 0;\r\n  out[7] = 0;\r\n  out[8] = (right + left) * rl;\r\n  out[9] = (top + bottom) * tb;\r\n  out[10] = (far + near) * nf;\r\n  out[11] = -1;\r\n  out[12] = 0;\r\n  out[13] = 0;\r\n  out[14] = far * near * 2 * nf;\r\n  out[15] = 0;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Generates a perspective projection matrix with the given bounds.\r\n * Passing null/undefined/no value for far will generate infinite projection matrix.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} fovy Vertical field of view in radians\r\n * @param {number} aspect Aspect ratio. typically viewport width/height\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum, can be null or Infinity\r\n * @returns {mat4} out\r\n */\r\nfunction perspective(out, fovy, aspect, near, far) {\r\n  var f = 1.0 / Math.tan(fovy / 2),\r\n      nf = void 0;\r\n  out[0] = f / aspect;\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n  out[3] = 0;\r\n  out[4] = 0;\r\n  out[5] = f;\r\n  out[6] = 0;\r\n  out[7] = 0;\r\n  out[8] = 0;\r\n  out[9] = 0;\r\n  out[11] = -1;\r\n  out[12] = 0;\r\n  out[13] = 0;\r\n  out[15] = 0;\r\n  if (far != null && far !== Infinity) {\r\n    nf = 1 / (near - far);\r\n    out[10] = (far + near) * nf;\r\n    out[14] = 2 * far * near * nf;\r\n  } else {\r\n    out[10] = -1;\r\n    out[14] = -2 * near;\r\n  }\r\n  return out;\r\n}\r\n\r\n/**\r\n * Generates a perspective projection matrix with the given field of view.\r\n * This is primarily useful for generating projection matrices to be used\r\n * with the still experiemental WebVR API.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\r\nfunction perspectiveFromFieldOfView(out, fov, near, far) {\r\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\r\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\r\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\r\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\r\n  var xScale = 2.0 / (leftTan + rightTan);\r\n  var yScale = 2.0 / (upTan + downTan);\r\n\r\n  out[0] = xScale;\r\n  out[1] = 0.0;\r\n  out[2] = 0.0;\r\n  out[3] = 0.0;\r\n  out[4] = 0.0;\r\n  out[5] = yScale;\r\n  out[6] = 0.0;\r\n  out[7] = 0.0;\r\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\r\n  out[9] = (upTan - downTan) * yScale * 0.5;\r\n  out[10] = far / (near - far);\r\n  out[11] = -1.0;\r\n  out[12] = 0.0;\r\n  out[13] = 0.0;\r\n  out[14] = far * near / (near - far);\r\n  out[15] = 0.0;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Generates a orthogonal projection matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} left Left bound of the frustum\r\n * @param {number} right Right bound of the frustum\r\n * @param {number} bottom Bottom bound of the frustum\r\n * @param {number} top Top bound of the frustum\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\r\nfunction ortho(out, left, right, bottom, top, near, far) {\r\n  var lr = 1 / (left - right);\r\n  var bt = 1 / (bottom - top);\r\n  var nf = 1 / (near - far);\r\n  out[0] = -2 * lr;\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n  out[3] = 0;\r\n  out[4] = 0;\r\n  out[5] = -2 * bt;\r\n  out[6] = 0;\r\n  out[7] = 0;\r\n  out[8] = 0;\r\n  out[9] = 0;\r\n  out[10] = 2 * nf;\r\n  out[11] = 0;\r\n  out[12] = (left + right) * lr;\r\n  out[13] = (top + bottom) * bt;\r\n  out[14] = (far + near) * nf;\r\n  out[15] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\r\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {vec3} eye Position of the viewer\r\n * @param {vec3} center Point the viewer is looking at\r\n * @param {vec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\r\nfunction lookAt(out, eye, center, up) {\r\n  var x0 = void 0,\r\n      x1 = void 0,\r\n      x2 = void 0,\r\n      y0 = void 0,\r\n      y1 = void 0,\r\n      y2 = void 0,\r\n      z0 = void 0,\r\n      z1 = void 0,\r\n      z2 = void 0,\r\n      len = void 0;\r\n  var eyex = eye[0];\r\n  var eyey = eye[1];\r\n  var eyez = eye[2];\r\n  var upx = up[0];\r\n  var upy = up[1];\r\n  var upz = up[2];\r\n  var centerx = center[0];\r\n  var centery = center[1];\r\n  var centerz = center[2];\r\n\r\n  if (Math.abs(eyex - centerx) < _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] && Math.abs(eyey - centery) < _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] && Math.abs(eyez - centerz) < _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"]) {\r\n    return identity(out);\r\n  }\r\n\r\n  z0 = eyex - centerx;\r\n  z1 = eyey - centery;\r\n  z2 = eyez - centerz;\r\n\r\n  len = 1 / Math.sqrt(z0 * z0 + z1 * z1 + z2 * z2);\r\n  z0 *= len;\r\n  z1 *= len;\r\n  z2 *= len;\r\n\r\n  x0 = upy * z2 - upz * z1;\r\n  x1 = upz * z0 - upx * z2;\r\n  x2 = upx * z1 - upy * z0;\r\n  len = Math.sqrt(x0 * x0 + x1 * x1 + x2 * x2);\r\n  if (!len) {\r\n    x0 = 0;\r\n    x1 = 0;\r\n    x2 = 0;\r\n  } else {\r\n    len = 1 / len;\r\n    x0 *= len;\r\n    x1 *= len;\r\n    x2 *= len;\r\n  }\r\n\r\n  y0 = z1 * x2 - z2 * x1;\r\n  y1 = z2 * x0 - z0 * x2;\r\n  y2 = z0 * x1 - z1 * x0;\r\n\r\n  len = Math.sqrt(y0 * y0 + y1 * y1 + y2 * y2);\r\n  if (!len) {\r\n    y0 = 0;\r\n    y1 = 0;\r\n    y2 = 0;\r\n  } else {\r\n    len = 1 / len;\r\n    y0 *= len;\r\n    y1 *= len;\r\n    y2 *= len;\r\n  }\r\n\r\n  out[0] = x0;\r\n  out[1] = y0;\r\n  out[2] = z0;\r\n  out[3] = 0;\r\n  out[4] = x1;\r\n  out[5] = y1;\r\n  out[6] = z1;\r\n  out[7] = 0;\r\n  out[8] = x2;\r\n  out[9] = y2;\r\n  out[10] = z2;\r\n  out[11] = 0;\r\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\r\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\r\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\r\n  out[15] = 1;\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Generates a matrix that makes something look at something else.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {vec3} eye Position of the viewer\r\n * @param {vec3} center Point the viewer is looking at\r\n * @param {vec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\r\nfunction targetTo(out, eye, target, up) {\r\n  var eyex = eye[0],\r\n      eyey = eye[1],\r\n      eyez = eye[2],\r\n      upx = up[0],\r\n      upy = up[1],\r\n      upz = up[2];\r\n\r\n  var z0 = eyex - target[0],\r\n      z1 = eyey - target[1],\r\n      z2 = eyez - target[2];\r\n\r\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\r\n  if (len > 0) {\r\n    len = 1 / Math.sqrt(len);\r\n    z0 *= len;\r\n    z1 *= len;\r\n    z2 *= len;\r\n  }\r\n\r\n  var x0 = upy * z2 - upz * z1,\r\n      x1 = upz * z0 - upx * z2,\r\n      x2 = upx * z1 - upy * z0;\r\n\r\n  len = x0 * x0 + x1 * x1 + x2 * x2;\r\n  if (len > 0) {\r\n    len = 1 / Math.sqrt(len);\r\n    x0 *= len;\r\n    x1 *= len;\r\n    x2 *= len;\r\n  }\r\n\r\n  out[0] = x0;\r\n  out[1] = x1;\r\n  out[2] = x2;\r\n  out[3] = 0;\r\n  out[4] = z1 * x2 - z2 * x1;\r\n  out[5] = z2 * x0 - z0 * x2;\r\n  out[6] = z0 * x1 - z1 * x0;\r\n  out[7] = 0;\r\n  out[8] = z0;\r\n  out[9] = z1;\r\n  out[10] = z2;\r\n  out[11] = 0;\r\n  out[12] = eyex;\r\n  out[13] = eyey;\r\n  out[14] = eyez;\r\n  out[15] = 1;\r\n  return out;\r\n};\r\n\r\n/**\r\n * Returns a string representation of a mat4\r\n *\r\n * @param {mat4} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\r\nfunction str(a) {\r\n  return \'mat4(\' + a[0] + \', \' + a[1] + \', \' + a[2] + \', \' + a[3] + \', \' + a[4] + \', \' + a[5] + \', \' + a[6] + \', \' + a[7] + \', \' + a[8] + \', \' + a[9] + \', \' + a[10] + \', \' + a[11] + \', \' + a[12] + \', \' + a[13] + \', \' + a[14] + \', \' + a[15] + \')\';\r\n}\r\n\r\n/**\r\n * Returns Frobenius norm of a mat4\r\n *\r\n * @param {mat4} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\r\nfunction frob(a) {\r\n  return Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + Math.pow(a[6], 2) + Math.pow(a[7], 2) + Math.pow(a[8], 2) + Math.pow(a[9], 2) + Math.pow(a[10], 2) + Math.pow(a[11], 2) + Math.pow(a[12], 2) + Math.pow(a[13], 2) + Math.pow(a[14], 2) + Math.pow(a[15], 2));\r\n}\r\n\r\n/**\r\n * Adds two mat4\'s\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\r\nfunction add(out, a, b) {\r\n  out[0] = a[0] + b[0];\r\n  out[1] = a[1] + b[1];\r\n  out[2] = a[2] + b[2];\r\n  out[3] = a[3] + b[3];\r\n  out[4] = a[4] + b[4];\r\n  out[5] = a[5] + b[5];\r\n  out[6] = a[6] + b[6];\r\n  out[7] = a[7] + b[7];\r\n  out[8] = a[8] + b[8];\r\n  out[9] = a[9] + b[9];\r\n  out[10] = a[10] + b[10];\r\n  out[11] = a[11] + b[11];\r\n  out[12] = a[12] + b[12];\r\n  out[13] = a[13] + b[13];\r\n  out[14] = a[14] + b[14];\r\n  out[15] = a[15] + b[15];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\r\nfunction subtract(out, a, b) {\r\n  out[0] = a[0] - b[0];\r\n  out[1] = a[1] - b[1];\r\n  out[2] = a[2] - b[2];\r\n  out[3] = a[3] - b[3];\r\n  out[4] = a[4] - b[4];\r\n  out[5] = a[5] - b[5];\r\n  out[6] = a[6] - b[6];\r\n  out[7] = a[7] - b[7];\r\n  out[8] = a[8] - b[8];\r\n  out[9] = a[9] - b[9];\r\n  out[10] = a[10] - b[10];\r\n  out[11] = a[11] - b[11];\r\n  out[12] = a[12] - b[12];\r\n  out[13] = a[13] - b[13];\r\n  out[14] = a[14] - b[14];\r\n  out[15] = a[15] - b[15];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix\'s elements by\r\n * @returns {mat4} out\r\n */\r\nfunction multiplyScalar(out, a, b) {\r\n  out[0] = a[0] * b;\r\n  out[1] = a[1] * b;\r\n  out[2] = a[2] * b;\r\n  out[3] = a[3] * b;\r\n  out[4] = a[4] * b;\r\n  out[5] = a[5] * b;\r\n  out[6] = a[6] * b;\r\n  out[7] = a[7] * b;\r\n  out[8] = a[8] * b;\r\n  out[9] = a[9] * b;\r\n  out[10] = a[10] * b;\r\n  out[11] = a[11] * b;\r\n  out[12] = a[12] * b;\r\n  out[13] = a[13] * b;\r\n  out[14] = a[14] * b;\r\n  out[15] = a[15] * b;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Adds two mat4\'s after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat4} out the receiving vector\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @param {Number} scale the amount to scale b\'s elements by before adding\r\n * @returns {mat4} out\r\n */\r\nfunction multiplyScalarAndAdd(out, a, b, scale) {\r\n  out[0] = a[0] + b[0] * scale;\r\n  out[1] = a[1] + b[1] * scale;\r\n  out[2] = a[2] + b[2] * scale;\r\n  out[3] = a[3] + b[3] * scale;\r\n  out[4] = a[4] + b[4] * scale;\r\n  out[5] = a[5] + b[5] * scale;\r\n  out[6] = a[6] + b[6] * scale;\r\n  out[7] = a[7] + b[7] * scale;\r\n  out[8] = a[8] + b[8] * scale;\r\n  out[9] = a[9] + b[9] * scale;\r\n  out[10] = a[10] + b[10] * scale;\r\n  out[11] = a[11] + b[11] * scale;\r\n  out[12] = a[12] + b[12] * scale;\r\n  out[13] = a[13] + b[13] * scale;\r\n  out[14] = a[14] + b[14] * scale;\r\n  out[15] = a[15] + b[15] * scale;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {mat4} a The first matrix.\r\n * @param {mat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\r\nfunction exactEquals(a, b) {\r\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\r\n}\r\n\r\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {mat4} a The first matrix.\r\n * @param {mat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\r\nfunction equals(a, b) {\r\n  var a0 = a[0],\r\n      a1 = a[1],\r\n      a2 = a[2],\r\n      a3 = a[3];\r\n  var a4 = a[4],\r\n      a5 = a[5],\r\n      a6 = a[6],\r\n      a7 = a[7];\r\n  var a8 = a[8],\r\n      a9 = a[9],\r\n      a10 = a[10],\r\n      a11 = a[11];\r\n  var a12 = a[12],\r\n      a13 = a[13],\r\n      a14 = a[14],\r\n      a15 = a[15];\r\n\r\n  var b0 = b[0],\r\n      b1 = b[1],\r\n      b2 = b[2],\r\n      b3 = b[3];\r\n  var b4 = b[4],\r\n      b5 = b[5],\r\n      b6 = b[6],\r\n      b7 = b[7];\r\n  var b8 = b[8],\r\n      b9 = b[9],\r\n      b10 = b[10],\r\n      b11 = b[11];\r\n  var b12 = b[12],\r\n      b13 = b[13],\r\n      b14 = b[14],\r\n      b15 = b[15];\r\n\r\n  return Math.abs(a0 - b0) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a15), Math.abs(b15));\r\n}\r\n\r\n/**\r\n * Alias for {@link mat4.multiply}\r\n * @function\r\n */\r\nvar mul = multiply;\r\n\r\n/**\r\n * Alias for {@link mat4.subtract}\r\n * @function\r\n */\r\nvar sub = subtract;\n\n/***/ }),\n\n/***/ "./node_modules/gl-matrix/lib/gl-matrix/quat.js":\n/*!******************************************************!*\\\n  !*** ./node_modules/gl-matrix/lib/gl-matrix/quat.js ***!\n  \\******************************************************/\n/*! exports provided: create, identity, setAxisAngle, getAxisAngle, multiply, rotateX, rotateY, rotateZ, calculateW, slerp, random, invert, conjugate, fromMat3, fromEuler, str, clone, fromValues, copy, set, add, mul, scale, dot, lerp, length, len, squaredLength, sqrLen, normalize, exactEquals, equals, rotationTo, sqlerp, setAxes */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "create", function() { return create; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "identity", function() { return identity; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setAxisAngle", function() { return setAxisAngle; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getAxisAngle", function() { return getAxisAngle; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "multiply", function() { return multiply; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rotateX", function() { return rotateX; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rotateY", function() { return rotateY; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rotateZ", function() { return rotateZ; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "calculateW", function() { return calculateW; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "slerp", function() { return slerp; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "random", function() { return random; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "invert", function() { return invert; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "conjugate", function() { return conjugate; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fromMat3", function() { return fromMat3; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fromEuler", function() { return fromEuler; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "str", function() { return str; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "clone", function() { return clone; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fromValues", function() { return fromValues; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "copy", function() { return copy; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "set", function() { return set; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "add", function() { return add; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mul", function() { return mul; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scale", function() { return scale; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "dot", function() { return dot; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "lerp", function() { return lerp; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "length", function() { return length; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "len", function() { return len; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "squaredLength", function() { return squaredLength; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sqrLen", function() { return sqrLen; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "normalize", function() { return normalize; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "exactEquals", function() { return exactEquals; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "equals", function() { return equals; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rotationTo", function() { return rotationTo; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sqlerp", function() { return sqlerp; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setAxes", function() { return setAxes; });\n/* harmony import */ var _common_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./common.js */ "./node_modules/gl-matrix/lib/gl-matrix/common.js");\n/* harmony import */ var _mat3_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./mat3.js */ "./node_modules/gl-matrix/lib/gl-matrix/mat3.js");\n/* harmony import */ var _vec3_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./vec3.js */ "./node_modules/gl-matrix/lib/gl-matrix/vec3.js");\n/* harmony import */ var _vec4_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./vec4.js */ "./node_modules/gl-matrix/lib/gl-matrix/vec4.js");\n\r\n\r\n\r\n\r\n\r\n/**\r\n * Quaternion\r\n * @module quat\r\n */\r\n\r\n/**\r\n * Creates a new identity quat\r\n *\r\n * @returns {quat} a new quaternion\r\n */\r\nfunction create() {\r\n  var out = new _common_js__WEBPACK_IMPORTED_MODULE_0__["ARRAY_TYPE"](4);\r\n  if (_common_js__WEBPACK_IMPORTED_MODULE_0__["ARRAY_TYPE"] != Float32Array) {\r\n    out[0] = 0;\r\n    out[1] = 0;\r\n    out[2] = 0;\r\n  }\r\n  out[3] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Set a quat to the identity quaternion\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @returns {quat} out\r\n */\r\nfunction identity(out) {\r\n  out[0] = 0;\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n  out[3] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Sets a quat from the given angle and rotation axis,\r\n * then returns it.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {vec3} axis the axis around which to rotate\r\n * @param {Number} rad the angle in radians\r\n * @returns {quat} out\r\n **/\r\nfunction setAxisAngle(out, axis, rad) {\r\n  rad = rad * 0.5;\r\n  var s = Math.sin(rad);\r\n  out[0] = s * axis[0];\r\n  out[1] = s * axis[1];\r\n  out[2] = s * axis[2];\r\n  out[3] = Math.cos(rad);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Gets the rotation axis and angle for a given\r\n *  quaternion. If a quaternion is created with\r\n *  setAxisAngle, this method will return the same\r\n *  values as providied in the original parameter list\r\n *  OR functionally equivalent values.\r\n * Example: The quaternion formed by axis [0, 0, 1] and\r\n *  angle -90 is the same as the quaternion formed by\r\n *  [0, 0, 1] and 270. This method favors the latter.\r\n * @param  {vec3} out_axis  Vector receiving the axis of rotation\r\n * @param  {quat} q     Quaternion to be decomposed\r\n * @return {Number}     Angle, in radians, of the rotation\r\n */\r\nfunction getAxisAngle(out_axis, q) {\r\n  var rad = Math.acos(q[3]) * 2.0;\r\n  var s = Math.sin(rad / 2.0);\r\n  if (s > _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"]) {\r\n    out_axis[0] = q[0] / s;\r\n    out_axis[1] = q[1] / s;\r\n    out_axis[2] = q[2] / s;\r\n  } else {\r\n    // If s is zero, return any axis (no rotation - axis does not matter)\r\n    out_axis[0] = 1;\r\n    out_axis[1] = 0;\r\n    out_axis[2] = 0;\r\n  }\r\n  return rad;\r\n}\r\n\r\n/**\r\n * Multiplies two quat\'s\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @returns {quat} out\r\n */\r\nfunction multiply(out, a, b) {\r\n  var ax = a[0],\r\n      ay = a[1],\r\n      az = a[2],\r\n      aw = a[3];\r\n  var bx = b[0],\r\n      by = b[1],\r\n      bz = b[2],\r\n      bw = b[3];\r\n\r\n  out[0] = ax * bw + aw * bx + ay * bz - az * by;\r\n  out[1] = ay * bw + aw * by + az * bx - ax * bz;\r\n  out[2] = az * bw + aw * bz + ax * by - ay * bx;\r\n  out[3] = aw * bw - ax * bx - ay * by - az * bz;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotates a quaternion by the given angle about the X axis\r\n *\r\n * @param {quat} out quat receiving operation result\r\n * @param {quat} a quat to rotate\r\n * @param {number} rad angle (in radians) to rotate\r\n * @returns {quat} out\r\n */\r\nfunction rotateX(out, a, rad) {\r\n  rad *= 0.5;\r\n\r\n  var ax = a[0],\r\n      ay = a[1],\r\n      az = a[2],\r\n      aw = a[3];\r\n  var bx = Math.sin(rad),\r\n      bw = Math.cos(rad);\r\n\r\n  out[0] = ax * bw + aw * bx;\r\n  out[1] = ay * bw + az * bx;\r\n  out[2] = az * bw - ay * bx;\r\n  out[3] = aw * bw - ax * bx;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotates a quaternion by the given angle about the Y axis\r\n *\r\n * @param {quat} out quat receiving operation result\r\n * @param {quat} a quat to rotate\r\n * @param {number} rad angle (in radians) to rotate\r\n * @returns {quat} out\r\n */\r\nfunction rotateY(out, a, rad) {\r\n  rad *= 0.5;\r\n\r\n  var ax = a[0],\r\n      ay = a[1],\r\n      az = a[2],\r\n      aw = a[3];\r\n  var by = Math.sin(rad),\r\n      bw = Math.cos(rad);\r\n\r\n  out[0] = ax * bw - az * by;\r\n  out[1] = ay * bw + aw * by;\r\n  out[2] = az * bw + ax * by;\r\n  out[3] = aw * bw - ay * by;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotates a quaternion by the given angle about the Z axis\r\n *\r\n * @param {quat} out quat receiving operation result\r\n * @param {quat} a quat to rotate\r\n * @param {number} rad angle (in radians) to rotate\r\n * @returns {quat} out\r\n */\r\nfunction rotateZ(out, a, rad) {\r\n  rad *= 0.5;\r\n\r\n  var ax = a[0],\r\n      ay = a[1],\r\n      az = a[2],\r\n      aw = a[3];\r\n  var bz = Math.sin(rad),\r\n      bw = Math.cos(rad);\r\n\r\n  out[0] = ax * bw + ay * bz;\r\n  out[1] = ay * bw - ax * bz;\r\n  out[2] = az * bw + aw * bz;\r\n  out[3] = aw * bw - az * bz;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the W component of a quat from the X, Y, and Z components.\r\n * Assumes that quaternion is 1 unit in length.\r\n * Any existing W component will be ignored.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a quat to calculate W component of\r\n * @returns {quat} out\r\n */\r\nfunction calculateW(out, a) {\r\n  var x = a[0],\r\n      y = a[1],\r\n      z = a[2];\r\n\r\n  out[0] = x;\r\n  out[1] = y;\r\n  out[2] = z;\r\n  out[3] = Math.sqrt(Math.abs(1.0 - x * x - y * y - z * z));\r\n  return out;\r\n}\r\n\r\n/**\r\n * Performs a spherical linear interpolation between two quat\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat} out\r\n */\r\nfunction slerp(out, a, b, t) {\r\n  // benchmarks:\r\n  //    http://jsperf.com/quaternion-slerp-implementations\r\n  var ax = a[0],\r\n      ay = a[1],\r\n      az = a[2],\r\n      aw = a[3];\r\n  var bx = b[0],\r\n      by = b[1],\r\n      bz = b[2],\r\n      bw = b[3];\r\n\r\n  var omega = void 0,\r\n      cosom = void 0,\r\n      sinom = void 0,\r\n      scale0 = void 0,\r\n      scale1 = void 0;\r\n\r\n  // calc cosine\r\n  cosom = ax * bx + ay * by + az * bz + aw * bw;\r\n  // adjust signs (if necessary)\r\n  if (cosom < 0.0) {\r\n    cosom = -cosom;\r\n    bx = -bx;\r\n    by = -by;\r\n    bz = -bz;\r\n    bw = -bw;\r\n  }\r\n  // calculate coefficients\r\n  if (1.0 - cosom > _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"]) {\r\n    // standard case (slerp)\r\n    omega = Math.acos(cosom);\r\n    sinom = Math.sin(omega);\r\n    scale0 = Math.sin((1.0 - t) * omega) / sinom;\r\n    scale1 = Math.sin(t * omega) / sinom;\r\n  } else {\r\n    // "from" and "to" quaternions are very close\r\n    //  ... so we can do a linear interpolation\r\n    scale0 = 1.0 - t;\r\n    scale1 = t;\r\n  }\r\n  // calculate final values\r\n  out[0] = scale0 * ax + scale1 * bx;\r\n  out[1] = scale0 * ay + scale1 * by;\r\n  out[2] = scale0 * az + scale1 * bz;\r\n  out[3] = scale0 * aw + scale1 * bw;\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Generates a random quaternion\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @returns {quat} out\r\n */\r\nfunction random(out) {\r\n  // Implementation of http://planning.cs.uiuc.edu/node198.html\r\n  // TODO: Calling random 3 times is probably not the fastest solution\r\n  var u1 = _common_js__WEBPACK_IMPORTED_MODULE_0__["RANDOM"]();\r\n  var u2 = _common_js__WEBPACK_IMPORTED_MODULE_0__["RANDOM"]();\r\n  var u3 = _common_js__WEBPACK_IMPORTED_MODULE_0__["RANDOM"]();\r\n\r\n  var sqrt1MinusU1 = Math.sqrt(1 - u1);\r\n  var sqrtU1 = Math.sqrt(u1);\r\n\r\n  out[0] = sqrt1MinusU1 * Math.sin(2.0 * Math.PI * u2);\r\n  out[1] = sqrt1MinusU1 * Math.cos(2.0 * Math.PI * u2);\r\n  out[2] = sqrtU1 * Math.sin(2.0 * Math.PI * u3);\r\n  out[3] = sqrtU1 * Math.cos(2.0 * Math.PI * u3);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the inverse of a quat\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a quat to calculate inverse of\r\n * @returns {quat} out\r\n */\r\nfunction invert(out, a) {\r\n  var a0 = a[0],\r\n      a1 = a[1],\r\n      a2 = a[2],\r\n      a3 = a[3];\r\n  var dot = a0 * a0 + a1 * a1 + a2 * a2 + a3 * a3;\r\n  var invDot = dot ? 1.0 / dot : 0;\r\n\r\n  // TODO: Would be faster to return [0,0,0,0] immediately if dot == 0\r\n\r\n  out[0] = -a0 * invDot;\r\n  out[1] = -a1 * invDot;\r\n  out[2] = -a2 * invDot;\r\n  out[3] = a3 * invDot;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the conjugate of a quat\r\n * If the quaternion is normalized, this function is faster than quat.inverse and produces the same result.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a quat to calculate conjugate of\r\n * @returns {quat} out\r\n */\r\nfunction conjugate(out, a) {\r\n  out[0] = -a[0];\r\n  out[1] = -a[1];\r\n  out[2] = -a[2];\r\n  out[3] = a[3];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a quaternion from the given 3x3 rotation matrix.\r\n *\r\n * NOTE: The resultant quaternion is not normalized, so you should be sure\r\n * to renormalize the quaternion yourself where necessary.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {mat3} m rotation matrix\r\n * @returns {quat} out\r\n * @function\r\n */\r\nfunction fromMat3(out, m) {\r\n  // Algorithm in Ken Shoemake\'s article in 1987 SIGGRAPH course notes\r\n  // article "Quaternion Calculus and Fast Animation".\r\n  var fTrace = m[0] + m[4] + m[8];\r\n  var fRoot = void 0;\r\n\r\n  if (fTrace > 0.0) {\r\n    // |w| > 1/2, may as well choose w > 1/2\r\n    fRoot = Math.sqrt(fTrace + 1.0); // 2w\r\n    out[3] = 0.5 * fRoot;\r\n    fRoot = 0.5 / fRoot; // 1/(4w)\r\n    out[0] = (m[5] - m[7]) * fRoot;\r\n    out[1] = (m[6] - m[2]) * fRoot;\r\n    out[2] = (m[1] - m[3]) * fRoot;\r\n  } else {\r\n    // |w| <= 1/2\r\n    var i = 0;\r\n    if (m[4] > m[0]) i = 1;\r\n    if (m[8] > m[i * 3 + i]) i = 2;\r\n    var j = (i + 1) % 3;\r\n    var k = (i + 2) % 3;\r\n\r\n    fRoot = Math.sqrt(m[i * 3 + i] - m[j * 3 + j] - m[k * 3 + k] + 1.0);\r\n    out[i] = 0.5 * fRoot;\r\n    fRoot = 0.5 / fRoot;\r\n    out[3] = (m[j * 3 + k] - m[k * 3 + j]) * fRoot;\r\n    out[j] = (m[j * 3 + i] + m[i * 3 + j]) * fRoot;\r\n    out[k] = (m[k * 3 + i] + m[i * 3 + k]) * fRoot;\r\n  }\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a quaternion from the given euler angle x, y, z.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {x} Angle to rotate around X axis in degrees.\r\n * @param {y} Angle to rotate around Y axis in degrees.\r\n * @param {z} Angle to rotate around Z axis in degrees.\r\n * @returns {quat} out\r\n * @function\r\n */\r\nfunction fromEuler(out, x, y, z) {\r\n  var halfToRad = 0.5 * Math.PI / 180.0;\r\n  x *= halfToRad;\r\n  y *= halfToRad;\r\n  z *= halfToRad;\r\n\r\n  var sx = Math.sin(x);\r\n  var cx = Math.cos(x);\r\n  var sy = Math.sin(y);\r\n  var cy = Math.cos(y);\r\n  var sz = Math.sin(z);\r\n  var cz = Math.cos(z);\r\n\r\n  out[0] = sx * cy * cz - cx * sy * sz;\r\n  out[1] = cx * sy * cz + sx * cy * sz;\r\n  out[2] = cx * cy * sz - sx * sy * cz;\r\n  out[3] = cx * cy * cz + sx * sy * sz;\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns a string representation of a quatenion\r\n *\r\n * @param {quat} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\r\nfunction str(a) {\r\n  return \'quat(\' + a[0] + \', \' + a[1] + \', \' + a[2] + \', \' + a[3] + \')\';\r\n}\r\n\r\n/**\r\n * Creates a new quat initialized with values from an existing quaternion\r\n *\r\n * @param {quat} a quaternion to clone\r\n * @returns {quat} a new quaternion\r\n * @function\r\n */\r\nvar clone = _vec4_js__WEBPACK_IMPORTED_MODULE_3__["clone"];\r\n\r\n/**\r\n * Creates a new quat initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {quat} a new quaternion\r\n * @function\r\n */\r\nvar fromValues = _vec4_js__WEBPACK_IMPORTED_MODULE_3__["fromValues"];\r\n\r\n/**\r\n * Copy the values from one quat to another\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the source quaternion\r\n * @returns {quat} out\r\n * @function\r\n */\r\nvar copy = _vec4_js__WEBPACK_IMPORTED_MODULE_3__["copy"];\r\n\r\n/**\r\n * Set the components of a quat to the given values\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {quat} out\r\n * @function\r\n */\r\nvar set = _vec4_js__WEBPACK_IMPORTED_MODULE_3__["set"];\r\n\r\n/**\r\n * Adds two quat\'s\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @returns {quat} out\r\n * @function\r\n */\r\nvar add = _vec4_js__WEBPACK_IMPORTED_MODULE_3__["add"];\r\n\r\n/**\r\n * Alias for {@link quat.multiply}\r\n * @function\r\n */\r\nvar mul = multiply;\r\n\r\n/**\r\n * Scales a quat by a scalar number\r\n *\r\n * @param {quat} out the receiving vector\r\n * @param {quat} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {quat} out\r\n * @function\r\n */\r\nvar scale = _vec4_js__WEBPACK_IMPORTED_MODULE_3__["scale"];\r\n\r\n/**\r\n * Calculates the dot product of two quat\'s\r\n *\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @returns {Number} dot product of a and b\r\n * @function\r\n */\r\nvar dot = _vec4_js__WEBPACK_IMPORTED_MODULE_3__["dot"];\r\n\r\n/**\r\n * Performs a linear interpolation between two quat\'s\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat} out\r\n * @function\r\n */\r\nvar lerp = _vec4_js__WEBPACK_IMPORTED_MODULE_3__["lerp"];\r\n\r\n/**\r\n * Calculates the length of a quat\r\n *\r\n * @param {quat} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\r\nvar length = _vec4_js__WEBPACK_IMPORTED_MODULE_3__["length"];\r\n\r\n/**\r\n * Alias for {@link quat.length}\r\n * @function\r\n */\r\nvar len = length;\r\n\r\n/**\r\n * Calculates the squared length of a quat\r\n *\r\n * @param {quat} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n * @function\r\n */\r\nvar squaredLength = _vec4_js__WEBPACK_IMPORTED_MODULE_3__["squaredLength"];\r\n\r\n/**\r\n * Alias for {@link quat.squaredLength}\r\n * @function\r\n */\r\nvar sqrLen = squaredLength;\r\n\r\n/**\r\n * Normalize a quat\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a quaternion to normalize\r\n * @returns {quat} out\r\n * @function\r\n */\r\nvar normalize = _vec4_js__WEBPACK_IMPORTED_MODULE_3__["normalize"];\r\n\r\n/**\r\n * Returns whether or not the quaternions have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {quat} a The first quaternion.\r\n * @param {quat} b The second quaternion.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\r\nvar exactEquals = _vec4_js__WEBPACK_IMPORTED_MODULE_3__["exactEquals"];\r\n\r\n/**\r\n * Returns whether or not the quaternions have approximately the same elements in the same position.\r\n *\r\n * @param {quat} a The first vector.\r\n * @param {quat} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\r\nvar equals = _vec4_js__WEBPACK_IMPORTED_MODULE_3__["equals"];\r\n\r\n/**\r\n * Sets a quaternion to represent the shortest rotation from one\r\n * vector to another.\r\n *\r\n * Both vectors are assumed to be unit length.\r\n *\r\n * @param {quat} out the receiving quaternion.\r\n * @param {vec3} a the initial vector\r\n * @param {vec3} b the destination vector\r\n * @returns {quat} out\r\n */\r\nvar rotationTo = function () {\r\n  var tmpvec3 = _vec3_js__WEBPACK_IMPORTED_MODULE_2__["create"]();\r\n  var xUnitVec3 = _vec3_js__WEBPACK_IMPORTED_MODULE_2__["fromValues"](1, 0, 0);\r\n  var yUnitVec3 = _vec3_js__WEBPACK_IMPORTED_MODULE_2__["fromValues"](0, 1, 0);\r\n\r\n  return function (out, a, b) {\r\n    var dot = _vec3_js__WEBPACK_IMPORTED_MODULE_2__["dot"](a, b);\r\n    if (dot < -0.999999) {\r\n      _vec3_js__WEBPACK_IMPORTED_MODULE_2__["cross"](tmpvec3, xUnitVec3, a);\r\n      if (_vec3_js__WEBPACK_IMPORTED_MODULE_2__["len"](tmpvec3) < 0.000001) _vec3_js__WEBPACK_IMPORTED_MODULE_2__["cross"](tmpvec3, yUnitVec3, a);\r\n      _vec3_js__WEBPACK_IMPORTED_MODULE_2__["normalize"](tmpvec3, tmpvec3);\r\n      setAxisAngle(out, tmpvec3, Math.PI);\r\n      return out;\r\n    } else if (dot > 0.999999) {\r\n      out[0] = 0;\r\n      out[1] = 0;\r\n      out[2] = 0;\r\n      out[3] = 1;\r\n      return out;\r\n    } else {\r\n      _vec3_js__WEBPACK_IMPORTED_MODULE_2__["cross"](tmpvec3, a, b);\r\n      out[0] = tmpvec3[0];\r\n      out[1] = tmpvec3[1];\r\n      out[2] = tmpvec3[2];\r\n      out[3] = 1 + dot;\r\n      return normalize(out, out);\r\n    }\r\n  };\r\n}();\r\n\r\n/**\r\n * Performs a spherical linear interpolation with two control points\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @param {quat} c the third operand\r\n * @param {quat} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat} out\r\n */\r\nvar sqlerp = function () {\r\n  var temp1 = create();\r\n  var temp2 = create();\r\n\r\n  return function (out, a, b, c, d, t) {\r\n    slerp(temp1, a, d, t);\r\n    slerp(temp2, b, c, t);\r\n    slerp(out, temp1, temp2, 2 * t * (1 - t));\r\n\r\n    return out;\r\n  };\r\n}();\r\n\r\n/**\r\n * Sets the specified quaternion with values corresponding to the given\r\n * axes. Each axis is a vec3 and is expected to be unit length and\r\n * perpendicular to all other specified axes.\r\n *\r\n * @param {vec3} view  the vector representing the viewing direction\r\n * @param {vec3} right the vector representing the local "right" direction\r\n * @param {vec3} up    the vector representing the local "up" direction\r\n * @returns {quat} out\r\n */\r\nvar setAxes = function () {\r\n  var matr = _mat3_js__WEBPACK_IMPORTED_MODULE_1__["create"]();\r\n\r\n  return function (out, view, right, up) {\r\n    matr[0] = right[0];\r\n    matr[3] = right[1];\r\n    matr[6] = right[2];\r\n\r\n    matr[1] = up[0];\r\n    matr[4] = up[1];\r\n    matr[7] = up[2];\r\n\r\n    matr[2] = -view[0];\r\n    matr[5] = -view[1];\r\n    matr[8] = -view[2];\r\n\r\n    return normalize(out, fromMat3(out, matr));\r\n  };\r\n}();\n\n/***/ }),\n\n/***/ "./node_modules/gl-matrix/lib/gl-matrix/quat2.js":\n/*!*******************************************************!*\\\n  !*** ./node_modules/gl-matrix/lib/gl-matrix/quat2.js ***!\n  \\*******************************************************/\n/*! exports provided: create, clone, fromValues, fromRotationTranslationValues, fromRotationTranslation, fromTranslation, fromRotation, fromMat4, copy, identity, set, getReal, getDual, setReal, setDual, getTranslation, translate, rotateX, rotateY, rotateZ, rotateByQuatAppend, rotateByQuatPrepend, rotateAroundAxis, add, multiply, mul, scale, dot, lerp, invert, conjugate, length, len, squaredLength, sqrLen, normalize, str, exactEquals, equals */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "create", function() { return create; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "clone", function() { return clone; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fromValues", function() { return fromValues; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fromRotationTranslationValues", function() { return fromRotationTranslationValues; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fromRotationTranslation", function() { return fromRotationTranslation; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fromTranslation", function() { return fromTranslation; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fromRotation", function() { return fromRotation; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fromMat4", function() { return fromMat4; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "copy", function() { return copy; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "identity", function() { return identity; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "set", function() { return set; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getReal", function() { return getReal; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getDual", function() { return getDual; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setReal", function() { return setReal; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setDual", function() { return setDual; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getTranslation", function() { return getTranslation; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "translate", function() { return translate; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rotateX", function() { return rotateX; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rotateY", function() { return rotateY; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rotateZ", function() { return rotateZ; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rotateByQuatAppend", function() { return rotateByQuatAppend; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rotateByQuatPrepend", function() { return rotateByQuatPrepend; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rotateAroundAxis", function() { return rotateAroundAxis; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "add", function() { return add; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "multiply", function() { return multiply; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mul", function() { return mul; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scale", function() { return scale; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "dot", function() { return dot; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "lerp", function() { return lerp; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "invert", function() { return invert; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "conjugate", function() { return conjugate; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "length", function() { return length; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "len", function() { return len; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "squaredLength", function() { return squaredLength; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sqrLen", function() { return sqrLen; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "normalize", function() { return normalize; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "str", function() { return str; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "exactEquals", function() { return exactEquals; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "equals", function() { return equals; });\n/* harmony import */ var _common_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./common.js */ "./node_modules/gl-matrix/lib/gl-matrix/common.js");\n/* harmony import */ var _quat_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./quat.js */ "./node_modules/gl-matrix/lib/gl-matrix/quat.js");\n/* harmony import */ var _mat4_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./mat4.js */ "./node_modules/gl-matrix/lib/gl-matrix/mat4.js");\n\r\n\r\n\r\n\r\n/**\r\n * Dual Quaternion<br>\r\n * Format: [real, dual]<br>\r\n * Quaternion format: XYZW<br>\r\n * Make sure to have normalized dual quaternions, otherwise the functions may not work as intended.<br>\r\n * @module quat2\r\n */\r\n\r\n/**\r\n * Creates a new identity dual quat\r\n *\r\n * @returns {quat2} a new dual quaternion [real -> rotation, dual -> translation]\r\n */\r\nfunction create() {\r\n  var dq = new _common_js__WEBPACK_IMPORTED_MODULE_0__["ARRAY_TYPE"](8);\r\n  if (_common_js__WEBPACK_IMPORTED_MODULE_0__["ARRAY_TYPE"] != Float32Array) {\r\n    dq[0] = 0;\r\n    dq[1] = 0;\r\n    dq[2] = 0;\r\n    dq[4] = 0;\r\n    dq[5] = 0;\r\n    dq[6] = 0;\r\n    dq[7] = 0;\r\n  }\r\n  dq[3] = 1;\r\n  return dq;\r\n}\r\n\r\n/**\r\n * Creates a new quat initialized with values from an existing quaternion\r\n *\r\n * @param {quat2} a dual quaternion to clone\r\n * @returns {quat2} new dual quaternion\r\n * @function\r\n */\r\nfunction clone(a) {\r\n  var dq = new _common_js__WEBPACK_IMPORTED_MODULE_0__["ARRAY_TYPE"](8);\r\n  dq[0] = a[0];\r\n  dq[1] = a[1];\r\n  dq[2] = a[2];\r\n  dq[3] = a[3];\r\n  dq[4] = a[4];\r\n  dq[5] = a[5];\r\n  dq[6] = a[6];\r\n  dq[7] = a[7];\r\n  return dq;\r\n}\r\n\r\n/**\r\n * Creates a new dual quat initialized with the given values\r\n *\r\n * @param {Number} x1 X component\r\n * @param {Number} y1 Y component\r\n * @param {Number} z1 Z component\r\n * @param {Number} w1 W component\r\n * @param {Number} x2 X component\r\n * @param {Number} y2 Y component\r\n * @param {Number} z2 Z component\r\n * @param {Number} w2 W component\r\n * @returns {quat2} new dual quaternion\r\n * @function\r\n */\r\nfunction fromValues(x1, y1, z1, w1, x2, y2, z2, w2) {\r\n  var dq = new _common_js__WEBPACK_IMPORTED_MODULE_0__["ARRAY_TYPE"](8);\r\n  dq[0] = x1;\r\n  dq[1] = y1;\r\n  dq[2] = z1;\r\n  dq[3] = w1;\r\n  dq[4] = x2;\r\n  dq[5] = y2;\r\n  dq[6] = z2;\r\n  dq[7] = w2;\r\n  return dq;\r\n}\r\n\r\n/**\r\n * Creates a new dual quat from the given values (quat and translation)\r\n *\r\n * @param {Number} x1 X component\r\n * @param {Number} y1 Y component\r\n * @param {Number} z1 Z component\r\n * @param {Number} w1 W component\r\n * @param {Number} x2 X component (translation)\r\n * @param {Number} y2 Y component (translation)\r\n * @param {Number} z2 Z component (translation)\r\n * @returns {quat2} new dual quaternion\r\n * @function\r\n */\r\nfunction fromRotationTranslationValues(x1, y1, z1, w1, x2, y2, z2) {\r\n  var dq = new _common_js__WEBPACK_IMPORTED_MODULE_0__["ARRAY_TYPE"](8);\r\n  dq[0] = x1;\r\n  dq[1] = y1;\r\n  dq[2] = z1;\r\n  dq[3] = w1;\r\n  var ax = x2 * 0.5,\r\n      ay = y2 * 0.5,\r\n      az = z2 * 0.5;\r\n  dq[4] = ax * w1 + ay * z1 - az * y1;\r\n  dq[5] = ay * w1 + az * x1 - ax * z1;\r\n  dq[6] = az * w1 + ax * y1 - ay * x1;\r\n  dq[7] = -ax * x1 - ay * y1 - az * z1;\r\n  return dq;\r\n}\r\n\r\n/**\r\n * Creates a dual quat from a quaternion and a translation\r\n *\r\n * @param {quat2} dual quaternion receiving operation result\r\n * @param {quat} q quaternion\r\n * @param {vec3} t tranlation vector\r\n * @returns {quat2} dual quaternion receiving operation result\r\n * @function\r\n */\r\nfunction fromRotationTranslation(out, q, t) {\r\n  var ax = t[0] * 0.5,\r\n      ay = t[1] * 0.5,\r\n      az = t[2] * 0.5,\r\n      bx = q[0],\r\n      by = q[1],\r\n      bz = q[2],\r\n      bw = q[3];\r\n  out[0] = bx;\r\n  out[1] = by;\r\n  out[2] = bz;\r\n  out[3] = bw;\r\n  out[4] = ax * bw + ay * bz - az * by;\r\n  out[5] = ay * bw + az * bx - ax * bz;\r\n  out[6] = az * bw + ax * by - ay * bx;\r\n  out[7] = -ax * bx - ay * by - az * bz;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a dual quat from a translation\r\n *\r\n * @param {quat2} dual quaternion receiving operation result\r\n * @param {vec3} t translation vector\r\n * @returns {quat2} dual quaternion receiving operation result\r\n * @function\r\n */\r\nfunction fromTranslation(out, t) {\r\n  out[0] = 0;\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n  out[3] = 1;\r\n  out[4] = t[0] * 0.5;\r\n  out[5] = t[1] * 0.5;\r\n  out[6] = t[2] * 0.5;\r\n  out[7] = 0;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a dual quat from a quaternion\r\n *\r\n * @param {quat2} dual quaternion receiving operation result\r\n * @param {quat} q the quaternion\r\n * @returns {quat2} dual quaternion receiving operation result\r\n * @function\r\n */\r\nfunction fromRotation(out, q) {\r\n  out[0] = q[0];\r\n  out[1] = q[1];\r\n  out[2] = q[2];\r\n  out[3] = q[3];\r\n  out[4] = 0;\r\n  out[5] = 0;\r\n  out[6] = 0;\r\n  out[7] = 0;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a new dual quat from a matrix (4x4)\r\n *\r\n * @param {quat2} out the dual quaternion\r\n * @param {mat4} a the matrix\r\n * @returns {quat2} dual quat receiving operation result\r\n * @function\r\n */\r\nfunction fromMat4(out, a) {\r\n  //TODO Optimize this\r\n  var outer = _quat_js__WEBPACK_IMPORTED_MODULE_1__["create"]();\r\n  _mat4_js__WEBPACK_IMPORTED_MODULE_2__["getRotation"](outer, a);\r\n  var t = new _common_js__WEBPACK_IMPORTED_MODULE_0__["ARRAY_TYPE"](3);\r\n  _mat4_js__WEBPACK_IMPORTED_MODULE_2__["getTranslation"](t, a);\r\n  fromRotationTranslation(out, outer, t);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Copy the values from one dual quat to another\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {quat2} a the source dual quaternion\r\n * @returns {quat2} out\r\n * @function\r\n */\r\nfunction copy(out, a) {\r\n  out[0] = a[0];\r\n  out[1] = a[1];\r\n  out[2] = a[2];\r\n  out[3] = a[3];\r\n  out[4] = a[4];\r\n  out[5] = a[5];\r\n  out[6] = a[6];\r\n  out[7] = a[7];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Set a dual quat to the identity dual quaternion\r\n *\r\n * @param {quat2} out the receiving quaternion\r\n * @returns {quat2} out\r\n */\r\nfunction identity(out) {\r\n  out[0] = 0;\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n  out[3] = 1;\r\n  out[4] = 0;\r\n  out[5] = 0;\r\n  out[6] = 0;\r\n  out[7] = 0;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Set the components of a dual quat to the given values\r\n *\r\n * @param {quat2} out the receiving quaternion\r\n * @param {Number} x1 X component\r\n * @param {Number} y1 Y component\r\n * @param {Number} z1 Z component\r\n * @param {Number} w1 W component\r\n * @param {Number} x2 X component\r\n * @param {Number} y2 Y component\r\n * @param {Number} z2 Z component\r\n * @param {Number} w2 W component\r\n * @returns {quat2} out\r\n * @function\r\n */\r\nfunction set(out, x1, y1, z1, w1, x2, y2, z2, w2) {\r\n  out[0] = x1;\r\n  out[1] = y1;\r\n  out[2] = z1;\r\n  out[3] = w1;\r\n\r\n  out[4] = x2;\r\n  out[5] = y2;\r\n  out[6] = z2;\r\n  out[7] = w2;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Gets the real part of a dual quat\r\n * @param  {quat} out real part\r\n * @param  {quat2} a Dual Quaternion\r\n * @return {quat} real part\r\n */\r\nvar getReal = _quat_js__WEBPACK_IMPORTED_MODULE_1__["copy"];\r\n\r\n/**\r\n * Gets the dual part of a dual quat\r\n * @param  {quat} out dual part\r\n * @param  {quat2} a Dual Quaternion\r\n * @return {quat} dual part\r\n */\r\nfunction getDual(out, a) {\r\n  out[0] = a[4];\r\n  out[1] = a[5];\r\n  out[2] = a[6];\r\n  out[3] = a[7];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Set the real component of a dual quat to the given quaternion\r\n *\r\n * @param {quat2} out the receiving quaternion\r\n * @param {quat} q a quaternion representing the real part\r\n * @returns {quat2} out\r\n * @function\r\n */\r\nvar setReal = _quat_js__WEBPACK_IMPORTED_MODULE_1__["copy"];\r\n\r\n/**\r\n * Set the dual component of a dual quat to the given quaternion\r\n *\r\n * @param {quat2} out the receiving quaternion\r\n * @param {quat} q a quaternion representing the dual part\r\n * @returns {quat2} out\r\n * @function\r\n */\r\nfunction setDual(out, q) {\r\n  out[4] = q[0];\r\n  out[5] = q[1];\r\n  out[6] = q[2];\r\n  out[7] = q[3];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Gets the translation of a normalized dual quat\r\n * @param  {vec3} out translation\r\n * @param  {quat2} a Dual Quaternion to be decomposed\r\n * @return {vec3} translation\r\n */\r\nfunction getTranslation(out, a) {\r\n  var ax = a[4],\r\n      ay = a[5],\r\n      az = a[6],\r\n      aw = a[7],\r\n      bx = -a[0],\r\n      by = -a[1],\r\n      bz = -a[2],\r\n      bw = a[3];\r\n  out[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\r\n  out[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\r\n  out[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Translates a dual quat by the given vector\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {quat2} a the dual quaternion to translate\r\n * @param {vec3} v vector to translate by\r\n * @returns {quat2} out\r\n */\r\nfunction translate(out, a, v) {\r\n  var ax1 = a[0],\r\n      ay1 = a[1],\r\n      az1 = a[2],\r\n      aw1 = a[3],\r\n      bx1 = v[0] * 0.5,\r\n      by1 = v[1] * 0.5,\r\n      bz1 = v[2] * 0.5,\r\n      ax2 = a[4],\r\n      ay2 = a[5],\r\n      az2 = a[6],\r\n      aw2 = a[7];\r\n  out[0] = ax1;\r\n  out[1] = ay1;\r\n  out[2] = az1;\r\n  out[3] = aw1;\r\n  out[4] = aw1 * bx1 + ay1 * bz1 - az1 * by1 + ax2;\r\n  out[5] = aw1 * by1 + az1 * bx1 - ax1 * bz1 + ay2;\r\n  out[6] = aw1 * bz1 + ax1 * by1 - ay1 * bx1 + az2;\r\n  out[7] = -ax1 * bx1 - ay1 * by1 - az1 * bz1 + aw2;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotates a dual quat around the X axis\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {quat2} a the dual quaternion to rotate\r\n * @param {number} rad how far should the rotation be\r\n * @returns {quat2} out\r\n */\r\nfunction rotateX(out, a, rad) {\r\n  var bx = -a[0],\r\n      by = -a[1],\r\n      bz = -a[2],\r\n      bw = a[3],\r\n      ax = a[4],\r\n      ay = a[5],\r\n      az = a[6],\r\n      aw = a[7],\r\n      ax1 = ax * bw + aw * bx + ay * bz - az * by,\r\n      ay1 = ay * bw + aw * by + az * bx - ax * bz,\r\n      az1 = az * bw + aw * bz + ax * by - ay * bx,\r\n      aw1 = aw * bw - ax * bx - ay * by - az * bz;\r\n  _quat_js__WEBPACK_IMPORTED_MODULE_1__["rotateX"](out, a, rad);\r\n  bx = out[0];\r\n  by = out[1];\r\n  bz = out[2];\r\n  bw = out[3];\r\n  out[4] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;\r\n  out[5] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;\r\n  out[6] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;\r\n  out[7] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotates a dual quat around the Y axis\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {quat2} a the dual quaternion to rotate\r\n * @param {number} rad how far should the rotation be\r\n * @returns {quat2} out\r\n */\r\nfunction rotateY(out, a, rad) {\r\n  var bx = -a[0],\r\n      by = -a[1],\r\n      bz = -a[2],\r\n      bw = a[3],\r\n      ax = a[4],\r\n      ay = a[5],\r\n      az = a[6],\r\n      aw = a[7],\r\n      ax1 = ax * bw + aw * bx + ay * bz - az * by,\r\n      ay1 = ay * bw + aw * by + az * bx - ax * bz,\r\n      az1 = az * bw + aw * bz + ax * by - ay * bx,\r\n      aw1 = aw * bw - ax * bx - ay * by - az * bz;\r\n  _quat_js__WEBPACK_IMPORTED_MODULE_1__["rotateY"](out, a, rad);\r\n  bx = out[0];\r\n  by = out[1];\r\n  bz = out[2];\r\n  bw = out[3];\r\n  out[4] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;\r\n  out[5] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;\r\n  out[6] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;\r\n  out[7] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotates a dual quat around the Z axis\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {quat2} a the dual quaternion to rotate\r\n * @param {number} rad how far should the rotation be\r\n * @returns {quat2} out\r\n */\r\nfunction rotateZ(out, a, rad) {\r\n  var bx = -a[0],\r\n      by = -a[1],\r\n      bz = -a[2],\r\n      bw = a[3],\r\n      ax = a[4],\r\n      ay = a[5],\r\n      az = a[6],\r\n      aw = a[7],\r\n      ax1 = ax * bw + aw * bx + ay * bz - az * by,\r\n      ay1 = ay * bw + aw * by + az * bx - ax * bz,\r\n      az1 = az * bw + aw * bz + ax * by - ay * bx,\r\n      aw1 = aw * bw - ax * bx - ay * by - az * bz;\r\n  _quat_js__WEBPACK_IMPORTED_MODULE_1__["rotateZ"](out, a, rad);\r\n  bx = out[0];\r\n  by = out[1];\r\n  bz = out[2];\r\n  bw = out[3];\r\n  out[4] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;\r\n  out[5] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;\r\n  out[6] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;\r\n  out[7] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotates a dual quat by a given quaternion (a * q)\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {quat2} a the dual quaternion to rotate\r\n * @param {quat} q quaternion to rotate by\r\n * @returns {quat2} out\r\n */\r\nfunction rotateByQuatAppend(out, a, q) {\r\n  var qx = q[0],\r\n      qy = q[1],\r\n      qz = q[2],\r\n      qw = q[3],\r\n      ax = a[0],\r\n      ay = a[1],\r\n      az = a[2],\r\n      aw = a[3];\r\n\r\n  out[0] = ax * qw + aw * qx + ay * qz - az * qy;\r\n  out[1] = ay * qw + aw * qy + az * qx - ax * qz;\r\n  out[2] = az * qw + aw * qz + ax * qy - ay * qx;\r\n  out[3] = aw * qw - ax * qx - ay * qy - az * qz;\r\n  ax = a[4];\r\n  ay = a[5];\r\n  az = a[6];\r\n  aw = a[7];\r\n  out[4] = ax * qw + aw * qx + ay * qz - az * qy;\r\n  out[5] = ay * qw + aw * qy + az * qx - ax * qz;\r\n  out[6] = az * qw + aw * qz + ax * qy - ay * qx;\r\n  out[7] = aw * qw - ax * qx - ay * qy - az * qz;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotates a dual quat by a given quaternion (q * a)\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {quat} q quaternion to rotate by\r\n * @param {quat2} a the dual quaternion to rotate\r\n * @returns {quat2} out\r\n */\r\nfunction rotateByQuatPrepend(out, q, a) {\r\n  var qx = q[0],\r\n      qy = q[1],\r\n      qz = q[2],\r\n      qw = q[3],\r\n      bx = a[0],\r\n      by = a[1],\r\n      bz = a[2],\r\n      bw = a[3];\r\n\r\n  out[0] = qx * bw + qw * bx + qy * bz - qz * by;\r\n  out[1] = qy * bw + qw * by + qz * bx - qx * bz;\r\n  out[2] = qz * bw + qw * bz + qx * by - qy * bx;\r\n  out[3] = qw * bw - qx * bx - qy * by - qz * bz;\r\n  bx = a[4];\r\n  by = a[5];\r\n  bz = a[6];\r\n  bw = a[7];\r\n  out[4] = qx * bw + qw * bx + qy * bz - qz * by;\r\n  out[5] = qy * bw + qw * by + qz * bx - qx * bz;\r\n  out[6] = qz * bw + qw * bz + qx * by - qy * bx;\r\n  out[7] = qw * bw - qx * bx - qy * by - qz * bz;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotates a dual quat around a given axis. Does the normalisation automatically\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {quat2} a the dual quaternion to rotate\r\n * @param {vec3} axis the axis to rotate around\r\n * @param {Number} rad how far the rotation should be\r\n * @returns {quat2} out\r\n */\r\nfunction rotateAroundAxis(out, a, axis, rad) {\r\n  //Special case for rad = 0\r\n  if (Math.abs(rad) < _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"]) {\r\n    return copy(out, a);\r\n  }\r\n  var axisLength = Math.sqrt(axis[0] * axis[0] + axis[1] * axis[1] + axis[2] * axis[2]);\r\n\r\n  rad = rad * 0.5;\r\n  var s = Math.sin(rad);\r\n  var bx = s * axis[0] / axisLength;\r\n  var by = s * axis[1] / axisLength;\r\n  var bz = s * axis[2] / axisLength;\r\n  var bw = Math.cos(rad);\r\n\r\n  var ax1 = a[0],\r\n      ay1 = a[1],\r\n      az1 = a[2],\r\n      aw1 = a[3];\r\n  out[0] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;\r\n  out[1] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;\r\n  out[2] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;\r\n  out[3] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;\r\n\r\n  var ax = a[4],\r\n      ay = a[5],\r\n      az = a[6],\r\n      aw = a[7];\r\n  out[4] = ax * bw + aw * bx + ay * bz - az * by;\r\n  out[5] = ay * bw + aw * by + az * bx - ax * bz;\r\n  out[6] = az * bw + aw * bz + ax * by - ay * bx;\r\n  out[7] = aw * bw - ax * bx - ay * by - az * bz;\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Adds two dual quat\'s\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {quat2} a the first operand\r\n * @param {quat2} b the second operand\r\n * @returns {quat2} out\r\n * @function\r\n */\r\nfunction add(out, a, b) {\r\n  out[0] = a[0] + b[0];\r\n  out[1] = a[1] + b[1];\r\n  out[2] = a[2] + b[2];\r\n  out[3] = a[3] + b[3];\r\n  out[4] = a[4] + b[4];\r\n  out[5] = a[5] + b[5];\r\n  out[6] = a[6] + b[6];\r\n  out[7] = a[7] + b[7];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Multiplies two dual quat\'s\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {quat2} a the first operand\r\n * @param {quat2} b the second operand\r\n * @returns {quat2} out\r\n */\r\nfunction multiply(out, a, b) {\r\n  var ax0 = a[0],\r\n      ay0 = a[1],\r\n      az0 = a[2],\r\n      aw0 = a[3],\r\n      bx1 = b[4],\r\n      by1 = b[5],\r\n      bz1 = b[6],\r\n      bw1 = b[7],\r\n      ax1 = a[4],\r\n      ay1 = a[5],\r\n      az1 = a[6],\r\n      aw1 = a[7],\r\n      bx0 = b[0],\r\n      by0 = b[1],\r\n      bz0 = b[2],\r\n      bw0 = b[3];\r\n  out[0] = ax0 * bw0 + aw0 * bx0 + ay0 * bz0 - az0 * by0;\r\n  out[1] = ay0 * bw0 + aw0 * by0 + az0 * bx0 - ax0 * bz0;\r\n  out[2] = az0 * bw0 + aw0 * bz0 + ax0 * by0 - ay0 * bx0;\r\n  out[3] = aw0 * bw0 - ax0 * bx0 - ay0 * by0 - az0 * bz0;\r\n  out[4] = ax0 * bw1 + aw0 * bx1 + ay0 * bz1 - az0 * by1 + ax1 * bw0 + aw1 * bx0 + ay1 * bz0 - az1 * by0;\r\n  out[5] = ay0 * bw1 + aw0 * by1 + az0 * bx1 - ax0 * bz1 + ay1 * bw0 + aw1 * by0 + az1 * bx0 - ax1 * bz0;\r\n  out[6] = az0 * bw1 + aw0 * bz1 + ax0 * by1 - ay0 * bx1 + az1 * bw0 + aw1 * bz0 + ax1 * by0 - ay1 * bx0;\r\n  out[7] = aw0 * bw1 - ax0 * bx1 - ay0 * by1 - az0 * bz1 + aw1 * bw0 - ax1 * bx0 - ay1 * by0 - az1 * bz0;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Alias for {@link quat2.multiply}\r\n * @function\r\n */\r\nvar mul = multiply;\r\n\r\n/**\r\n * Scales a dual quat by a scalar number\r\n *\r\n * @param {quat2} out the receiving dual quat\r\n * @param {quat2} a the dual quat to scale\r\n * @param {Number} b amount to scale the dual quat by\r\n * @returns {quat2} out\r\n * @function\r\n */\r\nfunction scale(out, a, b) {\r\n  out[0] = a[0] * b;\r\n  out[1] = a[1] * b;\r\n  out[2] = a[2] * b;\r\n  out[3] = a[3] * b;\r\n  out[4] = a[4] * b;\r\n  out[5] = a[5] * b;\r\n  out[6] = a[6] * b;\r\n  out[7] = a[7] * b;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the dot product of two dual quat\'s (The dot product of the real parts)\r\n *\r\n * @param {quat2} a the first operand\r\n * @param {quat2} b the second operand\r\n * @returns {Number} dot product of a and b\r\n * @function\r\n */\r\nvar dot = _quat_js__WEBPACK_IMPORTED_MODULE_1__["dot"];\r\n\r\n/**\r\n * Performs a linear interpolation between two dual quats\'s\r\n * NOTE: The resulting dual quaternions won\'t always be normalized (The error is most noticeable when t = 0.5)\r\n *\r\n * @param {quat2} out the receiving dual quat\r\n * @param {quat2} a the first operand\r\n * @param {quat2} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat2} out\r\n */\r\nfunction lerp(out, a, b, t) {\r\n  var mt = 1 - t;\r\n  if (dot(a, b) < 0) t = -t;\r\n\r\n  out[0] = a[0] * mt + b[0] * t;\r\n  out[1] = a[1] * mt + b[1] * t;\r\n  out[2] = a[2] * mt + b[2] * t;\r\n  out[3] = a[3] * mt + b[3] * t;\r\n  out[4] = a[4] * mt + b[4] * t;\r\n  out[5] = a[5] * mt + b[5] * t;\r\n  out[6] = a[6] * mt + b[6] * t;\r\n  out[7] = a[7] * mt + b[7] * t;\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the inverse of a dual quat. If they are normalized, conjugate is cheaper\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {quat2} a dual quat to calculate inverse of\r\n * @returns {quat2} out\r\n */\r\nfunction invert(out, a) {\r\n  var sqlen = squaredLength(a);\r\n  out[0] = -a[0] / sqlen;\r\n  out[1] = -a[1] / sqlen;\r\n  out[2] = -a[2] / sqlen;\r\n  out[3] = a[3] / sqlen;\r\n  out[4] = -a[4] / sqlen;\r\n  out[5] = -a[5] / sqlen;\r\n  out[6] = -a[6] / sqlen;\r\n  out[7] = a[7] / sqlen;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the conjugate of a dual quat\r\n * If the dual quaternion is normalized, this function is faster than quat2.inverse and produces the same result.\r\n *\r\n * @param {quat2} out the receiving quaternion\r\n * @param {quat2} a quat to calculate conjugate of\r\n * @returns {quat2} out\r\n */\r\nfunction conjugate(out, a) {\r\n  out[0] = -a[0];\r\n  out[1] = -a[1];\r\n  out[2] = -a[2];\r\n  out[3] = a[3];\r\n  out[4] = -a[4];\r\n  out[5] = -a[5];\r\n  out[6] = -a[6];\r\n  out[7] = a[7];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the length of a dual quat\r\n *\r\n * @param {quat2} a dual quat to calculate length of\r\n * @returns {Number} length of a\r\n * @function\r\n */\r\nvar length = _quat_js__WEBPACK_IMPORTED_MODULE_1__["length"];\r\n\r\n/**\r\n * Alias for {@link quat2.length}\r\n * @function\r\n */\r\nvar len = length;\r\n\r\n/**\r\n * Calculates the squared length of a dual quat\r\n *\r\n * @param {quat2} a dual quat to calculate squared length of\r\n * @returns {Number} squared length of a\r\n * @function\r\n */\r\nvar squaredLength = _quat_js__WEBPACK_IMPORTED_MODULE_1__["squaredLength"];\r\n\r\n/**\r\n * Alias for {@link quat2.squaredLength}\r\n * @function\r\n */\r\nvar sqrLen = squaredLength;\r\n\r\n/**\r\n * Normalize a dual quat\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {quat2} a dual quaternion to normalize\r\n * @returns {quat2} out\r\n * @function\r\n */\r\nfunction normalize(out, a) {\r\n  var magnitude = squaredLength(a);\r\n  if (magnitude > 0) {\r\n    magnitude = Math.sqrt(magnitude);\r\n\r\n    var a0 = a[0] / magnitude;\r\n    var a1 = a[1] / magnitude;\r\n    var a2 = a[2] / magnitude;\r\n    var a3 = a[3] / magnitude;\r\n\r\n    var b0 = a[4];\r\n    var b1 = a[5];\r\n    var b2 = a[6];\r\n    var b3 = a[7];\r\n\r\n    var a_dot_b = a0 * b0 + a1 * b1 + a2 * b2 + a3 * b3;\r\n\r\n    out[0] = a0;\r\n    out[1] = a1;\r\n    out[2] = a2;\r\n    out[3] = a3;\r\n\r\n    out[4] = (b0 - a0 * a_dot_b) / magnitude;\r\n    out[5] = (b1 - a1 * a_dot_b) / magnitude;\r\n    out[6] = (b2 - a2 * a_dot_b) / magnitude;\r\n    out[7] = (b3 - a3 * a_dot_b) / magnitude;\r\n  }\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns a string representation of a dual quatenion\r\n *\r\n * @param {quat2} a dual quaternion to represent as a string\r\n * @returns {String} string representation of the dual quat\r\n */\r\nfunction str(a) {\r\n  return \'quat2(\' + a[0] + \', \' + a[1] + \', \' + a[2] + \', \' + a[3] + \', \' + a[4] + \', \' + a[5] + \', \' + a[6] + \', \' + a[7] + \')\';\r\n}\r\n\r\n/**\r\n * Returns whether or not the dual quaternions have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {quat2} a the first dual quaternion.\r\n * @param {quat2} b the second dual quaternion.\r\n * @returns {Boolean} true if the dual quaternions are equal, false otherwise.\r\n */\r\nfunction exactEquals(a, b) {\r\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7];\r\n}\r\n\r\n/**\r\n * Returns whether or not the dual quaternions have approximately the same elements in the same position.\r\n *\r\n * @param {quat2} a the first dual quat.\r\n * @param {quat2} b the second dual quat.\r\n * @returns {Boolean} true if the dual quats are equal, false otherwise.\r\n */\r\nfunction equals(a, b) {\r\n  var a0 = a[0],\r\n      a1 = a[1],\r\n      a2 = a[2],\r\n      a3 = a[3],\r\n      a4 = a[4],\r\n      a5 = a[5],\r\n      a6 = a[6],\r\n      a7 = a[7];\r\n  var b0 = b[0],\r\n      b1 = b[1],\r\n      b2 = b[2],\r\n      b3 = b[3],\r\n      b4 = b[4],\r\n      b5 = b[5],\r\n      b6 = b[6],\r\n      b7 = b[7];\r\n  return Math.abs(a0 - b0) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a7), Math.abs(b7));\r\n}\n\n/***/ }),\n\n/***/ "./node_modules/gl-matrix/lib/gl-matrix/vec2.js":\n/*!******************************************************!*\\\n  !*** ./node_modules/gl-matrix/lib/gl-matrix/vec2.js ***!\n  \\******************************************************/\n/*! exports provided: create, clone, fromValues, copy, set, add, subtract, multiply, divide, ceil, floor, min, max, round, scale, scaleAndAdd, distance, squaredDistance, length, squaredLength, negate, inverse, normalize, dot, cross, lerp, random, transformMat2, transformMat2d, transformMat3, transformMat4, rotate, angle, str, exactEquals, equals, len, sub, mul, div, dist, sqrDist, sqrLen, forEach */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "create", function() { return create; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "clone", function() { return clone; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fromValues", function() { return fromValues; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "copy", function() { return copy; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "set", function() { return set; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "add", function() { return add; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "subtract", function() { return subtract; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "multiply", function() { return multiply; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "divide", function() { return divide; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ceil", function() { return ceil; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "floor", function() { return floor; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "min", function() { return min; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "max", function() { return max; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "round", function() { return round; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scale", function() { return scale; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scaleAndAdd", function() { return scaleAndAdd; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "distance", function() { return distance; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "squaredDistance", function() { return squaredDistance; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "length", function() { return length; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "squaredLength", function() { return squaredLength; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "negate", function() { return negate; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "inverse", function() { return inverse; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "normalize", function() { return normalize; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "dot", function() { return dot; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cross", function() { return cross; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "lerp", function() { return lerp; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "random", function() { return random; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "transformMat2", function() { return transformMat2; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "transformMat2d", function() { return transformMat2d; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "transformMat3", function() { return transformMat3; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "transformMat4", function() { return transformMat4; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rotate", function() { return rotate; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "angle", function() { return angle; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "str", function() { return str; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "exactEquals", function() { return exactEquals; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "equals", function() { return equals; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "len", function() { return len; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sub", function() { return sub; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mul", function() { return mul; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "div", function() { return div; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "dist", function() { return dist; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sqrDist", function() { return sqrDist; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sqrLen", function() { return sqrLen; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "forEach", function() { return forEach; });\n/* harmony import */ var _common_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./common.js */ "./node_modules/gl-matrix/lib/gl-matrix/common.js");\n\r\n\r\n/**\r\n * 2 Dimensional Vector\r\n * @module vec2\r\n */\r\n\r\n/**\r\n * Creates a new, empty vec2\r\n *\r\n * @returns {vec2} a new 2D vector\r\n */\r\nfunction create() {\r\n  var out = new _common_js__WEBPACK_IMPORTED_MODULE_0__["ARRAY_TYPE"](2);\r\n  if (_common_js__WEBPACK_IMPORTED_MODULE_0__["ARRAY_TYPE"] != Float32Array) {\r\n    out[0] = 0;\r\n    out[1] = 0;\r\n  }\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a new vec2 initialized with values from an existing vector\r\n *\r\n * @param {vec2} a vector to clone\r\n * @returns {vec2} a new 2D vector\r\n */\r\nfunction clone(a) {\r\n  var out = new _common_js__WEBPACK_IMPORTED_MODULE_0__["ARRAY_TYPE"](2);\r\n  out[0] = a[0];\r\n  out[1] = a[1];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a new vec2 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} a new 2D vector\r\n */\r\nfunction fromValues(x, y) {\r\n  var out = new _common_js__WEBPACK_IMPORTED_MODULE_0__["ARRAY_TYPE"](2);\r\n  out[0] = x;\r\n  out[1] = y;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Copy the values from one vec2 to another\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the source vector\r\n * @returns {vec2} out\r\n */\r\nfunction copy(out, a) {\r\n  out[0] = a[0];\r\n  out[1] = a[1];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Set the components of a vec2 to the given values\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} out\r\n */\r\nfunction set(out, x, y) {\r\n  out[0] = x;\r\n  out[1] = y;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Adds two vec2\'s\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\r\nfunction add(out, a, b) {\r\n  out[0] = a[0] + b[0];\r\n  out[1] = a[1] + b[1];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\r\nfunction subtract(out, a, b) {\r\n  out[0] = a[0] - b[0];\r\n  out[1] = a[1] - b[1];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Multiplies two vec2\'s\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\r\nfunction multiply(out, a, b) {\r\n  out[0] = a[0] * b[0];\r\n  out[1] = a[1] * b[1];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Divides two vec2\'s\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\r\nfunction divide(out, a, b) {\r\n  out[0] = a[0] / b[0];\r\n  out[1] = a[1] / b[1];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Math.ceil the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to ceil\r\n * @returns {vec2} out\r\n */\r\nfunction ceil(out, a) {\r\n  out[0] = Math.ceil(a[0]);\r\n  out[1] = Math.ceil(a[1]);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Math.floor the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to floor\r\n * @returns {vec2} out\r\n */\r\nfunction floor(out, a) {\r\n  out[0] = Math.floor(a[0]);\r\n  out[1] = Math.floor(a[1]);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns the minimum of two vec2\'s\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\r\nfunction min(out, a, b) {\r\n  out[0] = Math.min(a[0], b[0]);\r\n  out[1] = Math.min(a[1], b[1]);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns the maximum of two vec2\'s\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\r\nfunction max(out, a, b) {\r\n  out[0] = Math.max(a[0], b[0]);\r\n  out[1] = Math.max(a[1], b[1]);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Math.round the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to round\r\n * @returns {vec2} out\r\n */\r\nfunction round(out, a) {\r\n  out[0] = Math.round(a[0]);\r\n  out[1] = Math.round(a[1]);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Scales a vec2 by a scalar number\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec2} out\r\n */\r\nfunction scale(out, a, b) {\r\n  out[0] = a[0] * b;\r\n  out[1] = a[1] * b;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Adds two vec2\'s after scaling the second operand by a scalar value\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec2} out\r\n */\r\nfunction scaleAndAdd(out, a, b, scale) {\r\n  out[0] = a[0] + b[0] * scale;\r\n  out[1] = a[1] + b[1] * scale;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the euclidian distance between two vec2\'s\r\n *\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\r\nfunction distance(a, b) {\r\n  var x = b[0] - a[0],\r\n      y = b[1] - a[1];\r\n  return Math.sqrt(x * x + y * y);\r\n}\r\n\r\n/**\r\n * Calculates the squared euclidian distance between two vec2\'s\r\n *\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\r\nfunction squaredDistance(a, b) {\r\n  var x = b[0] - a[0],\r\n      y = b[1] - a[1];\r\n  return x * x + y * y;\r\n}\r\n\r\n/**\r\n * Calculates the length of a vec2\r\n *\r\n * @param {vec2} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\r\nfunction length(a) {\r\n  var x = a[0],\r\n      y = a[1];\r\n  return Math.sqrt(x * x + y * y);\r\n}\r\n\r\n/**\r\n * Calculates the squared length of a vec2\r\n *\r\n * @param {vec2} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\r\nfunction squaredLength(a) {\r\n  var x = a[0],\r\n      y = a[1];\r\n  return x * x + y * y;\r\n}\r\n\r\n/**\r\n * Negates the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to negate\r\n * @returns {vec2} out\r\n */\r\nfunction negate(out, a) {\r\n  out[0] = -a[0];\r\n  out[1] = -a[1];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns the inverse of the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to invert\r\n * @returns {vec2} out\r\n */\r\nfunction inverse(out, a) {\r\n  out[0] = 1.0 / a[0];\r\n  out[1] = 1.0 / a[1];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Normalize a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to normalize\r\n * @returns {vec2} out\r\n */\r\nfunction normalize(out, a) {\r\n  var x = a[0],\r\n      y = a[1];\r\n  var len = x * x + y * y;\r\n  if (len > 0) {\r\n    //TODO: evaluate use of glm_invsqrt here?\r\n    len = 1 / Math.sqrt(len);\r\n    out[0] = a[0] * len;\r\n    out[1] = a[1] * len;\r\n  }\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the dot product of two vec2\'s\r\n *\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\r\nfunction dot(a, b) {\r\n  return a[0] * b[0] + a[1] * b[1];\r\n}\r\n\r\n/**\r\n * Computes the cross product of two vec2\'s\r\n * Note that the cross product must by definition produce a 3D vector\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec3} out\r\n */\r\nfunction cross(out, a, b) {\r\n  var z = a[0] * b[1] - a[1] * b[0];\r\n  out[0] = out[1] = 0;\r\n  out[2] = z;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Performs a linear interpolation between two vec2\'s\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec2} out\r\n */\r\nfunction lerp(out, a, b, t) {\r\n  var ax = a[0],\r\n      ay = a[1];\r\n  out[0] = ax + t * (b[0] - ax);\r\n  out[1] = ay + t * (b[1] - ay);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec2} out\r\n */\r\nfunction random(out, scale) {\r\n  scale = scale || 1.0;\r\n  var r = _common_js__WEBPACK_IMPORTED_MODULE_0__["RANDOM"]() * 2.0 * Math.PI;\r\n  out[0] = Math.cos(r) * scale;\r\n  out[1] = Math.sin(r) * scale;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Transforms the vec2 with a mat2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to transform\r\n * @param {mat2} m matrix to transform with\r\n * @returns {vec2} out\r\n */\r\nfunction transformMat2(out, a, m) {\r\n  var x = a[0],\r\n      y = a[1];\r\n  out[0] = m[0] * x + m[2] * y;\r\n  out[1] = m[1] * x + m[3] * y;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Transforms the vec2 with a mat2d\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to transform\r\n * @param {mat2d} m matrix to transform with\r\n * @returns {vec2} out\r\n */\r\nfunction transformMat2d(out, a, m) {\r\n  var x = a[0],\r\n      y = a[1];\r\n  out[0] = m[0] * x + m[2] * y + m[4];\r\n  out[1] = m[1] * x + m[3] * y + m[5];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Transforms the vec2 with a mat3\r\n * 3rd vector component is implicitly \'1\'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to transform\r\n * @param {mat3} m matrix to transform with\r\n * @returns {vec2} out\r\n */\r\nfunction transformMat3(out, a, m) {\r\n  var x = a[0],\r\n      y = a[1];\r\n  out[0] = m[0] * x + m[3] * y + m[6];\r\n  out[1] = m[1] * x + m[4] * y + m[7];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Transforms the vec2 with a mat4\r\n * 3rd vector component is implicitly \'0\'\r\n * 4th vector component is implicitly \'1\'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to transform\r\n * @param {mat4} m matrix to transform with\r\n * @returns {vec2} out\r\n */\r\nfunction transformMat4(out, a, m) {\r\n  var x = a[0];\r\n  var y = a[1];\r\n  out[0] = m[0] * x + m[4] * y + m[12];\r\n  out[1] = m[1] * x + m[5] * y + m[13];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotate a 2D vector\r\n * @param {vec2} out The receiving vec2\r\n * @param {vec2} a The vec2 point to rotate\r\n * @param {vec2} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec2} out\r\n */\r\nfunction rotate(out, a, b, c) {\r\n  //Translate point to the origin\r\n  var p0 = a[0] - b[0],\r\n      p1 = a[1] - b[1],\r\n      sinC = Math.sin(c),\r\n      cosC = Math.cos(c);\r\n\r\n  //perform rotation and translate to correct position\r\n  out[0] = p0 * cosC - p1 * sinC + b[0];\r\n  out[1] = p0 * sinC + p1 * cosC + b[1];\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Get the angle between two 2D vectors\r\n * @param {vec2} a The first operand\r\n * @param {vec2} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\r\nfunction angle(a, b) {\r\n  var x1 = a[0],\r\n      y1 = a[1],\r\n      x2 = b[0],\r\n      y2 = b[1];\r\n\r\n  var len1 = x1 * x1 + y1 * y1;\r\n  if (len1 > 0) {\r\n    //TODO: evaluate use of glm_invsqrt here?\r\n    len1 = 1 / Math.sqrt(len1);\r\n  }\r\n\r\n  var len2 = x2 * x2 + y2 * y2;\r\n  if (len2 > 0) {\r\n    //TODO: evaluate use of glm_invsqrt here?\r\n    len2 = 1 / Math.sqrt(len2);\r\n  }\r\n\r\n  var cosine = (x1 * x2 + y1 * y2) * len1 * len2;\r\n\r\n  if (cosine > 1.0) {\r\n    return 0;\r\n  } else if (cosine < -1.0) {\r\n    return Math.PI;\r\n  } else {\r\n    return Math.acos(cosine);\r\n  }\r\n}\r\n\r\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {vec2} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\r\nfunction str(a) {\r\n  return \'vec2(\' + a[0] + \', \' + a[1] + \')\';\r\n}\r\n\r\n/**\r\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\r\n *\r\n * @param {vec2} a The first vector.\r\n * @param {vec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\r\nfunction exactEquals(a, b) {\r\n  return a[0] === b[0] && a[1] === b[1];\r\n}\r\n\r\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {vec2} a The first vector.\r\n * @param {vec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\r\nfunction equals(a, b) {\r\n  var a0 = a[0],\r\n      a1 = a[1];\r\n  var b0 = b[0],\r\n      b1 = b[1];\r\n  return Math.abs(a0 - b0) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a1), Math.abs(b1));\r\n}\r\n\r\n/**\r\n * Alias for {@link vec2.length}\r\n * @function\r\n */\r\nvar len = length;\r\n\r\n/**\r\n * Alias for {@link vec2.subtract}\r\n * @function\r\n */\r\nvar sub = subtract;\r\n\r\n/**\r\n * Alias for {@link vec2.multiply}\r\n * @function\r\n */\r\nvar mul = multiply;\r\n\r\n/**\r\n * Alias for {@link vec2.divide}\r\n * @function\r\n */\r\nvar div = divide;\r\n\r\n/**\r\n * Alias for {@link vec2.distance}\r\n * @function\r\n */\r\nvar dist = distance;\r\n\r\n/**\r\n * Alias for {@link vec2.squaredDistance}\r\n * @function\r\n */\r\nvar sqrDist = squaredDistance;\r\n\r\n/**\r\n * Alias for {@link vec2.squaredLength}\r\n * @function\r\n */\r\nvar sqrLen = squaredLength;\r\n\r\n/**\r\n * Perform some operation over an array of vec2s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\r\nvar forEach = function () {\r\n  var vec = create();\r\n\r\n  return function (a, stride, offset, count, fn, arg) {\r\n    var i = void 0,\r\n        l = void 0;\r\n    if (!stride) {\r\n      stride = 2;\r\n    }\r\n\r\n    if (!offset) {\r\n      offset = 0;\r\n    }\r\n\r\n    if (count) {\r\n      l = Math.min(count * stride + offset, a.length);\r\n    } else {\r\n      l = a.length;\r\n    }\r\n\r\n    for (i = offset; i < l; i += stride) {\r\n      vec[0] = a[i];vec[1] = a[i + 1];\r\n      fn(vec, vec, arg);\r\n      a[i] = vec[0];a[i + 1] = vec[1];\r\n    }\r\n\r\n    return a;\r\n  };\r\n}();\n\n/***/ }),\n\n/***/ "./node_modules/gl-matrix/lib/gl-matrix/vec3.js":\n/*!******************************************************!*\\\n  !*** ./node_modules/gl-matrix/lib/gl-matrix/vec3.js ***!\n  \\******************************************************/\n/*! exports provided: create, clone, length, fromValues, copy, set, add, subtract, multiply, divide, ceil, floor, min, max, round, scale, scaleAndAdd, distance, squaredDistance, squaredLength, negate, inverse, normalize, dot, cross, lerp, hermite, bezier, random, transformMat4, transformMat3, transformQuat, rotateX, rotateY, rotateZ, angle, str, exactEquals, equals, sub, mul, div, dist, sqrDist, len, sqrLen, forEach */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "create", function() { return create; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "clone", function() { return clone; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "length", function() { return length; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fromValues", function() { return fromValues; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "copy", function() { return copy; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "set", function() { return set; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "add", function() { return add; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "subtract", function() { return subtract; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "multiply", function() { return multiply; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "divide", function() { return divide; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ceil", function() { return ceil; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "floor", function() { return floor; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "min", function() { return min; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "max", function() { return max; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "round", function() { return round; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scale", function() { return scale; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scaleAndAdd", function() { return scaleAndAdd; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "distance", function() { return distance; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "squaredDistance", function() { return squaredDistance; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "squaredLength", function() { return squaredLength; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "negate", function() { return negate; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "inverse", function() { return inverse; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "normalize", function() { return normalize; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "dot", function() { return dot; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cross", function() { return cross; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "lerp", function() { return lerp; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hermite", function() { return hermite; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "bezier", function() { return bezier; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "random", function() { return random; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "transformMat4", function() { return transformMat4; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "transformMat3", function() { return transformMat3; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "transformQuat", function() { return transformQuat; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rotateX", function() { return rotateX; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rotateY", function() { return rotateY; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rotateZ", function() { return rotateZ; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "angle", function() { return angle; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "str", function() { return str; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "exactEquals", function() { return exactEquals; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "equals", function() { return equals; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sub", function() { return sub; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mul", function() { return mul; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "div", function() { return div; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "dist", function() { return dist; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sqrDist", function() { return sqrDist; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "len", function() { return len; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sqrLen", function() { return sqrLen; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "forEach", function() { return forEach; });\n/* harmony import */ var _common_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./common.js */ "./node_modules/gl-matrix/lib/gl-matrix/common.js");\n\r\n\r\n/**\r\n * 3 Dimensional Vector\r\n * @module vec3\r\n */\r\n\r\n/**\r\n * Creates a new, empty vec3\r\n *\r\n * @returns {vec3} a new 3D vector\r\n */\r\nfunction create() {\r\n  var out = new _common_js__WEBPACK_IMPORTED_MODULE_0__["ARRAY_TYPE"](3);\r\n  if (_common_js__WEBPACK_IMPORTED_MODULE_0__["ARRAY_TYPE"] != Float32Array) {\r\n    out[0] = 0;\r\n    out[1] = 0;\r\n    out[2] = 0;\r\n  }\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a new vec3 initialized with values from an existing vector\r\n *\r\n * @param {vec3} a vector to clone\r\n * @returns {vec3} a new 3D vector\r\n */\r\nfunction clone(a) {\r\n  var out = new _common_js__WEBPACK_IMPORTED_MODULE_0__["ARRAY_TYPE"](3);\r\n  out[0] = a[0];\r\n  out[1] = a[1];\r\n  out[2] = a[2];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the length of a vec3\r\n *\r\n * @param {vec3} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\r\nfunction length(a) {\r\n  var x = a[0];\r\n  var y = a[1];\r\n  var z = a[2];\r\n  return Math.sqrt(x * x + y * y + z * z);\r\n}\r\n\r\n/**\r\n * Creates a new vec3 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} a new 3D vector\r\n */\r\nfunction fromValues(x, y, z) {\r\n  var out = new _common_js__WEBPACK_IMPORTED_MODULE_0__["ARRAY_TYPE"](3);\r\n  out[0] = x;\r\n  out[1] = y;\r\n  out[2] = z;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Copy the values from one vec3 to another\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the source vector\r\n * @returns {vec3} out\r\n */\r\nfunction copy(out, a) {\r\n  out[0] = a[0];\r\n  out[1] = a[1];\r\n  out[2] = a[2];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Set the components of a vec3 to the given values\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} out\r\n */\r\nfunction set(out, x, y, z) {\r\n  out[0] = x;\r\n  out[1] = y;\r\n  out[2] = z;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Adds two vec3\'s\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\r\nfunction add(out, a, b) {\r\n  out[0] = a[0] + b[0];\r\n  out[1] = a[1] + b[1];\r\n  out[2] = a[2] + b[2];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\r\nfunction subtract(out, a, b) {\r\n  out[0] = a[0] - b[0];\r\n  out[1] = a[1] - b[1];\r\n  out[2] = a[2] - b[2];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Multiplies two vec3\'s\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\r\nfunction multiply(out, a, b) {\r\n  out[0] = a[0] * b[0];\r\n  out[1] = a[1] * b[1];\r\n  out[2] = a[2] * b[2];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Divides two vec3\'s\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\r\nfunction divide(out, a, b) {\r\n  out[0] = a[0] / b[0];\r\n  out[1] = a[1] / b[1];\r\n  out[2] = a[2] / b[2];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Math.ceil the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to ceil\r\n * @returns {vec3} out\r\n */\r\nfunction ceil(out, a) {\r\n  out[0] = Math.ceil(a[0]);\r\n  out[1] = Math.ceil(a[1]);\r\n  out[2] = Math.ceil(a[2]);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Math.floor the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to floor\r\n * @returns {vec3} out\r\n */\r\nfunction floor(out, a) {\r\n  out[0] = Math.floor(a[0]);\r\n  out[1] = Math.floor(a[1]);\r\n  out[2] = Math.floor(a[2]);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns the minimum of two vec3\'s\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\r\nfunction min(out, a, b) {\r\n  out[0] = Math.min(a[0], b[0]);\r\n  out[1] = Math.min(a[1], b[1]);\r\n  out[2] = Math.min(a[2], b[2]);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns the maximum of two vec3\'s\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\r\nfunction max(out, a, b) {\r\n  out[0] = Math.max(a[0], b[0]);\r\n  out[1] = Math.max(a[1], b[1]);\r\n  out[2] = Math.max(a[2], b[2]);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Math.round the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to round\r\n * @returns {vec3} out\r\n */\r\nfunction round(out, a) {\r\n  out[0] = Math.round(a[0]);\r\n  out[1] = Math.round(a[1]);\r\n  out[2] = Math.round(a[2]);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Scales a vec3 by a scalar number\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec3} out\r\n */\r\nfunction scale(out, a, b) {\r\n  out[0] = a[0] * b;\r\n  out[1] = a[1] * b;\r\n  out[2] = a[2] * b;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Adds two vec3\'s after scaling the second operand by a scalar value\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec3} out\r\n */\r\nfunction scaleAndAdd(out, a, b, scale) {\r\n  out[0] = a[0] + b[0] * scale;\r\n  out[1] = a[1] + b[1] * scale;\r\n  out[2] = a[2] + b[2] * scale;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the euclidian distance between two vec3\'s\r\n *\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\r\nfunction distance(a, b) {\r\n  var x = b[0] - a[0];\r\n  var y = b[1] - a[1];\r\n  var z = b[2] - a[2];\r\n  return Math.sqrt(x * x + y * y + z * z);\r\n}\r\n\r\n/**\r\n * Calculates the squared euclidian distance between two vec3\'s\r\n *\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\r\nfunction squaredDistance(a, b) {\r\n  var x = b[0] - a[0];\r\n  var y = b[1] - a[1];\r\n  var z = b[2] - a[2];\r\n  return x * x + y * y + z * z;\r\n}\r\n\r\n/**\r\n * Calculates the squared length of a vec3\r\n *\r\n * @param {vec3} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\r\nfunction squaredLength(a) {\r\n  var x = a[0];\r\n  var y = a[1];\r\n  var z = a[2];\r\n  return x * x + y * y + z * z;\r\n}\r\n\r\n/**\r\n * Negates the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to negate\r\n * @returns {vec3} out\r\n */\r\nfunction negate(out, a) {\r\n  out[0] = -a[0];\r\n  out[1] = -a[1];\r\n  out[2] = -a[2];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns the inverse of the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to invert\r\n * @returns {vec3} out\r\n */\r\nfunction inverse(out, a) {\r\n  out[0] = 1.0 / a[0];\r\n  out[1] = 1.0 / a[1];\r\n  out[2] = 1.0 / a[2];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Normalize a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to normalize\r\n * @returns {vec3} out\r\n */\r\nfunction normalize(out, a) {\r\n  var x = a[0];\r\n  var y = a[1];\r\n  var z = a[2];\r\n  var len = x * x + y * y + z * z;\r\n  if (len > 0) {\r\n    //TODO: evaluate use of glm_invsqrt here?\r\n    len = 1 / Math.sqrt(len);\r\n    out[0] = a[0] * len;\r\n    out[1] = a[1] * len;\r\n    out[2] = a[2] * len;\r\n  }\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the dot product of two vec3\'s\r\n *\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\r\nfunction dot(a, b) {\r\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\r\n}\r\n\r\n/**\r\n * Computes the cross product of two vec3\'s\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\r\nfunction cross(out, a, b) {\r\n  var ax = a[0],\r\n      ay = a[1],\r\n      az = a[2];\r\n  var bx = b[0],\r\n      by = b[1],\r\n      bz = b[2];\r\n\r\n  out[0] = ay * bz - az * by;\r\n  out[1] = az * bx - ax * bz;\r\n  out[2] = ax * by - ay * bx;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Performs a linear interpolation between two vec3\'s\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\r\nfunction lerp(out, a, b, t) {\r\n  var ax = a[0];\r\n  var ay = a[1];\r\n  var az = a[2];\r\n  out[0] = ax + t * (b[0] - ax);\r\n  out[1] = ay + t * (b[1] - ay);\r\n  out[2] = az + t * (b[2] - az);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Performs a hermite interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {vec3} c the third operand\r\n * @param {vec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\r\nfunction hermite(out, a, b, c, d, t) {\r\n  var factorTimes2 = t * t;\r\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\r\n  var factor2 = factorTimes2 * (t - 2) + t;\r\n  var factor3 = factorTimes2 * (t - 1);\r\n  var factor4 = factorTimes2 * (3 - 2 * t);\r\n\r\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\r\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\r\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Performs a bezier interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {vec3} c the third operand\r\n * @param {vec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\r\nfunction bezier(out, a, b, c, d, t) {\r\n  var inverseFactor = 1 - t;\r\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\r\n  var factorTimes2 = t * t;\r\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\r\n  var factor2 = 3 * t * inverseFactorTimesTwo;\r\n  var factor3 = 3 * factorTimes2 * inverseFactor;\r\n  var factor4 = factorTimes2 * t;\r\n\r\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\r\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\r\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec3} out\r\n */\r\nfunction random(out, scale) {\r\n  scale = scale || 1.0;\r\n\r\n  var r = _common_js__WEBPACK_IMPORTED_MODULE_0__["RANDOM"]() * 2.0 * Math.PI;\r\n  var z = _common_js__WEBPACK_IMPORTED_MODULE_0__["RANDOM"]() * 2.0 - 1.0;\r\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\r\n\r\n  out[0] = Math.cos(r) * zScale;\r\n  out[1] = Math.sin(r) * zScale;\r\n  out[2] = z * scale;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Transforms the vec3 with a mat4.\r\n * 4th vector component is implicitly \'1\'\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to transform\r\n * @param {mat4} m matrix to transform with\r\n * @returns {vec3} out\r\n */\r\nfunction transformMat4(out, a, m) {\r\n  var x = a[0],\r\n      y = a[1],\r\n      z = a[2];\r\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\r\n  w = w || 1.0;\r\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\r\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\r\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Transforms the vec3 with a mat3.\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to transform\r\n * @param {mat3} m the 3x3 matrix to transform with\r\n * @returns {vec3} out\r\n */\r\nfunction transformMat3(out, a, m) {\r\n  var x = a[0],\r\n      y = a[1],\r\n      z = a[2];\r\n  out[0] = x * m[0] + y * m[3] + z * m[6];\r\n  out[1] = x * m[1] + y * m[4] + z * m[7];\r\n  out[2] = x * m[2] + y * m[5] + z * m[8];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Transforms the vec3 with a quat\r\n * Can also be used for dual quaternions. (Multiply it with the real part)\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to transform\r\n * @param {quat} q quaternion to transform with\r\n * @returns {vec3} out\r\n */\r\nfunction transformQuat(out, a, q) {\r\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\r\n  var qx = q[0],\r\n      qy = q[1],\r\n      qz = q[2],\r\n      qw = q[3];\r\n  var x = a[0],\r\n      y = a[1],\r\n      z = a[2];\r\n  // var qvec = [qx, qy, qz];\r\n  // var uv = vec3.cross([], qvec, a);\r\n  var uvx = qy * z - qz * y,\r\n      uvy = qz * x - qx * z,\r\n      uvz = qx * y - qy * x;\r\n  // var uuv = vec3.cross([], qvec, uv);\r\n  var uuvx = qy * uvz - qz * uvy,\r\n      uuvy = qz * uvx - qx * uvz,\r\n      uuvz = qx * uvy - qy * uvx;\r\n  // vec3.scale(uv, uv, 2 * w);\r\n  var w2 = qw * 2;\r\n  uvx *= w2;\r\n  uvy *= w2;\r\n  uvz *= w2;\r\n  // vec3.scale(uuv, uuv, 2);\r\n  uuvx *= 2;\r\n  uuvy *= 2;\r\n  uuvz *= 2;\r\n  // return vec3.add(out, a, vec3.add(out, uv, uuv));\r\n  out[0] = x + uvx + uuvx;\r\n  out[1] = y + uvy + uuvy;\r\n  out[2] = z + uvz + uuvz;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotate a 3D vector around the x-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {vec3} a The vec3 point to rotate\r\n * @param {vec3} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec3} out\r\n */\r\nfunction rotateX(out, a, b, c) {\r\n  var p = [],\r\n      r = [];\r\n  //Translate point to the origin\r\n  p[0] = a[0] - b[0];\r\n  p[1] = a[1] - b[1];\r\n  p[2] = a[2] - b[2];\r\n\r\n  //perform rotation\r\n  r[0] = p[0];\r\n  r[1] = p[1] * Math.cos(c) - p[2] * Math.sin(c);\r\n  r[2] = p[1] * Math.sin(c) + p[2] * Math.cos(c);\r\n\r\n  //translate to correct position\r\n  out[0] = r[0] + b[0];\r\n  out[1] = r[1] + b[1];\r\n  out[2] = r[2] + b[2];\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotate a 3D vector around the y-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {vec3} a The vec3 point to rotate\r\n * @param {vec3} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec3} out\r\n */\r\nfunction rotateY(out, a, b, c) {\r\n  var p = [],\r\n      r = [];\r\n  //Translate point to the origin\r\n  p[0] = a[0] - b[0];\r\n  p[1] = a[1] - b[1];\r\n  p[2] = a[2] - b[2];\r\n\r\n  //perform rotation\r\n  r[0] = p[2] * Math.sin(c) + p[0] * Math.cos(c);\r\n  r[1] = p[1];\r\n  r[2] = p[2] * Math.cos(c) - p[0] * Math.sin(c);\r\n\r\n  //translate to correct position\r\n  out[0] = r[0] + b[0];\r\n  out[1] = r[1] + b[1];\r\n  out[2] = r[2] + b[2];\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotate a 3D vector around the z-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {vec3} a The vec3 point to rotate\r\n * @param {vec3} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec3} out\r\n */\r\nfunction rotateZ(out, a, b, c) {\r\n  var p = [],\r\n      r = [];\r\n  //Translate point to the origin\r\n  p[0] = a[0] - b[0];\r\n  p[1] = a[1] - b[1];\r\n  p[2] = a[2] - b[2];\r\n\r\n  //perform rotation\r\n  r[0] = p[0] * Math.cos(c) - p[1] * Math.sin(c);\r\n  r[1] = p[0] * Math.sin(c) + p[1] * Math.cos(c);\r\n  r[2] = p[2];\r\n\r\n  //translate to correct position\r\n  out[0] = r[0] + b[0];\r\n  out[1] = r[1] + b[1];\r\n  out[2] = r[2] + b[2];\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Get the angle between two 3D vectors\r\n * @param {vec3} a The first operand\r\n * @param {vec3} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\r\nfunction angle(a, b) {\r\n  var tempA = fromValues(a[0], a[1], a[2]);\r\n  var tempB = fromValues(b[0], b[1], b[2]);\r\n\r\n  normalize(tempA, tempA);\r\n  normalize(tempB, tempB);\r\n\r\n  var cosine = dot(tempA, tempB);\r\n\r\n  if (cosine > 1.0) {\r\n    return 0;\r\n  } else if (cosine < -1.0) {\r\n    return Math.PI;\r\n  } else {\r\n    return Math.acos(cosine);\r\n  }\r\n}\r\n\r\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {vec3} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\r\nfunction str(a) {\r\n  return \'vec3(\' + a[0] + \', \' + a[1] + \', \' + a[2] + \')\';\r\n}\r\n\r\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {vec3} a The first vector.\r\n * @param {vec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\r\nfunction exactEquals(a, b) {\r\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\r\n}\r\n\r\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {vec3} a The first vector.\r\n * @param {vec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\r\nfunction equals(a, b) {\r\n  var a0 = a[0],\r\n      a1 = a[1],\r\n      a2 = a[2];\r\n  var b0 = b[0],\r\n      b1 = b[1],\r\n      b2 = b[2];\r\n  return Math.abs(a0 - b0) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a2), Math.abs(b2));\r\n}\r\n\r\n/**\r\n * Alias for {@link vec3.subtract}\r\n * @function\r\n */\r\nvar sub = subtract;\r\n\r\n/**\r\n * Alias for {@link vec3.multiply}\r\n * @function\r\n */\r\nvar mul = multiply;\r\n\r\n/**\r\n * Alias for {@link vec3.divide}\r\n * @function\r\n */\r\nvar div = divide;\r\n\r\n/**\r\n * Alias for {@link vec3.distance}\r\n * @function\r\n */\r\nvar dist = distance;\r\n\r\n/**\r\n * Alias for {@link vec3.squaredDistance}\r\n * @function\r\n */\r\nvar sqrDist = squaredDistance;\r\n\r\n/**\r\n * Alias for {@link vec3.length}\r\n * @function\r\n */\r\nvar len = length;\r\n\r\n/**\r\n * Alias for {@link vec3.squaredLength}\r\n * @function\r\n */\r\nvar sqrLen = squaredLength;\r\n\r\n/**\r\n * Perform some operation over an array of vec3s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\r\nvar forEach = function () {\r\n  var vec = create();\r\n\r\n  return function (a, stride, offset, count, fn, arg) {\r\n    var i = void 0,\r\n        l = void 0;\r\n    if (!stride) {\r\n      stride = 3;\r\n    }\r\n\r\n    if (!offset) {\r\n      offset = 0;\r\n    }\r\n\r\n    if (count) {\r\n      l = Math.min(count * stride + offset, a.length);\r\n    } else {\r\n      l = a.length;\r\n    }\r\n\r\n    for (i = offset; i < l; i += stride) {\r\n      vec[0] = a[i];vec[1] = a[i + 1];vec[2] = a[i + 2];\r\n      fn(vec, vec, arg);\r\n      a[i] = vec[0];a[i + 1] = vec[1];a[i + 2] = vec[2];\r\n    }\r\n\r\n    return a;\r\n  };\r\n}();\n\n/***/ }),\n\n/***/ "./node_modules/gl-matrix/lib/gl-matrix/vec4.js":\n/*!******************************************************!*\\\n  !*** ./node_modules/gl-matrix/lib/gl-matrix/vec4.js ***!\n  \\******************************************************/\n/*! exports provided: create, clone, fromValues, copy, set, add, subtract, multiply, divide, ceil, floor, min, max, round, scale, scaleAndAdd, distance, squaredDistance, length, squaredLength, negate, inverse, normalize, dot, lerp, random, transformMat4, transformQuat, str, exactEquals, equals, sub, mul, div, dist, sqrDist, len, sqrLen, forEach */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "create", function() { return create; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "clone", function() { return clone; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fromValues", function() { return fromValues; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "copy", function() { return copy; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "set", function() { return set; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "add", function() { return add; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "subtract", function() { return subtract; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "multiply", function() { return multiply; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "divide", function() { return divide; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ceil", function() { return ceil; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "floor", function() { return floor; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "min", function() { return min; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "max", function() { return max; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "round", function() { return round; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scale", function() { return scale; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scaleAndAdd", function() { return scaleAndAdd; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "distance", function() { return distance; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "squaredDistance", function() { return squaredDistance; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "length", function() { return length; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "squaredLength", function() { return squaredLength; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "negate", function() { return negate; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "inverse", function() { return inverse; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "normalize", function() { return normalize; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "dot", function() { return dot; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "lerp", function() { return lerp; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "random", function() { return random; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "transformMat4", function() { return transformMat4; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "transformQuat", function() { return transformQuat; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "str", function() { return str; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "exactEquals", function() { return exactEquals; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "equals", function() { return equals; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sub", function() { return sub; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mul", function() { return mul; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "div", function() { return div; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "dist", function() { return dist; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sqrDist", function() { return sqrDist; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "len", function() { return len; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sqrLen", function() { return sqrLen; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "forEach", function() { return forEach; });\n/* harmony import */ var _common_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./common.js */ "./node_modules/gl-matrix/lib/gl-matrix/common.js");\n\r\n\r\n/**\r\n * 4 Dimensional Vector\r\n * @module vec4\r\n */\r\n\r\n/**\r\n * Creates a new, empty vec4\r\n *\r\n * @returns {vec4} a new 4D vector\r\n */\r\nfunction create() {\r\n  var out = new _common_js__WEBPACK_IMPORTED_MODULE_0__["ARRAY_TYPE"](4);\r\n  if (_common_js__WEBPACK_IMPORTED_MODULE_0__["ARRAY_TYPE"] != Float32Array) {\r\n    out[0] = 0;\r\n    out[1] = 0;\r\n    out[2] = 0;\r\n    out[3] = 0;\r\n  }\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a new vec4 initialized with values from an existing vector\r\n *\r\n * @param {vec4} a vector to clone\r\n * @returns {vec4} a new 4D vector\r\n */\r\nfunction clone(a) {\r\n  var out = new _common_js__WEBPACK_IMPORTED_MODULE_0__["ARRAY_TYPE"](4);\r\n  out[0] = a[0];\r\n  out[1] = a[1];\r\n  out[2] = a[2];\r\n  out[3] = a[3];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a new vec4 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} a new 4D vector\r\n */\r\nfunction fromValues(x, y, z, w) {\r\n  var out = new _common_js__WEBPACK_IMPORTED_MODULE_0__["ARRAY_TYPE"](4);\r\n  out[0] = x;\r\n  out[1] = y;\r\n  out[2] = z;\r\n  out[3] = w;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Copy the values from one vec4 to another\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the source vector\r\n * @returns {vec4} out\r\n */\r\nfunction copy(out, a) {\r\n  out[0] = a[0];\r\n  out[1] = a[1];\r\n  out[2] = a[2];\r\n  out[3] = a[3];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Set the components of a vec4 to the given values\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} out\r\n */\r\nfunction set(out, x, y, z, w) {\r\n  out[0] = x;\r\n  out[1] = y;\r\n  out[2] = z;\r\n  out[3] = w;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Adds two vec4\'s\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\r\nfunction add(out, a, b) {\r\n  out[0] = a[0] + b[0];\r\n  out[1] = a[1] + b[1];\r\n  out[2] = a[2] + b[2];\r\n  out[3] = a[3] + b[3];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\r\nfunction subtract(out, a, b) {\r\n  out[0] = a[0] - b[0];\r\n  out[1] = a[1] - b[1];\r\n  out[2] = a[2] - b[2];\r\n  out[3] = a[3] - b[3];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Multiplies two vec4\'s\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\r\nfunction multiply(out, a, b) {\r\n  out[0] = a[0] * b[0];\r\n  out[1] = a[1] * b[1];\r\n  out[2] = a[2] * b[2];\r\n  out[3] = a[3] * b[3];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Divides two vec4\'s\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\r\nfunction divide(out, a, b) {\r\n  out[0] = a[0] / b[0];\r\n  out[1] = a[1] / b[1];\r\n  out[2] = a[2] / b[2];\r\n  out[3] = a[3] / b[3];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Math.ceil the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to ceil\r\n * @returns {vec4} out\r\n */\r\nfunction ceil(out, a) {\r\n  out[0] = Math.ceil(a[0]);\r\n  out[1] = Math.ceil(a[1]);\r\n  out[2] = Math.ceil(a[2]);\r\n  out[3] = Math.ceil(a[3]);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Math.floor the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to floor\r\n * @returns {vec4} out\r\n */\r\nfunction floor(out, a) {\r\n  out[0] = Math.floor(a[0]);\r\n  out[1] = Math.floor(a[1]);\r\n  out[2] = Math.floor(a[2]);\r\n  out[3] = Math.floor(a[3]);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns the minimum of two vec4\'s\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\r\nfunction min(out, a, b) {\r\n  out[0] = Math.min(a[0], b[0]);\r\n  out[1] = Math.min(a[1], b[1]);\r\n  out[2] = Math.min(a[2], b[2]);\r\n  out[3] = Math.min(a[3], b[3]);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns the maximum of two vec4\'s\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\r\nfunction max(out, a, b) {\r\n  out[0] = Math.max(a[0], b[0]);\r\n  out[1] = Math.max(a[1], b[1]);\r\n  out[2] = Math.max(a[2], b[2]);\r\n  out[3] = Math.max(a[3], b[3]);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Math.round the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to round\r\n * @returns {vec4} out\r\n */\r\nfunction round(out, a) {\r\n  out[0] = Math.round(a[0]);\r\n  out[1] = Math.round(a[1]);\r\n  out[2] = Math.round(a[2]);\r\n  out[3] = Math.round(a[3]);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Scales a vec4 by a scalar number\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec4} out\r\n */\r\nfunction scale(out, a, b) {\r\n  out[0] = a[0] * b;\r\n  out[1] = a[1] * b;\r\n  out[2] = a[2] * b;\r\n  out[3] = a[3] * b;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Adds two vec4\'s after scaling the second operand by a scalar value\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec4} out\r\n */\r\nfunction scaleAndAdd(out, a, b, scale) {\r\n  out[0] = a[0] + b[0] * scale;\r\n  out[1] = a[1] + b[1] * scale;\r\n  out[2] = a[2] + b[2] * scale;\r\n  out[3] = a[3] + b[3] * scale;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the euclidian distance between two vec4\'s\r\n *\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\r\nfunction distance(a, b) {\r\n  var x = b[0] - a[0];\r\n  var y = b[1] - a[1];\r\n  var z = b[2] - a[2];\r\n  var w = b[3] - a[3];\r\n  return Math.sqrt(x * x + y * y + z * z + w * w);\r\n}\r\n\r\n/**\r\n * Calculates the squared euclidian distance between two vec4\'s\r\n *\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\r\nfunction squaredDistance(a, b) {\r\n  var x = b[0] - a[0];\r\n  var y = b[1] - a[1];\r\n  var z = b[2] - a[2];\r\n  var w = b[3] - a[3];\r\n  return x * x + y * y + z * z + w * w;\r\n}\r\n\r\n/**\r\n * Calculates the length of a vec4\r\n *\r\n * @param {vec4} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\r\nfunction length(a) {\r\n  var x = a[0];\r\n  var y = a[1];\r\n  var z = a[2];\r\n  var w = a[3];\r\n  return Math.sqrt(x * x + y * y + z * z + w * w);\r\n}\r\n\r\n/**\r\n * Calculates the squared length of a vec4\r\n *\r\n * @param {vec4} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\r\nfunction squaredLength(a) {\r\n  var x = a[0];\r\n  var y = a[1];\r\n  var z = a[2];\r\n  var w = a[3];\r\n  return x * x + y * y + z * z + w * w;\r\n}\r\n\r\n/**\r\n * Negates the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to negate\r\n * @returns {vec4} out\r\n */\r\nfunction negate(out, a) {\r\n  out[0] = -a[0];\r\n  out[1] = -a[1];\r\n  out[2] = -a[2];\r\n  out[3] = -a[3];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns the inverse of the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to invert\r\n * @returns {vec4} out\r\n */\r\nfunction inverse(out, a) {\r\n  out[0] = 1.0 / a[0];\r\n  out[1] = 1.0 / a[1];\r\n  out[2] = 1.0 / a[2];\r\n  out[3] = 1.0 / a[3];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Normalize a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to normalize\r\n * @returns {vec4} out\r\n */\r\nfunction normalize(out, a) {\r\n  var x = a[0];\r\n  var y = a[1];\r\n  var z = a[2];\r\n  var w = a[3];\r\n  var len = x * x + y * y + z * z + w * w;\r\n  if (len > 0) {\r\n    len = 1 / Math.sqrt(len);\r\n    out[0] = x * len;\r\n    out[1] = y * len;\r\n    out[2] = z * len;\r\n    out[3] = w * len;\r\n  }\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the dot product of two vec4\'s\r\n *\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\r\nfunction dot(a, b) {\r\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\r\n}\r\n\r\n/**\r\n * Performs a linear interpolation between two vec4\'s\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec4} out\r\n */\r\nfunction lerp(out, a, b, t) {\r\n  var ax = a[0];\r\n  var ay = a[1];\r\n  var az = a[2];\r\n  var aw = a[3];\r\n  out[0] = ax + t * (b[0] - ax);\r\n  out[1] = ay + t * (b[1] - ay);\r\n  out[2] = az + t * (b[2] - az);\r\n  out[3] = aw + t * (b[3] - aw);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec4} out\r\n */\r\nfunction random(out, scale) {\r\n  scale = scale || 1.0;\r\n\r\n  // Marsaglia, George. Choosing a Point from the Surface of a\r\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\r\n  // http://projecteuclid.org/euclid.aoms/1177692644;\r\n  var v1, v2, v3, v4;\r\n  var s1, s2;\r\n  do {\r\n    v1 = _common_js__WEBPACK_IMPORTED_MODULE_0__["RANDOM"]() * 2 - 1;\r\n    v2 = _common_js__WEBPACK_IMPORTED_MODULE_0__["RANDOM"]() * 2 - 1;\r\n    s1 = v1 * v1 + v2 * v2;\r\n  } while (s1 >= 1);\r\n  do {\r\n    v3 = _common_js__WEBPACK_IMPORTED_MODULE_0__["RANDOM"]() * 2 - 1;\r\n    v4 = _common_js__WEBPACK_IMPORTED_MODULE_0__["RANDOM"]() * 2 - 1;\r\n    s2 = v3 * v3 + v4 * v4;\r\n  } while (s2 >= 1);\r\n\r\n  var d = Math.sqrt((1 - s1) / s2);\r\n  out[0] = scale * v1;\r\n  out[1] = scale * v2;\r\n  out[2] = scale * v3 * d;\r\n  out[3] = scale * v4 * d;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Transforms the vec4 with a mat4.\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the vector to transform\r\n * @param {mat4} m matrix to transform with\r\n * @returns {vec4} out\r\n */\r\nfunction transformMat4(out, a, m) {\r\n  var x = a[0],\r\n      y = a[1],\r\n      z = a[2],\r\n      w = a[3];\r\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\r\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\r\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\r\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Transforms the vec4 with a quat\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the vector to transform\r\n * @param {quat} q quaternion to transform with\r\n * @returns {vec4} out\r\n */\r\nfunction transformQuat(out, a, q) {\r\n  var x = a[0],\r\n      y = a[1],\r\n      z = a[2];\r\n  var qx = q[0],\r\n      qy = q[1],\r\n      qz = q[2],\r\n      qw = q[3];\r\n\r\n  // calculate quat * vec\r\n  var ix = qw * x + qy * z - qz * y;\r\n  var iy = qw * y + qz * x - qx * z;\r\n  var iz = qw * z + qx * y - qy * x;\r\n  var iw = -qx * x - qy * y - qz * z;\r\n\r\n  // calculate result * inverse quat\r\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\r\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\r\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\r\n  out[3] = a[3];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {vec4} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\r\nfunction str(a) {\r\n  return \'vec4(\' + a[0] + \', \' + a[1] + \', \' + a[2] + \', \' + a[3] + \')\';\r\n}\r\n\r\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {vec4} a The first vector.\r\n * @param {vec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\r\nfunction exactEquals(a, b) {\r\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\r\n}\r\n\r\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {vec4} a The first vector.\r\n * @param {vec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\r\nfunction equals(a, b) {\r\n  var a0 = a[0],\r\n      a1 = a[1],\r\n      a2 = a[2],\r\n      a3 = a[3];\r\n  var b0 = b[0],\r\n      b1 = b[1],\r\n      b2 = b[2],\r\n      b3 = b[3];\r\n  return Math.abs(a0 - b0) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= _common_js__WEBPACK_IMPORTED_MODULE_0__["EPSILON"] * Math.max(1.0, Math.abs(a3), Math.abs(b3));\r\n}\r\n\r\n/**\r\n * Alias for {@link vec4.subtract}\r\n * @function\r\n */\r\nvar sub = subtract;\r\n\r\n/**\r\n * Alias for {@link vec4.multiply}\r\n * @function\r\n */\r\nvar mul = multiply;\r\n\r\n/**\r\n * Alias for {@link vec4.divide}\r\n * @function\r\n */\r\nvar div = divide;\r\n\r\n/**\r\n * Alias for {@link vec4.distance}\r\n * @function\r\n */\r\nvar dist = distance;\r\n\r\n/**\r\n * Alias for {@link vec4.squaredDistance}\r\n * @function\r\n */\r\nvar sqrDist = squaredDistance;\r\n\r\n/**\r\n * Alias for {@link vec4.length}\r\n * @function\r\n */\r\nvar len = length;\r\n\r\n/**\r\n * Alias for {@link vec4.squaredLength}\r\n * @function\r\n */\r\nvar sqrLen = squaredLength;\r\n\r\n/**\r\n * Perform some operation over an array of vec4s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\r\nvar forEach = function () {\r\n  var vec = create();\r\n\r\n  return function (a, stride, offset, count, fn, arg) {\r\n    var i = void 0,\r\n        l = void 0;\r\n    if (!stride) {\r\n      stride = 4;\r\n    }\r\n\r\n    if (!offset) {\r\n      offset = 0;\r\n    }\r\n\r\n    if (count) {\r\n      l = Math.min(count * stride + offset, a.length);\r\n    } else {\r\n      l = a.length;\r\n    }\r\n\r\n    for (i = offset; i < l; i += stride) {\r\n      vec[0] = a[i];vec[1] = a[i + 1];vec[2] = a[i + 2];vec[3] = a[i + 3];\r\n      fn(vec, vec, arg);\r\n      a[i] = vec[0];a[i + 1] = vec[1];a[i + 2] = vec[2];a[i + 3] = vec[3];\r\n    }\r\n\r\n    return a;\r\n  };\r\n}();\n\n/***/ }),\n\n/***/ "./node_modules/ieee754/index.js":\n/*!***************************************!*\\\n  !*** ./node_modules/ieee754/index.js ***!\n  \\***************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n\n\n/***/ }),\n\n/***/ "./node_modules/pbf/index.js":\n/*!***********************************!*\\\n  !*** ./node_modules/pbf/index.js ***!\n  \\***********************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n"use strict";\n\n\nmodule.exports = Pbf;\n\nvar ieee754 = __webpack_require__(/*! ieee754 */ "./node_modules/ieee754/index.js");\n\nfunction Pbf(buf) {\n    this.buf = ArrayBuffer.isView && ArrayBuffer.isView(buf) ? buf : new Uint8Array(buf || 0);\n    this.pos = 0;\n    this.type = 0;\n    this.length = this.buf.length;\n}\n\nPbf.Varint  = 0; // varint: int32, int64, uint32, uint64, sint32, sint64, bool, enum\nPbf.Fixed64 = 1; // 64-bit: double, fixed64, sfixed64\nPbf.Bytes   = 2; // length-delimited: string, bytes, embedded messages, packed repeated fields\nPbf.Fixed32 = 5; // 32-bit: float, fixed32, sfixed32\n\nvar SHIFT_LEFT_32 = (1 << 16) * (1 << 16),\n    SHIFT_RIGHT_32 = 1 / SHIFT_LEFT_32;\n\nPbf.prototype = {\n\n    destroy: function() {\n        this.buf = null;\n    },\n\n    // === READING =================================================================\n\n    readFields: function(readField, result, end) {\n        end = end || this.length;\n\n        while (this.pos < end) {\n            var val = this.readVarint(),\n                tag = val >> 3,\n                startPos = this.pos;\n\n            this.type = val & 0x7;\n            readField(tag, result, this);\n\n            if (this.pos === startPos) this.skip(val);\n        }\n        return result;\n    },\n\n    readMessage: function(readField, result) {\n        return this.readFields(readField, result, this.readVarint() + this.pos);\n    },\n\n    readFixed32: function() {\n        var val = readUInt32(this.buf, this.pos);\n        this.pos += 4;\n        return val;\n    },\n\n    readSFixed32: function() {\n        var val = readInt32(this.buf, this.pos);\n        this.pos += 4;\n        return val;\n    },\n\n    // 64-bit int handling is based on github.com/dpw/node-buffer-more-ints (MIT-licensed)\n\n    readFixed64: function() {\n        var val = readUInt32(this.buf, this.pos) + readUInt32(this.buf, this.pos + 4) * SHIFT_LEFT_32;\n        this.pos += 8;\n        return val;\n    },\n\n    readSFixed64: function() {\n        var val = readUInt32(this.buf, this.pos) + readInt32(this.buf, this.pos + 4) * SHIFT_LEFT_32;\n        this.pos += 8;\n        return val;\n    },\n\n    readFloat: function() {\n        var val = ieee754.read(this.buf, this.pos, true, 23, 4);\n        this.pos += 4;\n        return val;\n    },\n\n    readDouble: function() {\n        var val = ieee754.read(this.buf, this.pos, true, 52, 8);\n        this.pos += 8;\n        return val;\n    },\n\n    readVarint: function(isSigned) {\n        var buf = this.buf,\n            val, b;\n\n        b = buf[this.pos++]; val  =  b & 0x7f;        if (b < 0x80) return val;\n        b = buf[this.pos++]; val |= (b & 0x7f) << 7;  if (b < 0x80) return val;\n        b = buf[this.pos++]; val |= (b & 0x7f) << 14; if (b < 0x80) return val;\n        b = buf[this.pos++]; val |= (b & 0x7f) << 21; if (b < 0x80) return val;\n        b = buf[this.pos];   val |= (b & 0x0f) << 28;\n\n        return readVarintRemainder(val, isSigned, this);\n    },\n\n    readVarint64: function() { // for compatibility with v2.0.1\n        return this.readVarint(true);\n    },\n\n    readSVarint: function() {\n        var num = this.readVarint();\n        return num % 2 === 1 ? (num + 1) / -2 : num / 2; // zigzag encoding\n    },\n\n    readBoolean: function() {\n        return Boolean(this.readVarint());\n    },\n\n    readString: function() {\n        var end = this.readVarint() + this.pos,\n            str = readUtf8(this.buf, this.pos, end);\n        this.pos = end;\n        return str;\n    },\n\n    readBytes: function() {\n        var end = this.readVarint() + this.pos,\n            buffer = this.buf.subarray(this.pos, end);\n        this.pos = end;\n        return buffer;\n    },\n\n    // verbose for performance reasons; doesn\'t affect gzipped size\n\n    readPackedVarint: function(arr, isSigned) {\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readVarint(isSigned));\n        return arr;\n    },\n    readPackedSVarint: function(arr) {\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readSVarint());\n        return arr;\n    },\n    readPackedBoolean: function(arr) {\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readBoolean());\n        return arr;\n    },\n    readPackedFloat: function(arr) {\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readFloat());\n        return arr;\n    },\n    readPackedDouble: function(arr) {\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readDouble());\n        return arr;\n    },\n    readPackedFixed32: function(arr) {\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readFixed32());\n        return arr;\n    },\n    readPackedSFixed32: function(arr) {\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readSFixed32());\n        return arr;\n    },\n    readPackedFixed64: function(arr) {\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readFixed64());\n        return arr;\n    },\n    readPackedSFixed64: function(arr) {\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readSFixed64());\n        return arr;\n    },\n\n    skip: function(val) {\n        var type = val & 0x7;\n        if (type === Pbf.Varint) while (this.buf[this.pos++] > 0x7f) {}\n        else if (type === Pbf.Bytes) this.pos = this.readVarint() + this.pos;\n        else if (type === Pbf.Fixed32) this.pos += 4;\n        else if (type === Pbf.Fixed64) this.pos += 8;\n        else throw new Error(\'Unimplemented type: \' + type);\n    },\n\n    // === WRITING =================================================================\n\n    writeTag: function(tag, type) {\n        this.writeVarint((tag << 3) | type);\n    },\n\n    realloc: function(min) {\n        var length = this.length || 16;\n\n        while (length < this.pos + min) length *= 2;\n\n        if (length !== this.length) {\n            var buf = new Uint8Array(length);\n            buf.set(this.buf);\n            this.buf = buf;\n            this.length = length;\n        }\n    },\n\n    finish: function() {\n        this.length = this.pos;\n        this.pos = 0;\n        return this.buf.subarray(0, this.length);\n    },\n\n    writeFixed32: function(val) {\n        this.realloc(4);\n        writeInt32(this.buf, val, this.pos);\n        this.pos += 4;\n    },\n\n    writeSFixed32: function(val) {\n        this.realloc(4);\n        writeInt32(this.buf, val, this.pos);\n        this.pos += 4;\n    },\n\n    writeFixed64: function(val) {\n        this.realloc(8);\n        writeInt32(this.buf, val & -1, this.pos);\n        writeInt32(this.buf, Math.floor(val * SHIFT_RIGHT_32), this.pos + 4);\n        this.pos += 8;\n    },\n\n    writeSFixed64: function(val) {\n        this.realloc(8);\n        writeInt32(this.buf, val & -1, this.pos);\n        writeInt32(this.buf, Math.floor(val * SHIFT_RIGHT_32), this.pos + 4);\n        this.pos += 8;\n    },\n\n    writeVarint: function(val) {\n        val = +val || 0;\n\n        if (val > 0xfffffff || val < 0) {\n            writeBigVarint(val, this);\n            return;\n        }\n\n        this.realloc(4);\n\n        this.buf[this.pos++] =           val & 0x7f  | (val > 0x7f ? 0x80 : 0); if (val <= 0x7f) return;\n        this.buf[this.pos++] = ((val >>>= 7) & 0x7f) | (val > 0x7f ? 0x80 : 0); if (val <= 0x7f) return;\n        this.buf[this.pos++] = ((val >>>= 7) & 0x7f) | (val > 0x7f ? 0x80 : 0); if (val <= 0x7f) return;\n        this.buf[this.pos++] =   (val >>> 7) & 0x7f;\n    },\n\n    writeSVarint: function(val) {\n        this.writeVarint(val < 0 ? -val * 2 - 1 : val * 2);\n    },\n\n    writeBoolean: function(val) {\n        this.writeVarint(Boolean(val));\n    },\n\n    writeString: function(str) {\n        str = String(str);\n        this.realloc(str.length * 4);\n\n        this.pos++; // reserve 1 byte for short string length\n\n        var startPos = this.pos;\n        // write the string directly to the buffer and see how much was written\n        this.pos = writeUtf8(this.buf, str, this.pos);\n        var len = this.pos - startPos;\n\n        if (len >= 0x80) makeRoomForExtraLength(startPos, len, this);\n\n        // finally, write the message length in the reserved place and restore the position\n        this.pos = startPos - 1;\n        this.writeVarint(len);\n        this.pos += len;\n    },\n\n    writeFloat: function(val) {\n        this.realloc(4);\n        ieee754.write(this.buf, val, this.pos, true, 23, 4);\n        this.pos += 4;\n    },\n\n    writeDouble: function(val) {\n        this.realloc(8);\n        ieee754.write(this.buf, val, this.pos, true, 52, 8);\n        this.pos += 8;\n    },\n\n    writeBytes: function(buffer) {\n        var len = buffer.length;\n        this.writeVarint(len);\n        this.realloc(len);\n        for (var i = 0; i < len; i++) this.buf[this.pos++] = buffer[i];\n    },\n\n    writeRawMessage: function(fn, obj) {\n        this.pos++; // reserve 1 byte for short message length\n\n        // write the message directly to the buffer and see how much was written\n        var startPos = this.pos;\n        fn(obj, this);\n        var len = this.pos - startPos;\n\n        if (len >= 0x80) makeRoomForExtraLength(startPos, len, this);\n\n        // finally, write the message length in the reserved place and restore the position\n        this.pos = startPos - 1;\n        this.writeVarint(len);\n        this.pos += len;\n    },\n\n    writeMessage: function(tag, fn, obj) {\n        this.writeTag(tag, Pbf.Bytes);\n        this.writeRawMessage(fn, obj);\n    },\n\n    writePackedVarint:   function(tag, arr) { this.writeMessage(tag, writePackedVarint, arr);   },\n    writePackedSVarint:  function(tag, arr) { this.writeMessage(tag, writePackedSVarint, arr);  },\n    writePackedBoolean:  function(tag, arr) { this.writeMessage(tag, writePackedBoolean, arr);  },\n    writePackedFloat:    function(tag, arr) { this.writeMessage(tag, writePackedFloat, arr);    },\n    writePackedDouble:   function(tag, arr) { this.writeMessage(tag, writePackedDouble, arr);   },\n    writePackedFixed32:  function(tag, arr) { this.writeMessage(tag, writePackedFixed32, arr);  },\n    writePackedSFixed32: function(tag, arr) { this.writeMessage(tag, writePackedSFixed32, arr); },\n    writePackedFixed64:  function(tag, arr) { this.writeMessage(tag, writePackedFixed64, arr);  },\n    writePackedSFixed64: function(tag, arr) { this.writeMessage(tag, writePackedSFixed64, arr); },\n\n    writeBytesField: function(tag, buffer) {\n        this.writeTag(tag, Pbf.Bytes);\n        this.writeBytes(buffer);\n    },\n    writeFixed32Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed32);\n        this.writeFixed32(val);\n    },\n    writeSFixed32Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed32);\n        this.writeSFixed32(val);\n    },\n    writeFixed64Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed64);\n        this.writeFixed64(val);\n    },\n    writeSFixed64Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed64);\n        this.writeSFixed64(val);\n    },\n    writeVarintField: function(tag, val) {\n        this.writeTag(tag, Pbf.Varint);\n        this.writeVarint(val);\n    },\n    writeSVarintField: function(tag, val) {\n        this.writeTag(tag, Pbf.Varint);\n        this.writeSVarint(val);\n    },\n    writeStringField: function(tag, str) {\n        this.writeTag(tag, Pbf.Bytes);\n        this.writeString(str);\n    },\n    writeFloatField: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed32);\n        this.writeFloat(val);\n    },\n    writeDoubleField: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed64);\n        this.writeDouble(val);\n    },\n    writeBooleanField: function(tag, val) {\n        this.writeVarintField(tag, Boolean(val));\n    }\n};\n\nfunction readVarintRemainder(l, s, p) {\n    var buf = p.buf,\n        h, b;\n\n    b = buf[p.pos++]; h  = (b & 0x70) >> 4;  if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 3;  if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 10; if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 17; if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 24; if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x01) << 31; if (b < 0x80) return toNum(l, h, s);\n\n    throw new Error(\'Expected varint not more than 10 bytes\');\n}\n\nfunction readPackedEnd(pbf) {\n    return pbf.type === Pbf.Bytes ?\n        pbf.readVarint() + pbf.pos : pbf.pos + 1;\n}\n\nfunction toNum(low, high, isSigned) {\n    if (isSigned) {\n        return high * 0x100000000 + (low >>> 0);\n    }\n\n    return ((high >>> 0) * 0x100000000) + (low >>> 0);\n}\n\nfunction writeBigVarint(val, pbf) {\n    var low, high;\n\n    if (val >= 0) {\n        low  = (val % 0x100000000) | 0;\n        high = (val / 0x100000000) | 0;\n    } else {\n        low  = ~(-val % 0x100000000);\n        high = ~(-val / 0x100000000);\n\n        if (low ^ 0xffffffff) {\n            low = (low + 1) | 0;\n        } else {\n            low = 0;\n            high = (high + 1) | 0;\n        }\n    }\n\n    if (val >= 0x10000000000000000 || val < -0x10000000000000000) {\n        throw new Error(\'Given varint doesn\\\'t fit into 10 bytes\');\n    }\n\n    pbf.realloc(10);\n\n    writeBigVarintLow(low, high, pbf);\n    writeBigVarintHigh(high, pbf);\n}\n\nfunction writeBigVarintLow(low, high, pbf) {\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos]   = low & 0x7f;\n}\n\nfunction writeBigVarintHigh(high, pbf) {\n    var lsb = (high & 0x07) << 4;\n\n    pbf.buf[pbf.pos++] |= lsb         | ((high >>>= 3) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f;\n}\n\nfunction makeRoomForExtraLength(startPos, len, pbf) {\n    var extraLen =\n        len <= 0x3fff ? 1 :\n        len <= 0x1fffff ? 2 :\n        len <= 0xfffffff ? 3 : Math.ceil(Math.log(len) / (Math.LN2 * 7));\n\n    // if 1 byte isn\'t enough for encoding message length, shift the data to the right\n    pbf.realloc(extraLen);\n    for (var i = pbf.pos - 1; i >= startPos; i--) pbf.buf[i + extraLen] = pbf.buf[i];\n}\n\nfunction writePackedVarint(arr, pbf)   { for (var i = 0; i < arr.length; i++) pbf.writeVarint(arr[i]);   }\nfunction writePackedSVarint(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeSVarint(arr[i]);  }\nfunction writePackedFloat(arr, pbf)    { for (var i = 0; i < arr.length; i++) pbf.writeFloat(arr[i]);    }\nfunction writePackedDouble(arr, pbf)   { for (var i = 0; i < arr.length; i++) pbf.writeDouble(arr[i]);   }\nfunction writePackedBoolean(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeBoolean(arr[i]);  }\nfunction writePackedFixed32(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeFixed32(arr[i]);  }\nfunction writePackedSFixed32(arr, pbf) { for (var i = 0; i < arr.length; i++) pbf.writeSFixed32(arr[i]); }\nfunction writePackedFixed64(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeFixed64(arr[i]);  }\nfunction writePackedSFixed64(arr, pbf) { for (var i = 0; i < arr.length; i++) pbf.writeSFixed64(arr[i]); }\n\n// Buffer code below from https://github.com/feross/buffer, MIT-licensed\n\nfunction readUInt32(buf, pos) {\n    return ((buf[pos]) |\n        (buf[pos + 1] << 8) |\n        (buf[pos + 2] << 16)) +\n        (buf[pos + 3] * 0x1000000);\n}\n\nfunction writeInt32(buf, val, pos) {\n    buf[pos] = val;\n    buf[pos + 1] = (val >>> 8);\n    buf[pos + 2] = (val >>> 16);\n    buf[pos + 3] = (val >>> 24);\n}\n\nfunction readInt32(buf, pos) {\n    return ((buf[pos]) |\n        (buf[pos + 1] << 8) |\n        (buf[pos + 2] << 16)) +\n        (buf[pos + 3] << 24);\n}\n\nfunction readUtf8(buf, pos, end) {\n    var str = \'\';\n    var i = pos;\n\n    while (i < end) {\n        var b0 = buf[i];\n        var c = null; // codepoint\n        var bytesPerSequence =\n            b0 > 0xEF ? 4 :\n            b0 > 0xDF ? 3 :\n            b0 > 0xBF ? 2 : 1;\n\n        if (i + bytesPerSequence > end) break;\n\n        var b1, b2, b3;\n\n        if (bytesPerSequence === 1) {\n            if (b0 < 0x80) {\n                c = b0;\n            }\n        } else if (bytesPerSequence === 2) {\n            b1 = buf[i + 1];\n            if ((b1 & 0xC0) === 0x80) {\n                c = (b0 & 0x1F) << 0x6 | (b1 & 0x3F);\n                if (c <= 0x7F) {\n                    c = null;\n                }\n            }\n        } else if (bytesPerSequence === 3) {\n            b1 = buf[i + 1];\n            b2 = buf[i + 2];\n            if ((b1 & 0xC0) === 0x80 && (b2 & 0xC0) === 0x80) {\n                c = (b0 & 0xF) << 0xC | (b1 & 0x3F) << 0x6 | (b2 & 0x3F);\n                if (c <= 0x7FF || (c >= 0xD800 && c <= 0xDFFF)) {\n                    c = null;\n                }\n            }\n        } else if (bytesPerSequence === 4) {\n            b1 = buf[i + 1];\n            b2 = buf[i + 2];\n            b3 = buf[i + 3];\n            if ((b1 & 0xC0) === 0x80 && (b2 & 0xC0) === 0x80 && (b3 & 0xC0) === 0x80) {\n                c = (b0 & 0xF) << 0x12 | (b1 & 0x3F) << 0xC | (b2 & 0x3F) << 0x6 | (b3 & 0x3F);\n                if (c <= 0xFFFF || c >= 0x110000) {\n                    c = null;\n                }\n            }\n        }\n\n        if (c === null) {\n            c = 0xFFFD;\n            bytesPerSequence = 1;\n\n        } else if (c > 0xFFFF) {\n            c -= 0x10000;\n            str += String.fromCharCode(c >>> 10 & 0x3FF | 0xD800);\n            c = 0xDC00 | c & 0x3FF;\n        }\n\n        str += String.fromCharCode(c);\n        i += bytesPerSequence;\n    }\n\n    return str;\n}\n\nfunction writeUtf8(buf, str, pos) {\n    for (var i = 0, c, lead; i < str.length; i++) {\n        c = str.charCodeAt(i); // code point\n\n        if (c > 0xD7FF && c < 0xE000) {\n            if (lead) {\n                if (c < 0xDC00) {\n                    buf[pos++] = 0xEF;\n                    buf[pos++] = 0xBF;\n                    buf[pos++] = 0xBD;\n                    lead = c;\n                    continue;\n                } else {\n                    c = lead - 0xD800 << 10 | c - 0xDC00 | 0x10000;\n                    lead = null;\n                }\n            } else {\n                if (c > 0xDBFF || (i + 1 === str.length)) {\n                    buf[pos++] = 0xEF;\n                    buf[pos++] = 0xBF;\n                    buf[pos++] = 0xBD;\n                } else {\n                    lead = c;\n                }\n                continue;\n            }\n        } else if (lead) {\n            buf[pos++] = 0xEF;\n            buf[pos++] = 0xBF;\n            buf[pos++] = 0xBD;\n            lead = null;\n        }\n\n        if (c < 0x80) {\n            buf[pos++] = c;\n        } else {\n            if (c < 0x800) {\n                buf[pos++] = c >> 0x6 | 0xC0;\n            } else {\n                if (c < 0x10000) {\n                    buf[pos++] = c >> 0xC | 0xE0;\n                } else {\n                    buf[pos++] = c >> 0x12 | 0xF0;\n                    buf[pos++] = c >> 0xC & 0x3F | 0x80;\n                }\n                buf[pos++] = c >> 0x6 & 0x3F | 0x80;\n            }\n            buf[pos++] = c & 0x3F | 0x80;\n        }\n    }\n    return pos;\n}\n\n\n/***/ }),\n\n/***/ "./node_modules/regenerator-runtime/runtime-module.js":\n/*!************************************************************!*\\\n  !*** ./node_modules/regenerator-runtime/runtime-module.js ***!\n  \\************************************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n// This method of obtaining a reference to the global object needs to be\n// kept identical to the way it is obtained in runtime.js\nvar g = (function() {\n  return this || (typeof self === "object" && self);\n})() || Function("return this")();\n\n// Use `getOwnPropertyNames` because not all browsers support calling\n// `hasOwnProperty` on the global `self` object in a worker. See #183.\nvar hadRuntime = g.regeneratorRuntime &&\n  Object.getOwnPropertyNames(g).indexOf("regeneratorRuntime") >= 0;\n\n// Save the old regeneratorRuntime in case it needs to be restored later.\nvar oldRuntime = hadRuntime && g.regeneratorRuntime;\n\n// Force reevalutation of runtime.js.\ng.regeneratorRuntime = undefined;\n\nmodule.exports = __webpack_require__(/*! ./runtime */ "./node_modules/regenerator-runtime/runtime.js");\n\nif (hadRuntime) {\n  // Restore the original runtime.\n  g.regeneratorRuntime = oldRuntime;\n} else {\n  // Remove the global property added by runtime.js.\n  try {\n    delete g.regeneratorRuntime;\n  } catch(e) {\n    g.regeneratorRuntime = undefined;\n  }\n}\n\n\n/***/ }),\n\n/***/ "./node_modules/regenerator-runtime/runtime.js":\n/*!*****************************************************!*\\\n  !*** ./node_modules/regenerator-runtime/runtime.js ***!\n  \\*****************************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\n/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n!(function(global) {\n  "use strict";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === "function" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || "@@iterator";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || "@@asyncIterator";\n  var toStringTagSymbol = $Symbol.toStringTag || "@@toStringTag";\n\n  var inModule = typeof module === "object";\n  var runtime = global.regeneratorRuntime;\n  if (runtime) {\n    if (inModule) {\n      // If regeneratorRuntime is defined globally and we\'re in a module,\n      // make the exports object identical to regeneratorRuntime.\n      module.exports = runtime;\n    }\n    // Don\'t bother evaluating the rest of this file if the runtime was\n    // already defined globally.\n    return;\n  }\n\n  // Define the runtime globally (as expected by generated code) as either\n  // module.exports (if we\'re in a module) or a new, empty object.\n  runtime = global.regeneratorRuntime = inModule ? module.exports : {};\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  runtime.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there\'s no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don\'t have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: "normal", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: "throw", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = "suspendedStart";\n  var GenStateSuspendedYield = "suspendedYield";\n  var GenStateExecuting = "executing";\n  var GenStateCompleted = "completed";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don\'t natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = "GeneratorFunction";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    ["next", "throw", "return"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  runtime.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === "function" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === "GeneratorFunction"\n      : false;\n  };\n\n  runtime.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = "GeneratorFunction";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, "__await")` to determine if the yielded value is\n  // meant to be awaited.\n  runtime.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === "throw") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === "object" &&\n            hasOwn.call(value, "__await")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke("next", value, resolve, reject);\n          }, function(err) {\n            invoke("throw", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke("throw", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  runtime.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  runtime.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return runtime.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error("Generator is already running");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === "throw") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === "next") {\n          // Setting context._sent for legacy support of Babel\'s\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === "throw") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === "return") {\n          context.abrupt("return", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === "normal") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === "throw") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = "throw";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === "throw") {\n        if (delegate.iterator.return) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = "return";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === "throw") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // "return" to "throw", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = "throw";\n        context.arg = new TypeError(\n          "The iterator does not provide a \'throw\' method");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === "throw") {\n      context.method = "throw";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = "throw";\n      context.arg = new TypeError("iterator result is not an object");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was "throw" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was "next", forget context.arg since it has been\n      // "consumed" by the delegate iterator. If context.method was\n      // "return", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== "return") {\n        context.method = "next";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = "Generator";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers\' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn\'t happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return "[object Generator]";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = "normal";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: "root" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  runtime.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === "function") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  runtime.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel\'s\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = "next";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === "t" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === "throw") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = "throw";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = "next";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === "root") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle("end");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, "catchLoc");\n          var hasFinally = hasOwn.call(entry, "finallyLoc");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error("try statement without catch or finally");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, "finallyLoc") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === "break" ||\n           type === "continue") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = "next";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === "throw") {\n        throw record.arg;\n      }\n\n      if (record.type === "break" ||\n          record.type === "continue") {\n        this.next = record.arg;\n      } else if (record.type === "return") {\n        this.rval = this.arg = record.arg;\n        this.method = "return";\n        this.next = "end";\n      } else if (record.type === "normal" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    "catch": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === "throw") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error("illegal catch attempt");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === "next") {\n        // Deliberately forget the last sent value so that we don\'t\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n})(\n  // In sloppy mode, unbound `this` refers to the global object, fallback to\n  // Function constructor if we\'re in global strict mode. That is sadly a form\n  // of indirect eval which violates Content Security Policy.\n  (function() {\n    return this || (typeof self === "object" && self);\n  })() || Function("return this")()\n);\n\n\n/***/ }),\n\n/***/ "./src/client/WindshaftWorker.js":\n/*!***************************************!*\\\n  !*** ./src/client/WindshaftWorker.js ***!\n  \\***************************************/\n/*! exports provided: WindshaftWorker */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WindshaftWorker", function() { return WindshaftWorker; });\n/* harmony import */ var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/typeof */ "./node_modules/@babel/runtime/helpers/typeof.js");\n/* harmony import */ var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "./node_modules/@babel/runtime/helpers/classCallCheck.js");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ "./node_modules/@babel/runtime/helpers/createClass.js");\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js");\n/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/getPrototypeOf.js");\n/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/inherits */ "./node_modules/@babel/runtime/helpers/inherits.js");\n/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _sources_MVTWorker__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../sources/MVTWorker */ "./src/sources/MVTWorker.js");\n/* harmony import */ var _renderer_schema__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../renderer/schema */ "./src/renderer/schema.js");\n/* harmony import */ var _errors_carto_maps_api_error__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../errors/carto-maps-api-error */ "./src/errors/carto-maps-api-error.js");\n\n\n\n\n\n\n\n\n\nvar WindshaftWorker =\n/*#__PURE__*/\nfunction (_MVTWorker) {\n  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5___default()(WindshaftWorker, _MVTWorker);\n\n  function WindshaftWorker() {\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default()(this, WindshaftWorker);\n\n    return _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3___default()(this, _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4___default()(WindshaftWorker).apply(this, arguments));\n  }\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default()(WindshaftWorker, [{\n    key: "decodeProperty",\n    value: function decodeProperty(metadata, propertyName, propertyValue) {\n      var basename = _renderer_schema__WEBPACK_IMPORTED_MODULE_7__["default"].column.getBase(propertyName);\n      var column = metadata.properties[basename];\n\n      if (!column) {\n        return;\n      }\n\n      switch (column.type) {\n        case \'date\':\n          return decodeDate(column, propertyValue);\n\n        case \'category\':\n          return metadata.categorizeString(basename, propertyValue);\n\n        case \'number\':\n          return propertyValue;\n\n        default:\n          throw new _errors_carto_maps_api_error__WEBPACK_IMPORTED_MODULE_8__["default"]("".concat(_errors_carto_maps_api_error__WEBPACK_IMPORTED_MODULE_8__["CartoMapsAPITypes"].NOT_SUPPORTED, " Windshaft MVT decoding error. Feature property value of type \'").concat(_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default()(propertyValue), "\' cannot be decoded."));\n      }\n    }\n  }]);\n\n  return WindshaftWorker;\n}(_sources_MVTWorker__WEBPACK_IMPORTED_MODULE_6__["MVTWorker"]);\n\nfunction decodeDate(column, propertyValue) {\n  var d = new Date();\n  d.setTime(1000 * propertyValue);\n  var min = column.min,\n      max = column.max;\n  var n = (d - min) / (max.getTime() - min.getTime());\n  return n;\n}\n\n/***/ }),\n\n/***/ "./src/client/mvt/feature-decoder.js":\n/*!*******************************************!*\\\n  !*** ./src/client/mvt/feature-decoder.js ***!\n  \\*******************************************/\n/*! exports provided: Polygon, decodeLines, decodePolygons, signedPolygonArea, clipPolygon */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Polygon", function() { return Polygon; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "decodeLines", function() { return decodeLines; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "decodePolygons", function() { return decodePolygons; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "signedPolygonArea", function() { return signedPolygonArea; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "clipPolygon", function() { return clipPolygon; });\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "./node_modules/@babel/runtime/helpers/slicedToArray.js");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/toConsumableArray */ "./node_modules/@babel/runtime/helpers/toConsumableArray.js");\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "./node_modules/@babel/runtime/helpers/classCallCheck.js");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _utils_geometry__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils/geometry */ "./src/utils/geometry.js");\n\n\n\n\nvar Polygon = function Polygon() {\n  _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default()(this, Polygon);\n\n  this.flat = [];\n  this.holes = [];\n  this.clipped = [];\n  this.clippedType = []; // Store a bitmask of the clipped half-planes\n};\nfunction decodeLines(geometries, mvtExtent) {\n  var decodedGeometries = [];\n  geometries.map(function (l) {\n    var line = [];\n    l.map(function (point) {\n      line.push([2 * point.x / mvtExtent - 1, 2 * (1 - point.y / mvtExtent) - 1]);\n    });\n    decodedGeometries.push.apply(decodedGeometries, _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(clipLine(line)));\n  });\n  return decodedGeometries;\n}\n/*\n    All this clockwise non-sense is needed because the MVT decoder dont decode the MVT fully.\n    It doesn\'t distinguish between internal polygon rings (which defines holes) or external ones, which defines more polygons (mulipolygons)\n    See:\n        https://github.com/mapbox/vector-tile-spec/tree/master/2.1\n        https://en.wikipedia.org/wiki/Shoelace_formula\n*/\n\nfunction decodePolygons(geometries, mvtExtent) {\n  var currentPolygon = null;\n  var decoded = [];\n  var invertedOrientation;\n  geometries.forEach(function (geom) {\n    var area = signedPolygonArea(geom);\n\n    if (area === 0) {\n      return;\n    }\n\n    if (invertedOrientation === undefined) {\n      // According to the MVT spec this condition cannot happen for\n      // MVT spec compliant tiles, but many buggy implementations\n      // don\'t comply with this rule when generating tiles\n      // Also, other implementations accept this out-of-the-spec condition\n      invertedOrientation = area > 0;\n    }\n\n    var isExternalPolygon = invertedOrientation ? area > 0 : area < 0;\n\n    var preClippedVertices = _getPreClippedVertices(geom, mvtExtent);\n\n    if (isExternalPolygon) {\n      if (currentPolygon) {\n        decoded.push(currentPolygon);\n      }\n\n      currentPolygon = new Polygon();\n    }\n\n    currentPolygon = clipPolygon(preClippedVertices, currentPolygon, !isExternalPolygon);\n  });\n\n  if (currentPolygon) {\n    decoded.push(currentPolygon);\n  }\n\n  return decoded;\n}\nfunction signedPolygonArea(vertices) {\n  // https://en.wikipedia.org/wiki/Shoelace_formula\n  var a = 0;\n\n  for (var i = 0; i < vertices.length; i++) {\n    var j = (i + 1) % vertices.length;\n    a += vertices[i].x * vertices[j].y;\n    a -= vertices[j].x * vertices[i].y;\n  }\n\n  return a / 2;\n}\nvar CLIPMAX = 1;\nvar CLIPMIN = -CLIPMAX;\nvar clippingEdges = [{\n  // Right edge; x <= CLIPMAX for points inside\n  inside: function inside(p) {\n    return p[0] <= CLIPMAX;\n  },\n  intersect: function intersect(a, b) {\n    return _utils_geometry__WEBPACK_IMPORTED_MODULE_3__["default"].intersect(a, b, [CLIPMAX, -100], [CLIPMAX, 100]);\n  }\n}, {\n  // Top edge; y <= CLIPMAX for points inside\n  inside: function inside(p) {\n    return p[1] <= CLIPMAX;\n  },\n  intersect: function intersect(a, b) {\n    return _utils_geometry__WEBPACK_IMPORTED_MODULE_3__["default"].intersect(a, b, [-100, CLIPMAX], [100, CLIPMAX]);\n  }\n}, {\n  // Left edge; x >= CLIPMIN for points inside\n  inside: function inside(p) {\n    return p[0] >= CLIPMIN;\n  },\n  intersect: function intersect(a, b) {\n    return _utils_geometry__WEBPACK_IMPORTED_MODULE_3__["default"].intersect(a, b, [CLIPMIN, -100], [CLIPMIN, 100]);\n  }\n}, {\n  // Bottom edge; y >= CLIPMIN for points inside\n  inside: function inside(p) {\n    return p[1] >= CLIPMIN;\n  },\n  intersect: function intersect(a, b) {\n    return _utils_geometry__WEBPACK_IMPORTED_MODULE_3__["default"].intersect(a, b, [-100, CLIPMIN], [100, CLIPMIN]);\n  }\n}];\nvar numberOfEdges = clippingEdges.length;\nfunction clipPolygon(preClippedVertices, polygon, isHole) {\n  // Sutherland-Hodgman Algorithm to clip polygons to the tile\n  // https://www.cs.drexel.edu/~david/Classes/CS430/Lectures/L-05_Polygons.6.pdf\n  var clippedTypes = {}; // for each clipping edge\n\n  var _loop = function _loop(i) {\n    var preClippedVertices2 = [];\n    var clippedTypes2 = {};\n\n    var setClippedType = function setClippedType(vertexIndex, oldVertexIndex) {\n      var edge = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : -1;\n      var clippedType = 0;\n\n      if (oldVertexIndex >= 0) {\n        clippedType = clippedTypes[oldVertexIndex] || 0;\n      }\n\n      if (edge >= 0) {\n        clippedType = clippedType | 1 << edge;\n      }\n\n      if (clippedType) {\n        clippedTypes2[vertexIndex] = clippedType;\n      }\n    }; // for each edge on polygon\n\n\n    for (var k = 0; k < preClippedVertices.length - 1; k++) {\n      // clip polygon edge\n      var a = preClippedVertices[k];\n      var b = preClippedVertices[k + 1];\n      var insideA = clippingEdges[i].inside(a);\n      var insideB = clippingEdges[i].inside(b);\n\n      if (insideA && insideB) {\n        // case 1: both inside, push B vertex\n        setClippedType(preClippedVertices2.length, k + 1);\n        preClippedVertices2.push(b);\n      } else if (insideA) {\n        // case 2: just B outside, push intersection\n        var intersectionPoint = clippingEdges[i].intersect(a, b);\n        setClippedType(preClippedVertices2.length, k + 1, i);\n        preClippedVertices2.push(intersectionPoint);\n      } else if (insideB) {\n        // case 4: just A outside: push intersection, push B\n        var _intersectionPoint = clippingEdges[i].intersect(a, b);\n\n        setClippedType(preClippedVertices2.length, k, i);\n        preClippedVertices2.push(_intersectionPoint);\n        setClippedType(preClippedVertices2.length, k + 1);\n        preClippedVertices2.push(b);\n      } else {// case 3: both outside: do nothing\n      }\n    }\n\n    if (preClippedVertices2.length) {\n      if (clippedTypes2[0]) {\n        clippedTypes2[preClippedVertices2.length] = clippedTypes2[0];\n      }\n\n      preClippedVertices2.push(preClippedVertices2[0]);\n    }\n\n    preClippedVertices = preClippedVertices2;\n    clippedTypes = clippedTypes2;\n  };\n\n  for (var i = 0; i < numberOfEdges; i++) {\n    _loop(i);\n  } // rings with less than 3 vertices are degenerate\n\n\n  var MIN_VALID_NUM_VERTICES = 3; // preClippedVertices is closed by repeating the first vertex\n\n  if (preClippedVertices.length >= MIN_VALID_NUM_VERTICES + 1) {\n    if (isHole) {\n      polygon.holes.push(polygon.flat.length / 2);\n    }\n\n    preClippedVertices.forEach(function (v) {\n      polygon.flat.push(v[0], v[1]);\n    });\n    Object.keys(clippedTypes).forEach(function (i) {\n      polygon.clipped.push(Number(i) * 2);\n      polygon.clippedType.push(clippedTypes[i]);\n    });\n  }\n\n  return polygon;\n}\n\nfunction _getPreClippedVertices(geom, mvtExtent) {\n  return geom.map(function (coord) {\n    var x = coord.x;\n    var y = coord.y;\n    x = 2 * x / mvtExtent - 1;\n    y = 2 * (1 - y / mvtExtent) - 1;\n    return [x, y];\n  });\n}\n\nfunction clipLine(line) {\n  // linestring clipping based on the Cohen-Sutherland algorithm\n  // input is a single linestring [point0, point1, ...]\n  // output is an array of flat linestrings:\n  // [[p0x, p0y, p1x, p1y, ...], ...]\n  var clippedLine = [];\n  var clippedLines = [];\n\n  function clipType(point) {\n    var type = 0;\n\n    for (var i = 0; i < numberOfEdges; i++) {\n      type = type | (clippingEdges[i].inside(point) ? 0 : 1 << i);\n    }\n\n    return type;\n  }\n\n  function intersect(point1, point2, type) {\n    for (var i = 0; i < numberOfEdges; i++) {\n      var mask = 1 << i;\n\n      if (type & mask) {\n        var p = clippingEdges[i].intersect(point1, point2);\n        type = clipType(p) & ~mask;\n        return [p, type];\n      }\n    }\n  }\n\n  var point0 = line[0];\n  var type0 = clipType(point0);\n\n  for (var i = 1; i < line.length; ++i) {\n    var point1 = line[i];\n    var type1 = clipType(point1);\n    var nextType = type1;\n    var nextPoint = point1;\n\n    for (;;) {\n      if (!(type0 | type1)) {\n        var _clippedLine;\n\n        // both points inside\n        (_clippedLine = clippedLine).push.apply(_clippedLine, _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(point0));\n\n        if (type1 !== nextType) {\n          var _clippedLine2;\n\n          (_clippedLine2 = clippedLine).push.apply(_clippedLine2, _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(point1));\n\n          if (i < line.length - 1) {\n            // break line\n            clippedLines.push(clippedLine);\n            clippedLine = [];\n          }\n        } else if (i === line.length - 1) {\n          var _clippedLine3;\n\n          (_clippedLine3 = clippedLine).push.apply(_clippedLine3, _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(point1));\n        }\n\n        break;\n      } else if (type0 & type1) {\n        // both points outside\n        break;\n      } else if (type0) {\n        // only point1 inside\n        var _intersect = intersect(point0, point1, type0);\n\n        var _intersect2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_intersect, 2);\n\n        point0 = _intersect2[0];\n        type0 = _intersect2[1];\n      } else {\n        // only point0 inside\n        var _intersect3 = intersect(point0, point1, type1);\n\n        var _intersect4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_intersect3, 2);\n\n        point1 = _intersect4[0];\n        type1 = _intersect4[1];\n      }\n    }\n\n    point0 = nextPoint;\n    type0 = nextType;\n  }\n\n  clippedLine = _removeDuplicatedVerticesOnLine(clippedLine);\n\n  if (clippedLine.length > 0) {\n    clippedLines.push(clippedLine);\n  }\n\n  return clippedLines;\n}\n\nfunction _removeDuplicatedVerticesOnLine(line) {\n  var result = [];\n  var prevX;\n  var prevY;\n\n  for (var i = 0; i < line.length; i += 2) {\n    var x = line[i];\n    var y = line[i + 1];\n\n    if (x !== prevX || y !== prevY) {\n      result.push(x, y);\n      prevX = x;\n      prevY = y;\n    }\n  }\n\n  return result;\n}\n\n/***/ }),\n\n/***/ "./src/client/rsys.js":\n/*!****************************!*\\\n  !*** ./src/client/rsys.js ***!\n  \\****************************/\n/*! exports provided: wToR, rTiles, getRsysFromTile, default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "wToR", function() { return wToR; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rTiles", function() { return rTiles; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getRsysFromTile", function() { return getRsysFromTile; });\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "./node_modules/@babel/runtime/helpers/slicedToArray.js");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);\n\n\n/**\n * An RSys defines a local coordinate system that maps the coordinates\n * in the range -1 <= x <= +1; -1 <= y <= +1 to an arbitrary rectangle\n * in an external coordinate system. (e.g. Dataframe coordinates to World coordinates)\n * It is the combination of a translation and anisotropic scaling.\n * @typedef {Object} RSys - Renderer relative coordinate system\n * @property {RPoint} center - Position of the local system in external coordinates\n * @property {number} scale - Y-scale (local Y-distance / external Y-distance)\n*/\n\n/*\n * Random notes\n *\n * We can redefine Dataframe to use a Rsys instead of center, scale\n * and we can use an Rsys for the Renderer\'s canvas.\n *\n * Some interesting World coordinate systems:\n *\n * WM (Webmercator): represents a part of the world (excluding polar regions)\n * with coordinates in the range +/-WM_R for both X and Y. (positive orientation: E,N)\n *\n * NWMC (Normalized Webmercator Coordinates): represents the Webmercator *square*\n * with coordinates in the range +/-1. Results from dividing Webmercator coordinates\n * by WM_R. (positive orientation: E,N)\n *\n * TC (Tile coordinates): integers in [0, 2^Z) for zoom level Z. Example: the tile 0/0/0 (zoom, x, y) is the root tile.\n * (positive orientation: E,S)\n *\n * An RSys\'s rectangle (its bounds) is the area covered by the local coordinates in\n * the range +/-1.\n *\n * When an RSys external coordinate system is WM or NWMC, we can compute:\n * * Minimum zoom level for which tiles are no larger than the RSys rectangle:\n *   Math.ceil(Math.log2(1 / r.scale));\n * * Maximum zoom level for which tiles are no smaller than the rectangle:\n *   Math.floor(Math.log2(1 / r.scale));\n * (note that 1 / r.scale is the fraction of the World height that the local rectangle\'s height represents)\n *\n * We\'ll use the term World coordinates below for the *external* reference system\n * of an RSys (usually NWMC).\n */\n\n/* eslint no-unused-vars: ["off"] */\n\n/**\n * R coordinates to World\n * @param {RSys} r - ref. of the passed coordinates\n * @param {number} x - x coordinate in r\n * @param {number} y - y coordinate in r\n * @return {RPoint} World coordinates\n */\nfunction rToW(r, x, y) {\n  return {\n    x: x * r.scale + r.center.x,\n    y: y * r.scale + r.center.y\n  };\n}\n/**\n * World coordinates to local RSys\n * @param {number} x - x W-coordinate\n * @param {number} y - y W-coordinate\n * @param {RSys} r - target ref. system\n * @return {RPoint} R coordinates\n */\n\n\nfunction wToR(x, y, r) {\n  return {\n    x: (x - r.center.x) / r.scale,\n    y: (y - r.center.y) / r.scale\n  };\n}\n/**\n * RSys of a tile (mapping local tile coordinates in +/-1 to NWMC)\n * @param {number} x - TC x coordinate\n * @param {number} y - TC y coordinate\n * @param {number} z - Tile zoom level\n * @return {RSys}\n */\n\nfunction tileRsys(x, y, z) {\n  var max = Math.pow(2, z);\n  return {\n    scale: 1 / max,\n    center: {\n      x: 2 * (x + 0.5) / max - 1,\n      y: 1 - 2 * (y + 0.5) / max\n    }\n  };\n}\n/**\n * TC tiles that intersect the local rectangle of an RSys\n * (with the largest tile size no larger than the rectangle)\n * @param {RSys} rsys\n * @return {Array} - array of TC tiles {x, y, z}\n */\n\n\nfunction rTiles(zoom, bounds) {\n  var viewportZoomToSourceZoom = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : Math.ceil;\n  return wRectangleTiles(viewportZoomToSourceZoom(zoom), bounds);\n}\n/**\n * TC tiles of a given zoom level that intersect a W rectangle\n * @param {number} z\n * @param {Array} - rectangle extents [minx, miny, maxx, maxy]\n * @return {Array} - array of TC tiles {x, y, z}\n */\n\nfunction wRectangleTiles(z, wr) {\n  var _wr = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(wr, 4),\n      wMinx = _wr[0],\n      wMiny = _wr[1],\n      wMaxx = _wr[2],\n      wMaxy = _wr[3];\n\n  var n = 1 << z; // for 0 <= z <= 30 equals Math.pow(2, z)\n\n  var clamp = function clamp(x) {\n    return Math.min(Math.max(x, 0), n - 1);\n  }; // compute tile coordinate ranges\n\n\n  var tMinx = clamp(Math.floor(n * (wMinx + 1) * 0.5));\n  var tMaxx = clamp(Math.ceil(n * (wMaxx + 1) * 0.5) - 1);\n  var tMiny = clamp(Math.floor(n * (1 - wMaxy) * 0.5));\n  var tMaxy = clamp(Math.ceil(n * (1 - wMiny) * 0.5) - 1);\n  var tiles = [];\n\n  for (var x = tMinx; x <= tMaxx; ++x) {\n    for (var y = tMiny; y <= tMaxy; ++y) {\n      tiles.push({\n        x: x,\n        y: y,\n        z: z\n      });\n    }\n  }\n\n  return tiles;\n}\n/**\n * Get the Rsys of a tile where the Rsys\'s center is the tile center and the Rsys\'s scale is the tile extent.\n * @param {*} x\n * @param {*} y\n * @param {*} z\n * @returns {RSys}\n */\n\n\nfunction getRsysFromTile(x, y, z) {\n  return {\n    center: {\n      x: (x + 0.5) / Math.pow(2, z) * 2.0 - 1,\n      y: (1.0 - (y + 0.5) / Math.pow(2, z)) * 2.0 - 1.0\n    },\n    scale: 1 / Math.pow(2, z)\n  };\n}\n/* harmony default export */ __webpack_exports__["default"] = ({\n  rTiles: rTiles,\n  getRsysFromTile: getRsysFromTile,\n  wToR: wToR\n});\n\n/***/ }),\n\n/***/ "./src/errors/carto-error.js":\n/*!***********************************!*\\\n  !*** ./src/errors/carto-error.js ***!\n  \\***********************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return CartoError; });\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "./node_modules/@babel/runtime/helpers/classCallCheck.js");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js");\n/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/getPrototypeOf.js");\n/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/inherits */ "./node_modules/@babel/runtime/helpers/inherits.js");\n/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_helpers_wrapNativeSuper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/wrapNativeSuper */ "./node_modules/@babel/runtime/helpers/wrapNativeSuper.js");\n/* harmony import */ var _babel_runtime_helpers_wrapNativeSuper__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_wrapNativeSuper__WEBPACK_IMPORTED_MODULE_4__);\n\n\n\n\n\n\n/**\n * Represents an error in the carto library.\n *\n * @typedef {Object} CartoError\n * @property {String} message - A short error description\n * @property {String} name - The name of the error "CartoError"\n * @property {Object} originalError - An object containing the internal/original error\n *\n * @event CartoError\n * @api\n */\nvar CartoError =\n/*#__PURE__*/\nfunction (_Error) {\n  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3___default()(CartoError, _Error);\n\n  /**\n   * Build a cartoError from a generic error.\n   * @constructor\n   *\n   * @return {CartoError} A well formed object representing the error.\n   */\n  function CartoError(error) {\n    var _this;\n\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, CartoError);\n\n    if (!(error && error.message)) {\n      throw Error(\'Invalid CartoError, a message is mandatory\');\n    }\n\n    _this = _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_1___default()(this, _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2___default()(CartoError).call(this, error.message));\n    _this.name = \'CartoError\';\n    _this.originalError = error;\n    return _this;\n  }\n\n  return CartoError;\n}(_babel_runtime_helpers_wrapNativeSuper__WEBPACK_IMPORTED_MODULE_4___default()(Error));\n\n\n\n/***/ }),\n\n/***/ "./src/errors/carto-maps-api-error.js":\n/*!********************************************!*\\\n  !*** ./src/errors/carto-maps-api-error.js ***!\n  \\********************************************/\n/*! exports provided: default, CartoMapsAPITypes */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return CartoMapsAPIError; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CartoMapsAPITypes", function() { return CartoMapsAPITypes; });\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "./node_modules/@babel/runtime/helpers/classCallCheck.js");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js");\n/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/getPrototypeOf.js");\n/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/inherits */ "./node_modules/@babel/runtime/helpers/inherits.js");\n/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _carto_error__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./carto-error */ "./src/errors/carto-error.js");\n\n\n\n\n\n/**\n * Utility to build a cartoError related to MapsAPI errors.\n *\n * @return {CartoError} A well formed object representing the error.\n */\n\nvar CartoMapsAPIError =\n/*#__PURE__*/\nfunction (_CartoError) {\n  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3___default()(CartoMapsAPIError, _CartoError);\n\n  function CartoMapsAPIError(message) {\n    var _this;\n\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, CartoMapsAPIError);\n\n    _this = _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_1___default()(this, _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2___default()(CartoMapsAPIError).call(this, {\n      message: message\n    }));\n    _this.name = \'CartoMapsAPIError\';\n    return _this;\n  }\n\n  return CartoMapsAPIError;\n}(_carto_error__WEBPACK_IMPORTED_MODULE_4__["default"]);\n\n\nvar CartoMapsAPITypes = {\n  NOT_SUPPORTED: \'[Not supported]:\',\n  SECURITY: \'[Security]:\'\n};\n\n/***/ }),\n\n/***/ "./src/errors/carto-runtime-error.js":\n/*!*******************************************!*\\\n  !*** ./src/errors/carto-runtime-error.js ***!\n  \\*******************************************/\n/*! exports provided: default, CartoRuntimeTypes */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return CartoRuntimeError; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CartoRuntimeTypes", function() { return CartoRuntimeTypes; });\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "./node_modules/@babel/runtime/helpers/classCallCheck.js");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js");\n/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/getPrototypeOf.js");\n/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/inherits */ "./node_modules/@babel/runtime/helpers/inherits.js");\n/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _carto_error__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./carto-error */ "./src/errors/carto-error.js");\n\n\n\n\n\n/**\n * Utility to build a cartoError related to Runtime errors.\n *\n * @return {CartoError} A well formed object representing the error.\n */\n\nvar CartoRuntimeError =\n/*#__PURE__*/\nfunction (_CartoError) {\n  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3___default()(CartoRuntimeError, _CartoError);\n\n  function CartoRuntimeError(message) {\n    var _this;\n\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, CartoRuntimeError);\n\n    _this = _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_1___default()(this, _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2___default()(CartoRuntimeError).call(this, {\n      message: message\n    }));\n    _this.name = \'CartoRuntimeError\';\n    return _this;\n  }\n\n  return CartoRuntimeError;\n}(_carto_error__WEBPACK_IMPORTED_MODULE_4__["default"]);\n\n\nvar CartoRuntimeTypes = {\n  NOT_SUPPORTED: \'[Not supported]:\',\n  WEB_GL: \'[WebGL]:\',\n  MVT: \'[MVT]:\'\n};\n\n/***/ }),\n\n/***/ "./src/errors/carto-validation-error.js":\n/*!**********************************************!*\\\n  !*** ./src/errors/carto-validation-error.js ***!\n  \\**********************************************/\n/*! exports provided: default, CartoValidationTypes */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return CartoValidationError; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CartoValidationTypes", function() { return CartoValidationTypes; });\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "./node_modules/@babel/runtime/helpers/classCallCheck.js");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js");\n/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/getPrototypeOf.js");\n/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/inherits */ "./node_modules/@babel/runtime/helpers/inherits.js");\n/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _carto_error__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./carto-error */ "./src/errors/carto-error.js");\n\n\n\n\n\n/**\n * Utility to build a cartoError related to validation errors.\n *\n * @return {CartoError} A well formed object representing the error.\n */\n\nvar CartoValidationError =\n/*#__PURE__*/\nfunction (_CartoError) {\n  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3___default()(CartoValidationError, _CartoError);\n\n  function CartoValidationError(message) {\n    var _this;\n\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, CartoValidationError);\n\n    _this = _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_1___default()(this, _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2___default()(CartoValidationError).call(this, {\n      message: message\n    }));\n    _this.name = \'CartoValidationError\';\n    return _this;\n  }\n\n  return CartoValidationError;\n}(_carto_error__WEBPACK_IMPORTED_MODULE_4__["default"]);\n\n\nvar CartoValidationTypes = {\n  MISSING_REQUIRED: \'[Missing required property]:\',\n  INCORRECT_TYPE: \'[Property with an incorrect type]:\',\n  INCORRECT_VALUE: \'[Incorrect value]:\',\n  TOO_MANY_ARGS: \'[Too many arguments]:\'\n};\n\n/***/ }),\n\n/***/ "./src/renderer/DummyDataframe.js":\n/*!****************************************!*\\\n  !*** ./src/renderer/DummyDataframe.js ***!\n  \\****************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return DummyDataframe; });\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "./node_modules/@babel/runtime/helpers/classCallCheck.js");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _decoder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./decoder */ "./src/renderer/decoder/index.js");\n/* harmony import */ var _utils_geometry__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/geometry */ "./src/utils/geometry.js");\n\n\n\n\nvar DummyDataframe = function DummyDataframe(_ref) {\n  var center = _ref.center,\n      scale = _ref.scale,\n      geom = _ref.geom,\n      properties = _ref.properties,\n      type = _ref.type,\n      active = _ref.active,\n      size = _ref.size,\n      metadata = _ref.metadata;\n\n  _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, DummyDataframe);\n\n  this.active = active;\n  this.center = center;\n  this.properties = properties;\n  this.scale = scale;\n  this.type = type;\n  this.decodedGeom = Object(_decoder__WEBPACK_IMPORTED_MODULE_1__["decodeGeom"])(type, geom);\n  this.numVertex = type === \'point\' ? size * 3 : this.decodedGeom.vertices.length / 2;\n  this.numFeatures = type === \'point\' ? size : this.decodedGeom.breakpoints.length || this.numVertex;\n  this.propertyTex = [];\n  this.metadata = metadata;\n  this.propertyCount = 0;\n  this._aabb = Object(_utils_geometry__WEBPACK_IMPORTED_MODULE_2__["computeAABB"])(geom, type);\n  this.t1 = [0.1, 0.1, 0.1, 0.1];\n  this.t2 = [0.1, 0.1, 0.1, 0.1];\n  this.t3 = [0.1, 0.1, 0.1, 0.1];\n  this.t4 = [0.1, 0.1, 0.1, 0.1];\n};\n\n\n\n/***/ }),\n\n/***/ "./src/renderer/Metadata.js":\n/*!**********************************!*\\\n  !*** ./src/renderer/Metadata.js ***!\n  \\**********************************/\n/*! exports provided: IDENTITY, default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IDENTITY", function() { return IDENTITY; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return Metadata; });\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "./node_modules/@babel/runtime/helpers/classCallCheck.js");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ "./node_modules/@babel/runtime/helpers/createClass.js");\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__);\n\n\n// The IDENTITY metadata contains zero properties\nvar IDENTITY = {\n  properties: {}\n};\n\nvar Metadata =\n/*#__PURE__*/\nfunction () {\n  function Metadata() {\n    var _this = this;\n\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n      properties: {}\n    },\n        properties = _ref.properties,\n        featureCount = _ref.featureCount,\n        sample = _ref.sample,\n        geomType = _ref.geomType,\n        isAggregated = _ref.isAggregated,\n        idProperty = _ref.idProperty;\n\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, Metadata);\n\n    this.properties = properties;\n    this.featureCount = featureCount;\n    this.sample = sample;\n    this.geomType = geomType;\n    this.isAggregated = isAggregated;\n    this.idProperty = idProperty || \'cartodb_id\';\n    this.categoryToID = new Map();\n    this.IDToCategory = new Map();\n    this.numCategories = 0;\n    Object.values(properties).map(function (property) {\n      property.categories = property.categories || [];\n      property.categories.map(function (category) {\n        return _this.categorizeString(property, category.name, true);\n      });\n    });\n    this.propertyKeys = Object.keys(this.properties);\n  }\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default()(Metadata, [{\n    key: "categorizeString",\n    value: function categorizeString(propertyName, category) {\n      var init = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      if (category === undefined) {\n        category = null;\n      }\n\n      if (this.categoryToID.has(category)) {\n        return this.categoryToID.get(category);\n      }\n\n      if (!init) {\n        this.properties[propertyName].categories.push({\n          name: category,\n          frequency: Number.NaN\n        });\n      }\n\n      this.categoryToID.set(category, this.numCategories);\n      this.IDToCategory.set(this.numCategories, category);\n      this.numCategories++;\n      return this.numCategories - 1;\n    }\n  }, {\n    key: "propertyNames",\n    value: function propertyNames(propertyName) {\n      var prop = this.properties[propertyName];\n\n      if (prop.aggregations) {\n        return Object.keys(prop.aggregations).map(function (fn) {\n          return prop.aggregations[fn];\n        });\n      }\n\n      return [propertyName];\n    }\n  }]);\n\n  return Metadata;\n}();\n\n\n\n/***/ }),\n\n/***/ "./src/renderer/decoder/common.js":\n/*!****************************************!*\\\n  !*** ./src/renderer/decoder/common.js ***!\n  \\****************************************/\n/*! exports provided: addLineString, resizeBuffer */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addLineString", function() { return addLineString; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "resizeBuffer", function() { return resizeBuffer; });\n/* harmony import */ var _utils_geometry__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/geometry */ "./src/utils/geometry.js");\n\n/**\n * Create a triangulated lineString: zero-sized, vertex-shader expanded triangle list\n * with `miter` joins. For angle < 60 joins are automatically adjusted to `bevel`.\n * https://github.com/CartoDB/carto-vl/wiki/Line-rendering\n */\n\nfunction addLineString(lineString, geomBuffer, index, isPolygon, skipCallback) {\n  var prevPoint, currentPoint, nextPoint;\n  var prevNormal, nextNormal;\n  var drawLine; // We need at least two points\n\n  if (lineString.length >= 4) {\n    // Initialize the first two points\n    prevPoint = [lineString[0], lineString[1]];\n    currentPoint = [lineString[2], lineString[3]];\n    prevNormal = Object(_utils_geometry__WEBPACK_IMPORTED_MODULE_0__["getLineNormal"])(prevPoint, currentPoint);\n\n    if (prevPoint[0] === currentPoint[0] && prevPoint[1] === currentPoint[1]) {\n      return index;\n    }\n\n    for (var i = 4; i <= lineString.length; i += 2) {\n      drawLine = !(skipCallback && skipCallback(i));\n\n      if (drawLine) {\n        // First triangle\n        geomBuffer.vertices[index] = prevPoint[0];\n        geomBuffer.normals[index++] = -prevNormal[0];\n        geomBuffer.vertices[index] = prevPoint[1];\n        geomBuffer.normals[index++] = -prevNormal[1];\n        geomBuffer.vertices[index] = prevPoint[0];\n        geomBuffer.normals[index++] = prevNormal[0];\n        geomBuffer.vertices[index] = prevPoint[1];\n        geomBuffer.normals[index++] = prevNormal[1];\n        geomBuffer.vertices[index] = currentPoint[0];\n        geomBuffer.normals[index++] = prevNormal[0];\n        geomBuffer.vertices[index] = currentPoint[1];\n        geomBuffer.normals[index++] = prevNormal[1]; // Second triangle\n\n        geomBuffer.vertices[index] = prevPoint[0];\n        geomBuffer.normals[index++] = -prevNormal[0];\n        geomBuffer.vertices[index] = prevPoint[1];\n        geomBuffer.normals[index++] = -prevNormal[1];\n        geomBuffer.vertices[index] = currentPoint[0];\n        geomBuffer.normals[index++] = prevNormal[0];\n        geomBuffer.vertices[index] = currentPoint[1];\n        geomBuffer.normals[index++] = prevNormal[1];\n        geomBuffer.vertices[index] = currentPoint[0];\n        geomBuffer.normals[index++] = -prevNormal[0];\n        geomBuffer.vertices[index] = currentPoint[1];\n        geomBuffer.normals[index++] = -prevNormal[1];\n      } // If there is a next point, compute its properties\n\n\n      if (i <= lineString.length - 2) {\n        nextPoint = [lineString[i], lineString[i + 1]];\n      } else if (isPolygon) {\n        nextPoint = [lineString[2], lineString[3]];\n      }\n\n      if (nextPoint) {\n        if (nextPoint[0] === currentPoint[0] && nextPoint[1] === currentPoint[1]) {\n          return index;\n        }\n\n        nextNormal = Object(_utils_geometry__WEBPACK_IMPORTED_MODULE_0__["getLineNormal"])(currentPoint, nextPoint);\n\n        if (drawLine) {\n          // `turnLeft` indicates that the nextLine turns to the left\n          // `joinNormal` contains the direction and size for the `miter` vertex\n          //  If this is not defined means that the join must be `bevel`.\n          var _getJoinNormal = Object(_utils_geometry__WEBPACK_IMPORTED_MODULE_0__["getJoinNormal"])(prevNormal, nextNormal),\n              turnLeft = _getJoinNormal.turnLeft,\n              joinNormal = _getJoinNormal.joinNormal;\n\n          var leftNormal = turnLeft ? prevNormal : Object(_utils_geometry__WEBPACK_IMPORTED_MODULE_0__["neg"])(nextNormal);\n          var rightNormal = turnLeft ? nextNormal : Object(_utils_geometry__WEBPACK_IMPORTED_MODULE_0__["neg"])(prevNormal); // Third triangle\n\n          geomBuffer.vertices[index] = currentPoint[0];\n          geomBuffer.normals[index++] = 0;\n          geomBuffer.vertices[index] = currentPoint[1]; // Mark vertex to be stroke in PolygonShader with the\n          // non-zero value 1e-37, so it validates the expression\n          // `normal != vec2(0.)` without affecting the vertex position.\n\n          geomBuffer.normals[index++] = isPolygon ? 1e-37 : 0;\n          geomBuffer.vertices[index] = currentPoint[0];\n          geomBuffer.normals[index++] = leftNormal[0];\n          geomBuffer.vertices[index] = currentPoint[1];\n          geomBuffer.normals[index++] = leftNormal[1];\n          geomBuffer.vertices[index] = currentPoint[0];\n          geomBuffer.normals[index++] = rightNormal[0];\n          geomBuffer.vertices[index] = currentPoint[1];\n          geomBuffer.normals[index++] = rightNormal[1];\n\n          if (joinNormal) {\n            // Forth triangle\n            geomBuffer.vertices[index] = currentPoint[0];\n            geomBuffer.normals[index++] = joinNormal[0];\n            geomBuffer.vertices[index] = currentPoint[1];\n            geomBuffer.normals[index++] = joinNormal[1];\n            geomBuffer.vertices[index] = currentPoint[0];\n            geomBuffer.normals[index++] = rightNormal[0];\n            geomBuffer.vertices[index] = currentPoint[1];\n            geomBuffer.normals[index++] = rightNormal[1];\n            geomBuffer.vertices[index] = currentPoint[0];\n            geomBuffer.normals[index++] = leftNormal[0];\n            geomBuffer.vertices[index] = currentPoint[1];\n            geomBuffer.normals[index++] = leftNormal[1];\n          }\n        }\n      } // Update the variables for the next iteration\n\n\n      prevPoint = currentPoint;\n      currentPoint = nextPoint;\n      prevNormal = nextNormal;\n      nextPoint = null;\n    }\n  }\n\n  return index;\n}\n/**\n * Resize a Float32Array buffer in an efficient way\n */\n\nfunction resizeBuffer(oldBuffer, newSize) {\n  var newBuffer = new Float32Array(newSize);\n  newBuffer.set(oldBuffer);\n  return newBuffer;\n}\n\n/***/ }),\n\n/***/ "./src/renderer/decoder/index.js":\n/*!***************************************!*\\\n  !*** ./src/renderer/decoder/index.js ***!\n  \\***************************************/\n/*! exports provided: decodeGeom */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "decodeGeom", function() { return decodeGeom; });\n/* harmony import */ var _pointDecoder__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./pointDecoder */ "./src/renderer/decoder/pointDecoder.js");\n/* harmony import */ var _lineDecoder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lineDecoder */ "./src/renderer/decoder/lineDecoder.js");\n/* harmony import */ var _polygonDecoder__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./polygonDecoder */ "./src/renderer/decoder/polygonDecoder.js");\n/* harmony import */ var _errors_carto_runtime_error__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../errors/carto-runtime-error */ "./src/errors/carto-runtime-error.js");\n\n\n\n\nfunction decodeGeom(geomType, geom) {\n  switch (geomType) {\n    case \'point\':\n      return Object(_pointDecoder__WEBPACK_IMPORTED_MODULE_0__["decodePoint"])(geom);\n\n    case \'line\':\n      return Object(_lineDecoder__WEBPACK_IMPORTED_MODULE_1__["decodeLine"])(geom);\n\n    case \'polygon\':\n      return Object(_polygonDecoder__WEBPACK_IMPORTED_MODULE_2__["decodePolygon"])(geom);\n\n    default:\n      throw new _errors_carto_runtime_error__WEBPACK_IMPORTED_MODULE_3__["default"]("".concat(_errors_carto_runtime_error__WEBPACK_IMPORTED_MODULE_3__["CartoRuntimeTypes"].NOT_SUPPORTED, " Unimplemented geometry type: \'").concat(geomType, "\'."));\n  }\n}\n\n/***/ }),\n\n/***/ "./src/renderer/decoder/lineDecoder.js":\n/*!*********************************************!*\\\n  !*** ./src/renderer/decoder/lineDecoder.js ***!\n  \\*********************************************/\n/*! exports provided: decodeLine */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "decodeLine", function() { return decodeLine; });\n/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./common */ "./src/renderer/decoder/common.js");\n // If the geometry type is \'line\' it will generate the appropriate zero-sized, vertex-shader expanded triangle list with `miter` and `bevel` joins.\n// The geom will be an array of coordinates in this case\n\nvar STATIC_INITIAL_BUFFER_SIZE = 1024 * 1024; // 4 MB\n\nvar MAX_VERTICES_COORDINATES_PER_SEGMENT = 24;\nvar index = 0;\nvar geomBuffer = {\n  vertices: new Float32Array(STATIC_INITIAL_BUFFER_SIZE),\n  normals: new Float32Array(STATIC_INITIAL_BUFFER_SIZE)\n};\nfunction decodeLine(geometry) {\n  var breakpoints = []; // Array of indices (to vertexArray) that separate each feature\n\n  var featureIDToVertexIndex = new Map();\n  index = 0;\n\n  for (var i = 0; i < geometry.length; i++) {\n    var feature = geometry[i];\n\n    for (var j = 0; j < feature.length; j++) {\n      // Increase buffers size if required\n      resizeBuffers(MAX_VERTICES_COORDINATES_PER_SEGMENT * feature[j].length); // Add line string\n\n      index = Object(_common__WEBPACK_IMPORTED_MODULE_0__["addLineString"])(feature[j], geomBuffer, index);\n    }\n\n    featureIDToVertexIndex.set(breakpoints.length, breakpoints.length === 0 ? {\n      start: 0,\n      end: index\n    } : {\n      start: featureIDToVertexIndex.get(breakpoints.length - 1).end,\n      end: index\n    });\n    breakpoints.push(index);\n  }\n\n  var verticesArrayBuffer = new ArrayBuffer(4 * index);\n  var normalsArrayBuffer = new ArrayBuffer(4 * index);\n  var vertices = new Float32Array(verticesArrayBuffer);\n  var normals = new Float32Array(normalsArrayBuffer);\n\n  for (var _i = 0; _i < index; _i++) {\n    vertices[_i] = geomBuffer.vertices[_i];\n    normals[_i] = geomBuffer.normals[_i];\n  }\n\n  return {\n    vertices: vertices,\n    normals: normals,\n    verticesArrayBuffer: verticesArrayBuffer,\n    normalsArrayBuffer: normalsArrayBuffer,\n    featureIDToVertexIndex: featureIDToVertexIndex,\n    breakpoints: breakpoints\n  };\n} // Resize buffers as needed if `additionalSize` floats overflow the current buffers.\n\nfunction resizeBuffers(additionalSize) {\n  var minimumNeededSize = index + additionalSize;\n\n  if (minimumNeededSize > geomBuffer.vertices.length) {\n    var newSize = 2 * minimumNeededSize;\n    geomBuffer.vertices = Object(_common__WEBPACK_IMPORTED_MODULE_0__["resizeBuffer"])(geomBuffer.vertices, newSize);\n    geomBuffer.normals = Object(_common__WEBPACK_IMPORTED_MODULE_0__["resizeBuffer"])(geomBuffer.normals, newSize);\n  }\n}\n\n/***/ }),\n\n/***/ "./src/renderer/decoder/pointDecoder.js":\n/*!**********************************************!*\\\n  !*** ./src/renderer/decoder/pointDecoder.js ***!\n  \\**********************************************/\n/*! exports provided: decodePoint */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "decodePoint", function() { return decodePoint; });\n// If the geometry type is \'point\' it will pass trough the geom (the vertex array)\nfunction decodePoint(verticesArrayBuffer) {\n  return {\n    verticesArrayBuffer: verticesArrayBuffer,\n    vertices: new Float32Array(verticesArrayBuffer),\n    breakpoints: []\n  };\n}\n\n/***/ }),\n\n/***/ "./src/renderer/decoder/polygonDecoder.js":\n/*!************************************************!*\\\n  !*** ./src/renderer/decoder/polygonDecoder.js ***!\n  \\************************************************/\n/*! exports provided: decodePolygon */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "decodePolygon", function() { return decodePolygon; });\n/* harmony import */ var earcut__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! earcut */ "./node_modules/earcut/src/earcut.js");\n/* harmony import */ var earcut__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(earcut__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./common */ "./src/renderer/decoder/common.js");\n\n // If the geometry type is \'polygon\' it will triangulate the polygon list (geom)\n// geom will be a list of polygons in which each polygon will have a flat array of vertices and a list of holes indices\n// Example:\n\n/*   let geom = [{\n       flat: [\n         0.,0., 1.,0., 1.,1., 0.,1., 0.,0, //A square\n         0.25,0.25, 0.75,0.25, 0.75,0.75, 0.25,0.75, 0.25,0.25//A small square\n       ]\n       holes: [5]\n     }]\n*/\n\nvar STATIC_INITIAL_BUFFER_SIZE = 1024 * 1024 * 2; // 8 MB\n\nvar VERTEX_COORDINATES_PER_TRIANGLE = 2;\nvar MAX_VERTICES_COORDINATES_PER_SEGMENT = 24;\nvar index = 0;\nvar geomBuffer = {\n  vertices: new Float32Array(STATIC_INITIAL_BUFFER_SIZE),\n  normals: new Float32Array(STATIC_INITIAL_BUFFER_SIZE)\n};\nfunction decodePolygon(geometry) {\n  var breakpoints = []; // Array of indices (to vertexArray) that separate each feature\n\n  var featureIDToVertexIndex = new Map();\n  index = 0;\n\n  for (var i = 0; i < geometry.length; i++) {\n    var feature = geometry[i];\n\n    var _loop = function _loop(j) {\n      var polygon = feature[j];\n      var triangles = earcut__WEBPACK_IMPORTED_MODULE_0__(polygon.flat, polygon.holes); // Increase buffers size if required\n\n      resizeBuffers(VERTEX_COORDINATES_PER_TRIANGLE * triangles.length + MAX_VERTICES_COORDINATES_PER_SEGMENT * polygon.flat.length); // Add polygon\n\n      for (var k = 0; k < triangles.length; k++) {\n        addVertex(polygon.flat, 2 * triangles[k]);\n      } // Add polygon stroke\n\n\n      index = Object(_common__WEBPACK_IMPORTED_MODULE_1__["addLineString"])(polygon.flat, geomBuffer, index, true, function (pointIndex) {\n        // Skip adding the line which connects two rings OR is clipped\n        return polygon.holes.includes((pointIndex - 2) / 2) || isClipped(polygon, pointIndex - 4, pointIndex - 2);\n      });\n    };\n\n    for (var j = 0; j < feature.length; j++) {\n      _loop(j);\n    }\n\n    featureIDToVertexIndex.set(breakpoints.length, breakpoints.length === 0 ? {\n      start: 0,\n      end: index\n    } : {\n      start: featureIDToVertexIndex.get(breakpoints.length - 1).end,\n      end: index\n    });\n    breakpoints.push(index);\n  }\n\n  var verticesArrayBuffer = new ArrayBuffer(4 * index);\n  var normalsArrayBuffer = new ArrayBuffer(4 * index);\n  var vertices = new Float32Array(verticesArrayBuffer);\n  var normals = new Float32Array(normalsArrayBuffer);\n\n  for (var _i = 0; _i < index; _i++) {\n    vertices[_i] = geomBuffer.vertices[_i];\n    normals[_i] = geomBuffer.normals[_i];\n  }\n\n  return {\n    vertices: vertices,\n    normals: normals,\n    verticesArrayBuffer: verticesArrayBuffer,\n    normalsArrayBuffer: normalsArrayBuffer,\n    featureIDToVertexIndex: featureIDToVertexIndex,\n    breakpoints: breakpoints\n  };\n} // Resize buffers as needed if `additionalSize` floats overflow the current buffers\n\nfunction resizeBuffers(additionalSize) {\n  var minimumNeededSize = index + additionalSize;\n\n  if (minimumNeededSize > geomBuffer.vertices.length) {\n    var newSize = 2 * minimumNeededSize;\n    geomBuffer.vertices = Object(_common__WEBPACK_IMPORTED_MODULE_1__["resizeBuffer"])(geomBuffer.vertices, newSize);\n    geomBuffer.normals = Object(_common__WEBPACK_IMPORTED_MODULE_1__["resizeBuffer"])(geomBuffer.normals, newSize);\n  }\n} // Add vertex in triangles.\n\n\nfunction addVertex(array, vertexIndex) {\n  geomBuffer.vertices[index] = array[vertexIndex];\n  geomBuffer.normals[index++] = 0;\n  geomBuffer.vertices[index] = array[vertexIndex + 1];\n  geomBuffer.normals[index++] = 0;\n}\n\nfunction isClipped(polygon, i, j) {\n  if (polygon.clipped.includes(i) && polygon.clipped.includes(j)) {\n    if (polygon.clippedType[polygon.clipped.indexOf(i)] & polygon.clippedType[polygon.clipped.indexOf(j)]) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\n/***/ }),\n\n/***/ "./src/renderer/schema.js":\n/*!********************************!*\\\n  !*** ./src/renderer/schema.js ***!\n  \\********************************/\n/*! exports provided: IDENTITY, union, equals, CLUSTER_FEATURE_COUNT, column, default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IDENTITY", function() { return IDENTITY; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "union", function() { return union; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "equals", function() { return equals; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CLUSTER_FEATURE_COUNT", function() { return CLUSTER_FEATURE_COUNT; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "column", function() { return column; });\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/toConsumableArray */ "./node_modules/@babel/runtime/helpers/toConsumableArray.js");\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__);\n\nvar IDENTITY = {};\n/*\nconst mns = {\n    price:  [{type: \'unaggregated\'}],\n    amount: [{type: \'aggregated\', op: \'avg\'}, {type: \'aggregated\', op: \'max\'}}]\n};\n\n*/\n\nfunction union(a, b) {\n  var result = {};\n  var propertyNames = new Set(Object.keys(a).concat(Object.keys(b)));\n  propertyNames.forEach(function (propertyName) {\n    var aUsages = a[propertyName] || [];\n    var bUsages = b[propertyName] || [];\n\n    var combinedUsage = _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(aUsages).concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(bUsages));\n\n    result[propertyName] = combinedUsage;\n  });\n  return result;\n}\nfunction equals(a, b) {\n  if (!a || !b) {\n    return false;\n  }\n\n  return JSON.stringify(simplify(a)) === JSON.stringify(simplify(b));\n}\n\nfunction simplify(MNS) {\n  var result = {};\n  var propertyNames = Object.keys(MNS).sort();\n  propertyNames.forEach(function (propertyName) {\n    // Stringify and Set to remove duplicates\n    var usage = _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(new Set(MNS[propertyName].map(function (u) {\n      return JSON.stringify(u);\n    })));\n\n    usage.sort();\n    usage = usage.map(function (u) {\n      return JSON.parse(u);\n    });\n    result[propertyName] = usage;\n  });\n  return result;\n}\n\nvar AGG_PREFIX = \'_cdb_agg_\';\nvar AGG_PATTERN = new RegExp(\'^\' + AGG_PREFIX + \'[a-zA-Z0-9]+_\');\nvar CLUSTER_FEATURE_COUNT = \'_cdb_feature_count\'; // column information functions\n\nvar column = {\n  isAggregated: function isAggregated(name) {\n    return name.startsWith(AGG_PREFIX);\n  },\n  getBase: function getBase(name) {\n    return name.replace(AGG_PATTERN, \'\');\n  },\n  getAggFN: function getAggFN(name) {\n    var s = name.substr(AGG_PREFIX.length);\n    return s.substr(0, s.indexOf(\'_\'));\n  },\n  aggColumn: function aggColumn(name, aggFN) {\n    return "".concat(AGG_PREFIX).concat(aggFN, "_").concat(name);\n  }\n};\n/* harmony default export */ __webpack_exports__["default"] = ({\n  column: column,\n  equals: equals,\n  union: union,\n  IDENTITY: IDENTITY,\n  simplify: simplify\n});\n\n/***/ }),\n\n/***/ "./src/sources/MVTWorker.js":\n/*!**********************************!*\\\n  !*** ./src/sources/MVTWorker.js ***!\n  \\**********************************/\n/*! exports provided: MVTWorker */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MVTWorker", function() { return MVTWorker; });\n/* harmony import */ var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/typeof */ "./node_modules/@babel/runtime/helpers/typeof.js");\n/* harmony import */ var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/toConsumableArray */ "./node_modules/@babel/runtime/helpers/toConsumableArray.js");\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/regenerator */ "./node_modules/@babel/runtime/regenerator/index.js");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "./node_modules/@babel/runtime/helpers/asyncToGenerator.js");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "./node_modules/@babel/runtime/helpers/classCallCheck.js");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ "./node_modules/@babel/runtime/helpers/createClass.js");\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _mapbox_vector_tile__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mapbox/vector-tile */ "./node_modules/@mapbox/vector-tile/index.js");\n/* harmony import */ var _mapbox_vector_tile__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_mapbox_vector_tile__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var pbf__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! pbf */ "./node_modules/pbf/index.js");\n/* harmony import */ var pbf__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(pbf__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _client_rsys__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../client/rsys */ "./src/client/rsys.js");\n/* harmony import */ var _client_mvt_feature_decoder__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../client/mvt/feature-decoder */ "./src/client/mvt/feature-decoder.js");\n/* harmony import */ var _renderer_Metadata__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../renderer/Metadata */ "./src/renderer/Metadata.js");\n/* harmony import */ var _renderer_DummyDataframe__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../renderer/DummyDataframe */ "./src/renderer/DummyDataframe.js");\n/* harmony import */ var _errors_carto_validation_error__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../errors/carto-validation-error */ "./src/errors/carto-validation-error.js");\n/* harmony import */ var _errors_carto_runtime_error__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../errors/carto-runtime-error */ "./src/errors/carto-runtime-error.js");\n\n\n\n\n\n\n\n\n\n\n\n\n\n // TODO import correctly\n\nvar RTT_WIDTH = 1024; // Constants for \'@mapbox/vector-tile\' geometry types, from https://github.com/mapbox/vector-tile-js/blob/v1.3.0/lib/vectortilefeature.js#L39\n\nvar mvtDecoderGeomTypes = {\n  point: 1,\n  line: 2,\n  polygon: 3\n};\nvar geometryTypes = {\n  UNKNOWN: \'unknown\',\n  POINT: \'point\',\n  LINE: \'line\',\n  POLYGON: \'polygon\'\n};\nvar MVT_TO_CARTO_TYPES = {\n  1: geometryTypes.POINT,\n  2: geometryTypes.LINE,\n  3: geometryTypes.POLYGON\n};\nvar MVTWorker =\n/*#__PURE__*/\nfunction () {\n  function MVTWorker() {\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4___default()(this, MVTWorker);\n  }\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5___default()(MVTWorker, [{\n    key: "onmessage",\n    // Worker API\n    value: function onmessage(event) {\n      var _this = this;\n\n      this.processEvent(event).then(function (message) {\n        var transferables = [];\n\n        if (!message.dataframe.empty) {\n          transferables.push(_this._propertiesArrayBuffer);\n          transferables.push(message.dataframe.decodedGeom.verticesArrayBuffer);\n\n          if (message.dataframe.decodedGeom.normalsArrayBuffer) {\n            transferables.push(message.dataframe.decodedGeom.normalsArrayBuffer);\n          }\n        }\n\n        postMessage(message, transferables);\n      });\n    }\n  }, {\n    key: "processEvent",\n    value: function () {\n      var _processEvent = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()(\n      /*#__PURE__*/\n      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee(event) {\n        var params, dataframe;\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                params = event.data;\n\n                if (params.metadata) {\n                  Object.setPrototypeOf(params.metadata, _renderer_Metadata__WEBPACK_IMPORTED_MODULE_10__["default"].prototype);\n                  this.metadata = params.metadata;\n                }\n\n                _context.next = 4;\n                return this._requestDataframe(params.x, params.y, params.z, params.url, params.layerID, this.metadata);\n\n              case 4:\n                dataframe = _context.sent;\n                return _context.abrupt("return", {\n                  mID: params.mID,\n                  dataframe: dataframe\n                });\n\n              case 6:\n              case "end":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function processEvent(_x) {\n        return _processEvent.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: "_requestDataframe",\n    value: function () {\n      var _requestDataframe2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()(\n      /*#__PURE__*/\n      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee2(x, y, z, url, layerID, metadata) {\n        var response, dataframe;\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return fetch(url);\n\n              case 2:\n                response = _context2.sent;\n                _context2.next = 5;\n                return this.urlToDataframeTransformer(response, x, y, z, layerID, metadata);\n\n              case 5:\n                dataframe = _context2.sent;\n                return _context2.abrupt("return", dataframe);\n\n              case 7:\n              case "end":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      return function _requestDataframe(_x2, _x3, _x4, _x5, _x6, _x7) {\n        return _requestDataframe2.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: "urlToDataframeTransformer",\n    value: function () {\n      var _urlToDataframeTransformer = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()(\n      /*#__PURE__*/\n      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee3(response, x, y, z, layerID, metadata) {\n        var MVT_EXTENT, arrayBuffer, tile, mvtLayer, _this$_decodeMVTLayer, geometries, properties, numFeatures, rs, dataframe;\n\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                MVT_EXTENT = 4096;\n                _context3.next = 3;\n                return response.arrayBuffer();\n\n              case 3:\n                arrayBuffer = _context3.sent;\n\n                if (!(arrayBuffer.byteLength === 0 || response === \'null\')) {\n                  _context3.next = 6;\n                  break;\n                }\n\n                return _context3.abrupt("return", {\n                  empty: true\n                });\n\n              case 6:\n                tile = new _mapbox_vector_tile__WEBPACK_IMPORTED_MODULE_6__["VectorTile"](new pbf__WEBPACK_IMPORTED_MODULE_7__(arrayBuffer));\n\n                if (!(Object.keys(tile.layers).length > 1 && !layerID)) {\n                  _context3.next = 9;\n                  break;\n                }\n\n                throw new _errors_carto_validation_error__WEBPACK_IMPORTED_MODULE_12__["default"]("".concat(_errors_carto_validation_error__WEBPACK_IMPORTED_MODULE_12__["CartoValidationTypes"].MISSING_REQUIRED, " LayerID parameter wasn\'t specified and the MVT tile contains multiple layers: ").concat(JSON.stringify(Object.keys(tile.layers)), "."));\n\n              case 9:\n                mvtLayer = tile.layers[layerID || Object.keys(tile.layers)[0]]; // FIXME this!!!\n\n                if (mvtLayer) {\n                  _context3.next = 12;\n                  break;\n                }\n\n                return _context3.abrupt("return", {\n                  empty: true\n                });\n\n              case 12:\n                _this$_decodeMVTLayer = this._decodeMVTLayer(mvtLayer, metadata, MVT_EXTENT), geometries = _this$_decodeMVTLayer.geometries, properties = _this$_decodeMVTLayer.properties, numFeatures = _this$_decodeMVTLayer.numFeatures;\n                rs = _client_rsys__WEBPACK_IMPORTED_MODULE_8__["getRsysFromTile"](x, y, z);\n                dataframe = this._generateDataFrame(rs, geometries, properties, numFeatures, metadata.geomType, metadata);\n                return _context3.abrupt("return", dataframe);\n\n              case 16:\n              case "end":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      return function urlToDataframeTransformer(_x8, _x9, _x10, _x11, _x12, _x13) {\n        return _urlToDataframeTransformer.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: "_decodeMVTLayer",\n    value: function _decodeMVTLayer(mvtLayer, metadata, mvtExtent) {\n      if (!mvtLayer.length) {\n        return {\n          properties: [],\n          geometries: {},\n          numFeatures: 0\n        };\n      }\n\n      if (!metadata.geomType) {\n        metadata.geomType = this._autoDiscoverType(mvtLayer);\n      }\n\n      switch (metadata.geomType) {\n        case geometryTypes.POINT:\n          var arrayBuffer = new ArrayBuffer(mvtLayer.length * 2 * 3 * 4); // SIZEOF\n\n          return this._decode(mvtLayer, metadata, mvtExtent, arrayBuffer);\n\n        case geometryTypes.LINE:\n          return this._decode(mvtLayer, metadata, mvtExtent, [], _client_mvt_feature_decoder__WEBPACK_IMPORTED_MODULE_9__["decodeLines"]);\n\n        case geometryTypes.POLYGON:\n          return this._decode(mvtLayer, metadata, mvtExtent, [], _client_mvt_feature_decoder__WEBPACK_IMPORTED_MODULE_9__["decodePolygons"]);\n\n        default:\n          throw new _errors_carto_validation_error__WEBPACK_IMPORTED_MODULE_12__["default"]("".concat(_errors_carto_validation_error__WEBPACK_IMPORTED_MODULE_12__["CartoValidationTypes"].INCORRECT_TYPE, " MVT: invalid geometry type \'").concat(metadata.geomType, "\'"));\n      }\n    }\n  }, {\n    key: "_autoDiscoverType",\n    value: function _autoDiscoverType(mvtLayer) {\n      var type = mvtLayer.feature(0).type;\n\n      switch (type) {\n        case mvtDecoderGeomTypes.point:\n          return geometryTypes.POINT;\n\n        case mvtDecoderGeomTypes.line:\n          return geometryTypes.LINE;\n\n        case mvtDecoderGeomTypes.polygon:\n          return geometryTypes.POLYGON;\n\n        default:\n          throw new _errors_carto_validation_error__WEBPACK_IMPORTED_MODULE_12__["default"]("".concat(_errors_carto_validation_error__WEBPACK_IMPORTED_MODULE_12__["CartoValidationTypes"].INCORRECT_TYPE, " MVT: invalid geometry type \'").concat(type, "\'"));\n      }\n    }\n  }, {\n    key: "_decode",\n    value: function _decode(mvtLayer, metadata, mvtExtent, geometries, decodeFn) {\n      var numFeatures = 0;\n      var pointGeometries;\n\n      if (geometries) {\n        pointGeometries = new Float32Array(geometries);\n      }\n\n      var _this$_initializeProp = this._initializePropertyArrays(metadata, mvtLayer.length),\n          properties = _this$_initializeProp.properties,\n          propertyNames = _this$_initializeProp.propertyNames;\n\n      for (var i = 0; i < mvtLayer.length; i++) {\n        var f = mvtLayer.feature(i);\n\n        this._checkType(f, metadata.geomType);\n\n        var geom = f.loadGeometry();\n\n        if (decodeFn) {\n          var decodedPolygons = decodeFn(geom, mvtExtent);\n          geometries.push(decodedPolygons);\n        } else {\n          // TODO refactor\n          var x = 2 * geom[0][0].x / mvtExtent - 1.0;\n          var y = 2 * (1.0 - geom[0][0].y / mvtExtent) - 1.0; // Tiles may contain points in the border;\n          // we\'ll avoid here duplicated points between tiles by excluding the 1-edge\n\n          if (x < -1 || x >= 1 || y < -1 || y >= 1) {\n            continue;\n          }\n\n          pointGeometries[6 * numFeatures + 0] = x;\n          pointGeometries[6 * numFeatures + 1] = y;\n          pointGeometries[6 * numFeatures + 2] = x;\n          pointGeometries[6 * numFeatures + 3] = y;\n          pointGeometries[6 * numFeatures + 4] = x;\n          pointGeometries[6 * numFeatures + 5] = y;\n        }\n\n        if (f.properties[metadata.idProperty] === undefined) {\n          throw new _errors_carto_runtime_error__WEBPACK_IMPORTED_MODULE_13__["default"]("".concat(_errors_carto_runtime_error__WEBPACK_IMPORTED_MODULE_13__["CartoRuntimeTypes"].MVT, " MVT feature with undefined idProperty \'").concat(metadata.idProperty, "\'"));\n        }\n\n        this._decodeProperties(metadata, propertyNames, properties, f, numFeatures);\n\n        numFeatures++;\n      }\n\n      return {\n        properties: properties,\n        geometries: geometries,\n        numFeatures: numFeatures\n      };\n    } // Currently only mvtLayers with the same type in every feature are supported\n\n  }, {\n    key: "_checkType",\n    value: function _checkType(feature, expected) {\n      var type = feature.type;\n      var actual = MVT_TO_CARTO_TYPES[type];\n\n      if (actual !== expected) {\n        throw new _errors_carto_runtime_error__WEBPACK_IMPORTED_MODULE_13__["default"]("".concat(_errors_carto_runtime_error__WEBPACK_IMPORTED_MODULE_13__["CartoRuntimeTypes"].MVT, " MVT: mixed geometry types in the same layer. Layer has type: ").concat(expected, " but feature was ").concat(actual));\n      }\n    }\n  }, {\n    key: "_initializePropertyArrays",\n    value: function _initializePropertyArrays(metadata, length) {\n      var propertyNames = this._getPropertyNamesFrom(metadata);\n\n      var properties = this._getPropertiesFor(propertyNames, length);\n\n      return {\n        propertyNames: propertyNames,\n        properties: properties\n      };\n    }\n  }, {\n    key: "_getPropertyNamesFrom",\n    value: function _getPropertyNamesFrom(metadata) {\n      var propertyNames = [];\n\n      for (var i = 0; i < metadata.propertyKeys.length; i++) {\n        var propertyName = metadata.propertyKeys[i];\n\n        if (metadata.properties[propertyName].type === \'geometry\') {\n          continue;\n        }\n\n        propertyNames.push.apply(propertyNames, _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(metadata.propertyNames(propertyName)));\n      }\n\n      return propertyNames;\n    }\n  }, {\n    key: "_getPropertiesFor",\n    value: function _getPropertiesFor(propertyNames, length) {\n      var properties = {};\n      var size = Math.ceil(length / RTT_WIDTH) * RTT_WIDTH;\n      var arrayBuffer = new ArrayBuffer(4 * size * propertyNames.length);\n      this._propertiesArrayBuffer = arrayBuffer;\n\n      for (var i = 0; i < propertyNames.length; i++) {\n        var propertyName = propertyNames[i];\n        properties[propertyName] = new Float32Array(arrayBuffer, i * 4 * size, size);\n      }\n\n      return properties;\n    }\n  }, {\n    key: "_decodeProperties",\n    value: function _decodeProperties(metadata, propertyNames, properties, feature, i) {\n      var length = propertyNames.length;\n\n      for (var j = 0; j < length; j++) {\n        var propertyName = propertyNames[j];\n        var propertyValue = feature.properties[propertyName];\n        properties[propertyName][i] = this.decodeProperty(metadata, propertyName, propertyValue);\n      }\n    }\n  }, {\n    key: "decodeProperty",\n    value: function decodeProperty(metadata, propertyName, propertyValue) {\n      var metadataPropertyType = metadata.properties[propertyName].type;\n\n      if (typeof propertyValue === \'string\') {\n        if (metadataPropertyType !== \'category\') {\n          throw new _errors_carto_runtime_error__WEBPACK_IMPORTED_MODULE_13__["default"]("".concat(_errors_carto_runtime_error__WEBPACK_IMPORTED_MODULE_13__["CartoRuntimeTypes"].MVT, " MVT decoding error. Metadata property \'").concat(propertyName, "\' is of type \'").concat(metadataPropertyType, "\' but the MVT tile contained a feature property of type \'string\': \'").concat(propertyValue, "\'"));\n        }\n\n        return metadata.categorizeString(propertyName, propertyValue);\n      } else if (propertyValue === null || propertyValue === undefined || Number.isNaN(propertyValue)) {\n        return Number.MIN_SAFE_INTEGER;\n      } else if (typeof propertyValue === \'number\') {\n        if (metadataPropertyType !== \'number\') {\n          throw new _errors_carto_runtime_error__WEBPACK_IMPORTED_MODULE_13__["default"]("".concat(_errors_carto_runtime_error__WEBPACK_IMPORTED_MODULE_13__["CartoRuntimeTypes"].MVT, " MVT decoding error. Metadata property \'").concat(propertyName, "\' is of type \'").concat(metadataPropertyType, "\' but the MVT tile contained a feature property of type \'number\': \'").concat(propertyValue, "\'"));\n        }\n\n        return propertyValue;\n      } else {\n        throw new _errors_carto_runtime_error__WEBPACK_IMPORTED_MODULE_13__["default"]("".concat(_errors_carto_runtime_error__WEBPACK_IMPORTED_MODULE_13__["CartoRuntimeTypes"].MVT, " MVT decoding error. Feature property value of type \'").concat(_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default()(propertyValue), "\' cannot be decoded."));\n      }\n    }\n  }, {\n    key: "_generateDataFrame",\n    value: function _generateDataFrame(rs, geometry, properties, size, type, metadata) {\n      return new _renderer_DummyDataframe__WEBPACK_IMPORTED_MODULE_11__["default"]({\n        active: false,\n        center: rs.center,\n        geom: geometry,\n        properties: properties,\n        scale: rs.scale,\n        size: size,\n        type: type,\n        metadata: metadata\n      });\n    }\n  }]);\n\n  return MVTWorker;\n}();\n\n/***/ }),\n\n/***/ "./src/sources/MVTWorkers.worker.js":\n/*!******************************************!*\\\n  !*** ./src/sources/MVTWorkers.worker.js ***!\n  \\******************************************/\n/*! no exports provided */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _MVTWorker__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MVTWorker */ "./src/sources/MVTWorker.js");\n/* harmony import */ var _client_WindshaftWorker__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../client/WindshaftWorker */ "./src/client/WindshaftWorker.js");\n\n\n\n// This file publishes a Web Worker onmessage function that will redirect incoming messages\n// based on an ID (`workerName`) defined by the message sender\n// to each different Worker implementation\n\nconst workers = {\n    MVT: new _MVTWorker__WEBPACK_IMPORTED_MODULE_0__["MVTWorker"](),\n    windshaft: new _client_WindshaftWorker__WEBPACK_IMPORTED_MODULE_1__["WindshaftWorker"]()\n};\n\nonmessage = function (event) {\n    return workers[event.data.workerName].onmessage(event);\n};\n\n\n/***/ }),\n\n/***/ "./src/utils/geometry.js":\n/*!*******************************!*\\\n  !*** ./src/utils/geometry.js ***!\n  \\*******************************/\n/*! exports provided: intersect, sub, dot, perpendicular, getLineNormal, getJoinNormal, neg, pointInTriangle, halfPlaneSign, equalPoints, pointInCircle, pointInRectangle, computeAABB, unproject, default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "intersect", function() { return intersect; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sub", function() { return sub; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "dot", function() { return dot; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "perpendicular", function() { return perpendicular; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getLineNormal", function() { return getLineNormal; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getJoinNormal", function() { return getJoinNormal; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "neg", function() { return neg; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "pointInTriangle", function() { return pointInTriangle; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "halfPlaneSign", function() { return halfPlaneSign; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "equalPoints", function() { return equalPoints; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "pointInCircle", function() { return pointInCircle; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "pointInRectangle", function() { return pointInRectangle; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "computeAABB", function() { return computeAABB; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "unproject", function() { return unproject; });\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "./node_modules/@babel/runtime/helpers/slicedToArray.js");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var gl_matrix__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! gl-matrix */ "./node_modules/gl-matrix/lib/gl-matrix.js");\n\n // If AB intersects CD => return intersection point\n// Intersection method from Real Time Rendering, Third Edition, page 780\n\nfunction intersect(a, b, c, d) {\n  var o1 = a;\n  var o2 = c;\n  var d1 = sub(b, a);\n  var d2 = sub(d, c);\n  var d1t = perpendicular(d1);\n  var d2t = perpendicular(d2);\n  var s = dot(sub(o2, o1), d2t) / dot(d1, d2t);\n  var t = dot(sub(o1, o2), d1t) / dot(d2, d1t);\n\n  if (s >= 0 && s <= 1 && t >= 0 && t <= 1) {\n    return [o1[0] + s * d1[0], o1[1] + s * d1[1]];\n  }\n}\nfunction sub(_ref, _ref2) {\n  var _ref3 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_ref, 2),\n      ax = _ref3[0],\n      ay = _ref3[1];\n\n  var _ref4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_ref2, 2),\n      bx = _ref4[0],\n      by = _ref4[1];\n\n  return [ax - bx, ay - by];\n}\nfunction dot(_ref5, _ref6) {\n  var _ref7 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_ref5, 2),\n      ax = _ref7[0],\n      ay = _ref7[1];\n\n  var _ref8 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_ref6, 2),\n      bx = _ref8[0],\n      by = _ref8[1];\n\n  return ax * bx + ay * by;\n}\nfunction perpendicular(_ref9) {\n  var _ref10 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_ref9, 2),\n      x = _ref10[0],\n      y = _ref10[1];\n\n  return [-y, x];\n}\n/**\n * Compute the normal of a line AB.\n * By definition it is the unitary vector from B to A, rotated +90 degrees counter-clockwise\n */\n\nfunction getLineNormal(a, b) {\n  var u = normalize(a[0] - b[0], a[1] - b[1]);\n  return [-u[1], u[0]];\n}\n/**\n * Compute the normal of the join from the lines\' normals.\n * By definition this is the sum of the unitary vectors `u` (from B to A) and `v` (from B to C)\n * multiplied by a factor of `1/sin(theta)` to reach the intersection of the wide lines.\n * Theta is the angle between the vectors `v` and `u`. But instead of computing the angle,\n * the `sin(theta)` (with sign) is obtained directly from the vectorial product of `v` and `u`\n */\n\nfunction getJoinNormal(prevNormal, nextNormal) {\n  var u = [prevNormal[1], -prevNormal[0]];\n  var v = [-nextNormal[1], nextNormal[0]];\n  var sin = v[0] * u[1] - v[1] * u[0];\n  var cos = v[0] * u[0] + v[1] * u[1];\n  var factor = Math.abs(sin);\n  var miterJoin = !(factor < 0.866 && cos > 0.5); // 60 deg\n\n  return {\n    turnLeft: sin > 0,\n    joinNormal: miterJoin && neg([(u[0] + v[0]) / factor, (u[1] + v[1]) / factor])\n  };\n}\n/**\n * Return the negative of the provided vector\n */\n\nfunction neg(v) {\n  return [-v[0], -v[1]];\n}\n/**\n * Return the vector scaled to length 1\n */\n\nfunction normalize(x, y) {\n  var s = Math.hypot(x, y);\n  return [x / s, y / s];\n} // Returns true if p is inside the triangle or on a triangle\'s edge, false otherwise\n// Parameters in {x: 0, y:0} form\n\n\nfunction pointInTriangle(p, v1, v2, v3) {\n  // https://stackoverflow.com/questions/2049582/how-to-determine-if-a-point-is-in-a-2d-triangle\n  // contains an explanation of both this algorithm and one based on barycentric coordinates,\n  // which could be faster, but, nevertheless, it is quite similar in terms of required arithmetic operations\n  if (equalPoints(v1, v2) || equalPoints(v2, v3) || equalPoints(v3, v1)) {\n    // Avoid zero area triangle\n    return false;\n  } // A point is inside a triangle or in one of the triangles edges\n  // if the point is in the three half-plane defined by the 3 edges\n\n\n  var b1 = halfPlaneSign(p, v1, v2) < 0;\n  var b2 = halfPlaneSign(p, v2, v3) < 0;\n  var b3 = halfPlaneSign(p, v3, v1) < 0;\n  return b1 === b2 && b2 === b3;\n} // Tests if a point `p` is in the half plane defined by the line with points `a` and `b`\n// Returns a negative number if the result is INSIDE, returns 0 if the result is ON_LINE,\n// returns >0 if the point is OUTSIDE\n// Parameters in {x: 0, y:0} form\n\nfunction halfPlaneSign(p, a, b) {\n  // We use the cross product of `PB x AB` to get `sin(angle(PB, AB))`\n  // The result\'s sign is the half plane test result\n  return (p.x - b.x) * (a.y - b.y) - (a.x - b.x) * (p.y - b.y);\n}\nfunction equalPoints(a, b) {\n  return a.x === b.x && a.y === b.y;\n}\nfunction pointInCircle(p, center, radius) {\n  var diff = {\n    x: p.x - center.x,\n    y: p.y - center.y\n  };\n  var lengthSquared = diff.x * diff.x + diff.y * diff.y;\n  return lengthSquared <= radius * radius;\n}\nfunction pointInRectangle(point, bbox) {\n  if (bbox === null) {\n    return false;\n  }\n\n  var p = {\n    x: point.x.toFixed(2),\n    y: point.y.toFixed(2)\n  };\n  return bbox.minx <= p.x && p.x <= bbox.maxx && bbox.miny <= p.y && p.y <= bbox.maxy;\n}\nfunction computeAABB(geometry, type) {\n  switch (type) {\n    case \'point\':\n      return [];\n\n    case \'line\':\n    case \'polygon\':\n      var aabbList = [];\n\n      for (var i = 0; i < geometry.length; i++) {\n        var feature = geometry[i];\n        var aabb = {\n          minx: Number.POSITIVE_INFINITY,\n          miny: Number.POSITIVE_INFINITY,\n          maxx: Number.NEGATIVE_INFINITY,\n          maxy: Number.NEGATIVE_INFINITY\n        };\n\n        for (var j = 0; j < feature.length; j++) {\n          aabb = _updateAABBForGeometry(feature[j], aabb, type);\n        }\n\n        if (aabb.minx === Number.POSITIVE_INFINITY) {\n          aabb = null;\n        }\n\n        aabbList.push(aabb);\n      }\n\n      return aabbList;\n  }\n} // Compute the WebMercator position at projected (x,y) NDC (Normalized Device Coordinates) reversing the projection of the point\n\nfunction unproject(inv, x, y) {\n  // To unproject a point we need the 3 coordinates (x,y,z)\n  // The `z` coordinate can be computed by knowing that the unprojected `z` is equal to `0` (since the map is a 2D plane)\n  // defined at `z=0`\n  // Since a matrix-vector multiplication is a linear transform we know that\n  //      z = m * projectedZ + k\n  // Being `m` and `k` constants for a particular value of projected `x` and `y` coordinates\n  // With that equation and the inverse matrix of the projection we can establish an equation system of the form:\n  //      v1 = m * v2 + k\n  //      v3 = m * v4 + k\n  // Where `v2` and `v4` can be arbitrary values (but not equal to each other) and\n  // `v1` and `v3` can be computed by using the inverse matrix knowing that:\n  //      (_, _, v1,_) = inverse(projectionMatrix) * (projectedX, projectedY, v2, 1)\n  //      (_, _, v3,_) = inverse(projectionMatrix) * (projectedX, projectedY, v4, 1)\n  // By resolving the the equation system above computing `m` and `k` values\n  // we can compute the projected Z coordinate at the (x,y) NDC (projected) point\n  // With (projectedX, projectedY, projectedZ) we can compute the unprojected point by multiplying by the inverse matrix\n  // *** Implementation ***\n  // compute m, k for: [z = m*projectedZ + k]\n  var v2 = 1;\n  var v4 = 2;\n  var v1 = gl_matrix__WEBPACK_IMPORTED_MODULE_1__["vec4"].transformMat4([], [x, y, v2, 1], inv)[2];\n  var v3 = gl_matrix__WEBPACK_IMPORTED_MODULE_1__["vec4"].transformMat4([], [x, y, v4, 1], inv)[2]; // Solve the equation system by using the elimination method (subtraction of the equations)\n  //      (v1-v3) = (v2-v4)*m\n  //      m = (v1 - v3) / (v2 - v4)\n\n  var m = (v1 - v3) / (v2 - v4); // Substituting in the first equation `m` and solving for `k`\n\n  var k = v1 - m * v2; // compute projectedZ by solving `z = m * projectedZ + k` knwoing `z`, `m` and `k`\n\n  var projectedZ = -k / m; // Inverse the projection and normalize by `p.w`\n\n  return gl_matrix__WEBPACK_IMPORTED_MODULE_1__["vec4"].transformMat4([], [x, y, projectedZ, 1], inv).map(function (v, _, point) {\n    return v / point[3];\n  });\n}\n\nfunction _updateAABBForGeometry(feature, aabb, geometryType) {\n  switch (geometryType) {\n    case \'line\':\n      return _updateAABBLine(feature, aabb);\n\n    case \'polygon\':\n      return _updateAABBPolygon(feature, aabb);\n  }\n}\n\nfunction _updateAABBLine(line, aabb) {\n  var vertices = line;\n  var numVertices = line.length;\n\n  for (var i = 0; i < numVertices; i += 2) {\n    aabb.minx = Math.min(aabb.minx, vertices[i + 0]);\n    aabb.miny = Math.min(aabb.miny, vertices[i + 1]);\n    aabb.maxx = Math.max(aabb.maxx, vertices[i + 0]);\n    aabb.maxy = Math.max(aabb.maxy, vertices[i + 1]);\n  }\n\n  return aabb;\n}\n\nfunction _updateAABBPolygon(polygon, aabb) {\n  var _ref11 = [polygon.flat, polygon.holes[0] || polygon.flat.length / 2],\n      vertices = _ref11[0],\n      numVertices = _ref11[1];\n\n  for (var i = 0; i < numVertices; i++) {\n    aabb.minx = Math.min(aabb.minx, vertices[2 * i + 0]);\n    aabb.miny = Math.min(aabb.miny, vertices[2 * i + 1]);\n    aabb.maxx = Math.max(aabb.maxx, vertices[2 * i + 0]);\n    aabb.maxy = Math.max(aabb.maxy, vertices[2 * i + 1]);\n  }\n\n  return aabb;\n}\n\n/* harmony default export */ __webpack_exports__["default"] = ({\n  intersect: intersect,\n  sub: sub,\n  dot: dot,\n  perpendicular: perpendicular,\n  getLineNormal: getLineNormal,\n  getJoinNormal: getJoinNormal,\n  neg: neg,\n  halfPlaneSign: halfPlaneSign,\n  pointInTriangle: pointInTriangle,\n  equalPoints: equalPoints,\n  pointInCircle: pointInCircle,\n  pointInRectangle: pointInRectangle\n});\n\n/***/ })\n\n/******/ });\n//# sourceMappingURL=7aa21aa1eb2eda4a5955.worker.js.map',"/dist/7aa21aa1eb2eda4a5955.worker.js")}},"./src/sources/SQL.js":
/*!****************************!*\
  !*** ./src/sources/SQL.js ***!
  \****************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return m});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(l),p=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),h=n.n(p),f=n(/*! ../../src/errors/carto-validation-error */"./src/errors/carto-validation-error.js"),d=n(/*! ../utils/util */"./src/utils/util.js"),m=function(e){function t(e,n,r){var o;return i()(this,t),(o=u()(this,c()(t).call(this)))._checkQuery(e),o._query=e,o.initialize(n,r),o}return h()(t,e),a()(t,[{key:"_getFromClause",value:function(){return"(".concat(this._query,") as _cdb_query_wrapper")}},{key:"_clone",value:function(){return new t(this._query,this._auth,this._config)}},{key:"_checkQuery",value:function(e){if(d.default.isUndefined(e))throw new f.default("".concat(f.CartoValidationTypes.MISSING_REQUIRED," 'query'"));if(!d.default.isString(e))throw new f.default("".concat(f.CartoValidationTypes.INCORRECT_TYPE," 'query' property must be a string."));if(""===e)throw new f.default("".concat(f.CartoValidationTypes.INCORRECT_VALUE," 'query' property must be not empty."));if(!e.match(/\bSELECT\b/i))throw new f.default("".concat(f.CartoValidationTypes.INCORRECT_VALUE," 'query' property must be a SQL query."))}}]),t}(n(/*! ./BaseWindshaft */"./src/sources/BaseWindshaft.js").default)},"./src/sources/TileClient.js":
/*!***********************************!*\
  !*** ./src/sources/TileClient.js ***!
  \***********************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return f});var r=n(/*! @babel/runtime/regenerator */"./node_modules/@babel/runtime/regenerator/index.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/asyncToGenerator */"./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),a=n.n(o),s=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),u=n.n(s),l=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),c=n.n(l),p=n(/*! ./DataframeCache */"./src/sources/DataframeCache.js"),h=n(/*! ../client/rsys */"./src/client/rsys.js"),f=function(){function e(t){u()(this,e),Array.isArray(t)||(t=[t]),this._templateURLs=t,this._requestGroupID=0,this._oldDataframes=[],this._cache=new p.default}var t;return c()(e,[{key:"bindLayer",value:function(e,t){this._addDataframe=e,this._dataLoadedCallback=t}},{key:"requestData",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.ceil,i=Object(h.rTiles)(e,t,r);this._getTiles(i,n)}},{key:"free",value:function(){this._cache.free(),this._cache=new p.default,this._oldDataframes=[]}},{key:"_getTileUrl",value:function(e,t,n){var r=this._getSubdomainIndex(e,t);return this._templateURLs[r].replace("{x}",e).replace("{y}",t).replace("{z}",n)}},{key:"_getSubdomainIndex",value:function(e,t){return Math.abs(e+t)%this._templateURLs.length}},{key:"_getTiles",value:function(e,t){var n=this;this._requestGroupID++;var r=[],i=e.length,o=this._requestGroupID;e.forEach(function(e){var a=e.x,s=e.y,u=e.z;n._cache.get("".concat(a,",").concat(s,",").concat(u),function(){return n._requestDataframe(a,s,u,t)}).then(function(e){e.orderID=a+s/1e3,e.empty?i--:r.push(e),r.length===i&&o===n._requestGroupID&&(n._oldDataframes.forEach(function(e){e.active=!1}),r.map(function(e){e.active=!0}),n._oldDataframes=r,n._dataLoadedCallback())})})}},{key:"_requestDataframe",value:(t=a()(i.a.mark(function e(t,n,r,o){var a,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=this._getTileUrl(t,n,r),e.next=3,o(t,n,r,a);case 3:return(s=e.sent).empty||this._addDataframe(s),e.abrupt("return",s);case 6:case"end":return e.stop()}},e,this)})),function(e,n,r,i){return t.apply(this,arguments)})}]),e}()},"./src/utils/collision.js":
/*!********************************!*\
  !*** ./src/utils/collision.js ***!
  \********************************/
/*! exports provided: triangleCollides */function(e,t,n){"use strict";n.r(t),n.d(t,"triangleCollides",function(){return a});var r=n(/*! ./geometry */"./src/utils/geometry.js"),i="separatingLineFound",o="separatingLineNotFound";function a(e,t){return function(e,t){if(t[0].x<e.minx&&t[1].x<e.minx&&t[2].x<e.minx)return i;if(t[0].y<e.miny&&t[1].y<e.miny&&t[2].y<e.miny)return i;if(t[0].x>e.maxx&&t[1].x>e.maxx&&t[2].x>e.maxx)return i;if(t[0].y>e.maxy&&t[1].y>e.maxy&&t[2].y>e.maxy)return i;return o}(t,e)!==i&&function(e,t){for(var n=0;n<3;n++)for(var a=0;a<t.length;a++){var s=Object(r.halfPlaneSign)(t[a],e[n],e[(n+1)%3]);if(s>0)break;if(3===a)return i}return o}(e,[{x:t.minx,y:t.miny},{x:t.minx,y:t.maxy},{x:t.maxx,y:t.miny},{x:t.maxx,y:t.maxy}])!==i}},"./src/utils/events.js":
/*!*****************************!*\
  !*** ./src/utils/events.js ***!
  \*****************************/
/*! exports provided: on, off */function(e,t,n){"use strict";n.r(t),n.d(t,"on",function(){return o}),n.d(t,"off",function(){return a});var r=n(/*! ../errors/carto-validation-error */"./src/errors/carto-validation-error.js"),i=[];function o(e,t,n){var o=[];if("loaded"===e){var a=new Set(t);t.forEach(function(e){var t=function(){a.delete(e),0===a.size&&n()};e.on("loaded",t),o.push(t)})}else{if("updated"!==e)throw new r.default("".concat(r.CartoValidationTypes.INCORRECT_VALUE," Event name '").concat(e,"' is not supported by \"carto.on\". Supported event names are: 'loaded' and 'updated'."));var s=!1;t.forEach(function(e){var t=function(){s||window.requestAnimationFrame(function(){s=!1,n()})};e.on("updated",t),o.push(t)})}i.push({eventName:e,layerList:t,callback:n,internalCallbacks:o})}function a(e,t,n){i.forEach(function(r){r.eventName===e&&r.layerList.every(function(e){return t.includes(e)})&&r.callback===n&&r.layerList.forEach(function(t){r.internalCallbacks.forEach(function(n){t.off(e,n)})})}),i=i.filter(function(r){return!(r.eventName===e&&r.layerList.every(function(e){return t.includes(e)})&&r.callback===n)})}},"./src/utils/geometry.js":
/*!*******************************!*\
  !*** ./src/utils/geometry.js ***!
  \*******************************/
/*! exports provided: intersect, sub, dot, perpendicular, getLineNormal, getJoinNormal, neg, pointInTriangle, halfPlaneSign, equalPoints, pointInCircle, pointInRectangle, computeAABB, unproject, default */function(e,t,n){"use strict";n.r(t),n.d(t,"intersect",function(){return a}),n.d(t,"sub",function(){return s}),n.d(t,"dot",function(){return u}),n.d(t,"perpendicular",function(){return l}),n.d(t,"getLineNormal",function(){return c}),n.d(t,"getJoinNormal",function(){return p}),n.d(t,"neg",function(){return h}),n.d(t,"pointInTriangle",function(){return f}),n.d(t,"halfPlaneSign",function(){return d}),n.d(t,"equalPoints",function(){return m}),n.d(t,"pointInCircle",function(){return _}),n.d(t,"pointInRectangle",function(){return y}),n.d(t,"computeAABB",function(){return v}),n.d(t,"unproject",function(){return g});var r=n(/*! @babel/runtime/helpers/slicedToArray */"./node_modules/@babel/runtime/helpers/slicedToArray.js"),i=n.n(r),o=n(/*! gl-matrix */"./node_modules/gl-matrix/lib/gl-matrix.js");function a(e,t,n,r){var i=e,o=n,a=s(t,e),c=s(r,n),p=l(a),h=l(c),f=u(s(o,i),h)/u(a,h),d=u(s(i,o),p)/u(c,p);if(f>=0&&f<=1&&d>=0&&d<=1)return[i[0]+f*a[0],i[1]+f*a[1]]}function s(e,t){var n=i()(e,2),r=n[0],o=n[1],a=i()(t,2);return[r-a[0],o-a[1]]}function u(e,t){var n=i()(e,2),r=n[0],o=n[1],a=i()(t,2);return r*a[0]+o*a[1]}function l(e){var t=i()(e,2),n=t[0];return[-t[1],n]}function c(e,t){var n,r,i,o=(n=e[0]-t[0],r=e[1]-t[1],i=Math.hypot(n,r),[n/i,r/i]);return[-o[1],o[0]]}function p(e,t){var n=[e[1],-e[0]],r=[-t[1],t[0]],i=r[0]*n[1]-r[1]*n[0],o=r[0]*n[0]+r[1]*n[1],a=Math.abs(i);return{turnLeft:i>0,joinNormal:!(a<.866&&o>.5)&&h([(n[0]+r[0])/a,(n[1]+r[1])/a])}}function h(e){return[-e[0],-e[1]]}function f(e,t,n,r){if(m(t,n)||m(n,r)||m(r,t))return!1;var i=d(e,t,n)<0,o=d(e,n,r)<0,a=d(e,r,t)<0;return i===o&&o===a}function d(e,t,n){return(e.x-n.x)*(t.y-n.y)-(t.x-n.x)*(e.y-n.y)}function m(e,t){return e.x===t.x&&e.y===t.y}function _(e,t,n){var r=e.x-t.x,i=e.y-t.y;return r*r+i*i<=n*n}function y(e,t){if(null===t)return!1;var n=e.x.toFixed(2),r=e.y.toFixed(2);return t.minx<=n&&n<=t.maxx&&t.miny<=r&&r<=t.maxy}function v(e,t){switch(t){case"point":return[];case"line":case"polygon":for(var n=[],r=0;r<e.length;r++){for(var i=e[r],o={minx:Number.POSITIVE_INFINITY,miny:Number.POSITIVE_INFINITY,maxx:Number.NEGATIVE_INFINITY,maxy:Number.NEGATIVE_INFINITY},a=0;a<i.length;a++)o=b(i[a],o,t);o.minx===Number.POSITIVE_INFINITY&&(o=null),n.push(o)}return n}}function g(e,t,n){var r=o.vec4.transformMat4([],[t,n,1,1],e)[2],i=(r-o.vec4.transformMat4([],[t,n,2,1],e)[2])/-1,a=-(r-1*i)/i;return o.vec4.transformMat4([],[t,n,a,1],e).map(function(e,t,n){return e/n[3]})}function b(e,t,n){switch(n){case"line":return function(e,t){for(var n=e,r=e.length,i=0;i<r;i+=2)t.minx=Math.min(t.minx,n[i+0]),t.miny=Math.min(t.miny,n[i+1]),t.maxx=Math.max(t.maxx,n[i+0]),t.maxy=Math.max(t.maxy,n[i+1]);return t}(e,t);case"polygon":return function(e,t){for(var n=[e.flat,e.holes[0]||e.flat.length/2],r=n[0],i=n[1],o=0;o<i;o++)t.minx=Math.min(t.minx,r[2*o+0]),t.miny=Math.min(t.miny,r[2*o+1]),t.maxx=Math.max(t.maxx,r[2*o+0]),t.maxy=Math.max(t.maxy,r[2*o+1]);return t}(e,t)}}t.default={intersect:a,sub:s,dot:u,perpendicular:l,getLineNormal:c,getJoinNormal:p,neg:h,halfPlaneSign:d,pointInTriangle:f,equalPoints:m,pointInCircle:_,pointInRectangle:y}},"./src/utils/util.js":
/*!***************************!*\
  !*** ./src/utils/util.js ***!
  \***************************/
/*! exports provided: WM_R, WM_2R, isUndefined, isString, isNumber, isObject, regExpThatContains, castDate, isSetsEqual, equalArrays, projectToWebMercator, computeMapZoom, computeMapCenter, computeMatrixZoom, computeMatrixCenter, default */function(e,t,n){"use strict";n.r(t),n.d(t,"WM_R",function(){return l}),n.d(t,"WM_2R",function(){return c}),n.d(t,"isUndefined",function(){return p}),n.d(t,"isString",function(){return h}),n.d(t,"isNumber",function(){return f}),n.d(t,"isObject",function(){return d}),n.d(t,"regExpThatContains",function(){return m}),n.d(t,"castDate",function(){return _}),n.d(t,"isSetsEqual",function(){return y}),n.d(t,"equalArrays",function(){return v}),n.d(t,"projectToWebMercator",function(){return g}),n.d(t,"computeMapZoom",function(){return b}),n.d(t,"computeMapCenter",function(){return x}),n.d(t,"computeMatrixZoom",function(){return w}),n.d(t,"computeMatrixCenter",function(){return E});var r=n(/*! @babel/runtime/helpers/toConsumableArray */"./node_modules/@babel/runtime/helpers/toConsumableArray.js"),i=n.n(r),o=n(/*! @babel/runtime/helpers/typeof */"./node_modules/@babel/runtime/helpers/typeof.js"),a=n.n(o),s=Math.PI/180,u=6378137,l=u*Math.PI,c=2*l;function p(e){return void 0===e}function h(e){return"string"==typeof e}function f(e){return"number"==typeof e}function d(e){var t=a()(e);return null!==e&&("object"===t||"function"===t)}function m(e){var t=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return new RegExp(t)}function _(e){if(e instanceof Date)return e;if("number"==typeof e){var t=e;return(e=new Date(0)).setUTCMilliseconds(t),e}return new Date(e)}function y(e,t){return e.size===t.size&&i()(e).every(function(e){return t.has(e)})}function v(e,t){if(e&&t&&e.length===t.length){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}}function g(e){var t=e.lat*s;return{x:e.lng*s*u,y:Math.log(Math.tan(t/2+Math.PI/4))*u}}function b(e){var t=e.getBounds(),n=t.getNorthWest(),r=t.getSouthWest();return(g(n).y-g(r).y)/c}function x(e){var t=g(e.getCenter());return{x:t.x/l,y:t.y/l}}function w(e){return-2*e[15]/e[5]}function E(e){return{x:-(1+2*e[12]/e[0]),y:+(1+2*e[13]/e[5])}}t.default={WM_R:l,WM_2R:c,isUndefined:p,isString:h,isNumber:f,isObject:d,castDate:_,isSetsEqual:y,equalArrays:v,projectToWebMercator:g,computeMapZoom:b,computeMapCenter:x,computeMatrixZoom:w,computeMatrixCenter:E}}})},e.exports=r()},function(e,t,n){e.exports=n(88)},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";var r=n(7),i=n(92),o=n(94),a=n(95),s=n(96),u=n(37);e.exports=function(e){return new Promise(function(t,l){var c=e.data,p=e.headers;r.isFormData(c)&&delete p["Content-Type"];var h=new XMLHttpRequest;if(e.auth){var f=e.auth.username||"",d=e.auth.password||"";p.Authorization="Basic "+btoa(f+":"+d)}if(h.open(e.method.toUpperCase(),o(e.url,e.params,e.paramsSerializer),!0),h.timeout=e.timeout,h.onreadystatechange=function(){if(h&&4===h.readyState&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in h?a(h.getAllResponseHeaders()):null,r={data:e.responseType&&"text"!==e.responseType?h.response:h.responseText,status:h.status,statusText:h.statusText,headers:n,config:e,request:h};i(t,l,r),h=null}},h.onerror=function(){l(u("Network Error",e,null,h)),h=null},h.ontimeout=function(){l(u("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",h)),h=null},r.isStandardBrowserEnv()){var m=n(97),_=(e.withCredentials||s(e.url))&&e.xsrfCookieName?m.read(e.xsrfCookieName):void 0;_&&(p[e.xsrfHeaderName]=_)}if("setRequestHeader"in h&&r.forEach(p,function(e,t){void 0===c&&"content-type"===t.toLowerCase()?delete p[t]:h.setRequestHeader(t,e)}),e.withCredentials&&(h.withCredentials=!0),e.responseType)try{h.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&h.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){h&&(h.abort(),l(e),h=null)}),void 0===c&&(c=null),h.send(c)})}},function(e,t,n){"use strict";var r=n(93);e.exports=function(e,t,n,i,o){var a=new Error(e);return r(a,t,n,i,o)}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(1),i=n.n(r),o=n(0),a=n.n(o),s=n(45),u=n.n(s),l=n(3),c=n.n(l),p=n(4),h=n.n(p),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=d(this,e.call.apply(e,[this].concat(o))),r.state={match:r.computeMatch(r.props.history.location.pathname)},d(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{router:f({},this.context.router,{history:this.props.history,route:{location:this.props.history.location,match:this.state.match}})}},t.prototype.computeMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}},t.prototype.componentWillMount=function(){var e=this,t=this.props,n=t.children,r=t.history;h()(null==n||1===i.a.Children.count(n),"A <Router> may have only one child element"),this.unlisten=r.listen(function(){e.setState({match:e.computeMatch(r.location.pathname)})})},t.prototype.componentWillReceiveProps=function(e){c()(this.props.history===e.history,"You cannot change <Router history>")},t.prototype.componentWillUnmount=function(){this.unlisten()},t.prototype.render=function(){var e=this.props.children;return e?i.a.Children.only(e):null},t}(i.a.Component);m.propTypes={history:a.a.object.isRequired,children:a.a.node},m.contextTypes={router:a.a.object},m.childContextTypes={router:a.a.object.isRequired};var _=m;function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var v=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=y(this,e.call.apply(e,[this].concat(o))),r.history=u()(r.props),y(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){return i.a.createElement(_,{history:this.history,children:this.props.children})},t}(i.a.Component);v.propTypes={basename:a.a.string,forceRefresh:a.a.bool,getUserConfirmation:a.a.func,keyLength:a.a.number,children:a.a.node};var g=v,b=n(46),x=n.n(b);function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var E=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=w(this,e.call.apply(e,[this].concat(o))),r.history=x()(r.props),w(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){return i.a.createElement(_,{history:this.history,children:this.props.children})},t}(i.a.Component);E.propTypes={basename:a.a.string,getUserConfirmation:a.a.func,hashType:a.a.oneOf(["hashbang","noslash","slash"]),children:a.a.node};var T=E,k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var M=function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)},P=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=C(this,e.call.apply(e,[this].concat(o))),r.handleClick=function(e){if(r.props.onClick&&r.props.onClick(e),!e.defaultPrevented&&0===e.button&&!r.props.target&&!M(e)){e.preventDefault();var t=r.context.router.history,n=r.props,i=n.replace,o=n.to;i?t.replace(o):t.push(o)}},C(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=(e.replace,e.to),n=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["replace","to"]),r=this.context.router.history.createHref("string"==typeof t?{pathname:t}:t);return i.a.createElement("a",k({},n,{onClick:this.handleClick,href:r}))},t}(i.a.Component);P.propTypes={onClick:a.a.func,target:a.a.string,replace:a.a.bool,to:a.a.oneOfType([a.a.string,a.a.object]).isRequired},P.defaultProps={replace:!1},P.contextTypes={router:a.a.shape({history:a.a.shape({push:a.a.func.isRequired,replace:a.a.func.isRequired,createHref:a.a.func.isRequired}).isRequired}).isRequired};var A=P;function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var O=n(20),I=n(21);n(15);function R(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function j(e,t,n,r){var i;"string"==typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var o=t.indexOf("?");return-1!==o&&(n=t.substr(o),t=t.substr(0,o)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e)).state=t:(void 0===(i=S({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=Object(O.default)(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function L(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&Object(I.default)(e.state,t.state)}function z(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var o="function"==typeof e?e(t,n):e;"string"==typeof o?"function"==typeof r?r(o,i):i(!0):i(!1!==o)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter(function(e){return e!==r})}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach(function(e){return e.apply(void 0,n)})}}}"undefined"==typeof window||!window.document||window.document.createElement;function D(e,t,n){return Math.min(Math.max(e,t),n)}function B(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var N=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=B(this,e.call.apply(e,[this].concat(o))),r.history=function(e){void 0===e&&(e={});var t=e,n=t.getUserConfirmation,r=t.initialEntries,i=void 0===r?["/"]:r,o=t.initialIndex,a=void 0===o?0:o,s=t.keyLength,u=void 0===s?6:s,l=z();function c(e){S(_,e),_.length=_.entries.length,l.notifyListeners(_.location,_.action)}function p(){return Math.random().toString(36).substr(2,u)}var h=D(a,0,i.length-1),f=i.map(function(e){return j(e,void 0,"string"==typeof e?p():e.key||p())}),d=R;function m(e){var t=D(_.index+e,0,_.entries.length-1),r=_.entries[t];l.confirmTransitionTo(r,"POP",n,function(e){e?c({action:"POP",location:r,index:t}):c()})}var _={length:f.length,action:"POP",location:f[h],index:h,entries:f,createHref:d,push:function(e,t){var r=j(e,t,p(),_.location);l.confirmTransitionTo(r,"PUSH",n,function(e){if(e){var t=_.index+1,n=_.entries.slice(0);n.length>t?n.splice(t,n.length-t,r):n.push(r),c({action:"PUSH",location:r,index:t,entries:n})}})},replace:function(e,t){var r=j(e,t,p(),_.location);l.confirmTransitionTo(r,"REPLACE",n,function(e){e&&(_.entries[_.index]=r,c({action:"REPLACE",location:r}))})},go:m,goBack:function(){m(-1)},goForward:function(){m(1)},canGo:function(e){var t=_.index+e;return t>=0&&t<_.entries.length},block:function(e){return void 0===e&&(e=!1),l.setPrompt(e)},listen:function(e){return l.appendListener(e)}};return _}(r.props),B(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){c()(!this.props.history,"<MemoryRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { MemoryRouter as Router }`.")},t.prototype.render=function(){return i.a.createElement(_,{history:this.history,children:this.props.children})},t}(i.a.Component);N.propTypes={initialEntries:a.a.array,initialIndex:a.a.number,getUserConfirmation:a.a.func,keyLength:a.a.number,children:a.a.node};var q=N,F=n(16),U=n.n(F),V={},W=0,G=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=V[n]||(V[n]={});if(r[e])return r[e];var i=[],o={re:U()(e,i,t),keys:i};return W<1e4&&(r[e]=o,W++),o},Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];"string"==typeof t&&(t={path:t});var r=t,i=r.path,o=r.exact,a=void 0!==o&&o,s=r.strict,u=void 0!==s&&s,l=r.sensitive,c=void 0!==l&&l;if(null==i)return n;var p=G(i,{end:a,strict:u,sensitive:c}),h=p.re,f=p.keys,d=h.exec(e);if(!d)return null;var m=d[0],_=d.slice(1),y=e===m;return a&&!y?null:{path:i,url:"/"===i&&""===m?"/":m,isExact:y,params:f.reduce(function(e,t,n){return e[t.name]=_[n],e},{})}},H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function K(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Y=function(e){return 0===i.a.Children.count(e)},X=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=K(this,e.call.apply(e,[this].concat(o))),r.state={match:r.computeMatch(r.props,r.context.router)},K(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{router:H({},this.context.router,{route:{location:this.props.location||this.context.router.route.location,match:this.state.match}})}},t.prototype.computeMatch=function(e,t){var n=e.computedMatch,r=e.location,i=e.path,o=e.strict,a=e.exact,s=e.sensitive;if(n)return n;h()(t,"You should not use <Route> or withRouter() outside a <Router>");var u=t.route,l=(r||u.location).pathname;return Z(l,{path:i,strict:o,exact:a,sensitive:s},u.match)},t.prototype.componentWillMount=function(){c()(!(this.props.component&&this.props.render),"You should not use <Route component> and <Route render> in the same route; <Route render> will be ignored"),c()(!(this.props.component&&this.props.children&&!Y(this.props.children)),"You should not use <Route component> and <Route children> in the same route; <Route children> will be ignored"),c()(!(this.props.render&&this.props.children&&!Y(this.props.children)),"You should not use <Route render> and <Route children> in the same route; <Route children> will be ignored")},t.prototype.componentWillReceiveProps=function(e,t){c()(!(e.location&&!this.props.location),'<Route> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),c()(!(!e.location&&this.props.location),'<Route> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.'),this.setState({match:this.computeMatch(e,t.router)})},t.prototype.render=function(){var e=this.state.match,t=this.props,n=t.children,r=t.component,o=t.render,a=this.context.router,s=a.history,u=a.route,l=a.staticContext,c={match:e,location:this.props.location||u.location,history:s,staticContext:l};return r?e?i.a.createElement(r,c):null:o?e?o(c):null:"function"==typeof n?n(c):n&&!Y(n)?i.a.Children.only(n):null},t}(i.a.Component);X.propTypes={computedMatch:a.a.object,path:a.a.string,exact:a.a.bool,strict:a.a.bool,sensitive:a.a.bool,component:a.a.func,render:a.a.func,children:a.a.oneOfType([a.a.func,a.a.node]),location:a.a.object},X.contextTypes={router:a.a.shape({history:a.a.object.isRequired,route:a.a.object.isRequired,staticContext:a.a.object})},X.childContextTypes={router:a.a.object.isRequired};var $=X,J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var ee=function(e){var t=e.to,n=e.exact,r=e.strict,o=e.location,a=e.activeClassName,s=e.className,u=e.activeStyle,l=e.style,c=e.isActive,p=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["to","exact","strict","location","activeClassName","className","activeStyle","style","isActive"]);return i.a.createElement($,{path:"object"===(void 0===t?"undefined":Q(t))?t.pathname:t,exact:n,strict:r,location:o,children:function(e){var n=e.location,r=e.match,o=!!(c?c(r,n):r);return i.a.createElement(A,J({to:t,className:o?[a,s].filter(function(e){return e}).join(" "):s,style:o?J({},l,u):l},p))}})};ee.propTypes={to:A.propTypes.to,exact:a.a.bool,strict:a.a.bool,location:a.a.object,activeClassName:a.a.string,className:a.a.string,activeStyle:a.a.object,style:a.a.object,isActive:a.a.func},ee.defaultProps={activeClassName:"active"};var te=ee;var ne=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.enable=function(e){this.unblock&&this.unblock(),this.unblock=this.context.router.history.block(e)},t.prototype.disable=function(){this.unblock&&(this.unblock(),this.unblock=null)},t.prototype.componentWillMount=function(){h()(this.context.router,"You should not use <Prompt> outside a <Router>"),this.props.when&&this.enable(this.props.message)},t.prototype.componentWillReceiveProps=function(e){e.when?this.props.when&&this.props.message===e.message||this.enable(e.message):this.disable()},t.prototype.componentWillUnmount=function(){this.disable()},t.prototype.render=function(){return null},t}(i.a.Component);ne.propTypes={when:a.a.bool,message:a.a.oneOfType([a.a.func,a.a.string]).isRequired},ne.defaultProps={when:!0},ne.contextTypes={router:a.a.shape({history:a.a.shape({block:a.a.func.isRequired}).isRequired}).isRequired};var re=ne,ie={},oe=0,ae=function(e){var t=e,n=ie[t]||(ie[t]={});if(n[e])return n[e];var r=U.a.compile(e);return oe<1e4&&(n[e]=r,oe++),r},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("/"===e)return e;var n=ae(e);return n(t,{pretty:!0})},ue=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var le=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.isStatic=function(){return this.context.router&&this.context.router.staticContext},t.prototype.componentWillMount=function(){h()(this.context.router,"You should not use <Redirect> outside a <Router>"),this.isStatic()&&this.perform()},t.prototype.componentDidMount=function(){this.isStatic()||this.perform()},t.prototype.componentDidUpdate=function(e){var t=j(e.to),n=j(this.props.to);L(t,n)?c()(!1,"You tried to redirect to the same route you're currently on: \""+n.pathname+n.search+'"'):this.perform()},t.prototype.computeTo=function(e){var t=e.computedMatch,n=e.to;return t?"string"==typeof n?se(n,t.params):ue({},n,{pathname:se(n.pathname,t.params)}):n},t.prototype.perform=function(){var e=this.context.router.history,t=this.props.push,n=this.computeTo(this.props);t?e.push(n):e.replace(n)},t.prototype.render=function(){return null},t}(i.a.Component);le.propTypes={computedMatch:a.a.object,push:a.a.bool,from:a.a.string,to:a.a.oneOfType([a.a.string,a.a.object]).isRequired},le.defaultProps={push:!1},le.contextTypes={router:a.a.shape({history:a.a.shape({push:a.a.func.isRequired,replace:a.a.func.isRequired}).isRequired,staticContext:a.a.object}).isRequired};var ce=le,pe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function he(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var fe=function(e){return"/"===e.charAt(0)?e:"/"+e},de=function(e,t){return e?pe({},t,{pathname:fe(e)+t.pathname}):t},me=function(e,t){if(!e)return t;var n=fe(e);return 0!==t.pathname.indexOf(n)?t:pe({},t,{pathname:t.pathname.substr(n.length)})},_e=function(e){return"string"==typeof e?e:R(e)},ye=function(e){return function(){h()(!1,"You cannot %s with <StaticRouter>",e)}},ve=function(){},ge=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=he(this,e.call.apply(e,[this].concat(o))),r.createHref=function(e){return fe(r.props.basename+_e(e))},r.handlePush=function(e){var t=r.props,n=t.basename,i=t.context;i.action="PUSH",i.location=de(n,j(e)),i.url=_e(i.location)},r.handleReplace=function(e){var t=r.props,n=t.basename,i=t.context;i.action="REPLACE",i.location=de(n,j(e)),i.url=_e(i.location)},r.handleListen=function(){return ve},r.handleBlock=function(){return ve},he(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{router:{staticContext:this.props.context}}},t.prototype.componentWillMount=function(){c()(!this.props.history,"<StaticRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { StaticRouter as Router }`.")},t.prototype.render=function(){var e=this.props,t=e.basename,n=(e.context,e.location),r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["basename","context","location"]),o={createHref:this.createHref,action:"POP",location:me(t,j(n)),push:this.handlePush,replace:this.handleReplace,go:ye("go"),goBack:ye("goBack"),goForward:ye("goForward"),listen:this.handleListen,block:this.handleBlock};return i.a.createElement(_,pe({},r,{history:o}))},t}(i.a.Component);ge.propTypes={basename:a.a.string,context:a.a.object.isRequired,location:a.a.oneOfType([a.a.string,a.a.object])},ge.defaultProps={basename:"",location:"/"},ge.childContextTypes={router:a.a.object.isRequired};var be=ge;var xe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){h()(this.context.router,"You should not use <Switch> outside a <Router>")},t.prototype.componentWillReceiveProps=function(e){c()(!(e.location&&!this.props.location),'<Switch> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),c()(!(!e.location&&this.props.location),'<Switch> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.')},t.prototype.render=function(){var e=this.context.router.route,t=this.props.children,n=this.props.location||e.location,r=void 0,o=void 0;return i.a.Children.forEach(t,function(t){if(null==r&&i.a.isValidElement(t)){var a=t.props,s=a.path,u=a.exact,l=a.strict,c=a.sensitive,p=a.from,h=s||p;o=t,r=Z(n.pathname,{path:h,exact:u,strict:l,sensitive:c},e.match)}}),r?i.a.cloneElement(o,{location:n,computedMatch:r}):null},t}(i.a.Component);xe.contextTypes={router:a.a.shape({route:a.a.object.isRequired}).isRequired},xe.propTypes={children:a.a.node,location:a.a.object};var we=xe,Ee=n(13),Te=n.n(Ee),ke=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var Ce=function(e){var t=function(t){var n=t.wrappedComponentRef,r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["wrappedComponentRef"]);return i.a.createElement($,{children:function(t){return i.a.createElement(e,ke({},r,t,{ref:n}))}})};return t.displayName="withRouter("+(e.displayName||e.name)+")",t.WrappedComponent=e,t.propTypes={wrappedComponentRef:a.a.func},Te()(t,e)};n.d(t,"BrowserRouter",function(){return g}),n.d(t,"HashRouter",function(){return T}),n.d(t,"Link",function(){return A}),n.d(t,"MemoryRouter",function(){return q}),n.d(t,"NavLink",function(){return te}),n.d(t,"Prompt",function(){return re}),n.d(t,"Redirect",function(){return ce}),n.d(t,"Route",function(){return $}),n.d(t,"Router",function(){return _}),n.d(t,"StaticRouter",function(){return be}),n.d(t,"Switch",function(){return we}),n.d(t,"matchPath",function(){return Z}),n.d(t,"withRouter",function(){return Ce})},function(e,t,n){"use strict";var r={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0},o="function"==typeof Object.getOwnPropertySymbols;e.exports=function(e,t,n){if("string"!=typeof t){var a=Object.getOwnPropertyNames(t);o&&(a=a.concat(Object.getOwnPropertySymbols(t)));for(var s=0;s<a.length;++s)if(!(r[a[s]]||i[a[s]]||n&&n[a[s]]))try{e[a[s]]=t[a[s]]}catch(e){}}return e}},function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.a=n}).call(this,n(14))},function(e,t,n){"use strict";n(27)("createBrowserHistory"),e.exports=n(28).createBrowserHistory},function(e,t,n){"use strict";n(27)("createHashHistory"),e.exports=n(28).createHashHistory},function(e,t,n){"use strict";var r=n(63),i=/^ms-/;e.exports=function(e){return r(e).replace(i,"-ms-")}},function(e,t,n){e.exports=function(){"use strict";return function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(n,r,i,o,a,s,u,l,c,p){switch(n){case 1:if(0===c&&64===r.charCodeAt(0))return e(r+";"),"";break;case 2:if(0===l)return r+"/*|*/";break;case 3:switch(l){case 102:case 112:return e(i[0]+r),"";default:return r+(0===p?"/*|*/":"")}case-2:r.split("/*|*/}").forEach(t)}}}}()},function(e,t,n){"use strict";e.exports=n(64)},function(e,t,n){"use strict";var r=u(n(1)),i=u(n(5)),o=n(2),a=u(n(57)),s=u(n(114));function u(e){return e&&e.__esModule?e:{default:e}}n(122),n(123);var l=(0,s.default)(),c=r.default.createElement(o.Provider,{store:l},r.default.createElement(a.default,null));i.default.render(c,document.getElementById("app"))},function(e,t,n){"use strict";
/** @license React v16.8.6
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(25),i="function"==typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,u=i?Symbol.for("react.strict_mode"):60108,l=i?Symbol.for("react.profiler"):60114,c=i?Symbol.for("react.provider"):60109,p=i?Symbol.for("react.context"):60110,h=i?Symbol.for("react.concurrent_mode"):60111,f=i?Symbol.for("react.forward_ref"):60112,d=i?Symbol.for("react.suspense"):60113,m=i?Symbol.for("react.memo"):60115,_=i?Symbol.for("react.lazy"):60116,y="function"==typeof Symbol&&Symbol.iterator;function v(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);!function(e,t,n,r,i,o,a,s){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,o,a,s],l=0;(e=Error(t.replace(/%s/g,function(){return u[l++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function x(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||g}function w(){}function E(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||g}x.prototype.isReactComponent={},x.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&v("85"),this.updater.enqueueSetState(this,e,t,"setState")},x.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},w.prototype=x.prototype;var T=E.prototype=new w;T.constructor=E,r(T,x.prototype),T.isPureReactComponent=!0;var k={current:null},C={current:null},M=Object.prototype.hasOwnProperty,P={key:!0,ref:!0,__self:!0,__source:!0};function A(e,t,n){var r=void 0,i={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)M.call(t,r)&&!P.hasOwnProperty(r)&&(i[r]=t[r]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:o,type:e,key:a,ref:s,props:i,_owner:C.current}}function S(e){return"object"==typeof e&&null!==e&&e.$$typeof===o}var O=/\/+/g,I=[];function R(e,t,n,r){if(I.length){var i=I.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function j(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>I.length&&I.push(e)}function L(e,t,n){return null==e?0:function e(t,n,r,i){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var u=!1;if(null===t)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case o:case a:u=!0}}if(u)return r(i,t,""===n?"."+z(t,0):n),1;if(u=0,n=""===n?".":n+":",Array.isArray(t))for(var l=0;l<t.length;l++){var c=n+z(s=t[l],l);u+=e(s,c,r,i)}else if(c=null===t||"object"!=typeof t?null:"function"==typeof(c=y&&t[y]||t["@@iterator"])?c:null,"function"==typeof c)for(t=c.call(t),l=0;!(s=t.next()).done;)u+=e(s=s.value,c=n+z(s,l++),r,i);else"object"===s&&v("31","[object Object]"==(r=""+t)?"object with keys {"+Object.keys(t).join(", ")+"}":r,"");return u}(e,"",t,n)}function z(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}(e.key):t.toString(36)}function D(e,t){e.func.call(e.context,t,e.count++)}function B(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?N(e,r,n,function(e){return e}):null!=e&&(S(e)&&(e=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(O,"$&/")+"/")+n)),r.push(e))}function N(e,t,n,r,i){var o="";null!=n&&(o=(""+n).replace(O,"$&/")+"/"),L(e,B,t=R(t,o,r,i)),j(t)}function q(){var e=k.current;return null===e&&v("321"),e}var F={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return N(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;L(e,D,t=R(null,null,t,n)),j(t)},count:function(e){return L(e,function(){return null},null)},toArray:function(e){var t=[];return N(e,t,null,function(e){return e}),t},only:function(e){return S(e)||v("143"),e}},createRef:function(){return{current:null}},Component:x,PureComponent:E,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:p,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:f,render:e}},lazy:function(e){return{$$typeof:_,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:m,type:e,compare:void 0===t?null:t}},useCallback:function(e,t){return q().useCallback(e,t)},useContext:function(e,t){return q().useContext(e,t)},useEffect:function(e,t){return q().useEffect(e,t)},useImperativeHandle:function(e,t,n){return q().useImperativeHandle(e,t,n)},useDebugValue:function(){},useLayoutEffect:function(e,t){return q().useLayoutEffect(e,t)},useMemo:function(e,t){return q().useMemo(e,t)},useReducer:function(e,t,n){return q().useReducer(e,t,n)},useRef:function(e){return q().useRef(e)},useState:function(e){return q().useState(e)},Fragment:s,StrictMode:u,Suspense:d,createElement:A,cloneElement:function(e,t,n){null==e&&v("267",e);var i=void 0,a=r({},e.props),s=e.key,u=e.ref,l=e._owner;if(null!=t){void 0!==t.ref&&(u=t.ref,l=C.current),void 0!==t.key&&(s=""+t.key);var c=void 0;for(i in e.type&&e.type.defaultProps&&(c=e.type.defaultProps),t)M.call(t,i)&&!P.hasOwnProperty(i)&&(a[i]=void 0===t[i]&&void 0!==c?c[i]:t[i])}if(1===(i=arguments.length-2))a.children=n;else if(1<i){c=Array(i);for(var p=0;p<i;p++)c[p]=arguments[p+2];a.children=c}return{$$typeof:o,type:e.type,key:s,ref:u,props:a,_owner:l}},createFactory:function(e){var t=A.bind(null,e);return t.type=e,t},isValidElement:S,version:"16.8.6",unstable_ConcurrentMode:h,unstable_Profiler:l,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:k,ReactCurrentOwner:C,assign:r}},U={default:F},V=U&&F||U;e.exports=V.default||V},function(e,t,n){"use strict";
/** @license React v16.8.6
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(1),i=n(25),o=n(53);function a(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);!function(e,t,n,r,i,o,a,s){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,o,a,s],l=0;(e=Error(t.replace(/%s/g,function(){return u[l++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}r||a("227");var s=!1,u=null,l=!1,c=null,p={onError:function(e){s=!0,u=e}};function h(e,t,n,r,i,o,a,l,c){s=!1,u=null,function(e,t,n,r,i,o,a,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(e){this.onError(e)}}.apply(p,arguments)}var f=null,d={};function m(){if(f)for(var e in d){var t=d[e],n=f.indexOf(e);if(-1<n||a("96",e),!y[n])for(var r in t.extractEvents||a("97",e),y[n]=t,n=t.eventTypes){var i=void 0,o=n[r],s=t,u=r;v.hasOwnProperty(u)&&a("99",u),v[u]=o;var l=o.phasedRegistrationNames;if(l){for(i in l)l.hasOwnProperty(i)&&_(l[i],s,u);i=!0}else o.registrationName?(_(o.registrationName,s,u),i=!0):i=!1;i||a("98",r,e)}}}function _(e,t,n){g[e]&&a("100",e),g[e]=t,b[e]=t.eventTypes[n].dependencies}var y=[],v={},g={},b={},x=null,w=null,E=null;function T(e,t,n){var r=e.type||"unknown-event";e.currentTarget=E(n),function(e,t,n,r,i,o,p,f,d){if(h.apply(this,arguments),s){if(s){var m=u;s=!1,u=null}else a("198"),m=void 0;l||(l=!0,c=m)}}(r,t,void 0,e),e.currentTarget=null}function k(e,t){return null==t&&a("30"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function C(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var M=null;function P(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)T(e,t[r],n[r]);else t&&T(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}var A={injectEventPluginOrder:function(e){f&&a("101"),f=Array.prototype.slice.call(e),m()},injectEventPluginsByName:function(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];d.hasOwnProperty(t)&&d[t]===r||(d[t]&&a("102",t),d[t]=r,n=!0)}n&&m()}};function S(e,t){var n=e.stateNode;if(!n)return null;var r=x(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}return e?null:(n&&"function"!=typeof n&&a("231",t,typeof n),n)}function O(e){if(null!==e&&(M=k(M,e)),e=M,M=null,e&&(C(e,P),M&&a("95"),l))throw e=c,l=!1,c=null,e}var I=Math.random().toString(36).slice(2),R="__reactInternalInstance$"+I,j="__reactEventHandlers$"+I;function L(e){if(e[R])return e[R];for(;!e[R];){if(!e.parentNode)return null;e=e.parentNode}return 5===(e=e[R]).tag||6===e.tag?e:null}function z(e){return!(e=e[R])||5!==e.tag&&6!==e.tag?null:e}function D(e){if(5===e.tag||6===e.tag)return e.stateNode;a("33")}function B(e){return e[j]||null}function N(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function q(e,t,n){(t=S(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=k(n._dispatchListeners,t),n._dispatchInstances=k(n._dispatchInstances,e))}function F(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=N(t);for(t=n.length;0<t--;)q(n[t],"captured",e);for(t=0;t<n.length;t++)q(n[t],"bubbled",e)}}function U(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=S(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=k(n._dispatchListeners,t),n._dispatchInstances=k(n._dispatchInstances,e))}function V(e){e&&e.dispatchConfig.registrationName&&U(e._targetInst,null,e)}function W(e){C(e,F)}var G=!("undefined"==typeof window||!window.document||!window.document.createElement);function Z(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var H={animationend:Z("Animation","AnimationEnd"),animationiteration:Z("Animation","AnimationIteration"),animationstart:Z("Animation","AnimationStart"),transitionend:Z("Transition","TransitionEnd")},K={},Y={};function X(e){if(K[e])return K[e];if(!H[e])return e;var t,n=H[e];for(t in n)if(n.hasOwnProperty(t)&&t in Y)return K[e]=n[t];return e}G&&(Y=document.createElement("div").style,"AnimationEvent"in window||(delete H.animationend.animation,delete H.animationiteration.animation,delete H.animationstart.animation),"TransitionEvent"in window||delete H.transitionend.transition);var $=X("animationend"),J=X("animationiteration"),Q=X("animationstart"),ee=X("transitionend"),te="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ne=null,re=null,ie=null;function oe(){if(ie)return ie;var e,t,n=re,r=n.length,i="value"in ne?ne.value:ne.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return ie=i.slice(e,1<t?1-t:void 0)}function ae(){return!0}function se(){return!1}function ue(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?ae:se,this.isPropagationStopped=se,this}function le(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function ce(e){e instanceof this||a("279"),e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function pe(e){e.eventPool=[],e.getPooled=le,e.release=ce}i(ue.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=ae)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=ae)},persist:function(){this.isPersistent=ae},isPersistent:se,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=se,this._dispatchInstances=this._dispatchListeners=null}}),ue.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},ue.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var o=new t;return i(o,n.prototype),n.prototype=o,n.prototype.constructor=n,n.Interface=i({},r.Interface,e),n.extend=r.extend,pe(n),n},pe(ue);var he=ue.extend({data:null}),fe=ue.extend({data:null}),de=[9,13,27,32],me=G&&"CompositionEvent"in window,_e=null;G&&"documentMode"in document&&(_e=document.documentMode);var ye=G&&"TextEvent"in window&&!_e,ve=G&&(!me||_e&&8<_e&&11>=_e),ge=String.fromCharCode(32),be={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},xe=!1;function we(e,t){switch(e){case"keyup":return-1!==de.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function Ee(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Te=!1;var ke={eventTypes:be,extractEvents:function(e,t,n,r){var i=void 0,o=void 0;if(me)e:{switch(e){case"compositionstart":i=be.compositionStart;break e;case"compositionend":i=be.compositionEnd;break e;case"compositionupdate":i=be.compositionUpdate;break e}i=void 0}else Te?we(e,n)&&(i=be.compositionEnd):"keydown"===e&&229===n.keyCode&&(i=be.compositionStart);return i?(ve&&"ko"!==n.locale&&(Te||i!==be.compositionStart?i===be.compositionEnd&&Te&&(o=oe()):(re="value"in(ne=r)?ne.value:ne.textContent,Te=!0)),i=he.getPooled(i,t,n,r),o?i.data=o:null!==(o=Ee(n))&&(i.data=o),W(i),o=i):o=null,(e=ye?function(e,t){switch(e){case"compositionend":return Ee(t);case"keypress":return 32!==t.which?null:(xe=!0,ge);case"textInput":return(e=t.data)===ge&&xe?null:e;default:return null}}(e,n):function(e,t){if(Te)return"compositionend"===e||!me&&we(e,t)?(e=oe(),ie=re=ne=null,Te=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ve&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))?((t=fe.getPooled(be.beforeInput,t,n,r)).data=e,W(t)):t=null,null===o?t:null===t?o:[o,t]}},Ce=null,Me=null,Pe=null;function Ae(e){if(e=w(e)){"function"!=typeof Ce&&a("280");var t=x(e.stateNode);Ce(e.stateNode,e.type,t)}}function Se(e){Me?Pe?Pe.push(e):Pe=[e]:Me=e}function Oe(){if(Me){var e=Me,t=Pe;if(Pe=Me=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Ie(e,t){return e(t)}function Re(e,t,n){return e(t,n)}function je(){}var Le=!1;function ze(e,t){if(Le)return e(t);Le=!0;try{return Ie(e,t)}finally{Le=!1,(null!==Me||null!==Pe)&&(je(),Oe())}}var De={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Be(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!De[e.type]:"textarea"===t}function Ne(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function qe(e){if(!G)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t}function Fe(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Ue(e){e._valueTracker||(e._valueTracker=function(e){var t=Fe(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Ve(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Fe(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}var We=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;We.hasOwnProperty("ReactCurrentDispatcher")||(We.ReactCurrentDispatcher={current:null});var Ge=/^(.*)[\\\/]/,Ze="function"==typeof Symbol&&Symbol.for,He=Ze?Symbol.for("react.element"):60103,Ke=Ze?Symbol.for("react.portal"):60106,Ye=Ze?Symbol.for("react.fragment"):60107,Xe=Ze?Symbol.for("react.strict_mode"):60108,$e=Ze?Symbol.for("react.profiler"):60114,Je=Ze?Symbol.for("react.provider"):60109,Qe=Ze?Symbol.for("react.context"):60110,et=Ze?Symbol.for("react.concurrent_mode"):60111,tt=Ze?Symbol.for("react.forward_ref"):60112,nt=Ze?Symbol.for("react.suspense"):60113,rt=Ze?Symbol.for("react.memo"):60115,it=Ze?Symbol.for("react.lazy"):60116,ot="function"==typeof Symbol&&Symbol.iterator;function at(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=ot&&e[ot]||e["@@iterator"])?e:null}function st(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case et:return"ConcurrentMode";case Ye:return"Fragment";case Ke:return"Portal";case $e:return"Profiler";case Xe:return"StrictMode";case nt:return"Suspense"}if("object"==typeof e)switch(e.$$typeof){case Qe:return"Context.Consumer";case Je:return"Context.Provider";case tt:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case rt:return st(e.type);case it:if(e=1===e._status?e._result:null)return st(e)}return null}function ut(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,o=st(e.type);n=null,r&&(n=st(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(Ge,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}t+=n,e=e.return}while(e);return t}var lt=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ct=Object.prototype.hasOwnProperty,pt={},ht={};function ft(e,t,n,r,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t}var dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){dt[e]=new ft(e,0,!1,e,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];dt[t]=new ft(t,1,!1,e[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){dt[e]=new ft(e,2,!1,e.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){dt[e]=new ft(e,2,!1,e,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){dt[e]=new ft(e,3,!1,e.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(e){dt[e]=new ft(e,3,!0,e,null)}),["capture","download"].forEach(function(e){dt[e]=new ft(e,4,!1,e,null)}),["cols","rows","size","span"].forEach(function(e){dt[e]=new ft(e,6,!1,e,null)}),["rowSpan","start"].forEach(function(e){dt[e]=new ft(e,5,!1,e.toLowerCase(),null)});var mt=/[\-:]([a-z])/g;function _t(e){return e[1].toUpperCase()}function yt(e,t,n,r){var i=dt.hasOwnProperty(t)?dt[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!ct.call(ht,e)||!ct.call(pt,e)&&(lt.test(e)?ht[e]=!0:(pt[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}function vt(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function gt(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function bt(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=vt(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function xt(e,t){null!=(t=t.checked)&&yt(e,"checked",t,!1)}function wt(e,t){xt(e,t);var n=vt(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Tt(e,t.type,n):t.hasOwnProperty("defaultValue")&&Tt(e,t.type,vt(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Et(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Tt(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(mt,_t);dt[t]=new ft(t,1,!1,e,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(mt,_t);dt[t]=new ft(t,1,!1,e,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(mt,_t);dt[t]=new ft(t,1,!1,e,"http://www.w3.org/XML/1998/namespace")}),["tabIndex","crossOrigin"].forEach(function(e){dt[e]=new ft(e,1,!1,e.toLowerCase(),null)});var kt={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Ct(e,t,n){return(e=ue.getPooled(kt.change,e,t,n)).type="change",Se(n),W(e),e}var Mt=null,Pt=null;function At(e){O(e)}function St(e){if(Ve(D(e)))return e}function Ot(e,t){if("change"===e)return t}var It=!1;function Rt(){Mt&&(Mt.detachEvent("onpropertychange",jt),Pt=Mt=null)}function jt(e){"value"===e.propertyName&&St(Pt)&&ze(At,e=Ct(Pt,e,Ne(e)))}function Lt(e,t,n){"focus"===e?(Rt(),Pt=n,(Mt=t).attachEvent("onpropertychange",jt)):"blur"===e&&Rt()}function zt(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return St(Pt)}function Dt(e,t){if("click"===e)return St(t)}function Bt(e,t){if("input"===e||"change"===e)return St(t)}G&&(It=qe("input")&&(!document.documentMode||9<document.documentMode));var Nt={eventTypes:kt,_isInputEventSupported:It,extractEvents:function(e,t,n,r){var i=t?D(t):window,o=void 0,a=void 0,s=i.nodeName&&i.nodeName.toLowerCase();if("select"===s||"input"===s&&"file"===i.type?o=Ot:Be(i)?It?o=Bt:(o=zt,a=Lt):(s=i.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(o=Dt),o&&(o=o(e,t)))return Ct(o,n,r);a&&a(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&Tt(i,"number",i.value)}},qt=ue.extend({view:null,detail:null}),Ft={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ut(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Ft[e])&&!!t[e]}function Vt(){return Ut}var Wt=0,Gt=0,Zt=!1,Ht=!1,Kt=qt.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Vt,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Wt;return Wt=e.screenX,Zt?"mousemove"===e.type?e.screenX-t:0:(Zt=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Gt;return Gt=e.screenY,Ht?"mousemove"===e.type?e.screenY-t:0:(Ht=!0,0)}}),Yt=Kt.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Xt={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},$t={eventTypes:Xt,extractEvents:function(e,t,n,r){var i="mouseover"===e||"pointerover"===e,o="mouseout"===e||"pointerout"===e;if(i&&(n.relatedTarget||n.fromElement)||!o&&!i)return null;if(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,o?(o=t,t=(t=n.relatedTarget||n.toElement)?L(t):null):o=null,o===t)return null;var a=void 0,s=void 0,u=void 0,l=void 0;"mouseout"===e||"mouseover"===e?(a=Kt,s=Xt.mouseLeave,u=Xt.mouseEnter,l="mouse"):"pointerout"!==e&&"pointerover"!==e||(a=Yt,s=Xt.pointerLeave,u=Xt.pointerEnter,l="pointer");var c=null==o?i:D(o);if(i=null==t?i:D(t),(e=a.getPooled(s,o,n,r)).type=l+"leave",e.target=c,e.relatedTarget=i,(n=a.getPooled(u,t,n,r)).type=l+"enter",n.target=i,n.relatedTarget=c,r=t,o&&r)e:{for(i=r,l=0,a=t=o;a;a=N(a))l++;for(a=0,u=i;u;u=N(u))a++;for(;0<l-a;)t=N(t),l--;for(;0<a-l;)i=N(i),a--;for(;l--;){if(t===i||t===i.alternate)break e;t=N(t),i=N(i)}t=null}else t=null;for(i=t,t=[];o&&o!==i&&(null===(l=o.alternate)||l!==i);)t.push(o),o=N(o);for(o=[];r&&r!==i&&(null===(l=r.alternate)||l!==i);)o.push(r),r=N(r);for(r=0;r<t.length;r++)U(t[r],"bubbled",e);for(r=o.length;0<r--;)U(o[r],"captured",n);return[e,n]}};function Jt(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t}var Qt=Object.prototype.hasOwnProperty;function en(e,t){if(Jt(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Qt.call(t,n[r])||!Jt(e[n[r]],t[n[r]]))return!1;return!0}function tn(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if(0!=(2&t.effectTag))return 1;for(;t.return;)if(0!=(2&(t=t.return).effectTag))return 1}return 3===t.tag?2:3}function nn(e){2!==tn(e)&&a("188")}function rn(e){if(!(e=function(e){var t=e.alternate;if(!t)return 3===(t=tn(e))&&a("188"),1===t?null:e;for(var n=e,r=t;;){var i=n.return,o=i?i.alternate:null;if(!i||!o)break;if(i.child===o.child){for(var s=i.child;s;){if(s===n)return nn(i),e;if(s===r)return nn(i),t;s=s.sibling}a("188")}if(n.return!==r.return)n=i,r=o;else{s=!1;for(var u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}s||a("189")}}n.alternate!==r&&a("190")}return 3!==n.tag&&a("188"),n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}var on=ue.extend({animationName:null,elapsedTime:null,pseudoElement:null}),an=ue.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),sn=qt.extend({relatedTarget:null});function un(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var ln={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pn=qt.extend({key:function(e){if(e.key){var t=ln[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=un(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?cn[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Vt,charCode:function(e){return"keypress"===e.type?un(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?un(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),hn=Kt.extend({dataTransfer:null}),fn=qt.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Vt}),dn=ue.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),mn=Kt.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),_n=[["abort","abort"],[$,"animationEnd"],[J,"animationIteration"],[Q,"animationStart"],["canplay","canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[ee,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]],yn={},vn={};function gn(e,t){var n=e[0],r="on"+((e=e[1])[0].toUpperCase()+e.slice(1));t={phasedRegistrationNames:{bubbled:r,captured:r+"Capture"},dependencies:[n],isInteractive:t},yn[e]=t,vn[n]=t}[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu","contextMenu"],["copy","copy"],["cut","cut"],["auxclick","auxClick"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset","reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach(function(e){gn(e,!0)}),_n.forEach(function(e){gn(e,!1)});var bn={eventTypes:yn,isInteractiveTopLevelEventType:function(e){return void 0!==(e=vn[e])&&!0===e.isInteractive},extractEvents:function(e,t,n,r){var i=vn[e];if(!i)return null;switch(e){case"keypress":if(0===un(n))return null;case"keydown":case"keyup":e=pn;break;case"blur":case"focus":e=sn;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Kt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=hn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=fn;break;case $:case J:case Q:e=on;break;case ee:e=dn;break;case"scroll":e=qt;break;case"wheel":e=mn;break;case"copy":case"cut":case"paste":e=an;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Yt;break;default:e=ue}return W(t=e.getPooled(i,t,n,r)),t}},xn=bn.isInteractiveTopLevelEventType,wn=[];function En(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r;for(r=n;r.return;)r=r.return;if(!(r=3!==r.tag?null:r.stateNode.containerInfo))break;e.ancestors.push(n),n=L(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=Ne(e.nativeEvent);r=e.topLevelType;for(var o=e.nativeEvent,a=null,s=0;s<y.length;s++){var u=y[s];u&&(u=u.extractEvents(r,t,o,i))&&(a=k(a,u))}O(a)}}var Tn=!0;function kn(e,t){if(!t)return null;var n=(xn(e)?Mn:Pn).bind(null,e);t.addEventListener(e,n,!1)}function Cn(e,t){if(!t)return null;var n=(xn(e)?Mn:Pn).bind(null,e);t.addEventListener(e,n,!0)}function Mn(e,t){Re(Pn,e,t)}function Pn(e,t){if(Tn){var n=Ne(t);if(null===(n=L(n))||"number"!=typeof n.tag||2===tn(n)||(n=null),wn.length){var r=wn.pop();r.topLevelType=e,r.nativeEvent=t,r.targetInst=n,e=r}else e={topLevelType:e,nativeEvent:t,targetInst:n,ancestors:[]};try{ze(En,e)}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>wn.length&&wn.push(e)}}}var An={},Sn=0,On="_reactListenersID"+(""+Math.random()).slice(2);function In(e){return Object.prototype.hasOwnProperty.call(e,On)||(e[On]=Sn++,An[e[On]]={}),An[e[On]]}function Rn(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function jn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ln(e,t){var n,r=jn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=jn(r)}}function zn(){for(var e=window,t=Rn();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=Rn((e=t.contentWindow).document)}return t}function Dn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function Bn(e){var t=zn(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(n.ownerDocument.documentElement,n)){if(null!==r&&Dn(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=Ln(n,o);var a=Ln(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Nn=G&&"documentMode"in document&&11>=document.documentMode,qn={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Fn=null,Un=null,Vn=null,Wn=!1;function Gn(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return Wn||null==Fn||Fn!==Rn(n)?null:("selectionStart"in(n=Fn)&&Dn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Vn&&en(Vn,n)?null:(Vn=n,(e=ue.getPooled(qn.select,Un,e,t)).type="select",e.target=Fn,W(e),e))}var Zn={eventTypes:qn,extractEvents:function(e,t,n,r){var i,o=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!o)){e:{o=In(o),i=b.onSelect;for(var a=0;a<i.length;a++){var s=i[a];if(!o.hasOwnProperty(s)||!o[s]){o=!1;break e}}o=!0}i=!o}if(i)return null;switch(o=t?D(t):window,e){case"focus":(Be(o)||"true"===o.contentEditable)&&(Fn=o,Un=t,Vn=null);break;case"blur":Vn=Un=Fn=null;break;case"mousedown":Wn=!0;break;case"contextmenu":case"mouseup":case"dragend":return Wn=!1,Gn(n,r);case"selectionchange":if(Nn)break;case"keydown":case"keyup":return Gn(n,r)}return null}};function Hn(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,function(e){null!=e&&(t+=e)}),t}(t.children))&&(e.children=t),e}function Kn(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+vt(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Yn(e,t){return null!=t.dangerouslySetInnerHTML&&a("91"),i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Xn(e,t){var n=t.value;null==n&&(n=t.defaultValue,null!=(t=t.children)&&(null!=n&&a("92"),Array.isArray(t)&&(1>=t.length||a("93"),t=t[0]),n=t),null==n&&(n="")),e._wrapperState={initialValue:vt(n)}}function $n(e,t){var n=vt(t.value),r=vt(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Jn(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)}A.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),x=B,w=z,E=D,A.injectEventPluginsByName({SimpleEventPlugin:bn,EnterLeaveEventPlugin:$t,ChangeEventPlugin:Nt,SelectEventPlugin:Zn,BeforeInputEventPlugin:ke});var Qn={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function er(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tr(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?er(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var nr=void 0,rr=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n)})}:e}(function(e,t){if(e.namespaceURI!==Qn.svg||"innerHTML"in e)e.innerHTML=t;else{for((nr=nr||document.createElement("div")).innerHTML="<svg>"+t+"</svg>",t=nr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ir(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var or={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ar=["Webkit","ms","Moz","O"];function sr(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||or.hasOwnProperty(e)&&or[e]?(""+t).trim():t+"px"}function ur(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=sr(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(or).forEach(function(e){ar.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),or[t]=or[e]})});var lr=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cr(e,t){t&&(lr[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&a("137",e,""),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&a("60"),"object"==typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML||a("61")),null!=t.style&&"object"!=typeof t.style&&a("62",""))}function pr(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function hr(e,t){var n=In(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=b[t];for(var r=0;r<t.length;r++){var i=t[r];if(!n.hasOwnProperty(i)||!n[i]){switch(i){case"scroll":Cn("scroll",e);break;case"focus":case"blur":Cn("focus",e),Cn("blur",e),n.blur=!0,n.focus=!0;break;case"cancel":case"close":qe(i)&&Cn(i,e);break;case"invalid":case"submit":case"reset":break;default:-1===te.indexOf(i)&&kn(i,e)}n[i]=!0}}}function fr(){}var dr=null,mr=null;function _r(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function yr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var vr="function"==typeof setTimeout?setTimeout:void 0,gr="function"==typeof clearTimeout?clearTimeout:void 0,br=o.unstable_scheduleCallback,xr=o.unstable_cancelCallback;function wr(e){for(e=e.nextSibling;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}function Er(e){for(e=e.firstChild;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}new Set;var Tr=[],kr=-1;function Cr(e){0>kr||(e.current=Tr[kr],Tr[kr]=null,kr--)}function Mr(e,t){Tr[++kr]=e.current,e.current=t}var Pr={},Ar={current:Pr},Sr={current:!1},Or=Pr;function Ir(e,t){var n=e.type.contextTypes;if(!n)return Pr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Rr(e){return null!=(e=e.childContextTypes)}function jr(e){Cr(Sr),Cr(Ar)}function Lr(e){Cr(Sr),Cr(Ar)}function zr(e,t,n){Ar.current!==Pr&&a("168"),Mr(Ar,t),Mr(Sr,n)}function Dr(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var o in r=r.getChildContext())o in e||a("108",st(t)||"Unknown",o);return i({},n,r)}function Br(e){var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||Pr,Or=Ar.current,Mr(Ar,t),Mr(Sr,Sr.current),!0}function Nr(e,t,n){var r=e.stateNode;r||a("169"),n?(t=Dr(e,t,Or),r.__reactInternalMemoizedMergedChildContext=t,Cr(Sr),Cr(Ar),Mr(Ar,t)):Cr(Sr),Mr(Sr,n)}var qr=null,Fr=null;function Ur(e){return function(t){try{return e(t)}catch(e){}}}function Vr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.contextDependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Wr(e,t,n,r){return new Vr(e,t,n,r)}function Gr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Zr(e,t){var n=e.alternate;return null===n?((n=Wr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,n.contextDependencies=e.contextDependencies,n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Hr(e,t,n,r,i,o){var s=2;if(r=e,"function"==typeof e)Gr(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case Ye:return Kr(n.children,i,o,t);case et:return Yr(n,3|i,o,t);case Xe:return Yr(n,2|i,o,t);case $e:return(e=Wr(12,n,t,4|i)).elementType=$e,e.type=$e,e.expirationTime=o,e;case nt:return(e=Wr(13,n,t,i)).elementType=nt,e.type=nt,e.expirationTime=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case Je:s=10;break e;case Qe:s=9;break e;case tt:s=11;break e;case rt:s=14;break e;case it:s=16,r=null;break e}a("130",null==e?e:typeof e,"")}return(t=Wr(s,n,t,i)).elementType=e,t.type=r,t.expirationTime=o,t}function Kr(e,t,n,r){return(e=Wr(7,e,r,t)).expirationTime=n,e}function Yr(e,t,n,r){return e=Wr(8,e,r,t),t=0==(1&t)?Xe:et,e.elementType=t,e.type=t,e.expirationTime=n,e}function Xr(e,t,n){return(e=Wr(6,e,null,t)).expirationTime=n,e}function $r(e,t,n){return(t=Wr(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Jr(e,t){e.didError=!1;var n=e.earliestPendingTime;0===n?e.earliestPendingTime=e.latestPendingTime=t:n<t?e.earliestPendingTime=t:e.latestPendingTime>t&&(e.latestPendingTime=t),ti(t,e)}function Qr(e,t){e.didError=!1,e.latestPingedTime>=t&&(e.latestPingedTime=0);var n=e.earliestPendingTime,r=e.latestPendingTime;n===t?e.earliestPendingTime=r===t?e.latestPendingTime=0:r:r===t&&(e.latestPendingTime=n),n=e.earliestSuspendedTime,r=e.latestSuspendedTime,0===n?e.earliestSuspendedTime=e.latestSuspendedTime=t:n<t?e.earliestSuspendedTime=t:r>t&&(e.latestSuspendedTime=t),ti(t,e)}function ei(e,t){var n=e.earliestPendingTime;return n>t&&(t=n),(e=e.earliestSuspendedTime)>t&&(t=e),t}function ti(e,t){var n=t.earliestSuspendedTime,r=t.latestSuspendedTime,i=t.earliestPendingTime,o=t.latestPingedTime;0===(i=0!==i?i:o)&&(0===e||r<e)&&(i=r),0!==(e=i)&&n>e&&(e=n),t.nextExpirationTimeToWorkOn=i,t.expirationTime=e}function ni(e,t){if(e&&e.defaultProps)for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var ri=(new r.Component).refs;function ii(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:i({},t,n),e.memoizedState=n,null!==(r=e.updateQueue)&&0===e.expirationTime&&(r.baseState=n)}var oi={isMounted:function(e){return!!(e=e._reactInternalFiber)&&2===tn(e)},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=xs(),i=Yo(r=Ka(r,e));i.payload=t,null!=n&&(i.callback=n),Ua(),$o(e,i),$a(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=xs(),i=Yo(r=Ka(r,e));i.tag=Vo,i.payload=t,null!=n&&(i.callback=n),Ua(),$o(e,i),$a(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=xs(),r=Yo(n=Ka(n,e));r.tag=Wo,null!=t&&(r.callback=t),Ua(),$o(e,r),$a(e,n)}};function ai(e,t,n,r,i,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!en(n,r)||!en(i,o))}function si(e,t,n){var r=!1,i=Pr,o=t.contextType;return"object"==typeof o&&null!==o?o=Fo(o):(i=Rr(t)?Or:Ar.current,o=(r=null!=(r=t.contextTypes))?Ir(e,i):Pr),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=oi,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function ui(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&oi.enqueueReplaceState(t,t.state,null)}function li(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ri;var o=t.contextType;"object"==typeof o&&null!==o?i.context=Fo(o):(o=Rr(t)?Or:Ar.current,i.context=Ir(e,o)),null!==(o=e.updateQueue)&&(ta(e,o,n,i,r),i.state=e.memoizedState),"function"==typeof(o=t.getDerivedStateFromProps)&&(ii(e,t,o,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&oi.enqueueReplaceState(i,i.state,null),null!==(o=e.updateQueue)&&(ta(e,o,n,i,r),i.state=e.memoizedState)),"function"==typeof i.componentDidMount&&(e.effectTag|=4)}var ci=Array.isArray;function pi(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){n=n._owner;var r=void 0;n&&(1!==n.tag&&a("309"),r=n.stateNode),r||a("147",e);var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===ri&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}"string"!=typeof e&&a("284"),n._owner||a("290",e)}return e}function hi(e,t){"textarea"!==e.type&&a("31","[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,"")}function fi(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t,n){return(e=Zr(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function s(t){return e&&null===t.alternate&&(t.effectTag=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Xr(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=pi(e,t,n),r.return=e,r):((r=Hr(n.type,n.key,n.props,null,e.mode,r)).ref=pi(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=$r(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function p(e,t,n,r,o){return null===t||7!==t.tag?((t=Kr(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Xr(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case He:return(n=Hr(t.type,t.key,t.props,null,e.mode,n)).ref=pi(e,null,t),n.return=e,n;case Ke:return(t=$r(t,e.mode,n)).return=e,t}if(ci(t)||at(t))return(t=Kr(t,e.mode,n,null)).return=e,t;hi(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:u(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case He:return n.key===i?n.type===Ye?p(e,t,n.props.children,r,i):l(e,t,n,r):null;case Ke:return n.key===i?c(e,t,n,r):null}if(ci(n)||at(n))return null!==i?null:p(e,t,n,r,null);hi(e,n)}return null}function d(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case He:return e=e.get(null===r.key?n:r.key)||null,r.type===Ye?p(t,e,r.props.children,i,r.key):l(t,e,r,i);case Ke:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(ci(r)||at(r))return p(t,e=e.get(n)||null,r,i,null);hi(t,r)}return null}function m(i,a,s,u){for(var l=null,c=null,p=a,m=a=0,_=null;null!==p&&m<s.length;m++){p.index>m?(_=p,p=null):_=p.sibling;var y=f(i,p,s[m],u);if(null===y){null===p&&(p=_);break}e&&p&&null===y.alternate&&t(i,p),a=o(y,a,m),null===c?l=y:c.sibling=y,c=y,p=_}if(m===s.length)return n(i,p),l;if(null===p){for(;m<s.length;m++)(p=h(i,s[m],u))&&(a=o(p,a,m),null===c?l=p:c.sibling=p,c=p);return l}for(p=r(i,p);m<s.length;m++)(_=d(p,i,m,s[m],u))&&(e&&null!==_.alternate&&p.delete(null===_.key?m:_.key),a=o(_,a,m),null===c?l=_:c.sibling=_,c=_);return e&&p.forEach(function(e){return t(i,e)}),l}function _(i,s,u,l){var c=at(u);"function"!=typeof c&&a("150"),null==(u=c.call(u))&&a("151");for(var p=c=null,m=s,_=s=0,y=null,v=u.next();null!==m&&!v.done;_++,v=u.next()){m.index>_?(y=m,m=null):y=m.sibling;var g=f(i,m,v.value,l);if(null===g){m||(m=y);break}e&&m&&null===g.alternate&&t(i,m),s=o(g,s,_),null===p?c=g:p.sibling=g,p=g,m=y}if(v.done)return n(i,m),c;if(null===m){for(;!v.done;_++,v=u.next())null!==(v=h(i,v.value,l))&&(s=o(v,s,_),null===p?c=v:p.sibling=v,p=v);return c}for(m=r(i,m);!v.done;_++,v=u.next())null!==(v=d(m,i,_,v.value,l))&&(e&&null!==v.alternate&&m.delete(null===v.key?_:v.key),s=o(v,s,_),null===p?c=v:p.sibling=v,p=v);return e&&m.forEach(function(e){return t(i,e)}),c}return function(e,r,o,u){var l="object"==typeof o&&null!==o&&o.type===Ye&&null===o.key;l&&(o=o.props.children);var c="object"==typeof o&&null!==o;if(c)switch(o.$$typeof){case He:e:{for(c=o.key,l=r;null!==l;){if(l.key===c){if(7===l.tag?o.type===Ye:l.elementType===o.type){n(e,l.sibling),(r=i(l,o.type===Ye?o.props.children:o.props)).ref=pi(e,l,o),r.return=e,e=r;break e}n(e,l);break}t(e,l),l=l.sibling}o.type===Ye?((r=Kr(o.props.children,e.mode,u,o.key)).return=e,e=r):((u=Hr(o.type,o.key,o.props,null,e.mode,u)).ref=pi(e,r,o),u.return=e,e=u)}return s(e);case Ke:e:{for(l=o.key;null!==r;){if(r.key===l){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=$r(o,e.mode,u)).return=e,e=r}return s(e)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=Xr(o,e.mode,u)).return=e,e=r),s(e);if(ci(o))return m(e,r,o,u);if(at(o))return _(e,r,o,u);if(c&&hi(e,o),void 0===o&&!l)switch(e.tag){case 1:case 0:a("152",(u=e.type).displayName||u.name||"Component")}return n(e,r)}}var di=fi(!0),mi=fi(!1),_i={},yi={current:_i},vi={current:_i},gi={current:_i};function bi(e){return e===_i&&a("174"),e}function xi(e,t){Mr(gi,t),Mr(vi,e),Mr(yi,_i);var n=t.nodeType;switch(n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:tr(null,"");break;default:t=tr(t=(n=8===n?t.parentNode:t).namespaceURI||null,n=n.tagName)}Cr(yi),Mr(yi,t)}function wi(e){Cr(yi),Cr(vi),Cr(gi)}function Ei(e){bi(gi.current);var t=bi(yi.current),n=tr(t,e.type);t!==n&&(Mr(vi,e),Mr(yi,n))}function Ti(e){vi.current===e&&(Cr(yi),Cr(vi))}var ki=0,Ci=2,Mi=4,Pi=8,Ai=16,Si=32,Oi=64,Ii=128,Ri=We.ReactCurrentDispatcher,ji=0,Li=null,zi=null,Di=null,Bi=null,Ni=null,qi=null,Fi=0,Ui=null,Vi=0,Wi=!1,Gi=null,Zi=0;function Hi(){a("321")}function Ki(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Jt(e[n],t[n]))return!1;return!0}function Yi(e,t,n,r,i,o){if(ji=o,Li=t,Di=null!==e?e.memoizedState:null,Ri.current=null===Di?uo:lo,t=n(r,i),Wi){do{Wi=!1,Zi+=1,Di=null!==e?e.memoizedState:null,qi=Bi,Ui=Ni=zi=null,Ri.current=lo,t=n(r,i)}while(Wi);Gi=null,Zi=0}return Ri.current=so,(e=Li).memoizedState=Bi,e.expirationTime=Fi,e.updateQueue=Ui,e.effectTag|=Vi,e=null!==zi&&null!==zi.next,ji=0,qi=Ni=Bi=Di=zi=Li=null,Fi=0,Ui=null,Vi=0,e&&a("300"),t}function Xi(){Ri.current=so,ji=0,qi=Ni=Bi=Di=zi=Li=null,Fi=0,Ui=null,Vi=0,Wi=!1,Gi=null,Zi=0}function $i(){var e={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===Ni?Bi=Ni=e:Ni=Ni.next=e,Ni}function Ji(){if(null!==qi)qi=(Ni=qi).next,Di=null!==(zi=Di)?zi.next:null;else{null===Di&&a("310");var e={memoizedState:(zi=Di).memoizedState,baseState:zi.baseState,queue:zi.queue,baseUpdate:zi.baseUpdate,next:null};Ni=null===Ni?Bi=e:Ni.next=e,Di=zi.next}return Ni}function Qi(e,t){return"function"==typeof t?t(e):t}function eo(e){var t=Ji(),n=t.queue;if(null===n&&a("311"),n.lastRenderedReducer=e,0<Zi){var r=n.dispatch;if(null!==Gi){var i=Gi.get(n);if(void 0!==i){Gi.delete(n);var o=t.memoizedState;do{o=e(o,i.action),i=i.next}while(null!==i);return Jt(o,t.memoizedState)||(xo=!0),t.memoizedState=o,t.baseUpdate===n.last&&(t.baseState=o),n.lastRenderedState=o,[o,r]}}return[t.memoizedState,r]}r=n.last;var s=t.baseUpdate;if(o=t.baseState,null!==s?(null!==r&&(r.next=null),r=s.next):r=null!==r?r.next:null,null!==r){var u=i=null,l=r,c=!1;do{var p=l.expirationTime;p<ji?(c||(c=!0,u=s,i=o),p>Fi&&(Fi=p)):o=l.eagerReducer===e?l.eagerState:e(o,l.action),s=l,l=l.next}while(null!==l&&l!==r);c||(u=s,i=o),Jt(o,t.memoizedState)||(xo=!0),t.memoizedState=o,t.baseUpdate=u,t.baseState=i,n.lastRenderedState=o}return[t.memoizedState,n.dispatch]}function to(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===Ui?(Ui={lastEffect:null}).lastEffect=e.next=e:null===(t=Ui.lastEffect)?Ui.lastEffect=e.next=e:(n=t.next,t.next=e,e.next=n,Ui.lastEffect=e),e}function no(e,t,n,r){var i=$i();Vi|=e,i.memoizedState=to(t,n,void 0,void 0===r?null:r)}function ro(e,t,n,r){var i=Ji();r=void 0===r?null:r;var o=void 0;if(null!==zi){var a=zi.memoizedState;if(o=a.destroy,null!==r&&Ki(r,a.deps))return void to(ki,n,o,r)}Vi|=e,i.memoizedState=to(t,n,o,r)}function io(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function oo(){}function ao(e,t,n){25>Zi||a("301");var r=e.alternate;if(e===Li||null!==r&&r===Li)if(Wi=!0,e={expirationTime:ji,action:n,eagerReducer:null,eagerState:null,next:null},null===Gi&&(Gi=new Map),void 0===(n=Gi.get(t)))Gi.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}else{Ua();var i=xs(),o={expirationTime:i=Ka(i,e),action:n,eagerReducer:null,eagerState:null,next:null},s=t.last;if(null===s)o.next=o;else{var u=s.next;null!==u&&(o.next=u),s.next=o}if(t.last=o,0===e.expirationTime&&(null===r||0===r.expirationTime)&&null!==(r=t.lastRenderedReducer))try{var l=t.lastRenderedState,c=r(l,n);if(o.eagerReducer=r,o.eagerState=c,Jt(c,l))return}catch(e){}$a(e,i)}}var so={readContext:Fo,useCallback:Hi,useContext:Hi,useEffect:Hi,useImperativeHandle:Hi,useLayoutEffect:Hi,useMemo:Hi,useReducer:Hi,useRef:Hi,useState:Hi,useDebugValue:Hi},uo={readContext:Fo,useCallback:function(e,t){return $i().memoizedState=[e,void 0===t?null:t],e},useContext:Fo,useEffect:function(e,t){return no(516,Ii|Oi,e,t)},useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,no(4,Mi|Si,io.bind(null,t,e),n)},useLayoutEffect:function(e,t){return no(4,Mi|Si,e,t)},useMemo:function(e,t){var n=$i();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=$i();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={last:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=ao.bind(null,Li,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},$i().memoizedState=e},useState:function(e){var t=$i();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={last:null,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:e}).dispatch=ao.bind(null,Li,e),[t.memoizedState,e]},useDebugValue:oo},lo={readContext:Fo,useCallback:function(e,t){var n=Ji();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ki(t,r[1])?r[0]:(n.memoizedState=[e,t],e)},useContext:Fo,useEffect:function(e,t){return ro(516,Ii|Oi,e,t)},useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,ro(4,Mi|Si,io.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ro(4,Mi|Si,e,t)},useMemo:function(e,t){var n=Ji();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ki(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)},useReducer:eo,useRef:function(){return Ji().memoizedState},useState:function(e){return eo(Qi)},useDebugValue:oo},co=null,po=null,ho=!1;function fo(e,t){var n=Wr(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function mo(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function _o(e){if(ho){var t=po;if(t){var n=t;if(!mo(e,t)){if(!(t=wr(n))||!mo(e,t))return e.effectTag|=2,ho=!1,void(co=e);fo(co,n)}co=e,po=Er(t)}else e.effectTag|=2,ho=!1,co=e}}function yo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&18!==e.tag;)e=e.return;co=e}function vo(e){if(e!==co)return!1;if(!ho)return yo(e),ho=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!yr(t,e.memoizedProps))for(t=po;t;)fo(e,t),t=wr(t);return yo(e),po=co?wr(e.stateNode):null,!0}function go(){po=co=null,ho=!1}var bo=We.ReactCurrentOwner,xo=!1;function wo(e,t,n,r){t.child=null===e?mi(t,null,n,r):di(t,e.child,n,r)}function Eo(e,t,n,r,i){n=n.render;var o=t.ref;return qo(t,i),r=Yi(e,t,n,r,o,i),null===e||xo?(t.effectTag|=1,wo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Io(e,t,i))}function To(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!=typeof a||Gr(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Hr(n.type,null,r,null,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,ko(e,t,a,r,i,o))}return a=e.child,i<o&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:en)(i,r)&&e.ref===t.ref)?Io(e,t,o):(t.effectTag|=1,(e=Zr(a,r)).ref=t.ref,e.return=t,t.child=e)}function ko(e,t,n,r,i,o){return null!==e&&en(e.memoizedProps,r)&&e.ref===t.ref&&(xo=!1,i<o)?Io(e,t,o):Mo(e,t,n,r,o)}function Co(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Mo(e,t,n,r,i){var o=Rr(n)?Or:Ar.current;return o=Ir(t,o),qo(t,i),n=Yi(e,t,n,r,o,i),null===e||xo?(t.effectTag|=1,wo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Io(e,t,i))}function Po(e,t,n,r,i){if(Rr(n)){var o=!0;Br(t)}else o=!1;if(qo(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),si(t,n,r),li(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,l=n.contextType;"object"==typeof l&&null!==l?l=Fo(l):l=Ir(t,l=Rr(n)?Or:Ar.current);var c=n.getDerivedStateFromProps,p="function"==typeof c||"function"==typeof a.getSnapshotBeforeUpdate;p||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||u!==l)&&ui(t,a,r,l),Zo=!1;var h=t.memoizedState;u=a.state=h;var f=t.updateQueue;null!==f&&(ta(t,f,r,a,i),u=t.memoizedState),s!==r||h!==u||Sr.current||Zo?("function"==typeof c&&(ii(t,n,c,r),u=t.memoizedState),(s=Zo||ai(t,n,s,r,h,u,l))?(p||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.effectTag|=4)):("function"==typeof a.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=l,r=s):("function"==typeof a.componentDidMount&&(t.effectTag|=4),r=!1)}else a=t.stateNode,s=t.memoizedProps,a.props=t.type===t.elementType?s:ni(t.type,s),u=a.context,"object"==typeof(l=n.contextType)&&null!==l?l=Fo(l):l=Ir(t,l=Rr(n)?Or:Ar.current),(p="function"==typeof(c=n.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||u!==l)&&ui(t,a,r,l),Zo=!1,u=t.memoizedState,h=a.state=u,null!==(f=t.updateQueue)&&(ta(t,f,r,a,i),h=t.memoizedState),s!==r||u!==h||Sr.current||Zo?("function"==typeof c&&(ii(t,n,c,r),h=t.memoizedState),(c=Zo||ai(t,n,s,r,u,h,l))?(p||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,h,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,h,l)),"function"==typeof a.componentDidUpdate&&(t.effectTag|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=h),a.props=r,a.state=h,a.context=l,r=c):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),r=!1);return Ao(e,t,n,r,o,i)}function Ao(e,t,n,r,i,o){Co(e,t);var a=0!=(64&t.effectTag);if(!r&&!a)return i&&Nr(t,n,!1),Io(e,t,o);r=t.stateNode,bo.current=t;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&a?(t.child=di(t,e.child,null,o),t.child=di(t,null,s,o)):wo(e,t,s,o),t.memoizedState=r.state,i&&Nr(t,n,!0),t.child}function So(e){var t=e.stateNode;t.pendingContext?zr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&zr(0,t.context,!1),xi(e,t.containerInfo)}function Oo(e,t,n){var r=t.mode,i=t.pendingProps,o=t.memoizedState;if(0==(64&t.effectTag)){o=null;var a=!1}else o={timedOutAt:null!==o?o.timedOutAt:0},a=!0,t.effectTag&=-65;if(null===e)if(a){var s=i.fallback;e=Kr(null,r,0,null),0==(1&t.mode)&&(e.child=null!==t.memoizedState?t.child.child:t.child),r=Kr(s,r,n,null),e.sibling=r,(n=e).return=r.return=t}else n=r=mi(t,null,i.children,n);else null!==e.memoizedState?(s=(r=e.child).sibling,a?(n=i.fallback,i=Zr(r,r.pendingProps),0==(1&t.mode)&&((a=null!==t.memoizedState?t.child.child:t.child)!==r.child&&(i.child=a)),r=i.sibling=Zr(s,n,s.expirationTime),n=i,i.childExpirationTime=0,n.return=r.return=t):n=r=di(t,r.child,i.children,n)):(s=e.child,a?(a=i.fallback,(i=Kr(null,r,0,null)).child=s,0==(1&t.mode)&&(i.child=null!==t.memoizedState?t.child.child:t.child),(r=i.sibling=Kr(a,r,n,null)).effectTag|=2,n=i,i.childExpirationTime=0,n.return=r.return=t):r=n=di(t,s,i.children,n)),t.stateNode=e.stateNode;return t.memoizedState=o,t.child=n,r}function Io(e,t,n){if(null!==e&&(t.contextDependencies=e.contextDependencies),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child&&a("153"),null!==t.child){for(n=Zr(e=t.child,e.pendingProps,e.expirationTime),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Zr(e,e.pendingProps,e.expirationTime)).return=t;n.sibling=null}return t.child}function Ro(e,t,n){var r=t.expirationTime;if(null!==e){if(e.memoizedProps!==t.pendingProps||Sr.current)xo=!0;else if(r<n){switch(xo=!1,t.tag){case 3:So(t),go();break;case 5:Ei(t);break;case 1:Rr(t.type)&&Br(t);break;case 4:xi(t,t.stateNode.containerInfo);break;case 10:Bo(t,t.memoizedProps.value);break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?Oo(e,t,n):null!==(t=Io(e,t,n))?t.sibling:null}return Io(e,t,n)}}else xo=!1;switch(t.expirationTime=0,t.tag){case 2:r=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps;var i=Ir(t,Ar.current);if(qo(t,n),i=Yi(null,t,r,e,i,n),t.effectTag|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,Xi(),Rr(r)){var o=!0;Br(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null;var s=r.getDerivedStateFromProps;"function"==typeof s&&ii(t,r,s,e),i.updater=oi,t.stateNode=i,i._reactInternalFiber=t,li(t,r,e,n),t=Ao(null,t,r,!0,o,n)}else t.tag=0,wo(null,t,i,n),t=t.child;return t;case 16:switch(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),o=t.pendingProps,e=function(e){var t=e._result;switch(e._status){case 1:return t;case 2:case 0:throw t;default:switch(e._status=0,(t=(t=e._ctor)()).then(function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)},function(t){0===e._status&&(e._status=2,e._result=t)}),e._status){case 1:return e._result;case 2:throw e._result}throw e._result=t,t}}(i),t.type=e,i=t.tag=function(e){if("function"==typeof e)return Gr(e)?1:0;if(null!=e){if((e=e.$$typeof)===tt)return 11;if(e===rt)return 14}return 2}(e),o=ni(e,o),s=void 0,i){case 0:s=Mo(null,t,e,o,n);break;case 1:s=Po(null,t,e,o,n);break;case 11:s=Eo(null,t,e,o,n);break;case 14:s=To(null,t,e,ni(e.type,o),r,n);break;default:a("306",e,"")}return s;case 0:return r=t.type,i=t.pendingProps,Mo(e,t,r,i=t.elementType===r?i:ni(r,i),n);case 1:return r=t.type,i=t.pendingProps,Po(e,t,r,i=t.elementType===r?i:ni(r,i),n);case 3:return So(t),null===(r=t.updateQueue)&&a("282"),i=null!==(i=t.memoizedState)?i.element:null,ta(t,r,t.pendingProps,null,n),(r=t.memoizedState.element)===i?(go(),t=Io(e,t,n)):(i=t.stateNode,(i=(null===e||null===e.child)&&i.hydrate)&&(po=Er(t.stateNode.containerInfo),co=t,i=ho=!0),i?(t.effectTag|=2,t.child=mi(t,null,r,n)):(wo(e,t,r,n),go()),t=t.child),t;case 5:return Ei(t),null===e&&_o(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,yr(r,i)?s=null:null!==o&&yr(r,o)&&(t.effectTag|=16),Co(e,t),1!==n&&1&t.mode&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(wo(e,t,s,n),t=t.child),t;case 6:return null===e&&_o(t),null;case 13:return Oo(e,t,n);case 4:return xi(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=di(t,null,r,n):wo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Eo(e,t,r,i=t.elementType===r?i:ni(r,i),n);case 7:return wo(e,t,t.pendingProps,n),t.child;case 8:case 12:return wo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,Bo(t,o=i.value),null!==s){var u=s.value;if(0===(o=Jt(u,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823))){if(s.children===i.children&&!Sr.current){t=Io(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var l=u.contextDependencies;if(null!==l){s=u.child;for(var c=l.first;null!==c;){if(c.context===r&&0!=(c.observedBits&o)){1===u.tag&&((c=Yo(n)).tag=Wo,$o(u,c)),u.expirationTime<n&&(u.expirationTime=n),null!==(c=u.alternate)&&c.expirationTime<n&&(c.expirationTime=n),c=n;for(var p=u.return;null!==p;){var h=p.alternate;if(p.childExpirationTime<c)p.childExpirationTime=c,null!==h&&h.childExpirationTime<c&&(h.childExpirationTime=c);else{if(!(null!==h&&h.childExpirationTime<c))break;h.childExpirationTime=c}p=p.return}l.expirationTime<n&&(l.expirationTime=n);break}c=c.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}}wo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,qo(t,n),r=r(i=Fo(i,o.unstable_observedBits)),t.effectTag|=1,wo(e,t,r,n),t.child;case 14:return o=ni(i=t.type,t.pendingProps),To(e,t,i,o=ni(i.type,o),r,n);case 15:return ko(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ni(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,Rr(r)?(e=!0,Br(t)):e=!1,qo(t,n),si(t,r,i),li(t,r,i,n),Ao(null,t,r,!0,e,n)}a("156")}var jo={current:null},Lo=null,zo=null,Do=null;function Bo(e,t){var n=e.type._context;Mr(jo,n._currentValue),n._currentValue=t}function No(e){var t=jo.current;Cr(jo),e.type._context._currentValue=t}function qo(e,t){Lo=e,Do=zo=null;var n=e.contextDependencies;null!==n&&n.expirationTime>=t&&(xo=!0),e.contextDependencies=null}function Fo(e,t){return Do!==e&&!1!==t&&0!==t&&("number"==typeof t&&1073741823!==t||(Do=e,t=1073741823),t={context:e,observedBits:t,next:null},null===zo?(null===Lo&&a("308"),zo=t,Lo.contextDependencies={first:t,expirationTime:0}):zo=zo.next=t),e._currentValue}var Uo=0,Vo=1,Wo=2,Go=3,Zo=!1;function Ho(e){return{baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Ko(e){return{baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Yo(e){return{expirationTime:e,tag:Uo,payload:null,callback:null,next:null,nextEffect:null}}function Xo(e,t){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t)}function $o(e,t){var n=e.alternate;if(null===n){var r=e.updateQueue,i=null;null===r&&(r=e.updateQueue=Ho(e.memoizedState))}else r=e.updateQueue,i=n.updateQueue,null===r?null===i?(r=e.updateQueue=Ho(e.memoizedState),i=n.updateQueue=Ho(n.memoizedState)):r=e.updateQueue=Ko(i):null===i&&(i=n.updateQueue=Ko(r));null===i||r===i?Xo(r,t):null===r.lastUpdate||null===i.lastUpdate?(Xo(r,t),Xo(i,t)):(Xo(r,t),i.lastUpdate=t)}function Jo(e,t){var n=e.updateQueue;null===(n=null===n?e.updateQueue=Ho(e.memoizedState):Qo(e,n)).lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=t:(n.lastCapturedUpdate.next=t,n.lastCapturedUpdate=t)}function Qo(e,t){var n=e.alternate;return null!==n&&t===n.updateQueue&&(t=e.updateQueue=Ko(t)),t}function ea(e,t,n,r,o,a){switch(n.tag){case Vo:return"function"==typeof(e=n.payload)?e.call(a,r,o):e;case Go:e.effectTag=-2049&e.effectTag|64;case Uo:if(null==(o="function"==typeof(e=n.payload)?e.call(a,r,o):e))break;return i({},r,o);case Wo:Zo=!0}return r}function ta(e,t,n,r,i){Zo=!1;for(var o=(t=Qo(e,t)).baseState,a=null,s=0,u=t.firstUpdate,l=o;null!==u;){var c=u.expirationTime;c<i?(null===a&&(a=u,o=l),s<c&&(s=c)):(l=ea(e,0,u,l,n,r),null!==u.callback&&(e.effectTag|=32,u.nextEffect=null,null===t.lastEffect?t.firstEffect=t.lastEffect=u:(t.lastEffect.nextEffect=u,t.lastEffect=u))),u=u.next}for(c=null,u=t.firstCapturedUpdate;null!==u;){var p=u.expirationTime;p<i?(null===c&&(c=u,null===a&&(o=l)),s<p&&(s=p)):(l=ea(e,0,u,l,n,r),null!==u.callback&&(e.effectTag|=32,u.nextEffect=null,null===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=u:(t.lastCapturedEffect.nextEffect=u,t.lastCapturedEffect=u))),u=u.next}null===a&&(t.lastUpdate=null),null===c?t.lastCapturedUpdate=null:e.effectTag|=32,null===a&&null===c&&(o=l),t.baseState=o,t.firstUpdate=a,t.firstCapturedUpdate=c,e.expirationTime=s,e.memoizedState=l}function na(e,t,n){null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null),ra(t.firstEffect,n),t.firstEffect=t.lastEffect=null,ra(t.firstCapturedEffect,n),t.firstCapturedEffect=t.lastCapturedEffect=null}function ra(e,t){for(;null!==e;){var n=e.callback;if(null!==n){e.callback=null;var r=t;"function"!=typeof n&&a("191",n),n.call(r)}e=e.nextEffect}}function ia(e,t){return{value:e,source:t,stack:ut(t)}}function oa(e){e.effectTag|=4}var aa=void 0,sa=void 0,ua=void 0,la=void 0;aa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},sa=function(){},ua=function(e,t,n,r,o){var a=e.memoizedProps;if(a!==r){var s=t.stateNode;switch(bi(yi.current),e=null,n){case"input":a=gt(s,a),r=gt(s,r),e=[];break;case"option":a=Hn(s,a),r=Hn(s,r),e=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),e=[];break;case"textarea":a=Yn(s,a),r=Yn(s,r),e=[];break;default:"function"!=typeof a.onClick&&"function"==typeof r.onClick&&(s.onclick=fr)}cr(n,r),s=n=void 0;var u=null;for(n in a)if(!r.hasOwnProperty(n)&&a.hasOwnProperty(n)&&null!=a[n])if("style"===n){var l=a[n];for(s in l)l.hasOwnProperty(s)&&(u||(u={}),u[s]="")}else"dangerouslySetInnerHTML"!==n&&"children"!==n&&"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&"autoFocus"!==n&&(g.hasOwnProperty(n)?e||(e=[]):(e=e||[]).push(n,null));for(n in r){var c=r[n];if(l=null!=a?a[n]:void 0,r.hasOwnProperty(n)&&c!==l&&(null!=c||null!=l))if("style"===n)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(u||(u={}),u[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(u||(u={}),u[s]=c[s])}else u||(e||(e=[]),e.push(n,u)),u=c;else"dangerouslySetInnerHTML"===n?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(e=e||[]).push(n,""+c)):"children"===n?l===c||"string"!=typeof c&&"number"!=typeof c||(e=e||[]).push(n,""+c):"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&(g.hasOwnProperty(n)?(null!=c&&hr(o,n),e||l===c||(e=[])):(e=e||[]).push(n,c))}u&&(e=e||[]).push("style",u),o=e,(t.updateQueue=o)&&oa(t)}},la=function(e,t,n,r){n!==r&&oa(t)};var ca="function"==typeof WeakSet?WeakSet:Set;function pa(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=ut(n)),null!==n&&st(n.type),t=t.value,null!==e&&1===e.tag&&st(e.type);try{console.error(t)}catch(e){setTimeout(function(){throw e})}}function ha(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Ha(e,t)}else t.current=null}function fa(e,t,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var r=n=n.next;do{if((r.tag&e)!==ki){var i=r.destroy;r.destroy=void 0,void 0!==i&&i()}(r.tag&t)!==ki&&(i=r.create,r.destroy=i()),r=r.next}while(r!==n)}}function da(e){switch("function"==typeof Fr&&Fr(e),e.tag){case 0:case 11:case 14:case 15:var t=e.updateQueue;if(null!==t&&null!==(t=t.lastEffect)){var n=t=t.next;do{var r=n.destroy;if(void 0!==r){var i=e;try{r()}catch(e){Ha(i,e)}}n=n.next}while(n!==t)}break;case 1:if(ha(e),"function"==typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){Ha(e,t)}break;case 5:ha(e);break;case 4:ya(e)}}function ma(e){return 5===e.tag||3===e.tag||4===e.tag}function _a(e){e:{for(var t=e.return;null!==t;){if(ma(t)){var n=t;break e}t=t.return}a("160"),n=void 0}var r=t=void 0;switch(n.tag){case 5:t=n.stateNode,r=!1;break;case 3:case 4:t=n.stateNode.containerInfo,r=!0;break;default:a("161")}16&n.effectTag&&(ir(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ma(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var i=e;;){if(5===i.tag||6===i.tag)if(n)if(r){var o=t,s=i.stateNode,u=n;8===o.nodeType?o.parentNode.insertBefore(s,u):o.insertBefore(s,u)}else t.insertBefore(i.stateNode,n);else r?(s=t,u=i.stateNode,8===s.nodeType?(o=s.parentNode).insertBefore(u,s):(o=s).appendChild(u),null!=(s=s._reactRootContainer)||null!==o.onclick||(o.onclick=fr)):t.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function ya(e){for(var t=e,n=!1,r=void 0,i=void 0;;){if(!n){n=t.return;e:for(;;){switch(null===n&&a("160"),n.tag){case 5:r=n.stateNode,i=!1;break e;case 3:case 4:r=n.stateNode.containerInfo,i=!0;break e}n=n.return}n=!0}if(5===t.tag||6===t.tag){e:for(var o=t,s=o;;)if(da(s),null!==s.child&&4!==s.tag)s.child.return=s,s=s.child;else{if(s===o)break;for(;null===s.sibling;){if(null===s.return||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}i?(o=r,s=t.stateNode,8===o.nodeType?o.parentNode.removeChild(s):o.removeChild(s)):r.removeChild(t.stateNode)}else if(4===t.tag){if(null!==t.child){r=t.stateNode.containerInfo,i=!0,t.child.return=t,t=t.child;continue}}else if(da(t),null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;4===(t=t.return).tag&&(n=!1)}t.sibling.return=t.return,t=t.sibling}}function va(e,t){switch(t.tag){case 0:case 11:case 14:case 15:fa(Mi,Pi,t);break;case 1:break;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps;e=null!==e?e.memoizedProps:r;var i=t.type,o=t.updateQueue;t.updateQueue=null,null!==o&&function(e,t,n,r,i){e[j]=i,"input"===n&&"radio"===i.type&&null!=i.name&&xt(e,i),pr(n,r),r=pr(n,i);for(var o=0;o<t.length;o+=2){var a=t[o],s=t[o+1];"style"===a?ur(e,s):"dangerouslySetInnerHTML"===a?rr(e,s):"children"===a?ir(e,s):yt(e,a,s,r)}switch(n){case"input":wt(e,i);break;case"textarea":$n(e,i);break;case"select":t=e._wrapperState.wasMultiple,e._wrapperState.wasMultiple=!!i.multiple,null!=(n=i.value)?Kn(e,!!i.multiple,n,!1):t!==!!i.multiple&&(null!=i.defaultValue?Kn(e,!!i.multiple,i.defaultValue,!0):Kn(e,!!i.multiple,i.multiple?[]:"",!1))}}(n,o,i,e,r)}break;case 6:null===t.stateNode&&a("162"),t.stateNode.nodeValue=t.memoizedProps;break;case 3:case 12:break;case 13:if(n=t.memoizedState,r=void 0,e=t,null===n?r=!1:(r=!0,e=t.child,0===n.timedOutAt&&(n.timedOutAt=xs())),null!==e&&function(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)r.style.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=null!=i&&i.hasOwnProperty("display")?i.display:null,r.style.display=sr("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else{if(13===n.tag&&null!==n.memoizedState){(r=n.child.sibling).return=n,n=r;continue}if(null!==n.child){n.child.return=n,n=n.child;continue}}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}(e,r),null!==(n=t.updateQueue)){t.updateQueue=null;var s=t.stateNode;null===s&&(s=t.stateNode=new ca),n.forEach(function(e){var n=function(e,t){var n=e.stateNode;null!==n&&n.delete(t),t=Ka(t=xs(),e),null!==(e=Xa(e,t))&&(Jr(e,t),0!==(t=e.expirationTime)&&ws(e,t))}.bind(null,t,e);s.has(e)||(s.add(e),e.then(n,n))})}break;case 17:break;default:a("163")}}var ga="function"==typeof WeakMap?WeakMap:Map;function ba(e,t,n){(n=Yo(n)).tag=Go,n.payload={element:null};var r=t.value;return n.callback=function(){Os(r),pa(e,t)},n}function xa(e,t,n){(n=Yo(n)).tag=Go;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Da?Da=new Set([this]):Da.add(this));var n=t.value,i=t.stack;pa(e,t),this.componentDidCatch(n,{componentStack:null!==i?i:""})}),n}function wa(e){switch(e.tag){case 1:Rr(e.type)&&jr();var t=e.effectTag;return 2048&t?(e.effectTag=-2049&t|64,e):null;case 3:return wi(),Lr(),0!=(64&(t=e.effectTag))&&a("285"),e.effectTag=-2049&t|64,e;case 5:return Ti(e),null;case 13:return 2048&(t=e.effectTag)?(e.effectTag=-2049&t|64,e):null;case 18:return null;case 4:return wi(),null;case 10:return No(e),null;default:return null}}var Ea=We.ReactCurrentDispatcher,Ta=We.ReactCurrentOwner,ka=1073741822,Ca=!1,Ma=null,Pa=null,Aa=0,Sa=-1,Oa=!1,Ia=null,Ra=!1,ja=null,La=null,za=null,Da=null;function Ba(){if(null!==Ma)for(var e=Ma.return;null!==e;){var t=e;switch(t.tag){case 1:var n=t.type.childContextTypes;null!=n&&jr();break;case 3:wi(),Lr();break;case 5:Ti(t);break;case 4:wi();break;case 10:No(t)}e=e.return}Pa=null,Aa=0,Sa=-1,Oa=!1,Ma=null}function Na(){for(;null!==Ia;){var e=Ia.effectTag;if(16&e&&ir(Ia.stateNode,""),128&e){var t=Ia.alternate;null!==t&&(null!==(t=t.ref)&&("function"==typeof t?t(null):t.current=null))}switch(14&e){case 2:_a(Ia),Ia.effectTag&=-3;break;case 6:_a(Ia),Ia.effectTag&=-3,va(Ia.alternate,Ia);break;case 4:va(Ia.alternate,Ia);break;case 8:ya(e=Ia),e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,null!==(e=e.alternate)&&(e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null)}Ia=Ia.nextEffect}}function qa(){for(;null!==Ia;){if(256&Ia.effectTag)e:{var e=Ia.alternate,t=Ia;switch(t.tag){case 0:case 11:case 15:fa(Ci,ki,t);break e;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:ni(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}break e;case 3:case 5:case 6:case 4:case 17:break e;default:a("163")}}Ia=Ia.nextEffect}}function Fa(e,t){for(;null!==Ia;){var n=Ia.effectTag;if(36&n){var r=Ia.alternate,i=Ia,o=t;switch(i.tag){case 0:case 11:case 15:fa(Ai,Si,i);break;case 1:var s=i.stateNode;if(4&i.effectTag)if(null===r)s.componentDidMount();else{var u=i.elementType===i.type?r.memoizedProps:ni(i.type,r.memoizedProps);s.componentDidUpdate(u,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}null!==(r=i.updateQueue)&&na(0,r,s);break;case 3:if(null!==(r=i.updateQueue)){if(s=null,null!==i.child)switch(i.child.tag){case 5:s=i.child.stateNode;break;case 1:s=i.child.stateNode}na(0,r,s)}break;case 5:o=i.stateNode,null===r&&4&i.effectTag&&_r(i.type,i.memoizedProps)&&o.focus();break;case 6:case 4:case 12:case 13:case 17:break;default:a("163")}}128&n&&(null!==(i=Ia.ref)&&(o=Ia.stateNode,"function"==typeof i?i(o):i.current=o)),512&n&&(ja=e),Ia=Ia.nextEffect}}function Ua(){null!==La&&xr(La),null!==za&&za()}function Va(e,t){Ra=Ca=!0,e.current===t&&a("177");var n=e.pendingCommitExpirationTime;0===n&&a("261"),e.pendingCommitExpirationTime=0;var r=t.expirationTime,i=t.childExpirationTime;for(function(e,t){if(e.didError=!1,0===t)e.earliestPendingTime=0,e.latestPendingTime=0,e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0;else{t<e.latestPingedTime&&(e.latestPingedTime=0);var n=e.latestPendingTime;0!==n&&(n>t?e.earliestPendingTime=e.latestPendingTime=0:e.earliestPendingTime>t&&(e.earliestPendingTime=e.latestPendingTime)),0===(n=e.earliestSuspendedTime)?Jr(e,t):t<e.latestSuspendedTime?(e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0,Jr(e,t)):t>n&&Jr(e,t)}ti(0,e)}(e,i>r?i:r),Ta.current=null,r=void 0,1<t.effectTag?null!==t.lastEffect?(t.lastEffect.nextEffect=t,r=t.firstEffect):r=t:r=t.firstEffect,dr=Tn,mr=function(){var e=zn();if(Dn(e)){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(t=(t=e.ownerDocument)&&t.defaultView||window).getSelection&&t.getSelection();if(n&&0!==n.rangeCount){t=n.anchorNode;var r=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{t.nodeType,i.nodeType}catch(e){t=null;break e}var o=0,a=-1,s=-1,u=0,l=0,c=e,p=null;t:for(;;){for(var h;c!==t||0!==r&&3!==c.nodeType||(a=o+r),c!==i||0!==n&&3!==c.nodeType||(s=o+n),3===c.nodeType&&(o+=c.nodeValue.length),null!==(h=c.firstChild);)p=c,c=h;for(;;){if(c===e)break t;if(p===t&&++u===r&&(a=o),p===i&&++l===n&&(s=o),null!==(h=c.nextSibling))break;p=(c=p).parentNode}c=h}t=-1===a||-1===s?null:{start:a,end:s}}else t=null}t=t||{start:0,end:0}}else t=null;return{focusedElem:e,selectionRange:t}}(),Tn=!1,Ia=r;null!==Ia;){i=!1;var s=void 0;try{qa()}catch(e){i=!0,s=e}i&&(null===Ia&&a("178"),Ha(Ia,s),null!==Ia&&(Ia=Ia.nextEffect))}for(Ia=r;null!==Ia;){i=!1,s=void 0;try{Na()}catch(e){i=!0,s=e}i&&(null===Ia&&a("178"),Ha(Ia,s),null!==Ia&&(Ia=Ia.nextEffect))}for(Bn(mr),mr=null,Tn=!!dr,dr=null,e.current=t,Ia=r;null!==Ia;){i=!1,s=void 0;try{Fa(e,n)}catch(e){i=!0,s=e}i&&(null===Ia&&a("178"),Ha(Ia,s),null!==Ia&&(Ia=Ia.nextEffect))}if(null!==r&&null!==ja){var u=function(e,t){za=La=ja=null;var n=rs;rs=!0;do{if(512&t.effectTag){var r=!1,i=void 0;try{var o=t;fa(Ii,ki,o),fa(ki,Oi,o)}catch(e){r=!0,i=e}r&&Ha(t,i)}t=t.nextEffect}while(null!==t);rs=n,0!==(n=e.expirationTime)&&ws(e,n),ls||rs||Ms(1073741823,!1)}.bind(null,e,r);La=o.unstable_runWithPriority(o.unstable_NormalPriority,function(){return br(u)}),za=u}Ca=Ra=!1,"function"==typeof qr&&qr(t.stateNode),n=t.expirationTime,0===(t=(t=t.childExpirationTime)>n?t:n)&&(Da=null),function(e,t){e.expirationTime=t,e.finishedWork=null}(e,t)}function Wa(e){for(;;){var t=e.alternate,n=e.return,r=e.sibling;if(0==(1024&e.effectTag)){Ma=e;e:{var o=t,s=Aa,u=(t=e).pendingProps;switch(t.tag){case 2:case 16:break;case 15:case 0:break;case 1:Rr(t.type)&&jr();break;case 3:wi(),Lr(),(u=t.stateNode).pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),null!==o&&null!==o.child||(vo(t),t.effectTag&=-3),sa(t);break;case 5:Ti(t);var l=bi(gi.current);if(s=t.type,null!==o&&null!=t.stateNode)ua(o,t,s,u,l),o.ref!==t.ref&&(t.effectTag|=128);else if(u){var c=bi(yi.current);if(vo(t)){o=(u=t).stateNode;var p=u.type,h=u.memoizedProps,f=l;switch(o[R]=u,o[j]=h,s=void 0,l=p){case"iframe":case"object":kn("load",o);break;case"video":case"audio":for(p=0;p<te.length;p++)kn(te[p],o);break;case"source":kn("error",o);break;case"img":case"image":case"link":kn("error",o),kn("load",o);break;case"form":kn("reset",o),kn("submit",o);break;case"details":kn("toggle",o);break;case"input":bt(o,h),kn("invalid",o),hr(f,"onChange");break;case"select":o._wrapperState={wasMultiple:!!h.multiple},kn("invalid",o),hr(f,"onChange");break;case"textarea":Xn(o,h),kn("invalid",o),hr(f,"onChange")}for(s in cr(l,h),p=null,h)h.hasOwnProperty(s)&&(c=h[s],"children"===s?"string"==typeof c?o.textContent!==c&&(p=["children",c]):"number"==typeof c&&o.textContent!==""+c&&(p=["children",""+c]):g.hasOwnProperty(s)&&null!=c&&hr(f,s));switch(l){case"input":Ue(o),Et(o,h,!0);break;case"textarea":Ue(o),Jn(o);break;case"select":case"option":break;default:"function"==typeof h.onClick&&(o.onclick=fr)}s=p,u.updateQueue=s,(u=null!==s)&&oa(t)}else{h=t,f=s,o=u,p=9===l.nodeType?l:l.ownerDocument,c===Qn.html&&(c=er(f)),c===Qn.html?"script"===f?((o=p.createElement("div")).innerHTML="<script><\/script>",p=o.removeChild(o.firstChild)):"string"==typeof o.is?p=p.createElement(f,{is:o.is}):(p=p.createElement(f),"select"===f&&(f=p,o.multiple?f.multiple=!0:o.size&&(f.size=o.size))):p=p.createElementNS(c,f),(o=p)[R]=h,o[j]=u,aa(o,t,!1,!1),f=o;var d=l,m=pr(p=s,h=u);switch(p){case"iframe":case"object":kn("load",f),l=h;break;case"video":case"audio":for(l=0;l<te.length;l++)kn(te[l],f);l=h;break;case"source":kn("error",f),l=h;break;case"img":case"image":case"link":kn("error",f),kn("load",f),l=h;break;case"form":kn("reset",f),kn("submit",f),l=h;break;case"details":kn("toggle",f),l=h;break;case"input":bt(f,h),l=gt(f,h),kn("invalid",f),hr(d,"onChange");break;case"option":l=Hn(f,h);break;case"select":f._wrapperState={wasMultiple:!!h.multiple},l=i({},h,{value:void 0}),kn("invalid",f),hr(d,"onChange");break;case"textarea":Xn(f,h),l=Yn(f,h),kn("invalid",f),hr(d,"onChange");break;default:l=h}cr(p,l),c=void 0;var _=p,y=f,v=l;for(c in v)if(v.hasOwnProperty(c)){var b=v[c];"style"===c?ur(y,b):"dangerouslySetInnerHTML"===c?null!=(b=b?b.__html:void 0)&&rr(y,b):"children"===c?"string"==typeof b?("textarea"!==_||""!==b)&&ir(y,b):"number"==typeof b&&ir(y,""+b):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(g.hasOwnProperty(c)?null!=b&&hr(d,c):null!=b&&yt(y,c,b,m))}switch(p){case"input":Ue(f),Et(f,h,!1);break;case"textarea":Ue(f),Jn(f);break;case"option":null!=h.value&&f.setAttribute("value",""+vt(h.value));break;case"select":(l=f).multiple=!!h.multiple,null!=(f=h.value)?Kn(l,!!h.multiple,f,!1):null!=h.defaultValue&&Kn(l,!!h.multiple,h.defaultValue,!0);break;default:"function"==typeof l.onClick&&(f.onclick=fr)}(u=_r(s,u))&&oa(t),t.stateNode=o}null!==t.ref&&(t.effectTag|=128)}else null===t.stateNode&&a("166");break;case 6:o&&null!=t.stateNode?la(o,t,o.memoizedProps,u):("string"!=typeof u&&(null===t.stateNode&&a("166")),o=bi(gi.current),bi(yi.current),vo(t)?(s=(u=t).stateNode,o=u.memoizedProps,s[R]=u,(u=s.nodeValue!==o)&&oa(t)):(s=t,(u=(9===o.nodeType?o:o.ownerDocument).createTextNode(u))[R]=t,s.stateNode=u));break;case 11:break;case 13:if(u=t.memoizedState,0!=(64&t.effectTag)){t.expirationTime=s,Ma=t;break e}u=null!==u,s=null!==o&&null!==o.memoizedState,null!==o&&!u&&s&&(null!==(o=o.child.sibling)&&(null!==(l=t.firstEffect)?(t.firstEffect=o,o.nextEffect=l):(t.firstEffect=t.lastEffect=o,o.nextEffect=null),o.effectTag=8)),(u||s)&&(t.effectTag|=4);break;case 7:case 8:case 12:break;case 4:wi(),sa(t);break;case 10:No(t);break;case 9:case 14:break;case 17:Rr(t.type)&&jr();break;case 18:break;default:a("156")}Ma=null}if(t=e,1===Aa||1!==t.childExpirationTime){for(u=0,s=t.child;null!==s;)(o=s.expirationTime)>u&&(u=o),(l=s.childExpirationTime)>u&&(u=l),s=s.sibling;t.childExpirationTime=u}if(null!==Ma)return Ma;null!==n&&0==(1024&n.effectTag)&&(null===n.firstEffect&&(n.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=e.firstEffect),n.lastEffect=e.lastEffect),1<e.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=e:n.firstEffect=e,n.lastEffect=e))}else{if(null!==(e=wa(e)))return e.effectTag&=1023,e;null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=1024)}if(null!==r)return r;if(null===n)break;e=n}return null}function Ga(e){var t=Ro(e.alternate,e,Aa);return e.memoizedProps=e.pendingProps,null===t&&(t=Wa(e)),Ta.current=null,t}function Za(e,t){Ca&&a("243"),Ua(),Ca=!0;var n=Ea.current;Ea.current=so;var r=e.nextExpirationTimeToWorkOn;r===Aa&&e===Pa&&null!==Ma||(Ba(),Aa=r,Ma=Zr((Pa=e).current,null),e.pendingCommitExpirationTime=0);for(var i=!1;;){try{if(t)for(;null!==Ma&&!ks();)Ma=Ga(Ma);else for(;null!==Ma;)Ma=Ga(Ma)}catch(t){if(Do=zo=Lo=null,Xi(),null===Ma)i=!0,Os(t);else{null===Ma&&a("271");var o=Ma,s=o.return;if(null!==s){e:{var u=e,l=s,c=o,p=t;if(s=Aa,c.effectTag|=1024,c.firstEffect=c.lastEffect=null,null!==p&&"object"==typeof p&&"function"==typeof p.then){var h=p;p=l;var f=-1,d=-1;do{if(13===p.tag){var m=p.alternate;if(null!==m&&null!==(m=m.memoizedState)){d=10*(1073741822-m.timedOutAt);break}"number"==typeof(m=p.pendingProps.maxDuration)&&(0>=m?f=0:(-1===f||m<f)&&(f=m))}p=p.return}while(null!==p);p=l;do{if((m=13===p.tag)&&(m=void 0!==p.memoizedProps.fallback&&null===p.memoizedState),m){if(null===(l=p.updateQueue)?((l=new Set).add(h),p.updateQueue=l):l.add(h),0==(1&p.mode)){p.effectTag|=64,c.effectTag&=-1957,1===c.tag&&(null===c.alternate?c.tag=17:((s=Yo(1073741823)).tag=Wo,$o(c,s))),c.expirationTime=1073741823;break e}l=s;var _=(c=u).pingCache;null===_?(_=c.pingCache=new ga,m=new Set,_.set(h,m)):void 0===(m=_.get(h))&&(m=new Set,_.set(h,m)),m.has(l)||(m.add(l),c=Ya.bind(null,c,h,l),h.then(c,c)),-1===f?u=1073741823:(-1===d&&(d=10*(1073741822-ei(u,s))-5e3),u=d+f),0<=u&&Sa<u&&(Sa=u),p.effectTag|=2048,p.expirationTime=s;break e}p=p.return}while(null!==p);p=Error((st(c.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+ut(c))}Oa=!0,p=ia(p,c),u=l;do{switch(u.tag){case 3:u.effectTag|=2048,u.expirationTime=s,Jo(u,s=ba(u,p,s));break e;case 1:if(f=p,d=u.type,c=u.stateNode,0==(64&u.effectTag)&&("function"==typeof d.getDerivedStateFromError||null!==c&&"function"==typeof c.componentDidCatch&&(null===Da||!Da.has(c)))){u.effectTag|=2048,u.expirationTime=s,Jo(u,s=xa(u,f,s));break e}}u=u.return}while(null!==u)}Ma=Wa(o);continue}i=!0,Os(t)}}break}if(Ca=!1,Ea.current=n,Do=zo=Lo=null,Xi(),i)Pa=null,e.finishedWork=null;else if(null!==Ma)e.finishedWork=null;else{if(null===(n=e.current.alternate)&&a("281"),Pa=null,Oa){if(i=e.latestPendingTime,o=e.latestSuspendedTime,s=e.latestPingedTime,0!==i&&i<r||0!==o&&o<r||0!==s&&s<r)return Qr(e,r),void bs(e,n,r,e.expirationTime,-1);if(!e.didError&&t)return e.didError=!0,r=e.nextExpirationTimeToWorkOn=r,t=e.expirationTime=1073741823,void bs(e,n,r,t,-1)}t&&-1!==Sa?(Qr(e,r),(t=10*(1073741822-ei(e,r)))<Sa&&(Sa=t),t=10*(1073741822-xs()),t=Sa-t,bs(e,n,r,e.expirationTime,0>t?0:t)):(e.pendingCommitExpirationTime=r,e.finishedWork=n)}}function Ha(e,t){for(var n=e.return;null!==n;){switch(n.tag){case 1:var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Da||!Da.has(r)))return $o(n,e=xa(n,e=ia(t,e),1073741823)),void $a(n,1073741823);break;case 3:return $o(n,e=ba(n,e=ia(t,e),1073741823)),void $a(n,1073741823)}n=n.return}3===e.tag&&($o(e,n=ba(e,n=ia(t,e),1073741823)),$a(e,1073741823))}function Ka(e,t){var n=o.unstable_getCurrentPriorityLevel(),r=void 0;if(0==(1&t.mode))r=1073741823;else if(Ca&&!Ra)r=Aa;else{switch(n){case o.unstable_ImmediatePriority:r=1073741823;break;case o.unstable_UserBlockingPriority:r=1073741822-10*(1+((1073741822-e+15)/10|0));break;case o.unstable_NormalPriority:r=1073741822-25*(1+((1073741822-e+500)/25|0));break;case o.unstable_LowPriority:case o.unstable_IdlePriority:r=1;break;default:a("313")}null!==Pa&&r===Aa&&--r}return n===o.unstable_UserBlockingPriority&&(0===as||r<as)&&(as=r),r}function Ya(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),null!==Pa&&Aa===n?Pa=null:(t=e.earliestSuspendedTime,r=e.latestSuspendedTime,0!==t&&n<=t&&n>=r&&(e.didError=!1,(0===(t=e.latestPingedTime)||t>n)&&(e.latestPingedTime=n),ti(n,e),0!==(n=e.expirationTime)&&ws(e,n)))}function Xa(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return i}function $a(e,t){null!==(e=Xa(e,t))&&(!Ca&&0!==Aa&&t>Aa&&Ba(),Jr(e,t),Ca&&!Ra&&Pa===e||ws(e,e.expirationTime),_s>ms&&(_s=0,a("185")))}function Ja(e,t,n,r,i){return o.unstable_runWithPriority(o.unstable_ImmediatePriority,function(){return e(t,n,r,i)})}var Qa=null,es=null,ts=0,ns=void 0,rs=!1,is=null,os=0,as=0,ss=!1,us=null,ls=!1,cs=!1,ps=null,hs=o.unstable_now(),fs=1073741822-(hs/10|0),ds=fs,ms=50,_s=0,ys=null;function vs(){fs=1073741822-((o.unstable_now()-hs)/10|0)}function gs(e,t){if(0!==ts){if(t<ts)return;null!==ns&&o.unstable_cancelCallback(ns)}ts=t,e=o.unstable_now()-hs,ns=o.unstable_scheduleCallback(Cs,{timeout:10*(1073741822-t)-e})}function bs(e,t,n,r,i){e.expirationTime=r,0!==i||ks()?0<i&&(e.timeoutHandle=vr(function(e,t,n){e.pendingCommitExpirationTime=n,e.finishedWork=t,vs(),ds=fs,Ps(e,n)}.bind(null,e,t,n),i)):(e.pendingCommitExpirationTime=n,e.finishedWork=t)}function xs(){return rs?ds:(Es(),0!==os&&1!==os||(vs(),ds=fs),ds)}function ws(e,t){null===e.nextScheduledRoot?(e.expirationTime=t,null===es?(Qa=es=e,e.nextScheduledRoot=e):(es=es.nextScheduledRoot=e).nextScheduledRoot=Qa):t>e.expirationTime&&(e.expirationTime=t),rs||(ls?cs&&(is=e,os=1073741823,As(e,1073741823,!1)):1073741823===t?Ms(1073741823,!1):gs(e,t))}function Es(){var e=0,t=null;if(null!==es)for(var n=es,r=Qa;null!==r;){var i=r.expirationTime;if(0===i){if((null===n||null===es)&&a("244"),r===r.nextScheduledRoot){Qa=es=r.nextScheduledRoot=null;break}if(r===Qa)Qa=i=r.nextScheduledRoot,es.nextScheduledRoot=i,r.nextScheduledRoot=null;else{if(r===es){(es=n).nextScheduledRoot=Qa,r.nextScheduledRoot=null;break}n.nextScheduledRoot=r.nextScheduledRoot,r.nextScheduledRoot=null}r=n.nextScheduledRoot}else{if(i>e&&(e=i,t=r),r===es)break;if(1073741823===e)break;n=r,r=r.nextScheduledRoot}}is=t,os=e}var Ts=!1;function ks(){return!!Ts||!!o.unstable_shouldYield()&&(Ts=!0)}function Cs(){try{if(!ks()&&null!==Qa){vs();var e=Qa;do{var t=e.expirationTime;0!==t&&fs<=t&&(e.nextExpirationTimeToWorkOn=fs),e=e.nextScheduledRoot}while(e!==Qa)}Ms(0,!0)}finally{Ts=!1}}function Ms(e,t){if(Es(),t)for(vs(),ds=fs;null!==is&&0!==os&&e<=os&&!(Ts&&fs>os);)As(is,os,fs>os),Es(),vs(),ds=fs;else for(;null!==is&&0!==os&&e<=os;)As(is,os,!1),Es();if(t&&(ts=0,ns=null),0!==os&&gs(is,os),_s=0,ys=null,null!==ps)for(e=ps,ps=null,t=0;t<e.length;t++){var n=e[t];try{n._onComplete()}catch(e){ss||(ss=!0,us=e)}}if(ss)throw e=us,us=null,ss=!1,e}function Ps(e,t){rs&&a("253"),is=e,os=t,As(e,t,!1),Ms(1073741823,!1)}function As(e,t,n){if(rs&&a("245"),rs=!0,n){var r=e.finishedWork;null!==r?Ss(e,r,t):(e.finishedWork=null,-1!==(r=e.timeoutHandle)&&(e.timeoutHandle=-1,gr(r)),Za(e,n),null!==(r=e.finishedWork)&&(ks()?e.finishedWork=r:Ss(e,r,t)))}else null!==(r=e.finishedWork)?Ss(e,r,t):(e.finishedWork=null,-1!==(r=e.timeoutHandle)&&(e.timeoutHandle=-1,gr(r)),Za(e,n),null!==(r=e.finishedWork)&&Ss(e,r,t));rs=!1}function Ss(e,t,n){var r=e.firstBatch;if(null!==r&&r._expirationTime>=n&&(null===ps?ps=[r]:ps.push(r),r._defer))return e.finishedWork=t,void(e.expirationTime=0);e.finishedWork=null,e===ys?_s++:(ys=e,_s=0),o.unstable_runWithPriority(o.unstable_ImmediatePriority,function(){Va(e,t)})}function Os(e){null===is&&a("246"),is.expirationTime=0,ss||(ss=!0,us=e)}function Is(e,t){var n=ls;ls=!0;try{return e(t)}finally{(ls=n)||rs||Ms(1073741823,!1)}}function Rs(e,t){if(ls&&!cs){cs=!0;try{return e(t)}finally{cs=!1}}return e(t)}function js(e,t,n){ls||rs||0===as||(Ms(as,!1),as=0);var r=ls;ls=!0;try{return o.unstable_runWithPriority(o.unstable_UserBlockingPriority,function(){return e(t,n)})}finally{(ls=r)||rs||Ms(1073741823,!1)}}function Ls(e,t,n,r,i){var o=t.current;e:if(n){t:{2===tn(n=n._reactInternalFiber)&&1===n.tag||a("170");var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(Rr(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);a("171"),s=void 0}if(1===n.tag){var u=n.type;if(Rr(u)){n=Dr(n,u,s);break e}}n=s}else n=Pr;return null===t.context?t.context=n:t.pendingContext=n,t=i,(i=Yo(r)).payload={element:e},null!==(t=void 0===t?null:t)&&(i.callback=t),Ua(),$o(o,i),$a(o,r),r}function zs(e,t,n,r){var i=t.current;return Ls(e,t,n,i=Ka(xs(),i),r)}function Ds(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Bs(e){var t=1073741822-25*(1+((1073741822-xs()+500)/25|0));t>=ka&&(t=ka-1),this._expirationTime=ka=t,this._root=e,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function Ns(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function qs(e,t,n){e={current:t=Wr(3,null,null,t?3:0),containerInfo:e,pendingChildren:null,pingCache:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,didError:!1,pendingCommitExpirationTime:0,finishedWork:null,timeoutHandle:-1,context:null,pendingContext:null,hydrate:n,nextExpirationTimeToWorkOn:0,expirationTime:0,firstBatch:null,nextScheduledRoot:null},this._internalRoot=t.stateNode=e}function Fs(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Us(e,t,n,r,i){var o=n._reactRootContainer;if(o){if("function"==typeof i){var a=i;i=function(){var e=Ds(o._internalRoot);a.call(e)}}null!=e?o.legacy_renderSubtreeIntoContainer(e,t,i):o.render(t,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new qs(e,!1,t)}(n,r),"function"==typeof i){var s=i;i=function(){var e=Ds(o._internalRoot);s.call(e)}}Rs(function(){null!=e?o.legacy_renderSubtreeIntoContainer(e,t,i):o.render(t,i)})}return Ds(o._internalRoot)}function Vs(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return Fs(t)||a("200"),function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Ke,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}Ce=function(e,t,n){switch(t){case"input":if(wt(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=B(r);i||a("90"),Ve(r),wt(r,i)}}}break;case"textarea":$n(e,n);break;case"select":null!=(t=n.value)&&Kn(e,!!n.multiple,t,!1)}},Bs.prototype.render=function(e){this._defer||a("250"),this._hasChildren=!0,this._children=e;var t=this._root._internalRoot,n=this._expirationTime,r=new Ns;return Ls(e,t,null,n,r._onCommit),r},Bs.prototype.then=function(e){if(this._didComplete)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Bs.prototype.commit=function(){var e=this._root._internalRoot,t=e.firstBatch;if(this._defer&&null!==t||a("251"),this._hasChildren){var n=this._expirationTime;if(t!==this){this._hasChildren&&(n=this._expirationTime=t._expirationTime,this.render(this._children));for(var r=null,i=t;i!==this;)r=i,i=i._next;null===r&&a("251"),r._next=i._next,this._next=t,e.firstBatch=this}this._defer=!1,Ps(e,n),t=this._next,this._next=null,null!==(t=e.firstBatch=t)&&t._hasChildren&&t.render(t._children)}else this._next=null,this._defer=!1},Bs.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++)(0,e[t])()}},Ns.prototype.then=function(e){if(this._didCommit)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Ns.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++){var n=e[t];"function"!=typeof n&&a("191",n),n()}}},qs.prototype.render=function(e,t){var n=this._internalRoot,r=new Ns;return null!==(t=void 0===t?null:t)&&r.then(t),zs(e,n,null,r._onCommit),r},qs.prototype.unmount=function(e){var t=this._internalRoot,n=new Ns;return null!==(e=void 0===e?null:e)&&n.then(e),zs(null,t,null,n._onCommit),n},qs.prototype.legacy_renderSubtreeIntoContainer=function(e,t,n){var r=this._internalRoot,i=new Ns;return null!==(n=void 0===n?null:n)&&i.then(n),zs(t,r,e,i._onCommit),i},qs.prototype.createBatch=function(){var e=new Bs(this),t=e._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)n.firstBatch=e,e._next=null;else{for(n=null;null!==r&&r._expirationTime>=t;)n=r,r=r._next;e._next=r,null!==n&&(n._next=e)}return e},Ie=Is,Re=js,je=function(){rs||0===as||(Ms(as,!1),as=0)};var Ws,Gs,Zs={createPortal:Vs,findDOMNode:function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;return void 0===t&&("function"==typeof e.render?a("188"):a("268",Object.keys(e))),e=null===(e=rn(t))?null:e.stateNode},hydrate:function(e,t,n){return Fs(t)||a("200"),Us(null,e,t,!0,n)},render:function(e,t,n){return Fs(t)||a("200"),Us(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,r){return Fs(n)||a("200"),(null==e||void 0===e._reactInternalFiber)&&a("38"),Us(e,t,n,!1,r)},unmountComponentAtNode:function(e){return Fs(e)||a("40"),!!e._reactRootContainer&&(Rs(function(){Us(null,null,e,!1,function(){e._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return Vs.apply(void 0,arguments)},unstable_batchedUpdates:Is,unstable_interactiveUpdates:js,flushSync:function(e,t){rs&&a("187");var n=ls;ls=!0;try{return Ja(e,t)}finally{ls=n,Ms(1073741823,!1)}},unstable_createRoot:function(e,t){return Fs(e)||a("299","unstable_createRoot"),new qs(e,!0,null!=t&&!0===t.hydrate)},unstable_flushControlled:function(e){var t=ls;ls=!0;try{Ja(e)}finally{(ls=t)||rs||Ms(1073741823,!1)}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[z,D,B,A.injectEventPluginsByName,v,W,function(e){C(e,V)},Se,Oe,Pn,O]}};Gs=(Ws={findFiberByHostInstance:L,bundleType:0,version:"16.8.6",rendererPackageName:"react-dom"}).findFiberByHostInstance,function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);qr=Ur(function(e){return t.onCommitFiberRoot(n,e)}),Fr=Ur(function(e){return t.onCommitFiberUnmount(n,e)})}catch(e){}}(i({},Ws,{overrideProps:null,currentDispatcherRef:We.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=rn(e))?null:e.stateNode},findFiberByHostInstance:function(e){return Gs?Gs(e):null}}));var Hs={default:Zs},Ks=Hs&&Zs||Hs;e.exports=Ks.default||Ks},function(e,t,n){"use strict";e.exports=n(54)},function(e,t,n){"use strict";(function(e){
/** @license React v0.13.6
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
Object.defineProperty(t,"__esModule",{value:!0});var n=null,r=!1,i=3,o=-1,a=-1,s=!1,u=!1;function l(){if(!s){var e=n.expirationTime;u?E():u=!0,w(h,e)}}function c(){var e=n,t=n.next;if(n===t)n=null;else{var r=n.previous;n=r.next=t,t.previous=r}e.next=e.previous=null,r=e.callback,t=e.expirationTime,e=e.priorityLevel;var o=i,s=a;i=e,a=t;try{var u=r()}finally{i=o,a=s}if("function"==typeof u)if(u={callback:u,priorityLevel:e,expirationTime:t,next:null,previous:null},null===n)n=u.next=u.previous=u;else{r=null,e=n;do{if(e.expirationTime>=t){r=e;break}e=e.next}while(e!==n);null===r?r=n:r===n&&(n=u,l()),(t=r.previous).next=r.previous=u,u.next=r,u.previous=t}}function p(){if(-1===o&&null!==n&&1===n.priorityLevel){s=!0;try{do{c()}while(null!==n&&1===n.priorityLevel)}finally{s=!1,null!==n?l():u=!1}}}function h(e){s=!0;var i=r;r=e;try{if(e)for(;null!==n;){var o=t.unstable_now();if(!(n.expirationTime<=o))break;do{c()}while(null!==n&&n.expirationTime<=o)}else if(null!==n)do{c()}while(null!==n&&!T())}finally{s=!1,r=i,null!==n?l():u=!1,p()}}var f,d,m=Date,_="function"==typeof setTimeout?setTimeout:void 0,y="function"==typeof clearTimeout?clearTimeout:void 0,v="function"==typeof requestAnimationFrame?requestAnimationFrame:void 0,g="function"==typeof cancelAnimationFrame?cancelAnimationFrame:void 0;function b(e){f=v(function(t){y(d),e(t)}),d=_(function(){g(f),e(t.unstable_now())},100)}if("object"==typeof performance&&"function"==typeof performance.now){var x=performance;t.unstable_now=function(){return x.now()}}else t.unstable_now=function(){return m.now()};var w,E,T,k=null;if("undefined"!=typeof window?k=window:void 0!==e&&(k=e),k&&k._schedMock){var C=k._schedMock;w=C[0],E=C[1],T=C[2],t.unstable_now=C[3]}else if("undefined"==typeof window||"function"!=typeof MessageChannel){var M=null,P=function(e){if(null!==M)try{M(e)}finally{M=null}};w=function(e){null!==M?setTimeout(w,0,e):(M=e,setTimeout(P,0,!1))},E=function(){M=null},T=function(){return!1}}else{"undefined"!=typeof console&&("function"!=typeof v&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof g&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));var A=null,S=!1,O=-1,I=!1,R=!1,j=0,L=33,z=33;T=function(){return j<=t.unstable_now()};var D=new MessageChannel,B=D.port2;D.port1.onmessage=function(){S=!1;var e=A,n=O;A=null,O=-1;var r=t.unstable_now(),i=!1;if(0>=j-r){if(!(-1!==n&&n<=r))return I||(I=!0,b(N)),A=e,void(O=n);i=!0}if(null!==e){R=!0;try{e(i)}finally{R=!1}}};var N=function(e){if(null!==A){b(N);var t=e-j+z;t<z&&L<z?(8>t&&(t=8),z=t<L?L:t):L=t,j=e+z,S||(S=!0,B.postMessage(void 0))}else I=!1};w=function(e,t){A=e,O=t,R||0>t?B.postMessage(void 0):I||(I=!0,b(N))},E=function(){A=null,S=!1,O=-1}}t.unstable_ImmediatePriority=1,t.unstable_UserBlockingPriority=2,t.unstable_NormalPriority=3,t.unstable_IdlePriority=5,t.unstable_LowPriority=4,t.unstable_runWithPriority=function(e,n){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=i,a=o;i=e,o=t.unstable_now();try{return n()}finally{i=r,o=a,p()}},t.unstable_next=function(e){switch(i){case 1:case 2:case 3:var n=3;break;default:n=i}var r=i,a=o;i=n,o=t.unstable_now();try{return e()}finally{i=r,o=a,p()}},t.unstable_scheduleCallback=function(e,r){var a=-1!==o?o:t.unstable_now();if("object"==typeof r&&null!==r&&"number"==typeof r.timeout)r=a+r.timeout;else switch(i){case 1:r=a+-1;break;case 2:r=a+250;break;case 5:r=a+1073741823;break;case 4:r=a+1e4;break;default:r=a+5e3}if(e={callback:e,priorityLevel:i,expirationTime:r,next:null,previous:null},null===n)n=e.next=e.previous=e,l();else{a=null;var s=n;do{if(s.expirationTime>r){a=s;break}s=s.next}while(s!==n);null===a?a=n:a===n&&(n=e,l()),(r=a.previous).next=a.previous=e,e.next=a,e.previous=r}return e},t.unstable_cancelCallback=function(e){var t=e.next;if(null!==t){if(t===e)n=null;else{e===n&&(n=t);var r=e.previous;r.next=t,t.previous=r}e.next=e.previous=null}},t.unstable_wrapCallback=function(e){var n=i;return function(){var r=i,a=o;i=n,o=t.unstable_now();try{return e.apply(this,arguments)}finally{i=r,o=a,p()}}},t.unstable_getCurrentPriorityLevel=function(){return i},t.unstable_shouldYield=function(){return!r&&(null!==n&&n.expirationTime<a||T())},t.unstable_continueExecution=function(){null!==n&&l()},t.unstable_pauseExecution=function(){},t.unstable_getFirstCallbackNode=function(){return n}}).call(this,n(14))},function(e,t,n){"use strict";var r=n(56);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(1)),i=n(41),o=s(n(60)),a=s(n(113));function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(){return r.default.createElement(i.BrowserRouter,null,r.default.createElement("div",null,r.default.createElement(i.Switch,null,r.default.createElement(i.Route,{path:"/",component:o.default,exact:!0}),r.default.createElement(i.Route,{path:"/page",component:o.default,exact:!0}),r.default.createElement(i.Route,{component:a.default}))))}},function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(20)),o=r(n(21));n(29);var a=r(n(15));function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function u(e){return"/"===e.charAt(0)?e:"/"+e}function l(e){return"/"===e.charAt(0)?e.substr(1):e}function c(e,t){return function(e,t){return new RegExp("^"+t+"(\\/|\\?|#|$)","i").test(e)}(e,t)?e.substr(t.length):e}function p(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function h(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var o=t.indexOf("?");return-1!==o&&(n=t.substr(o),t=t.substr(0,o)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}function f(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function d(e,t,n,r){var o;"string"==typeof e?(o=h(e)).state=t:(void 0===(o=s({},e)).pathname&&(o.pathname=""),o.search?"?"!==o.search.charAt(0)&&(o.search="?"+o.search):o.search="",o.hash?"#"!==o.hash.charAt(0)&&(o.hash="#"+o.hash):o.hash="",void 0!==t&&void 0===o.state&&(o.state=t));try{o.pathname=decodeURI(o.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(o.key=n),r?o.pathname?"/"!==o.pathname.charAt(0)&&(o.pathname=i(o.pathname,r.pathname)):o.pathname=r.pathname:o.pathname||(o.pathname="/"),o}function m(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&o(e.state,t.state)}function _(){var e=null,t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var o="function"==typeof e?e(t,n):e;"string"==typeof o?"function"==typeof r?r(o,i):i(!0):i(!1!==o)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter(function(e){return e!==r})}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach(function(e){return e.apply(void 0,n)})}}}var y=!("undefined"==typeof window||!window.document||!window.document.createElement);function v(e,t){t(window.confirm(e))}var g="popstate",b="hashchange";function x(){try{return window.history.state||{}}catch(e){return{}}}var w="hashchange",E={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+l(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:l,decodePath:u},slash:{encodePath:u,decodePath:u}};function T(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function k(e){var t=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,0<=t?t:0)+"#"+e)}function C(e,t,n){return Math.min(Math.max(e,t),n)}t.createBrowserHistory=function(e){void 0===e&&(e={}),y||a(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),r=!(-1===window.navigator.userAgent.indexOf("Trident")),i=e,o=i.forceRefresh,l=void 0!==o&&o,h=i.getUserConfirmation,m=void 0===h?v:h,w=i.keyLength,E=void 0===w?6:w,T=e.basename?p(u(e.basename)):"";function k(e){var t=e||{},n=t.key,r=t.state,i=window.location,o=i.pathname+i.search+i.hash;return T&&(o=c(o,T)),d(o,r,n)}function C(){return Math.random().toString(36).substr(2,E)}var M=_();function P(e){s(q,e),q.length=t.length,M.notifyListeners(q.location,q.action)}function A(e){(function(e){void 0===e.state&&navigator.userAgent.indexOf("CriOS")})(e)||I(k(e.state))}function S(){I(k(x()))}var O=!1;function I(e){O?(O=!1,P()):M.confirmTransitionTo(e,"POP",m,function(t){t?P({action:"POP",location:e}):function(e){var t=q.location,n=j.indexOf(t.key);-1===n&&(n=0);var r=j.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(O=!0,z(i))}(e)})}var R=k(x()),j=[R.key];function L(e){return T+f(e)}function z(e){t.go(e)}var D=0;function B(e){1===(D+=e)&&1===e?(window.addEventListener(g,A),r&&window.addEventListener(b,S)):0===D&&(window.removeEventListener(g,A),r&&window.removeEventListener(b,S))}var N=!1,q={length:t.length,action:"POP",location:R,createHref:L,push:function(e,r){var i=d(e,r,C(),q.location);M.confirmTransitionTo(i,"PUSH",m,function(e){if(e){var r=L(i),o=i.key,a=i.state;if(n)if(t.pushState({key:o,state:a},null,r),l)window.location.href=r;else{var s=j.indexOf(q.location.key),u=j.slice(0,-1===s?0:s+1);u.push(i.key),j=u,P({action:"PUSH",location:i})}else window.location.href=r}})},replace:function(e,r){var i="REPLACE",o=d(e,r,C(),q.location);M.confirmTransitionTo(o,i,m,function(e){if(e){var r=L(o),a=o.key,s=o.state;if(n)if(t.replaceState({key:a,state:s},null,r),l)window.location.replace(r);else{var u=j.indexOf(q.location.key);-1!==u&&(j[u]=o.key),P({action:i,location:o})}else window.location.replace(r)}})},go:z,goBack:function(){z(-1)},goForward:function(){z(1)},block:function(e){void 0===e&&(e=!1);var t=M.setPrompt(e);return N||(B(1),N=!0),function(){return N&&(N=!1,B(-1)),t()}},listen:function(e){var t=M.appendListener(e);return B(1),function(){B(-1),t()}}};return q},t.createHashHistory=function(e){void 0===e&&(e={}),y||a(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),r=n.getUserConfirmation,i=void 0===r?v:r,o=n.hashType,l=void 0===o?"slash":o,h=e.basename?p(u(e.basename)):"",g=E[l],b=g.encodePath,x=g.decodePath;function C(){var e=x(T());return h&&(e=c(e,h)),d(e)}var M=_();function P(e){s(q,e),q.length=t.length,M.notifyListeners(q.location,q.action)}var A=!1,S=null;function O(){var e=T(),t=b(e);if(e!==t)k(t);else{var n=C(),r=q.location;if(!A&&m(r,n))return;if(S===f(n))return;S=null,function(e){A?(A=!1,P()):M.confirmTransitionTo(e,"POP",i,function(t){t?P({action:"POP",location:e}):function(e){var t=q.location,n=L.lastIndexOf(f(t));-1===n&&(n=0);var r=L.lastIndexOf(f(e));-1===r&&(r=0);var i=n-r;i&&(A=!0,z(i))}(e)})}(n)}}var I=T(),R=b(I);I!==R&&k(R);var j=C(),L=[f(j)];function z(e){t.go(e)}var D=0;function B(e){1===(D+=e)&&1===e?window.addEventListener(w,O):0===D&&window.removeEventListener(w,O)}var N=!1,q={length:t.length,action:"POP",location:j,createHref:function(e){return"#"+b(h+f(e))},push:function(e,t){var n=d(e,void 0,void 0,q.location);M.confirmTransitionTo(n,"PUSH",i,function(e){if(e){var t=f(n),r=b(h+t);if(T()!==r){S=t,function(e){window.location.hash=e}(r);var i=L.lastIndexOf(f(q.location)),o=L.slice(0,-1===i?0:i+1);o.push(t),L=o,P({action:"PUSH",location:n})}else P()}})},replace:function(e,t){var n="REPLACE",r=d(e,void 0,void 0,q.location);M.confirmTransitionTo(r,n,i,function(e){if(e){var t=f(r),i=b(h+t);T()!==i&&(S=t,k(i));var o=L.indexOf(f(q.location));-1!==o&&(L[o]=t),P({action:n,location:r})}})},go:z,goBack:function(){z(-1)},goForward:function(){z(1)},block:function(e){void 0===e&&(e=!1);var t=M.setPrompt(e);return N||(B(1),N=!0),function(){return N&&(N=!1,B(-1)),t()}},listen:function(e){var t=M.appendListener(e);return B(1),function(){B(-1),t()}}};return q},t.createMemoryHistory=function(e){void 0===e&&(e={});var t=e,n=t.getUserConfirmation,r=t.initialEntries,i=void 0===r?["/"]:r,o=t.initialIndex,a=void 0===o?0:o,u=t.keyLength,l=void 0===u?6:u,c=_();function p(e){s(b,e),b.length=b.entries.length,c.notifyListeners(b.location,b.action)}function h(){return Math.random().toString(36).substr(2,l)}var m=C(a,0,i.length-1),y=i.map(function(e){return d(e,void 0,"string"==typeof e?h():e.key||h())}),v=f;function g(e){var t=C(b.index+e,0,b.entries.length-1),r=b.entries[t];c.confirmTransitionTo(r,"POP",n,function(e){e?p({action:"POP",location:r,index:t}):p()})}var b={length:y.length,action:"POP",location:y[m],index:m,entries:y,createHref:v,push:function(e,t){var r=d(e,t,h(),b.location);c.confirmTransitionTo(r,"PUSH",n,function(e){if(e){var t=b.index+1,n=b.entries.slice(0);n.length>t?n.splice(t,n.length-t,r):n.push(r),p({action:"PUSH",location:r,index:t,entries:n})}})},replace:function(e,t){var r="REPLACE",i=d(e,t,h(),b.location);c.confirmTransitionTo(i,r,n,function(e){e&&(b.entries[b.index]=i,p({action:r,location:i}))})},go:g,goBack:function(){g(-1)},goForward:function(){g(1)},canGo:function(e){var t=b.index+e;return 0<=t&&t<b.entries.length},block:function(e){return void 0===e&&(e=!1),c.setPrompt(e)},listen:function(e){return c.appendListener(e)}};return b},t.createLocation=d,t.locationsAreEqual=m,t.parsePath=h,t.createPath=f},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=c(n(1)),i=c(n(61)),o=(c(n(67)),c(n(71))),a=c(n(75)),s=c(n(81)),u=c(n(108)),l=c(n(110));function c(e){return e&&e.__esModule?e:{default:e}}n(120),(0,n(112).defineCustomElements)(window);t.default=function(){return r.default.createElement("as-responsive-content",null,r.default.createElement(o.default,null),r.default.createElement("div",{className:"as-content"},r.default.createElement("main",{className:"as-main"},r.default.createElement("div",{className:"as-map-area"},r.default.createElement(i.default,null),r.default.createElement(l.default,{vertical:"top",horizontal:"left",background:"",name:"Controls"})),r.default.createElement(u.default,{background:"",name:"Bottom"})),r.default.createElement(a.default,{size:"l",background:"",name:"Right"}),r.default.createElement(s.default,{size:"s",background:"",name:"Left"})))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),a=m(o),s=n(5),u=m(n(17)),l=m(n(6)),c=n(2),p=(m(n(62)),n(9)),h=m(n(31)),f=m(n(32)),d=m(n(11));function m(e){return e&&e.__esModule?e:{default:e}}n(120);var _=d.default.BASEMAP,y=d.default.BASEMAP_LABELS,v=(d.default.CENTER,d.default.ZOOM,function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=r({},e),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),i(t,[{key:"componentDidMount",value:function(){var e=this,t=u.default.map("map",{zoomControl:!1,maxZoom:18}).setView(this.props.viewport.center,this.props.viewport.zoom);this.props.setMap(t),u.default.tileLayer(_).addTo(t),this.popup=u.default.popup({closeButton:!1});var n=new l.default.filter.BoundingBoxLeaflet(t);this.props.changeCartoBBox(n),t.on("moveend",function(t){var n=t.target.getBounds(),r={center:t.target.getCenter(),zoom:t.target.getZoom()};e.props.setBboxFilter([n._northEast.lat,n._northEast.lng,n._southWest.lat,n._southWest.lng]),e.props.changeViewport(r)})}},{key:"setupLayers",value:function(){var e=this,t=Object.keys(f.default).reduce(function(t,n){var i,o,a,s=f.default[n],u=s.options,c=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(s,["options"]),p=new l.default.source.SQL(c.query),h=new l.default.style.CartoCSS(c.cartocss),d=new l.default.layer.Layer(p,h,u);return u.featureClickColumns&&d.on("featureClicked",e.openPopup.bind(e)),u.featureClickColumns&&"stores"===n&&(console.log(n),d.on("featureClicked",e.openPopupStores.bind(e))),e.props.client.getLeafletLayer().addTo(e.props.map),!1===c.visible&&d.hide(),r({},t,(i={},o=n,a=r({source:p,style:h,layer:d},c),o in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,i))},{});this.props.client.addLayers(Object.values(t).map(function(e){return e.layer})),u.default.tileLayer(y).addTo(this.props.map),console.log(t),this.props.storeLayers(t)}},{key:"componentDidUpdate",value:function(e){!e.map&&this.props.map&&this.setupLayers()}},{key:"openPopup",value:function(e){this.popup.setContent(""),this.popup.setLatLng(e.latLng),this.popup.isOpen()||(this.popup.openOn(this.props.map),(0,s.render)(a.default.createElement(h.default,e.data),this.popup._contentNode))}},{key:"render",value:function(){var e=this.props.layers;Object.keys(e).length;return a.default.createElement("div",{id:"map"})}}]),t}());t.default=(0,c.connect)(function(e){return{client:e.client,map:e.map,layers:e.layers,viewport:e.viewport,boundingbox:e.boundingbox}},function(e){return{storeLayers:function(t){return e((0,p.storeLayers)(t))},setMap:function(t){return e((0,p.setMap)(t))},setBboxFilter:function(t){return e((0,p.setBboxFilter)(t))},changeViewport:function(t){return e((0,p.changeViewport)(t))},changeCartoBBox:function(t){return e((0,p.changeCartoBBox)(t))}}})(v)},function(e,t,n){"use strict";n.r(t),function(e,r){n.d(t,"css",function(){return U}),n.d(t,"keyframes",function(){return He}),n.d(t,"injectGlobal",function(){return Ke}),n.d(t,"isStyledComponent",function(){return L}),n.d(t,"consolidateStreamedStyles",function(){return z}),n.d(t,"ThemeProvider",function(){return Oe}),n.d(t,"withTheme",function(){return Ue}),n.d(t,"ServerStyleSheet",function(){return me}),n.d(t,"StyleSheetManager",function(){return de}),n.d(t,"__DO_NOT_USE_OR_YOU_WILL_BE_HAUNTED_BY_SPOOKY_GHOSTS",function(){return Ve});var i=n(47),o=n.n(i),a=n(1),s=n.n(a),u=n(24),l=n.n(u),c=n(48),p=n.n(c),h=n(0),f=n.n(h),d=n(13),m=n.n(d),_=n(49),y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},g=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},w=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},E=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},T=function(e){return"object"===(void 0===e?"undefined":y(e))&&e.constructor===Object};var k=function(e){function t(n){v(this,t);for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];var a=E(this,e.call(this,"An error occurred. See https://github.com/styled-components/styled-components/blob/master/src/utils/errors.md#"+n+" for more information. "+(i?"Additional arguments: "+i.join(", "):"")));return E(a)}return x(t,e),t}(Error),C=function e(t,n){return t.reduce(function(t,r){if(null==r||!1===r||""===r)return t;if(Array.isArray(r))return t.push.apply(t,e(r,n)),t;if(r.hasOwnProperty("styledComponentId"))return t.push("."+r.styledComponentId),t;if("function"==typeof r){if(n){var i=r(n);if(s.a.isValidElement(i)){var a=r.displayName||r.name;throw new k(11,a)}t.push.apply(t,e([i],n))}else t.push(r);return t}return t.push(T(r)?function e(t,n){var r=Object.keys(t).filter(function(e){var n=t[e];return null!=n&&!1!==n&&""!==n}).map(function(n){return T(t[n])?e(t[n],n):o()(n)+": "+t[n]+";"}).join(" ");return n?n+" {\n  "+r+"\n}":r}(r):r.toString()),t},[])},M=/^\s*\/\/.*$/gm,P=new l.a({global:!1,cascade:!0,keyframe:!1,prefix:!1,compress:!1,semicolon:!0}),A=new l.a({global:!1,cascade:!0,keyframe:!1,prefix:!0,compress:!1,semicolon:!1}),S=[],O=function(e){if(-2===e){var t=S;return S=[],t}},I=p()(function(e){S.push(e)});A.use([I,O]),P.use([I,O]);var R=function(e,t,n){var r=e.join("").replace(M,"");return A(n||!t?"":t,t&&n?n+" "+t+" { "+r+" }":r)},j=function(e){return P("",e)};function L(e){return"function"==typeof e&&"string"==typeof e.styledComponentId}function z(){0}var D=function(e){return String.fromCharCode(e+(e>25?39:97))},B=function(e){var t="",n=void 0;for(n=e;n>52;n=Math.floor(n/52))t=D(n%52)+t;return D(n%52)+t},N=function(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n},q=Object.freeze([]),F=Object.freeze({}),U=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return"function"==typeof e||T(e)?C(N(q,[e].concat(n))):C(N(e,n))},V=void 0!==e&&e.env.SC_ATTR||"data-styled-components",W="__styled-components-stylesheet__",G="undefined"!=typeof window&&"HTMLElement"in window,Z=/^[^\S\n]*?\/\* sc-component-id:\s*(\S+)\s+\*\//gm,H=function(e){var t=""+(e||""),n=[];return t.replace(Z,function(e,t,r){return n.push({componentId:t,matchIndex:r}),e}),n.map(function(e,r){var i=e.componentId,o=e.matchIndex,a=n[r+1];return{componentId:i,cssFromDOM:a?t.slice(o,a.matchIndex):t.slice(o)}})},K=function(){return n.nc},Y=function(e,t,n){n&&((e[t]||(e[t]=Object.create(null)))[n]=!0)},X=function(e,t){e[t]=Object.create(null)},$=function(e){return function(t,n){return void 0!==e[t]&&e[t][n]}},J=function(e){var t="";for(var n in e)t+=Object.keys(e[n]).join(" ")+" ";return t.trim()},Q=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets.length,n=0;n<t;n+=1){var r=document.styleSheets[n];if(r.ownerNode===e)return r}throw new k(10)},ee=function(e,t,n){if(!t)return!1;var r=e.cssRules.length;try{e.insertRule(t,n<=r?n:r)}catch(e){return!1}return!0},te=function(e){return"\n/* sc-component-id: "+e+" */\n"},ne=function(e,t){for(var n=0,r=0;r<=t;r+=1)n+=e[r];return n},re=function(e,t){return function(n){var r=K();return"<style "+[r&&'nonce="'+r+'"',V+'="'+J(t)+'"',n].filter(Boolean).join(" ")+">"+e()+"</style>"}},ie=function(e,t){return function(){var n,r=((n={})[V]=J(t),n),i=K();return i&&(r.nonce=i),s.a.createElement("style",b({},r,{dangerouslySetInnerHTML:{__html:e()}}))}},oe=function(e){return function(){return Object.keys(e)}},ae=function e(t,n){var r=void 0===t?Object.create(null):t,i=void 0===n?Object.create(null):n,o=function(e){var t=i[e];return void 0!==t?t:i[e]=[""]},a=function(){var e="";for(var t in i){var n=i[t][0];n&&(e+=te(t)+n)}return e};return{clone:function(){var t=function(e){var t=Object.create(null);for(var n in e)t[n]=b({},e[n]);return t}(r),n=Object.create(null);for(var o in i)n[o]=[i[o][0]];return e(t,n)},css:a,getIds:oe(i),hasNameForId:$(r),insertMarker:o,insertRules:function(e,t,n){o(e)[0]+=t.join(" "),Y(r,e,n)},removeRules:function(e){var t=i[e];void 0!==t&&(t[0]="",X(r,e))},sealed:!1,styleTag:null,toElement:ie(a,r),toHTML:re(a,r)}},se=function(e,t,n,r,i){if(G&&!n){var o=function(e,t,n){var r=document.createElement("style");r.setAttribute(V,"");var i=K();if(i&&r.setAttribute("nonce",i),r.appendChild(document.createTextNode("")),e&&!t)e.appendChild(r);else{if(!t||!e||!t.parentNode)throw new k(6);t.parentNode.insertBefore(r,n?t:t.nextSibling)}return r}(e,t,r);return function(e,t){var n=Object.create(null),r=Object.create(null),i=[],o=void 0!==t,a=!1,s=function(e){var t=r[e];return void 0!==t?t:(r[e]=i.length,i.push(0),X(n,e),r[e])},u=function(){var t=Q(e).cssRules,n="";for(var o in r){n+=te(o);for(var a=r[o],s=ne(i,a),u=s-i[a];u<s;u+=1){var l=t[u];void 0!==l&&(n+=l.cssText)}}return n};return{clone:function(){throw new k(5)},css:u,getIds:oe(r),hasNameForId:$(n),insertMarker:s,insertRules:function(r,u,l){for(var c=s(r),p=Q(e),h=ne(i,c),f=0,d=[],m=u.length,_=0;_<m;_+=1){var y=u[_],v=o;v&&-1!==y.indexOf("@import")?d.push(y):ee(p,y,h+f)&&(v=!1,f+=1)}o&&d.length>0&&(a=!0,t().insertRules(r+"-import",d)),i[c]+=f,Y(n,r,l)},removeRules:function(s){var u=r[s];if(void 0!==u){var l=i[u];!function(e,t,n){for(var r=t-n,i=t;i>r;i-=1)e.deleteRule(i)}(Q(e),ne(i,u),l),i[u]=0,X(n,s),o&&a&&t().removeRules(s+"-import")}},sealed:!1,styleTag:e,toElement:ie(u,n),toHTML:re(u,n)}}(o,i)}return ae()},ue=/\s+/,le=void 0;le=G?1e3:-1;var ce,pe=0,he=void 0,fe=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G?document.head:null,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];v(this,e),this.getImportRuleTag=function(){var e=t.importRuleTag;if(void 0!==e)return e;var n=t.tags[0];return t.importRuleTag=se(t.target,n?n.styleTag:null,t.forceServer,!0)},pe+=1,this.id=pe,this.forceServer=r,this.target=r?null:n,this.tagMap={},this.deferred={},this.rehydratedNames={},this.ignoreRehydratedNames={},this.tags=[],this.capacity=1,this.clones=[]}return e.prototype.rehydrate=function(){if(!G||this.forceServer)return this;var e=[],t=[],n=!1,r=document.querySelectorAll("style["+V+"]"),i=r.length;if(0===i)return this;for(var o=0;o<i;o+=1){var a=r[o];n||(n=!!a.getAttribute("data-styled-streamed"));for(var s=(a.getAttribute(V)||"").trim().split(ue),u=s.length,l=0;l<u;l+=1){var c=s[l];this.rehydratedNames[c]=!0}t.push.apply(t,H(a.textContent)),e.push(a)}var p=t.length;if(0===p)return this;var h=function(e,t,n,r){var i,o,a=(i=function(){for(var r=0,i=n.length;r<i;r+=1){var o=n[r],a=o.componentId,s=o.cssFromDOM,u=j(s);e.insertRules(a,u)}for(var l=0,c=t.length;l<c;l+=1){var p=t[l];p.parentNode&&p.parentNode.removeChild(p)}},o=!1,function(){o||(o=!0,i())});return r&&a(),b({},e,{insertMarker:function(t){return a(),e.insertMarker(t)},insertRules:function(t,n,r){return a(),e.insertRules(t,n,r)}})}(this.makeTag(null),e,t,n);this.capacity=Math.max(1,le-p),this.tags.push(h);for(var f=0;f<p;f+=1)this.tagMap[t[f].componentId]=h;return this},e.reset=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];he=new e(void 0,t).rehydrate()},e.prototype.clone=function(){var t=new e(this.target,this.forceServer);return this.clones.push(t),t.tags=this.tags.map(function(e){for(var n=e.getIds(),r=e.clone(),i=0;i<n.length;i+=1)t.tagMap[n[i]]=r;return r}),t.rehydratedNames=b({},this.rehydratedNames),t.deferred=b({},this.deferred),t},e.prototype.sealAllTags=function(){this.capacity=1,this.tags.forEach(function(e){e.sealed=!0})},e.prototype.makeTag=function(e){var t=e?e.styleTag:null;return se(this.target,t,this.forceServer,!1,this.getImportRuleTag)},e.prototype.getTagForId=function(e){var t=this.tagMap[e];if(void 0!==t&&!t.sealed)return t;var n=this.tags[this.tags.length-1];return this.capacity-=1,0===this.capacity&&(this.capacity=le,n=this.makeTag(n),this.tags.push(n)),this.tagMap[e]=n},e.prototype.hasId=function(e){return void 0!==this.tagMap[e]},e.prototype.hasNameForId=function(e,t){if(void 0===this.ignoreRehydratedNames[e]&&this.rehydratedNames[t])return!0;var n=this.tagMap[e];return void 0!==n&&n.hasNameForId(e,t)},e.prototype.deferredInject=function(e,t){if(void 0===this.tagMap[e]){for(var n=this.clones,r=0;r<n.length;r+=1)n[r].deferredInject(e,t);this.getTagForId(e).insertMarker(e),this.deferred[e]=t}},e.prototype.inject=function(e,t,n){for(var r=this.clones,i=0;i<r.length;i+=1)r[i].inject(e,t,n);var o=this.getTagForId(e);if(void 0!==this.deferred[e]){var a=this.deferred[e].concat(t);o.insertRules(e,a,n),this.deferred[e]=void 0}else o.insertRules(e,t,n)},e.prototype.remove=function(e){var t=this.tagMap[e];if(void 0!==t){for(var n=this.clones,r=0;r<n.length;r+=1)n[r].remove(e);t.removeRules(e),this.ignoreRehydratedNames[e]=!0,this.deferred[e]=void 0}},e.prototype.toHTML=function(){return this.tags.map(function(e){return e.toHTML()}).join("")},e.prototype.toReactElements=function(){var e=this.id;return this.tags.map(function(t,n){var r="sc-"+e+"-"+n;return Object(a.cloneElement)(t.toElement(),{key:r})})},g(e,null,[{key:"master",get:function(){return he||(he=(new e).rehydrate())}},{key:"instance",get:function(){return e.master}}]),e}(),de=function(e){function t(){return v(this,t),E(this,e.apply(this,arguments))}return x(t,e),t.prototype.getChildContext=function(){var e;return(e={})[W]=this.sheetInstance,e},t.prototype.componentWillMount=function(){if(this.props.sheet)this.sheetInstance=this.props.sheet;else{if(!this.props.target)throw new k(4);this.sheetInstance=new fe(this.props.target)}},t.prototype.render=function(){return s.a.Children.only(this.props.children)},t}(a.Component);de.childContextTypes=((ce={})[W]=f.a.oneOfType([f.a.instanceOf(fe),f.a.instanceOf(me)]).isRequired,ce);var me=function(){function e(){v(this,e),this.masterSheet=fe.master,this.instance=this.masterSheet.clone(),this.closed=!1}return e.prototype.complete=function(){if(!this.closed){var e=this.masterSheet.clones.indexOf(this.instance);this.masterSheet.clones.splice(e,1),this.closed=!0}},e.prototype.collectStyles=function(e){if(this.closed)throw new k(2);return s.a.createElement(de,{sheet:this.instance},e)},e.prototype.getStyleTags=function(){return this.complete(),this.instance.toHTML()},e.prototype.getStyleElement=function(){return this.complete(),this.instance.toReactElements()},e.prototype.interleaveWithNodeStream=function(e){throw new k(3)},e}(),_e=function(e,t,n){var r=n&&e.theme===n.theme;return e.theme&&!r?e.theme:t},ye=/[[\].#*$><+~=|^:(),"'`-]+/g,ve=/(^-|-$)/g;function ge(e){return e.replace(ye,"-").replace(ve,"")}function be(e){return e.displayName||e.name||"Component"}function xe(e){return"string"==typeof e}var we=/^((?:s(?:uppressContentEditableWarn|croll|pac)|(?:shape|image|text)Render|(?:letter|word)Spac|vHang|hang)ing|(?:on(?:AnimationIteration|C(?:o(?:mposition(?:Update|Start|End)|ntextMenu|py)|anPlayThrough|anPlay|hange|lick|ut)|(?:Animation|Touch|Load|Drag)Start|(?:(?:Duration|Volume|Rate)Chang|(?:MouseLea|(?:Touch|Mouse)Mo|DragLea)v|Paus)e|Loaded(?:Metad|D)ata|(?:(?:T(?:ransition|ouch)|Animation)E|Suspe)nd|DoubleClick|(?:TouchCanc|Whe)el|Lo(?:stPointer|ad)|TimeUpdate|(?:Mouse(?:Ent|Ov)e|Drag(?:Ent|Ov)e|Erro)r|GotPointer|MouseDown|(?:E(?:n(?:crypt|d)|mpti)|S(?:tall|eek))ed|KeyPress|(?:MouseOu|DragExi|S(?:elec|ubmi)|Rese|Inpu)t|P(?:rogress|laying)|DragEnd|Key(?:Down|Up)|(?:MouseU|Dro)p|(?:Wait|Seek)ing|Scroll|Focus|Paste|Abort|Drag|Play|Blur)Captur|alignmentBaselin|(?:limitingConeAng|xlink(?:(?:Arcr|R)o|Tit)|s(?:urfaceSca|ty|ca)|unselectab|baseProfi|fontSty|(?:focus|dragg)ab|multip|profi|tit)l|d(?:ominantBaselin|efaultValu)|onPointerLeav|a(?:uto(?:Capitaliz|Revers|Sav)|dditiv)|(?:(?:formNoValid|xlinkActu|noValid|accumul|rot)a|autoComple|decelera)t|(?:(?:attribute|item)T|datat)yp|onPointerMov|(?:attribute|glyph)Nam|playsInlin|(?:writing|input|edge)Mod|(?:formE|e)ncTyp|(?:amplitu|mo)d|(?:xlinkTy|itemSco|keyTy|slo)p|(?:xmlSpa|non)c|fillRul|(?:dateTi|na)m|r(?:esourc|ol)|xmlBas|wmod)e|(?:glyphOrientationHorizont|loc)al|(?:externalResourcesRequir|select|revers|mut)ed|c(?:o(?:lorInterpolationFilter|ord)s|o(?:lor(?:Interpolation)?|nt(?:rols|ent))|(?:ontentS(?:cript|tyle)Typ|o(?:ntentEditab|lorProfi)l|l(?:assNam|ipRul)|a(?:lcMod|ptur)|it)e|olorRendering|l(?:ipPathUnits|assID)|(?:ontrolsLis|apHeigh)t|h(?:eckedLink|a(?:llenge|rSet)|ildren|ecked)|ell(?:Spac|Padd)ing|o(?:ntextMenu|ls)|(?:rossOrigi|olSpa)n|l(?:ip(?:Path)?|ass)|ursor|[xy])|glyphOrientationVertical|d(?:angerouslySetInnerHTML|efaultChecked|ownload|isabled|isplay|[xy])|(?:s(?:trikethroughThickn|eaml)es|(?:und|ov)erlineThicknes|r(?:equiredExtension|adiu)|(?:requiredFeatur|tableValu|stitchTil|numOctav|filterR)e|key(?:(?:Splin|Tim)e|Param)|auto[Ff]ocu|header|bia)s|(?:(?:st(?:rikethroughPosi|dDevia)|(?:und|ov)erlinePosi|(?:textDecor|elev)a|orienta)tio|(?:strokeLinejo|orig)i|on(?:PointerDow|FocusI)|formActio|zoomAndPa|directio|(?:vers|act)io|rowSpa|begi|ico)n|o(?:n(?:AnimationIteration|C(?:o(?:mposition(?:Update|Start|End)|ntextMenu|py)|anPlayThrough|anPlay|hange|lick|ut)|(?:(?:Duration|Volume|Rate)Chang|(?:MouseLea|(?:Touch|Mouse)Mo|DragLea)v|Paus)e|Loaded(?:Metad|D)ata|(?:Animation|Touch|Load|Drag)Start|(?:(?:T(?:ransition|ouch)|Animation)E|Suspe)nd|DoubleClick|(?:TouchCanc|Whe)el|(?:Mouse(?:Ent|Ov)e|Drag(?:Ent|Ov)e|Erro)r|TimeUpdate|(?:E(?:n(?:crypt|d)|mpti)|S(?:tall|eek))ed|MouseDown|P(?:rogress|laying)|(?:MouseOu|DragExi|S(?:elec|ubmi)|Rese|Inpu)t|KeyPress|DragEnd|Key(?:Down|Up)|(?:Wait|Seek)ing|(?:MouseU|Dro)p|Scroll|Paste|Focus|Abort|Drag|Play|Load|Blur)|rient)|p(?:reserveAspectRatio|ointsAt[X-Z]|anose1)|(?:(?:allowPaymentReque|(?:fontSize|length)Adju|manife)s|strokeMiterlimi|(?:(?:specularE|e)xpon|renderingInt|asc)en|(?:specularConsta|repeatCou|fontVaria)n|d(?:iffuseConsta|esce)n|baselineShif|vectorEffec|onPointerOu|(?:(?:mar(?:ker|gin)|x)H|accentH|fontW)eigh|markerStar|a(?:utoCorrec|bou)|onFocusOu|intercep|restar|forma|inlis|heigh|lis)t|(?:patternContent|ma(?:sk(?:Content)?|rker)|primitive|gradient|pattern|filter)Units|(?:(?:allowTranspar|baseFrequ)enc|re(?:ferrerPolic|adOnl)|(?:(?:st(?:roke|op)O|floodO|fillO|o)pac|integr|secur)it|visibilit|fontFamil|accessKe|propert|summar)y|(?:gradientT|patternT|t)ransform|(?:(?:st(?:rokeDasho|artO)|o)ffs|acceptChars|formTarg|viewTarg|srcS)et|(?:[xy]ChannelSelect|lightingCol|textAnch|floodCol|stopCol|operat|htmlF)or|(?:(?:enableBackgrou|markerE)n|s(?:p(?:readMetho|ee)|ee)|formMetho|(?:markerM|onInval)i|preloa|metho|kin)d|k(?:ernel(?:UnitLength|Matrix)|[1-4])|strokeDasharray|(?:onPointerCanc|lab)el|(?:allowFullScre|hidd)en|a(?:l(?:lowUserMedia|phabetic|t)|rabicForm|sync)|systemLanguage|(?:(?:o(?:nPointer(?:Ent|Ov)|rd)|allowReord|placehold|frameBord|paintOrd|post)e|repeatDu|d(?:efe|u))r|(?:pointerEve|keyPoi)nts|preserveAlpha|(?:strokeLineca|onPointerU|itemPro|useMa|wra|loo)p|v(?:Mathematical|ert(?:Origin[XY]|AdvY)|alues|ocab)|unicodeRange|h(?:oriz(?:Origin|Adv)X|ttpEquiv)|(?:vI|i)deographic|mathematical|u(?:nicodeBidi|[12])|(?:fontStretc|hig)h|vAlphabetic|(?:(?:mar(?:ker|gin)W|strokeW)id|azimu)th|(?:xmlnsXl|valueL)ink|mediaGroup|spellCheck|(?:text|m(?:in|ax))Length|(?:unitsPerE|optimu|fro)m|r(?:adioGroup|e(?:sults|f[XY]|l)|ows|[xy])|pathLength|(?:xlinkHr|glyphR)ef|innerHTML|xlinkShow|f(?:o(?:ntSize|rm?)|il(?:ter|l))|(?:tabInde|(?:sand|b)bo|viewBo)x|autoPlay|r(?:e(?:quired|sult|f))?|(?:(?:href|xml|src)La|kerni)ng|o(?:verflow|pen)|i(?:temRef|n2|s)|p(?:attern|oints)|unicode|d(?:efault|ata|ir)?|divisor|t(?:arget[XY]|o)|(?:stri|la)ng|(?:width|size)s|prefix|typeof|srcDoc|s(?:coped|te(?:m[hv]|p)|pan)|s(?:t(?:roke|art)|hape|cope|rc)|a(?:ccept|llow|s)|itemID|t(?:arget|ype)|m(?:edia|a(?:sk|x)|in)|value|width|x(?:mlns)?|size|href|k(?:ey)?|end|low|by|x[12]|y[12]|g[12]|i[dn]|f[xy]|[yz])$/,Ee=RegExp.prototype.test.bind(new RegExp("^(x|data|aria)-[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"));var Te,ke,Ce="__styled-components__",Me=Ce+"next__",Pe=f.a.shape({getTheme:f.a.func,subscribe:f.a.func,unsubscribe:f.a.func}),Ae=((Te={})[Ce]=f.a.func,Te[Me]=Pe,Te);var Se,Oe=function(e){function t(){v(this,t);var n=E(this,e.call(this));return n.unsubscribeToOuterId=-1,n.getTheme=n.getTheme.bind(n),n}return x(t,e),t.prototype.componentWillMount=function(){var e,t,n,r,i=this,o=this.context[Me];void 0!==o&&(this.unsubscribeToOuterId=o.subscribe(function(e){i.outerTheme=e,void 0!==i.broadcast&&i.publish(i.props.theme)})),this.broadcast=(e=this.getTheme(),t={},n=0,r=e,{publish:function(e){for(var n in r=e,t){var i=t[n];void 0!==i&&i(r)}},subscribe:function(e){var i=n;return t[i]=e,n+=1,e(r),i},unsubscribe:function(e){t[e]=void 0}})},t.prototype.getChildContext=function(){var e,t=this;return b({},this.context,((e={})[Me]={getTheme:this.getTheme,subscribe:this.broadcast.subscribe,unsubscribe:this.broadcast.unsubscribe},e[Ce]=function(e){var n=t.broadcast.subscribe(e);return function(){return t.broadcast.unsubscribe(n)}},e))},t.prototype.componentWillReceiveProps=function(e){this.props.theme!==e.theme&&this.publish(e.theme)},t.prototype.componentWillUnmount=function(){-1!==this.unsubscribeToOuterId&&this.context[Me].unsubscribe(this.unsubscribeToOuterId)},t.prototype.getTheme=function(e){var t=e||this.props.theme;if("function"==typeof t)return t(this.outerTheme);if(null===t||Array.isArray(t)||"object"!==(void 0===t?"undefined":y(t)))throw new k(8);return b({},this.outerTheme,t)},t.prototype.publish=function(e){this.broadcast.publish(this.getTheme(e))},t.prototype.render=function(){return this.props.children?s.a.Children.only(this.props.children):null},t}(a.Component);Oe.childContextTypes=Ae,Oe.contextTypes=((ke={})[Me]=Pe,ke);var Ie={},Re=b({},Ae,((Se={})[W]=f.a.oneOfType([f.a.instanceOf(fe),f.a.instanceOf(me)]),Se)),je={};var Le=function(e){function t(){var n,r;v(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=E(this,e.call.apply(e,[this].concat(o))),r.attrs={},r.state={theme:null,generatedClassName:""},r.unsubscribeId=-1,E(r,n)}return x(t,e),t.prototype.unsubscribeFromContext=function(){-1!==this.unsubscribeId&&this.context[Me].unsubscribe(this.unsubscribeId)},t.prototype.buildExecutionContext=function(e,t){var n=this.constructor.attrs,r=b({},t,{theme:e});return void 0===n?r:(this.attrs=Object.keys(n).reduce(function(e,t){var i=n[t];return e[t]="function"!=typeof i||function(e,t){for(var n=e;n;)if((n=Object.getPrototypeOf(n))&&n===t)return!0;return!1}(i,a.Component)?i:i(r),e},{}),b({},r,this.attrs))},t.prototype.generateAndInjectStyles=function(e,t){var n=this.constructor,r=n.attrs,i=n.componentStyle,o=(n.warnTooManyClasses,this.context[W]||fe.master);if(i.isStatic&&void 0===r)return i.generateAndInjectStyles(Ie,o);var a=this.buildExecutionContext(e,t);return i.generateAndInjectStyles(a,o)},t.prototype.componentWillMount=function(){var e=this,t=this.constructor.componentStyle,n=this.context[Me];if(t.isStatic){var r=this.generateAndInjectStyles(Ie,this.props);this.setState({generatedClassName:r})}else if(void 0!==n){var i=n.subscribe;this.unsubscribeId=i(function(t){var n=_e(e.props,t,e.constructor.defaultProps),r=e.generateAndInjectStyles(n,e.props);e.setState({theme:n,generatedClassName:r})})}else{var o=this.props.theme||F,a=this.generateAndInjectStyles(o,this.props);this.setState({theme:o,generatedClassName:a})}},t.prototype.componentWillReceiveProps=function(e){var t=this;this.constructor.componentStyle.isStatic||this.setState(function(n){var r=_e(e,n.theme,t.constructor.defaultProps);return{theme:r,generatedClassName:t.generateAndInjectStyles(r,e)}})},t.prototype.componentWillUnmount=function(){this.unsubscribeFromContext()},t.prototype.render=function(){var e=this.props.innerRef,t=this.state.generatedClassName,n=this.constructor,r=n.styledComponentId,i=n.target,o=xe(i),s=[this.props.className,r,this.attrs.className,t].filter(Boolean).join(" "),u=b({},this.attrs,{className:s});L(i)?u.innerRef=e:u.ref=e;var l,c=u,p=void 0;for(p in this.props)"innerRef"===p||"className"===p||o&&(l=p,!we.test(l)&&!Ee(l.toLowerCase()))||(c[p]="style"===p&&p in this.attrs?b({},this.attrs[p],this.props[p]):this.props[p]);return Object(a.createElement)(i,c)},t}(a.Component);function ze(e){for(var t,n=0|e.length,r=0|n,i=0;n>=4;)t=1540483477*(65535&(t=255&e.charCodeAt(i)|(255&e.charCodeAt(++i))<<8|(255&e.charCodeAt(++i))<<16|(255&e.charCodeAt(++i))<<24))+((1540483477*(t>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(t=1540483477*(65535&(t^=t>>>24))+((1540483477*(t>>>16)&65535)<<16)),n-=4,++i;switch(n){case 3:r^=(255&e.charCodeAt(i+2))<<16;case 2:r^=(255&e.charCodeAt(i+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(i)))+((1540483477*(r>>>16)&65535)<<16)}return r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16),(r^=r>>>15)>>>0}var De=G,Be=function e(t,n){for(var r=0,i=t.length;r<i;r+=1){var o=t[r];if(Array.isArray(o)&&!e(o))return!1;if("function"==typeof o&&!L(o))return!1}if(void 0!==n)for(var a in n)if("function"==typeof n[a])return!1;return!0},Ne=r.hot&&!1,qe=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Fe=function(e){return e.replace(/\s|\\n/g,"")},Ue=function(e){var t="function"==typeof e&&!(e.prototype&&"isReactComponent"in e.prototype),n=L(e)||t,r=function(t){function r(){var e,n;v(this,r);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=n=E(this,t.call.apply(t,[this].concat(o))),n.state=F,n.unsubscribeId=-1,E(n,e)}return x(r,t),r.prototype.componentWillMount=function(){var e=this,t=this.constructor.defaultProps,n=this.context[Me],r=_e(this.props,void 0,t);if(void 0===n&&void 0!==r)this.setState({theme:r});else{var i=n.subscribe;this.unsubscribeId=i(function(n){var r=_e(e.props,n,t);e.setState({theme:r})})}},r.prototype.componentWillReceiveProps=function(e){var t=this.constructor.defaultProps;this.setState(function(n){return{theme:_e(e,n.theme,t)}})},r.prototype.componentWillUnmount=function(){-1!==this.unsubscribeId&&this.context[Me].unsubscribe(this.unsubscribeId)},r.prototype.render=function(){var t=b({theme:this.state.theme},this.props);return n||(t.ref=t.innerRef,delete t.innerRef),s.a.createElement(e,t)},r}(s.a.Component);return r.contextTypes=Ae,r.displayName="WithTheme("+be(e)+")",r.styledComponentId="withTheme",m()(r,e)},Ve={StyleSheet:fe};var We=function(e,t,n){var r=function(t){return e(ze(t))};return function(){function e(t,n,r){if(v(this,e),this.rules=t,this.isStatic=!Ne&&Be(t,n),this.componentId=r,!fe.master.hasId(r)){var i=[];fe.master.deferredInject(r,i)}}return e.prototype.generateAndInjectStyles=function(e,i){var o=this.isStatic,a=this.componentId,s=this.lastClassName;if(De&&o&&void 0!==s&&i.hasNameForId(a,s))return s;var u=t(this.rules,e),l=r(this.componentId+u.join(""));return i.hasNameForId(a,l)||i.inject(this.componentId,n(u,"."+l),l),this.lastClassName=l,l},e.generateName=function(e){return r(e)},e}()}(B,C,R),Ge=function(e){return function t(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:F;if(!Object(_.isValidElementType)(r))throw new k(1,String(r));var o=function(){return n(r,i,e.apply(void 0,arguments))};return o.withConfig=function(e){return t(n,r,b({},i,e))},o.attrs=function(e){return t(n,r,b({},i,{attrs:b({},i.attrs||F,e)}))},o}}(U),Ze=function(e,t){return function n(r,i,o){var a=i.isClass,s=void 0===a?!xe(r):a,u=i.displayName,l=void 0===u?function(e){return xe(e)?"styled."+e:"Styled("+be(e)+")"}(r):u,c=i.componentId,p=void 0===c?function(e,t,n){var r="string"!=typeof t?"sc":ge(t),i=(je[r]||0)+1;je[r]=i;var o=r+"-"+e.generateName(r+i);return void 0!==n?n+"-"+o:o}(e,i.displayName,i.parentComponentId):c,h=i.ParentComponent,f=void 0===h?Le:h,d=i.rules,_=i.attrs,y=i.displayName&&i.componentId?ge(i.displayName)+"-"+i.componentId:i.componentId||p,T=new e(void 0===d?o:d.concat(o),_,y),k=function(e){function a(){return v(this,a),E(this,e.apply(this,arguments))}return x(a,e),a.withComponent=function(e){var t=i.componentId,r=w(i,["componentId"]),s=t&&t+"-"+(xe(e)?e:ge(be(e))),u=b({},r,{componentId:s,ParentComponent:a});return n(e,u,o)},g(a,null,[{key:"extend",get:function(){var e=i.rules,s=i.componentId,u=w(i,["rules","componentId"]),l=void 0===e?o:e.concat(o),c=b({},u,{rules:l,parentComponentId:s,ParentComponent:a});return t(n,r,c)}}]),a}(f);return k.attrs=_,k.componentStyle=T,k.contextTypes=Re,k.displayName=l,k.styledComponentId=y,k.target=r,s&&m()(k,r,{attrs:!0,componentStyle:!0,displayName:!0,extend:!0,styledComponentId:!0,target:!0,warnTooManyClasses:!0,withComponent:!0}),k}}(We,Ge),He=function(e,t,n){return function(){var r=fe.master,i=n.apply(void 0,arguments),o=e(ze(Fe(JSON.stringify(i)))),a="sc-keyframes-"+o;return r.hasNameForId(a,o)||r.inject(a,t(i,o,"@keyframes"),o),o}}(B,R,U),Ke=function(e,t){return function(){var n=fe.master,r=t.apply(void 0,arguments),i=ze(JSON.stringify(r)),o="sc-global-"+i;n.hasId(o)||n.inject(o,e(r))}}(R,U),Ye=function(e,t){var n=function(n){return t(e,n)};return qe.forEach(function(e){n[e]=n(e)}),n}(Ze,Ge);t.default=Ye}.call(this,n(30),n(26)(e))},function(e,t,n){"use strict";var r=/([A-Z])/g;e.exports=function(e){return e.replace(r,"-$1").toLowerCase()}},function(e,t,n){"use strict";
/** @license React v16.8.6
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,u=r?Symbol.for("react.profiler"):60114,l=r?Symbol.for("react.provider"):60109,c=r?Symbol.for("react.context"):60110,p=r?Symbol.for("react.async_mode"):60111,h=r?Symbol.for("react.concurrent_mode"):60111,f=r?Symbol.for("react.forward_ref"):60112,d=r?Symbol.for("react.suspense"):60113,m=r?Symbol.for("react.memo"):60115,_=r?Symbol.for("react.lazy"):60116;function y(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case p:case h:case a:case u:case s:case d:return e;default:switch(e=e&&e.$$typeof){case c:case f:case l:return e;default:return t}}case _:case m:case o:return t}}}function v(e){return y(e)===h}t.typeOf=y,t.AsyncMode=p,t.ConcurrentMode=h,t.ContextConsumer=c,t.ContextProvider=l,t.Element=i,t.ForwardRef=f,t.Fragment=a,t.Lazy=_,t.Memo=m,t.Portal=o,t.Profiler=u,t.StrictMode=s,t.Suspense=d,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===a||e===h||e===u||e===s||e===d||"object"==typeof e&&null!==e&&(e.$$typeof===_||e.$$typeof===m||e.$$typeof===l||e.$$typeof===c||e.$$typeof===f)},t.isAsyncMode=function(e){return v(e)||y(e)===p},t.isConcurrentMode=v,t.isContextConsumer=function(e){return y(e)===c},t.isContextProvider=function(e){return y(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return y(e)===f},t.isFragment=function(e){return y(e)===a},t.isLazy=function(e){return y(e)===_},t.isMemo=function(e){return y(e)===m},t.isPortal=function(e){return y(e)===o},t.isProfiler=function(e){return y(e)===u},t.isStrictMode=function(e){return y(e)===s},t.isSuspense=function(e){return y(e)===d}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"Rail Accidents",visible:!0,cartocss:"\n  #layer {\n    marker-width: 7;\n    marker-fill: ramp([equipment_damage], (#f3e79b, #fac484, #f8a07e, #eb7f86, #ce6693, #a059a0, #5c53a5), quantiles);\n    marker-fill-opacity: 1;\n    marker-allow-overlap: true;\n    marker-line-width: 1;\n    marker-line-color: #FFFFFF;\n    marker-line-opacity: 1;\n  }\n  ",query:"\n    SELECT * FROM rail_accidents\n  ",options:{featureClickColumns:["cartodb_id","railroad","total_damage","cause","weather","accident_type","image"]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"US States",visible:!0,cartocss:"\n  #layer {\n  polygon-fill: #6ba2dc;\n  polygon-opacity: 1;\n}\n#layer::outline {\n  line-width: 1;\n  line-color: #FFFFFF;\n  line-opacity: 0.5;\n}\n  ",query:"\n    SELECT * FROM us_states\n  ",options:{featureClickColumns:[]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),a=f(o),s=(n(5),n(2)),u=n(9),l=(f(n(31)),f(n(68))),c=f(n(11));n(120);var p=f(n(33)),h=f(n(70));function f(e){return e&&e.__esModule?e:{default:e}}c.default.BASEMAP,c.default.BASEMAP_LABELS;var d=c.default.CENTER,m=c.default.ZOOM,_=c.default.USERNAME,y=c.default.API_KEY,v=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=r({},e),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),i(t,[{key:"componentDidMount",value:function(){var e=this,t=new h.default.Map({container:"map",style:p.default.basemaps.voyager,center:[d[1],d[0]],zoom:m,scrollZoom:!1});this.props.setMap(t);var n=new h.default.NavigationControl({showCompass:!0});t.addControl(n,"top-left"),p.default.setDefaultAuth({username:_,apiKey:y}),console.log(t.getBounds()),t.on("moveend",function(t){var n=t.target.getBounds(),r={center:t.target.getCenter(),zoom:t.target.getZoom()};e.props.setBboxFilter([n._ne.lat,n._ne.lng,n._sw.lat,n._sw.lng]),e.props.changeViewport(r)})}},{key:"setupLayers",value:function(){var e=this,t=Object.keys(l.default).reduce(function(t,n){var i,o,a,s=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(l.default[n],[]),u=new p.default.Viz(s.style),c=new p.default.source.Dataset(s.table),h=new p.default.Layer(s.table,c,u);return h.addTo(e.props.map,"watername_ocean"),r({},t,(i={},o=n,a=r({source:c,viz:u,layer:h},s),o in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,i))},{});console.log(t),this.props.storeLayers(t)}},{key:"componentDidUpdate",value:function(e){!e.map&&this.props.map&&this.setupLayers()}},{key:"render",value:function(){var e=this.props.layers;Object.keys(e).length;return a.default.createElement("div",{id:"map"})}}]),t}();t.default=(0,s.connect)(function(e){return{client:e.client,map:e.map,layers:e.layers,viewport:e.viewport,boundingbox:e.boundingbox}},function(e){return{storeLayers:function(t){return e((0,u.storeLayers)(t))},setMap:function(t){return e((0,u.setMap)(t))},setBboxFilter:function(t){return e((0,u.setBboxFilter)(t))},changeViewport:function(t){return e((0,u.changeViewport)(t))},changeCartoBBox:function(t){return e((0,u.changeCartoBBox)(t))}}})(v)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(69),o=(r=i)&&r.__esModule?r:{default:r};t.default={railaccidents:o.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"Rail Accidents",visible:!0,style:"\n        width: 8\n        color: ramp(viewportQuantiles($total_damage, 7), sunsetdark)\n        strokeWidth: 0.5\n        strokeColor: #191970\n        @categories: viewportHistogram($railroad, 1, 12)\n    ",query:"\n      SELECT * FROM rail_accidents\n    ",table:"\n      rail_accidents\n    "}},function(e,t,n){e.exports=function(){"use strict";var e,t,n;function r(r,i){if(e)if(t){var o="var sharedChunk = {}; ("+e+")(sharedChunk); ("+t+")(sharedChunk);",a={};e(a),(n=i(a)).workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"}))}else t=i;else e=i}return r(0,function(e){function t(e,t){return e(t={exports:{}},t.exports),t.exports}var n=r;function r(e,t,n,r){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=r,this.p2x=n,this.p2y=r}r.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},r.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},r.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},r.prototype.solveCurveX=function(e,t){var n,r,i,o,a;for(void 0===t&&(t=1e-6),i=e,a=0;a<8;a++){if(o=this.sampleCurveX(i)-e,Math.abs(o)<t)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=o/s}if((i=e)<(n=0))return n;if(i>(r=1))return r;for(;n<r;){if(o=this.sampleCurveX(i),Math.abs(o-e)<t)return i;e>o?n=i:r=i,i=.5*(r-n)+n}return i},r.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var i=o;function o(e,t){this.x=e,this.y=t}function a(e,t){if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!a(e[n],t[n]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==t){if("object"!=typeof t)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var r in e)if(!a(e[r],t[r]))return!1;return!0}return e===t}function s(e,t,r,i){var o=new n(e,t,r,i);return function(e){return o.solve(e)}}o.prototype={clone:function(){return new o(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,n=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=n,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=t*this.x-n*this.y,i=n*this.x+t*this.y;return this.x=r,this.y=i,this},_rotateAround:function(e,t){var n=Math.cos(e),r=Math.sin(e),i=t.x+n*(this.x-t.x)-r*(this.y-t.y),o=t.y+r*(this.x-t.x)+n*(this.y-t.y);return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},o.convert=function(e){return e instanceof o?e:Array.isArray(e)?new o(e[0],e[1]):e};var u=s(.25,.1,.25,1);function l(e,t,n){return Math.min(n,Math.max(t,e))}function c(e,t,n){var r=n-t,i=((e-t)%r+r)%r+t;return i===t?n:i}function p(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];for(var r=0,i=t;r<i.length;r+=1){var o=i[r];for(var a in o)e[a]=o[a]}return e}var h=1;function f(){return h++}function d(){return function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function m(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function _(e,t){e.forEach(function(e){t[e]&&(t[e]=t[e].bind(t))})}function y(e,t){return-1!==e.indexOf(t,e.length-t.length)}function v(e,t,n){var r={};for(var i in e)r[i]=t.call(n||this,e[i],i,e);return r}function g(e,t,n){var r={};for(var i in e)t.call(n||this,e[i],i,e)&&(r[i]=e[i]);return r}function b(e){return Array.isArray(e)?e.map(b):"object"==typeof e&&e?v(e,b):e}var x={};function w(e){x[e]||("undefined"!=typeof console&&console.warn(e),x[e]=!0)}function E(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}function T(e){for(var t=0,n=0,r=e.length,i=r-1,o=void 0,a=void 0;n<r;i=n++)o=e[n],t+=((a=e[i]).x-o.x)*(o.y+a.y);return t}function k(e){try{var t=self[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch(e){return!1}}var C=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),M=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,P=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,A={now:C,frame:function(e){var t=M(e);return{cancel:function(){return P(t)}}},getImageData:function(e){var t=self.document.createElement("canvas"),n=t.getContext("2d");if(!n)throw new Error("failed to create canvas 2d context");return t.width=e.width,t.height=e.height,n.drawImage(e,0,0,e.width,e.height),n.getImageData(0,0,e.width,e.height)},resolveURL:function(e){var t=self.document.createElement("a");return t.href=e,t.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},supportsWebp:!1};if(self.document){var S=self.document.createElement("img");S.onload=function(){A.supportsWebp=!0},S.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="}var O={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return 0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":"https://events.mapbox.com/events/v2"},REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},I="See https://www.mapbox.com/api-documentation/#access-tokens";function R(e,t){var n=N(O.API_URL);if(e.protocol=n.protocol,e.authority=n.authority,"/"!==n.path&&(e.path=""+n.path+e.path),!O.REQUIRE_ACCESS_TOKEN)return q(e);if(!(t=t||O.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+I);if("s"===t[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+I);return e.params.push("access_token="+t),q(e)}function j(e){return 0===e.indexOf("mapbox:")}var L=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function z(e){return L.test(e)}var D=/(\.(png|jpg)\d*)(?=$)/,B=/^(\w+):\/\/([^\/?]*)(\/[^?]+)?\??(.+)?/;function N(e){var t=e.match(B);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function q(e){var t=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+t}var F=function(e){this.type=e,this.anonId=null,this.eventData={lastSuccess:null,accessToken:O.ACCESS_TOKEN},this.queue=[],this.pendingRequest=null};F.prototype.fetchEventData=function(){var e=k("localStorage"),t="mapbox.eventData:"+(O.ACCESS_TOKEN||""),n="mapbox.eventData.uuid:"+(O.ACCESS_TOKEN||"");if(e)try{var r=self.localStorage.getItem(t);r&&(this.eventData=JSON.parse(r));var i=self.localStorage.getItem(n);i&&(this.anonId=i)}catch(e){w("Unable to read from LocalStorage")}},F.prototype.saveEventData=function(){var e=k("localStorage"),t="mapbox.eventData:"+(O.ACCESS_TOKEN||""),n="mapbox.eventData.uuid:"+(O.ACCESS_TOKEN||"");if(e)try{self.localStorage.setItem(n,this.anonId),this.eventData.lastSuccess&&self.localStorage.setItem(t,JSON.stringify(this.eventData))}catch(e){w("Unable to write to LocalStorage")}},F.prototype.processRequests=function(){},F.prototype.postEvent=function(e,t,n){var r=this,i=N(O.EVENTS_URL);i.params.push("access_token="+(O.ACCESS_TOKEN||""));var o={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"0.51.0",userId:this.anonId},a=t?p(o,t):o,s={url:q(i),headers:{"Content-Type":"text/plain"},body:JSON.stringify([a])};this.pendingRequest=J(s,function(e){r.pendingRequest=null,n(e),r.saveEventData(),r.processRequests()})},F.prototype.queueRequest=function(e){this.queue.push(e),this.processRequests()};var U=function(e){function t(){e.call(this,"map.load"),this.success={}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.postMapLoadEvent=function(e,t){O.ACCESS_TOKEN&&Array.isArray(e)&&e.some(function(e){return z(e)})&&this.queueRequest({id:t,timestamp:Date.now()})},t.prototype.processRequests=function(){var e=this;if(!this.pendingRequest&&0!==this.queue.length){var t=this.queue.shift(),n=t.id,r=t.timestamp;n&&this.success[n]||(this.anonId||this.fetchEventData(),m(this.anonId)||(this.anonId=d()),this.postEvent(r,{},function(t){t||n&&(e.success[n]=!0)}))}},t}(F),V=new(function(e){function t(){e.call(this,"appUserTurnstile")}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.postTurnstileEvent=function(e){O.ACCESS_TOKEN&&Array.isArray(e)&&e.some(function(e){return z(e)})&&this.queueRequest(Date.now())},t.prototype.processRequests=function(){var e=this;if(!this.pendingRequest&&0!==this.queue.length){var t=!!this.eventData.accessToken&&this.eventData.accessToken!==O.ACCESS_TOKEN;t&&(this.anonId=this.eventData.lastSuccess=null),this.anonId&&this.eventData.lastSuccess||this.fetchEventData(),m(this.anonId)||(this.anonId=d(),t=!0);var n=this.queue.shift();if(this.eventData.lastSuccess){var r=new Date(this.eventData.lastSuccess),i=new Date(n),o=(n-this.eventData.lastSuccess)/864e5;t=t||o>=1||o<-1||r.getDate()!==i.getDate()}else t=!0;if(!t)return this.processRequests();this.postEvent(n,{"enabled.telemetry":!1},function(t){t||(e.eventData.lastSuccess=n,e.eventData.accessToken=O.ACCESS_TOKEN)})}},t}(F)),W=V.postTurnstileEvent.bind(V),G=new U,Z=G.postMapLoadEvent.bind(G),H={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(H);var K=function(e){function t(t,n,r){401===n&&z(r)&&(t+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens"),e.call(this,t),this.status=n,this.url=r,this.name=this.constructor.name,this.message=t}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},t}(Error),Y="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope?function(){return self.worker&&self.worker.referrer}:function(){var e=self.location.origin;if(e&&"null"!==e&&"file://"!==e)return e+self.location.pathname},X=self.fetch&&self.Request&&self.AbortController?function(e,t){var n=new self.AbortController,r=new self.Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,referrer:Y(),signal:n.signal});return"json"===e.type&&r.headers.set("Accept","application/json"),self.fetch(r).then(function(n){n.ok?n[e.type||"text"]().then(function(e){t(null,e,n.headers.get("Cache-Control"),n.headers.get("Expires"))}).catch(function(e){return t(new Error(e.message))}):t(new K(n.statusText,n.status,e.url))}).catch(function(e){t(new Error(e.message))}),{cancel:function(){return n.abort()}}}:function(e,t){var n=new self.XMLHttpRequest;for(var r in n.open(e.method||"GET",e.url,!0),"arrayBuffer"===e.type&&(n.responseType="arraybuffer"),e.headers)n.setRequestHeader(r,e.headers[r]);return"json"===e.type&&n.setRequestHeader("Accept","application/json"),n.withCredentials="include"===e.credentials,n.onerror=function(){t(new Error(n.statusText))},n.onload=function(){if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){var r=n.response;if("json"===e.type)try{r=JSON.parse(n.response)}catch(e){return t(e)}t(null,r,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else t(new K(n.statusText,n.status,e.url))},n.send(e.body),{cancel:function(){return n.abort()}}},$=function(e,t){return X(p(e,{type:"arrayBuffer"}),t)},J=function(e,t){return X(p(e,{method:"POST"}),t)},Q=[],ee=0,te=function(e,t){if(ee>=O.MAX_PARALLEL_IMAGE_REQUESTS){var n={requestParameters:e,callback:t,cancelled:!1};return Q.push(n),{cancel:function(){n.cancelled=!0}}}return ee++,$(e,function(e,n,r,i){for(ee--;Q.length&&ee<O.MAX_PARALLEL_IMAGE_REQUESTS;){var o=Q.shift(),a=o.requestParameters,s=o.callback;o.cancelled||te(a,s)}if(e)t(e);else if(n){var u=new self.Image,l=self.URL||self.webkitURL;u.onload=function(){t(null,u),l.revokeObjectURL(u.src)},u.onerror=function(){return t(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var c=new self.Blob([new Uint8Array(n)],{type:"image/png"});u.cacheControl=r,u.expires=i,u.src=n.byteLength?l.createObjectURL(c):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}})};function ne(e,t,n){n[e]&&-1!==n[e].indexOf(t)||(n[e]=n[e]||[],n[e].push(t))}function re(e,t,n){if(n&&n[e]){var r=n[e].indexOf(t);-1!==r&&n[e].splice(r,1)}}var ie=function(e,t){void 0===t&&(t={}),p(this,t),this.type=e},oe=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,"error",p({error:t},n))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(ie),ae=function(){};ae.prototype.on=function(e,t){return this._listeners=this._listeners||{},ne(e,t,this._listeners),this},ae.prototype.off=function(e,t){return re(e,t,this._listeners),re(e,t,this._oneTimeListeners),this},ae.prototype.once=function(e,t){return this._oneTimeListeners=this._oneTimeListeners||{},ne(e,t,this._oneTimeListeners),this},ae.prototype.fire=function(e){"string"==typeof e&&(e=new ie(e,arguments[1]||{}));var t=e.type;if(this.listens(t)){e.target=this;for(var n=0,r=this._listeners&&this._listeners[t]?this._listeners[t].slice():[];n<r.length;n+=1)r[n].call(this,e);for(var i=0,o=this._oneTimeListeners&&this._oneTimeListeners[t]?this._oneTimeListeners[t].slice():[];i<o.length;i+=1){var a=o[i];re(t,a,this._oneTimeListeners),a.call(this,e)}var s=this._eventedParent;s&&(p(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),s.fire(e))}else e instanceof oe&&console.error(e.error);return this},ae.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)},ae.prototype.setEventedParent=function(e,t){return this._eventedParent=e,this._eventedParentData=t,this};var se={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-z-order":{type:"enum",values:{"viewport-y":{},source:{}},default:"viewport-y",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"string",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Heatmap"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}}},ue=function(e,t,n,r){this.message=(e?e+": ":"")+n,r&&(this.identifier=r),null!=t&&t.__line__&&(this.line=t.__line__)};function le(e){var t=e.key,n=e.value;return n?[new ue(t,n,"constants have been deprecated as of v8")]:[]}function ce(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];for(var r=0,i=t;r<i.length;r+=1){var o=i[r];for(var a in o)e[a]=o[a]}return e}function pe(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function he(e){return Array.isArray(e)?e.map(he):pe(e)}var fe=function(e){function t(t,n){e.call(this,n),this.message=n,this.key=t}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),de=function(e,t){void 0===t&&(t=[]),this.parent=e,this.bindings={};for(var n=0,r=t;n<r.length;n+=1){var i=r[n],o=i[0],a=i[1];this.bindings[o]=a}};de.prototype.concat=function(e){return new de(this,e)},de.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},de.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)};var me={kind:"null"},_e={kind:"number"},ye={kind:"string"},ve={kind:"boolean"},ge={kind:"color"},be={kind:"object"},xe={kind:"value"},we={kind:"collator"},Ee={kind:"formatted"};function Te(e,t){return{kind:"array",itemType:e,N:t}}function ke(e){if("array"===e.kind){var t=ke(e.itemType);return"number"==typeof e.N?"array<"+t+", "+e.N+">":"value"===e.itemType.kind?"array":"array<"+t+">"}return e.kind}var Ce=[me,_e,ye,ve,ge,Ee,be,Te(xe)];function Me(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!Me(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(var n=0,r=Ce;n<r.length;n+=1)if(!Me(r[n],t))return null}return"Expected "+ke(e)+" but found "+ke(t)+" instead."}var Pe=t(function(e,t){var n={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function r(e){return(e=Math.round(e))<0?0:e>255?255:e}function i(e){return e<0?0:e>1?1:e}function o(e){return"%"===e[e.length-1]?r(parseFloat(e)/100*255):r(parseInt(e))}function a(e){return"%"===e[e.length-1]?i(parseFloat(e)/100):i(parseFloat(e))}function s(e,t,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}try{t.parseCSSColor=function(e){var t,i=e.replace(/ /g,"").toLowerCase();if(i in n)return n[i].slice();if("#"===i[0])return 4===i.length?(t=parseInt(i.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===i.length&&(t=parseInt(i.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var u=i.indexOf("("),l=i.indexOf(")");if(-1!==u&&l+1===i.length){var c=i.substr(0,u),p=i.substr(u+1,l-(u+1)).split(","),h=1;switch(c){case"rgba":if(4!==p.length)return null;h=a(p.pop());case"rgb":return 3!==p.length?null:[o(p[0]),o(p[1]),o(p[2]),h];case"hsla":if(4!==p.length)return null;h=a(p.pop());case"hsl":if(3!==p.length)return null;var f=(parseFloat(p[0])%360+360)%360/360,d=a(p[1]),m=a(p[2]),_=m<=.5?m*(d+1):m+d-m*d,y=2*m-_;return[r(255*s(y,_,f+1/3)),r(255*s(y,_,f)),r(255*s(y,_,f-1/3)),h];default:return null}}return null}}catch(e){}}).parseCSSColor,Ae=function(e,t,n,r){void 0===r&&(r=1),this.r=e,this.g=t,this.b=n,this.a=r};Ae.parse=function(e){if(e){if(e instanceof Ae)return e;if("string"==typeof e){var t=Pe(e);if(t)return new Ae(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}}},Ae.prototype.toString=function(){var e=this.toArray(),t=e[0],n=e[1],r=e[2],i=e[3];return"rgba("+Math.round(t)+","+Math.round(n)+","+Math.round(r)+","+i+")"},Ae.prototype.toArray=function(){var e=this.r,t=this.g,n=this.b,r=this.a;return 0===r?[0,0,0,0]:[255*e/r,255*t/r,255*n/r,r]},Ae.black=new Ae(0,0,0,1),Ae.white=new Ae(1,1,1,1),Ae.transparent=new Ae(0,0,0,0),Ae.red=new Ae(1,0,0,1);var Se=function(e,t,n){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Se.prototype.compare=function(e,t){return this.collator.compare(e,t)},Se.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Oe=function(e,t,n){this.text=e,this.scale=t,this.fontStack=n},Ie=function(e){this.sections=e};function Re(e,t,n,r){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value ["+[e,t,n,r].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof r?[e,t,n,r]:[e,t,n]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function je(e){if(null===e)return me;if("string"==typeof e)return ye;if("boolean"==typeof e)return ve;if("number"==typeof e)return _e;if(e instanceof Ae)return ge;if(e instanceof Se)return we;if(e instanceof Ie)return Ee;if(Array.isArray(e)){for(var t,n=e.length,r=0,i=e;r<i.length;r+=1){var o=je(i[r]);if(t){if(t===o)continue;t=xe;break}t=o}return Te(t||xe,n)}return be}function Le(e){var t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof Ae||e instanceof Ie?e.toString():JSON.stringify(e)}Ie.fromString=function(e){return new Ie([new Oe(e,null,null)])},Ie.prototype.toString=function(){return this.sections.map(function(e){return e.text}).join("")},Ie.prototype.serialize=function(){for(var e=["format"],t=0,n=this.sections;t<n.length;t+=1){var r=n[t];e.push(r.text);var i={};r.fontStack&&(i["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(i["font-scale"]=r.scale),e.push(i)}return e};var ze=function(e,t){this.type=e,this.value=t};ze.parse=function(e,t){if(2!==e.length)return t.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!function e(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof Ae)return!0;if(t instanceof Se)return!0;if(t instanceof Ie)return!0;if(Array.isArray(t)){for(var n=0,r=t;n<r.length;n+=1)if(!e(r[n]))return!1;return!0}if("object"==typeof t){for(var i in t)if(!e(t[i]))return!1;return!0}return!1}(e[1]))return t.error("invalid value");var n=e[1],r=je(n),i=t.expectedType;return"array"!==r.kind||0!==r.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(r=i),new ze(r,n)},ze.prototype.evaluate=function(){return this.value},ze.prototype.eachChild=function(){},ze.prototype.possibleOutputs=function(){return[this.value]},ze.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Ae?["rgba"].concat(this.value.toArray()):this.value instanceof Ie?this.value.serialize():this.value};var De=function(e){this.name="ExpressionEvaluationError",this.message=e};De.prototype.toJSON=function(){return this.message};var Be={string:ye,number:_e,boolean:ve,object:be},Ne=function(e,t){this.type=e,this.args=t};Ne.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var n,r=1,i=e[0];if("array"===i){var o,a;if(e.length>2){var s=e[1];if("string"!=typeof s||!(s in Be)||"object"===s)return t.error('The item type argument of "array" must be one of string, number, boolean',1);o=Be[s],r++}else o=xe;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);a=e[2],r++}n=Te(o,a)}else n=Be[i];for(var u=[];r<e.length;r++){var l=t.parse(e[r],r,xe);if(!l)return null;u.push(l)}return new Ne(n,u)},Ne.prototype.evaluate=function(e){for(var t=0;t<this.args.length;t++){var n=this.args[t].evaluate(e);if(!Me(this.type,je(n)))return n;if(t===this.args.length-1)throw new De("Expected value to be of type "+ke(this.type)+", but found "+ke(je(n))+" instead.")}return null},Ne.prototype.eachChild=function(e){this.args.forEach(e)},Ne.prototype.possibleOutputs=function(){return(e=[]).concat.apply(e,this.args.map(function(e){return e.possibleOutputs()}));var e},Ne.prototype.serialize=function(){var e=this.type,t=[e.kind];if("array"===e.kind){var n=e.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){t.push(n.kind);var r=e.N;("number"==typeof r||this.args.length>1)&&t.push(r)}}return t.concat(this.args.map(function(e){return e.serialize()}))};var qe=function(e){this.type=Ee,this.sections=e};qe.parse=function(e,t){if(e.length<3)return t.error("Expected at least two arguments.");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");for(var n=[],r=1;r<e.length-1;r+=2){var i=t.parse(e[r],1,xe);if(!i)return null;var o=i.type.kind;if("string"!==o&&"value"!==o&&"null"!==o)return t.error("Formatted text type must be 'string', 'value', or 'null'.");var a=e[r+1];if("object"!=typeof a||Array.isArray(a))return t.error("Format options argument must be an object.");var s=null;if(a["font-scale"]&&!(s=t.parse(a["font-scale"],1,_e)))return null;var u=null;if(a["text-font"]&&!(u=t.parse(a["text-font"],1,Te(ye))))return null;n.push({text:i,scale:s,font:u})}return new qe(n)},qe.prototype.evaluate=function(e){return new Ie(this.sections.map(function(t){return new Oe(Le(t.text.evaluate(e)),t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null)}))},qe.prototype.eachChild=function(e){for(var t=0,n=this.sections;t<n.length;t+=1){var r=n[t];e(r.text),r.scale&&e(r.scale),r.font&&e(r.font)}},qe.prototype.possibleOutputs=function(){return[void 0]},qe.prototype.serialize=function(){for(var e=["format"],t=0,n=this.sections;t<n.length;t+=1){var r=n[t];e.push(r.text.serialize());var i={};r.scale&&(i["font-scale"]=r.scale.serialize()),r.font&&(i["text-font"]=r.font.serialize()),e.push(i)}return e};var Fe={"to-boolean":ve,"to-color":ge,"to-number":_e,"to-string":ye},Ue=function(e,t){this.type=e,this.args=t};Ue.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var n=e[0];if(("to-boolean"===n||"to-string"===n)&&2!==e.length)return t.error("Expected one argument.");for(var r=Fe[n],i=[],o=1;o<e.length;o++){var a=t.parse(e[o],o,xe);if(!a)return null;i.push(a)}return new Ue(r,i)},Ue.prototype.evaluate=function(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){for(var t,n,r=0,i=this.args;r<i.length;r+=1){if(n=null,(t=i[r].evaluate(e))instanceof Ae)return t;if("string"==typeof t){var o=e.parseColor(t);if(o)return o}else if(Array.isArray(t)&&!(n=t.length<3||t.length>4?"Invalid rbga value "+JSON.stringify(t)+": expected an array containing either three or four numeric values.":Re(t[0],t[1],t[2],t[3])))return new Ae(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new De(n||"Could not parse color from value '"+("string"==typeof t?t:JSON.stringify(t))+"'")}if("number"===this.type.kind){for(var a=null,s=0,u=this.args;s<u.length;s+=1){if(null===(a=u[s].evaluate(e)))return 0;var l=Number(a);if(!isNaN(l))return l}throw new De("Could not convert "+JSON.stringify(a)+" to number.")}return"formatted"===this.type.kind?Ie.fromString(Le(this.args[0].evaluate(e))):Le(this.args[0].evaluate(e))},Ue.prototype.eachChild=function(e){this.args.forEach(e)},Ue.prototype.possibleOutputs=function(){return(e=[]).concat.apply(e,this.args.map(function(e){return e.possibleOutputs()}));var e},Ue.prototype.serialize=function(){if("formatted"===this.type.kind)return new qe([{text:this.args[0],scale:null,font:null}]).serialize();var e=["to-"+this.type.kind];return this.eachChild(function(t){e.push(t.serialize())}),e};var Ve=["Unknown","Point","LineString","Polygon"],We=function(){this.globals=null,this.feature=null,this.featureState=null,this._parseColorCache={}};We.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},We.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?Ve[this.feature.type]:this.feature.type:null},We.prototype.properties=function(){return this.feature&&this.feature.properties||{}},We.prototype.parseColor=function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=Ae.parse(e)),t};var Ge=function(e,t,n,r){this.name=e,this.type=t,this._evaluate=n,this.args=r};Ge.prototype.evaluate=function(e){return this._evaluate(e,this.args)},Ge.prototype.eachChild=function(e){this.args.forEach(e)},Ge.prototype.possibleOutputs=function(){return[void 0]},Ge.prototype.serialize=function(){return[this.name].concat(this.args.map(function(e){return e.serialize()}))},Ge.parse=function(e,t){var n=e[0],r=Ge.definitions[n];if(!r)return t.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0);for(var i=Array.isArray(r)?r[0]:r.type,o=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,a=o.filter(function(t){var n=t[0];return!Array.isArray(n)||n.length===e.length-1}),s=null,u=0,l=a;u<l.length;u+=1){var c=l[u],p=c[0],h=c[1];s=new $e(t.registry,t.path,null,t.scope);for(var f=[],d=!1,m=1;m<e.length;m++){var _=e[m],y=Array.isArray(p)?p[m-1]:p.type,v=s.parse(_,1+f.length,y);if(!v){d=!0;break}f.push(v)}if(!d)if(Array.isArray(p)&&p.length!==f.length)s.error("Expected "+p.length+" arguments, but found "+f.length+" instead.");else{for(var g=0;g<f.length;g++){var b=Array.isArray(p)?p[g]:p.type,x=f[g];s.concat(g+1).checkSubtype(b,x.type)}if(0===s.errors.length)return new Ge(n,i,h,f)}}if(1===a.length)t.errors.push.apply(t.errors,s.errors);else{for(var w=(a.length?a:o).map(function(e){var t;return t=e[0],Array.isArray(t)?"("+t.map(ke).join(", ")+")":"("+ke(t.type)+"...)"}).join(" | "),E=[],T=1;T<e.length;T++){var k=t.parse(e[T],1+E.length);if(!k)return null;E.push(ke(k.type))}t.error("Expected arguments of type "+w+", but found ("+E.join(", ")+") instead.")}return null},Ge.register=function(e,t){for(var n in Ge.definitions=t,t)e[n]=Ge};var Ze=function(e,t,n){this.type=we,this.locale=n,this.caseSensitive=e,this.diacriticSensitive=t};function He(e){if(e instanceof Ge){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}var t=!0;return e.eachChild(function(e){t&&!He(e)&&(t=!1)}),t}function Ke(e){if(e instanceof Ge&&"feature-state"===e.name)return!1;var t=!0;return e.eachChild(function(e){t&&!Ke(e)&&(t=!1)}),t}function Ye(e,t){if(e instanceof Ge&&t.indexOf(e.name)>=0)return!1;var n=!0;return e.eachChild(function(e){n&&!Ye(e,t)&&(n=!1)}),n}Ze.parse=function(e,t){if(2!==e.length)return t.error("Expected one argument.");var n=e[1];if("object"!=typeof n||Array.isArray(n))return t.error("Collator options argument must be an object.");var r=t.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,ve);if(!r)return null;var i=t.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,ve);if(!i)return null;var o=null;return n.locale&&!(o=t.parse(n.locale,1,ye))?null:new Ze(r,i,o)},Ze.prototype.evaluate=function(e){return new Se(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},Ze.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},Ze.prototype.possibleOutputs=function(){return[void 0]},Ze.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var Xe=function(e,t){this.type=t.type,this.name=e,this.boundExpression=t};Xe.parse=function(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");var n=e[1];return t.scope.has(n)?new Xe(n,t.scope.get(n)):t.error('Unknown variable "'+n+'". Make sure "'+n+'" has been bound in an enclosing "let" expression before using it.',1)},Xe.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)},Xe.prototype.eachChild=function(){},Xe.prototype.possibleOutputs=function(){return[void 0]},Xe.prototype.serialize=function(){return["var",this.name]};var $e=function(e,t,n,r,i){void 0===t&&(t=[]),void 0===r&&(r=new de),void 0===i&&(i=[]),this.registry=e,this.path=t,this.key=t.map(function(e){return"["+e+"]"}).join(""),this.scope=r,this.errors=i,this.expectedType=n};function Je(e,t){for(var n,r,i=0,o=e.length-1,a=0;i<=o;){if(n=e[a=Math.floor((i+o)/2)],r=e[a+1],t===n||t>n&&t<r)return a;if(n<t)i=a+1;else{if(!(n>t))throw new De("Input is not a number.");o=a-1}}return Math.max(a-1,0)}$e.prototype.parse=function(e,t,n,r,i){return void 0===i&&(i={}),t?this.concat(t,n,r)._parse(e,i):this._parse(e,i)},$e.prototype._parse=function(e,t){function n(e,t,n){return"assert"===n?new Ne(t,[e]):"coerce"===n?new Ue(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var r=e[0];if("string"!=typeof r)return this.error("Expression name must be a string, but found "+typeof r+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var i=this.registry[r];if(i){var o=i.parse(e,this);if(!o)return null;if(this.expectedType){var a=this.expectedType,s=o.type;if("string"!==a.kind&&"number"!==a.kind&&"boolean"!==a.kind&&"object"!==a.kind&&"array"!==a.kind||"value"!==s.kind)if("color"!==a.kind&&"formatted"!==a.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(a,s))return null}else o=n(o,a,t.typeAnnotation||"coerce");else o=n(o,a,t.typeAnnotation||"assert")}if(!(o instanceof ze)&&function e(t){if(t instanceof Xe)return e(t.boundExpression);if(t instanceof Ge&&"error"===t.name)return!1;if(t instanceof Ze)return!1;var n=t instanceof Ue||t instanceof Ne,r=!0;return t.eachChild(function(t){r=n?r&&e(t):r&&t instanceof ze}),!!r&&He(t)&&Ye(t,["zoom","heatmap-density","line-progress","is-supported-script"])}(o)){var u=new We;try{o=new ze(o.type,o.evaluate(u))}catch(e){return this.error(e.message),null}}return o}return this.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===e?this.error("'undefined' value invalid. Use null instead."):"object"==typeof e?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof e+" instead.")},$e.prototype.concat=function(e,t,n){var r="number"==typeof e?this.path.concat(e):this.path,i=n?this.scope.concat(n):this.scope;return new $e(this.registry,r,t||null,i,this.errors)},$e.prototype.error=function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];var r=""+this.key+t.map(function(e){return"["+e+"]"}).join("");this.errors.push(new fe(r,e))},$e.prototype.checkSubtype=function(e,t){var n=Me(e,t);return n&&this.error(n),n};var Qe=function(e,t,n){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(var r=0,i=n;r<i.length;r+=1){var o=i[r],a=o[0],s=o[1];this.labels.push(a),this.outputs.push(s)}};Qe.parse=function(e,t){var n=e[1],r=e.slice(2);if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(n=t.parse(n,1,_e)))return null;var i=[],o=null;t.expectedType&&"value"!==t.expectedType.kind&&(o=t.expectedType),r.unshift(-1/0);for(var a=0;a<r.length;a+=2){var s=r[a],u=r[a+1],l=a+1,c=a+2;if("number"!=typeof s)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',l);if(i.length&&i[i.length-1][0]>=s)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',l);var p=t.parse(u,c,o);if(!p)return null;o=o||p.type,i.push([s,p])}return new Qe(o,n,i)},Qe.prototype.evaluate=function(e){var t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);var r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);var i=t.length;return r>=t[i-1]?n[i-1].evaluate(e):n[Je(t,r)].evaluate(e)},Qe.prototype.eachChild=function(e){e(this.input);for(var t=0,n=this.outputs;t<n.length;t+=1)e(n[t])},Qe.prototype.possibleOutputs=function(){return(e=[]).concat.apply(e,this.outputs.map(function(e){return e.possibleOutputs()}));var e},Qe.prototype.serialize=function(){for(var e=["step",this.input.serialize()],t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e};var et=tt;function tt(e,t,n,r){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=r,this.p2x=n,this.p2y=r}function nt(e,t,n){return e*(1-n)+t*n}tt.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},tt.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},tt.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},tt.prototype.solveCurveX=function(e,t){var n,r,i,o,a;for(void 0===t&&(t=1e-6),i=e,a=0;a<8;a++){if(o=this.sampleCurveX(i)-e,Math.abs(o)<t)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=o/s}if((i=e)<(n=0))return n;if(i>(r=1))return r;for(;n<r;){if(o=this.sampleCurveX(i),Math.abs(o-e)<t)return i;e>o?n=i:r=i,i=.5*(r-n)+n}return i},tt.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var rt=Object.freeze({number:nt,color:function(e,t,n){return new Ae(nt(e.r,t.r,n),nt(e.g,t.g,n),nt(e.b,t.b,n),nt(e.a,t.a,n))},array:function(e,t,n){return e.map(function(e,r){return nt(e,t[r],n)})}}),it=.95047,ot=1,at=1.08883,st=4/29,ut=6/29,lt=3*ut*ut,ct=ut*ut*ut,pt=Math.PI/180,ht=180/Math.PI;function ft(e){return e>ct?Math.pow(e,1/3):e/lt+st}function dt(e){return e>ut?e*e*e:lt*(e-st)}function mt(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function _t(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function yt(e){var t=_t(e.r),n=_t(e.g),r=_t(e.b),i=ft((.4124564*t+.3575761*n+.1804375*r)/it),o=ft((.2126729*t+.7151522*n+.072175*r)/ot);return{l:116*o-16,a:500*(i-o),b:200*(o-ft((.0193339*t+.119192*n+.9503041*r)/at)),alpha:e.a}}function vt(e){var t=(e.l+16)/116,n=isNaN(e.a)?t:t+e.a/500,r=isNaN(e.b)?t:t-e.b/200;return t=ot*dt(t),n=it*dt(n),r=at*dt(r),new Ae(mt(3.2404542*n-1.5371385*t-.4985314*r),mt(-.969266*n+1.8760108*t+.041556*r),mt(.0556434*n-.2040259*t+1.0572252*r),e.alpha)}var gt={forward:yt,reverse:vt,interpolate:function(e,t,n){return{l:nt(e.l,t.l,n),a:nt(e.a,t.a,n),b:nt(e.b,t.b,n),alpha:nt(e.alpha,t.alpha,n)}}},bt={forward:function(e){var t=yt(e),n=t.l,r=t.a,i=t.b,o=Math.atan2(i,r)*ht;return{h:o<0?o+360:o,c:Math.sqrt(r*r+i*i),l:n,alpha:e.a}},reverse:function(e){var t=e.h*pt,n=e.c;return vt({l:e.l,a:Math.cos(t)*n,b:Math.sin(t)*n,alpha:e.alpha})},interpolate:function(e,t,n){return{h:function(e,t,n){var r=t-e;return e+n*(r>180||r<-180?r-360*Math.round(r/360):r)}(e.h,t.h,n),c:nt(e.c,t.c,n),l:nt(e.l,t.l,n),alpha:nt(e.alpha,t.alpha,n)}}},xt=Object.freeze({lab:gt,hcl:bt}),wt=function(e,t,n,r,i){this.type=e,this.operator=t,this.interpolation=n,this.input=r,this.labels=[],this.outputs=[];for(var o=0,a=i;o<a.length;o+=1){var s=a[o],u=s[0],l=s[1];this.labels.push(u),this.outputs.push(l)}};function Et(e,t,n,r){var i=r-n,o=e-n;return 0===i?0:1===t?o/i:(Math.pow(t,o)-1)/(Math.pow(t,i)-1)}wt.interpolationFactor=function(e,t,n,r){var i=0;if("exponential"===e.name)i=Et(t,e.base,n,r);else if("linear"===e.name)i=Et(t,1,n,r);else if("cubic-bezier"===e.name){var o=e.controlPoints;i=new et(o[0],o[1],o[2],o[3]).solve(Et(t,1,n,r))}return i},wt.parse=function(e,t){var n=e[0],r=e[1],i=e[2],o=e.slice(3);if(!Array.isArray(r)||0===r.length)return t.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){var a=r[1];if("number"!=typeof a)return t.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:a}}else{if("cubic-bezier"!==r[0])return t.error("Unknown interpolation type "+String(r[0]),1,0);var s=r.slice(1);if(4!==s.length||s.some(function(e){return"number"!=typeof e||e<0||e>1}))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:s}}if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(i=t.parse(i,2,_e)))return null;var u=[],l=null;"interpolate-hcl"===n||"interpolate-lab"===n?l=ge:t.expectedType&&"value"!==t.expectedType.kind&&(l=t.expectedType);for(var c=0;c<o.length;c+=2){var p=o[c],h=o[c+1],f=c+3,d=c+4;if("number"!=typeof p)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',f);if(u.length&&u[u.length-1][0]>=p)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',f);var m=t.parse(h,d,l);if(!m)return null;l=l||m.type,u.push([p,m])}return"number"===l.kind||"color"===l.kind||"array"===l.kind&&"number"===l.itemType.kind&&"number"==typeof l.N?new wt(l,n,r,i,u):t.error("Type "+ke(l)+" is not interpolatable.")},wt.prototype.evaluate=function(e){var t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);var r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);var i=t.length;if(r>=t[i-1])return n[i-1].evaluate(e);var o=Je(t,r),a=t[o],s=t[o+1],u=wt.interpolationFactor(this.interpolation,r,a,s),l=n[o].evaluate(e),c=n[o+1].evaluate(e);return"interpolate"===this.operator?rt[this.type.kind.toLowerCase()](l,c,u):"interpolate-hcl"===this.operator?bt.reverse(bt.interpolate(bt.forward(l),bt.forward(c),u)):gt.reverse(gt.interpolate(gt.forward(l),gt.forward(c),u))},wt.prototype.eachChild=function(e){e(this.input);for(var t=0,n=this.outputs;t<n.length;t+=1)e(n[t])},wt.prototype.possibleOutputs=function(){return(e=[]).concat.apply(e,this.outputs.map(function(e){return e.possibleOutputs()}));var e},wt.prototype.serialize=function(){var e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var t=[this.operator,e,this.input.serialize()],n=0;n<this.labels.length;n++)t.push(this.labels[n],this.outputs[n].serialize());return t};var Tt=function(e,t){this.type=e,this.args=t};Tt.parse=function(e,t){if(e.length<2)return t.error("Expectected at least one argument.");var n=null,r=t.expectedType;r&&"value"!==r.kind&&(n=r);for(var i=[],o=0,a=e.slice(1);o<a.length;o+=1){var s=a[o],u=t.parse(s,1+i.length,n,void 0,{typeAnnotation:"omit"});if(!u)return null;n=n||u.type,i.push(u)}var l=r&&i.some(function(e){return Me(r,e.type)});return new Tt(l?xe:n,i)},Tt.prototype.evaluate=function(e){for(var t=null,n=0,r=this.args;n<r.length&&null===(t=r[n].evaluate(e));n+=1);return t},Tt.prototype.eachChild=function(e){this.args.forEach(e)},Tt.prototype.possibleOutputs=function(){return(e=[]).concat.apply(e,this.args.map(function(e){return e.possibleOutputs()}));var e},Tt.prototype.serialize=function(){var e=["coalesce"];return this.eachChild(function(t){e.push(t.serialize())}),e};var kt=function(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t};kt.prototype.evaluate=function(e){return this.result.evaluate(e)},kt.prototype.eachChild=function(e){for(var t=0,n=this.bindings;t<n.length;t+=1)e(n[t][1]);e(this.result)},kt.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var n=[],r=1;r<e.length-1;r+=2){var i=e[r];if("string"!=typeof i)return t.error("Expected string, but found "+typeof i+" instead.",r);if(/[^a-zA-Z0-9_]/.test(i))return t.error("Variable names must contain only alphanumeric characters or '_'.",r);var o=t.parse(e[r+1],r+1);if(!o)return null;n.push([i,o])}var a=t.parse(e[e.length-1],e.length-1,t.expectedType,n);return a?new kt(n,a):null},kt.prototype.possibleOutputs=function(){return this.result.possibleOutputs()},kt.prototype.serialize=function(){for(var e=["let"],t=0,n=this.bindings;t<n.length;t+=1){var r=n[t],i=r[0],o=r[1];e.push(i,o.serialize())}return e.push(this.result.serialize()),e};var Ct=function(e,t,n){this.type=e,this.index=t,this.input=n};Ct.parse=function(e,t){if(3!==e.length)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1,_e),r=t.parse(e[2],2,Te(t.expectedType||xe));if(!n||!r)return null;var i=r.type;return new Ct(i.itemType,n,r)},Ct.prototype.evaluate=function(e){var t=this.index.evaluate(e),n=this.input.evaluate(e);if(t<0)throw new De("Array index out of bounds: "+t+" < 0.");if(t>=n.length)throw new De("Array index out of bounds: "+t+" > "+(n.length-1)+".");if(t!==Math.floor(t))throw new De("Array index must be an integer, but found "+t+" instead.");return n[t]},Ct.prototype.eachChild=function(e){e(this.index),e(this.input)},Ct.prototype.possibleOutputs=function(){return[void 0]},Ct.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Mt=function(e,t,n,r,i,o){this.inputType=e,this.type=t,this.input=n,this.cases=r,this.outputs=i,this.otherwise=o};Mt.parse=function(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return t.error("Expected an even number of arguments.");var n,r;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);for(var i={},o=[],a=2;a<e.length-1;a+=2){var s=e[a],u=e[a+1];Array.isArray(s)||(s=[s]);var l=t.concat(a);if(0===s.length)return l.error("Expected at least one branch label.");for(var c=0,p=s;c<p.length;c+=1){var h=p[c];if("number"!=typeof h&&"string"!=typeof h)return l.error("Branch labels must be numbers or strings.");if("number"==typeof h&&Math.abs(h)>Number.MAX_SAFE_INTEGER)return l.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof h&&Math.floor(h)!==h)return l.error("Numeric branch labels must be integer values.");if(n){if(l.checkSubtype(n,je(h)))return null}else n=je(h);if(void 0!==i[String(h)])return l.error("Branch labels must be unique.");i[String(h)]=o.length}var f=t.parse(u,a,r);if(!f)return null;r=r||f.type,o.push(f)}var d=t.parse(e[1],1,xe);if(!d)return null;var m=t.parse(e[e.length-1],e.length-1,r);return m?"value"!==d.type.kind&&t.concat(1).checkSubtype(n,d.type)?null:new Mt(n,r,d,i,o,m):null},Mt.prototype.evaluate=function(e){var t=this.input.evaluate(e);return(je(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)},Mt.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},Mt.prototype.possibleOutputs=function(){return(e=[]).concat.apply(e,this.outputs.map(function(e){return e.possibleOutputs()})).concat(this.otherwise.possibleOutputs());var e},Mt.prototype.serialize=function(){for(var e=this,t=["match",this.input.serialize()],n=[],r={},i=0,o=Object.keys(this.cases).sort();i<o.length;i+=1){var a=o[i],s=r[e.cases[a]];void 0===s?(r[e.cases[a]]=n.length,n.push([e.cases[a],[a]])):n[s][1].push(a)}for(var u=function(t){return"number"===e.inputType.kind?Number(t):t},l=0,c=n;l<c.length;l+=1){var p=c[l],h=p[0],f=p[1];1===f.length?t.push(u(f[0])):t.push(f.map(u)),t.push(e.outputs[h].serialize())}return t.push(this.otherwise.serialize()),t};var Pt=function(e,t,n){this.type=e,this.branches=t,this.otherwise=n};function At(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function St(e,t,n,r){return 0===r.compare(t,n)}function Ot(e,t,n){var r="=="!==e&&"!="!==e;return function(){function i(e,t,n){this.type=ve,this.lhs=e,this.rhs=t,this.collator=n,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}return i.parse=function(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");var n=e[0],o=t.parse(e[1],1,xe);if(!o)return null;if(!At(n,o.type))return t.concat(1).error('"'+n+"\" comparisons are not supported for type '"+ke(o.type)+"'.");var a=t.parse(e[2],2,xe);if(!a)return null;if(!At(n,a.type))return t.concat(2).error('"'+n+"\" comparisons are not supported for type '"+ke(a.type)+"'.");if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return t.error("Cannot compare types '"+ke(o.type)+"' and '"+ke(a.type)+"'.");r&&("value"===o.type.kind&&"value"!==a.type.kind?o=new Ne(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new Ne(o.type,[a])));var s=null;if(4===e.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return t.error("Cannot use collator to compare non-string types.");if(!(s=t.parse(e[3],3,we)))return null}return new i(o,a,s)},i.prototype.evaluate=function(i){var o=this.lhs.evaluate(i),a=this.rhs.evaluate(i);if(r&&this.hasUntypedArgument){var s=je(o),u=je(a);if(s.kind!==u.kind||"string"!==s.kind&&"number"!==s.kind)throw new De('Expected arguments for "'+e+'" to be (string, string) or (number, number), but found ('+s.kind+", "+u.kind+") instead.")}if(this.collator&&!r&&this.hasUntypedArgument){var l=je(o),c=je(a);if("string"!==l.kind||"string"!==c.kind)return t(i,o,a)}return this.collator?n(i,o,a,this.collator.evaluate(i)):t(i,o,a)},i.prototype.eachChild=function(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)},i.prototype.possibleOutputs=function(){return[!0,!1]},i.prototype.serialize=function(){var t=[e];return this.eachChild(function(e){t.push(e.serialize())}),t},i}()}Pt.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return t.error("Expected an odd number of arguments.");var n;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);for(var r=[],i=1;i<e.length-1;i+=2){var o=t.parse(e[i],i,ve);if(!o)return null;var a=t.parse(e[i+1],i+1,n);if(!a)return null;r.push([o,a]),n=n||a.type}var s=t.parse(e[e.length-1],e.length-1,n);return s?new Pt(n,r,s):null},Pt.prototype.evaluate=function(e){for(var t=0,n=this.branches;t<n.length;t+=1){var r=n[t],i=r[0],o=r[1];if(i.evaluate(e))return o.evaluate(e)}return this.otherwise.evaluate(e)},Pt.prototype.eachChild=function(e){for(var t=0,n=this.branches;t<n.length;t+=1){var r=n[t],i=r[0],o=r[1];e(i),e(o)}e(this.otherwise)},Pt.prototype.possibleOutputs=function(){return(e=[]).concat.apply(e,this.branches.map(function(e){return e[0],e[1].possibleOutputs()})).concat(this.otherwise.possibleOutputs());var e},Pt.prototype.serialize=function(){var e=["case"];return this.eachChild(function(t){e.push(t.serialize())}),e};var It=Ot("==",function(e,t,n){return t===n},St),Rt=Ot("!=",function(e,t,n){return t!==n},function(e,t,n,r){return!St(0,t,n,r)}),jt=Ot("<",function(e,t,n){return t<n},function(e,t,n,r){return r.compare(t,n)<0}),Lt=Ot(">",function(e,t,n){return t>n},function(e,t,n,r){return r.compare(t,n)>0}),zt=Ot("<=",function(e,t,n){return t<=n},function(e,t,n,r){return r.compare(t,n)<=0}),Dt=Ot(">=",function(e,t,n){return t>=n},function(e,t,n,r){return r.compare(t,n)>=0}),Bt=function(e){this.type=_e,this.input=e};Bt.parse=function(e,t){if(2!==e.length)return t.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?t.error("Expected argument of type string or array, but found "+ke(n.type)+" instead."):new Bt(n):null},Bt.prototype.evaluate=function(e){var t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new De("Expected value to be of type string or array, but found "+ke(je(t))+" instead.")},Bt.prototype.eachChild=function(e){e(this.input)},Bt.prototype.possibleOutputs=function(){return[void 0]},Bt.prototype.serialize=function(){var e=["length"];return this.eachChild(function(t){e.push(t.serialize())}),e};var Nt={"==":It,"!=":Rt,">":Lt,"<":jt,">=":Dt,"<=":zt,array:Ne,at:Ct,boolean:Ne,case:Pt,coalesce:Tt,collator:Ze,format:qe,interpolate:wt,"interpolate-hcl":wt,"interpolate-lab":wt,length:Bt,let:kt,literal:ze,match:Mt,number:Ne,object:Ne,step:Qe,string:Ne,"to-boolean":Ue,"to-color":Ue,"to-number":Ue,"to-string":Ue,var:Xe};function qt(e,t){var n=t[0],r=t[1],i=t[2],o=t[3];n=n.evaluate(e),r=r.evaluate(e),i=i.evaluate(e);var a=o?o.evaluate(e):1,s=Re(n,r,i,a);if(s)throw new De(s);return new Ae(n/255*a,r/255*a,i/255*a,a)}function Ft(e,t){return e in t}function Ut(e,t){var n=t[e];return void 0===n?null:n}function Vt(e){return{type:e}}function Wt(e){return{result:"success",value:e}}function Gt(e){return{result:"error",value:e}}function Zt(e){return"data-driven"===e["property-type"]||"cross-faded-data-driven"===e["property-type"]}function Ht(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function Kt(e){return!!e.expression&&e.expression.interpolated}function Yt(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function Xt(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function $t(e){return e}function Jt(e,t,n){return void 0!==e?e:void 0!==t?t:void 0!==n?n:void 0}function Qt(e,t,n,r,i){return Jt(typeof n===i?r[n]:void 0,e.default,t.default)}function en(e,t,n){if("number"!==Yt(n))return Jt(e.default,t.default);var r=e.stops.length;if(1===r)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[r-1][0])return e.stops[r-1][1];var i=rn(e.stops,n);return e.stops[i][1]}function tn(e,t,n){var r=void 0!==e.base?e.base:1;if("number"!==Yt(n))return Jt(e.default,t.default);var i=e.stops.length;if(1===i)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[i-1][0])return e.stops[i-1][1];var o=rn(e.stops,n),a=function(e,t,n,r){var i=r-n,o=e-n;return 0===i?0:1===t?o/i:(Math.pow(t,o)-1)/(Math.pow(t,i)-1)}(n,r,e.stops[o][0],e.stops[o+1][0]),s=e.stops[o][1],u=e.stops[o+1][1],l=rt[t.type]||$t;if(e.colorSpace&&"rgb"!==e.colorSpace){var c=xt[e.colorSpace];l=function(e,t){return c.reverse(c.interpolate(c.forward(e),c.forward(t),a))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=s.evaluate.apply(void 0,e),r=u.evaluate.apply(void 0,e);if(void 0!==n&&void 0!==r)return l(n,r,a)}}:l(s,u,a)}function nn(e,t,n){return"color"===t.type?n=Ae.parse(n):"formatted"===t.type?n=Ie.fromString(n.toString()):Yt(n)===t.type||"enum"===t.type&&t.values[n]||(n=void 0),Jt(n,e.default,t.default)}function rn(e,t){for(var n,r,i=0,o=e.length-1,a=0;i<=o;){if(n=e[a=Math.floor((i+o)/2)][0],r=e[a+1][0],t===n||t>n&&t<r)return a;n<t?i=a+1:n>t&&(o=a-1)}return Math.max(a-1,0)}Ge.register(Nt,{error:[{kind:"error"},[ye],function(e,t){var n=t[0];throw new De(n.evaluate(e))}],typeof:[ye,[xe],function(e,t){return ke(je(t[0].evaluate(e)))}],"to-rgba":[Te(_e,4),[ge],function(e,t){return t[0].evaluate(e).toArray()}],rgb:[ge,[_e,_e,_e],qt],rgba:[ge,[_e,_e,_e,_e],qt],has:{type:ve,overloads:[[[ye],function(e,t){return Ft(t[0].evaluate(e),e.properties())}],[[ye,be],function(e,t){var n=t[0],r=t[1];return Ft(n.evaluate(e),r.evaluate(e))}]]},get:{type:xe,overloads:[[[ye],function(e,t){return Ut(t[0].evaluate(e),e.properties())}],[[ye,be],function(e,t){var n=t[0],r=t[1];return Ut(n.evaluate(e),r.evaluate(e))}]]},"feature-state":[xe,[ye],function(e,t){return Ut(t[0].evaluate(e),e.featureState||{})}],properties:[be,[],function(e){return e.properties()}],"geometry-type":[ye,[],function(e){return e.geometryType()}],id:[xe,[],function(e){return e.id()}],zoom:[_e,[],function(e){return e.globals.zoom}],"heatmap-density":[_e,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[_e,[],function(e){return e.globals.lineProgress||0}],"+":[_e,Vt(_e),function(e,t){for(var n=0,r=0,i=t;r<i.length;r+=1)n+=i[r].evaluate(e);return n}],"*":[_e,Vt(_e),function(e,t){for(var n=1,r=0,i=t;r<i.length;r+=1)n*=i[r].evaluate(e);return n}],"-":{type:_e,overloads:[[[_e,_e],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)-r.evaluate(e)}],[[_e],function(e,t){return-t[0].evaluate(e)}]]},"/":[_e,[_e,_e],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)/r.evaluate(e)}],"%":[_e,[_e,_e],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)%r.evaluate(e)}],ln2:[_e,[],function(){return Math.LN2}],pi:[_e,[],function(){return Math.PI}],e:[_e,[],function(){return Math.E}],"^":[_e,[_e,_e],function(e,t){var n=t[0],r=t[1];return Math.pow(n.evaluate(e),r.evaluate(e))}],sqrt:[_e,[_e],function(e,t){var n=t[0];return Math.sqrt(n.evaluate(e))}],log10:[_e,[_e],function(e,t){var n=t[0];return Math.log(n.evaluate(e))/Math.LN10}],ln:[_e,[_e],function(e,t){var n=t[0];return Math.log(n.evaluate(e))}],log2:[_e,[_e],function(e,t){var n=t[0];return Math.log(n.evaluate(e))/Math.LN2}],sin:[_e,[_e],function(e,t){var n=t[0];return Math.sin(n.evaluate(e))}],cos:[_e,[_e],function(e,t){var n=t[0];return Math.cos(n.evaluate(e))}],tan:[_e,[_e],function(e,t){var n=t[0];return Math.tan(n.evaluate(e))}],asin:[_e,[_e],function(e,t){var n=t[0];return Math.asin(n.evaluate(e))}],acos:[_e,[_e],function(e,t){var n=t[0];return Math.acos(n.evaluate(e))}],atan:[_e,[_e],function(e,t){var n=t[0];return Math.atan(n.evaluate(e))}],min:[_e,Vt(_e),function(e,t){return Math.min.apply(Math,t.map(function(t){return t.evaluate(e)}))}],max:[_e,Vt(_e),function(e,t){return Math.max.apply(Math,t.map(function(t){return t.evaluate(e)}))}],abs:[_e,[_e],function(e,t){var n=t[0];return Math.abs(n.evaluate(e))}],round:[_e,[_e],function(e,t){var n=t[0].evaluate(e);return n<0?-Math.round(-n):Math.round(n)}],floor:[_e,[_e],function(e,t){var n=t[0];return Math.floor(n.evaluate(e))}],ceil:[_e,[_e],function(e,t){var n=t[0];return Math.ceil(n.evaluate(e))}],"filter-==":[ve,[ye,xe],function(e,t){var n=t[0],r=t[1];return e.properties()[n.value]===r.value}],"filter-id-==":[ve,[xe],function(e,t){var n=t[0];return e.id()===n.value}],"filter-type-==":[ve,[ye],function(e,t){var n=t[0];return e.geometryType()===n.value}],"filter-<":[ve,[ye,xe],function(e,t){var n=t[0],r=t[1],i=e.properties()[n.value],o=r.value;return typeof i==typeof o&&i<o}],"filter-id-<":[ve,[xe],function(e,t){var n=t[0],r=e.id(),i=n.value;return typeof r==typeof i&&r<i}],"filter->":[ve,[ye,xe],function(e,t){var n=t[0],r=t[1],i=e.properties()[n.value],o=r.value;return typeof i==typeof o&&i>o}],"filter-id->":[ve,[xe],function(e,t){var n=t[0],r=e.id(),i=n.value;return typeof r==typeof i&&r>i}],"filter-<=":[ve,[ye,xe],function(e,t){var n=t[0],r=t[1],i=e.properties()[n.value],o=r.value;return typeof i==typeof o&&i<=o}],"filter-id-<=":[ve,[xe],function(e,t){var n=t[0],r=e.id(),i=n.value;return typeof r==typeof i&&r<=i}],"filter->=":[ve,[ye,xe],function(e,t){var n=t[0],r=t[1],i=e.properties()[n.value],o=r.value;return typeof i==typeof o&&i>=o}],"filter-id->=":[ve,[xe],function(e,t){var n=t[0],r=e.id(),i=n.value;return typeof r==typeof i&&r>=i}],"filter-has":[ve,[xe],function(e,t){return t[0].value in e.properties()}],"filter-has-id":[ve,[],function(e){return null!==e.id()}],"filter-type-in":[ve,[Te(ye)],function(e,t){return t[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[ve,[Te(xe)],function(e,t){return t[0].value.indexOf(e.id())>=0}],"filter-in-small":[ve,[ye,Te(xe)],function(e,t){var n=t[0];return t[1].value.indexOf(e.properties()[n.value])>=0}],"filter-in-large":[ve,[ye,Te(xe)],function(e,t){var n=t[0],r=t[1];return function(e,t,n,r){for(;n<=r;){var i=n+r>>1;if(t[i]===e)return!0;t[i]>e?r=i-1:n=i+1}return!1}(e.properties()[n.value],r.value,0,r.value.length-1)}],all:{type:ve,overloads:[[[ve,ve],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)&&r.evaluate(e)}],[Vt(ve),function(e,t){for(var n=0,r=t;n<r.length;n+=1)if(!r[n].evaluate(e))return!1;return!0}]]},any:{type:ve,overloads:[[[ve,ve],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)||r.evaluate(e)}],[Vt(ve),function(e,t){for(var n=0,r=t;n<r.length;n+=1)if(r[n].evaluate(e))return!0;return!1}]]},"!":[ve,[ve],function(e,t){return!t[0].evaluate(e)}],"is-supported-script":[ve,[ye],function(e,t){var n=t[0],r=e.globals&&e.globals.isSupportedScript;return!r||r(n.evaluate(e))}],upcase:[ye,[ye],function(e,t){return t[0].evaluate(e).toUpperCase()}],downcase:[ye,[ye],function(e,t){return t[0].evaluate(e).toLowerCase()}],concat:[ye,Vt(xe),function(e,t){return t.map(function(t){return Le(t.evaluate(e))}).join("")}],"resolved-locale":[ye,[we],function(e,t){return t[0].evaluate(e).resolvedLocale()}]});var on=function(e,t){var n;this.expression=e,this._warningHistory={},this._evaluator=new We,this._defaultValue="color"===(n=t).type&&Xt(n.default)?new Ae(0,0,0,0):"color"===n.type?Ae.parse(n.default)||null:void 0===n.default?null:n.default,this._enumValues="enum"===t.type?t.values:null};function an(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in Nt}function sn(e,t){var n=new $e(Nt,[],function(e){var t={color:ge,string:ye,number:_e,enum:ye,boolean:ve,formatted:Ee};return"array"===e.type?Te(t[e.value]||xe,e.length):t[e.type]}(t)),r=n.parse(e,void 0,void 0,void 0,"string"===t.type?{typeAnnotation:"coerce"}:void 0);return r?Wt(new on(r,t)):Gt(n.errors)}on.prototype.evaluateWithoutErrorHandling=function(e,t,n){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=n,this.expression.evaluate(this._evaluator)},on.prototype.evaluate=function(e,t,n){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=n||null;try{var r=this.expression.evaluate(this._evaluator);if(null==r)return this._defaultValue;if(this._enumValues&&!(r in this._enumValues))throw new De("Expected value to be one of "+Object.keys(this._enumValues).map(function(e){return JSON.stringify(e)}).join(", ")+", but found "+JSON.stringify(r)+" instead.");return r}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}};var un=function(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!Ke(t.expression)};un.prototype.evaluateWithoutErrorHandling=function(e,t,n){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n)},un.prototype.evaluate=function(e,t,n){return this._styleExpression.evaluate(e,t,n)};var ln=function(e,t,n){this.kind=e,this.zoomStops=n.labels,this._styleExpression=t,this.isStateDependent="camera"!==e&&!Ke(t.expression),n instanceof wt&&(this._interpolationType=n.interpolation)};function cn(e,t){if("error"===(e=sn(e,t)).result)return e;var n=e.value.expression,r=He(n);if(!r&&!Zt(t))return Gt([new fe("","data expressions not supported")]);var i=Ye(n,["zoom"]);if(!i&&!Ht(t))return Gt([new fe("","zoom expressions not supported")]);var o=function e(t){var n=null;if(t instanceof kt)n=e(t.result);else if(t instanceof Tt)for(var r=0,i=t.args;r<i.length;r+=1){var o=i[r];if(n=e(o))break}else(t instanceof Qe||t instanceof wt)&&t.input instanceof Ge&&"zoom"===t.input.name&&(n=t);return n instanceof fe?n:(t.eachChild(function(t){var r=e(t);r instanceof fe?n=r:!n&&r?n=new fe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&r&&n!==r&&(n=new fe("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n)}(n);return o||i?o instanceof fe?Gt([o]):o instanceof wt&&!Kt(t)?Gt([new fe("",'"interpolate" expressions cannot be used with this property')]):Wt(o?new ln(r?"camera":"composite",e.value,o):new un(r?"constant":"source",e.value)):Gt([new fe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}ln.prototype.evaluateWithoutErrorHandling=function(e,t,n){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n)},ln.prototype.evaluate=function(e,t,n){return this._styleExpression.evaluate(e,t,n)},ln.prototype.interpolationFactor=function(e,t,n){return this._interpolationType?wt.interpolationFactor(this._interpolationType,e,t,n):0};var pn=function(e,t){this._parameters=e,this._specification=t,ce(this,function e(t,n){var r,i,o,a="color"===n.type,s=t.stops&&"object"==typeof t.stops[0][0],u=s||void 0!==t.property,l=s||!u,c=t.type||(Kt(n)?"exponential":"interval");if(a&&((t=ce({},t)).stops&&(t.stops=t.stops.map(function(e){return[e[0],Ae.parse(e[1])]})),t.default?t.default=Ae.parse(t.default):t.default=Ae.parse(n.default)),t.colorSpace&&"rgb"!==t.colorSpace&&!xt[t.colorSpace])throw new Error("Unknown color space: "+t.colorSpace);if("exponential"===c)r=tn;else if("interval"===c)r=en;else if("categorical"===c){r=Qt,i=Object.create(null);for(var p=0,h=t.stops;p<h.length;p+=1){var f=h[p];i[f[0]]=f[1]}o=typeof t.stops[0][0]}else{if("identity"!==c)throw new Error('Unknown function type "'+c+'"');r=nn}if(s){for(var d={},m=[],_=0;_<t.stops.length;_++){var y=t.stops[_],v=y[0].zoom;void 0===d[v]&&(d[v]={zoom:v,type:t.type,property:t.property,default:t.default,stops:[]},m.push(v)),d[v].stops.push([y[0].value,y[1]])}for(var g=[],b=0,x=m;b<x.length;b+=1){var w=x[b];g.push([d[w].zoom,e(d[w],n)])}return{kind:"composite",interpolationFactor:wt.interpolationFactor.bind(void 0,{name:"linear"}),zoomStops:g.map(function(e){return e[0]}),evaluate:function(e,r){var i=e.zoom;return tn({stops:g,base:t.base},n,i).evaluate(i,r)}}}return l?{kind:"camera",interpolationFactor:"exponential"===c?wt.interpolationFactor.bind(void 0,{name:"exponential",base:void 0!==t.base?t.base:1}):function(){return 0},zoomStops:t.stops.map(function(e){return e[0]}),evaluate:function(e){var a=e.zoom;return r(t,n,a,i,o)}}:{kind:"source",evaluate:function(e,a){var s=a&&a.properties?a.properties[t.property]:void 0;return void 0===s?Jt(t.default,n.default):r(t,n,s,i,o)}}}(this._parameters,this._specification))};function hn(e,t){if(Xt(e))return new pn(e,t);if(an(e)){var n=cn(e,t);if("error"===n.result)throw new Error(n.value.map(function(e){return e.key+": "+e.message}).join(", "));return n.value}var r=e;return"string"==typeof e&&"color"===t.type&&(r=Ae.parse(e)),{kind:"constant",evaluate:function(){return r}}}function fn(e){var t=e.key,n=e.value,r=e.valueSpec||{},i=e.objectElementValidators||{},o=e.style,a=e.styleSpec,s=[],u=Yt(n);if("object"!==u)return[new ue(t,n,"object expected, "+u+" found")];for(var l in n){var c=l.split(".")[0],p=r[c]||r["*"],h=void 0;if(i[c])h=i[c];else if(r[c])h=Dn;else if(i["*"])h=i["*"];else{if(!r["*"]){s.push(new ue(t,n[l],'unknown property "'+l+'"'));continue}h=Dn}s=s.concat(h({key:(t?t+".":t)+l,value:n[l],valueSpec:p,style:o,styleSpec:a,object:n,objectKey:l},n))}for(var f in r)i[f]||r[f].required&&void 0===r[f].default&&void 0===n[f]&&s.push(new ue(t,n,'missing required property "'+f+'"'));return s}function dn(e){var t=e.value,n=e.valueSpec,r=e.style,i=e.styleSpec,o=e.key,a=e.arrayElementValidator||Dn;if("array"!==Yt(t))return[new ue(o,t,"array expected, "+Yt(t)+" found")];if(n.length&&t.length!==n.length)return[new ue(o,t,"array length "+n.length+" expected, length "+t.length+" found")];if(n["min-length"]&&t.length<n["min-length"])return[new ue(o,t,"array length at least "+n["min-length"]+" expected, length "+t.length+" found")];var s={type:n.value};i.$version<7&&(s.function=n.function),"object"===Yt(n.value)&&(s=n.value);for(var u=[],l=0;l<t.length;l++)u=u.concat(a({array:t,arrayIndex:l,value:t[l],valueSpec:s,style:r,styleSpec:i,key:o+"["+l+"]"}));return u}function mn(e){var t=e.key,n=e.value,r=e.valueSpec,i=Yt(n);return"number"!==i?[new ue(t,n,"number expected, "+i+" found")]:"minimum"in r&&n<r.minimum?[new ue(t,n,n+" is less than the minimum value "+r.minimum)]:"maximum"in r&&n>r.maximum?[new ue(t,n,n+" is greater than the maximum value "+r.maximum)]:[]}function _n(e){var t,n,r,i=e.valueSpec,o=pe(e.value.type),a={},s="categorical"!==o&&void 0===e.value.property,u=!s,l="array"===Yt(e.value.stops)&&"array"===Yt(e.value.stops[0])&&"object"===Yt(e.value.stops[0][0]),c=fn({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===o)return[new ue(e.key,e.value,'identity function may not have a "stops" property')];var t=[],n=e.value;return t=t.concat(dn({key:e.key,value:n,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:p})),"array"===Yt(n)&&0===n.length&&t.push(new ue(e.key,n,"array must have at least one stop")),t},default:function(e){return Dn({key:e.key,value:e.value,valueSpec:i,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===o&&s&&c.push(new ue(e.key,e.value,'missing required property "property"')),"identity"===o||e.value.stops||c.push(new ue(e.key,e.value,'missing required property "stops"')),"exponential"===o&&e.valueSpec.expression&&!Kt(e.valueSpec)&&c.push(new ue(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(u&&!Zt(e.valueSpec)?c.push(new ue(e.key,e.value,"property functions not supported")):s&&!Ht(e.valueSpec)&&c.push(new ue(e.key,e.value,"zoom functions not supported"))),"categorical"!==o&&!l||void 0!==e.value.property||c.push(new ue(e.key,e.value,'"property" property is required')),c;function p(e){var t=[],o=e.value,s=e.key;if("array"!==Yt(o))return[new ue(s,o,"array expected, "+Yt(o)+" found")];if(2!==o.length)return[new ue(s,o,"array length 2 expected, length "+o.length+" found")];if(l){if("object"!==Yt(o[0]))return[new ue(s,o,"object expected, "+Yt(o[0])+" found")];if(void 0===o[0].zoom)return[new ue(s,o,"object stop key must have zoom")];if(void 0===o[0].value)return[new ue(s,o,"object stop key must have value")];if(r&&r>pe(o[0].zoom))return[new ue(s,o[0].zoom,"stop zoom values must appear in ascending order")];pe(o[0].zoom)!==r&&(r=pe(o[0].zoom),n=void 0,a={}),t=t.concat(fn({key:s+"[0]",value:o[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:mn,value:h}}))}else t=t.concat(h({key:s+"[0]",value:o[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},o));return an(he(o[1]))?t.concat([new ue(s+"[1]",o[1],"expressions are not allowed in function stops.")]):t.concat(Dn({key:s+"[1]",value:o[1],valueSpec:i,style:e.style,styleSpec:e.styleSpec}))}function h(e,r){var s=Yt(e.value),u=pe(e.value),l=null!==e.value?e.value:r;if(t){if(s!==t)return[new ue(e.key,l,s+" stop domain type must match previous stop domain type "+t)]}else t=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new ue(e.key,l,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==o){var c="number expected, "+s+" found";return Zt(i)&&void 0===o&&(c+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ue(e.key,l,c)]}return"categorical"!==o||"number"!==s||isFinite(u)&&Math.floor(u)===u?"categorical"!==o&&"number"===s&&void 0!==n&&u<n?[new ue(e.key,l,"stop domain values must appear in ascending order")]:(n=u,"categorical"===o&&u in a?[new ue(e.key,l,"stop domain values must be unique")]:(a[u]=!0,[])):[new ue(e.key,l,"integer expected, found "+u)]}}function yn(e){var t=("property"===e.expressionContext?cn:sn)(he(e.value),e.valueSpec);return"error"===t.result?t.value.map(function(t){return new ue(""+e.key+t.key,e.value,t.message)}):"property"===e.expressionContext&&"text-font"===e.propertyKey&&-1!==t.value._styleExpression.expression.possibleOutputs().indexOf(void 0)?[new ue(e.key,e.value,'Invalid data expression for "'+e.propertyKey+'". Output values must be contained as literals within the expression.')]:"property"!==e.expressionContext||"layout"!==e.propertyType||Ke(t.value._styleExpression.expression)?"filter"!==e.expressionContext||Ke(t.value.expression)?[]:[new ue(e.key,e.value,'"feature-state" data expressions are not supported with filters.')]:[new ue(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')]}function vn(e){var t=e.key,n=e.value,r=e.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(pe(n))&&i.push(new ue(t,n,"expected one of ["+r.values.join(", ")+"], "+JSON.stringify(n)+" found")):-1===Object.keys(r.values).indexOf(pe(n))&&i.push(new ue(t,n,"expected one of ["+Object.keys(r.values).join(", ")+"], "+JSON.stringify(n)+" found")),i}function gn(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(var t=0,n=e.slice(1);t<n.length;t+=1){var r=n[t];if(!gn(r)&&"boolean"!=typeof r)return!1}return!0;default:return!0}}pn.deserialize=function(e){return new pn(e._parameters,e._specification)},pn.serialize=function(e){return{_parameters:e._parameters,_specification:e._specification}};var bn={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function xn(e){if(null==e)return function(){return!0};gn(e)||(e=En(e));var t=sn(e,bn);if("error"===t.result)throw new Error(t.value.map(function(e){return e.key+": "+e.message}).join(", "));return function(e,n){return t.value.evaluate(e,n)}}function wn(e,t){return e<t?-1:e>t?1:0}function En(e){if(!e)return!0;var t,n=e[0];return e.length<=1?"any"!==n:"=="===n?Tn(e[1],e[2],"=="):"!="===n?Mn(Tn(e[1],e[2],"==")):"<"===n||">"===n||"<="===n||">="===n?Tn(e[1],e[2],n):"any"===n?(t=e.slice(1),["any"].concat(t.map(En))):"all"===n?["all"].concat(e.slice(1).map(En)):"none"===n?["all"].concat(e.slice(1).map(En).map(Mn)):"in"===n?kn(e[1],e.slice(2)):"!in"===n?Mn(kn(e[1],e.slice(2))):"has"===n?Cn(e[1]):"!has"!==n||Mn(Cn(e[1]))}function Tn(e,t,n){switch(e){case"$type":return["filter-type-"+n,t];case"$id":return["filter-id-"+n,t];default:return["filter-"+n,e,t]}}function kn(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(function(e){return typeof e!=typeof t[0]})?["filter-in-large",e,["literal",t.sort(wn)]]:["filter-in-small",e,["literal",t]]}}function Cn(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function Mn(e){return["!",e]}function Pn(e){return gn(he(e.value))?yn(ce({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function e(t){var n=t.value,r=t.key;if("array"!==Yt(n))return[new ue(r,n,"array expected, "+Yt(n)+" found")];var i,o=t.styleSpec,a=[];if(n.length<1)return[new ue(r,n,"filter array must have at least 1 element")];switch(a=a.concat(vn({key:r+"[0]",value:n[0],valueSpec:o.filter_operator,style:t.style,styleSpec:t.styleSpec})),pe(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&"$type"===pe(n[1])&&a.push(new ue(r,n,'"$type" cannot be use with operator "'+n[0]+'"'));case"==":case"!=":3!==n.length&&a.push(new ue(r,n,'filter array for operator "'+n[0]+'" must have 3 elements'));case"in":case"!in":n.length>=2&&"string"!==(i=Yt(n[1]))&&a.push(new ue(r+"[1]",n[1],"string expected, "+i+" found"));for(var s=2;s<n.length;s++)i=Yt(n[s]),"$type"===pe(n[1])?a=a.concat(vn({key:r+"["+s+"]",value:n[s],valueSpec:o.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&a.push(new ue(r+"["+s+"]",n[s],"string, number, or boolean expected, "+i+" found"));break;case"any":case"all":case"none":for(var u=1;u<n.length;u++)a=a.concat(e({key:r+"["+u+"]",value:n[u],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":i=Yt(n[1]),2!==n.length?a.push(new ue(r,n,'filter array for "'+n[0]+'" operator must have 2 elements')):"string"!==i&&a.push(new ue(r+"[1]",n[1],"string expected, "+i+" found"))}return a}(e)}function An(e,t){var n=e.key,r=e.style,i=e.styleSpec,o=e.value,a=e.objectKey,s=i[t+"_"+e.layerType];if(!s)return[];var u=a.match(/^(.*)-transition$/);if("paint"===t&&u&&s[u[1]]&&s[u[1]].transition)return Dn({key:n,value:o,valueSpec:i.transition,style:r,styleSpec:i});var l,c=e.valueSpec||s[a];if(!c)return[new ue(n,o,'unknown property "'+a+'"')];if("string"===Yt(o)&&Zt(c)&&!c.tokens&&(l=/^{([^}]+)}$/.exec(o)))return[new ue(n,o,'"'+a+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(l[1])+" }`.")];var p=[];return"symbol"===e.layerType&&("text-field"===a&&r&&!r.glyphs&&p.push(new ue(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&Xt(he(o))&&"identity"===pe(o.type)&&p.push(new ue(n,o,'"text-font" does not support identity functions'))),p.concat(Dn({key:e.key,value:o,valueSpec:c,style:r,styleSpec:i,expressionContext:"property",propertyType:t,propertyKey:a}))}function Sn(e){return An(e,"paint")}function On(e){return An(e,"layout")}function In(e){var t=[],n=e.value,r=e.key,i=e.style,o=e.styleSpec;n.type||n.ref||t.push(new ue(r,n,'either "type" or "ref" is required'));var a,s=pe(n.type),u=pe(n.ref);if(n.id)for(var l=pe(n.id),c=0;c<e.arrayIndex;c++){var p=i.layers[c];pe(p.id)===l&&t.push(new ue(r,n.id,'duplicate layer id "'+n.id+'", previously used at line '+p.id.__line__))}if("ref"in n)["type","source","source-layer","filter","layout"].forEach(function(e){e in n&&t.push(new ue(r,n[e],'"'+e+'" is prohibited for ref layers'))}),i.layers.forEach(function(e){pe(e.id)===u&&(a=e)}),a?a.ref?t.push(new ue(r,n.ref,"ref cannot reference another ref layer")):s=pe(a.type):t.push(new ue(r,n.ref,'ref layer "'+u+'" not found'));else if("background"!==s)if(n.source){var h=i.sources&&i.sources[n.source],f=h&&pe(h.type);h?"vector"===f&&"raster"===s?t.push(new ue(r,n.source,'layer "'+n.id+'" requires a raster source')):"raster"===f&&"raster"!==s?t.push(new ue(r,n.source,'layer "'+n.id+'" requires a vector source')):"vector"!==f||n["source-layer"]?"raster-dem"===f&&"hillshade"!==s?t.push(new ue(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!n.paint||!n.paint["line-gradient"]||"geojson"===f&&h.lineMetrics||t.push(new ue(r,n,'layer "'+n.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):t.push(new ue(r,n,'layer "'+n.id+'" must specify a "source-layer"')):t.push(new ue(r,n.source,'source "'+n.source+'" not found'))}else t.push(new ue(r,n,'missing required property "source"'));return t=t.concat(fn({key:r,value:n,valueSpec:o.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Dn({key:r+".type",value:n.type,valueSpec:o.layer.type,style:e.style,styleSpec:e.styleSpec,object:n,objectKey:"type"})},filter:Pn,layout:function(e){return fn({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return On(ce({layerType:s},e))}}})},paint:function(e){return fn({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return Sn(ce({layerType:s},e))}}})}}}))}function Rn(e){var t=e.value,n=e.key,r=e.styleSpec,i=e.style;if(!t.type)return[new ue(n,t,'"type" is required')];var o=pe(t.type),a=[];switch(o){case"vector":case"raster":case"raster-dem":if(a=a.concat(fn({key:n,value:t,valueSpec:r["source_"+o.replace("-","_")],style:e.style,styleSpec:r})),"url"in t)for(var s in t)["type","url","tileSize"].indexOf(s)<0&&a.push(new ue(n+"."+s,t[s],'a source with a "url" property may not include a "'+s+'" property'));return a;case"geojson":return fn({key:n,value:t,valueSpec:r.source_geojson,style:i,styleSpec:r});case"video":return fn({key:n,value:t,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return fn({key:n,value:t,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return a.push(new ue(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")),a;default:return vn({key:n+".type",value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:r})}}function jn(e){var t=e.value,n=e.styleSpec,r=n.light,i=e.style,o=[],a=Yt(t);if(void 0===t)return o;if("object"!==a)return o.concat([new ue("light",t,"object expected, "+a+" found")]);for(var s in t){var u=s.match(/^(.*)-transition$/);o=u&&r[u[1]]&&r[u[1]].transition?o.concat(Dn({key:s,value:t[s],valueSpec:n.transition,style:i,styleSpec:n})):r[s]?o.concat(Dn({key:s,value:t[s],valueSpec:r[s],style:i,styleSpec:n})):o.concat([new ue(s,t[s],'unknown property "'+s+'"')])}return o}function Ln(e){var t=e.value,n=e.key,r=Yt(t);return"string"!==r?[new ue(n,t,"string expected, "+r+" found")]:[]}var zn={"*":function(){return[]},array:dn,boolean:function(e){var t=e.value,n=e.key,r=Yt(t);return"boolean"!==r?[new ue(n,t,"boolean expected, "+r+" found")]:[]},number:mn,color:function(e){var t=e.key,n=e.value,r=Yt(n);return"string"!==r?[new ue(t,n,"color expected, "+r+" found")]:null===Pe(n)?[new ue(t,n,'color expected, "'+n+'" found')]:[]},constants:le,enum:vn,filter:Pn,function:_n,layer:In,object:fn,source:Rn,light:jn,string:Ln,formatted:function(e){return 0===Ln(e).length?[]:yn(e)}};function Dn(e){var t=e.value,n=e.valueSpec,r=e.styleSpec;return n.expression&&Xt(pe(t))?_n(e):n.expression&&an(he(t))?yn(e):n.type&&zn[n.type]?zn[n.type](e):fn(ce({},e,{valueSpec:n.type?r[n.type]:n}))}function Bn(e){var t=e.value,n=e.key,r=Ln(e);return r.length?r:(-1===t.indexOf("{fontstack}")&&r.push(new ue(n,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&r.push(new ue(n,t,'"glyphs" url must include a "{range}" token')),r)}function Nn(e,t){t=t||se;var n=[];return n=n.concat(Dn({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:Bn,"*":function(){return[]}}})),e.constants&&(n=n.concat(le({key:"constants",value:e.constants,style:e,styleSpec:t}))),qn(n)}function qn(e){return[].concat(e).sort(function(e,t){return e.line-t.line})}function Fn(e){return function(){return qn(e.apply(this,arguments))}}Nn.source=Fn(Rn),Nn.light=Fn(jn),Nn.layer=Fn(In),Nn.filter=Fn(Pn),Nn.paintProperty=Fn(Sn),Nn.layoutProperty=Fn(On);var Un=Nn,Vn=Nn.light,Wn=Nn.paintProperty,Gn=Nn.layoutProperty;function Zn(e,t){var n=!1;if(t&&t.length)for(var r=0,i=t;r<i.length;r+=1){var o=i[r];e.fire(new oe(new Error(o.message))),n=!0}return n}var Hn=Yn,Kn=3;function Yn(e,t,n){var r=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var i=new Int32Array(this.arrayBuffer);e=i[0],t=i[1],n=i[2],this.d=t+2*n;for(var o=0;o<this.d*this.d;o++){var a=i[Kn+o],s=i[Kn+o+1];r.push(a===s?null:i.subarray(a,s))}var u=i[Kn+r.length],l=i[Kn+r.length+1];this.keys=i.subarray(u,l),this.bboxes=i.subarray(l),this.insert=this._insertReadonly}else{this.d=t+2*n;for(var c=0;c<this.d*this.d;c++)r.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=n,this.scale=t/e,this.uid=0;var p=n/t*e;this.min=-p,this.max=e+p}Yn.prototype.insert=function(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},Yn.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Yn.prototype._insertCell=function(e,t,n,r,i,o){this.cells[i].push(o)},Yn.prototype.query=function(e,t,n,r){var i=this.min,o=this.max;if(e<=i&&t<=i&&o<=n&&o<=r)return Array.prototype.slice.call(this.keys);var a=[];return this._forEachCell(e,t,n,r,this._queryCell,a,{}),a},Yn.prototype._queryCell=function(e,t,n,r,i,o,a){var s=this.cells[i];if(null!==s)for(var u=this.keys,l=this.bboxes,c=0;c<s.length;c++){var p=s[c];if(void 0===a[p]){var h=4*p;e<=l[h+2]&&t<=l[h+3]&&n>=l[h+0]&&r>=l[h+1]?(a[p]=!0,o.push(u[p])):a[p]=!1}}},Yn.prototype._forEachCell=function(e,t,n,r,i,o,a){for(var s=this._convertToCellCoord(e),u=this._convertToCellCoord(t),l=this._convertToCellCoord(n),c=this._convertToCellCoord(r),p=s;p<=l;p++)for(var h=u;h<=c;h++){var f=this.d*h+p;if(i.call(this,e,t,n,r,f,o,a))return}},Yn.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},Yn.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=Kn+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var i=new Int32Array(t+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var o=t,a=0;a<e.length;a++){var s=e[a];i[Kn+a]=o,i.set(s,o),o+=s.length}return i[Kn+e.length]=o,i.set(this.keys,o),o+=this.keys.length,i[Kn+e.length+1]=o,i.set(this.bboxes,o),o+=this.bboxes.length,i.buffer};var Xn=self.ImageData,$n={};function Jn(e,t,n){void 0===n&&(n={}),Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),$n[e]={klass:t,omit:n.omit||[],shallow:n.shallow||[]}}for(var Qn in Jn("Object",Object),Hn.serialize=function(e,t){var n=e.toArrayBuffer();return t&&t.push(n),{buffer:n}},Hn.deserialize=function(e){return new Hn(e.buffer)},Jn("Grid",Hn),Jn("Color",Ae),Jn("Error",Error),Jn("StylePropertyFunction",pn),Jn("StyleExpression",on,{omit:["_evaluator"]}),Jn("ZoomDependentExpression",ln),Jn("ZoomConstantExpression",un),Jn("CompoundExpression",Ge,{omit:["_evaluate"]}),Nt)Nt[Qn]._classRegistryKey||Jn("Expression_"+Qn,Nt[Qn]);function er(e,t){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(e instanceof ArrayBuffer)return t&&t.push(e),e;if(ArrayBuffer.isView(e)){var n=e;return t&&t.push(n.buffer),n}if(e instanceof Xn)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){for(var r=[],i=0,o=e;i<o.length;i+=1){var a=o[i];r.push(er(a,t))}return r}if("object"==typeof e){var s=e.constructor,u=s._classRegistryKey;if(!u)throw new Error("can't serialize object of unregistered class");var l=s.serialize?s.serialize(e,t):{};if(!s.serialize){for(var c in e)if(e.hasOwnProperty(c)&&!($n[u].omit.indexOf(c)>=0)){var p=e[c];l[c]=$n[u].shallow.indexOf(c)>=0?p:er(p,t)}e instanceof Error&&(l.message=e.message)}if(l.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==u&&(l.$name=u),l}throw new Error("can't serialize object of type "+typeof e)}function tr(e){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||e instanceof ArrayBuffer||ArrayBuffer.isView(e)||e instanceof Xn)return e;if(Array.isArray(e))return e.map(tr);if("object"==typeof e){var t=e.$name||"Object",n=$n[t].klass;if(!n)throw new Error("can't deserialize unregistered class "+t);if(n.deserialize)return n.deserialize(e);for(var r=Object.create(n.prototype),i=0,o=Object.keys(e);i<o.length;i+=1){var a=o[i];if("$name"!==a){var s=e[a];r[a]=$n[t].shallow.indexOf(a)>=0?s:tr(s)}}return r}throw new Error("can't deserialize object of type "+typeof e)}var nr=function(){this.first=!0};nr.prototype.update=function(e,t){var n=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=n,!0))};var rr={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},Khmer:function(e){return e>=6016&&e<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};function ir(e){for(var t=0,n=e;t<n.length;t+=1)if(ar(n[t].charCodeAt(0)))return!0;return!1}function or(e){return!(rr.Arabic(e)||rr["Arabic Supplement"](e)||rr["Arabic Extended-A"](e)||rr["Arabic Presentation Forms-A"](e)||rr["Arabic Presentation Forms-B"](e))}function ar(e){return!(746!==e&&747!==e&&(e<4352||!(rr["Bopomofo Extended"](e)||rr.Bopomofo(e)||rr["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||rr["CJK Compatibility Ideographs"](e)||rr["CJK Compatibility"](e)||rr["CJK Radicals Supplement"](e)||rr["CJK Strokes"](e)||!(!rr["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||rr["CJK Unified Ideographs Extension A"](e)||rr["CJK Unified Ideographs"](e)||rr["Enclosed CJK Letters and Months"](e)||rr["Hangul Compatibility Jamo"](e)||rr["Hangul Jamo Extended-A"](e)||rr["Hangul Jamo Extended-B"](e)||rr["Hangul Jamo"](e)||rr["Hangul Syllables"](e)||rr.Hiragana(e)||rr["Ideographic Description Characters"](e)||rr.Kanbun(e)||rr["Kangxi Radicals"](e)||rr["Katakana Phonetic Extensions"](e)||rr.Katakana(e)&&12540!==e||!(!rr["Halfwidth and Fullwidth Forms"](e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!rr["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||rr["Unified Canadian Aboriginal Syllabics"](e)||rr["Unified Canadian Aboriginal Syllabics Extended"](e)||rr["Vertical Forms"](e)||rr["Yijing Hexagram Symbols"](e)||rr["Yi Syllables"](e)||rr["Yi Radicals"](e))))}function sr(e){return!(ar(e)||function(e){return!!(rr["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||rr["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||rr["Letterlike Symbols"](e)||rr["Number Forms"](e)||rr["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||rr["Control Pictures"](e)&&9251!==e||rr["Optical Character Recognition"](e)||rr["Enclosed Alphanumerics"](e)||rr["Geometric Shapes"](e)||rr["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||rr["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||rr["CJK Symbols and Punctuation"](e)||rr.Katakana(e)||rr["Private Use Area"](e)||rr["CJK Compatibility Forms"](e)||rr["Small Form Variants"](e)||rr["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)}(e))}function ur(e,t){return!(!t&&(e>=1424&&e<=2303||rr["Arabic Presentation Forms-A"](e)||rr["Arabic Presentation Forms-B"](e))||e>=2304&&e<=3583||e>=3840&&e<=4255||rr.Khmer(e))}var lr,cr=!1,pr=null,hr=!1,fr=new ae,dr={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return hr||null!=dr.applyArabicShaping}},mr=function(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new nr,this.transition={})};mr.prototype.isSupportedScript=function(e){return function(e,t){for(var n=0,r=e;n<r.length;n+=1)if(!ur(r[n].charCodeAt(0),t))return!1;return!0}(e,dr.isLoaded())},mr.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},mr.prototype.getCrossfadeParameters=function(){var e=this.zoom,t=e-Math.floor(e),n=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*t}};var _r=function(e,t){this.property=e,this.value=t,this.expression=hn(void 0===t?e.specification.default:t,e.specification)};_r.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},_r.prototype.possiblyEvaluate=function(e){return this.property.possiblyEvaluate(this,e)};var yr=function(e){this.property=e,this.value=new _r(e,void 0)};yr.prototype.transitioned=function(e,t){return new gr(this.property,this.value,t,p({},e.transition,this.transition),e.now)},yr.prototype.untransitioned=function(){return new gr(this.property,this.value,null,{},0)};var vr=function(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)};vr.prototype.getValue=function(e){return b(this._values[e].value.value)},vr.prototype.setValue=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new yr(this._values[e].property)),this._values[e].value=new _r(this._values[e].property,null===t?void 0:b(t))},vr.prototype.getTransition=function(e){return b(this._values[e].transition)},vr.prototype.setTransition=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new yr(this._values[e].property)),this._values[e].transition=b(t)||void 0},vr.prototype.serialize=function(){for(var e={},t=0,n=Object.keys(this._values);t<n.length;t+=1){var r=n[t],i=this.getValue(r);void 0!==i&&(e[r]=i);var o=this.getTransition(r);void 0!==o&&(e[r+"-transition"]=o)}return e},vr.prototype.transitioned=function(e,t){for(var n=new br(this._properties),r=0,i=Object.keys(this._values);r<i.length;r+=1){var o=i[r];n._values[o]=this._values[o].transitioned(e,t._values[o])}return n},vr.prototype.untransitioned=function(){for(var e=new br(this._properties),t=0,n=Object.keys(this._values);t<n.length;t+=1){var r=n[t];e._values[r]=this._values[r].untransitioned()}return e};var gr=function(e,t,n,r,i){this.property=e,this.value=t,this.begin=i+r.delay||0,this.end=this.begin+r.duration||0,e.specification.transition&&(r.delay||r.duration)&&(this.prior=n)};gr.prototype.possiblyEvaluate=function(e){var t=e.now||0,n=this.value.possiblyEvaluate(e),r=this.prior;if(r){if(t>this.end)return this.prior=null,n;if(this.value.isDataDriven())return this.prior=null,n;if(t<this.begin)return r.possiblyEvaluate(e);var i=(t-this.begin)/(this.end-this.begin);return this.property.interpolate(r.possiblyEvaluate(e),n,function(e){if(i<=0)return 0;if(i>=1)return 1;var t=i*i,n=t*i;return 4*(i<.5?n:3*(i-t)+n-.75)}())}return n};var br=function(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)};br.prototype.possiblyEvaluate=function(e){for(var t=new Er(this._properties),n=0,r=Object.keys(this._values);n<r.length;n+=1){var i=r[n];t._values[i]=this._values[i].possiblyEvaluate(e)}return t},br.prototype.hasTransition=function(){for(var e=0,t=Object.keys(this._values);e<t.length;e+=1){var n=t[e];if(this._values[n].prior)return!0}return!1};var xr=function(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)};xr.prototype.getValue=function(e){return b(this._values[e].value)},xr.prototype.setValue=function(e,t){this._values[e]=new _r(this._values[e].property,null===t?void 0:b(t))},xr.prototype.serialize=function(){for(var e={},t=0,n=Object.keys(this._values);t<n.length;t+=1){var r=n[t],i=this.getValue(r);void 0!==i&&(e[r]=i)}return e},xr.prototype.possiblyEvaluate=function(e){for(var t=new Er(this._properties),n=0,r=Object.keys(this._values);n<r.length;n+=1){var i=r[n];t._values[i]=this._values[i].possiblyEvaluate(e)}return t};var wr=function(e,t,n){this.property=e,this.value=t,this.parameters=n};wr.prototype.isConstant=function(){return"constant"===this.value.kind},wr.prototype.constantOr=function(e){return"constant"===this.value.kind?this.value.value:e},wr.prototype.evaluate=function(e,t){return this.property.evaluate(this.value,this.parameters,e,t)};var Er=function(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)};Er.prototype.get=function(e){return this._values[e]};var Tr=function(e){this.specification=e};Tr.prototype.possiblyEvaluate=function(e,t){return e.expression.evaluate(t)},Tr.prototype.interpolate=function(e,t,n){var r=rt[this.specification.type];return r?r(e,t,n):e};var kr=function(e){this.specification=e};kr.prototype.possiblyEvaluate=function(e,t){return"constant"===e.expression.kind||"camera"===e.expression.kind?new wr(this,{kind:"constant",value:e.expression.evaluate(t)},t):new wr(this,e.expression,t)},kr.prototype.interpolate=function(e,t,n){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new wr(this,{kind:"constant",value:void 0},e.parameters);var r=rt[this.specification.type];return r?new wr(this,{kind:"constant",value:r(e.value.value,t.value.value,n)},e.parameters):e},kr.prototype.evaluate=function(e,t,n,r){return"constant"===e.kind?e.value:e.evaluate(t,n,r)};var Cr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.possiblyEvaluate=function(e,t){if(void 0===e.value)return new wr(this,{kind:"constant",value:void 0},t);if("constant"===e.expression.kind){var n=e.expression.evaluate(t),r=this._calculate(n,n,n,t);return new wr(this,{kind:"constant",value:r},t)}if("camera"===e.expression.kind){var i=this._calculate(e.expression.evaluate({zoom:t.zoom-1}),e.expression.evaluate({zoom:t.zoom}),e.expression.evaluate({zoom:t.zoom+1}),t);return new wr(this,{kind:"constant",value:i},t)}return new wr(this,e.expression,t)},t.prototype.evaluate=function(e,t,n,r){if("source"===e.kind){var i=e.evaluate(t,n,r);return this._calculate(i,i,i,t)}return"composite"===e.kind?this._calculate(e.evaluate({zoom:Math.floor(t.zoom)-1},n,r),e.evaluate({zoom:Math.floor(t.zoom)},n,r),e.evaluate({zoom:Math.floor(t.zoom)+1},n,r),t):e.value},t.prototype._calculate=function(e,t,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:n,to:t}},t.prototype.interpolate=function(e){return e},t}(kr),Mr=function(e){this.specification=e};Mr.prototype.possiblyEvaluate=function(e,t){if(void 0!==e.value){if("constant"===e.expression.kind){var n=e.expression.evaluate(t);return this._calculate(n,n,n,t)}return this._calculate(e.expression.evaluate(new mr(Math.floor(t.zoom-1),t)),e.expression.evaluate(new mr(Math.floor(t.zoom),t)),e.expression.evaluate(new mr(Math.floor(t.zoom+1),t)),t)}},Mr.prototype._calculate=function(e,t,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:n,to:t}},Mr.prototype.interpolate=function(e){return e};var Pr=function(e){this.specification=e};Pr.prototype.possiblyEvaluate=function(e,t){return!!e.expression.evaluate(t)},Pr.prototype.interpolate=function(){return!1};var Ar=function(e){for(var t in this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},e){var n=e[t],r=this.defaultPropertyValues[t]=new _r(n,void 0),i=this.defaultTransitionablePropertyValues[t]=new yr(n);this.defaultTransitioningPropertyValues[t]=i.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=r.possiblyEvaluate({})}};Jn("DataDrivenProperty",kr),Jn("DataConstantProperty",Tr),Jn("CrossFadedDataDrivenProperty",Cr),Jn("CrossFadedProperty",Mr),Jn("ColorRampProperty",Pr);var Sr=function(e){function t(t,n){if(e.call(this),this.id=t.id,this.type=t.type,this.visibility="visible",this._featureFilter=function(){return!0},"custom"!==t.type&&(t=t,this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,"background"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),n.layout&&(this._unevaluatedLayout=new xr(n.layout)),n.paint)){for(var r in this._transitionablePaint=new vr(n.paint),t.paint)this.setPaintProperty(r,t.paint[r],{validate:!1});for(var i in t.layout)this.setLayoutProperty(i,t.layout[i],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned()}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},t.prototype.getLayoutProperty=function(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)},t.prototype.setLayoutProperty=function(e,t,n){if(null!=t){var r="layers."+this.id+".layout."+e;if(this._validate(Gn,r,e,t,n))return}"visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility="none"===t?t:"visible"},t.prototype.getPaintProperty=function(e){return y(e,"-transition")?this._transitionablePaint.getTransition(e.slice(0,-"-transition".length)):this._transitionablePaint.getValue(e)},t.prototype.setPaintProperty=function(e,t,n){if(null!=t){var r="layers."+this.id+".paint."+e;if(this._validate(Wn,r,e,t,n))return!1}if(y(e,"-transition"))return this._transitionablePaint.setTransition(e.slice(0,-"-transition".length),t||void 0),!1;var i=this._transitionablePaint._values[e],o="cross-faded-data-driven"===i.property.specification["property-type"]&&!i.value.value&&t,a=this._transitionablePaint._values[e].value.isDataDriven();this._transitionablePaint.setValue(e,t);var s=this._transitionablePaint._values[e].value.isDataDriven();return this._handleSpecialPaintPropertyUpdate(e),s||a||o},t.prototype._handleSpecialPaintPropertyUpdate=function(e){},t.prototype.isHidden=function(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility},t.prototype.updateTransitions=function(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)},t.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},t.prototype.recalculate=function(e){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e)),this.paint=this._transitioningPaint.possiblyEvaluate(e)},t.prototype.serialize=function(){var e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return"none"===this.visibility&&(e.layout=e.layout||{},e.layout.visibility="none"),g(e,function(e,t){return!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)})},t.prototype._validate=function(e,t,n,r,i){return(!i||!1!==i.validate)&&Zn(this,e.call(Un,{key:t,layerType:this.type,objectKey:n,value:r,styleSpec:se,style:{glyphs:!0,sprite:!0}}))},t.prototype.hasOffscreenPass=function(){return!1},t.prototype.resize=function(){},t.prototype.isStateDependent=function(){for(var e in this.paint._values){var t=this.paint.get(e);if(t instanceof wr&&Zt(t.property.specification)&&("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent)return!0}return!1},t}(ae),Or={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Ir=function(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Rr=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function jr(e,t){void 0===t&&(t=1);var n=0,r=0;return{members:e.map(function(e){var i,o=(i=e.type,Or[i].BYTES_PER_ELEMENT),a=n=Lr(n,Math.max(t,o)),s=e.components||1;return r=Math.max(r,o),n+=o*s,{name:e.name,type:e.type,components:s,offset:a}}),size:Lr(n,Math.max(r,t)),alignment:t}}function Lr(e,t){return Math.ceil(e/t)*t}Rr.serialize=function(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}},Rr.deserialize=function(e){var t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t},Rr.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Rr.prototype.clear=function(){this.length=0},Rr.prototype.resize=function(e){this.reserve(e),this.length=e},Rr.prototype.reserve=function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}},Rr.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var zr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)},t.prototype.emplace=function(e,t,n){var r=2*e;return this.int16[r+0]=t,this.int16[r+1]=n,e},t}(Rr);zr.prototype.bytesPerElement=4,Jn("StructArrayLayout2i4",zr);var Dr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)},t.prototype.emplace=function(e,t,n,r,i){var o=4*e;return this.int16[o+0]=t,this.int16[o+1]=n,this.int16[o+2]=r,this.int16[o+3]=i,e},t}(Rr);Dr.prototype.bytesPerElement=8,Jn("StructArrayLayout4i8",Dr);var Br=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,r,i,o)},t.prototype.emplace=function(e,t,n,r,i,o,a){var s=6*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,e},t}(Rr);Br.prototype.bytesPerElement=12,Jn("StructArrayLayout2i4i12",Br);var Nr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,i,o,a,s){var u=this.length;return this.resize(u+1),this.emplace(u,e,t,n,r,i,o,a,s)},t.prototype.emplace=function(e,t,n,r,i,o,a,s,u){var l=6*e,c=12*e;return this.int16[l+0]=t,this.int16[l+1]=n,this.int16[l+2]=r,this.int16[l+3]=i,this.uint8[c+8]=o,this.uint8[c+9]=a,this.uint8[c+10]=s,this.uint8[c+11]=u,e},t}(Rr);Nr.prototype.bytesPerElement=12,Jn("StructArrayLayout4i4ub12",Nr);var qr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,i,o,a,s){var u=this.length;return this.resize(u+1),this.emplace(u,e,t,n,r,i,o,a,s)},t.prototype.emplace=function(e,t,n,r,i,o,a,s,u){var l=8*e;return this.uint16[l+0]=t,this.uint16[l+1]=n,this.uint16[l+2]=r,this.uint16[l+3]=i,this.uint16[l+4]=o,this.uint16[l+5]=a,this.uint16[l+6]=s,this.uint16[l+7]=u,e},t}(Rr);qr.prototype.bytesPerElement=16,Jn("StructArrayLayout8ui16",qr);var Fr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,i,o,a,s){var u=this.length;return this.resize(u+1),this.emplace(u,e,t,n,r,i,o,a,s)},t.prototype.emplace=function(e,t,n,r,i,o,a,s,u){var l=8*e;return this.int16[l+0]=t,this.int16[l+1]=n,this.int16[l+2]=r,this.int16[l+3]=i,this.uint16[l+4]=o,this.uint16[l+5]=a,this.uint16[l+6]=s,this.uint16[l+7]=u,e},t}(Rr);Fr.prototype.bytesPerElement=16,Jn("StructArrayLayout4i4ui16",Fr);var Ur=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)},t.prototype.emplace=function(e,t,n,r){var i=3*e;return this.float32[i+0]=t,this.float32[i+1]=n,this.float32[i+2]=r,e},t}(Rr);Ur.prototype.bytesPerElement=12,Jn("StructArrayLayout3f12",Ur);var Vr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)},t.prototype.emplace=function(e,t){var n=1*e;return this.uint32[n+0]=t,e},t}(Rr);Vr.prototype.bytesPerElement=4,Jn("StructArrayLayout1ul4",Vr);var Wr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,i,o,a,s,u,l,c){var p=this.length;return this.resize(p+1),this.emplace(p,e,t,n,r,i,o,a,s,u,l,c)},t.prototype.emplace=function(e,t,n,r,i,o,a,s,u,l,c,p){var h=12*e,f=6*e;return this.int16[h+0]=t,this.int16[h+1]=n,this.int16[h+2]=r,this.int16[h+3]=i,this.int16[h+4]=o,this.int16[h+5]=a,this.uint32[f+3]=s,this.uint16[h+8]=u,this.uint16[h+9]=l,this.int16[h+10]=c,this.int16[h+11]=p,e},t}(Rr);Wr.prototype.bytesPerElement=24,Jn("StructArrayLayout6i1ul2ui2i24",Wr);var Gr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,r,i,o)},t.prototype.emplace=function(e,t,n,r,i,o,a){var s=6*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,e},t}(Rr);Gr.prototype.bytesPerElement=12,Jn("StructArrayLayout2i2i2i12",Gr);var Zr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)},t.prototype.emplace=function(e,t,n){var r=4*e;return this.uint8[r+0]=t,this.uint8[r+1]=n,e},t}(Rr);Zr.prototype.bytesPerElement=4,Jn("StructArrayLayout2ub4",Zr);var Hr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,i,o,a,s,u,l,c,p,h,f){var d=this.length;return this.resize(d+1),this.emplace(d,e,t,n,r,i,o,a,s,u,l,c,p,h,f)},t.prototype.emplace=function(e,t,n,r,i,o,a,s,u,l,c,p,h,f,d){var m=20*e,_=10*e,y=40*e;return this.int16[m+0]=t,this.int16[m+1]=n,this.uint16[m+2]=r,this.uint16[m+3]=i,this.uint32[_+2]=o,this.uint32[_+3]=a,this.uint32[_+4]=s,this.uint16[m+10]=u,this.uint16[m+11]=l,this.uint16[m+12]=c,this.float32[_+7]=p,this.float32[_+8]=h,this.uint8[y+36]=f,this.uint8[y+37]=d,e},t}(Rr);Hr.prototype.bytesPerElement=40,Jn("StructArrayLayout2i2ui3ul3ui2f2ub40",Hr);var Kr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,i,o,a,s,u,l,c,p,h,f){var d=this.length;return this.resize(d+1),this.emplace(d,e,t,n,r,i,o,a,s,u,l,c,p,h,f)},t.prototype.emplace=function(e,t,n,r,i,o,a,s,u,l,c,p,h,f,d){var m=16*e,_=8*e;return this.int16[m+0]=t,this.int16[m+1]=n,this.int16[m+2]=r,this.int16[m+3]=i,this.uint16[m+4]=o,this.uint16[m+5]=a,this.uint16[m+6]=s,this.uint16[m+7]=u,this.uint16[m+8]=l,this.uint16[m+9]=c,this.uint16[m+10]=p,this.uint16[m+11]=h,this.uint16[m+12]=f,this.uint32[_+7]=d,e},t}(Rr);Kr.prototype.bytesPerElement=32,Jn("StructArrayLayout4i9ui1ul32",Kr);var Yr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)},t.prototype.emplace=function(e,t){var n=1*e;return this.float32[n+0]=t,e},t}(Rr);Yr.prototype.bytesPerElement=4,Jn("StructArrayLayout1f4",Yr);var Xr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)},t.prototype.emplace=function(e,t,n,r){var i=3*e;return this.int16[i+0]=t,this.int16[i+1]=n,this.int16[i+2]=r,e},t}(Rr);Xr.prototype.bytesPerElement=6,Jn("StructArrayLayout3i6",Xr);var $r=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)},t.prototype.emplace=function(e,t,n,r){var i=2*e,o=4*e;return this.uint32[i+0]=t,this.uint16[o+2]=n,this.uint16[o+3]=r,e},t}(Rr);$r.prototype.bytesPerElement=8,Jn("StructArrayLayout1ul2ui8",$r);var Jr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)},t.prototype.emplace=function(e,t,n,r){var i=3*e;return this.uint16[i+0]=t,this.uint16[i+1]=n,this.uint16[i+2]=r,e},t}(Rr);Jr.prototype.bytesPerElement=6,Jn("StructArrayLayout3ui6",Jr);var Qr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)},t.prototype.emplace=function(e,t,n){var r=2*e;return this.uint16[r+0]=t,this.uint16[r+1]=n,e},t}(Rr);Qr.prototype.bytesPerElement=4,Jn("StructArrayLayout2ui4",Qr);var ei=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)},t.prototype.emplace=function(e,t){var n=1*e;return this.uint16[n+0]=t,e},t}(Rr);ei.prototype.bytesPerElement=2,Jn("StructArrayLayout1ui2",ei);var ti=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)},t.prototype.emplace=function(e,t,n){var r=2*e;return this.float32[r+0]=t,this.float32[r+1]=n,e},t}(Rr);ti.prototype.bytesPerElement=8,Jn("StructArrayLayout2f8",ti);var ni=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)},t.prototype.emplace=function(e,t,n,r,i){var o=4*e;return this.float32[o+0]=t,this.float32[o+1]=n,this.float32[o+2]=r,this.float32[o+3]=i,e},t}(Rr);ni.prototype.bytesPerElement=16,Jn("StructArrayLayout4f16",ni);var ri=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},radius:{configurable:!0},signedDistanceFromAnchor:{configurable:!0},anchorPoint:{configurable:!0}};return n.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorPointX.set=function(e){this._structArray.int16[this._pos2+0]=e},n.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorPointY.set=function(e){this._structArray.int16[this._pos2+1]=e},n.x1.get=function(){return this._structArray.int16[this._pos2+2]},n.x1.set=function(e){this._structArray.int16[this._pos2+2]=e},n.y1.get=function(){return this._structArray.int16[this._pos2+3]},n.y1.set=function(e){this._structArray.int16[this._pos2+3]=e},n.x2.get=function(){return this._structArray.int16[this._pos2+4]},n.x2.set=function(e){this._structArray.int16[this._pos2+4]=e},n.y2.get=function(){return this._structArray.int16[this._pos2+5]},n.y2.set=function(e){this._structArray.int16[this._pos2+5]=e},n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.featureIndex.set=function(e){this._structArray.uint32[this._pos4+3]=e},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.sourceLayerIndex.set=function(e){this._structArray.uint16[this._pos2+8]=e},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.bucketIndex.set=function(e){this._structArray.uint16[this._pos2+9]=e},n.radius.get=function(){return this._structArray.int16[this._pos2+10]},n.radius.set=function(e){this._structArray.int16[this._pos2+10]=e},n.signedDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+11]},n.signedDistanceFromAnchor.set=function(e){this._structArray.int16[this._pos2+11]=e},n.anchorPoint.get=function(){return new i(this.anchorPointX,this.anchorPointY)},Object.defineProperties(t.prototype,n),t}(Ir);ri.prototype.size=24;var ii=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e){return new ri(this,e)},t}(Wr);Jn("CollisionBoxArray",ii);var oi=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},hidden:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorX.set=function(e){this._structArray.int16[this._pos2+0]=e},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorY.set=function(e){this._structArray.int16[this._pos2+1]=e},n.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.glyphStartIndex.set=function(e){this._structArray.uint16[this._pos2+2]=e},n.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},n.numGlyphs.set=function(e){this._structArray.uint16[this._pos2+3]=e},n.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},n.vertexStartIndex.set=function(e){this._structArray.uint32[this._pos4+2]=e},n.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.lineStartIndex.set=function(e){this._structArray.uint32[this._pos4+3]=e},n.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},n.lineLength.set=function(e){this._structArray.uint32[this._pos4+4]=e},n.segment.get=function(){return this._structArray.uint16[this._pos2+10]},n.segment.set=function(e){this._structArray.uint16[this._pos2+10]=e},n.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},n.lowerSize.set=function(e){this._structArray.uint16[this._pos2+11]=e},n.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},n.upperSize.set=function(e){this._structArray.uint16[this._pos2+12]=e},n.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},n.lineOffsetX.set=function(e){this._structArray.float32[this._pos4+7]=e},n.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},n.lineOffsetY.set=function(e){this._structArray.float32[this._pos4+8]=e},n.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},n.writingMode.set=function(e){this._structArray.uint8[this._pos1+36]=e},n.hidden.get=function(){return this._structArray.uint8[this._pos1+37]},n.hidden.set=function(e){this._structArray.uint8[this._pos1+37]=e},Object.defineProperties(t.prototype,n),t}(Ir);oi.prototype.size=40;var ai=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e){return new oi(this,e)},t}(Hr);Jn("PlacedSymbolArray",ai);var si=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},horizontalPlacedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},crossTileID:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorX.set=function(e){this._structArray.int16[this._pos2+0]=e},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorY.set=function(e){this._structArray.int16[this._pos2+1]=e},n.horizontalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},n.horizontalPlacedTextSymbolIndex.set=function(e){this._structArray.int16[this._pos2+2]=e},n.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},n.verticalPlacedTextSymbolIndex.set=function(e){this._structArray.int16[this._pos2+3]=e},n.key.get=function(){return this._structArray.uint16[this._pos2+4]},n.key.set=function(e){this._structArray.uint16[this._pos2+4]=e},n.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+5]},n.textBoxStartIndex.set=function(e){this._structArray.uint16[this._pos2+5]=e},n.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+6]},n.textBoxEndIndex.set=function(e){this._structArray.uint16[this._pos2+6]=e},n.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+7]},n.iconBoxStartIndex.set=function(e){this._structArray.uint16[this._pos2+7]=e},n.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.iconBoxEndIndex.set=function(e){this._structArray.uint16[this._pos2+8]=e},n.featureIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.featureIndex.set=function(e){this._structArray.uint16[this._pos2+9]=e},n.numGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+10]},n.numGlyphVertices.set=function(e){this._structArray.uint16[this._pos2+10]=e},n.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+11]},n.numVerticalGlyphVertices.set=function(e){this._structArray.uint16[this._pos2+11]=e},n.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+12]},n.numIconVertices.set=function(e){this._structArray.uint16[this._pos2+12]=e},n.crossTileID.get=function(){return this._structArray.uint32[this._pos4+7]},n.crossTileID.set=function(e){this._structArray.uint32[this._pos4+7]=e},Object.defineProperties(t.prototype,n),t}(Ir);si.prototype.size=32;var ui=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e){return new si(this,e)},t}(Kr);Jn("SymbolInstanceArray",ui);var li=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={offsetX:{configurable:!0}};return n.offsetX.get=function(){return this._structArray.float32[this._pos4+0]},n.offsetX.set=function(e){this._structArray.float32[this._pos4+0]=e},Object.defineProperties(t.prototype,n),t}(Ir);li.prototype.size=4;var ci=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getoffsetX=function(e){return this.float32[1*e+0]},t.prototype.get=function(e){return new li(this,e)},t}(Yr);Jn("GlyphOffsetArray",ci);var pi=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={x:{configurable:!0},y:{configurable:!0},tileUnitDistanceFromAnchor:{configurable:!0}};return n.x.get=function(){return this._structArray.int16[this._pos2+0]},n.x.set=function(e){this._structArray.int16[this._pos2+0]=e},n.y.get=function(){return this._structArray.int16[this._pos2+1]},n.y.set=function(e){this._structArray.int16[this._pos2+1]=e},n.tileUnitDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+2]},n.tileUnitDistanceFromAnchor.set=function(e){this._structArray.int16[this._pos2+2]=e},Object.defineProperties(t.prototype,n),t}(Ir);pi.prototype.size=6;var hi=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getx=function(e){return this.int16[3*e+0]},t.prototype.gety=function(e){return this.int16[3*e+1]},t.prototype.gettileUnitDistanceFromAnchor=function(e){return this.int16[3*e+2]},t.prototype.get=function(e){return new pi(this,e)},t}(Xr);Jn("SymbolLineVertexArray",hi);var fi=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},n.featureIndex.set=function(e){this._structArray.uint32[this._pos4+0]=e},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.sourceLayerIndex.set=function(e){this._structArray.uint16[this._pos2+2]=e},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},n.bucketIndex.set=function(e){this._structArray.uint16[this._pos2+3]=e},Object.defineProperties(t.prototype,n),t}(Ir);fi.prototype.size=8;var di=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e){return new fi(this,e)},t}($r);Jn("FeatureIndexArray",di);var mi=jr([{name:"a_pos",components:2,type:"Int16"}],4),_i=mi.members,yi=(mi.size,mi.alignment,function(e){void 0===e&&(e=[]),this.segments=e});yi.prototype.prepareSegment=function(e,t,n){var r=this.segments[this.segments.length-1];return e>yi.MAX_VERTEX_ARRAY_LENGTH&&w("Max vertices per segment is "+yi.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+e),(!r||r.vertexLength+e>yi.MAX_VERTEX_ARRAY_LENGTH)&&(r={vertexOffset:t.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},this.segments.push(r)),r},yi.prototype.get=function(){return this.segments},yi.prototype.destroy=function(){for(var e=0,t=this.segments;e<t.length;e+=1){var n=t[e];for(var r in n.vaos)n.vaos[r].destroy()}},yi.simpleSegment=function(e,t,n,r){return new yi([{vertexOffset:e,primitiveOffset:t,vertexLength:n,primitiveLength:r,vaos:{}}])},yi.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Jn("SegmentVector",yi);var vi=function(e,t){return 256*(e=l(Math.floor(e),0,255))+l(Math.floor(t),0,255)},gi=function(){this.ids=[],this.positions=[],this.indexed=!1};function bi(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}gi.prototype.add=function(e,t,n,r){this.ids.push(e),this.positions.push(t,n,r)},gi.prototype.getPositions=function(e){for(var t=0,n=this.ids.length-1;t<n;){var r=t+n>>1;this.ids[r]>=e?n=r:t=r+1}for(var i=[];this.ids[t]===e;){var o=this.positions[3*t],a=this.positions[3*t+1],s=this.positions[3*t+2];i.push({index:o,start:a,end:s}),t++}return i},gi.serialize=function(e,t){var n=new Float64Array(e.ids),r=new Uint32Array(e.positions);return function e(t,n,r,i){if(!(r>=i)){for(var o=t[r+i>>1],a=r-1,s=i+1;;){do{a++}while(t[a]<o);do{s--}while(t[s]>o);if(a>=s)break;bi(t,a,s),bi(n,3*a,3*s),bi(n,3*a+1,3*s+1),bi(n,3*a+2,3*s+2)}e(t,n,r,s),e(t,n,s+1,i)}}(n,r,0,n.length-1),t.push(n.buffer,r.buffer),{ids:n,positions:r}},gi.deserialize=function(e){var t=new gi;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t},Jn("FeaturePositionMap",gi);var xi=function(e,t){this.gl=e.gl,this.location=t},wi=function(e){function t(t,n){e.call(this,t,n),this.current=0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.set=function(e){this.current!==e&&(this.current=e,this.gl.uniform1i(this.location,e))},t}(xi),Ei=function(e){function t(t,n){e.call(this,t,n),this.current=0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.set=function(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))},t}(xi),Ti=function(e){function t(t,n){e.call(this,t,n),this.current=[0,0]}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.set=function(e){e[0]===this.current[0]&&e[1]===this.current[1]||(this.current=e,this.gl.uniform2f(this.location,e[0],e[1]))},t}(xi),ki=function(e){function t(t,n){e.call(this,t,n),this.current=[0,0,0]}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.set=function(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]||(this.current=e,this.gl.uniform3f(this.location,e[0],e[1],e[2]))},t}(xi),Ci=function(e){function t(t,n){e.call(this,t,n),this.current=[0,0,0,0]}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.set=function(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))},t}(xi),Mi=function(e){function t(t,n){e.call(this,t,n),this.current=Ae.transparent}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.set=function(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))},t}(xi),Pi=new Float32Array(16),Ai=function(e){function t(t,n){e.call(this,t,n),this.current=Pi}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.set=function(e){if(e[12]!==this.current[12]||e[0]!==this.current[0])return this.current=e,void this.gl.uniformMatrix4fv(this.location,!1,e);for(var t=1;t<16;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix4fv(this.location,!1,e);break}},t}(xi);function Si(e){return[vi(255*e.r,255*e.g),vi(255*e.b,255*e.a)]}var Oi=function(e,t,n){this.value=e,this.names=t,this.uniformNames=this.names.map(function(e){return"u_"+e}),this.type=n,this.maxValue=-1/0};Oi.prototype.defines=function(){return this.names.map(function(e){return"#define HAS_UNIFORM_u_"+e})},Oi.prototype.setConstantPatternPositions=function(){},Oi.prototype.populatePaintArray=function(){},Oi.prototype.updatePaintArray=function(){},Oi.prototype.upload=function(){},Oi.prototype.destroy=function(){},Oi.prototype.setUniforms=function(e,t,n,r){t.set(r.constantOr(this.value))},Oi.prototype.getBinding=function(e,t){return"color"===this.type?new Mi(e,t):new Ei(e,t)},Oi.serialize=function(e){var t=e.value,n=e.names,r=e.type;return{value:er(t),names:n,type:r}},Oi.deserialize=function(e){var t=e.value,n=e.names,r=e.type;return new Oi(tr(t),n,r)};var Ii=function(e,t,n){this.value=e,this.names=t,this.uniformNames=this.names.map(function(e){return"u_"+e}),this.type=n,this.maxValue=-1/0,this.patternPositions={patternTo:null,patternFrom:null}};Ii.prototype.defines=function(){return this.names.map(function(e){return"#define HAS_UNIFORM_u_"+e})},Ii.prototype.populatePaintArray=function(){},Ii.prototype.updatePaintArray=function(){},Ii.prototype.upload=function(){},Ii.prototype.destroy=function(){},Ii.prototype.setConstantPatternPositions=function(e,t){this.patternPositions.patternTo=e.tlbr,this.patternPositions.patternFrom=t.tlbr},Ii.prototype.setUniforms=function(e,t,n,r,i){var o=this.patternPositions;"u_pattern_to"===i&&o.patternTo&&t.set(o.patternTo),"u_pattern_from"===i&&o.patternFrom&&t.set(o.patternFrom)},Ii.prototype.getBinding=function(e,t){return new Ci(e,t)};var Ri=function(e,t,n,r){this.expression=e,this.names=t,this.type=n,this.uniformNames=this.names.map(function(e){return"a_"+e}),this.maxValue=-1/0,this.paintVertexAttributes=t.map(function(e){return{name:"a_"+e,type:"Float32",components:"color"===n?2:1,offset:0}}),this.paintVertexArray=new r};Ri.prototype.defines=function(){return[]},Ri.prototype.setConstantPatternPositions=function(){},Ri.prototype.populatePaintArray=function(e,t){var n=this.paintVertexArray,r=n.length;n.reserve(e);var i=this.expression.evaluate(new mr(0),t,{});if("color"===this.type)for(var o=Si(i),a=r;a<e;a++)n.emplaceBack(o[0],o[1]);else{for(var s=r;s<e;s++)n.emplaceBack(i);this.maxValue=Math.max(this.maxValue,i)}},Ri.prototype.updatePaintArray=function(e,t,n,r){var i=this.paintVertexArray,o=this.expression.evaluate({zoom:0},n,r);if("color"===this.type)for(var a=Si(o),s=e;s<t;s++)i.emplace(s,a[0],a[1]);else{for(var u=e;u<t;u++)i.emplace(u,o);this.maxValue=Math.max(this.maxValue,o)}},Ri.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ri.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Ri.prototype.setUniforms=function(e,t){t.set(0)},Ri.prototype.getBinding=function(e,t){return new Ei(e,t)};var ji=function(e,t,n,r,i,o){this.expression=e,this.names=t,this.uniformNames=this.names.map(function(e){return"a_"+e+"_t"}),this.type=n,this.useIntegerZoom=r,this.zoom=i,this.maxValue=-1/0;var a=o;this.paintVertexAttributes=t.map(function(e){return{name:"a_"+e,type:"Float32",components:"color"===n?4:2,offset:0}}),this.paintVertexArray=new a};ji.prototype.defines=function(){return[]},ji.prototype.setConstantPatternPositions=function(){},ji.prototype.populatePaintArray=function(e,t){var n=this.paintVertexArray,r=n.length;n.reserve(e);var i=this.expression.evaluate(new mr(this.zoom),t,{}),o=this.expression.evaluate(new mr(this.zoom+1),t,{});if("color"===this.type)for(var a=Si(i),s=Si(o),u=r;u<e;u++)n.emplaceBack(a[0],a[1],s[0],s[1]);else{for(var l=r;l<e;l++)n.emplaceBack(i,o);this.maxValue=Math.max(this.maxValue,i,o)}},ji.prototype.updatePaintArray=function(e,t,n,r){var i=this.paintVertexArray,o=this.expression.evaluate({zoom:this.zoom},n,r),a=this.expression.evaluate({zoom:this.zoom+1},n,r);if("color"===this.type)for(var s=Si(o),u=Si(a),l=e;l<t;l++)i.emplace(l,s[0],s[1],u[0],u[1]);else{for(var c=e;c<t;c++)i.emplace(c,o,a);this.maxValue=Math.max(this.maxValue,o,a)}},ji.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ji.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},ji.prototype.interpolationFactor=function(e){return this.useIntegerZoom?this.expression.interpolationFactor(Math.floor(e),this.zoom,this.zoom+1):this.expression.interpolationFactor(e,this.zoom,this.zoom+1)},ji.prototype.setUniforms=function(e,t,n){t.set(this.interpolationFactor(n.zoom))},ji.prototype.getBinding=function(e,t){return new Ei(e,t)};var Li=function(e,t,n,r,i,o,a){this.expression=e,this.names=t,this.type=n,this.uniformNames=this.names.map(function(e){return"a_"+e+"_t"}),this.useIntegerZoom=r,this.zoom=i,this.maxValue=-1/0,this.layerId=a,this.paintVertexAttributes=t.map(function(e){return{name:"a_"+e,type:"Uint16",components:4,offset:0}}),this.zoomInPaintVertexArray=new o,this.zoomOutPaintVertexArray=new o};Li.prototype.defines=function(){return[]},Li.prototype.setConstantPatternPositions=function(){},Li.prototype.populatePaintArray=function(e,t,n){var r=this.zoomInPaintVertexArray,i=this.zoomOutPaintVertexArray,o=this.layerId,a=r.length;if(r.reserve(e),i.reserve(e),n&&t.patterns&&t.patterns[o]){var s=t.patterns[o],u=s.min,l=s.mid,c=s.max,p=n[u],h=n[l],f=n[c];if(!p||!h||!f)return;for(var d=a;d<e;d++)r.emplaceBack(h.tl[0],h.tl[1],h.br[0],h.br[1],p.tl[0],p.tl[1],p.br[0],p.br[1]),i.emplaceBack(h.tl[0],h.tl[1],h.br[0],h.br[1],f.tl[0],f.tl[1],f.br[0],f.br[1])}},Li.prototype.updatePaintArray=function(e,t,n,r,i){var o=this.zoomInPaintVertexArray,a=this.zoomOutPaintVertexArray,s=this.layerId;if(i&&n.patterns&&n.patterns[s]){var u=n.patterns[s],l=u.min,c=u.mid,p=u.max,h=i[l],f=i[c],d=i[p];if(!h||!f||!d)return;for(var m=e;m<t;m++)o.emplace(m,f.tl[0],f.tl[1],f.br[0],f.br[1],h.tl[0],h.tl[1],h.br[0],h.br[1]),a.emplace(m,f.tl[0],f.tl[1],f.br[0],f.br[1],d.tl[0],d.tl[1],d.br[0],d.br[1])}},Li.prototype.upload=function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Li.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()},Li.prototype.setUniforms=function(e,t){t.set(0)},Li.prototype.getBinding=function(e,t){return new Ei(e,t)};var zi=function(){this.binders={},this.cacheKey="",this._buffers=[],this._featureMap=new gi,this._bufferOffset=0};zi.createDynamic=function(e,t,n){var r=new zi,i=[];for(var o in e.paint._values)if(n(o)){var a=e.paint.get(o);if(a instanceof wr&&Zt(a.property.specification)){var s=Bi(o,e.type),u=a.property.specification.type,l=a.property.useIntegerZoom;if("cross-faded"===a.property.specification["property-type"]||"cross-faded-data-driven"===a.property.specification["property-type"])if("constant"===a.value.kind)r.binders[o]=new Ii(a.value.value,s,u),i.push("/u_"+o);else{var c=Ni(o,u,"source");r.binders[o]=new Li(a.value,s,u,l,t,c,e.id),i.push("/a_"+o)}else if("constant"===a.value.kind)r.binders[o]=new Oi(a.value.value,s,u),i.push("/u_"+o);else if("source"===a.value.kind){var p=Ni(o,u,"source");r.binders[o]=new Ri(a.value,s,u,p),i.push("/a_"+o)}else{var h=Ni(o,u,"composite");r.binders[o]=new ji(a.value,s,u,l,t,h),i.push("/z_"+o)}}}return r.cacheKey=i.sort().join(""),r},zi.prototype.populatePaintArrays=function(e,t,n,r){for(var i in this.binders)this.binders[i].populatePaintArray(e,t,r);void 0!==t.id&&this._featureMap.add(+t.id,n,this._bufferOffset,e),this._bufferOffset=e},zi.prototype.setConstantPatternPositions=function(e,t){for(var n in this.binders)this.binders[n].setConstantPatternPositions(e,t)},zi.prototype.updatePaintArrays=function(e,t,n,r){var i=!1;for(var o in e)for(var a=0,s=this._featureMap.getPositions(+o);a<s.length;a+=1){var u=s[a],l=t.feature(u.index);for(var c in this.binders){var p=this.binders[c];if(!(p instanceof Oi||p instanceof Ii)&&!0===p.expression.isStateDependent){var h=n.paint.get(c);p.expression=h.value,p.updatePaintArray(u.start,u.end,l,e[o],r),i=!0}}}return i},zi.prototype.defines=function(){var e=[];for(var t in this.binders)e.push.apply(e,this.binders[t].defines());return e},zi.prototype.getPaintVertexBuffers=function(){return this._buffers},zi.prototype.getUniforms=function(e,t){var n={};for(var r in this.binders)for(var i=this.binders[r],o=0,a=i.uniformNames;o<a.length;o+=1){var s=a[o];n[s]=i.getBinding(e,t[s])}return n},zi.prototype.setUniforms=function(e,t,n,r){for(var i in this.binders)for(var o=this.binders[i],a=0,s=o.uniformNames;a<s.length;a+=1){var u=s[a];o.setUniforms(e,t[u],r,n.get(i),u)}},zi.prototype.updatePatternPaintBuffers=function(e){var t=[];for(var n in this.binders){var r=this.binders[n];if(r instanceof Li){var i=2===e.fromScale?r.zoomInPaintVertexBuffer:r.zoomOutPaintVertexBuffer;i&&t.push(i)}else(r instanceof Ri||r instanceof ji)&&r.paintVertexBuffer&&t.push(r.paintVertexBuffer)}this._buffers=t},zi.prototype.upload=function(e){for(var t in this.binders)this.binders[t].upload(e);var n=[];for(var r in this.binders){var i=this.binders[r];(i instanceof Ri||i instanceof ji)&&i.paintVertexBuffer&&n.push(i.paintVertexBuffer)}this._buffers=n},zi.prototype.destroy=function(){for(var e in this.binders)this.binders[e].destroy()};var Di=function(e,t,n,r){void 0===r&&(r=function(){return!0}),this.programConfigurations={};for(var i=0,o=t;i<o.length;i+=1){var a=o[i];this.programConfigurations[a.id]=zi.createDynamic(a,n,r),this.programConfigurations[a.id].layoutAttributes=e}this.needsUpload=!1};function Bi(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from"],"fill-pattern":["pattern_to","pattern_from"],"fill-extrusion-pattern":["pattern_to","pattern_from"]}[e]||[e.replace(t+"-","").replace(/-/g,"_")]}function Ni(e,t,n){var r={color:{source:ti,composite:ni},number:{source:Yr,composite:ti}},i=function(e){return{"line-pattern":{source:qr,composite:qr},"fill-pattern":{source:qr,composite:qr},"fill-extrusion-pattern":{source:qr,composite:qr}}[e]}(e);return i&&i[n]||r[t][n]}Di.prototype.populatePaintArrays=function(e,t,n,r){for(var i in this.programConfigurations)this.programConfigurations[i].populatePaintArrays(e,t,n,r);this.needsUpload=!0},Di.prototype.updatePaintArrays=function(e,t,n,r){for(var i=0,o=n;i<o.length;i+=1){var a=o[i];this.needsUpload=this.programConfigurations[a.id].updatePaintArrays(e,t,a,r)||this.needsUpload}},Di.prototype.get=function(e){return this.programConfigurations[e]},Di.prototype.upload=function(e){if(this.needsUpload){for(var t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}},Di.prototype.destroy=function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()},Jn("ConstantBinder",Oi),Jn("CrossFadedConstantBinder",Ii),Jn("SourceExpressionBinder",Ri),Jn("CrossFadedCompositeBinder",Li),Jn("CompositeExpressionBinder",ji),Jn("ProgramConfiguration",zi,{omit:["_buffers"]}),Jn("ProgramConfigurationSet",Di);var qi=8192,Fi={min:-1*Math.pow(2,15),max:Math.pow(2,15)-1};function Ui(e){for(var t=qi/e.extent,n=e.loadGeometry(),r=0;r<n.length;r++)for(var i=n[r],o=0;o<i.length;o++){var a=i[o];a.x=Math.round(a.x*t),a.y=Math.round(a.y*t),(a.x<Fi.min||a.x>Fi.max||a.y<Fi.min||a.y>Fi.max)&&w("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return n}function Vi(e,t,n,r,i){e.emplaceBack(2*t+(r+1)/2,2*n+(i+1)/2)}var Wi=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new zr,this.indexArray=new Jr,this.segments=new yi,this.programConfigurations=new Di(_i,e.layers,e.zoom)};function Gi(e,t,n){for(var r=0;r<e.length;r++){var i=e[r];if(eo(i,t))return!0;if($i(t,i,n))return!0}return!1}function Zi(e,t){if(1===e.length&&1===e[0].length)return Qi(t,e[0][0]);for(var n=0;n<t.length;n++)for(var r=t[n],i=0;i<r.length;i++)if(Qi(e,r[i]))return!0;for(var o=0;o<e.length;o++){for(var a=e[o],s=0;s<a.length;s++)if(Qi(t,a[s]))return!0;for(var u=0;u<t.length;u++)if(Yi(a,t[u]))return!0}return!1}function Hi(e,t,n){for(var r=0;r<t.length;r++)for(var i=t[r],o=0;o<e.length;o++){var a=e[o];if(a.length>=3)for(var s=0;s<i.length;s++)if(eo(a,i[s]))return!0;if(Ki(a,i,n))return!0}return!1}function Ki(e,t,n){if(e.length>1){if(Yi(e,t))return!0;for(var r=0;r<t.length;r++)if($i(t[r],e,n))return!0}for(var i=0;i<e.length;i++)if($i(e[i],t,n))return!0;return!1}function Yi(e,t){if(0===e.length||0===t.length)return!1;for(var n=0;n<e.length-1;n++)for(var r=e[n],i=e[n+1],o=0;o<t.length-1;o++)if(Xi(r,i,t[o],t[o+1]))return!0;return!1}function Xi(e,t,n,r){return E(e,n,r)!==E(t,n,r)&&E(e,t,n)!==E(e,t,r)}function $i(e,t,n){var r=n*n;if(1===t.length)return e.distSqr(t[0])<r;for(var i=1;i<t.length;i++)if(Ji(e,t[i-1],t[i])<r)return!0;return!1}function Ji(e,t,n){var r=t.distSqr(n);if(0===r)return e.distSqr(t);var i=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/r;return i<0?e.distSqr(t):i>1?e.distSqr(n):e.distSqr(n.sub(t)._mult(i)._add(t))}function Qi(e,t){for(var n,r,i,o=!1,a=0;a<e.length;a++)for(var s=0,u=(n=e[a]).length-1;s<n.length;u=s++)r=n[s],i=n[u],r.y>t.y!=i.y>t.y&&t.x<(i.x-r.x)*(t.y-r.y)/(i.y-r.y)+r.x&&(o=!o);return o}function eo(e,t){for(var n=!1,r=0,i=e.length-1;r<e.length;i=r++){var o=e[r],a=e[i];o.y>t.y!=a.y>t.y&&t.x<(a.x-o.x)*(t.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}function to(e,t,n){var r=t.paint.get(e).value;return"constant"===r.kind?r.value:n.programConfigurations.get(t.id).binders[e].maxValue}function no(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function ro(e,t,n,r,o){if(!t[0]&&!t[1])return e;var a=i.convert(t);"viewport"===n&&a._rotate(-r);for(var s=[],u=0;u<e.length;u++){for(var l=e[u],c=[],p=0;p<l.length;p++)c.push(l[p].sub(a._mult(o)));s.push(c)}return s}Wi.prototype.populate=function(e,t){for(var n=0,r=e;n<r.length;n+=1){var i=r[n],o=i.feature,a=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new mr(this.zoom),o)){var u=Ui(o);this.addFeature(o,u,a),t.featureIndex.insert(o,u,a,s,this.index)}}},Wi.prototype.update=function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},Wi.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Wi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Wi.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,_i),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Wi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Wi.prototype.addFeature=function(e,t,n){for(var r=0,i=t;r<i.length;r+=1)for(var o=0,a=i[r];o<a.length;o+=1){var s=a[o],u=s.x,l=s.y;if(!(u<0||u>=qi||l<0||l>=qi)){var c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),p=c.vertexLength;Vi(this.layoutVertexArray,u,l,-1,-1),Vi(this.layoutVertexArray,u,l,1,-1),Vi(this.layoutVertexArray,u,l,1,1),Vi(this.layoutVertexArray,u,l,-1,1),this.indexArray.emplaceBack(p,p+1,p+2),this.indexArray.emplaceBack(p,p+3,p+2),c.vertexLength+=4,c.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,{})},Jn("CircleBucket",Wi,{omit:["layers"]});var io={paint:new Ar({"circle-radius":new kr(se.paint_circle["circle-radius"]),"circle-color":new kr(se.paint_circle["circle-color"]),"circle-blur":new kr(se.paint_circle["circle-blur"]),"circle-opacity":new kr(se.paint_circle["circle-opacity"]),"circle-translate":new Tr(se.paint_circle["circle-translate"]),"circle-translate-anchor":new Tr(se.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Tr(se.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Tr(se.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new kr(se.paint_circle["circle-stroke-width"]),"circle-stroke-color":new kr(se.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new kr(se.paint_circle["circle-stroke-opacity"])})},oo="undefined"!=typeof Float32Array?Float32Array:Array;function ao(){var e=new oo(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function so(){var e=new oo(3);return e[0]=0,e[1]=0,e[2]=0,e}function uo(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}function lo(e,t,n){var r=new oo(3);return r[0]=e,r[1]=t,r[2]=n,r}Math.PI;var co,po=uo,ho=(co=so(),function(e,t,n,r,i,o){var a,s;for(t||(t=3),n||(n=0),s=r?Math.min(r*t+n,e.length):e.length,a=n;a<s;a+=t)co[0]=e[a],co[1]=e[a+1],co[2]=e[a+2],i(co,co,o),e[a]=co[0],e[a+1]=co[1],e[a+2]=co[2];return e});function fo(){var e=new oo(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}function mo(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),e[0]=n*a,e[1]=r*a,e[2]=i*a,e[3]=o*a),e}function _o(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,e}var yo=function(){var e=fo();return function(t,n,r,i,o,a){var s,u;for(n||(n=4),r||(r=0),u=i?Math.min(i*n+r,t.length):t.length,s=r;s<u;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],o(e,e,a),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2],t[s+3]=e[3];return t}}();function vo(){var e=new oo(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}so(),lo(1,0,0),lo(0,1,0),vo(),vo(),ao(),function(){var e;(e=new oo(2))[0]=0,e[1]=0}();var go=function(e){function t(t){e.call(this,t,io)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createBucket=function(e){return new Wi(e)},t.prototype.queryRadius=function(e){var t=e;return to("circle-radius",this,t)+to("circle-stroke-width",this,t)+no(this.paint.get("circle-translate"))},t.prototype.queryIntersectsFeature=function(e,t,n,r,i,o,a,s){for(var u=ro(e,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,a),l=this.paint.get("circle-radius").evaluate(t,n)+this.paint.get("circle-stroke-width").evaluate(t,n),c="map"===this.paint.get("circle-pitch-alignment"),p=c?u:function(e,t,n){return u.map(function(e){return e.map(function(e){return bo(e,t,n)})})}(0,s,o),h=c?l*a:l,f=0,d=r;f<d.length;f+=1)for(var m=0,_=d[f];m<_.length;m+=1){var y=_[m],v=c?y:bo(y,s,o),g=h,b=_o([],[y.x,y.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?g*=b[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(g*=o.cameraToCenterDistance/b[3]),Gi(p,v,g))return!0}return!1},t}(Sr);function bo(e,t,n){var r=_o([],[e.x,e.y,0,1],t);return new i((r[0]/r[3]+1)*n.width*.5,(r[1]/r[3]+1)*n.height*.5)}var xo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Wi);function wo(e,t,n,r){var i=t.width,o=t.height;if(r){if(r.length!==i*o*n)throw new RangeError("mismatched image size")}else r=new Uint8Array(i*o*n);return e.width=i,e.height=o,e.data=r,e}function Eo(e,t,n){var r=t.width,i=t.height;if(r!==e.width||i!==e.height){var o=wo({},{width:r,height:i},n);To(e,o,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,r),height:Math.min(e.height,i)},n),e.width=r,e.height=i,e.data=o.data}}function To(e,t,n,r,i,o){if(0===i.width||0===i.height)return t;if(i.width>e.width||i.height>e.height||n.x>e.width-i.width||n.y>e.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>t.width||i.height>t.height||r.x>t.width-i.width||r.y>t.height-i.height)throw new RangeError("out of range destination coordinates for image copy");for(var a=e.data,s=t.data,u=0;u<i.height;u++)for(var l=((n.y+u)*e.width+n.x)*o,c=((r.y+u)*t.width+r.x)*o,p=0;p<i.width*o;p++)s[c+p]=a[l+p];return t}Jn("HeatmapBucket",xo,{omit:["layers"]});var ko=function(e,t){wo(this,e,1,t)};ko.prototype.resize=function(e){Eo(this,e,1)},ko.prototype.clone=function(){return new ko({width:this.width,height:this.height},new Uint8Array(this.data))},ko.copy=function(e,t,n,r,i){To(e,t,n,r,i,1)};var Co=function(e,t){wo(this,e,4,t)};Co.prototype.resize=function(e){Eo(this,e,4)},Co.prototype.clone=function(){return new Co({width:this.width,height:this.height},new Uint8Array(this.data))},Co.copy=function(e,t,n,r,i){To(e,t,n,r,i,4)},Jn("AlphaImage",ko),Jn("RGBAImage",Co);var Mo={paint:new Ar({"heatmap-radius":new kr(se.paint_heatmap["heatmap-radius"]),"heatmap-weight":new kr(se.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Tr(se.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Pr(se.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Tr(se.paint_heatmap["heatmap-opacity"])})};function Po(e,t){for(var n=new Uint8Array(1024),r={},i=0,o=0;i<256;i++,o+=4){r[t]=i/255;var a=e.evaluate(r);n[o+0]=Math.floor(255*a.r/a.a),n[o+1]=Math.floor(255*a.g/a.a),n[o+2]=Math.floor(255*a.b/a.a),n[o+3]=Math.floor(255*a.a)}return new Co({width:256,height:1},n)}var Ao=function(e){function t(t){e.call(this,t,Mo),this._updateColorRamp()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createBucket=function(e){return new xo(e)},t.prototype._handleSpecialPaintPropertyUpdate=function(e){"heatmap-color"===e&&this._updateColorRamp()},t.prototype._updateColorRamp=function(){var e=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=Po(e,"heatmapDensity"),this.colorRampTexture=null},t.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},t}(Sr),So={paint:new Ar({"hillshade-illumination-direction":new Tr(se.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Tr(se.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Tr(se.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Tr(se.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Tr(se.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Tr(se.paint_hillshade["hillshade-accent-color"])})},Oo=function(e){function t(t){e.call(this,t,So)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},t}(Sr),Io=jr([{name:"a_pos",components:2,type:"Int16"}],4),Ro=Io.members,jo=(Io.size,Io.alignment,zo),Lo=zo;function zo(e,t,n){n=n||2;var r,i,o,a,s,u,l,c=t&&t.length,p=c?t[0]*n:e.length,h=Do(e,0,p,n,!0),f=[];if(!h)return f;if(c&&(h=function(e,t,n,r){var i,o,a,s=[];for(i=0,o=t.length;i<o;i++)(a=Do(e,t[i]*r,i<o-1?t[i+1]*r:e.length,r,!1))===a.next&&(a.steiner=!0),s.push(Ho(a));for(s.sort(Wo),i=0;i<s.length;i++)Go(s[i],n),n=Bo(n,n.next);return n}(e,t,h,n)),e.length>80*n){r=o=e[0],i=a=e[1];for(var d=n;d<p;d+=n)(s=e[d])<r&&(r=s),(u=e[d+1])<i&&(i=u),s>o&&(o=s),u>a&&(a=u);l=0!==(l=Math.max(o-r,a-i))?1/l:0}return No(h,f,n,r,i,l),f}function Do(e,t,n,r,i){var o,a;if(i===ia(e,t,n,r)>0)for(o=t;o<n;o+=r)a=ta(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=ta(o,e[o],e[o+1],a);return a&&$o(a,a.next)&&(na(a),a=a.next),a}function Bo(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!$o(r,r.next)&&0!==Xo(r.prev,r,r.next))r=r.next;else{if(na(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function No(e,t,n,r,i,o,a){if(e){!a&&o&&function(e,t,n,r){var i=e;do{null===i.z&&(i.z=Zo(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,a,s,u,l=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<l&&(s++,r=r.nextZ);t++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1)}(i)}(e,r,i,o);for(var s,u,l=e;e.prev!==e.next;)if(s=e.prev,u=e.next,o?Fo(e,r,i,o):qo(e))t.push(s.i/n),t.push(e.i/n),t.push(u.i/n),na(e),e=u.next,l=u.next;else if((e=u)===l){a?1===a?No(e=Uo(e,t,n),t,n,r,i,o,2):2===a&&Vo(e,t,n,r,i,o):No(Bo(e),t,n,r,i,o,1);break}}}function qo(e){var t=e.prev,n=e,r=e.next;if(Xo(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(Ko(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Xo(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Fo(e,t,n,r){var i=e.prev,o=e,a=e.next;if(Xo(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,l=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,p=Zo(s,u,t,n,r),h=Zo(l,c,t,n,r),f=e.prevZ,d=e.nextZ;f&&f.z>=p&&d&&d.z<=h;){if(f!==e.prev&&f!==e.next&&Ko(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&Xo(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,d!==e.prev&&d!==e.next&&Ko(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Xo(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;f&&f.z>=p;){if(f!==e.prev&&f!==e.next&&Ko(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&Xo(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;d&&d.z<=h;){if(d!==e.prev&&d!==e.next&&Ko(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Xo(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function Uo(e,t,n){var r=e;do{var i=r.prev,o=r.next.next;!$o(i,o)&&Jo(i,r,r.next,o)&&Qo(i,o)&&Qo(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),na(r),na(r.next),r=e=o),r=r.next}while(r!==e);return r}function Vo(e,t,n,r,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&Yo(a,s)){var u=ea(a,s);return a=Bo(a,a.next),u=Bo(u,u.next),No(a,t,n,r,i,o),void No(u,t,n,r,i,o)}s=s.next}a=a.next}while(a!==e)}function Wo(e,t){return e.x-t.x}function Go(e,t){if(t=function(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===a)return n.prev;var u,l=n,c=n.x,p=n.y,h=1/0;for(r=n.next;r!==l;)i>=r.x&&r.x>=c&&i!==r.x&&Ko(o<p?i:a,o,c,p,o<p?a:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<h||u===h&&r.x>n.x)&&Qo(r,e)&&(n=r,h=u),r=r.next;return n}(e,t)){var n=ea(t,e);Bo(n,n.next)}}function Zo(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Ho(e){var t=e,n=e;do{t.x<n.x&&(n=t),t=t.next}while(t!==e);return n}function Ko(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function Yo(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Jo(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&Qo(e,t)&&Qo(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)}function Xo(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function $o(e,t){return e.x===t.x&&e.y===t.y}function Jo(e,t,n,r){return!!($o(e,t)&&$o(n,r)||$o(e,r)&&$o(n,t))||Xo(e,t,n)>0!=Xo(e,t,r)>0&&Xo(n,r,e)>0!=Xo(n,r,t)>0}function Qo(e,t){return Xo(e.prev,e,e.next)<0?Xo(e,t,e.next)>=0&&Xo(e,e.prev,t)>=0:Xo(e,t,e.prev)<0||Xo(e,e.next,t)<0}function ea(e,t){var n=new ra(e.i,e.x,e.y),r=new ra(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function ta(e,t,n,r){var i=new ra(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function na(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function ra(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ia(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}zo.deviation=function(e,t,n,r){var i=t&&t.length,o=i?t[0]*n:e.length,a=Math.abs(ia(e,0,o,n));if(i)for(var s=0,u=t.length;s<u;s++){var l=t[s]*n,c=s<u-1?t[s+1]*n:e.length;a-=Math.abs(ia(e,l,c,n))}var p=0;for(s=0;s<r.length;s+=3){var h=r[s]*n,f=r[s+1]*n,d=r[s+2]*n;p+=Math.abs((e[h]-e[d])*(e[f+1]-e[h+1])-(e[h]-e[f])*(e[d+1]-e[h+1]))}return 0===a&&0===p?0:Math.abs((p-a)/a)},zo.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)n.vertices.push(e[i][o][a]);i>0&&(r+=e[i-1].length,n.holes.push(r))}return n},jo.default=Lo;var oa=sa,aa=sa;function sa(e,t,n,r,i){!function e(t,n,r,i,o){for(;i>r;){if(i-r>600){var a=i-r+1,s=n-r+1,u=Math.log(a),l=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*l*(a-l)/a)*(s-a/2<0?-1:1);e(t,n,Math.max(r,Math.floor(n-s*l/a+c)),Math.min(i,Math.floor(n+(a-s)*l/a+c)),o)}var p=t[n],h=r,f=i;for(ua(t,r,n),o(t[i],p)>0&&ua(t,r,i);h<f;){for(ua(t,h,f),h++,f--;o(t[h],p)<0;)h++;for(;o(t[f],p)>0;)f--}0===o(t[r],p)?ua(t,r,f):ua(t,++f,i),f<=n&&(r=f+1),n<=f&&(i=f-1)}}(e,t,n||0,r||e.length-1,i||la)}function ua(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function la(e,t){return e<t?-1:e>t?1:0}function ca(e,t){var n=e.length;if(n<=1)return[e];for(var r,i,o=[],a=0;a<n;a++){var s=T(e[a]);0!==s&&(e[a].area=Math.abs(s),void 0===i&&(i=s<0),i===s<0?(r&&o.push(r),r=[e[a]]):r.push(e[a]))}if(r&&o.push(r),t>1)for(var u=0;u<o.length;u++)o[u].length<=t||(oa(o[u],t,1,o[u].length-1,pa),o[u]=o[u].slice(0,t));return o}function pa(e,t){return t.area-e.area}function ha(e,t,n){for(var r=n.patternDependencies,i=!1,o=0,a=t;o<a.length;o+=1){var s=a[o].paint.get(e+"-pattern");s.isConstant()||(i=!0);var u=s.constantOr(null);u&&(i=!0,r[u.to]=!0,r[u.from]=!0)}return i}function fa(e,t,n,r,i){for(var o=i.patternDependencies,a=0,s=t;a<s.length;a+=1){var u=s[a],l=u.paint.get(e+"-pattern").value;if("constant"!==l.kind){var c=l.evaluate({zoom:r-1},n,{}),p=l.evaluate({zoom:r},n,{}),h=l.evaluate({zoom:r+1},n,{});o[c]=!0,o[p]=!0,o[h]=!0,n.patterns[u.id]={min:c,mid:p,max:h}}}return n}oa.default=aa;var da=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new zr,this.indexArray=new Jr,this.indexArray2=new Qr,this.programConfigurations=new Di(Ro,e.layers,e.zoom),this.segments=new yi,this.segments2=new yi};da.prototype.populate=function(e,t){this.features=[],this.hasPattern=ha("fill",this.layers,t);for(var n=0,r=e;n<r.length;n+=1){var i=r[n],o=i.feature,a=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new mr(this.zoom),o)){var u=Ui(o),l={sourceLayerIndex:s,index:a,geometry:u,properties:o.properties,type:o.type,patterns:{}};void 0!==o.id&&(l.id=o.id),this.hasPattern?this.features.push(fa("fill",this.layers,l,this.zoom,t)):this.addFeature(l,u,a,{}),t.featureIndex.insert(o,u,a,s,this.index)}}},da.prototype.update=function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},da.prototype.addFeatures=function(e,t){for(var n=0,r=this.features;n<r.length;n+=1){var i=r[n],o=i.geometry;this.addFeature(i,o,i.index,t)}},da.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},da.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},da.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Ro),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0},da.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},da.prototype.addFeature=function(e,t,n,r){for(var i=0,o=ca(t,500);i<o.length;i+=1){for(var a=o[i],s=0,u=0,l=a;u<l.length;u+=1)s+=l[u].length;for(var c=this.segments.prepareSegment(s,this.layoutVertexArray,this.indexArray),p=c.vertexLength,h=[],f=[],d=0,m=a;d<m.length;d+=1){var _=m[d];if(0!==_.length){_!==a[0]&&f.push(h.length/2);var y=this.segments2.prepareSegment(_.length,this.layoutVertexArray,this.indexArray2),v=y.vertexLength;this.layoutVertexArray.emplaceBack(_[0].x,_[0].y),this.indexArray2.emplaceBack(v+_.length-1,v),h.push(_[0].x),h.push(_[0].y);for(var g=1;g<_.length;g++)this.layoutVertexArray.emplaceBack(_[g].x,_[g].y),this.indexArray2.emplaceBack(v+g-1,v+g),h.push(_[g].x),h.push(_[g].y);y.vertexLength+=_.length,y.primitiveLength+=_.length}}for(var b=jo(h,f),x=0;x<b.length;x+=3)this.indexArray.emplaceBack(p+b[x],p+b[x+1],p+b[x+2]);c.vertexLength+=s,c.primitiveLength+=b.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,r)},Jn("FillBucket",da,{omit:["layers","features"]});var ma={paint:new Ar({"fill-antialias":new Tr(se.paint_fill["fill-antialias"]),"fill-opacity":new kr(se.paint_fill["fill-opacity"]),"fill-color":new kr(se.paint_fill["fill-color"]),"fill-outline-color":new kr(se.paint_fill["fill-outline-color"]),"fill-translate":new Tr(se.paint_fill["fill-translate"]),"fill-translate-anchor":new Tr(se.paint_fill["fill-translate-anchor"]),"fill-pattern":new Cr(se.paint_fill["fill-pattern"])})},_a=function(e){function t(t){e.call(this,t,ma)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.recalculate=function(t){e.prototype.recalculate.call(this,t);var n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},t.prototype.createBucket=function(e){return new da(e)},t.prototype.queryRadius=function(){return no(this.paint.get("fill-translate"))},t.prototype.queryIntersectsFeature=function(e,t,n,r,i,o,a){return Zi(ro(e,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,a),r)},t}(Sr),ya=jr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),va=ya.members,ga=(ya.size,ya.alignment,Math.pow(2,13));function ba(e,t,n,r,i,o,a,s){e.emplaceBack(t,n,2*Math.floor(r*ga)+a,i*ga*2,o*ga*2,Math.round(s))}var xa=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Br,this.indexArray=new Jr,this.programConfigurations=new Di(va,e.layers,e.zoom),this.segments=new yi};function wa(e,t){return e.x===t.x&&(e.x<0||e.x>qi)||e.y===t.y&&(e.y<0||e.y>qi)}function Ea(e){return e.every(function(e){return e.x<0})||e.every(function(e){return e.x>qi})||e.every(function(e){return e.y<0})||e.every(function(e){return e.y>qi})}xa.prototype.populate=function(e,t){this.features=[],this.hasPattern=ha("fill-extrusion",this.layers,t);for(var n=0,r=e;n<r.length;n+=1){var i=r[n],o=i.feature,a=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new mr(this.zoom),o)){var u=Ui(o),l={sourceLayerIndex:s,index:a,geometry:u,properties:o.properties,type:o.type,patterns:{}};void 0!==o.id&&(l.id=o.id),this.hasPattern?this.features.push(fa("fill-extrusion",this.layers,l,this.zoom,t)):this.addFeature(l,u,a,{}),t.featureIndex.insert(o,u,a,s,this.index)}}},xa.prototype.addFeatures=function(e,t){for(var n=0,r=this.features;n<r.length;n+=1){var i=r[n],o=i.geometry;this.addFeature(i,o,i.index,t)}},xa.prototype.update=function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},xa.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},xa.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},xa.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,va),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},xa.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},xa.prototype.addFeature=function(e,t,n,r){for(var i=0,o=ca(t,500);i<o.length;i+=1){for(var a=o[i],s=0,u=0,l=a;u<l.length;u+=1)s+=l[u].length;for(var c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),p=0,h=a;p<h.length;p+=1){var f=h[p];if(0!==f.length&&!Ea(f))for(var d=0,m=0;m<f.length;m++){var _=f[m];if(m>=1){var y=f[m-1];if(!wa(_,y)){c.vertexLength+4>yi.MAX_VERTEX_ARRAY_LENGTH&&(c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var v=_.sub(y)._perp()._unit(),g=y.dist(_);d+g>32768&&(d=0),ba(this.layoutVertexArray,_.x,_.y,v.x,v.y,0,0,d),ba(this.layoutVertexArray,_.x,_.y,v.x,v.y,0,1,d),d+=g,ba(this.layoutVertexArray,y.x,y.y,v.x,v.y,0,0,d),ba(this.layoutVertexArray,y.x,y.y,v.x,v.y,0,1,d);var b=c.vertexLength;this.indexArray.emplaceBack(b,b+2,b+1),this.indexArray.emplaceBack(b+1,b+2,b+3),c.vertexLength+=4,c.primitiveLength+=2}}}}c.vertexLength+s>yi.MAX_VERTEX_ARRAY_LENGTH&&(c=this.segments.prepareSegment(s,this.layoutVertexArray,this.indexArray));for(var x=[],w=[],E=c.vertexLength,T=0,k=a;T<k.length;T+=1){var C=k[T];if(0!==C.length){C!==a[0]&&w.push(x.length/2);for(var M=0;M<C.length;M++){var P=C[M];ba(this.layoutVertexArray,P.x,P.y,0,0,1,1,0),x.push(P.x),x.push(P.y)}}}for(var A=jo(x,w),S=0;S<A.length;S+=3)this.indexArray.emplaceBack(E+A[S],E+A[S+2],E+A[S+1]);c.primitiveLength+=A.length/3,c.vertexLength+=s}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,r)},Jn("FillExtrusionBucket",xa,{omit:["layers","features"]});var Ta={paint:new Ar({"fill-extrusion-opacity":new Tr(se["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new kr(se["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Tr(se["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Tr(se["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Cr(se["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new kr(se["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new kr(se["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Tr(se["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},ka=function(e){function t(t){e.call(this,t,Ta)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createBucket=function(e){return new xa(e)},t.prototype.queryRadius=function(){return no(this.paint.get("fill-extrusion-translate"))},t.prototype.queryIntersectsFeature=function(e,t,n,r,i,o,a){return Zi(ro(e,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,a),r)},t.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("fill-extrusion-opacity")&&"none"!==this.visibility},t.prototype.resize=function(){this.viewportFrame&&(this.viewportFrame.destroy(),this.viewportFrame=null)},t}(Sr),Ca=jr([{name:"a_pos_normal",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),Ma=Ca.members,Pa=(Ca.size,Ca.alignment,Aa);function Aa(e,t,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=r,this._values=i,e.readFields(Sa,this,t)}function Sa(e,t,n){1==e?t.id=n.readVarint():2==e?function(e,t){for(var n=e.readVarint()+e.pos;e.pos<n;){var r=t._keys[e.readVarint()],i=t._values[e.readVarint()];t.properties[r]=i}}(n,t):3==e?t.type=n.readVarint():4==e&&(t._geometry=n.pos)}function Oa(e){for(var t,n,r=0,i=0,o=e.length,a=o-1;i<o;a=i++)t=e[i],r+=((n=e[a]).x-t.x)*(t.y+n.y);return r}Aa.types=["Unknown","Point","LineString","Polygon"],Aa.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,r=1,o=0,a=0,s=0,u=[];e.pos<n;){if(o<=0){var l=e.readVarint();r=7&l,o=l>>3}if(o--,1===r||2===r)a+=e.readSVarint(),s+=e.readSVarint(),1===r&&(t&&u.push(t),t=[]),t.push(new i(a,s));else{if(7!==r)throw new Error("unknown command "+r);t&&t.push(t[0].clone())}}return t&&u.push(t),u},Aa.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,r=0,i=0,o=0,a=1/0,s=-1/0,u=1/0,l=-1/0;e.pos<t;){if(r<=0){var c=e.readVarint();n=7&c,r=c>>3}if(r--,1===n||2===n)(i+=e.readSVarint())<a&&(a=i),i>s&&(s=i),(o+=e.readSVarint())<u&&(u=o),o>l&&(l=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,u,s,l]},Aa.prototype.toGeoJSON=function(e,t,n){var r,i,o=this.extent*Math.pow(2,n),a=this.extent*e,s=this.extent*t,u=this.loadGeometry(),l=Aa.types[this.type];function c(e){for(var t=0;t<e.length;t++){var n=e[t],r=180-360*(n.y+s)/o;e[t]=[360*(n.x+a)/o-180,360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90]}}switch(this.type){case 1:var p=[];for(r=0;r<u.length;r++)p[r]=u[r][0];c(u=p);break;case 2:for(r=0;r<u.length;r++)c(u[r]);break;case 3:for(u=function(e){var t=e.length;if(t<=1)return[e];for(var n,r,i=[],o=0;o<t;o++){var a=Oa(e[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[e[o]]):n.push(e[o]))}return n&&i.push(n),i}(u),r=0;r<u.length;r++)for(i=0;i<u[r].length;i++)c(u[r][i])}1===u.length?u=u[0]:l="Multi"+l;var h={type:"Feature",geometry:{type:l,coordinates:u},properties:this.properties};return"id"in this&&(h.id=this.id),h};var Ia=Ra;function Ra(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(ja,this,t),this.length=this._features.length}function ja(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(function(e){for(var t=null,n=e.readVarint()+e.pos;e.pos<n;){var r=e.readVarint()>>3;t=1===r?e.readString():2===r?e.readFloat():3===r?e.readDouble():4===r?e.readVarint64():5===r?e.readVarint():6===r?e.readSVarint():7===r?e.readBoolean():null}return t}(n))}function La(e,t,n){if(3===e){var r=new Ia(n,n.readVarint()+n.pos);r.length&&(t[r.name]=r)}}Ra.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new Pa(this._pbf,t,this.extent,this._keys,this._values)};var za={VectorTile:function(e,t){this.layers=e.readFields(La,{},t)},VectorTileFeature:Pa,VectorTileLayer:Ia},Da=za.VectorTileFeature.types,Ba=63,Na=Math.cos(Math.PI/180*37.5),qa=.5,Fa=Math.pow(2,14)/qa;function Ua(e,t,n,r,i,o,a){e.emplaceBack(t.x,t.y,r?1:0,i?1:-1,Math.round(Ba*n.x)+128,Math.round(Ba*n.y)+128,1+(0===o?0:o<0?-1:1)|(a*qa&63)<<2,a*qa>>6)}var Va=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=e.index,this.features=[],this.hasPattern=!1,this.layoutVertexArray=new Nr,this.indexArray=new Jr,this.programConfigurations=new Di(Ma,e.layers,e.zoom),this.segments=new yi};function Wa(e,t){return(e/t.tileTotal*(t.end-t.start)+t.start)*(Fa-1)}Va.prototype.populate=function(e,t){this.features=[],this.hasPattern=ha("line",this.layers,t);for(var n=0,r=e;n<r.length;n+=1){var i=r[n],o=i.feature,a=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new mr(this.zoom),o)){var u=Ui(o),l={sourceLayerIndex:s,index:a,geometry:u,properties:o.properties,type:o.type,patterns:{}};void 0!==o.id&&(l.id=o.id),this.hasPattern?this.features.push(fa("line",this.layers,l,this.zoom,t)):this.addFeature(l,u,a,{}),t.featureIndex.insert(o,u,a,s,this.index)}}},Va.prototype.update=function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},Va.prototype.addFeatures=function(e,t){for(var n=0,r=this.features;n<r.length;n+=1){var i=r[n],o=i.geometry;this.addFeature(i,o,i.index,t)}},Va.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Va.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Va.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Ma),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Va.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Va.prototype.addFeature=function(e,t,n,r){for(var i=this.layers[0].layout,o=i.get("line-join").evaluate(e,{}),a=i.get("line-cap"),s=i.get("line-miter-limit"),u=i.get("line-round-limit"),l=0,c=t;l<c.length;l+=1){var p=c[l];this.addLine(p,e,o,a,s,u,n,r)}},Va.prototype.addLine=function(e,t,n,r,i,o,a,s){var u=null;t.properties&&t.properties.hasOwnProperty("mapbox_clip_start")&&t.properties.hasOwnProperty("mapbox_clip_end")&&(u={start:t.properties.mapbox_clip_start,end:t.properties.mapbox_clip_end,tileTotal:void 0});for(var l="Polygon"===Da[t.type],c=e.length;c>=2&&e[c-1].equals(e[c-2]);)c--;for(var p=0;p<c-1&&e[p].equals(e[p+1]);)p++;if(!(c<(l?3:2))){u&&(u.tileTotal=function(e,t,n){for(var r,i,o=0,a=p;a<n-1;a++)r=e[a],i=e[a+1],o+=r.dist(i);return o}(e,0,c)),"bevel"===n&&(i=1.05);var h=qi/(512*this.overscaling)*15,f=e[p],d=this.segments.prepareSegment(10*c,this.layoutVertexArray,this.indexArray);this.distance=0;var m,_,y,v=r,g=l?"butt":r,b=!0,x=void 0,w=void 0,E=void 0,T=void 0;this.e1=this.e2=this.e3=-1,l&&(m=e[c-2],T=f.sub(m)._unit()._perp());for(var k=p;k<c;k++)if(!(w=l&&k===c-1?e[p+1]:e[k+1])||!e[k].equals(w)){T&&(E=T),m&&(x=m),m=e[k],T=w?w.sub(m)._unit()._perp():E;var C=(E=E||T).add(T);0===C.x&&0===C.y||C._unit();var M=C.x*T.x+C.y*T.y,P=0!==M?1/M:1/0,A=M<Na&&x&&w;if(A&&k>p){var S=m.dist(x);if(S>2*h){var O=m.sub(m.sub(x)._mult(h/S)._round());this.distance+=O.dist(x),this.addCurrentVertex(O,this.distance,E.mult(1),0,0,!1,d,u),x=O}}var I=x&&w,R=I?n:w?v:g;if(I&&"round"===R&&(P<o?R="miter":P<=2&&(R="fakeround")),"miter"===R&&P>i&&(R="bevel"),"bevel"===R&&(P>2&&(R="flipbevel"),P<i&&(R="miter")),x&&(this.distance+=m.dist(x)),"miter"===R)C._mult(P),this.addCurrentVertex(m,this.distance,C,0,0,!1,d,u);else if("flipbevel"===R){if(P>100)C=T.clone().mult(-1);else{var j=E.x*T.y-E.y*T.x>0?-1:1,L=P*E.add(T).mag()/E.sub(T).mag();C._perp()._mult(L*j)}this.addCurrentVertex(m,this.distance,C,0,0,!1,d,u),this.addCurrentVertex(m,this.distance,C.mult(-1),0,0,!1,d,u)}else if("bevel"===R||"fakeround"===R){var z=E.x*T.y-E.y*T.x>0,D=-Math.sqrt(P*P-1);if(z?(y=0,_=D):(_=0,y=D),b||this.addCurrentVertex(m,this.distance,E,_,y,!1,d,u),"fakeround"===R){for(var B=Math.floor(8*(.5-(M-.5))),N=void 0,q=0;q<B;q++)N=T.mult((q+1)/(B+1))._add(E)._unit(),this.addPieSliceVertex(m,this.distance,N,z,d,u);this.addPieSliceVertex(m,this.distance,C,z,d,u);for(var F=B-1;F>=0;F--)N=E.mult((F+1)/(B+1))._add(T)._unit(),this.addPieSliceVertex(m,this.distance,N,z,d,u)}w&&this.addCurrentVertex(m,this.distance,T,-_,-y,!1,d,u)}else"butt"===R?(b||this.addCurrentVertex(m,this.distance,E,0,0,!1,d,u),w&&this.addCurrentVertex(m,this.distance,T,0,0,!1,d,u)):"square"===R?(b||(this.addCurrentVertex(m,this.distance,E,1,1,!1,d,u),this.e1=this.e2=-1),w&&this.addCurrentVertex(m,this.distance,T,-1,-1,!1,d,u)):"round"===R&&(b||(this.addCurrentVertex(m,this.distance,E,0,0,!1,d,u),this.addCurrentVertex(m,this.distance,E,1,1,!0,d,u),this.e1=this.e2=-1),w&&(this.addCurrentVertex(m,this.distance,T,-1,-1,!0,d,u),this.addCurrentVertex(m,this.distance,T,0,0,!1,d,u)));if(A&&k<c-1){var U=m.dist(w);if(U>2*h){var V=m.add(w.sub(m)._mult(h/U)._round());this.distance+=V.dist(m),this.addCurrentVertex(V,this.distance,T.mult(1),0,0,!1,d,u),m=V}}b=!1}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,a,s)}},Va.prototype.addCurrentVertex=function(e,t,n,r,i,o,a,s){var u,l=this.layoutVertexArray,c=this.indexArray;s&&(t=Wa(t,s)),u=n.clone(),r&&u._sub(n.perp()._mult(r)),Ua(l,e,u,o,!1,r,t),this.e3=a.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),a.primitiveLength++),this.e1=this.e2,this.e2=this.e3,u=n.mult(-1),i&&u._sub(n.perp()._mult(i)),Ua(l,e,u,o,!0,-i,t),this.e3=a.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),a.primitiveLength++),this.e1=this.e2,this.e2=this.e3,t>Fa/2&&!s&&(this.distance=0,this.addCurrentVertex(e,this.distance,n,r,i,o,a))},Va.prototype.addPieSliceVertex=function(e,t,n,r,i,o){n=n.mult(r?-1:1);var a=this.layoutVertexArray,s=this.indexArray;o&&(t=Wa(t,o)),Ua(a,e,n,!1,r,0,t),this.e3=i.vertexLength++,this.e1>=0&&this.e2>=0&&(s.emplaceBack(this.e1,this.e2,this.e3),i.primitiveLength++),r?this.e2=this.e3:this.e1=this.e3},Jn("LineBucket",Va,{omit:["layers","features"]});var Ga=new Ar({"line-cap":new Tr(se.layout_line["line-cap"]),"line-join":new kr(se.layout_line["line-join"]),"line-miter-limit":new Tr(se.layout_line["line-miter-limit"]),"line-round-limit":new Tr(se.layout_line["line-round-limit"])}),Za={paint:new Ar({"line-opacity":new kr(se.paint_line["line-opacity"]),"line-color":new kr(se.paint_line["line-color"]),"line-translate":new Tr(se.paint_line["line-translate"]),"line-translate-anchor":new Tr(se.paint_line["line-translate-anchor"]),"line-width":new kr(se.paint_line["line-width"]),"line-gap-width":new kr(se.paint_line["line-gap-width"]),"line-offset":new kr(se.paint_line["line-offset"]),"line-blur":new kr(se.paint_line["line-blur"]),"line-dasharray":new Mr(se.paint_line["line-dasharray"]),"line-pattern":new Cr(se.paint_line["line-pattern"]),"line-gradient":new Pr(se.paint_line["line-gradient"])}),layout:Ga},Ha=new(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.possiblyEvaluate=function(t,n){return n=new mr(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),e.prototype.possiblyEvaluate.call(this,t,n)},t.prototype.evaluate=function(t,n,r,i){return n=p({},n,{zoom:Math.floor(n.zoom)}),e.prototype.evaluate.call(this,t,n,r,i)},t}(kr))(Za.paint.properties["line-width"].specification);Ha.useIntegerZoom=!0;var Ka=function(e){function t(t){e.call(this,t,Za)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._handleSpecialPaintPropertyUpdate=function(e){"line-gradient"===e&&this._updateGradient()},t.prototype._updateGradient=function(){var e=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=Po(e,"lineProgress"),this.gradientTexture=null},t.prototype.recalculate=function(t){e.prototype.recalculate.call(this,t),this.paint._values["line-floorwidth"]=Ha.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)},t.prototype.createBucket=function(e){return new Va(e)},t.prototype.queryRadius=function(e){var t=e,n=Ya(to("line-width",this,t),to("line-gap-width",this,t)),r=to("line-offset",this,t);return n/2+Math.abs(r)+no(this.paint.get("line-translate"))},t.prototype.queryIntersectsFeature=function(e,t,n,r,o,a,s){var u=ro(e,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,s),l=s/2*Ya(this.paint.get("line-width").evaluate(t,n),this.paint.get("line-gap-width").evaluate(t,n)),c=this.paint.get("line-offset").evaluate(t,n);return c&&(r=function(e,t){for(var n=[],r=new i(0,0),o=0;o<e.length;o++){for(var a=e[o],s=[],u=0;u<a.length;u++){var l=a[u-1],c=a[u],p=a[u+1],h=0===u?r:c.sub(l)._unit()._perp(),f=u===a.length-1?r:p.sub(c)._unit()._perp(),d=h._add(f)._unit(),m=d.x*f.x+d.y*f.y;d._mult(1/m),s.push(d._mult(t)._add(c))}n.push(s)}return n}(r,c*s)),Hi(u,r,l)},t}(Sr);function Ya(e,t){return t>0?t+2*e:e}var Xa=jr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"}]),$a=jr([{name:"a_projected_pos",components:3,type:"Float32"}],4),Ja=(jr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),jr([{name:"a_placed",components:2,type:"Uint8"}],4)),Qa=(jr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"radius"},{type:"Int16",name:"signedDistanceFromAnchor"}]),jr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),es=jr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4);function ts(e,t,n){return e.sections.forEach(function(e){e.text=function(e,t,n){var r=t.layout.get("text-transform").evaluate(n,{});return"uppercase"===r?e=e.toLocaleUpperCase():"lowercase"===r&&(e=e.toLocaleLowerCase()),dr.applyArabicShaping&&(e=dr.applyArabicShaping(e)),e}(e.text,t,n)}),e}jr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"hidden"}]),jr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"horizontalPlacedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint32",name:"crossTileID"}]),jr([{type:"Float32",name:"offsetX"}]),jr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var ns={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},rs=function(e){function t(t,n,r,i){e.call(this,t,n),this.angle=r,void 0!==i&&(this.segment=i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.clone=function(){return new t(this.x,this.y,this.angle,this.segment)},t}(i);function is(e,t){var n=t.expression;if("constant"===n.kind)return{functionType:"constant",layoutSize:n.evaluate(new mr(e+1))};if("source"===n.kind)return{functionType:"source"};for(var r=n.zoomStops,i=0;i<r.length&&r[i]<=e;)i++;for(var o=i=Math.max(0,i-1);o<r.length&&r[o]<e+1;)o++;o=Math.min(r.length-1,o);var a={min:r[i],max:r[o]};return"composite"===n.kind?{functionType:"composite",zoomRange:a,propertyValue:t.value}:{functionType:"camera",layoutSize:n.evaluate(new mr(e+1)),zoomRange:a,sizeRange:{min:n.evaluate(new mr(a.min)),max:n.evaluate(new mr(a.max))},propertyValue:t.value}}Jn("Anchor",rs);var os=za.VectorTileFeature.types,as=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function ss(e,t,n,r,i,o,a,s){e.emplaceBack(t,n,Math.round(32*r),Math.round(32*i),o,a,s?s[0]:0,s?s[1]:0)}function us(e,t,n){e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n)}var ls=function(e){this.layoutVertexArray=new Fr,this.indexArray=new Jr,this.programConfigurations=e,this.segments=new yi,this.dynamicLayoutVertexArray=new Ur,this.opacityVertexArray=new Vr,this.placedSymbolArray=new ai};ls.prototype.upload=function(e,t,n,r){n&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Xa.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,$a.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,as,!0),this.opacityVertexBuffer.itemSize=1),(n||r)&&this.programConfigurations.upload(e)},ls.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Jn("SymbolBuffers",ls);var cs=function(e,t,n){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new n,this.segments=new yi,this.collisionVertexArray=new Zr};cs.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,Ja.members,!0)},cs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Jn("CollisionBuffers",cs);var ps=function(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1;var t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=is(this.zoom,t["text-size"]),this.iconSizeData=is(this.zoom,t["icon-size"]);var n=this.layers[0].layout,r="viewport-y"===n.get("symbol-z-order");this.sortFeaturesByY=r&&(n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement")),this.sourceID=e.sourceID};ps.prototype.createArrays=function(){this.text=new ls(new Di(Xa.members,this.layers,this.zoom,function(e){return/^text/.test(e)})),this.icon=new ls(new Di(Xa.members,this.layers,this.zoom,function(e){return/^icon/.test(e)})),this.collisionBox=new cs(Gr,Qa.members,Qr),this.collisionCircle=new cs(Gr,es.members,Jr),this.glyphOffsetArray=new ci,this.lineVertexArray=new hi,this.symbolInstances=new ui},ps.prototype.calculateGlyphDependencies=function(e,t,n,r){for(var i=0;i<e.length;i++)if(t[e.charCodeAt(i)]=!0,n&&r){var o=ns[e.charAt(i)];o&&(t[o.charCodeAt(0)]=!0)}},ps.prototype.populate=function(e,t){var n=this.layers[0],r=n.layout,i=r.get("text-font"),o=r.get("text-field"),a=r.get("icon-image"),s=("constant"!==o.value.kind||o.value.value.toString().length>0)&&("constant"!==i.value.kind||i.value.value.length>0),u="constant"!==a.value.kind||a.value.value&&a.value.value.length>0;if(this.features=[],s||u){for(var l=t.iconDependencies,c=t.glyphDependencies,p=new mr(this.zoom),h=0,f=e;h<f.length;h+=1){var d=f[h],m=d.feature,_=d.index,y=d.sourceLayerIndex;if(n._featureFilter(p,m)){var v=void 0;if(s){var g=n.getValueAndResolveTokens("text-field",m);v=ts(g instanceof Ie?g:Ie.fromString(g),n,m)}var b=void 0;if(u&&(b=n.getValueAndResolveTokens("icon-image",m)),v||b){var x={text:v,icon:b,index:_,sourceLayerIndex:y,geometry:Ui(m),properties:m.properties,type:os[m.type]};if(void 0!==m.id&&(x.id=m.id),this.features.push(x),b&&(l[b]=!0),v)for(var w=i.evaluate(m,{}).join(","),E="map"===r.get("text-rotation-alignment")&&"point"!==r.get("symbol-placement"),T=0,k=v.sections;T<k.length;T+=1){var C=k[T],M=ir(v.toString()),P=C.fontStack||w,A=c[P]=c[P]||{};this.calculateGlyphDependencies(C.text,A,E,M)}}}}"line"===r.get("symbol-placement")&&(this.features=function(e){var t={},n={},r=[],i=0;function o(t){r.push(e[t]),i++}function a(e,t,i){var o=n[e];return delete n[e],n[t]=o,r[o].geometry[0].pop(),r[o].geometry[0]=r[o].geometry[0].concat(i[0]),o}function s(e,n,i){var o=t[n];return delete t[n],t[e]=o,r[o].geometry[0].shift(),r[o].geometry[0]=i[0].concat(r[o].geometry[0]),o}function u(e,t,n){var r=n?t[0][t[0].length-1]:t[0][0];return e+":"+r.x+":"+r.y}for(var l=0;l<e.length;l++){var c=e[l],p=c.geometry,h=c.text?c.text.toString():null;if(h){var f=u(h,p),d=u(h,p,!0);if(f in n&&d in t&&n[f]!==t[d]){var m=s(f,d,p),_=a(f,d,r[m].geometry);delete t[f],delete n[d],n[u(h,r[_].geometry,!0)]=_,r[m].geometry=null}else f in n?a(f,d,p):d in t?s(f,d,p):(o(l),t[f]=i-1,n[d]=i-1)}else o(l)}return r.filter(function(e){return e.geometry})}(this.features))}},ps.prototype.update=function(e,t,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,n),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,n))},ps.prototype.isEmpty=function(){return 0===this.symbolInstances.length},ps.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},ps.prototype.upload=function(e){this.uploaded||(this.collisionBox.upload(e),this.collisionCircle.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},ps.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.collisionBox.destroy(),this.collisionCircle.destroy()},ps.prototype.addToLineVertexArray=function(e,t){var n=this.lineVertexArray.length;if(void 0!==e.segment){for(var r=e.dist(t[e.segment+1]),i=e.dist(t[e.segment]),o={},a=e.segment+1;a<t.length;a++)o[a]={x:t[a].x,y:t[a].y,tileUnitDistanceFromAnchor:r},a<t.length-1&&(r+=t[a+1].dist(t[a]));for(var s=e.segment||0;s>=0;s--)o[s]={x:t[s].x,y:t[s].y,tileUnitDistanceFromAnchor:i},s>0&&(i+=t[s-1].dist(t[s]));for(var u=0;u<t.length;u++){var l=o[u];this.lineVertexArray.emplaceBack(l.x,l.y,l.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}},ps.prototype.addSymbols=function(e,t,n,r,i,o,a,s,u,l){for(var c=e.indexArray,p=e.layoutVertexArray,h=e.dynamicLayoutVertexArray,f=e.segments.prepareSegment(4*t.length,e.layoutVertexArray,e.indexArray),d=this.glyphOffsetArray.length,m=f.vertexLength,_=0,y=t;_<y.length;_+=1){var v=y[_],g=v.tl,b=v.tr,x=v.bl,w=v.br,E=v.tex,T=f.vertexLength,k=v.glyphOffset[1];ss(p,s.x,s.y,g.x,k+g.y,E.x,E.y,n),ss(p,s.x,s.y,b.x,k+b.y,E.x+E.w,E.y,n),ss(p,s.x,s.y,x.x,k+x.y,E.x,E.y+E.h,n),ss(p,s.x,s.y,w.x,k+w.y,E.x+E.w,E.y+E.h,n),us(h,s,0),c.emplaceBack(T,T+1,T+2),c.emplaceBack(T+1,T+2,T+3),f.vertexLength+=4,f.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(v.glyphOffset[0])}e.placedSymbolArray.emplaceBack(s.x,s.y,d,this.glyphOffsetArray.length-d,m,u,l,s.segment,n?n[0]:0,n?n[1]:0,r[0],r[1],a,!1),e.programConfigurations.populatePaintArrays(e.layoutVertexArray.length,o,o.index,{})},ps.prototype._addCollisionDebugVertex=function(e,t,n,r,i,o){return t.emplaceBack(0,0),e.emplaceBack(n.x,n.y,r,i,Math.round(o.x),Math.round(o.y))},ps.prototype.addCollisionDebugVertices=function(e,t,n,r,o,a,s,u){var l=o.segments.prepareSegment(4,o.layoutVertexArray,o.indexArray),c=l.vertexLength,p=o.layoutVertexArray,h=o.collisionVertexArray,f=s.anchorX,d=s.anchorY;if(this._addCollisionDebugVertex(p,h,a,f,d,new i(e,t)),this._addCollisionDebugVertex(p,h,a,f,d,new i(n,t)),this._addCollisionDebugVertex(p,h,a,f,d,new i(n,r)),this._addCollisionDebugVertex(p,h,a,f,d,new i(e,r)),l.vertexLength+=4,u){var m=o.indexArray;m.emplaceBack(c,c+1,c+2),m.emplaceBack(c,c+2,c+3),l.primitiveLength+=2}else{var _=o.indexArray;_.emplaceBack(c,c+1),_.emplaceBack(c+1,c+2),_.emplaceBack(c+2,c+3),_.emplaceBack(c+3,c),l.primitiveLength+=4}},ps.prototype.addDebugCollisionBoxes=function(e,t,n){for(var r=e;r<t;r++){var i=this.collisionBoxArray.get(r),o=i.x1,a=i.y1,s=i.x2,u=i.y2,l=i.radius>0;this.addCollisionDebugVertices(o,a,s,u,l?this.collisionCircle:this.collisionBox,i.anchorPoint,n,l)}},ps.prototype.generateCollisionDebugBuffers=function(){for(var e=0;e<this.symbolInstances.length;e++){var t=this.symbolInstances.get(e);this.addDebugCollisionBoxes(t.textBoxStartIndex,t.textBoxEndIndex,t),this.addDebugCollisionBoxes(t.iconBoxStartIndex,t.iconBoxEndIndex,t)}},ps.prototype._deserializeCollisionBoxesForSymbol=function(e,t,n,r,i){for(var o={},a=t;a<n;a++){var s=e.get(a);if(0===s.radius){o.textBox={x1:s.x1,y1:s.y1,x2:s.x2,y2:s.y2,anchorPointX:s.anchorPointX,anchorPointY:s.anchorPointY},o.textFeatureIndex=s.featureIndex;break}o.textCircles||(o.textCircles=[],o.textFeatureIndex=s.featureIndex),o.textCircles.push(s.anchorPointX,s.anchorPointY,s.radius,s.signedDistanceFromAnchor,1)}for(var u=r;u<i;u++){var l=e.get(u);if(0===l.radius){o.iconBox={x1:l.x1,y1:l.y1,x2:l.x2,y2:l.y2,anchorPointX:l.anchorPointX,anchorPointY:l.anchorPointY},o.iconFeatureIndex=l.featureIndex;break}}return o},ps.prototype.deserializeCollisionBoxes=function(e){this.collisionArrays=[];for(var t=0;t<this.symbolInstances.length;t++){var n=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,n.textBoxStartIndex,n.textBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex))}},ps.prototype.hasTextData=function(){return this.text.segments.get().length>0},ps.prototype.hasIconData=function(){return this.icon.segments.get().length>0},ps.prototype.hasCollisionBoxData=function(){return this.collisionBox.segments.get().length>0},ps.prototype.hasCollisionCircleData=function(){return this.collisionCircle.segments.get().length>0},ps.prototype.addIndicesForPlacedTextSymbol=function(e){for(var t=this.text.placedSymbolArray.get(e),n=t.vertexStartIndex+4*t.numGlyphs,r=t.vertexStartIndex;r<n;r+=4)this.text.indexArray.emplaceBack(r,r+1,r+2),this.text.indexArray.emplaceBack(r+1,r+2,r+3)},ps.prototype.sortFeatures=function(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&(this.sortedAngle=e,!(this.text.segments.get().length>1||this.icon.segments.get().length>1))){for(var t=[],n=0;n<this.symbolInstances.length;n++)t.push(n);for(var r=Math.sin(e),i=Math.cos(e),o=[],a=[],s=0;s<this.symbolInstances.length;s++){var u=this.symbolInstances.get(s);o.push(0|Math.round(r*u.anchorX+i*u.anchorY)),a.push(u.featureIndex)}t.sort(function(e,t){return o[e]-o[t]||a[t]-a[e]}),this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var l=0,c=t;l<c.length;l+=1){var p=c[l],h=this.symbolInstances.get(p);this.featureSortOrder.push(h.featureIndex),h.horizontalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedTextSymbol(h.horizontalPlacedTextSymbolIndex),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedTextSymbol(h.verticalPlacedTextSymbolIndex);var f=this.icon.placedSymbolArray.get(p);if(f.numGlyphs){var d=f.vertexStartIndex;this.icon.indexArray.emplaceBack(d,d+1,d+2),this.icon.indexArray.emplaceBack(d+1,d+2,d+3)}}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Jn("SymbolBucket",ps,{omit:["layers","collisionBoxArray","features","compareText"]}),ps.MAX_GLYPHS=65535,ps.addDynamicAttributes=us;var hs=new Ar({"symbol-placement":new Tr(se.layout_symbol["symbol-placement"]),"symbol-spacing":new Tr(se.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Tr(se.layout_symbol["symbol-avoid-edges"]),"symbol-z-order":new Tr(se.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Tr(se.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Tr(se.layout_symbol["icon-ignore-placement"]),"icon-optional":new Tr(se.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Tr(se.layout_symbol["icon-rotation-alignment"]),"icon-size":new kr(se.layout_symbol["icon-size"]),"icon-text-fit":new Tr(se.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Tr(se.layout_symbol["icon-text-fit-padding"]),"icon-image":new kr(se.layout_symbol["icon-image"]),"icon-rotate":new kr(se.layout_symbol["icon-rotate"]),"icon-padding":new Tr(se.layout_symbol["icon-padding"]),"icon-keep-upright":new Tr(se.layout_symbol["icon-keep-upright"]),"icon-offset":new kr(se.layout_symbol["icon-offset"]),"icon-anchor":new kr(se.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Tr(se.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Tr(se.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Tr(se.layout_symbol["text-rotation-alignment"]),"text-field":new kr(se.layout_symbol["text-field"]),"text-font":new kr(se.layout_symbol["text-font"]),"text-size":new kr(se.layout_symbol["text-size"]),"text-max-width":new kr(se.layout_symbol["text-max-width"]),"text-line-height":new Tr(se.layout_symbol["text-line-height"]),"text-letter-spacing":new kr(se.layout_symbol["text-letter-spacing"]),"text-justify":new kr(se.layout_symbol["text-justify"]),"text-anchor":new kr(se.layout_symbol["text-anchor"]),"text-max-angle":new Tr(se.layout_symbol["text-max-angle"]),"text-rotate":new kr(se.layout_symbol["text-rotate"]),"text-padding":new Tr(se.layout_symbol["text-padding"]),"text-keep-upright":new Tr(se.layout_symbol["text-keep-upright"]),"text-transform":new kr(se.layout_symbol["text-transform"]),"text-offset":new kr(se.layout_symbol["text-offset"]),"text-allow-overlap":new Tr(se.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Tr(se.layout_symbol["text-ignore-placement"]),"text-optional":new Tr(se.layout_symbol["text-optional"])}),fs={paint:new Ar({"icon-opacity":new kr(se.paint_symbol["icon-opacity"]),"icon-color":new kr(se.paint_symbol["icon-color"]),"icon-halo-color":new kr(se.paint_symbol["icon-halo-color"]),"icon-halo-width":new kr(se.paint_symbol["icon-halo-width"]),"icon-halo-blur":new kr(se.paint_symbol["icon-halo-blur"]),"icon-translate":new Tr(se.paint_symbol["icon-translate"]),"icon-translate-anchor":new Tr(se.paint_symbol["icon-translate-anchor"]),"text-opacity":new kr(se.paint_symbol["text-opacity"]),"text-color":new kr(se.paint_symbol["text-color"]),"text-halo-color":new kr(se.paint_symbol["text-halo-color"]),"text-halo-width":new kr(se.paint_symbol["text-halo-width"]),"text-halo-blur":new kr(se.paint_symbol["text-halo-blur"]),"text-translate":new Tr(se.paint_symbol["text-translate"]),"text-translate-anchor":new Tr(se.paint_symbol["text-translate-anchor"])}),layout:hs},ds=function(e){function t(t){e.call(this,t,fs)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.recalculate=function(t){e.prototype.recalculate.call(this,t),"auto"===this.layout.get("icon-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"))},t.prototype.getValueAndResolveTokens=function(e,t){var n,r=this.layout.get(e).evaluate(t,{}),i=this._unevaluatedLayout._values[e];return i.isDataDriven()||an(i.value)?r:(n=t.properties,r.replace(/{([^{}]+)}/g,function(e,t){return t in n?String(n[t]):""}))},t.prototype.createBucket=function(e){return new ps(e)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t}(Sr),ms={paint:new Ar({"background-color":new Tr(se.paint_background["background-color"]),"background-pattern":new Mr(se.paint_background["background-pattern"]),"background-opacity":new Tr(se.paint_background["background-opacity"])})},_s=function(e){function t(t){e.call(this,t,ms)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Sr),ys={paint:new Ar({"raster-opacity":new Tr(se.paint_raster["raster-opacity"]),"raster-hue-rotate":new Tr(se.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Tr(se.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Tr(se.paint_raster["raster-brightness-max"]),"raster-saturation":new Tr(se.paint_raster["raster-saturation"]),"raster-contrast":new Tr(se.paint_raster["raster-contrast"]),"raster-resampling":new Tr(se.paint_raster["raster-resampling"]),"raster-fade-duration":new Tr(se.paint_raster["raster-fade-duration"])})},vs=function(e){function t(t){e.call(this,t,ys)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Sr),gs=function(e){function t(t){e.call(this,t,{}),this.implementation=t}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender||"3d"===this.implementation.renderingMode},t.prototype.recalculate=function(){},t.prototype.updateTransitions=function(){},t.prototype.hasTransition=function(){},t.prototype.serialize=function(){},t.prototype.resize=function(){this.viewportFrame&&(this.viewportFrame.destroy(),this.viewportFrame=null)},t.prototype.onAdd=function(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)},t.prototype.onRemove=function(e){this.implementation.onRemove&&this.implementation.onRemove(e)},t}(Sr),bs={circle:go,heatmap:Ao,hillshade:Oo,fill:_a,"fill-extrusion":ka,line:Ka,symbol:ds,background:_s,raster:vs};function xs(e){for(var t=0,n=0,r=0,i=e;r<i.length;r+=1){var o=i[r];t+=o.w*o.h,n=Math.max(n,o.w)}e.sort(function(e,t){return t.h-e.h});for(var a=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),n),h:1/0}],s=0,u=0,l=0,c=e;l<c.length;l+=1)for(var p=c[l],h=a.length-1;h>=0;h--){var f=a[h];if(!(p.w>f.w||p.h>f.h)){if(p.x=f.x,p.y=f.y,u=Math.max(u,p.y+p.h),s=Math.max(s,p.x+p.w),p.w===f.w&&p.h===f.h){var d=a.pop();h<a.length&&(a[h]=d)}else p.h===f.h?(f.x+=p.w,f.w-=p.w):p.w===f.w?(f.y+=p.h,f.h-=p.h):(a.push({x:f.x+p.w,y:f.y,w:f.w-p.w,h:p.h}),f.y+=p.h,f.h-=p.h);break}}return{w:s,h:u,fill:t/(s*u)||0}}var ws=function(e,t){var n=t.pixelRatio;this.paddedRect=e,this.pixelRatio=n},Es={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Es.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Es.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Es.tlbr.get=function(){return this.tl.concat(this.br)},Es.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(ws.prototype,Es);var Ts=function(e,t){var n={},r={},i=[];for(var o in e){var a=e[o],s={x:0,y:0,w:a.data.width+2,h:a.data.height+2};i.push(s),n[o]=new ws(s,a)}for(var u in t){var l=t[u],c={x:0,y:0,w:l.data.width+2,h:l.data.height+2};i.push(c),r[u]=new ws(c,l)}var p=xs(i),h=p.w,f=p.h,d=new Co({width:h||1,height:f||1});for(var m in e){var _=e[m],y=n[m].paddedRect;Co.copy(_.data,d,{x:0,y:0},{x:y.x+1,y:y.y+1},_.data)}for(var v in t){var g=t[v],b=r[v].paddedRect,x=b.x+1,w=b.y+1,E=g.data.width,T=g.data.height;Co.copy(g.data,d,{x:0,y:0},{x:x,y:w},g.data),Co.copy(g.data,d,{x:0,y:T-1},{x:x,y:w-1},{width:E,height:1}),Co.copy(g.data,d,{x:0,y:0},{x:x,y:w+T},{width:E,height:1}),Co.copy(g.data,d,{x:E-1,y:0},{x:x-1,y:w},{width:1,height:T}),Co.copy(g.data,d,{x:0,y:0},{x:x+E,y:w},{width:1,height:T})}this.image=d,this.iconPositions=n,this.patternPositions=r};Jn("ImagePosition",ws),Jn("ImageAtlas",Ts);var ks=self.HTMLImageElement,Cs=self.HTMLCanvasElement,Ms=self.HTMLVideoElement,Ps=self.ImageData,As=function(e,t,n,r){this.context=e,this.format=n,this.texture=e.gl.createTexture(),this.update(t,r)};As.prototype.update=function(e,t){var n=e.width,r=e.height,i=!this.size||this.size[0]!==n||this.size[1]!==r,o=this.context,a=o.gl;this.useMipmap=Boolean(t&&t.useMipmap),a.bindTexture(a.TEXTURE_2D,this.texture),o.pixelStoreUnpackFlipY.set(!1),o.pixelStoreUnpack.set(1),o.pixelStoreUnpackPremultiplyAlpha.set(this.format===a.RGBA&&(!t||!1!==t.premultiply)),i?(this.size=[n,r],e instanceof ks||e instanceof Cs||e instanceof Ms||e instanceof Ps?a.texImage2D(a.TEXTURE_2D,0,this.format,this.format,a.UNSIGNED_BYTE,e):a.texImage2D(a.TEXTURE_2D,0,this.format,n,r,0,this.format,a.UNSIGNED_BYTE,e.data)):e instanceof ks||e instanceof Cs||e instanceof Ms||e instanceof Ps?a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,e):a.texSubImage2D(a.TEXTURE_2D,0,0,0,n,r,a.RGBA,a.UNSIGNED_BYTE,e.data),this.useMipmap&&this.isSizePowerOfTwo()&&a.generateMipmap(a.TEXTURE_2D)},As.prototype.bind=function(e,t,n){var r=this.context.gl;r.bindTexture(r.TEXTURE_2D,this.texture),n!==r.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=r.LINEAR),e!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,n||e),this.filter=e),t!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,t),this.wrap=t)},As.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},As.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Ss=function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,p=n?i-1:0,h=n?-1:1,f=e[t+p];for(p+=h,o=f&(1<<-c)-1,f>>=-c,c+=s;c>0;o=256*o+e[t+p],p+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+e[t+p],p+=h,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),o-=l}return(f?-1:1)*a*Math.pow(2,o-r)},Os=function(e,t,n,r,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,p=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,d=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+p>=1?h/u:h*Math.pow(2,1-p))*u>=2&&(a++,u/=2),a+p>=c?(s=0,a=c):a+p>=1?(s=(t*u-1)*Math.pow(2,i),a+=p):(s=t*Math.pow(2,p-1)*Math.pow(2,i),a=0));i>=8;e[n+f]=255&s,f+=d,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;e[n+f]=255&a,f+=d,a/=256,l-=8);e[n+f-d]|=128*m},Is=Rs;function Rs(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}function js(e){return e.type===Rs.Bytes?e.readVarint()+e.pos:e.pos+1}function Ls(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function zs(e,t,n){var r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.ceil(Math.log(t)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=e;i--)n.buf[i+r]=n.buf[i]}function Ds(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function Bs(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function Ns(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function qs(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function Fs(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function Us(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function Vs(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function Ws(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function Gs(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function Zs(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function Hs(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function Ks(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}Rs.Varint=0,Rs.Fixed64=1,Rs.Bytes=2,Rs.Fixed32=5,Rs.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,e(i,t,this),this.pos===o&&this.skip(r)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=Zs(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=Ks(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Zs(this.buf,this.pos)+4294967296*Zs(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=Zs(this.buf,this.pos)+4294967296*Ks(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=Ss(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=Ss(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,n,r=this.buf;return t=127&(n=r[this.pos++]),n<128?t:(t|=(127&(n=r[this.pos++]))<<7,n<128?t:(t|=(127&(n=r[this.pos++]))<<14,n<128?t:(t|=(127&(n=r[this.pos++]))<<21,n<128?t:function(e,t,n){var r,i,o=n.buf;if(r=(112&(i=o[n.pos++]))>>4,i<128)return Ls(e,r,t);if(r|=(127&(i=o[n.pos++]))<<3,i<128)return Ls(e,r,t);if(r|=(127&(i=o[n.pos++]))<<10,i<128)return Ls(e,r,t);if(r|=(127&(i=o[n.pos++]))<<17,i<128)return Ls(e,r,t);if(r|=(127&(i=o[n.pos++]))<<24,i<128)return Ls(e,r,t);if(r|=(1&(i=o[n.pos++]))<<31,i<128)return Ls(e,r,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(n=r[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=function(e,t,n){for(var r="",i=t;i<n;){var o,a,s,u=e[i],l=null,c=u>239?4:u>223?3:u>191?2:1;if(i+c>n)break;1===c?u<128&&(l=u):2===c?128==(192&(o=e[i+1]))&&(l=(31&u)<<6|63&o)<=127&&(l=null):3===c?(o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&((l=(15&u)<<12|(63&o)<<6|63&a)<=2047||l>=55296&&l<=57343)&&(l=null)):4===c&&(o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&((l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||l>=1114112)&&(l=null)),null===l?(l=65533,c=1):l>65535&&(l-=65536,r+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),r+=String.fromCharCode(l),i+=c}return r}(this.buf,this.pos,e);return this.pos=e,t},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){var n=js(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){var t=js(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){var t=js(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){var t=js(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){var t=js(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){var t=js(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){var t=js(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){var t=js(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){var t=js(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===Rs.Varint)for(;this.buf[this.pos++]>127;);else if(t===Rs.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Rs.Fixed32)this.pos+=4;else{if(t!==Rs.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Hs(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Hs(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Hs(this.buf,-1&e,this.pos),Hs(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Hs(this.buf,-1&e,this.pos),Hs(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var n,r;if(e>=0?(n=e%4294967296|0,r=e/4294967296|0):(r=~(-e/4294967296),4294967295^(n=~(-e%4294967296))?n=n+1|0:(n=0,r=r+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,n){n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos]=127&e}(n,0,t),function(e,t){var n=(7&e)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(r,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,n){for(var r,i,o=0;o<t.length;o++){if((r=t.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):i=r;continue}if(r<56320){e[n++]=239,e[n++]=191,e[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(e[n++]=239,e[n++]=191,e[n++]=189,i=null);r<128?e[n++]=r:(r<2048?e[n++]=r>>6|192:(r<65536?e[n++]=r>>12|224:(e[n++]=r>>18|240,e[n++]=r>>12&63|128),e[n++]=r>>6&63|128),e[n++]=63&r|128)}return n}(this.buf,e,this.pos);var n=this.pos-t;n>=128&&zs(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),Os(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Os(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var r=this.pos-n;r>=128&&zs(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(e,t,n){this.writeTag(e,Rs.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){this.writeMessage(e,Ds,t)},writePackedSVarint:function(e,t){this.writeMessage(e,Bs,t)},writePackedBoolean:function(e,t){this.writeMessage(e,Fs,t)},writePackedFloat:function(e,t){this.writeMessage(e,Ns,t)},writePackedDouble:function(e,t){this.writeMessage(e,qs,t)},writePackedFixed32:function(e,t){this.writeMessage(e,Us,t)},writePackedSFixed32:function(e,t){this.writeMessage(e,Vs,t)},writePackedFixed64:function(e,t){this.writeMessage(e,Ws,t)},writePackedSFixed64:function(e,t){this.writeMessage(e,Gs,t)},writeBytesField:function(e,t){this.writeTag(e,Rs.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Rs.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Rs.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Rs.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Rs.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Rs.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Rs.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Rs.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Rs.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Rs.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var Ys=3;function Xs(e,t,n){1===e&&n.readMessage($s,t)}function $s(e,t,n){if(3===e){var r=n.readMessage(Js,{}),i=r.id,o=r.bitmap,a=r.width,s=r.height,u=r.left,l=r.top,c=r.advance;t.push({id:i,bitmap:new ko({width:a+2*Ys,height:s+2*Ys},o),metrics:{width:a,height:s,left:u,top:l,advance:c}})}}function Js(e,t,n){1===e?t.id=n.readVarint():2===e?t.bitmap=n.readBytes():3===e?t.width=n.readVarint():4===e?t.height=n.readVarint():5===e?t.left=n.readSVarint():6===e?t.top=n.readSVarint():7===e&&(t.advance=n.readVarint())}var Qs=Ys,eu=function(e,t,n){this.target=e,this.parent=t,this.mapId=n,this.callbacks={},this.callbackID=0,_(["receive"],this),this.target.addEventListener("message",this.receive,!1)};function tu(e,t,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[e*r-2*Math.PI*6378137/2,t*r-2*Math.PI*6378137/2]}eu.prototype.send=function(e,t,n,r){var i=n?this.mapId+":"+this.callbackID++:null;n&&(this.callbacks[i]=n);var o=[];this.target.postMessage({targetMapId:r,sourceMapId:this.mapId,type:e,id:String(i),data:er(t,o)},o)},eu.prototype.receive=function(e){var t,n=this,r=e.data,i=r.id;if(!r.targetMapId||this.mapId===r.targetMapId){var o=function(e,t){var r=[];n.target.postMessage({sourceMapId:n.mapId,type:"<response>",id:String(i),error:e?er(e):null,data:er(t,r)},r)};if("<response>"===r.type)t=this.callbacks[r.id],delete this.callbacks[r.id],t&&r.error?t(tr(r.error)):t&&t(null,tr(r.data));else if(void 0!==r.id&&this.parent[r.type])this.parent[r.type](r.sourceMapId,tr(r.data),o);else if(void 0!==r.id&&this.parent.getWorkerSource){var a=r.type.split("."),s=tr(r.data);this.parent.getWorkerSource(r.sourceMapId,a[0],s.source)[a[1]](s,o)}else this.parent[r.type](tr(r.data))}},eu.prototype.remove=function(){this.target.removeEventListener("message",this.receive,!1)};var nu=function(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))};nu.prototype.setNorthEast=function(e){return this._ne=e instanceof ru?new ru(e.lng,e.lat):ru.convert(e),this},nu.prototype.setSouthWest=function(e){return this._sw=e instanceof ru?new ru(e.lng,e.lat):ru.convert(e),this},nu.prototype.extend=function(e){var t,n,r=this._sw,i=this._ne;if(e instanceof ru)t=e,n=e;else{if(!(e instanceof nu))return Array.isArray(e)?e.every(Array.isArray)?this.extend(nu.convert(e)):this.extend(ru.convert(e)):this;if(t=e._sw,n=e._ne,!t||!n)return this}return r||i?(r.lng=Math.min(t.lng,r.lng),r.lat=Math.min(t.lat,r.lat),i.lng=Math.max(n.lng,i.lng),i.lat=Math.max(n.lat,i.lat)):(this._sw=new ru(t.lng,t.lat),this._ne=new ru(n.lng,n.lat)),this},nu.prototype.getCenter=function(){return new ru((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},nu.prototype.getSouthWest=function(){return this._sw},nu.prototype.getNorthEast=function(){return this._ne},nu.prototype.getNorthWest=function(){return new ru(this.getWest(),this.getNorth())},nu.prototype.getSouthEast=function(){return new ru(this.getEast(),this.getSouth())},nu.prototype.getWest=function(){return this._sw.lng},nu.prototype.getSouth=function(){return this._sw.lat},nu.prototype.getEast=function(){return this._ne.lng},nu.prototype.getNorth=function(){return this._ne.lat},nu.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},nu.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},nu.prototype.isEmpty=function(){return!(this._sw&&this._ne)},nu.convert=function(e){return!e||e instanceof nu?e:new nu(e)};var ru=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid LngLat object: ("+e+", "+t+")");if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};function iu(e){return 2*Math.PI*6378137*Math.cos(e*Math.PI/180)}function ou(e){return(180+e)/360}function au(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function su(e,t){return e/iu(t)}function uu(e){var t=180-360*e;return 360/Math.PI*Math.atan(Math.exp(t*Math.PI/180))-90}ru.prototype.wrap=function(){return new ru(c(this.lng,-180,180),this.lat)},ru.prototype.toArray=function(){return[this.lng,this.lat]},ru.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},ru.prototype.toBounds=function(e){var t=360*e/40075017,n=t/Math.cos(Math.PI/180*this.lat);return new nu(new ru(this.lng-n,this.lat-t),new ru(this.lng+n,this.lat+t))},ru.convert=function(e){if(e instanceof ru)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new ru(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new ru(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var lu=function(e,t,n){void 0===n&&(n=0),this.x=+e,this.y=+t,this.z=+n};lu.fromLngLat=function(e,t){void 0===t&&(t=0);var n=ru.convert(e);return new lu(ou(n.lng),au(n.lat),su(t,n.lat))},lu.prototype.toLngLat=function(){return new ru(360*this.x-180,uu(this.y))},lu.prototype.toAltitude=function(){return this.z*iu(uu(this.y))};var cu=function(e,t,n){this.z=e,this.x=t,this.y=n,this.key=fu(0,e,t,n)};cu.prototype.equals=function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y},cu.prototype.url=function(e,t){var n,r,i,o,a,s=(n=this.x,r=this.y,i=this.z,o=tu(256*n,256*(r=Math.pow(2,i)-r-1),i),a=tu(256*(n+1),256*(r+1),i),o[0]+","+o[1]+","+a[0]+","+a[1]),u=function(e,t,n){for(var r,i="",o=e;o>0;o--)i+=(t&(r=1<<o-1)?1:0)+(n&r?2:0);return i}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===t?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",u).replace("{bbox-epsg-3857}",s)},cu.prototype.getTilePoint=function(e){var t=Math.pow(2,this.z);return new i((e.x*t-this.x)*qi,(e.y*t-this.y)*qi)};var pu=function(e,t){this.wrap=e,this.canonical=t,this.key=fu(e,t.z,t.x,t.y)},hu=function(e,t,n,r,i){this.overscaledZ=e,this.wrap=t,this.canonical=new cu(n,+r,+i),this.key=fu(t,e,r,i)};function fu(e,t,n,r){(e*=2)<0&&(e=-1*e-1);var i=1<<t;return 32*(i*i*e+i*r+n)+t}hu.prototype.equals=function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)},hu.prototype.scaledTo=function(e){var t=this.canonical.z-e;return e>this.canonical.z?new hu(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new hu(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)},hu.prototype.isChildOf=function(e){var t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t},hu.prototype.children=function(e){if(this.overscaledZ>=e)return[new hu(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var t=this.canonical.z+1,n=2*this.canonical.x,r=2*this.canonical.y;return[new hu(t,this.wrap,t,n,r),new hu(t,this.wrap,t,n+1,r),new hu(t,this.wrap,t,n,r+1),new hu(t,this.wrap,t,n+1,r+1)]},hu.prototype.isLessThan=function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))},hu.prototype.wrapped=function(){return new hu(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},hu.prototype.unwrapTo=function(e){return new hu(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)},hu.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},hu.prototype.toUnwrapped=function(){return new pu(this.wrap,this.canonical)},hu.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},hu.prototype.getTilePoint=function(e){return this.canonical.getTilePoint(new lu(e.x-this.wrap,e.y))},Jn("CanonicalTileID",cu),Jn("OverscaledTileID",hu,{omit:["posMatrix"]});var du=function(e,t,n){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return w('"'+n+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');var r=this.dim=t.height;this.border=Math.max(Math.ceil(t.height/2),1),this.stride=this.dim+2*this.border,this.data=new Int32Array(this.stride*this.stride);for(var i=t.data,o="terrarium"===n?this._unpackTerrarium:this._unpackMapbox,a=0;a<r;a++)for(var s=0;s<r;s++){var u=4*(a*r+s);this.set(s,a,o(i[u],i[u+1],i[u+2]))}for(var l=0;l<r;l++)this.set(-1,l,this.get(0,l)),this.set(r,l,this.get(r-1,l)),this.set(l,-1,this.get(l,0)),this.set(l,r,this.get(l,r-1));this.set(-1,-1,this.get(0,0)),this.set(r,-1,this.get(r-1,0)),this.set(-1,r,this.get(0,r-1)),this.set(r,r,this.get(r-1,r-1))};du.prototype.set=function(e,t,n){this.data[this._idx(e,t)]=n+65536},du.prototype.get=function(e,t){return this.data[this._idx(e,t)]-65536},du.prototype._idx=function(e,t){if(e<-this.border||e>=this.dim+this.border||t<-this.border||t>=this.dim+this.border)throw new RangeError("out of range source coordinates for DEM data");return(t+this.border)*this.stride+(e+this.border)},du.prototype._unpackMapbox=function(e,t,n){return(256*e*256+256*t+n)/10-1e4},du.prototype._unpackTerrarium=function(e,t,n){return 256*e+t+n/256-32768},du.prototype.getPixels=function(){return new Co({width:this.dim+2*this.border,height:this.dim+2*this.border},new Uint8Array(this.data.buffer))},du.prototype.backfillBorder=function(e,t,n){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var r=t*this.dim,i=t*this.dim+this.dim,o=n*this.dim,a=n*this.dim+this.dim;switch(t){case-1:r=i-1;break;case 1:i=r+1}switch(n){case-1:o=a-1;break;case 1:a=o+1}for(var s=l(r,-this.border,this.dim+this.border),u=l(i,-this.border,this.dim+this.border),c=l(o,-this.border,this.dim+this.border),p=l(a,-this.border,this.dim+this.border),h=-t*this.dim,f=-n*this.dim,d=c;d<p;d++)for(var m=s;m<u;m++)this.set(m,d,e.get(m+h,d+f))},Jn("DEMData",du);var mu=jr([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),_u=function(e){this._stringToNumber={},this._numberToString=[];for(var t=0;t<e.length;t++){var n=e[t];this._stringToNumber[n]=t,this._numberToString[t]=n}};_u.prototype.encode=function(e){return this._stringToNumber[e]},_u.prototype.decode=function(e){return this._numberToString[e]};var yu=function(e,t,n,r){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=n,e._y=r,this.properties=e.properties,null!=e.id&&(this.id=e.id)},vu={geometry:{configurable:!0}};vu.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},vu.geometry.set=function(e){this._geometry=e},yu.prototype.toJSON=function(){var e={geometry:this.geometry};for(var t in this)"_geometry"!==t&&"_vectorTileFeature"!==t&&(e[t]=this[t]);return e},Object.defineProperties(yu.prototype,vu);var gu=function(){this.state={},this.stateChanges={}};gu.prototype.updateState=function(e,t,n){var r=String(t);this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][r]=this.stateChanges[e][r]||{},p(this.stateChanges[e][r],n)},gu.prototype.getState=function(e,t){var n=String(t),r=this.state[e]||{},i=this.stateChanges[e]||{};return p({},r[n],i[n])},gu.prototype.initializeTileState=function(e,t){e.setFeatureState(this.state,t)},gu.prototype.coalesceChanges=function(e,t){var n={};for(var r in this.stateChanges){this.state[r]=this.state[r]||{};var i={};for(var o in this.stateChanges[r])this.state[r][o]||(this.state[r][o]={}),p(this.state[r][o],this.stateChanges[r][o]),i[o]=this.state[r][o];n[r]=i}if(this.stateChanges={},0!==Object.keys(n).length)for(var a in e)e[a].setFeatureState(n,t)};var bu=function(e,t,n){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=t||new Hn(qi,16,0),this.featureIndexArray=n||new di};function xu(e,t){return t-e}bu.prototype.insert=function(e,t,n,r,i){var o=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i);for(var a=0;a<t.length;a++){for(var s=t[a],u=[1/0,1/0,-1/0,-1/0],l=0;l<s.length;l++){var c=s[l];u[0]=Math.min(u[0],c.x),u[1]=Math.min(u[1],c.y),u[2]=Math.max(u[2],c.x),u[3]=Math.max(u[3],c.y)}u[0]<qi&&u[1]<qi&&u[2]>=0&&u[3]>=0&&this.grid.insert(o,u[0],u[1],u[2],u[3])}},bu.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new za.VectorTile(new Is(this.rawTileData)).layers,this.sourceLayerCoder=new _u(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},bu.prototype.query=function(e,t,n){var r=this;this.loadVTLayers();for(var i=e.params||{},o=qi/e.tileSize/e.scale,a=xn(i.filter),s=e.queryGeometry,u=e.queryPadding*o,l=1/0,c=1/0,p=-1/0,h=-1/0,f=0;f<s.length;f++)for(var d=s[f],m=0;m<d.length;m++){var _=d[m];l=Math.min(l,_.x),c=Math.min(c,_.y),p=Math.max(p,_.x),h=Math.max(h,_.y)}var y=this.grid.query(l-u,c-u,p+u,h+u);y.sort(xu);for(var v,g={},b=function(u){var l=y[u];if(l!==v){v=l;var c=r.featureIndexArray.get(l),p=null;r.loadMatchingFeature(g,c.bucketIndex,c.sourceLayerIndex,c.featureIndex,a,i.layers,t,function(t,i){p||(p=Ui(t));var a={};return t.id&&(a=n.getState(i.sourceLayer||"_geojsonTileLayer",t.id)),i.queryIntersectsFeature(s,t,a,p,r.z,e.transform,o,e.posMatrix)})}},x=0;x<y.length;x++)b(x);return g},bu.prototype.loadMatchingFeature=function(e,t,n,r,i,o,a,s){var u=this.bucketLayerIDs[t];if(!o||function(e,t){for(var n=0;n<e.length;n++)if(t.indexOf(e[n])>=0)return!0;return!1}(o,u)){var l=this.sourceLayerCoder.decode(n),c=this.vtLayers[l].feature(r);if(i(new mr(this.tileID.overscaledZ),c))for(var p=0;p<u.length;p++){var h=u[p];if(!(o&&o.indexOf(h)<0)){var f=a[h];if(f&&(!s||s(c,f))){var d=new yu(c,this.z,this.x,this.y);d.layer=f.serialize();var m=e[h];void 0===m&&(m=e[h]=[]),m.push({featureIndex:r,feature:d})}}}}},bu.prototype.lookupSymbolFeatures=function(e,t,n,r,i,o){var a={};this.loadVTLayers();for(var s=xn(r),u=0,l=e;u<l.length;u+=1){var c=l[u];this.loadMatchingFeature(a,t,n,c,s,i,o)}return a},bu.prototype.hasLayer=function(e){for(var t=0,n=this.bucketLayerIDs;t<n.length;t+=1)for(var r=0,i=n[t];r<i.length;r+=1)if(e===i[r])return!0;return!1},Jn("FeatureIndex",bu,{omit:["rawTileData","sourceLayerCoder"]});var wu=function(e,t){this.tileID=e,this.uid=f(),this.uses=0,this.tileSize=t,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.expiredRequestCount=0,this.state="loading"};wu.prototype.registerFadeDuration=function(e){var t=e+this.timeAdded;t<A.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)},wu.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},wu.prototype.loadVectorData=function(e,t,n){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){for(var r in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(e,t){var n={};if(!t)return n;for(var r=0,i=e;r<i.length;r+=1){var o=i[r],a=o.layerIds.map(function(e){return t.getLayer(e)}).filter(Boolean);if(0!==a.length){o.layers=a,o.stateDependentLayers=a.filter(function(e){return e.isStateDependent()});for(var s=0,u=a;s<u.length;s+=1)n[u[s].id]=o}}return n}(e.buckets,t.style),this.hasSymbolBuckets=!1,this.buckets){var i=this.buckets[r];if(i instanceof ps){if(this.hasSymbolBuckets=!0,!n)break;i.justReloaded=!0}}for(var o in this.queryPadding=0,this.buckets){var a=this.buckets[o];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(o).queryRadius(a))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new ii},wu.prototype.unloadVectorData=function(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},wu.prototype.unloadDEMData=function(){this.dem=null,this.neighboringTiles=null,this.state="unloaded"},wu.prototype.getBucket=function(e){return this.buckets[e.id]},wu.prototype.upload=function(e){for(var t in this.buckets){var n=this.buckets[t];n.uploadPending()&&n.upload(e)}var r=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new As(e,this.imageAtlas.image,r.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new As(e,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null)},wu.prototype.queryRenderedFeatures=function(e,t,n,r,i,o,a,s){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:n,scale:r,tileSize:this.tileSize,posMatrix:s,transform:o,params:i,queryPadding:this.queryPadding*a},e,t):{}},wu.prototype.querySourceFeatures=function(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData){var n=this.latestFeatureIndex.loadVTLayers(),r=t?t.sourceLayer:"",i=n._geojsonTileLayer||n[r];if(i)for(var o=xn(t&&t.filter),a=this.tileID.canonical,s=a.z,u=a.x,l=a.y,c={z:s,x:u,y:l},p=0;p<i.length;p++){var h=i.feature(p);if(o(new mr(this.tileID.overscaledZ),h)){var f=new yu(h,s,u,l);f.tile=c,e.push(f)}}}},wu.prototype.clearMask=function(){this.segments&&(this.segments.destroy(),delete this.segments),this.maskedBoundsBuffer&&(this.maskedBoundsBuffer.destroy(),delete this.maskedBoundsBuffer),this.maskedIndexBuffer&&(this.maskedIndexBuffer.destroy(),delete this.maskedIndexBuffer)},wu.prototype.setMask=function(e,t){if(!a(this.mask,e)&&(this.mask=e,this.clearMask(),!a(e,{0:!0}))){var n=new Dr,r=new Jr;this.segments=new yi,this.segments.prepareSegment(0,n,r);for(var o=Object.keys(e),s=0;s<o.length;s++){var u=e[o[s]],l=qi>>u.z,c=new i(u.x*l,u.y*l),p=new i(c.x+l,c.y+l),h=this.segments.prepareSegment(4,n,r);n.emplaceBack(c.x,c.y,c.x,c.y),n.emplaceBack(p.x,c.y,p.x,c.y),n.emplaceBack(c.x,p.y,c.x,p.y),n.emplaceBack(p.x,p.y,p.x,p.y);var f=h.vertexLength;r.emplaceBack(f,f+1,f+2),r.emplaceBack(f+1,f+2,f+3),h.vertexLength+=4,h.primitiveLength+=2}this.maskedBoundsBuffer=t.createVertexBuffer(n,mu.members),this.maskedIndexBuffer=t.createIndexBuffer(r)}},wu.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},wu.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},wu.prototype.setExpiryData=function(e){var t=this.expirationTime;if(e.cacheControl){var n=function(e){var t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(e,n,r,i){var o=r||i;return t[n]=!o||o.toLowerCase(),""}),t["max-age"]){var n=parseInt(t["max-age"],10);isNaN(n)?delete t["max-age"]:t["max-age"]=n}return t}(e.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var r=Date.now(),i=!1;if(this.expirationTime>r)i=!1;else if(t)if(this.expirationTime<t)i=!0;else{var o=this.expirationTime-t;o?this.expirationTime=r+Math.max(o,3e4):i=!0}else i=!0;i?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},wu.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},wu.prototype.setFeatureState=function(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(e).length){var n=this.latestFeatureIndex.loadVTLayers();for(var r in this.buckets){var i=this.buckets[r],o=i.layers[0].sourceLayer||"_geojsonTileLayer",a=n[o],s=e[o];a&&s&&0!==Object.keys(s).length&&(i.update(s,a,this.imageAtlas&&this.imageAtlas.patternPositions||{}),t&&t.style&&(this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(r).queryRadius(i))))}}},wu.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},wu.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<A.now()},wu.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},wu.prototype.setHoldDuration=function(e){this.symbolFadeHoldUntil=A.now()+e};var Eu={horizontal:1,vertical:2,horizontalOnly:3},Tu=function(){this.text="",this.sectionIndex=[],this.sections=[]};Tu.fromFeature=function(e,t){for(var n=new Tu,r=0;r<e.sections.length;r++){var i=e.sections[r];n.sections.push({scale:i.scale||1,fontStack:i.fontStack||t}),n.text+=i.text;for(var o=0;o<i.text.length;o++)n.sectionIndex.push(r)}return n},Tu.prototype.length=function(){return this.text.length},Tu.prototype.getSection=function(e){return this.sections[this.sectionIndex[e]]},Tu.prototype.getCharCode=function(e){return this.text.charCodeAt(e)},Tu.prototype.verticalizePunctuation=function(){this.text=function(e){for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n+1)||null,i=e.charCodeAt(n-1)||null;r&&sr(r)&&!ns[e[n+1]]||i&&sr(i)&&!ns[e[n-1]]||!ns[e[n]]?t+=e[n]:t+=ns[e[n]]}return t}(this.text)},Tu.prototype.trim=function(){for(var e=0,t=0;t<this.text.length&&ku[this.text.charCodeAt(t)];t++)e++;for(var n=this.text.length,r=this.text.length-1;r>=0&&r>=e&&ku[this.text.charCodeAt(r)];r--)n--;this.text=this.text.substring(e,n),this.sectionIndex=this.sectionIndex.slice(e,n)},Tu.prototype.substring=function(e,t){var n=new Tu;return n.text=this.text.substring(e,t),n.sectionIndex=this.sectionIndex.slice(e,t),n.sections=this.sections,n},Tu.prototype.toString=function(){return this.text},Tu.prototype.getMaxScale=function(){var e=this;return this.sectionIndex.reduce(function(t,n){return Math.max(t,e.sections[n].scale)},0)};var ku={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Cu={};function Mu(e,t,n,r){var i=Math.pow(e-t,2);return r?e<t?i/2:2*i:i+Math.abs(n)*n}function Pu(e,t){var n=0;return 10===e&&(n-=1e4),40!==e&&65288!==e||(n+=50),41!==t&&65289!==t||(n+=50),n}function Au(e,t,n,r,i,o){for(var a=null,s=Mu(t,n,i,o),u=0,l=r;u<l.length;u+=1){var c=l[u],p=Mu(t-c.x,n,i,o)+c.badness;p<=s&&(a=c,s=p)}return{index:e,x:t,priorBreak:a,badness:s}}function Su(e,t,n,r){if(!n)return[];if(!e)return[];for(var i,o=[],a=function(e,t,n,r){for(var i=0,o=0;o<e.length();o++){var a=e.getSection(o),s=r[a.fontStack],u=s&&s[e.getCharCode(o)];u&&(i+=u.metrics.advance*a.scale+t)}return i/Math.max(1,Math.ceil(i/n))}(e,t,n,r),s=0,u=0;u<e.length();u++){var l=e.getSection(u),c=e.getCharCode(u),p=r[l.fontStack],h=p&&p[c];h&&!ku[c]&&(s+=h.metrics.advance*l.scale+t),u<e.length()-1&&(Cu[c]||!((i=c)<11904)&&(rr["Bopomofo Extended"](i)||rr.Bopomofo(i)||rr["CJK Compatibility Forms"](i)||rr["CJK Compatibility Ideographs"](i)||rr["CJK Compatibility"](i)||rr["CJK Radicals Supplement"](i)||rr["CJK Strokes"](i)||rr["CJK Symbols and Punctuation"](i)||rr["CJK Unified Ideographs Extension A"](i)||rr["CJK Unified Ideographs"](i)||rr["Enclosed CJK Letters and Months"](i)||rr["Halfwidth and Fullwidth Forms"](i)||rr.Hiragana(i)||rr["Ideographic Description Characters"](i)||rr["Kangxi Radicals"](i)||rr["Katakana Phonetic Extensions"](i)||rr.Katakana(i)||rr["Vertical Forms"](i)||rr["Yi Radicals"](i)||rr["Yi Syllables"](i)))&&o.push(Au(u+1,s,a,o,Pu(c,e.getCharCode(u+1)),!1))}return function e(t){return t?e(t.priorBreak).concat(t.index):[]}(Au(e.length(),s,a,o,0,!0))}function Ou(e){var t=.5,n=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:t,verticalAlign:n}}function Iu(e,t,n,r,i){if(i){var o=e[r],a=t[o.fontStack],s=a&&a[o.glyph];if(s)for(var u=s.metrics.advance*o.scale,l=(e[r].x+u)*i,c=n;c<=r;c++)e[c].x-=l}}Cu[10]=!0,Cu[32]=!0,Cu[38]=!0,Cu[40]=!0,Cu[41]=!0,Cu[43]=!0,Cu[45]=!0,Cu[47]=!0,Cu[173]=!0,Cu[183]=!0,Cu[8203]=!0,Cu[8208]=!0,Cu[8211]=!0,Cu[8231]=!0,e.createCommonjsModule=t,e.Point=i,e.window=self,e.getJSON=function(e,t){return X(p(e,{type:"json"}),t)},e.getImage=te,e.ResourceType=H,e.browser=A,e.normalizeSpriteURL=function(e,t,n,r){var i=N(e);return j(e)?(i.path="/styles/v1"+i.path+"/sprite"+t+n,R(i,r)):(i.path+=""+t+n,q(i))},e.RGBAImage=Co,e.potpack=xs,e.ImagePosition=ws,e.Texture=As,e.normalizeGlyphsURL=function(e,t){if(!j(e))return e;var n=N(e);return n.path="/fonts/v1"+n.path,R(n,t)},e.getArrayBuffer=$,e.parseGlyphPBF=function(e){return new Is(e).readFields(Xs,[])},e.isChar=rr,e.asyncAll=function(e,t,n){if(!e.length)return n(null,[]);var r=e.length,i=new Array(e.length),o=null;e.forEach(function(e,a){t(e,function(e,t){e&&(o=e),i[a]=t,0==--r&&n(o,i)})})},e.AlphaImage=ko,e.styleSpec=se,e.endsWith=y,e.extend=p,e.sphericalToCartesian=function(e){var t=e[0],n=e[1],r=e[2];return n+=90,n*=Math.PI/180,r*=Math.PI/180,{x:t*Math.cos(n)*Math.sin(r),y:t*Math.sin(n)*Math.sin(r),z:t*Math.cos(r)}},e.Evented=ae,e.validateStyle=Un,e.validateLight=Vn,e.emitValidationErrors=Zn,e.Color=Ae,e.number=nt,e.Properties=Ar,e.Transitionable=vr,e.Transitioning=br,e.PossiblyEvaluated=Er,e.DataConstantProperty=Tr,e.warnOnce=w,e.uniqueId=f,e.Actor=eu,e.pick=function(e,t){for(var n={},r=0;r<t.length;r++){var i=t[r];i in e&&(n[i]=e[i])}return n},e.normalizeSourceURL=function(e,t){if(!j(e))return e;var n=N(e);return n.path="/v4/"+n.authority+".json",n.params.push("secure"),R(n,t)},e.LngLatBounds=nu,e.clamp=l,e.Event=ie,e.ErrorEvent=oe,e.normalizeTileURL=function(e,t,n){if(!t||!j(t))return e;var r=N(e),i=A.devicePixelRatio>=2||512===n?"@2x":"",o=A.supportsWebp?".webp":"$1";return r.path=r.path.replace(D,""+i+o),function(e){for(var t=0;t<e.length;t++)0===e[t].indexOf("access_token=tk.")&&(e[t]="access_token="+(O.ACCESS_TOKEN||""))}(r.params),q(r)},e.postTurnstileEvent=W,e.postMapLoadEvent=Z,e.OverscaledTileID=hu,e.EXTENT=qi,e.CanonicalTileID=cu,e.StructArrayLayout4i8=Dr,e.rasterBoundsAttributes=mu,e.SegmentVector=yi,e.MercatorCoordinate=lu,e.getVideo=function(e,t){var n,r,i=self.document.createElement("video");i.muted=!0,i.onloadstart=function(){t(null,i)};for(var o=0;o<e.length;o++){var a=self.document.createElement("source");n=e[o],r=void 0,(r=self.document.createElement("a")).href=n,(r.protocol!==self.document.location.protocol||r.host!==self.document.location.host)&&(i.crossOrigin="Anonymous"),a.src=e[o],i.appendChild(a)}return{cancel:function(){}}},e.ValidationError=ue,e.bindAll=_,e.isEqual=a,e.Tile=wu,e.keysDifference=function(e,t){var n=[];for(var r in e)r in t||n.push(r);return n},e.SourceFeatureState=gu,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.create=function(){var e=new oo(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.invert=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],l=t[7],c=t[8],p=t[9],h=t[10],f=t[11],d=t[12],m=t[13],_=t[14],y=t[15],v=n*s-r*a,g=n*u-i*a,b=n*l-o*a,x=r*u-i*s,w=r*l-o*s,E=i*l-o*u,T=c*m-p*d,k=c*_-h*d,C=c*y-f*d,M=p*_-h*m,P=p*y-f*m,A=h*y-f*_,S=v*A-g*P+b*M+x*C-w*k+E*T;return S?(S=1/S,e[0]=(s*A-u*P+l*M)*S,e[1]=(i*P-r*A-o*M)*S,e[2]=(m*E-_*w+y*x)*S,e[3]=(h*w-p*E-f*x)*S,e[4]=(u*C-a*A-l*k)*S,e[5]=(n*A-i*C+o*k)*S,e[6]=(_*b-d*E-y*g)*S,e[7]=(c*E-h*b+f*g)*S,e[8]=(a*P-s*C+l*T)*S,e[9]=(r*C-n*P-o*T)*S,e[10]=(d*w-m*b+y*v)*S,e[11]=(p*b-c*w-f*v)*S,e[12]=(s*k-a*M-u*T)*S,e[13]=(n*M-r*k+i*T)*S,e[14]=(m*g-d*x-_*v)*S,e[15]=(c*x-p*g+h*v)*S,e):null},e.multiply=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],p=t[8],h=t[9],f=t[10],d=t[11],m=t[12],_=t[13],y=t[14],v=t[15],g=n[0],b=n[1],x=n[2],w=n[3];return e[0]=g*r+b*s+x*p+w*m,e[1]=g*i+b*u+x*h+w*_,e[2]=g*o+b*l+x*f+w*y,e[3]=g*a+b*c+x*d+w*v,g=n[4],b=n[5],x=n[6],w=n[7],e[4]=g*r+b*s+x*p+w*m,e[5]=g*i+b*u+x*h+w*_,e[6]=g*o+b*l+x*f+w*y,e[7]=g*a+b*c+x*d+w*v,g=n[8],b=n[9],x=n[10],w=n[11],e[8]=g*r+b*s+x*p+w*m,e[9]=g*i+b*u+x*h+w*_,e[10]=g*o+b*l+x*f+w*y,e[11]=g*a+b*c+x*d+w*v,g=n[12],b=n[13],x=n[14],w=n[15],e[12]=g*r+b*s+x*p+w*m,e[13]=g*i+b*u+x*h+w*_,e[14]=g*o+b*l+x*f+w*y,e[15]=g*a+b*c+x*d+w*v,e},e.translate=function(e,t,n){var r,i,o,a,s,u,l,c,p,h,f,d,m=n[0],_=n[1],y=n[2];return t===e?(e[12]=t[0]*m+t[4]*_+t[8]*y+t[12],e[13]=t[1]*m+t[5]*_+t[9]*y+t[13],e[14]=t[2]*m+t[6]*_+t[10]*y+t[14],e[15]=t[3]*m+t[7]*_+t[11]*y+t[15]):(r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],p=t[8],h=t[9],f=t[10],d=t[11],e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=u,e[6]=l,e[7]=c,e[8]=p,e[9]=h,e[10]=f,e[11]=d,e[12]=r*m+s*_+p*y+t[12],e[13]=i*m+u*_+h*y+t[13],e[14]=o*m+l*_+f*y+t[14],e[15]=a*m+c*_+d*y+t[15]),e},e.scale=function(e,t,n){var r=n[0],i=n[1],o=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.rotateX=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[4],a=t[5],s=t[6],u=t[7],l=t[8],c=t[9],p=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+l*r,e[5]=a*i+c*r,e[6]=s*i+p*r,e[7]=u*i+h*r,e[8]=l*i-o*r,e[9]=c*i-a*r,e[10]=p*i-s*r,e[11]=h*i-u*r,e},e.rotateZ=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],u=t[3],l=t[4],c=t[5],p=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+l*r,e[1]=a*i+c*r,e[2]=s*i+p*r,e[3]=u*i+h*r,e[4]=l*i-o*r,e[5]=c*i-a*r,e[6]=p*i-s*r,e[7]=h*i-u*r,e},e.perspective=function(e,t,n,r,i){var o=1/Math.tan(t/2),a=1/(r-i);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*a,e[15]=0,e},e.ortho=function(e,t,n,r,i,o,a){var s=1/(t-n),u=1/(r-i),l=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*u,e[14]=(a+o)*l,e[15]=1,e},e.create$1=fo,e.normalize=mo,e.transformMat4=_o,e.forEach=yo,e.getSizeData=is,e.evaluateSizeForFeature=function(e,t,n){var r=t;return"source"===e.functionType?n.lowerSize/256:"composite"===e.functionType?nt(n.lowerSize/256,n.upperSize/256,r.uSizeT):r.uSize},e.evaluateSizeForZoom=function(e,t,n){if("constant"===e.functionType)return{uSizeT:0,uSize:e.layoutSize};if("source"===e.functionType)return{uSizeT:0,uSize:0};if("camera"===e.functionType){var r=e.propertyValue,i=e.zoomRange,o=e.sizeRange,a=l(hn(r,n.specification).interpolationFactor(t,i.min,i.max),0,1);return{uSizeT:0,uSize:o.min+a*(o.max-o.min)}}var s=e.propertyValue,u=e.zoomRange;return{uSizeT:l(hn(s,n.specification).interpolationFactor(t,u.min,u.max),0,1),uSize:0}},e.SIZE_PACK_FACTOR=256,e.addDynamicAttributes=us,e.properties=fs,e.WritingMode=Eu,e.multiPolygonIntersectsBufferedPoint=Gi,e.multiPolygonIntersectsMultiPolygon=Zi,e.multiPolygonIntersectsBufferedMultiLine=Hi,e.polygonIntersectsPolygon=function(e,t){for(var n=0;n<e.length;n++)if(eo(t,e[n]))return!0;for(var r=0;r<t.length;r++)if(eo(e,t[r]))return!0;return!!Yi(e,t)},e.distToSegmentSquared=Ji,e.SymbolInstanceArray=ui,e.StyleLayer=Sr,e.createStyleLayer=function(e){return"custom"===e.type?new gs(e):new bs[e.type](e)},e.clone=b,e.filterObject=g,e.mapObject=v,e.getReferrer=Y,e.isMapboxURL=j,e.normalizeStyleURL=function(e,t){if(!j(e))return e;var n=N(e);return n.path="/styles/v1"+n.path,R(n,t)},e.registerForPluginAvailability=function(e){return pr?e({pluginURL:pr,completionCallback:lr}):fr.once("pluginAvailable",e),e},e.evented=fr,e.ZoomHistory=nr,e.validateCustomStyleLayer=function(e){var t=[],n=e.id;return void 0===n&&t.push({message:"layers."+n+': missing required property "id"'}),void 0===e.render&&t.push({message:"layers."+n+': missing required method "render"'}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:"layers."+n+': property "renderingMode" must be either "2d" or "3d"'}),t},e.createLayout=jr,e.ProgramConfiguration=zi,e.Uniform1i=wi,e.Uniform1f=Ei,e.Uniform2f=Ti,e.Uniform4f=Ci,e.Uniform3f=ki,e.UniformMatrix4f=Ai,e.create$2=ao,e.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},e.create$3=so,e.length=uo,e.fromValues=lo,e.normalize$1=function(e,t){var n=t[0],r=t[1],i=t[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o),e},e.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},e.cross=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],u=n[2];return e[0]=i*u-o*s,e[1]=o*a-r*u,e[2]=r*s-i*a,e},e.transformMat3=function(e,t,n){var r=t[0],i=t[1],o=t[2];return e[0]=r*n[0]+i*n[3]+o*n[6],e[1]=r*n[1]+i*n[4]+o*n[7],e[2]=r*n[2]+i*n[5]+o*n[8],e},e.len=po,e.forEach$1=ho,e.UniformColor=Mi,e.StructArrayLayout2i4=zr,e.StructArrayLayout2ui4=Qr,e.StructArrayLayout3ui6=Jr,e.StructArrayLayout1ui2=ei,e.LngLat=ru,e.mercatorXfromLng=ou,e.mercatorYfromLat=au,e.mercatorZfromAltitude=su,e.wrap=c,e.UnwrappedTileID=pu,e.create$4=function(){var e=new oo(4);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},e.rotate=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u+o*s,e[1]=i*u+a*s,e[2]=r*-s+o*u,e[3]=i*-s+a*u,e},e.ease=u,e.bezier=s,e.config=O,e.EvaluationParameters=mr,e.version="0.51.0",e.setRTLTextPlugin=function(e,t){if(cr)throw new Error("setRTLTextPlugin cannot be called multiple times.");cr=!0,pr=A.resolveURL(e),lr=function(e){e?(cr=!1,pr=null,t&&t(e)):hr=!0},fr.fire(new ie("pluginAvailable",{pluginURL:pr,completionCallback:lr}))},e.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},e.featureFilter=xn,e.Anchor=rs,e.GLYPH_PBF_BORDER=Qs,e.shapeText=function(e,t,n,r,i,o,a,s,u,l,c){var p=Tu.fromFeature(e,n);c===Eu.vertical&&p.verticalizePunctuation();var h,f=[],d={positionedGlyphs:f,text:p,top:u[1],bottom:u[1],left:u[0],right:u[0],writingMode:c},m=dr.processBidirectionalText,_=dr.processStyledBidirectionalText;if(m&&1===p.sections.length){h=[];for(var y=0,v=m(p.toString(),Su(p,s,r,t));y<v.length;y+=1){var g=v[y],b=new Tu;b.text=g,b.sections=p.sections;for(var x=0;x<g.length;x++)b.sectionIndex.push(0);h.push(b)}}else if(_){h=[];for(var w=0,E=_(p.text,p.sectionIndex,Su(p,s,r,t));w<E.length;w+=1){var T=E[w],k=new Tu;k.text=T[0],k.sectionIndex=T[1],k.sections=p.sections,h.push(k)}}else h=function(e,t){for(var n=[],r=e.text,i=0,o=0,a=t;o<a.length;o+=1){var s=a[o];n.push(e.substring(i,s)),i=s}return i<r.length&&n.push(e.substring(i,r.length)),n}(p,Su(p,s,r,t));return function(e,t,n,r,i,o,a,s,u){for(var l=0,c=-17,p=0,h=e.positionedGlyphs,f="right"===o?1:"left"===o?0:.5,d=0,m=n;d<m.length;d+=1){var _=m[d];_.trim();var y=_.getMaxScale();if(_.length()){for(var v=h.length,g=0;g<_.length();g++){var b=_.getSection(g),x=_.getCharCode(g),w=24*(y-b.scale),E=t[b.fontStack],T=E&&E[x];T&&(ar(x)&&a!==Eu.horizontal?(h.push({glyph:x,x:l,y:w,vertical:!0,scale:b.scale,fontStack:b.fontStack}),l+=u*b.scale+s):(h.push({glyph:x,x:l,y:c+w,vertical:!1,scale:b.scale,fontStack:b.fontStack}),l+=T.metrics.advance*b.scale+s))}if(h.length!==v){var k=l-s;p=Math.max(k,p),Iu(h,t,v,h.length-1,f)}l=0,c+=r*y}else c+=r}var C=Ou(i),M=C.horizontalAlign,P=C.verticalAlign;!function(e,t,n,r,i,o,a){for(var s=(t-n)*i,u=(-r*a+.5)*o,l=0;l<e.length;l++)e[l].x+=s,e[l].y+=u}(h,f,M,P,p,r,n.length);var A=c- -17;e.top+=-P*A,e.bottom=e.top+A,e.left+=-M*p,e.right=e.left+p}(d,t,h,i,o,a,c,s,l),!!f.length&&(d.text=d.text.toString(),d)},e.shapeIcon=function(e,t,n){var r=Ou(n),i=r.horizontalAlign,o=r.verticalAlign,a=t[0],s=t[1],u=a-e.displaySize[0]*i,l=u+e.displaySize[0],c=s-e.displaySize[1]*o;return{image:e,top:c,bottom:c+e.displaySize[1],left:u,right:l}},e.allowsVerticalWritingMode=ir,e.allowsLetterSpacing=function(e){for(var t=0,n=e;t<n.length;t+=1)if(!or(n[t].charCodeAt(0)))return!1;return!0},e.classifyRings=ca,e.SymbolBucket=ps,e.register=Jn,e.FeatureIndex=bu,e.CollisionBoxArray=ii,e.DictionaryCoder=_u,e.LineBucket=Va,e.FillBucket=da,e.FillExtrusionBucket=xa,e.ImageAtlas=Ts,e.mvt=za,e.Protobuf=Is,e.DEMData=du,e.vectorTile=za,e.Point$1=i,e.pbf=Is,e.plugin=dr}),r(0,function(e){function t(e){var n=typeof e;if("number"===n||"boolean"===n||"string"===n||null==e)return JSON.stringify(e);if(Array.isArray(e)){for(var r="[",i=0,o=e;i<o.length;i+=1)r+=t(o[i])+",";return r+"]"}for(var a=Object.keys(e).sort(),s="{",u=0;u<a.length;u++)s+=JSON.stringify(a[u])+":"+t(e[a[u]])+",";return s+"}"}function n(n){for(var r="",i=0,o=e.refProperties;i<o.length;i+=1)r+="/"+t(n[o[i]]);return r}var r=function(e){e&&this.replace(e)};function i(e,t,n,r,i){if(void 0===t.segment)return!0;for(var o=t,a=t.segment+1,s=0;s>-n/2;){if(--a<0)return!1;s-=e[a].dist(o),o=e[a]}s+=e[a].dist(e[a+1]),a++;for(var u=[],l=0;s<n/2;){var c=e[a-1],p=e[a],h=e[a+1];if(!h)return!1;var f=c.angleTo(p)-p.angleTo(h);for(f=Math.abs((f+3*Math.PI)%(2*Math.PI)-Math.PI),u.push({distance:s,angleDelta:f}),l+=f;s-u[0].distance>r;)l-=u.shift().angleDelta;if(l>i)return!1;a++,s+=p.dist(h)}return!0}function o(e){for(var t=0,n=0;n<e.length-1;n++)t+=e[n].dist(e[n+1]);return t}function a(e,t,n){return e?.6*t*n:0}function s(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function u(t,n,r,u,l,c){for(var p=a(r,l,c),h=s(r,u)*c,f=0,d=o(t)/2,m=0;m<t.length-1;m++){var _=t[m],y=t[m+1],v=_.dist(y);if(f+v>d){var g=(d-f)/v,b=e.number(_.x,y.x,g),x=e.number(_.y,y.y,g),w=new e.Anchor(b,x,y.angleTo(_),m);return w._round(),!p||i(t,w,h,p,n)?w:void 0}f+=v}}function l(t,n,r,u,l,c,p,h,f){var d=a(u,c,p),m=s(u,l),_=m*p,y=0===t[0].x||t[0].x===f||0===t[0].y||t[0].y===f;return n-_<n/4&&(n=_+n/4),function t(n,r,a,s,u,l,c,p,h){for(var f=l/2,d=o(n),m=0,_=r-a,y=[],v=0;v<n.length-1;v++){for(var g=n[v],b=n[v+1],x=g.dist(b),w=b.angleTo(g);_+a<m+x;){var E=((_+=a)-m)/x,T=e.number(g.x,b.x,E),k=e.number(g.y,b.y,E);if(T>=0&&T<h&&k>=0&&k<h&&_-f>=0&&_+f<=d){var C=new e.Anchor(T,k,w,v);C._round(),s&&!i(n,C,l,s,u)||y.push(C)}}m+=x}return p||y.length||c||(y=t(n,m/2,a,s,u,l,c,!0,h)),y}(t,y?n/2*h%n:(m/2+2*c)*p*h%n,n,d,r,_,y,!1,f)}r.prototype.replace=function(e){this._layerConfigs={},this._layers={},this.update(e,[])},r.prototype.update=function(t,r){for(var i=this,o=0,a=t;o<a.length;o+=1){var s=a[o];i._layerConfigs[s.id]=s;var u=i._layers[s.id]=e.createStyleLayer(s);u._featureFilter=e.featureFilter(u.filter)}for(var l=0,c=r;l<c.length;l+=1){var p=c[l];delete i._layerConfigs[p],delete i._layers[p]}this.familiesBySource={};for(var h=0,f=function(e){for(var t={},r=0;r<e.length;r++){var i=n(e[r]),o=t[i];o||(o=t[i]=[]),o.push(e[r])}var a=[];for(var s in t)a.push(t[s]);return a}(e.values(this._layerConfigs));h<f.length;h+=1){var d=f[h].map(function(e){return i._layers[e.id]}),m=d[0];if("none"!==m.visibility){var _=m.source||"",y=i.familiesBySource[_];y||(y=i.familiesBySource[_]={});var v=m.sourceLayer||"_geojsonTileLayer",g=y[v];g||(g=y[v]=[]),g.push(d)}}};var c=function(t,n,r,i,o,a,s,u,l,c,p,h){var f=s.top*u-l,d=s.bottom*u+l,m=s.left*u-l,_=s.right*u+l;if(this.boxStartIndex=t.length,c){var y=d-f,v=_-m;y>0&&(y=Math.max(10*u,y),this._addLineCollisionCircles(t,n,r,r.segment,v,y,i,o,a,p))}else{if(h){var g=new e.Point(m,f),b=new e.Point(_,f),x=new e.Point(m,d),w=new e.Point(_,d),E=h*Math.PI/180;g._rotate(E),b._rotate(E),x._rotate(E),w._rotate(E),m=Math.min(g.x,b.x,x.x,w.x),_=Math.max(g.x,b.x,x.x,w.x),f=Math.min(g.y,b.y,x.y,w.y),d=Math.max(g.y,b.y,x.y,w.y)}t.emplaceBack(r.x,r.y,m,f,_,d,i,o,a,0,0)}this.boxEndIndex=t.length};c.prototype._addLineCollisionCircles=function(e,t,n,r,i,o,a,s,u,l){var c=o/2,p=Math.floor(i/c)||1,h=1+.4*Math.log(l)/Math.LN2,f=Math.floor(p*h/2),d=-o/2,m=n,_=r+1,y=d,v=-i/2,g=v-i/4;do{if(--_<0){if(y>v)return;_=0;break}y-=t[_].dist(m),m=t[_]}while(y>g);for(var b=t[_].dist(t[_+1]),x=-f;x<p+f;x++){var w=x*c,E=v+w;if(w<0&&(E+=w),w>i&&(E+=w-i),!(E<y)){for(;y+b<E;){if(y+=b,++_+1>=t.length)return;b=t[_].dist(t[_+1])}var T=E-y,k=t[_],C=t[_+1].sub(k)._unit()._mult(T)._add(k)._round(),M=Math.abs(E-d)<c?0:.8*(E-d);e.emplaceBack(C.x,C.y,-o/2,-o/2,o/2,o/2,a,s,u,o/2,M)}}};var p=f,h=f;function f(e,t){if(!(this instanceof f))return new f(e,t);if(this.data=e||[],this.length=this.data.length,this.compare=t||d,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}function d(e,t){return e<t?-1:e>t?1:0}function m(t,n,r){void 0===n&&(n=1),void 0===r&&(r=!1);for(var i=1/0,o=1/0,a=-1/0,s=-1/0,u=t[0],l=0;l<u.length;l++){var c=u[l];(!l||c.x<i)&&(i=c.x),(!l||c.y<o)&&(o=c.y),(!l||c.x>a)&&(a=c.x),(!l||c.y>s)&&(s=c.y)}var h=a-i,f=s-o,d=Math.min(h,f),m=d/2,v=new p(null,_);if(0===d)return new e.Point(i,o);for(var g=i;g<a;g+=d)for(var b=o;b<s;b+=d)v.push(new y(g+m,b+m,m,t));for(var x=function(e){for(var t=0,n=0,r=0,i=e[0],o=0,a=i.length,s=a-1;o<a;s=o++){var u=i[o],l=i[s],c=u.x*l.y-l.x*u.y;n+=(u.x+l.x)*c,r+=(u.y+l.y)*c,t+=3*c}return new y(n/t,r/t,0,e)}(t),w=v.length;v.length;){var E=v.pop();(E.d>x.d||!x.d)&&(x=E,r&&console.log("found best %d after %d probes",Math.round(1e4*E.d)/1e4,w)),E.max-x.d<=n||(m=E.h/2,v.push(new y(E.p.x-m,E.p.y-m,m,t)),v.push(new y(E.p.x+m,E.p.y-m,m,t)),v.push(new y(E.p.x-m,E.p.y+m,m,t)),v.push(new y(E.p.x+m,E.p.y+m,m,t)),w+=4)}return r&&(console.log("num probes: "+w),console.log("best distance: "+x.d)),x.p}function _(e,t){return t.max-e.max}function y(t,n,r,i){this.p=new e.Point(t,n),this.h=r,this.d=function(t,n){for(var r=!1,i=1/0,o=0;o<n.length;o++)for(var a=n[o],s=0,u=a.length,l=u-1;s<u;l=s++){var c=a[s],p=a[l];c.y>t.y!=p.y>t.y&&t.x<(p.x-c.x)*(t.y-c.y)/(p.y-c.y)+c.x&&(r=!r),i=Math.min(i,e.distToSegmentSquared(t,c,p))}return(r?1:-1)*Math.sqrt(i)}(this.p,i),this.max=this.d+this.h*Math.SQRT2}f.prototype={push:function(e){this.data.push(e),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var e=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),e}},peek:function(){return this.data[0]},_up:function(e){for(var t=this.data,n=this.compare,r=t[e];e>0;){var i=e-1>>1,o=t[i];if(n(r,o)>=0)break;t[e]=o,e=i}t[e]=r},_down:function(e){for(var t=this.data,n=this.compare,r=this.length>>1,i=t[e];e<r;){var o=1+(e<<1),a=o+1,s=t[o];if(a<this.length&&n(t[a],s)<0&&(o=a,s=t[a]),n(s,i)>=0)break;t[e]=s,e=o}t[e]=i}},p.default=h;var v=e.createCommonjsModule(function(e){e.exports=function(e,t){var n,r,i,o,a,s,u,l;for(n=3&e.length,r=e.length-n,i=t,a=3432918353,s=461845907,l=0;l<r;)u=255&e.charCodeAt(l)|(255&e.charCodeAt(++l))<<8|(255&e.charCodeAt(++l))<<16|(255&e.charCodeAt(++l))<<24,++l,i=27492+(65535&(o=5*(65535&(i=(i^=u=(65535&(u=(u=(65535&u)*a+(((u>>>16)*a&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(u=0,n){case 3:u^=(255&e.charCodeAt(l+2))<<16;case 2:u^=(255&e.charCodeAt(l+1))<<8;case 1:i^=u=(65535&(u=(u=(65535&(u^=255&e.charCodeAt(l)))*a+(((u>>>16)*a&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295}return i^=e.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0}}),g=e.createCommonjsModule(function(e){e.exports=function(e,t){for(var n,r=e.length,i=t^r,o=0;r>=4;)n=1540483477*(65535&(n=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),r-=4,++o;switch(r){case 3:i^=(255&e.charCodeAt(o+2))<<16;case 2:i^=(255&e.charCodeAt(o+1))<<8;case 1:i=1540483477*(65535&(i^=255&e.charCodeAt(o)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0}}),b=v,x=v,w=g;function E(t,n,r,i,o,a){t.createArrays();var s=512*t.overscaling;t.tilePixelRatio=e.EXTENT/s,t.compareText={},t.iconsNeedLinear=!1;var u=t.layers[0].layout,l=t.layers[0]._unevaluatedLayout._values,c={};if("composite"===t.textSizeData.functionType){var p=t.textSizeData.zoomRange,h=p.min,f=p.max;c.compositeTextSizes=[l["text-size"].possiblyEvaluate(new e.EvaluationParameters(h)),l["text-size"].possiblyEvaluate(new e.EvaluationParameters(f))]}if("composite"===t.iconSizeData.functionType){var d=t.iconSizeData.zoomRange,m=d.min,_=d.max;c.compositeIconSizes=[l["icon-size"].possiblyEvaluate(new e.EvaluationParameters(m)),l["icon-size"].possiblyEvaluate(new e.EvaluationParameters(_))]}c.layoutTextSize=l["text-size"].possiblyEvaluate(new e.EvaluationParameters(t.zoom+1)),c.layoutIconSize=l["icon-size"].possiblyEvaluate(new e.EvaluationParameters(t.zoom+1)),c.textMaxSize=l["text-size"].possiblyEvaluate(new e.EvaluationParameters(18));for(var y=24*u.get("text-line-height"),v="map"===u.get("text-rotation-alignment")&&"point"!==u.get("symbol-placement"),g=u.get("text-keep-upright"),b=0,x=t.features;b<x.length;b+=1){var w=x[b],E=u.get("text-font").evaluate(w,{}).join(","),k=r,C={},M=w.text;if(M){var P=M.toString(),A=u.get("text-offset").evaluate(w,{}).map(function(e){return 24*e}),S=24*u.get("text-letter-spacing").evaluate(w,{}),O=e.allowsLetterSpacing(P)?S:0,I=u.get("text-anchor").evaluate(w,{}),R=u.get("text-justify").evaluate(w,{}),j="point"===u.get("symbol-placement")?24*u.get("text-max-width").evaluate(w,{}):0;C.horizontal=e.shapeText(M,n,E,j,y,I,R,O,A,24,e.WritingMode.horizontal),e.allowsVerticalWritingMode(P)&&v&&g&&(C.vertical=e.shapeText(M,n,E,j,y,I,R,O,A,24,e.WritingMode.vertical))}var L=void 0;if(w.icon){var z=i[w.icon];z&&(L=e.shapeIcon(o[w.icon],u.get("icon-offset").evaluate(w,{}),u.get("icon-anchor").evaluate(w,{})),void 0===t.sdfIcons?t.sdfIcons=z.sdf:t.sdfIcons!==z.sdf&&e.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),z.pixelRatio!==t.pixelRatio?t.iconsNeedLinear=!0:0!==u.get("icon-rotate").constantOr(1)&&(t.iconsNeedLinear=!0))}(C.horizontal||L)&&T(t,w,C,L,k,c)}a&&t.generateCollisionDebugBuffers()}function T(t,n,r,i,o,a){var s=a.layoutTextSize.evaluate(n,{}),p=a.layoutIconSize.evaluate(n,{}),h=a.textMaxSize.evaluate(n,{});void 0===h&&(h=s);var f=t.layers[0].layout,d=f.get("text-offset").evaluate(n,{}),_=f.get("icon-offset").evaluate(n,{}),y=s/24,v=t.tilePixelRatio*y,g=t.tilePixelRatio*h/24,x=t.tilePixelRatio*p,w=t.tilePixelRatio*f.get("symbol-spacing"),E=f.get("text-padding")*t.tilePixelRatio,T=f.get("icon-padding")*t.tilePixelRatio,P=f.get("text-max-angle")/180*Math.PI,A="map"===f.get("text-rotation-alignment")&&"point"!==f.get("symbol-placement"),S="map"===f.get("icon-rotation-alignment")&&"point"!==f.get("symbol-placement"),O=f.get("symbol-placement"),I=w/2,R=function(s,u){u.x<0||u.x>=e.EXTENT||u.y<0||u.y>=e.EXTENT||function(t,n,r,i,o,a,s,u,l,p,h,f,d,m,_,y,v,g,x,w,E){var T,M,P=t.addToLineVertexArray(n,r),A=0,S=0,O=0,I=b(i.horizontal?i.horizontal.text:""),R=[];if(i.horizontal){var j=a.layout.get("text-rotate").evaluate(x,{});T=new c(s,r,n,u,l,p,i.horizontal,h,f,d,t.overscaling,j),S+=C(t,n,i.horizontal,a,d,x,m,P,i.vertical?e.WritingMode.horizontal:e.WritingMode.horizontalOnly,R,w,E),i.vertical&&(O+=C(t,n,i.vertical,a,d,x,m,P,e.WritingMode.vertical,R,w,E))}var L=T?T.boxStartIndex:t.collisionBoxArray.length,z=T?T.boxEndIndex:t.collisionBoxArray.length;if(o){var D=function(t,n,r,i,o,a){var s,u,l,c,p=n.image,h=r.layout,f=n.top-1/p.pixelRatio,d=n.left-1/p.pixelRatio,m=n.bottom+1/p.pixelRatio,_=n.right+1/p.pixelRatio;if("none"!==h.get("icon-text-fit")&&o){var y=_-d,v=m-f,g=h.get("text-size").evaluate(a,{})/24,b=o.left*g,x=o.right*g,w=o.top*g,E=x-b,T=o.bottom*g-w,k=h.get("icon-text-fit-padding")[0],C=h.get("icon-text-fit-padding")[1],M=h.get("icon-text-fit-padding")[2],P=h.get("icon-text-fit-padding")[3],A="width"===h.get("icon-text-fit")?.5*(T-v):0,S="height"===h.get("icon-text-fit")?.5*(E-y):0,O="width"===h.get("icon-text-fit")||"both"===h.get("icon-text-fit")?E:y,I="height"===h.get("icon-text-fit")||"both"===h.get("icon-text-fit")?T:v;s=new e.Point(b+S-P,w+A-k),u=new e.Point(b+S+C+O,w+A-k),l=new e.Point(b+S+C+O,w+A+M+I),c=new e.Point(b+S-P,w+A+M+I)}else s=new e.Point(d,f),u=new e.Point(_,f),l=new e.Point(_,m),c=new e.Point(d,m);var R=r.layout.get("icon-rotate").evaluate(a,{})*Math.PI/180;if(R){var j=Math.sin(R),L=Math.cos(R),z=[L,-j,j,L];s._matMult(z),u._matMult(z),c._matMult(z),l._matMult(z)}return[{tl:s,tr:u,bl:c,br:l,tex:p.paddedRect,writingMode:void 0,glyphOffset:[0,0]}]}(0,o,a,0,i.horizontal,x),B=a.layout.get("icon-rotate").evaluate(x,{});M=new c(s,r,n,u,l,p,o,_,y,!1,t.overscaling,B),A=4*D.length;var N=t.iconSizeData,q=null;"source"===N.functionType?(q=[e.SIZE_PACK_FACTOR*a.layout.get("icon-size").evaluate(x,{})])[0]>k&&e.warnOnce(t.layerIds[0]+': Value for "icon-size" is >= 256. Reduce your "icon-size".'):"composite"===N.functionType&&((q=[e.SIZE_PACK_FACTOR*E.compositeIconSizes[0].evaluate(x,{}),e.SIZE_PACK_FACTOR*E.compositeIconSizes[1].evaluate(x,{})])[0]>k||q[1]>k)&&e.warnOnce(t.layerIds[0]+': Value for "icon-size" is >= 256. Reduce your "icon-size".'),t.addSymbols(t.icon,D,q,g,v,x,!1,n,P.lineStartIndex,P.lineLength)}var F=M?M.boxStartIndex:t.collisionBoxArray.length,U=M?M.boxEndIndex:t.collisionBoxArray.length;t.glyphOffsetArray.length>=e.SymbolBucket.MAX_GLYPHS&&e.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),t.symbolInstances.emplaceBack(n.x,n.y,R.length>0?R[0]:-1,R.length>1?R[1]:-1,I,L,z,F,U,u,S,O,A,0)}(t,u,s,r,i,t.layers[0],t.collisionBoxArray,n.index,n.sourceLayerIndex,t.index,v,E,A,d,x,T,S,_,n,o,a)};if("line"===O)for(var j=0,L=function(t,n,r,i,o){for(var a=[],s=0;s<t.length;s++)for(var u=t[s],l=void 0,c=0;c<u.length-1;c++){var p=u[c],h=u[c+1];p.x<0&&h.x<0||(p.x<0?p=new e.Point(0,p.y+(h.y-p.y)*((0-p.x)/(h.x-p.x)))._round():h.x<0&&(h=new e.Point(0,p.y+(h.y-p.y)*((0-p.x)/(h.x-p.x)))._round()),p.y<0&&h.y<0||(p.y<0?p=new e.Point(p.x+(h.x-p.x)*((0-p.y)/(h.y-p.y)),0)._round():h.y<0&&(h=new e.Point(p.x+(h.x-p.x)*((0-p.y)/(h.y-p.y)),0)._round()),p.x>=i&&h.x>=i||(p.x>=i?p=new e.Point(i,p.y+(h.y-p.y)*((i-p.x)/(h.x-p.x)))._round():h.x>=i&&(h=new e.Point(i,p.y+(h.y-p.y)*((i-p.x)/(h.x-p.x)))._round()),p.y>=o&&h.y>=o||(p.y>=o?p=new e.Point(p.x+(h.x-p.x)*((o-p.y)/(h.y-p.y)),o)._round():h.y>=o&&(h=new e.Point(p.x+(h.x-p.x)*((o-p.y)/(h.y-p.y)),o)._round()),l&&p.equals(l[l.length-1])||(l=[p],a.push(l)),l.push(h)))))}return a}(n.geometry,0,0,e.EXTENT,e.EXTENT);j<L.length;j+=1)for(var z=L[j],D=0,B=l(z,w,P,r.vertical||r.horizontal,i,24,g,t.overscaling,e.EXTENT);D<B.length;D+=1){var N=B[D],q=r.horizontal;q&&M(t,q.text,I,N)||R(z,N)}else if("line-center"===O)for(var F=0,U=n.geometry;F<U.length;F+=1){var V=U[F];if(V.length>1){var W=u(V,P,r.vertical||r.horizontal,i,24,g);W&&R(V,W)}}else if("Polygon"===n.type)for(var G=0,Z=e.classifyRings(n.geometry,0);G<Z.length;G+=1){var H=Z[G],K=m(H,16);R(H[0],new e.Anchor(K.x,K.y,0))}else if("LineString"===n.type)for(var Y=0,X=n.geometry;Y<X.length;Y+=1){var $=X[Y];R($,new e.Anchor($[0].x,$[0].y,0))}else if("Point"===n.type)for(var J=0,Q=n.geometry;J<Q.length;J+=1)for(var ee=0,te=Q[J];ee<te.length;ee+=1){var ne=te[ee];R([ne],new e.Anchor(ne.x,ne.y,0))}}b.murmur3=x,b.murmur2=w;var k=65535;function C(t,n,r,i,o,a,s,u,l,c,p,h){var f=function(t,n,r,i,o,a){for(var s=r.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,u=r.layout.get("text-offset").evaluate(o,{}).map(function(e){return 24*e}),l=n.positionedGlyphs,c=[],p=0;p<l.length;p++){var h=l[p],f=a[h.fontStack],d=f&&f[h.glyph];if(d){var m=d.rect;if(m){var _=e.GLYPH_PBF_BORDER+1,y=d.metrics.advance*h.scale/2,v=i?[h.x+y,h.y]:[0,0],g=i?[0,0]:[h.x+y+u[0],h.y+u[1]],b=(d.metrics.left-_)*h.scale-y+g[0],x=(-d.metrics.top-_)*h.scale+g[1],w=b+m.w*h.scale,E=x+m.h*h.scale,T=new e.Point(b,x),k=new e.Point(w,x),C=new e.Point(b,E),M=new e.Point(w,E);if(i&&h.vertical){var P=new e.Point(-y,y),A=-Math.PI/2,S=new e.Point(5,0);T._rotateAround(A,P)._add(S),k._rotateAround(A,P)._add(S),C._rotateAround(A,P)._add(S),M._rotateAround(A,P)._add(S)}if(s){var O=Math.sin(s),I=Math.cos(s),R=[I,-O,O,I];T._matMult(R),k._matMult(R),C._matMult(R),M._matMult(R)}c.push({tl:T,tr:k,bl:C,br:M,tex:m,writingMode:n.writingMode,glyphOffset:v})}}}return c}(0,r,i,o,a,p),d=t.textSizeData,m=null;return"source"===d.functionType?(m=[e.SIZE_PACK_FACTOR*i.layout.get("text-size").evaluate(a,{})])[0]>k&&e.warnOnce(t.layerIds[0]+': Value for "text-size" is >= 256. Reduce your "text-size".'):"composite"===d.functionType&&((m=[e.SIZE_PACK_FACTOR*h.compositeTextSizes[0].evaluate(a,{}),e.SIZE_PACK_FACTOR*h.compositeTextSizes[1].evaluate(a,{})])[0]>k||m[1]>k)&&e.warnOnce(t.layerIds[0]+': Value for "text-size" is >= 256. Reduce your "text-size".'),t.addSymbols(t.text,f,m,s,o,a,l,n,u.lineStartIndex,u.lineLength),c.push(t.text.placedSymbolArray.length-1),4*f.length}function M(e,t,n,r){var i=e.compareText;if(t in i){for(var o=i[t],a=o.length-1;a>=0;a--)if(r.dist(o[a])<n)return!0}else i[t]=[];return i[t].push(r),!1}var P=function(t){var n={},r=[];for(var i in t){var o=t[i],a=n[i]={};for(var s in o){var u=o[+s];if(u&&0!==u.bitmap.width&&0!==u.bitmap.height){var l={x:0,y:0,w:u.bitmap.width+2,h:u.bitmap.height+2};r.push(l),a[s]={rect:l,metrics:u.metrics}}}}var c=e.potpack(r),p=c.w,h=c.h,f=new e.AlphaImage({width:p||1,height:h||1});for(var d in t){var m=t[d];for(var _ in m){var y=m[+_];if(y&&0!==y.bitmap.width&&0!==y.bitmap.height){var v=n[d][_].rect;e.AlphaImage.copy(y.bitmap,f,{x:0,y:0},{x:v.x+1,y:v.y+1},y.bitmap)}}}this.image=f,this.positions=n};e.register("GlyphAtlas",P);var A=function(t){this.tileID=new e.OverscaledTileID(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.uid=t.uid,this.zoom=t.zoom,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies};function S(t,n){for(var r=new e.EvaluationParameters(n),i=0,o=t;i<o.length;i+=1)o[i].recalculate(r)}A.prototype.parse=function(t,n,r,i){var o=this;this.status="parsing",this.data=t,this.collisionBoxArray=new e.CollisionBoxArray;var a=new e.DictionaryCoder(Object.keys(t.layers).sort()),s=new e.FeatureIndex(this.tileID);s.bucketLayerIDs=[];var u,l,c,p,h={},f={featureIndex:s,iconDependencies:{},patternDependencies:{},glyphDependencies:{}},d=n.familiesBySource[this.source];for(var m in d){var _=t.layers[m];if(_){1===_.version&&e.warnOnce('Vector tile source "'+o.source+'" layer "'+m+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var y=a.encode(m),v=[],g=0;g<_.length;g++){var b=_.feature(g);v.push({feature:b,index:g,sourceLayerIndex:y})}for(var x=0,w=d[m];x<w.length;x+=1){var T=w[x],k=T[0];k.minzoom&&o.zoom<Math.floor(k.minzoom)||k.maxzoom&&o.zoom>=k.maxzoom||"none"!==k.visibility&&(S(T,o.zoom),(h[k.id]=k.createBucket({index:s.bucketLayerIDs.length,layers:T,zoom:o.zoom,pixelRatio:o.pixelRatio,overscaling:o.overscaling,collisionBoxArray:o.collisionBoxArray,sourceLayerIndex:y,sourceID:o.source})).populate(v,f),s.bucketLayerIDs.push(T.map(function(e){return e.id})))}}}var C=e.mapObject(f.glyphDependencies,function(e){return Object.keys(e).map(Number)});Object.keys(C).length?r.send("getGlyphs",{uid:this.uid,stacks:C},function(e,t){u||(u=e,l=t,O.call(o))}):l={};var M=Object.keys(f.iconDependencies);M.length?r.send("getImages",{icons:M},function(e,t){u||(u=e,c=t,O.call(o))}):c={};var A=Object.keys(f.patternDependencies);function O(){if(u)return i(u);if(l&&c&&p){var t=new P(l),n=new e.ImageAtlas(c,p);for(var r in h){var o=h[r];o instanceof e.SymbolBucket?(S(o.layers,this.zoom),E(o,l,t.positions,c,n.iconPositions,this.showCollisionBoxes)):o.hasPattern&&(o instanceof e.LineBucket||o instanceof e.FillBucket||o instanceof e.FillExtrusionBucket)&&(S(o.layers,this.zoom),o.addFeatures(f,n.patternPositions))}this.status="done",i(null,{buckets:e.values(h).filter(function(e){return!e.isEmpty()}),featureIndex:s,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:t.image,imageAtlas:n,glyphMap:this.returnDependencies?l:null,iconMap:this.returnDependencies?c:null,glyphPositions:this.returnDependencies?t.positions:null})}}A.length?r.send("getImages",{icons:A},function(e,t){u||(u=e,p=t,O.call(o))}):p={},O.call(this)};var O="undefined"!=typeof performance,I={getEntriesByName:function(e){return!!(O&&performance&&performance.getEntriesByName)&&performance.getEntriesByName(e)},mark:function(e){return!!(O&&performance&&performance.mark)&&performance.mark(e)},measure:function(e,t,n){return!!(O&&performance&&performance.measure)&&performance.measure(e,t,n)},clearMarks:function(e){return!!(O&&performance&&performance.clearMarks)&&performance.clearMarks(e)},clearMeasures:function(e){return!!(O&&performance&&performance.clearMeasures)&&performance.clearMeasures(e)}},R=function(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},I.mark(this._marks.start)};function j(t,n){var r=e.getArrayBuffer(t.request,function(t,r,i,o){t?n(t):r&&n(null,{vectorTile:new e.mvt.VectorTile(new e.Protobuf(r)),rawData:r,cacheControl:i,expires:o})});return function(){r.cancel(),n()}}R.prototype.finish=function(){I.mark(this._marks.end);var e=I.getEntriesByName(this._marks.measure);return 0===e.length&&(I.measure(this._marks.measure,this._marks.start,this._marks.end),e=I.getEntriesByName(this._marks.measure),I.clearMarks(this._marks.start),I.clearMarks(this._marks.end),I.clearMeasures(this._marks.measure)),e},I.Performance=R;var L=function(e,t,n){this.actor=e,this.layerIndex=t,this.loadVectorData=n||j,this.loading={},this.loaded={}};L.prototype.loadTile=function(t,n){var r=this,i=t.uid;this.loading||(this.loading={});var o=!!(t&&t.request&&t.request.collectResourceTiming)&&new I.Performance(t.request),a=this.loading[i]=new A(t);a.abort=this.loadVectorData(t,function(t,s){if(delete r.loading[i],t||!s)return a.status="done",r.loaded[i]=a,n(t);var u=s.rawData,l={};s.expires&&(l.expires=s.expires),s.cacheControl&&(l.cacheControl=s.cacheControl);var c={};if(o){var p=o.finish();p&&(c.resourceTiming=JSON.parse(JSON.stringify(p)))}a.vectorTile=s.vectorTile,a.parse(s.vectorTile,r.layerIndex,r.actor,function(t,r){if(t||!r)return n(t);n(null,e.extend({rawTileData:u.slice(0)},r,l,c))}),r.loaded=r.loaded||{},r.loaded[i]=a})},L.prototype.reloadTile=function(e,t){var n=this.loaded,r=e.uid,i=this;if(n&&n[r]){var o=n[r];o.showCollisionBoxes=e.showCollisionBoxes;var a=function(e,n){var r=o.reloadCallback;r&&(delete o.reloadCallback,o.parse(o.vectorTile,i.layerIndex,i.actor,r)),t(e,n)};"parsing"===o.status?o.reloadCallback=a:"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.actor,a):a())}},L.prototype.abortTile=function(e,t){var n=this.loading,r=e.uid;n&&n[r]&&n[r].abort&&(n[r].abort(),delete n[r]),t()},L.prototype.removeTile=function(e,t){var n=this.loaded,r=e.uid;n&&n[r]&&delete n[r],t()};var z=function(){this.loaded={}};z.prototype.loadTile=function(t,n){var r=t.uid,i=t.encoding,o=t.rawImageData,a=new e.DEMData(r,o,i);this.loaded=this.loaded||{},this.loaded[r]=a,n(null,a)},z.prototype.removeTile=function(e){var t=this.loaded,n=e.uid;t&&t[n]&&delete t[n]};var D={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:6356752.3142};function B(e){var t=0;if(e&&e.length>0){t+=Math.abs(N(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(N(e[n]))}return t}function N(e){var t,n,r,i,o,a,s=0,u=e.length;if(u>2){for(a=0;a<u;a++)a===u-2?(r=u-2,i=u-1,o=0):a===u-1?(r=u-1,i=0,o=1):(r=a,i=a+1,o=a+2),t=e[r],n=e[i],s+=(q(e[o][0])-q(t[0]))*Math.sin(q(n[1]));s=s*D.RADIUS*D.RADIUS/2}return s}function q(e){return e*Math.PI/180}var F={geometry:function e(t){var n,r=0;switch(t.type){case"Polygon":return B(t.coordinates);case"MultiPolygon":for(n=0;n<t.coordinates.length;n++)r+=B(t.coordinates[n]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<t.geometries.length;n++)r+=e(t.geometries[n]);return r}},ring:N};function U(e,t){return function(n){return e(n,t)}}function V(e,t){t=!!t,e[0]=W(e[0],t);for(var n=1;n<e.length;n++)e[n]=W(e[n],!t);return e}function W(e,t){return function(e){return F.ring(e)>=0}(e)===t?e:e.reverse()}var G=e.mvt.VectorTileFeature.prototype.toGeoJSON,Z=function(t){this._feature=t,this.extent=e.EXTENT,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))};Z.prototype.loadGeometry=function(){if(1===this._feature.type){for(var t=[],n=0,r=this._feature.geometry;n<r.length;n+=1){var i=r[n];t.push([new e.Point(i[0],i[1])])}return t}for(var o=[],a=0,s=this._feature.geometry;a<s.length;a+=1){for(var u=[],l=0,c=s[a];l<c.length;l+=1){var p=c[l];u.push(new e.Point(p[0],p[1]))}o.push(u)}return o},Z.prototype.toGeoJSON=function(e,t,n){return G.call(this,e,t,n)};var H=function(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=t.length,this._features=t};H.prototype.feature=function(e){return new Z(this._features[e])};var K=e.vectorTile.VectorTileFeature,Y=X;function X(e,t){this.options=t||{},this.features=e,this.length=e.length}function $(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}X.prototype.feature=function(e){return new $(this.features[e],this.options.extent)},$.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var n=0;n<t.length;n++){for(var r=t[n],i=[],o=0;o<r.length;o++)i.push(new e.Point$1(r[o][0],r[o][1]));this.geometry.push(i)}return this.geometry},$.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,n=-1/0,r=1/0,i=-1/0,o=0;o<e.length;o++)for(var a=e[o],s=0;s<a.length;s++){var u=a[s];t=Math.min(t,u.x),n=Math.max(n,u.x),r=Math.min(r,u.y),i=Math.max(i,u.y)}return[t,r,n,i]},$.prototype.toGeoJSON=K.prototype.toGeoJSON;var J=te,Q=te,ee=Y;function te(t){var n=new e.pbf;return function(e,t){for(var n in e.layers)t.writeMessage(3,ne,e.layers[n])}(t,n),n.finish()}function ne(e,t){var n;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<e.length;n++)r.feature=e.feature(n),t.writeMessage(2,re,r);var i=r.keys;for(n=0;n<i.length;n++)t.writeStringField(3,i[n]);var o=r.values;for(n=0;n<o.length;n++)t.writeMessage(4,ue,o[n])}function re(e,t){var n=e.feature;void 0!==n.id&&t.writeVarintField(1,n.id),t.writeMessage(2,ie,e),t.writeVarintField(3,n.type),t.writeMessage(4,se,n)}function ie(e,t){var n=e.feature,r=e.keys,i=e.values,o=e.keycache,a=e.valuecache;for(var s in n.properties){var u=o[s];void 0===u&&(r.push(s),u=r.length-1,o[s]=u),t.writeVarint(u);var l=n.properties[s],c=typeof l;"string"!==c&&"boolean"!==c&&"number"!==c&&(l=JSON.stringify(l));var p=c+":"+l,h=a[p];void 0===h&&(i.push(l),h=i.length-1,a[p]=h),t.writeVarint(h)}}function oe(e,t){return(t<<3)+(7&e)}function ae(e){return e<<1^e>>31}function se(e,t){for(var n=e.loadGeometry(),r=e.type,i=0,o=0,a=n.length,s=0;s<a;s++){var u=n[s],l=1;1===r&&(l=u.length),t.writeVarint(oe(1,l));for(var c=3===r?u.length-1:u.length,p=0;p<c;p++){1===p&&1!==r&&t.writeVarint(oe(2,c-1));var h=u[p].x-i,f=u[p].y-o;t.writeVarint(ae(h)),t.writeVarint(ae(f)),i+=h,o+=f}3===r&&t.writeVarint(oe(7,0))}}function ue(e,t){var n=typeof e;"string"===n?t.writeStringField(1,e):"boolean"===n?t.writeBooleanField(7,e):"number"===n&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}function le(e,t,n,r){ce(e,n,r),ce(t,2*n,2*r),ce(t,2*n+1,2*r+1)}function ce(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function pe(e,t,n,r){var i=e-n,o=t-r;return i*i+o*o}function he(e,t,n,r,i){return new fe(e,t,n,r,i)}function fe(e,t,n,r,i){t=t||de,n=n||me,i=i||Array,this.nodeSize=r||64,this.points=e,this.ids=new i(e.length),this.coords=new i(2*e.length);for(var o=0;o<e.length;o++)this.ids[o]=o,this.coords[2*o]=t(e[o]),this.coords[2*o+1]=n(e[o]);!function e(t,n,r,i,o,a){if(!(o-i<=r)){var s=Math.floor((i+o)/2);!function e(t,n,r,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,u=r-i+1,l=Math.log(s),c=.5*Math.exp(2*l/3),p=.5*Math.sqrt(l*c*(s-c)/s)*(u-s/2<0?-1:1);e(t,n,r,Math.max(i,Math.floor(r-u*c/s+p)),Math.min(o,Math.floor(r+(s-u)*c/s+p)),a)}var h=n[2*r+a],f=i,d=o;for(le(t,n,i,r),n[2*o+a]>h&&le(t,n,i,o);f<d;){for(le(t,n,f,d),f++,d--;n[2*f+a]<h;)f++;for(;n[2*d+a]>h;)d--}n[2*i+a]===h?le(t,n,i,d):le(t,n,++d,o),d<=r&&(i=d+1),r<=d&&(o=d-1)}}(t,n,s,i,o,a%2),e(t,n,r,i,s-1,a+1),e(t,n,r,s+1,o,a+1)}}(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}function de(e){return e[0]}function me(e){return e[1]}function _e(e){this.options=we(Object.create(this.options),e),this.trees=new Array(this.options.maxZoom+1)}function ye(e,t,n,r,i){return{x:e,y:t,zoom:1/0,id:n,parentId:-1,numPoints:r,properties:i}}function ve(e){return{type:"Feature",id:e.id,properties:ge(e),geometry:{type:"Point",coordinates:[(r=e.x,360*(r-.5)),(t=e.y,n=(180-360*t)*Math.PI/180,360*Math.atan(Math.exp(n))/Math.PI-90)]}};var t,n,r}function ge(e){var t=e.numPoints,n=t>=1e4?Math.round(t/1e3)+"k":t>=1e3?Math.round(t/100)/10+"k":t;return we(we({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:n})}function be(e){return e/360+.5}function xe(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function we(e,t){for(var n in t)e[n]=t[n];return e}function Ee(e){return e.x}function Te(e){return e.y}function ke(e,t,n,r,i,o){var a=i-n,s=o-r;if(0!==a||0!==s){var u=((e-n)*a+(t-r)*s)/(a*a+s*s);u>1?(n=i,r=o):u>0&&(n+=a*u,r+=s*u)}return(a=e-n)*a+(s=t-r)*s}function Ce(e,t,n,r){var i={id:void 0===e?null:e,type:t,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(e){var t=e.geometry,n=e.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)Me(e,t);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<t.length;r++)Me(e,t[r]);else if("MultiPolygon"===n)for(r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)Me(e,t[r][i])}(i),i}function Me(e,t){for(var n=0;n<t.length;n+=3)e.minX=Math.min(e.minX,t[n]),e.minY=Math.min(e.minY,t[n+1]),e.maxX=Math.max(e.maxX,t[n]),e.maxY=Math.max(e.maxY,t[n+1])}function Pe(e,t,n,r){if(t.geometry){var i=t.geometry.coordinates,o=t.geometry.type,a=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],u=t.id;if(n.promoteId?u=t.properties[n.promoteId]:n.generateId&&(u=r||0),"Point"===o)Ae(i,s);else if("MultiPoint"===o)for(var l=0;l<i.length;l++)Ae(i[l],s);else if("LineString"===o)Se(i,s,a,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(l=0;l<i.length;l++)s=[],Se(i[l],s,a,!1),e.push(Ce(u,"LineString",s,t.properties));return}Oe(i,s,a,!1)}else if("Polygon"===o)Oe(i,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(l=0;l<t.geometry.geometries.length;l++)Pe(e,{id:u,geometry:t.geometry.geometries[l],properties:t.properties},n,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(l=0;l<i.length;l++){var c=[];Oe(i[l],c,a,!0),s.push(c)}}e.push(Ce(u,o,s,t.properties))}}function Ae(e,t){t.push(Ie(e[0])),t.push(Re(e[1])),t.push(0)}function Se(e,t,n,r){for(var i,o,a=0,s=0;s<e.length;s++){var u=Ie(e[s][0]),l=Re(e[s][1]);t.push(u),t.push(l),t.push(0),s>0&&(a+=r?(i*l-u*o)/2:Math.sqrt(Math.pow(u-i,2)+Math.pow(l-o,2))),i=u,o=l}var c=t.length-3;t[2]=1,function e(t,n,r,i){for(var o,a=i,s=r-n>>1,u=r-n,l=t[n],c=t[n+1],p=t[r],h=t[r+1],f=n+3;f<r;f+=3){var d=ke(t[f],t[f+1],l,c,p,h);if(d>a)o=f,a=d;else if(d===a){var m=Math.abs(f-s);m<u&&(o=f,u=m)}}a>i&&(o-n>3&&e(t,n,o,i),t[o+2]=a,r-o>3&&e(t,o,r,i))}(t,0,c,n),t[c+2]=1,t.size=Math.abs(a),t.start=0,t.end=t.size}function Oe(e,t,n,r){for(var i=0;i<e.length;i++){var o=[];Se(e[i],o,n,r),t.push(o)}}function Ie(e){return e/360+.5}function Re(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function je(e,t,n,r,i,o,a,s){if(r/=t,o>=(n/=t)&&a<r)return e;if(a<n||o>=r)return null;for(var u=[],l=0;l<e.length;l++){var c=e[l],p=c.geometry,h=c.type,f=0===i?c.minX:c.minY,d=0===i?c.maxX:c.maxY;if(f>=n&&d<r)u.push(c);else if(!(d<n||f>=r)){var m=[];if("Point"===h||"MultiPoint"===h)Le(p,m,n,r,i);else if("LineString"===h)ze(p,m,n,r,i,!1,s.lineMetrics);else if("MultiLineString"===h)Be(p,m,n,r,i,!1);else if("Polygon"===h)Be(p,m,n,r,i,!0);else if("MultiPolygon"===h)for(var _=0;_<p.length;_++){var y=[];Be(p[_],y,n,r,i,!0),y.length&&m.push(y)}if(m.length){if(s.lineMetrics&&"LineString"===h){for(_=0;_<m.length;_++)u.push(Ce(c.id,h,m[_],c.tags));continue}"LineString"!==h&&"MultiLineString"!==h||(1===m.length?(h="LineString",m=m[0]):h="MultiLineString"),"Point"!==h&&"MultiPoint"!==h||(h=3===m.length?"Point":"MultiPoint"),u.push(Ce(c.id,h,m,c.tags))}}}return u.length?u:null}function Le(e,t,n,r,i){for(var o=0;o<e.length;o+=3){var a=e[o+i];a>=n&&a<=r&&(t.push(e[o]),t.push(e[o+1]),t.push(e[o+2]))}}function ze(e,t,n,r,i,o,a){for(var s,u,l=De(e),c=0===i?qe:Fe,p=e.start,h=0;h<e.length-3;h+=3){var f=e[h],d=e[h+1],m=e[h+2],_=e[h+3],y=e[h+4],v=0===i?f:d,g=0===i?_:y,b=!1;a&&(s=Math.sqrt(Math.pow(f-_,2)+Math.pow(d-y,2))),v<n?g>n&&(u=c(l,f,d,_,y,n),a&&(l.start=p+s*u)):v>r?g<r&&(u=c(l,f,d,_,y,r),a&&(l.start=p+s*u)):Ne(l,f,d,m),g<n&&v>=n&&(u=c(l,f,d,_,y,n),b=!0),g>r&&v<=r&&(u=c(l,f,d,_,y,r),b=!0),!o&&b&&(a&&(l.end=p+s*u),t.push(l),l=De(e)),a&&(p+=s)}var x=e.length-3;f=e[x],d=e[x+1],m=e[x+2],(v=0===i?f:d)>=n&&v<=r&&Ne(l,f,d,m),x=l.length-3,o&&x>=3&&(l[x]!==l[0]||l[x+1]!==l[1])&&Ne(l,l[0],l[1],l[2]),l.length&&t.push(l)}function De(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function Be(e,t,n,r,i,o){for(var a=0;a<e.length;a++)ze(e[a],t,n,r,i,o,!1)}function Ne(e,t,n,r){e.push(t),e.push(n),e.push(r)}function qe(e,t,n,r,i,o){var a=(o-t)/(r-t);return e.push(o),e.push(n+(i-n)*a),e.push(1),a}function Fe(e,t,n,r,i,o){var a=(o-n)/(i-n);return e.push(t+(r-t)*a),e.push(o),e.push(1),a}function Ue(e,t){for(var n=[],r=0;r<e.length;r++){var i,o=e[r],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)i=Ve(o.geometry,t);else if("MultiLineString"===a||"Polygon"===a){i=[];for(var s=0;s<o.geometry.length;s++)i.push(Ve(o.geometry[s],t))}else if("MultiPolygon"===a)for(i=[],s=0;s<o.geometry.length;s++){for(var u=[],l=0;l<o.geometry[s].length;l++)u.push(Ve(o.geometry[s][l],t));i.push(u)}n.push(Ce(o.id,a,i,o.tags))}return n}function Ve(e,t){var n=[];n.size=e.size,void 0!==e.start&&(n.start=e.start,n.end=e.end);for(var r=0;r<e.length;r+=3)n.push(e[r]+t,e[r+1],e[r+2]);return n}function We(e,t){if(e.transformed)return e;var n,r,i,o=1<<e.z,a=e.x,s=e.y;for(n=0;n<e.features.length;n++){var u=e.features[n],l=u.geometry,c=u.type;if(u.geometry=[],1===c)for(r=0;r<l.length;r+=2)u.geometry.push(Ge(l[r],l[r+1],t,o,a,s));else for(r=0;r<l.length;r++){var p=[];for(i=0;i<l[r].length;i+=2)p.push(Ge(l[r][i],l[r][i+1],t,o,a,s));u.geometry.push(p)}}return e.transformed=!0,e}function Ge(e,t,n,r,i,o){return[Math.round(n*(e*r-i)),Math.round(n*(t*r-o))]}function Ze(e,t,n,r,i){for(var o=t===i.maxZoom?0:i.tolerance/((1<<t)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<e.length;s++){a.numFeatures++,He(a,e[s],o,i);var u=e[s].minX,l=e[s].minY,c=e[s].maxX,p=e[s].maxY;u<a.minX&&(a.minX=u),l<a.minY&&(a.minY=l),c>a.maxX&&(a.maxX=c),p>a.maxY&&(a.maxY=p)}return a}function He(e,t,n,r){var i=t.geometry,o=t.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<i.length;s+=3)a.push(i[s]),a.push(i[s+1]),e.numPoints++,e.numSimplified++;else if("LineString"===o)Ke(a,i,e,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<i.length;s++)Ke(a,i[s],e,n,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var u=0;u<i.length;u++){var l=i[u];for(s=0;s<l.length;s++)Ke(a,l[s],e,n,!0,0===s)}if(a.length){var c=t.tags||null;if("LineString"===o&&r.lineMetrics){for(var p in c={},t.tags)c[p]=t.tags[p];c.mapbox_clip_start=i.start/i.size,c.mapbox_clip_end=i.end/i.size}var h={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:c};null!==t.id&&(h.id=t.id),e.features.push(h)}}function Ke(e,t,n,r,i,o){var a=r*r;if(r>0&&t.size<(i?a:r))n.numPoints+=t.length/3;else{for(var s=[],u=0;u<t.length;u+=3)(0===r||t[u+2]>a)&&(n.numSimplified++,s.push(t[u]),s.push(t[u+1])),n.numPoints++;i&&function(e,t){for(var n=0,r=0,i=e.length,o=i-2;r<i;o=r,r+=2)n+=(e[r]-e[o])*(e[r+1]+e[o+1]);if(n>0===t)for(r=0,i=e.length;r<i/2;r+=2){var a=e[r],s=e[r+1];e[r]=e[i-2-r],e[r+1]=e[i-1-r],e[i-2-r]=a,e[i-1-r]=s}}(s,o),e.push(s)}}function Ye(e,t){var n=(t=this.options=function(e,t){for(var n in t)e[n]=t[n];return e}(Object.create(this.options),t)).debug;if(n&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=function(e,t){var n=[];if("FeatureCollection"===e.type)for(var r=0;r<e.features.length;r++)Pe(n,e.features[r],t,r);else"Feature"===e.type?Pe(n,e,t):Pe(n,{geometry:e},t);return n}(e,t);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(r=function(e,t){var n=t.buffer/t.extent,r=e,i=je(e,1,-1-n,n,0,-1,2,t),o=je(e,1,1-n,2+n,0,-1,2,t);return(i||o)&&(r=je(e,1,-n,1+n,0,-1,2,t)||[],i&&(r=Ue(i,1).concat(r)),o&&(r=r.concat(Ue(o,-1)))),r}(r,t)).length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Xe(e,t,n){return 32*((1<<e)*n+t)+e}function $e(e,t){var n=e.tileID.canonical;if(!this._geoJSONIndex)return t(null,null);var r=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!r)return t(null,null);var i=new H(r.features),o=J(i);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),t(null,{vectorTile:i,rawData:o.buffer})}J.fromVectorTileJs=Q,J.fromGeojsonVt=function(e,t){t=t||{};var n={};for(var r in e)n[r]=new Y(e[r].features,t),n[r].name=r,n[r].version=t.version,n[r].extent=t.extent;return te({layers:n})},J.GeoJSONWrapper=ee,fe.prototype={range:function(e,t,n,r){return function(e,t,n,r,i,o,a){for(var s,u,l=[0,e.length-1,0],c=[];l.length;){var p=l.pop(),h=l.pop(),f=l.pop();if(h-f<=a)for(var d=f;d<=h;d++)s=t[2*d],u=t[2*d+1],s>=n&&s<=i&&u>=r&&u<=o&&c.push(e[d]);else{var m=Math.floor((f+h)/2);s=t[2*m],u=t[2*m+1],s>=n&&s<=i&&u>=r&&u<=o&&c.push(e[m]);var _=(p+1)%2;(0===p?n<=s:r<=u)&&(l.push(f),l.push(m-1),l.push(_)),(0===p?i>=s:o>=u)&&(l.push(m+1),l.push(h),l.push(_))}}return c}(this.ids,this.coords,e,t,n,r,this.nodeSize)},within:function(e,t,n){return function(e,t,n,r,i,o){for(var a=[0,e.length-1,0],s=[],u=i*i;a.length;){var l=a.pop(),c=a.pop(),p=a.pop();if(c-p<=o)for(var h=p;h<=c;h++)pe(t[2*h],t[2*h+1],n,r)<=u&&s.push(e[h]);else{var f=Math.floor((p+c)/2),d=t[2*f],m=t[2*f+1];pe(d,m,n,r)<=u&&s.push(e[f]);var _=(l+1)%2;(0===l?n-i<=d:r-i<=m)&&(a.push(p),a.push(f-1),a.push(_)),(0===l?n+i>=d:r+i>=m)&&(a.push(f+1),a.push(c),a.push(_))}}return s}(this.ids,this.coords,e,t,n,this.nodeSize)}},_e.prototype={options:{minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,initial:function(){return{}},map:function(e){return e}},load:function(e){var t=this.options.log;t&&console.time("total time");var n="prepare "+e.length+" points";t&&console.time(n),this.points=e;for(var r,i,o=[],a=0;a<e.length;a++)e[a].geometry&&o.push((r=a,{x:be((i=e[a].geometry.coordinates)[0]),y:xe(i[1]),zoom:1/0,index:r,parentId:-1}));this.trees[this.options.maxZoom+1]=he(o,Ee,Te,this.options.nodeSize,Float32Array),t&&console.timeEnd(n);for(var s=this.options.maxZoom;s>=this.options.minZoom;s--){var u=+Date.now();o=this._cluster(o,s),this.trees[s]=he(o,Ee,Te,this.options.nodeSize,Float32Array),t&&console.log("z%d: %d clusters in %dms",s,o.length,+Date.now()-u)}return t&&console.timeEnd("total time"),this},getClusters:function(e,t){var n=((e[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,e[1])),i=180===e[2]?180:((e[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,i=180;else if(n>i){var a=this.getClusters([n,r,180,o],t),s=this.getClusters([-180,r,i,o],t);return a.concat(s)}for(var u=this.trees[this._limitZoom(t)],l=u.range(be(n),xe(o),be(i),xe(r)),c=[],p=0;p<l.length;p++){var h=u.points[l[p]];c.push(h.numPoints?ve(h):this.points[h.index])}return c},getChildren:function(e){var t=e>>5,n=e%32,r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);var o=i.points[t];if(!o)throw new Error(r);for(var a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=i.within(o.x,o.y,a),u=[],l=0;l<s.length;l++){var c=i.points[s[l]];c.parentId===e&&u.push(c.numPoints?ve(c):this.points[c.index])}if(0===u.length)throw new Error(r);return u},getLeaves:function(e,t,n){t=t||10,n=n||0;var r=[];return this._appendLeaves(r,e,t,n,0),r},getTile:function(e,t,n){var r=this.trees[this._limitZoom(e)],i=Math.pow(2,e),o=this.options.extent,a=this.options.radius/o,s=(n-a)/i,u=(n+1+a)/i,l={features:[]};return this._addTileFeatures(r.range((t-a)/i,s,(t+1+a)/i,u),r.points,t,n,i,l),0===t&&this._addTileFeatures(r.range(1-a/i,s,1,u),r.points,i,n,i,l),t===i-1&&this._addTileFeatures(r.range(0,s,a/i,u),r.points,-1,n,i,l),l.features.length?l:null},getClusterExpansionZoom:function(e){for(var t=e%32-1;t<this.options.maxZoom;){var n=this.getChildren(e);if(t++,1!==n.length)break;e=n[0].properties.cluster_id}return t},_appendLeaves:function(e,t,n,r,i){for(var o=this.getChildren(t),a=0;a<o.length;a++){var s=o[a].properties;if(s&&s.cluster?i+s.point_count<=r?i+=s.point_count:i=this._appendLeaves(e,s.cluster_id,n,r,i):i<r?i++:e.push(o[a]),e.length===n)break}return i},_addTileFeatures:function(e,t,n,r,i,o){for(var a=0;a<e.length;a++){var s=t[e[a]],u={type:1,geometry:[[Math.round(this.options.extent*(s.x*i-n)),Math.round(this.options.extent*(s.y*i-r))]],tags:s.numPoints?ge(s):this.points[s.index].properties},l=s.numPoints?s.id:this.points[s.index].id;void 0!==l&&(u.id=l),o.features.push(u)}},_limitZoom:function(e){return Math.max(this.options.minZoom,Math.min(e,this.options.maxZoom+1))},_cluster:function(e,t){for(var n=[],r=this.options.radius/(this.options.extent*Math.pow(2,t)),i=0;i<e.length;i++){var o=e[i];if(!(o.zoom<=t)){o.zoom=t;var a=this.trees[t+1],s=a.within(o.x,o.y,r),u=o.numPoints||1,l=o.x*u,c=o.y*u,p=null;this.options.reduce&&(p=this.options.initial(),this._accumulate(p,o));for(var h=(i<<5)+(t+1),f=0;f<s.length;f++){var d=a.points[s[f]];if(!(d.zoom<=t)){d.zoom=t;var m=d.numPoints||1;l+=d.x*m,c+=d.y*m,u+=m,d.parentId=h,this.options.reduce&&this._accumulate(p,d)}}1===u?n.push(o):(o.parentId=h,n.push(ye(l/u,c/u,h,u,p)))}}return n},_accumulate:function(e,t){var n=t.numPoints?t.properties:this.options.map(this.points[t.index].properties);this.options.reduce(e,n)}},Ye.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ye.prototype.splitTile=function(e,t,n,r,i,o,a){for(var s=[e,t,n,r],u=this.options,l=u.debug;s.length;){r=s.pop(),n=s.pop(),t=s.pop(),e=s.pop();var c=1<<t,p=Xe(t,n,r),h=this.tiles[p];if(!h&&(l>1&&console.time("creation"),h=this.tiles[p]=Ze(e,t,n,r,u),this.tileCoords.push({z:t,x:n,y:r}),l)){l>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,n,r,h.numFeatures,h.numPoints,h.numSimplified),console.timeEnd("creation"));var f="z"+t;this.stats[f]=(this.stats[f]||0)+1,this.total++}if(h.source=e,i){if(t===u.maxZoom||t===i)continue;var d=1<<i-t;if(n!==Math.floor(o/d)||r!==Math.floor(a/d))continue}else if(t===u.indexMaxZoom||h.numPoints<=u.indexMaxPoints)continue;if(h.source=null,0!==e.length){l>1&&console.time("clipping");var m,_,y,v,g,b,x=.5*u.buffer/u.extent,w=.5-x,E=.5+x,T=1+x;m=_=y=v=null,g=je(e,c,n-x,n+E,0,h.minX,h.maxX,u),b=je(e,c,n+w,n+T,0,h.minX,h.maxX,u),e=null,g&&(m=je(g,c,r-x,r+E,1,h.minY,h.maxY,u),_=je(g,c,r+w,r+T,1,h.minY,h.maxY,u),g=null),b&&(y=je(b,c,r-x,r+E,1,h.minY,h.maxY,u),v=je(b,c,r+w,r+T,1,h.minY,h.maxY,u),b=null),l>1&&console.timeEnd("clipping"),s.push(m||[],t+1,2*n,2*r),s.push(_||[],t+1,2*n,2*r+1),s.push(y||[],t+1,2*n+1,2*r),s.push(v||[],t+1,2*n+1,2*r+1)}}},Ye.prototype.getTile=function(e,t,n){var r=this.options,i=r.extent,o=r.debug;if(e<0||e>24)return null;var a=1<<e,s=Xe(e,t=(t%a+a)%a,n);if(this.tiles[s])return We(this.tiles[s],i);o>1&&console.log("drilling down to z%d-%d-%d",e,t,n);for(var u,l=e,c=t,p=n;!u&&l>0;)l--,c=Math.floor(c/2),p=Math.floor(p/2),u=this.tiles[Xe(l,c,p)];return u&&u.source?(o>1&&console.log("found parent tile z%d-%d-%d",l,c,p),o>1&&console.time("drilling down"),this.splitTile(u.source,l,c,p,e,t,n),o>1&&console.timeEnd("drilling down"),this.tiles[s]?We(this.tiles[s],i):null):null};var Je=function(t){function n(e,n,r){t.call(this,e,n,$e),r&&(this.loadGeoJSON=r)}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.loadData=function(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=t,this._pendingLoadDataParams=e,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},n.prototype._loadData=function(){var e=this;if(this._pendingCallback&&this._pendingLoadDataParams){var t=this._pendingCallback,n=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var r=!!(n&&n.request&&n.request.collectResourceTiming)&&new I.Performance(n.request);this.loadGeoJSON(n,function(i,o){if(i||!o)return t(i);if("object"!=typeof o)return t(new Error("Input data is not a valid GeoJSON object."));!function e(t,n){switch(t&&t.type||null){case"FeatureCollection":return t.features=t.features.map(U(e,n)),t;case"Feature":return t.geometry=e(t.geometry,n),t;case"Polygon":case"MultiPolygon":return function(e,t){return"Polygon"===e.type?e.coordinates=V(e.coordinates,t):"MultiPolygon"===e.type&&(e.coordinates=e.coordinates.map(U(V,t))),e}(t,n);default:return t}}(o,!0);try{e._geoJSONIndex=n.cluster?(a=n.superclusterOptions,new _e(a)).load(o.features):new Ye(o,n.geojsonVtOptions)}catch(i){return t(i)}e.loaded={};var a,s={};if(r){var u=r.finish();u&&(s.resourceTiming={},s.resourceTiming[n.source]=JSON.parse(JSON.stringify(u)))}t(null,s)})}},n.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},n.prototype.reloadTile=function(e,n){var r=this.loaded,i=e.uid;return r&&r[i]?t.prototype.reloadTile.call(this,e,n):this.loadTile(e,n)},n.prototype.loadGeoJSON=function(t,n){if(t.request)e.getJSON(t.request,n);else{if("string"!=typeof t.data)return n(new Error("Input data is not a valid GeoJSON object."));try{return n(null,JSON.parse(t.data))}catch(e){return n(new Error("Input data is not a valid GeoJSON object."))}}},n.prototype.removeSource=function(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),t()},n.prototype.getClusterExpansionZoom=function(e,t){t(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId))},n.prototype.getClusterChildren=function(e,t){t(null,this._geoJSONIndex.getChildren(e.clusterId))},n.prototype.getClusterLeaves=function(e,t){t(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset))},n}(L),Qe=function(t){var n=this;this.self=t,this.actor=new e.Actor(t,this),this.layerIndexes={},this.workerSourceTypes={vector:L,geojson:Je},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(e,t){if(n.workerSourceTypes[e])throw new Error('Worker source with name "'+e+'" already registered.');n.workerSourceTypes[e]=t},this.self.registerRTLTextPlugin=function(t){if(e.plugin.isLoaded())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=t.applyArabicShaping,e.plugin.processBidirectionalText=t.processBidirectionalText,e.plugin.processStyledBidirectionalText=t.processStyledBidirectionalText}};return Qe.prototype.setReferrer=function(e,t){this.referrer=t},Qe.prototype.setLayers=function(e,t,n){this.getLayerIndex(e).replace(t),n()},Qe.prototype.updateLayers=function(e,t,n){this.getLayerIndex(e).update(t.layers,t.removedIds),n()},Qe.prototype.loadTile=function(e,t,n){this.getWorkerSource(e,t.type,t.source).loadTile(t,n)},Qe.prototype.loadDEMTile=function(e,t,n){this.getDEMWorkerSource(e,t.source).loadTile(t,n)},Qe.prototype.reloadTile=function(e,t,n){this.getWorkerSource(e,t.type,t.source).reloadTile(t,n)},Qe.prototype.abortTile=function(e,t,n){this.getWorkerSource(e,t.type,t.source).abortTile(t,n)},Qe.prototype.removeTile=function(e,t,n){this.getWorkerSource(e,t.type,t.source).removeTile(t,n)},Qe.prototype.removeDEMTile=function(e,t){this.getDEMWorkerSource(e,t.source).removeTile(t)},Qe.prototype.removeSource=function(e,t,n){if(this.workerSources[e]&&this.workerSources[e][t.type]&&this.workerSources[e][t.type][t.source]){var r=this.workerSources[e][t.type][t.source];delete this.workerSources[e][t.type][t.source],void 0!==r.removeSource?r.removeSource(t,n):n()}},Qe.prototype.loadWorkerSource=function(e,t,n){try{this.self.importScripts(t.url),n()}catch(e){n(e.toString())}},Qe.prototype.loadRTLTextPlugin=function(t,n,r){try{e.plugin.isLoaded()||(this.self.importScripts(n),r(e.plugin.isLoaded()?null:new Error("RTL Text Plugin failed to import scripts from "+n)))}catch(e){r(e.toString())}},Qe.prototype.getLayerIndex=function(e){var t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new r),t},Qe.prototype.getWorkerSource=function(e,t,n){var r=this;if(this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),!this.workerSources[e][t][n]){var i={send:function(t,n,i){r.actor.send(t,n,i,e)}};this.workerSources[e][t][n]=new this.workerSourceTypes[t](i,this.getLayerIndex(e))}return this.workerSources[e][t][n]},Qe.prototype.getDEMWorkerSource=function(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new z),this.demWorkerSources[e][t]},"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new Qe(self)),Qe}),r(0,function(e){var t=e.createCommonjsModule(function(e){function t(e){return!!("undefined"!=typeof window&&"undefined"!=typeof document&&Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray&&Function.prototype&&Function.prototype.bind&&Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions&&"JSON"in window&&"parse"in JSON&&"stringify"in JSON&&function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var e,t,n=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(n);try{t=new Worker(r),e=!0}catch(t){e=!1}return t&&t.terminate(),URL.revokeObjectURL(r),e}()&&"Uint8ClampedArray"in window&&ArrayBuffer.isView&&function(e){return void 0===n[e]&&(n[e]=function(e){var n=document.createElement("canvas"),r=Object.create(t.webGLContextAttributes);return r.failIfMajorPerformanceCaveat=e,n.probablySupportsContext?n.probablySupportsContext("webgl",r)||n.probablySupportsContext("experimental-webgl",r):n.supportsContext?n.supportsContext("webgl",r)||n.supportsContext("experimental-webgl",r):n.getContext("webgl",r)||n.getContext("experimental-webgl",r)}(e)),n[e]}(e&&e.failIfMajorPerformanceCaveat))}e.exports?e.exports=t:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=t);var n={};t.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),n={create:function(t,n,r){var i=e.window.document.createElement(t);return n&&(i.className=n),r&&r.appendChild(i),i},createNS:function(t,n){return e.window.document.createElementNS(t,n)}},r=e.window.document?e.window.document.documentElement.style:null;function i(e){if(!r)return null;for(var t=0;t<e.length;t++)if(e[t]in r)return e[t];return e[0]}var o,a=i(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);n.disableDrag=function(){r&&a&&(o=r[a],r[a]="none")},n.enableDrag=function(){r&&a&&(r[a]=o)};var s=i(["transform","WebkitTransform"]);n.setTransform=function(e,t){e.style[s]=t};var u=!1;try{var l=Object.defineProperty({},"passive",{get:function(){u=!0}});e.window.addEventListener("test",l,l),e.window.removeEventListener("test",l,l)}catch(e){u=!1}n.addEventListener=function(e,t,n,r){void 0===r&&(r={}),"passive"in r&&u?e.addEventListener(t,n,r):e.addEventListener(t,n,r.capture)},n.removeEventListener=function(e,t,n,r){void 0===r&&(r={}),"passive"in r&&u?e.removeEventListener(t,n,r):e.removeEventListener(t,n,r.capture)};var c=function(t){t.preventDefault(),t.stopPropagation(),e.window.removeEventListener("click",c,!0)};n.suppressClick=function(){e.window.addEventListener("click",c,!0),e.window.setTimeout(function(){e.window.removeEventListener("click",c,!0)},0)},n.mousePos=function(t,n){var r=t.getBoundingClientRect();return n=n.touches?n.touches[0]:n,new e.Point(n.clientX-r.left-t.clientLeft,n.clientY-r.top-t.clientTop)},n.touchPos=function(t,n){for(var r=t.getBoundingClientRect(),i=[],o="touchend"===n.type?n.changedTouches:n.touches,a=0;a<o.length;a++)i.push(new e.Point(o[a].clientX-r.left-t.clientLeft,o[a].clientY-r.top-t.clientTop));return i},n.mouseButton=function(t){return void 0!==e.window.InstallTrigger&&2===t.button&&t.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:t.button},n.remove=function(e){e.parentNode&&e.parentNode.removeChild(e)};var p=function(){this.images={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0};p.prototype.isLoaded=function(){return this.loaded},p.prototype.setLoaded=function(e){if(this.loaded!==e&&(this.loaded=e,e)){for(var t=0,n=this.requestors;t<n.length;t+=1){var r=n[t],i=r.ids,o=r.callback;this._notify(i,o)}this.requestors=[]}},p.prototype.getImage=function(e){return this.images[e]},p.prototype.addImage=function(e,t){this.images[e]=t},p.prototype.removeImage=function(e){delete this.images[e],delete this.patterns[e]},p.prototype.listImages=function(){return Object.keys(this.images)},p.prototype.getImages=function(e,t){var n=!0;if(!this.isLoaded())for(var r=0,i=e;r<i.length;r+=1){var o=i[r];this.images[o]||(n=!1)}this.isLoaded()||n?this._notify(e,t):this.requestors.push({ids:e,callback:t})},p.prototype._notify=function(e,t){for(var n={},r=0,i=e;r<i.length;r+=1){var o=i[r],a=this.images[o];a&&(n[o]={data:a.data.clone(),pixelRatio:a.pixelRatio,sdf:a.sdf})}t(null,n)},p.prototype.getPixelSize=function(){var e=this.atlasImage;return{width:e.width,height:e.height}},p.prototype.getPattern=function(t){var n=this.patterns[t];if(n)return n.position;var r=this.getImage(t);if(!r)return null;var i={w:r.data.width+2,h:r.data.height+2,x:0,y:0},o=new e.ImagePosition(i,r);return this.patterns[t]={bin:i,position:o},this._updatePatternAtlas(),o},p.prototype.bind=function(t){var n=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(t,this.atlasImage,n.RGBA),this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)},p.prototype._updatePatternAtlas=function(){var t=[];for(var n in this.patterns)t.push(this.patterns[n].bin);var r=e.potpack(t),i=r.w,o=r.h,a=this.atlasImage;for(var s in a.resize({width:i||1,height:o||1}),this.patterns){var u=this.patterns[s].bin,l=u.x+1,c=u.y+1,p=this.images[s].data,h=p.width,f=p.height;e.RGBAImage.copy(p,a,{x:0,y:0},{x:l,y:c},{width:h,height:f}),e.RGBAImage.copy(p,a,{x:0,y:f-1},{x:l,y:c-1},{width:h,height:1}),e.RGBAImage.copy(p,a,{x:0,y:0},{x:l,y:c+f},{width:h,height:1}),e.RGBAImage.copy(p,a,{x:h-1,y:0},{x:l-1,y:c},{width:1,height:f}),e.RGBAImage.copy(p,a,{x:0,y:0},{x:l+h,y:c},{width:1,height:f})}this.dirty=!0};var h=d,f=1e20;function d(e,t,n,r,i,o){this.fontSize=e||24,this.buffer=void 0===t?3:t,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function m(e,t,n,r,i,o,a){for(var s=0;s<t;s++){for(var u=0;u<n;u++)r[u]=e[u*t+s];for(_(r,i,o,a,n),u=0;u<n;u++)e[u*t+s]=i[u]}for(u=0;u<n;u++){for(s=0;s<t;s++)r[s]=e[u*t+s];for(_(r,i,o,a,t),s=0;s<t;s++)e[u*t+s]=Math.sqrt(i[s])}}function _(e,t,n,r,i){n[0]=0,r[0]=-f,r[1]=+f;for(var o=1,a=0;o<i;o++){for(var s=(e[o]+o*o-(e[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);s<=r[a];)a--,s=(e[o]+o*o-(e[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);n[++a]=o,r[a]=s,r[a+1]=+f}for(o=0,a=0;o<i;o++){for(;r[a+1]<o;)a++;t[o]=(o-n[a])*(o-n[a])+e[n[a]]}}d.prototype.draw=function(e){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(e,this.buffer,this.middle);for(var t=this.ctx.getImageData(0,0,this.size,this.size),n=new Uint8ClampedArray(this.size*this.size),r=0;r<this.size*this.size;r++){var i=t.data[4*r+3]/255;this.gridOuter[r]=1===i?0:0===i?f:Math.pow(Math.max(0,.5-i),2),this.gridInner[r]=1===i?f:0===i?0:Math.pow(Math.max(0,i-.5),2)}for(m(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),m(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),r=0;r<this.size*this.size;r++){var o=this.gridOuter[r]-this.gridInner[r];n[r]=Math.max(0,Math.min(255,Math.round(255-255*(o/this.radius+this.cutoff))))}return n};var y=function(e,t){this.requestTransform=e,this.localIdeographFontFamily=t,this.entries={}};y.prototype.setURL=function(e){this.url=e},y.prototype.getGlyphs=function(t,n){var r=this,i=[];for(var o in t)for(var a=0,s=t[o];a<s.length;a+=1){var u=s[a];i.push({stack:o,id:u})}e.asyncAll(i,function(e,t){var n=e.stack,i=e.id,o=r.entries[n];o||(o=r.entries[n]={glyphs:{},requests:{}});var a=o.glyphs[i];if(void 0===a)if(a=r._tinySDF(o,n,i))t(null,{stack:n,id:i,glyph:a});else{var s=Math.floor(i/256);if(256*s>65535)t(new Error("glyphs > 65535 not supported"));else{var u=o.requests[s];u||(u=o.requests[s]=[],y.loadGlyphRange(n,s,r.url,r.requestTransform,function(e,t){if(t)for(var n in t)o.glyphs[+n]=t[+n];for(var r=0,i=u;r<i.length;r+=1)(0,i[r])(e,t);delete o.requests[s]})),u.push(function(e,r){e?t(e):r&&t(null,{stack:n,id:i,glyph:r[i]||null})})}}else t(null,{stack:n,id:i,glyph:a})},function(e,t){if(e)n(e);else if(t){for(var r={},i=0,o=t;i<o.length;i+=1){var a=o[i],s=a.stack,u=a.id,l=a.glyph;(r[s]||(r[s]={}))[u]=l&&{id:l.id,bitmap:l.bitmap.clone(),metrics:l.metrics}}n(null,r)}})},y.prototype._tinySDF=function(t,n,r){var i=this.localIdeographFontFamily;if(i&&(e.isChar["CJK Unified Ideographs"](r)||e.isChar["Hangul Syllables"](r))){var o=t.tinySDF;if(!o){var a="400";/bold/i.test(n)?a="900":/medium/i.test(n)?a="500":/light/i.test(n)&&(a="200"),o=t.tinySDF=new y.TinySDF(24,3,8,.25,i,a)}return{id:r,bitmap:new e.AlphaImage({width:30,height:30},o.draw(String.fromCharCode(r))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},y.loadGlyphRange=function(t,n,r,i,o){var a=256*n,s=a+255,u=i(e.normalizeGlyphsURL(r).replace("{fontstack}",t).replace("{range}",a+"-"+s),e.ResourceType.Glyphs);e.getArrayBuffer(u,function(t,n){if(t)o(t);else if(n){for(var r={},i=0,a=e.parseGlyphPBF(n);i<a.length;i+=1){var s=a[i];r[s.id]=s}o(null,r)}})},y.TinySDF=h;var v=function(){this.specification=e.styleSpec.light.position};v.prototype.possiblyEvaluate=function(t,n){return e.sphericalToCartesian(t.expression.evaluate(n))},v.prototype.interpolate=function(t,n,r){return{x:e.number(t.x,n.x,r),y:e.number(t.y,n.y,r),z:e.number(t.z,n.z,r)}};var g=new e.Properties({anchor:new e.DataConstantProperty(e.styleSpec.light.anchor),position:new v,color:new e.DataConstantProperty(e.styleSpec.light.color),intensity:new e.DataConstantProperty(e.styleSpec.light.intensity)}),b=function(t){function n(n){t.call(this),this._transitionable=new e.Transitionable(g),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.getLight=function(){return this._transitionable.serialize()},n.prototype.setLight=function(t){if(!this._validate(e.validateLight,t))for(var n in t){var r=t[n];e.endsWith(n,"-transition")?this._transitionable.setTransition(n.slice(0,-"-transition".length),r):this._transitionable.setValue(n,r)}},n.prototype.updateTransitions=function(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)},n.prototype.hasTransition=function(){return this._transitioning.hasTransition()},n.prototype.recalculate=function(e){this.properties=this._transitioning.possiblyEvaluate(e)},n.prototype._validate=function(t,n){return e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:e.styleSpec})))},n}(e.Evented),x=function(e,t){this.width=e,this.height=t,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}};x.prototype.getDash=function(e,t){var n=e.join(",")+String(t);return this.positions[n]||(this.positions[n]=this.addDash(e,t)),this.positions[n]},x.prototype.addDash=function(t,n){var r=n?7:0,i=2*r+1;if(this.nextRow+i>this.height)return e.warnOnce("LineAtlas out of space"),null;for(var o=0,a=0;a<t.length;a++)o+=t[a];for(var s=this.width/o,u=s/2,l=t.length%2==1,c=-r;c<=r;c++)for(var p=this.nextRow+r+c,h=this.width*p,f=l?-t[t.length-1]:0,d=t[0],m=1,_=0;_<this.width;_++){for(;d<_/s;)f=d,d+=t[m],l&&m===t.length-1&&(d+=t[0]),m++;var y=Math.abs(_-f*s),v=Math.abs(_-d*s),g=Math.min(y,v),b=m%2==1,x=void 0;if(n){var w=r?c/r*(u+1):0;if(b){var E=u-Math.abs(w);x=Math.sqrt(g*g+E*E)}else x=u-Math.sqrt(g*g+w*w)}else x=(b?1:-1)*g;this.data[3+4*(h+_)]=Math.max(0,Math.min(255,x+128))}var T={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:o};return this.nextRow+=i,this.dirty=!0,T},x.prototype.bind=function(e){var t=e.gl;this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.RGBA,t.UNSIGNED_BYTE,this.data))):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width,this.height,0,t.RGBA,t.UNSIGNED_BYTE,this.data))};var w=function t(n,r){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=e.uniqueId();for(var i=this.workerPool.acquire(this.id),o=0;o<i.length;o++){var a=i[o],s=new t.Actor(a,r,this.id);s.name="Worker "+o,this.actors.push(s)}};function E(t,n,r){var i=function(t,n){if(t)return r(t);if(n){var i=e.pick(n,["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds"]);n.vector_layers&&(i.vectorLayers=n.vector_layers,i.vectorLayerIds=i.vectorLayers.map(function(e){return e.id})),r(null,i)}};return t.url?e.getJSON(n(e.normalizeSourceURL(t.url),e.ResourceType.Source),i):e.browser.frame(function(){return i(null,t)})}w.prototype.broadcast=function(t,n,r){r=r||function(){},e.asyncAll(this.actors,function(e,r){e.send(t,n,r)},r)},w.prototype.send=function(e,t,n,r){return("number"!=typeof r||isNaN(r))&&(r=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[r].send(e,t,n),r},w.prototype.remove=function(){this.actors.forEach(function(e){e.remove()}),this.actors=[],this.workerPool.release(this.id)},w.Actor=e.Actor;var T=function(t,n,r){this.bounds=e.LngLatBounds.convert(this.validateBounds(t)),this.minzoom=n||0,this.maxzoom=r||24};T.prototype.validateBounds=function(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]},T.prototype.contains=function(e){var t=Math.floor(this.lngX(this.bounds.getWest(),e.z)),n=Math.floor(this.latY(this.bounds.getNorth(),e.z)),r=Math.ceil(this.lngX(this.bounds.getEast(),e.z)),i=Math.ceil(this.latY(this.bounds.getSouth(),e.z));return e.x>=t&&e.x<r&&e.y>=n&&e.y<i},T.prototype.lngX=function(e,t){return(e+180)*(Math.pow(2,t)/360)},T.prototype.latY=function(t,n){var r=e.clamp(Math.sin(Math.PI/180*t),-.9999,.9999),i=Math.pow(2,n)/(2*Math.PI);return Math.pow(2,n-1)+.5*Math.log((1+r)/(1-r))*-i};var k=function(t){function n(n,r,i,o){if(t.call(this),this.id=n,this.dispatcher=i,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,e.extend(this,e.pick(r,["url","scheme","tileSize"])),this._options=e.extend({type:"vector"},r),this._collectResourceTiming=r.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(o)}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.load=function(){var t=this;this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=E(this._options,this.map._transformRequest,function(n,r){t._tileJSONRequest=null,n?t.fire(new e.ErrorEvent(n)):r&&(e.extend(t,r),r.bounds&&(t.tileBounds=new T(r.bounds,t.minzoom,t.maxzoom)),e.postTurnstileEvent(r.tiles),e.postMapLoadEvent(r.tiles,t.map._getMapId()),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},n.prototype.hasTile=function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)},n.prototype.onAdd=function(e){this.map=e,this.load()},n.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},n.prototype.serialize=function(){return e.extend({},this._options)},n.prototype.loadTile=function(t,n){var r=e.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),this.url),i={request:this.map._transformRequest(r,e.ResourceType.Tile),uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};function o(e,r){return t.aborted?n(null):e&&404!==e.status?n(e):(r&&r.resourceTiming&&(t.resourceTiming=r.resourceTiming),this.map._refreshExpiredTiles&&r&&t.setExpiryData(r),t.loadVectorData(r,this.map.painter),n(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}i.request.collectResourceTiming=this._collectResourceTiming,void 0===t.workerID||"expired"===t.state?t.workerID=this.dispatcher.send("loadTile",i,o.bind(this)):"loading"===t.state?t.reloadCallback=n:this.dispatcher.send("reloadTile",i,o.bind(this),t.workerID)},n.prototype.abortTile=function(e){this.dispatcher.send("abortTile",{uid:e.uid,type:this.type,source:this.id},void 0,e.workerID)},n.prototype.unloadTile=function(e){e.unloadVectorData(),this.dispatcher.send("removeTile",{uid:e.uid,type:this.type,source:this.id},void 0,e.workerID)},n.prototype.hasTransition=function(){return!1},n}(e.Evented),C=function(t){function n(n,r,i,o){t.call(this),this.id=n,this.dispatcher=i,this.setEventedParent(o),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({},r),e.extend(this,e.pick(r,["url","scheme","tileSize"]))}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.load=function(){var t=this;this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=E(this._options,this.map._transformRequest,function(n,r){t._tileJSONRequest=null,n?t.fire(new e.ErrorEvent(n)):r&&(e.extend(t,r),r.bounds&&(t.tileBounds=new T(r.bounds,t.minzoom,t.maxzoom)),e.postTurnstileEvent(r.tiles),e.postMapLoadEvent(r.tiles,t.map._getMapId()),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},n.prototype.onAdd=function(e){this.map=e,this.load()},n.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},n.prototype.serialize=function(){return e.extend({},this._options)},n.prototype.hasTile=function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)},n.prototype.loadTile=function(t,n){var r=this,i=e.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);t.request=e.getImage(this.map._transformRequest(i,e.ResourceType.Tile),function(i,o){if(delete t.request,t.aborted)t.state="unloaded",n(null);else if(i)t.state="errored",n(i);else if(o){r.map._refreshExpiredTiles&&t.setExpiryData(o),delete o.cacheControl,delete o.expires;var a=r.map.painter.context,s=a.gl;t.texture=r.map.painter.getTileTexture(o.width),t.texture?t.texture.update(o,{useMipmap:!0}):(t.texture=new e.Texture(a,o,s.RGBA,{useMipmap:!0}),t.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),a.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax)),t.state="loaded",n(null)}})},n.prototype.abortTile=function(e,t){e.request&&(e.request.cancel(),delete e.request),t()},n.prototype.unloadTile=function(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()},n.prototype.hasTransition=function(){return!1},n}(e.Evented),M=function(t){function n(n,r,i,o){t.call(this,n,r,i,o),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({},r),this.encoding=r.encoding||"mapbox"}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},n.prototype.loadTile=function(t,n){var r=e.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);t.request=e.getImage(this.map._transformRequest(r,e.ResourceType.Tile),function(r,i){if(delete t.request,t.aborted)t.state="unloaded",n(null);else if(r)t.state="errored",n(r);else if(i){this.map._refreshExpiredTiles&&t.setExpiryData(i),delete i.cacheControl,delete i.expires;var o=e.browser.getImageData(i),a={uid:t.uid,coord:t.tileID,source:this.id,rawImageData:o,encoding:this.encoding};t.workerID&&"expired"!==t.state||(t.workerID=this.dispatcher.send("loadDEMTile",a,function(e,r){e&&(t.state="errored",n(e)),r&&(t.dem=r,t.needsHillshadePrepare=!0,t.state="loaded",n(null))}.bind(this)))}}.bind(this)),t.neighboringTiles=this._getNeighboringTiles(t.tileID)},n.prototype._getNeighboringTiles=function(t){var n=t.canonical,r=Math.pow(2,n.z),i=(n.x-1+r)%r,o=0===n.x?t.wrap-1:t.wrap,a=(n.x+1+r)%r,s=n.x+1===r?t.wrap+1:t.wrap,u={};return u[new e.OverscaledTileID(t.overscaledZ,o,n.z,i,n.y).key]={backfilled:!1},u[new e.OverscaledTileID(t.overscaledZ,s,n.z,a,n.y).key]={backfilled:!1},n.y>0&&(u[new e.OverscaledTileID(t.overscaledZ,o,n.z,i,n.y-1).key]={backfilled:!1},u[new e.OverscaledTileID(t.overscaledZ,t.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},u[new e.OverscaledTileID(t.overscaledZ,s,n.z,a,n.y-1).key]={backfilled:!1}),n.y+1<r&&(u[new e.OverscaledTileID(t.overscaledZ,o,n.z,i,n.y+1).key]={backfilled:!1},u[new e.OverscaledTileID(t.overscaledZ,t.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},u[new e.OverscaledTileID(t.overscaledZ,s,n.z,a,n.y+1).key]={backfilled:!1}),u},n.prototype.unloadTile=function(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",this.dispatcher.send("removeDEMTile",{uid:e.uid,source:this.id},void 0,e.workerID)},n}(C),P=function(t){function n(n,r,i,o){t.call(this),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this.dispatcher=i,this.setEventedParent(o),this._data=r.data,this._options=e.extend({},r),this._collectResourceTiming=r.collectResourceTiming,this._resourceTiming=[],void 0!==r.maxzoom&&(this.maxzoom=r.maxzoom),r.type&&(this.type=r.type),r.attribution&&(this.attribution=r.attribution);var a=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:r.cluster||!1,geojsonVtOptions:{buffer:(void 0!==r.buffer?r.buffer:128)*a,tolerance:(void 0!==r.tolerance?r.tolerance:.375)*a,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:r.lineMetrics||!1,generateId:r.generateId||!1},superclusterOptions:{maxZoom:void 0!==r.clusterMaxZoom?Math.min(r.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:e.EXTENT,radius:(r.clusterRadius||50)*a,log:!1}},r.workerOptions)}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.load=function(){var t=this;this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(n){if(n)t.fire(new e.ErrorEvent(n));else{var r={dataType:"source",sourceDataType:"metadata"};t._collectResourceTiming&&t._resourceTiming&&t._resourceTiming.length>0&&(r.resourceTiming=t._resourceTiming,t._resourceTiming=[]),t.fire(new e.Event("data",r))}})},n.prototype.onAdd=function(e){this.map=e,this.load()},n.prototype.setData=function(t){var n=this;return this._data=t,this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(t){if(t)n.fire(new e.ErrorEvent(t));else{var r={dataType:"source",sourceDataType:"content"};n._collectResourceTiming&&n._resourceTiming&&n._resourceTiming.length>0&&(r.resourceTiming=n._resourceTiming,n._resourceTiming=[]),n.fire(new e.Event("data",r))}}),this},n.prototype.getClusterExpansionZoom=function(e,t){return this.dispatcher.send("geojson.getClusterExpansionZoom",{clusterId:e,source:this.id},t,this.workerID),this},n.prototype.getClusterChildren=function(e,t){return this.dispatcher.send("geojson.getClusterChildren",{clusterId:e,source:this.id},t,this.workerID),this},n.prototype.getClusterLeaves=function(e,t,n,r){return this.dispatcher.send("geojson.getClusterLeaves",{source:this.id,clusterId:e,limit:t,offset:n},r,this.workerID),this},n.prototype._updateWorkerData=function(t){var n=this,r=e.extend({},this.workerOptions),i=this._data;"string"==typeof i?(r.request=this.map._transformRequest(e.browser.resolveURL(i),e.ResourceType.Source),r.request.collectResourceTiming=this._collectResourceTiming):r.data=JSON.stringify(i),this.workerID=this.dispatcher.send(this.type+".loadData",r,function(e,i){n._removed||i&&i.abandoned||(n._loaded=!0,i&&i.resourceTiming&&i.resourceTiming[n.id]&&(n._resourceTiming=i.resourceTiming[n.id].slice(0)),n.dispatcher.send(n.type+".coalesce",{source:r.source},null,n.workerID),t(e))},this.workerID)},n.prototype.loadTile=function(t,n){var r=this,i=void 0===t.workerID?"loadTile":"reloadTile",o={type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};t.workerID=this.dispatcher.send(i,o,function(e,o){return t.unloadVectorData(),t.aborted?n(null):e?n(e):(t.loadVectorData(o,r.map.painter,"reloadTile"===i),n(null))},this.workerID)},n.prototype.abortTile=function(e){e.aborted=!0},n.prototype.unloadTile=function(e){e.unloadVectorData(),this.dispatcher.send("removeTile",{uid:e.uid,type:this.type,source:this.id},null,e.workerID)},n.prototype.onRemove=function(){this._removed=!0,this.dispatcher.send("removeSource",{type:this.type,source:this.id},null,this.workerID)},n.prototype.serialize=function(){return e.extend({},this._options,{type:this.type,data:this._data})},n.prototype.hasTransition=function(){return!1},n}(e.Evented),A=function(t){function n(e,n,r,i){t.call(this),this.id=e,this.dispatcher=r,this.coordinates=n.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this.setEventedParent(i),this.options=n}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.load=function(t,n){var r=this;this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._transformRequest(this.url,e.ResourceType.Image),function(i,o){i?r.fire(new e.ErrorEvent(i)):o&&(r.image=e.browser.getImageData(o),t&&(r.coordinates=t),n&&n(),r._finishLoading())})},n.prototype.updateImage=function(e){var t=this;return this.image&&e.url?(this.options.url=e.url,this.load(e.coordinates,function(){t.texture=null}),this):this},n.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))},n.prototype.onAdd=function(e){this.map=e,this.load()},n.prototype.setCoordinates=function(t){var n=this;this.coordinates=t;var r=t.map(e.MercatorCoordinate.fromLngLat);this.tileID=function(t){for(var n=1/0,r=1/0,i=-1/0,o=-1/0,a=0,s=t;a<s.length;a+=1){var u=s[a];n=Math.min(n,u.x),r=Math.min(r,u.y),i=Math.max(i,u.x),o=Math.max(o,u.y)}var l=i-n,c=o-r,p=Math.max(l,c),h=Math.max(0,Math.floor(-Math.log(p)/Math.LN2)),f=Math.pow(2,h);return new e.CanonicalTileID(h,Math.floor((n+i)/2*f),Math.floor((r+o)/2*f))}(r),this.minzoom=this.maxzoom=this.tileID.z;var i=r.map(function(e){return n.tileID.getTilePoint(e)._round()});return this._boundsArray=new e.StructArrayLayout4i8,this._boundsArray.emplaceBack(i[0].x,i[0].y,0,0),this._boundsArray.emplaceBack(i[1].x,i[1].y,e.EXTENT,0),this._boundsArray.emplaceBack(i[3].x,i[3].y,0,e.EXTENT),this._boundsArray.emplaceBack(i[2].x,i[2].y,e.EXTENT,e.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this},n.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var t=this.map.painter.context,n=t.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,e.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new e.Texture(t,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var i=this.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}},n.prototype.loadTile=function(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},t(null)):(e.state="errored",t(null))},n.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},n.prototype.hasTransition=function(){return!1},n}(e.Evented),S=function(t){function n(e,n,r,i){t.call(this,e,n,r,i),this.roundZoom=!0,this.type="video",this.options=n}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.load=function(){var t=this,n=this.options;this.urls=[];for(var r=0,i=n.urls;r<i.length;r+=1){var o=i[r];t.urls.push(t.map._transformRequest(o,e.ResourceType.Source).url)}e.getVideo(this.urls,function(n,r){n?t.fire(new e.ErrorEvent(n)):r&&(t.video=r,t.video.loop=!0,t.video.addEventListener("playing",function(){t.map.triggerRepaint()}),t.map&&t.video.play(),t._finishLoading())})},n.prototype.getVideo=function(){return this.video},n.prototype.onAdd=function(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},n.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var t=this.map.painter.context,n=t.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,e.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(t,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var i=this.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}},n.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},n.prototype.hasTransition=function(){return this.video&&!this.video.paused},n}(A),O=function(t){function n(n,r,i,o){t.call(this,n,r,i,o),r.coordinates?Array.isArray(r.coordinates)&&4===r.coordinates.length&&!r.coordinates.some(function(e){return!Array.isArray(e)||2!==e.length||e.some(function(e){return"number"!=typeof e})})||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+n,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+n,null,'missing required property "coordinates"'))),r.animate&&"boolean"!=typeof r.animate&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+n,null,'optional "animate" property must be a boolean value'))),r.canvas?"string"==typeof r.canvas||r.canvas instanceof e.window.HTMLCanvasElement||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+n,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+n,null,'missing required property "canvas"'))),this.options=r,this.animate=void 0===r.animate||r.animate}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.load=function(){this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing=!1},this._finishLoading())},n.prototype.getCanvas=function(){return this.canvas},n.prototype.onAdd=function(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()},n.prototype.onRemove=function(){this.pause()},n.prototype.prepare=function(){var t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var n=this.map.painter.context,r=n.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,e.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(n,this.canvas,r.RGBA,{premultiply:!0}),this.tiles){var o=this.tiles[i];"loaded"!==o.state&&(o.state="loaded",o.texture=this.texture)}}},n.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},n.prototype.hasTransition=function(){return this._playing},n.prototype._hasInvalidDimensions=function(){for(var e=0,t=[this.canvas.width,this.canvas.height];e<t.length;e+=1){var n=t[e];if(isNaN(n)||n<=0)return!0}return!1},n}(A),I={vector:k,raster:C,"raster-dem":M,geojson:P,video:S,image:A,canvas:O},R=function(t,n,r,i){var o=new I[n.type](t,n,r,i);if(o.id!==t)throw new Error("Expected Source id to be "+t+" instead of "+o.id);return e.bindAll(["load","abort","unload","serialize","prepare"],o),o};function j(e,t,n,r,i){var o=i.maxPitchScaleFactor(),a=e.tilesIn(n,o);a.sort(L);for(var s=[],u=0,l=a;u<l.length;u+=1){var c=l[u];s.push({wrappedTileID:c.tileID.wrapped().key,queryResults:c.tile.queryRenderedFeatures(t,e._state,c.queryGeometry,c.scale,r,i,o,e.transform.calculatePosMatrix(c.tileID.toUnwrapped()))})}var p=function(e){for(var t={},n={},r=0,i=e;r<i.length;r+=1){var o=i[r],a=o.queryResults,s=o.wrappedTileID,u=n[s]=n[s]||{};for(var l in a)for(var c=a[l],p=u[l]=u[l]||{},h=t[l]=t[l]||[],f=0,d=c;f<d.length;f+=1){var m=d[f];p[m.featureIndex]||(p[m.featureIndex]=!0,h.push(m.feature))}}return t}(s);for(var h in p)p[h].forEach(function(t){var n=e.getFeatureState(t.layer["source-layer"],t.id);t.source=t.layer.source,t.layer["source-layer"]&&(t.sourceLayer=t.layer["source-layer"]),t.state=n});return p}function L(e,t){var n=e.tileID,r=t.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}var z=function(e,t){this.max=e,this.onRemove=t,this.reset()};z.prototype.reset=function(){for(var e in this.data)for(var t=0,n=this.data[e];t<n.length;t+=1){var r=n[t];r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value)}return this.data={},this.order=[],this},z.prototype.add=function(e,t,n){var r=this,i=e.wrapped().key;void 0===this.data[i]&&(this.data[i]=[]);var o={value:t,timeout:void 0};if(void 0!==n&&(o.timeout=setTimeout(function(){r.remove(e,o)},n)),this.data[i].push(o),this.order.push(i),this.order.length>this.max){var a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this},z.prototype.has=function(e){return e.wrapped().key in this.data},z.prototype.getAndRemove=function(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null},z.prototype._getAndRemoveByKey=function(e){var t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value},z.prototype.get=function(e){return this.has(e)?this.data[e.wrapped().key][0].value:null},z.prototype.remove=function(e,t){if(!this.has(e))return this;var n=e.wrapped().key,r=void 0===t?0:this.data[n].indexOf(t),i=this.data[n][r];return this.data[n].splice(r,1),i.timeout&&clearTimeout(i.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(i.value),this.order.splice(this.order.indexOf(n),1),this},z.prototype.setMaxSize=function(e){for(this.max=e;this.order.length>this.max;){var t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this};var D=function(e,t,n){this.context=e;var r=e.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer};D.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},D.prototype.updateData=function(e){var t=this.context.gl;this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)},D.prototype.destroy=function(){var e=this.context.gl;this.buffer&&(e.deleteBuffer(this.buffer),delete this.buffer)};var B={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},N=function(e,t,n,r){this.length=t.length,this.attributes=n,this.itemSize=t.bytesPerElement,this.dynamicDraw=r,this.context=e;var i=e.gl;this.buffer=i.createBuffer(),e.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer};N.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},N.prototype.updateData=function(e){var t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)},N.prototype.enableAttributes=function(e,t){for(var n=0;n<this.attributes.length;n++){var r=this.attributes[n],i=t.attributes[r.name];void 0!==i&&e.enableVertexAttribArray(i)}},N.prototype.setVertexAttribPointers=function(e,t,n){for(var r=0;r<this.attributes.length;r++){var i=this.attributes[r],o=t.attributes[i.name];void 0!==o&&e.vertexAttribPointer(o,i.components,e[B[i.type]],!1,this.itemSize,i.offset+this.itemSize*(n||0))}},N.prototype.destroy=function(){var e=this.context.gl;this.buffer&&(e.deleteBuffer(this.buffer),delete this.buffer)};var q=function(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};q.prototype.get=function(){return this.current},q.prototype.set=function(e){},q.prototype.getDefault=function(){return this.default},q.prototype.setDefault=function(){this.set(this.default)};var F=function(t){function n(){t.apply(this,arguments)}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return e.Color.transparent},n.prototype.set=function(e){var t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)},n}(q),U=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return 1},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)},t}(q),V=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return 0},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)},t}(q),W=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return[!0,!0,!0,!0]},t.prototype.set=function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)},t}(q),G=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return!0},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)},t}(q),Z=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return 255},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)},t}(q),H=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},t.prototype.set=function(e){var t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)},t}(q),K=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){var e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]},t.prototype.set=function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)},t}(q),Y=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return!1},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}},t}(q),X=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return[0,1]},t.prototype.set=function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)},t}(q),$=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return!1},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}},t}(q),J=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return this.gl.LESS},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)},t}(q),Q=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return!1},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}},t}(q),ee=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){var e=this.gl;return[e.ONE,e.ZERO]},t.prototype.set=function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)},t}(q),te=function(t){function n(){t.apply(this,arguments)}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return e.Color.transparent},n.prototype.set=function(e){var t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)},n}(q),ne=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return this.gl.FUNC_ADD},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)},t}(q),re=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return!1},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}},t}(q),ie=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return this.gl.BACK},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)},t}(q),oe=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return this.gl.CCW},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)},t}(q),ae=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)},t}(q),se=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return this.gl.TEXTURE0},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)},t}(q),ue=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){var e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]},t.prototype.set=function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)},t}(q),le=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}},t}(q),ce=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}},t}(q),pe=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}},t}(q),he=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}},t}(q),fe=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){var t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1},t}(q),de=function(e){function t(t){e.call(this,t),this.vao=t.extVertexArrayObject}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){this.vao&&(e!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(e),this.current=e,this.dirty=!1)},t}(q),me=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return 4},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}},t}(q),_e=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return!1},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}},t}(q),ye=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return!1},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}},t}(q),ve=function(e){function t(t,n){e.call(this,t),this.context=t,this.parent=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return null},t}(q),ge=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setDirty=function(){this.dirty=!0},t.prototype.set=function(e){if(e!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}},t}(ve),be=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.set=function(e){if(e!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e),this.current=e,this.dirty=!1}},t}(ve),xe=function(e,t,n){this.context=e,this.width=t,this.height=n;var r=e.gl,i=this.framebuffer=r.createFramebuffer();this.colorAttachment=new ge(e,i),this.depthAttachment=new be(e,i)};xe.prototype.destroy=function(){var e=this.context.gl,t=this.colorAttachment.get();t&&e.deleteTexture(t);var n=this.depthAttachment.get();n&&e.deleteRenderbuffer(n),e.deleteFramebuffer(this.framebuffer)};var we=function(e,t,n){this.func=e,this.mask=t,this.range=n};we.ReadOnly=!1,we.ReadWrite=!0,we.disabled=new we(519,we.ReadOnly,[0,1]);var Ee=function(e,t,n,r,i,o){this.test=e,this.ref=t,this.mask=n,this.fail=r,this.depthFail=i,this.pass=o};Ee.disabled=new Ee({func:519,mask:0},0,0,7680,7680,7680);var Te=function(e,t,n){this.blendFunction=e,this.blendColor=t,this.mask=n};Te.disabled=new Te(Te.Replace=[1,0],e.Color.transparent,[!1,!1,!1,!1]),Te.unblended=new Te(Te.Replace,e.Color.transparent,[!0,!0,!0,!0]),Te.alphaBlended=new Te([1,771],e.Color.transparent,[!0,!0,!0,!0]);var ke=function(e,t,n){this.enable=e,this.mode=t,this.frontFace=n};ke.disabled=new ke(!1,1029,2305),ke.backCCW=new ke(!0,1029,2305);var Ce=function(e){this.gl=e,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new F(this),this.clearDepth=new U(this),this.clearStencil=new V(this),this.colorMask=new W(this),this.depthMask=new G(this),this.stencilMask=new Z(this),this.stencilFunc=new H(this),this.stencilOp=new K(this),this.stencilTest=new Y(this),this.depthRange=new X(this),this.depthTest=new $(this),this.depthFunc=new J(this),this.blend=new Q(this),this.blendFunc=new ee(this),this.blendColor=new te(this),this.blendEquation=new ne(this),this.cullFace=new re(this),this.cullFaceSide=new ie(this),this.frontFace=new oe(this),this.program=new ae(this),this.activeTexture=new se(this),this.viewport=new ue(this),this.bindFramebuffer=new le(this),this.bindRenderbuffer=new ce(this),this.bindTexture=new pe(this),this.bindVertexBuffer=new he(this),this.bindElementBuffer=new fe(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new de(this),this.pixelStoreUnpack=new me(this),this.pixelStoreUnpackPremultiplyAlpha=new _e(this),this.pixelStoreUnpackFlipY=new ye(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=e.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&e.getExtension("OES_texture_half_float_linear")};Ce.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Ce.prototype.createIndexBuffer=function(e,t){return new D(this,e,t)},Ce.prototype.createVertexBuffer=function(e,t,n){return new N(this,e,t,n)},Ce.prototype.createRenderbuffer=function(e,t,n){var r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,e,t,n),this.bindRenderbuffer.set(null),i},Ce.prototype.createFramebuffer=function(e,t){return new xe(this,e,t)},Ce.prototype.clear=function(e){var t=e.color,n=e.depth,r=this.gl,i=0;t&&(i|=r.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(i|=r.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),r.clear(i)},Ce.prototype.setCullFace=function(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))},Ce.prototype.setDepthMode=function(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)},Ce.prototype.setStencilMode=function(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)},Ce.prototype.setColorMode=function(t){e.isEqual(t.blendFunction,Te.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)},Ce.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Me=function(t){function n(n,r,i){var o=this;t.call(this),this.id=n,this.dispatcher=i,this.on("data",function(e){"source"===e.dataType&&"metadata"===e.sourceDataType&&(o._sourceLoaded=!0),o._sourceLoaded&&!o._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(o.reload(),o.transform&&o.update(o.transform))}),this.on("error",function(){o._sourceErrored=!0}),this._source=R(n,r,i,this),this._tiles={},this._cache=new z(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._coveredTiles={},this._state=new e.SourceFeatureState}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.onAdd=function(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(e)},n.prototype.onRemove=function(e){this._source&&this._source.onRemove&&this._source.onRemove(e)},n.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var e in this._tiles){var t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0},n.prototype.getSource=function(){return this._source},n.prototype.pause=function(){this._paused=!0},n.prototype.resume=function(){if(this._paused){var e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}},n.prototype._loadTile=function(e,t){return this._source.loadTile(e,t)},n.prototype._unloadTile=function(e){if(this._source.unloadTile)return this._source.unloadTile(e,function(){})},n.prototype._abortTile=function(e){if(this._source.abortTile)return this._source.abortTile(e,function(){})},n.prototype.serialize=function(){return this._source.serialize()},n.prototype.prepare=function(e){for(var t in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles)this._tiles[t].upload(e)},n.prototype.getIds=function(){return Object.keys(this._tiles).map(Number).sort(Pe)},n.prototype.getRenderableIds=function(t){var n=this,r=[];for(var i in n._tiles)n._isIdRenderable(+i,t)&&r.push(+i);return t?r.sort(function(t,r){var i=n._tiles[t].tileID,o=n._tiles[r].tileID,a=new e.Point(i.canonical.x,i.canonical.y)._rotate(n.transform.angle),s=new e.Point(o.canonical.x,o.canonical.y)._rotate(n.transform.angle);return i.overscaledZ-o.overscaledZ||s.y-a.y||s.x-a.x}):r.sort(Pe)},n.prototype.hasRenderableParent=function(e){var t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)},n.prototype._isIdRenderable=function(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())},n.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var e in this._cache.reset(),this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(e,"reloading")},n.prototype._reloadTile=function(e,t){var n=this._tiles[e];n&&("loading"!==n.state&&(n.state=t),this._loadTile(n,this._tileLoaded.bind(this,n,e,t)))},n.prototype._tileLoaded=function(t,n,r,i){if(i)return t.state="errored",void(404!==i.status?this._source.fire(new e.ErrorEvent(i,{tile:t})):this.update(this.transform));t.timeAdded=e.browser.now(),"expired"===r&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(n,t),"raster-dem"===this.getSource().type&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),this._source.fire(new e.Event("data",{dataType:"source",tile:t,coord:t.tileID}))},n.prototype._backfillDEM=function(e){for(var t=this.getRenderableIds(),n=0;n<t.length;n++){var r=t[n];if(e.neighboringTiles&&e.neighboringTiles[r]){var i=this.getTileByID(r);o(e,i),o(i,e)}}function o(e,t){e.needsHillshadePrepare=!0;var n=t.tileID.canonical.x-e.tileID.canonical.x,r=t.tileID.canonical.y-e.tileID.canonical.y,i=Math.pow(2,e.tileID.canonical.z),o=t.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,n,r),e.neighboringTiles&&e.neighboringTiles[o]&&(e.neighboringTiles[o].backfilled=!0)))}},n.prototype.getTile=function(e){return this.getTileByID(e.key)},n.prototype.getTileByID=function(e){return this._tiles[e]},n.prototype.getZoom=function(e){return e.zoom+e.scaleZoom(e.tileSize/this._source.tileSize)},n.prototype._retainLoadedChildren=function(e,t,n,r){for(var i in this._tiles){var o=this._tiles[i];if(!(r[i]||!o.hasData()||o.tileID.overscaledZ<=t||o.tileID.overscaledZ>n)){for(var a=o.tileID;o&&o.tileID.overscaledZ>t+1;){var s=o.tileID.scaledTo(o.tileID.overscaledZ-1);(o=this._tiles[s.key])&&o.hasData()&&(a=s)}for(var u=a;u.overscaledZ>t;)if(e[(u=u.scaledTo(u.overscaledZ-1)).key]){r[a.key]=a;break}}}},n.prototype.findLoadedParent=function(e,t){for(var n=e.overscaledZ-1;n>=t;n--){var r=e.scaledTo(n);if(!r)return;var i=String(r.key),o=this._tiles[i];if(o&&o.hasData())return o;if(this._cache.has(r))return this._cache.get(r)}},n.prototype.updateCacheSize=function(e){var t=(Math.ceil(e.width/this._source.tileSize)+1)*(Math.ceil(e.height/this._source.tileSize)+1),n=Math.floor(5*t),r="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,n):n;this._cache.setMaxSize(r)},n.prototype.handleWrapJump=function(e){var t=(e-(void 0===this._prevLng?e:this._prevLng))/360,n=Math.round(t);if(this._prevLng=e,n){var r={};for(var i in this._tiles){var o=this._tiles[i];o.tileID=o.tileID.unwrapTo(o.tileID.wrap+n),r[o.tileID.key]=o}for(var a in this._tiles=r,this._timers)clearTimeout(this._timers[a]),delete this._timers[a];for(var s in this._tiles){var u=this._tiles[s];this._setTileReloadTimer(s,u)}}},n.prototype.update=function(t){var r=this;if(this.transform=t,this._sourceLoaded&&!this._paused){var i;this.updateCacheSize(t),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?i=t.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(t){return new e.OverscaledTileID(t.canonical.z,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y)}):(i=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(i=i.filter(function(e){return r._source.hasTile(e)}))):i=[];var o=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(t)),a=Math.max(o-n.maxOverzooming,this._source.minzoom),s=Math.max(o+n.maxUnderzooming,this._source.minzoom),u=this._updateRetainedTiles(i,o);if(Ae(this._source.type)){for(var l={},c={},p=0,h=Object.keys(u);p<h.length;p+=1){var f=h[p],d=u[f],m=r._tiles[f];if(m&&!(m.fadeEndTime&&m.fadeEndTime<=e.browser.now())){var _=r.findLoadedParent(d,a);_&&(r._addTile(_.tileID),l[_.tileID.key]=_.tileID),c[f]=d}}for(var y in this._retainLoadedChildren(c,o,s,u),l)u[y]||(r._coveredTiles[y]=!0,u[y]=l[y])}for(var v in u)r._tiles[v].clearFadeHold();for(var g=0,b=e.keysDifference(this._tiles,u);g<b.length;g+=1){var x=b[g],w=r._tiles[x];w.hasSymbolBuckets&&!w.holdingForFade()?w.setHoldDuration(r.map._fadeDuration):w.hasSymbolBuckets&&!w.symbolFadeFinished()||r._removeTile(x)}}},n.prototype.releaseSymbolFadeTiles=function(){for(var e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(e)},n.prototype._updateRetainedTiles=function(e,t){for(var r={},i={},o=Math.max(t-n.maxOverzooming,this._source.minzoom),a=Math.max(t+n.maxUnderzooming,this._source.minzoom),s={},u=0,l=e;u<l.length;u+=1){var c=l[u],p=this._addTile(c);r[c.key]=c,p.hasData()||t<this._source.maxzoom&&(s[c.key]=c)}this._retainLoadedChildren(s,t,a,r);for(var h=0,f=e;h<f.length;h+=1){var d=f[h],m=this._tiles[d.key];if(!m.hasData()){if(t+1>this._source.maxzoom){var _=d.children(this._source.maxzoom)[0],y=this.getTile(_);if(y&&y.hasData()){r[_.key]=_;continue}}else{var v=d.children(this._source.maxzoom);if(r[v[0].key]&&r[v[1].key]&&r[v[2].key]&&r[v[3].key])continue}for(var g=m.wasRequested(),b=d.overscaledZ-1;b>=o;--b){var x=d.scaledTo(b);if(i[x.key])break;if(i[x.key]=!0,!(m=this.getTile(x))&&g&&(m=this._addTile(x)),m&&(r[x.key]=x,g=m.wasRequested(),m.hasData()))break}}}return r},n.prototype._addTile=function(t){var n=this._tiles[t.key];if(n)return n;(n=this._cache.getAndRemove(t))&&(this._setTileReloadTimer(t.key,n),n.tileID=t,this._state.initializeTileState(n,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,n)));var r=Boolean(n);return r||(n=new e.Tile(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(n,this._tileLoaded.bind(this,n,t.key,n.state))),n?(n.uses++,this._tiles[t.key]=n,r||this._source.fire(new e.Event("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n):null},n.prototype._setTileReloadTimer=function(e,t){var n=this;e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);var r=t.getExpiryTimeout();r&&(this._timers[e]=setTimeout(function(){n._reloadTile(e,"expired"),delete n._timers[e]},r))},n.prototype._removeTile=function(e){var t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))},n.prototype.clearTiles=function(){for(var e in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(e);this._cache.reset()},n.prototype.tilesIn=function(t,n){for(var r=[],i=this.getIds(),o=1/0,a=1/0,s=-1/0,u=-1/0,l=0;l<t.length;l++){var c=t[l];o=Math.min(o,c.x),a=Math.min(a,c.y),s=Math.max(s,c.x),u=Math.max(u,c.y)}for(var p=0;p<i.length;p++){var h=this._tiles[i[p]];if(!h.holdingForFade()){var f=h.tileID,d=Math.pow(2,this.transform.zoom-h.tileID.overscaledZ),m=n*h.queryPadding*e.EXTENT/h.tileSize/d,_=[f.getTilePoint(new e.MercatorCoordinate(o,a)),f.getTilePoint(new e.MercatorCoordinate(s,u))];if(_[0].x-m<e.EXTENT&&_[0].y-m<e.EXTENT&&_[1].x+m>=0&&_[1].y+m>=0){for(var y=[],v=0;v<t.length;v++)y.push(f.getTilePoint(t[v]));r.push({tile:h,tileID:f,queryGeometry:[y],scale:d})}}}return r},n.prototype.getVisibleCoordinates=function(e){for(var t=this,n=this.getRenderableIds(e).map(function(e){return t._tiles[e].tileID}),r=0,i=n;r<i.length;r+=1){var o=i[r];o.posMatrix=t.transform.calculatePosMatrix(o.toUnwrapped())}return n},n.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Ae(this._source.type))for(var t in this._tiles){var n=this._tiles[t];if(void 0!==n.fadeEndTime&&n.fadeEndTime>=e.browser.now())return!0}return!1},n.prototype.setFeatureState=function(e,t,n){e=e||"_geojsonTileLayer",this._state.updateState(e,t,n)},n.prototype.getFeatureState=function(e,t){return e=e||"_geojsonTileLayer",this._state.getState(e,t)},n}(e.Evented);function Pe(e,t){return e%32-t%32||t-e}function Ae(e){return"raster"===e||"image"===e||"video"===e}function Se(){return new e.window.Worker(Kr.workerUrl)}Me.maxOverzooming=10,Me.maxUnderzooming=3;var Oe=function(){this.active={}};Oe.prototype.acquire=function(e){if(!this.workers)for(this.workers=[];this.workers.length<Oe.workerCount;)this.workers.push(new Se);return this.active[e]=!0,this.workers.slice()},Oe.prototype.release=function(e){delete this.active[e],0===Object.keys(this.active).length&&(this.workers.forEach(function(e){e.terminate()}),this.workers=null)};var Ie,Re=Math.floor(e.browser.hardwareConcurrency/2);function je(t,n){var r={};for(var i in t)"ref"!==i&&(r[i]=t[i]);return e.refProperties.forEach(function(e){e in n&&(r[e]=n[e])}),r}function Le(e){e=e.slice();for(var t=Object.create(null),n=0;n<e.length;n++)t[e[n].id]=e[n];for(var r=0;r<e.length;r++)"ref"in e[r]&&(e[r]=je(e[r],t[e[r].ref]));return e}Oe.workerCount=Math.max(Math.min(Re,6),1);var ze={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function De(e,t,n){n.push({command:ze.addSource,args:[e,t[e]]})}function Be(e,t,n){t.push({command:ze.removeSource,args:[e]}),n[e]=!0}function Ne(e,t,n,r){Be(e,n,r),De(e,t,n)}function qe(t,n,r){var i;for(i in t[r])if(t[r].hasOwnProperty(i)&&"data"!==i&&!e.isEqual(t[r][i],n[r][i]))return!1;for(i in n[r])if(n[r].hasOwnProperty(i)&&"data"!==i&&!e.isEqual(t[r][i],n[r][i]))return!1;return!0}function Fe(t,n,r,i,o,a){var s;for(s in n=n||{},t=t||{})t.hasOwnProperty(s)&&(e.isEqual(t[s],n[s])||r.push({command:a,args:[i,s,n[s],o]}));for(s in n)n.hasOwnProperty(s)&&!t.hasOwnProperty(s)&&(e.isEqual(t[s],n[s])||r.push({command:a,args:[i,s,n[s],o]}))}function Ue(e){return e.id}function Ve(e,t){return e[t.id]=t,e}var We=function(e,t,n){var r=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(e/n),this.yCellCount=Math.ceil(t/n);for(var o=0;o<this.xCellCount*this.yCellCount;o++)r.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0};We.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},We.prototype.insert=function(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},We.prototype.insertCircle=function(e,t,n,r){this._forEachCell(t-r,n-r,t+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(n),this.circles.push(r)},We.prototype._insertBoxCell=function(e,t,n,r,i,o){this.boxCells[i].push(o)},We.prototype._insertCircleCell=function(e,t,n,r,i,o){this.circleCells[i].push(o)},We.prototype._query=function(e,t,n,r,i,o){if(n<0||e>this.width||r<0||t>this.height)return!i&&[];var a=[];if(e<=0&&t<=0&&this.width<=n&&this.height<=r){if(i)return!0;for(var s=0;s<this.boxKeys.length;s++)a.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var u=0;u<this.circleKeys.length;u++){var l=this.circles[3*u],c=this.circles[3*u+1],p=this.circles[3*u+2];a.push({key:this.circleKeys[u],x1:l-p,y1:c-p,x2:l+p,y2:c+p})}return o?a.filter(o):a}var h={hitTest:i,seenUids:{box:{},circle:{}}};return this._forEachCell(e,t,n,r,this._queryCell,a,h,o),i?a.length>0:a},We.prototype._queryCircle=function(e,t,n,r,i){var o=e-n,a=e+n,s=t-n,u=t+n;if(a<0||o>this.width||u<0||s>this.height)return!r&&[];var l=[],c={hitTest:r,circle:{x:e,y:t,radius:n},seenUids:{box:{},circle:{}}};return this._forEachCell(o,s,a,u,this._queryCellCircle,l,c,i),r?l.length>0:l},We.prototype.query=function(e,t,n,r,i){return this._query(e,t,n,r,!1,i)},We.prototype.hitTest=function(e,t,n,r,i){return this._query(e,t,n,r,!0,i)},We.prototype.hitTestCircle=function(e,t,n,r){return this._queryCircle(e,t,n,!0,r)},We.prototype._queryCell=function(e,t,n,r,i,o,a,s){var u=a.seenUids,l=this.boxCells[i];if(null!==l)for(var c=this.bboxes,p=0,h=l;p<h.length;p+=1){var f=h[p];if(!u.box[f]){u.box[f]=!0;var d=4*f;if(e<=c[d+2]&&t<=c[d+3]&&n>=c[d+0]&&r>=c[d+1]&&(!s||s(this.boxKeys[f]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[f],x1:c[d],y1:c[d+1],x2:c[d+2],y2:c[d+3]})}}}var m=this.circleCells[i];if(null!==m)for(var _=this.circles,y=0,v=m;y<v.length;y+=1){var g=v[y];if(!u.circle[g]){u.circle[g]=!0;var b=3*g;if(this._circleAndRectCollide(_[b],_[b+1],_[b+2],e,t,n,r)&&(!s||s(this.circleKeys[g]))){if(a.hitTest)return o.push(!0),!0;var x=_[b],w=_[b+1],E=_[b+2];o.push({key:this.circleKeys[g],x1:x-E,y1:w-E,x2:x+E,y2:w+E})}}}},We.prototype._queryCellCircle=function(e,t,n,r,i,o,a,s){var u=a.circle,l=a.seenUids,c=this.boxCells[i];if(null!==c)for(var p=this.bboxes,h=0,f=c;h<f.length;h+=1){var d=f[h];if(!l.box[d]){l.box[d]=!0;var m=4*d;if(this._circleAndRectCollide(u.x,u.y,u.radius,p[m+0],p[m+1],p[m+2],p[m+3])&&(!s||s(this.boxKeys[d])))return o.push(!0),!0}}var _=this.circleCells[i];if(null!==_)for(var y=this.circles,v=0,g=_;v<g.length;v+=1){var b=g[v];if(!l.circle[b]){l.circle[b]=!0;var x=3*b;if(this._circlesCollide(y[x],y[x+1],y[x+2],u.x,u.y,u.radius)&&(!s||s(this.circleKeys[b])))return o.push(!0),!0}}},We.prototype._forEachCell=function(e,t,n,r,i,o,a,s){for(var u=this._convertToXCellCoord(e),l=this._convertToYCellCoord(t),c=this._convertToXCellCoord(n),p=this._convertToYCellCoord(r),h=u;h<=c;h++)for(var f=l;f<=p;f++){var d=this.xCellCount*f+h;if(i.call(this,e,t,n,r,d,o,a,s))return}},We.prototype._convertToXCellCoord=function(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))},We.prototype._convertToYCellCoord=function(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))},We.prototype._circlesCollide=function(e,t,n,r,i,o){var a=r-e,s=i-t,u=n+o;return u*u>a*a+s*s},We.prototype._circleAndRectCollide=function(e,t,n,r,i,o,a){var s=(o-r)/2,u=Math.abs(e-(r+s));if(u>s+n)return!1;var l=(a-i)/2,c=Math.abs(t-(i+l));if(c>l+n)return!1;if(u<=s||c<=l)return!0;var p=u-s,h=c-l;return p*p+h*h<=n*n};var Ge=e.properties.layout;function Ze(t,n,r,i,o){var a=e.identity(new Float32Array(16));return n?(e.identity(a),e.scale(a,a,[1/o,1/o,1]),r||e.rotateZ(a,a,i.angle)):(e.scale(a,a,[i.width/2,-i.height/2,1]),e.translate(a,a,[1,-1,0]),e.multiply(a,a,t)),a}function He(t,n,r,i,o){var a=e.identity(new Float32Array(16));return n?(e.multiply(a,a,t),e.scale(a,a,[o,o,1]),r||e.rotateZ(a,a,-i.angle)):(e.scale(a,a,[1,-1,1]),e.translate(a,a,[-1,-1,0]),e.scale(a,a,[2/i.width,2/i.height,1])),a}function Ke(t,n){var r=[t.x,t.y,0,1];it(r,r,n);var i=r[3];return{point:new e.Point(r[0]/i,r[1]/i),signedDistanceFromCamera:i}}function Ye(e,t){var n=e[0]/e[3],r=e[1]/e[3];return n>=-t[0]&&n<=t[0]&&r>=-t[1]&&r<=t[1]}function Xe(t,n,r,i,o,a,s,u){var l=i?t.textSizeData:t.iconSizeData,c=e.evaluateSizeForZoom(l,r.transform.zoom,Ge.properties[i?"text-size":"icon-size"]),p=[256/r.width*2+1,256/r.height*2+1],h=i?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;h.clear();for(var f=t.lineVertexArray,d=i?t.text.placedSymbolArray:t.icon.placedSymbolArray,m=r.transform.width/r.transform.height,_=!1,y=0;y<d.length;y++){var v=d.get(y);if(v.hidden||v.writingMode===e.WritingMode.vertical&&!_)rt(v.numGlyphs,h);else{_=!1;var g=[v.anchorX,v.anchorY,0,1];if(e.transformMat4(g,g,n),Ye(g,p)){var b=.5+g[3]/r.transform.cameraToCenterDistance*.5,x=e.evaluateSizeForFeature(l,c,v),w=s?x*b:x/b,E=new e.Point(v.anchorX,v.anchorY),T=Ke(E,o).point,k={},C=Qe(v,w,!1,u,n,o,a,t.glyphOffsetArray,f,h,T,E,k,m);_=C.useVertical,(C.notEnoughRoom||_||C.needsFlipping&&Qe(v,w,!0,u,n,o,a,t.glyphOffsetArray,f,h,T,E,k,m).notEnoughRoom)&&rt(v.numGlyphs,h)}else rt(v.numGlyphs,h)}}i?t.text.dynamicLayoutVertexBuffer.updateData(h):t.icon.dynamicLayoutVertexBuffer.updateData(h)}function $e(e,t,n,r,i,o,a,s,u,l,c,p){var h=s.glyphStartIndex+s.numGlyphs,f=s.lineStartIndex,d=s.lineStartIndex+s.lineLength,m=t.getoffsetX(s.glyphStartIndex),_=t.getoffsetX(h-1),y=tt(e*m,n,r,i,o,a,s.segment,f,d,u,l,c,p);if(!y)return null;var v=tt(e*_,n,r,i,o,a,s.segment,f,d,u,l,c,p);return v?{first:y,last:v}:null}function Je(t,n,r,i){return t===e.WritingMode.horizontal&&Math.abs(r.y-n.y)>Math.abs(r.x-n.x)*i?{useVertical:!0}:(t===e.WritingMode.vertical?n.y<r.y:n.x>r.x)?{needsFlipping:!0}:null}function Qe(t,n,r,i,o,a,s,u,l,c,p,h,f,d){var m,_=n/24,y=t.lineOffsetX*n,v=t.lineOffsetY*n;if(t.numGlyphs>1){var g=t.glyphStartIndex+t.numGlyphs,b=t.lineStartIndex,x=t.lineStartIndex+t.lineLength,w=$e(_,u,y,v,r,p,h,t,l,a,f,!1);if(!w)return{notEnoughRoom:!0};var E=Ke(w.first.point,s).point,T=Ke(w.last.point,s).point;if(i&&!r){var k=Je(t.writingMode,E,T,d);if(k)return k}m=[w.first];for(var C=t.glyphStartIndex+1;C<g-1;C++)m.push(tt(_*u.getoffsetX(C),y,v,r,p,h,t.segment,b,x,l,a,f,!1));m.push(w.last)}else{if(i&&!r){var M=Ke(h,o).point,P=t.lineStartIndex+t.segment+1,A=new e.Point(l.getx(P),l.gety(P)),S=Ke(A,o),O=S.signedDistanceFromCamera>0?S.point:et(h,A,M,1,o),I=Je(t.writingMode,M,O,d);if(I)return I}var R=tt(_*u.getoffsetX(t.glyphStartIndex),y,v,r,p,h,t.segment,t.lineStartIndex,t.lineStartIndex+t.lineLength,l,a,f,!1);if(!R)return{notEnoughRoom:!0};m=[R]}for(var j=0,L=m;j<L.length;j+=1){var z=L[j];e.addDynamicAttributes(c,z.point,z.angle)}return{}}function et(e,t,n,r,i){var o=Ke(e.add(e.sub(t)._unit()),i).point,a=n.sub(o);return n.add(a._mult(r/a.mag()))}function tt(t,n,r,i,o,a,s,u,l,c,p,h,f){var d=i?t-n:t+n,m=d>0?1:-1,_=0;i&&(m*=-1,_=Math.PI),m<0&&(_+=Math.PI);for(var y=m>0?u+s:u+s+1,v=y,g=o,b=o,x=0,w=0,E=Math.abs(d);x+w<=E;){if((y+=m)<u||y>=l)return null;if(b=g,void 0===(g=h[y])){var T=new e.Point(c.getx(y),c.gety(y)),k=Ke(T,p);if(k.signedDistanceFromCamera>0)g=h[y]=k.point;else{var C=y-m;g=et(0===x?a:new e.Point(c.getx(C),c.gety(C)),T,b,E-x+1,p)}}x+=w,w=b.dist(g)}var M=(E-x)/w,P=g.sub(b),A=P.mult(M)._add(b);return A._add(P._unit()._perp()._mult(r*m)),{point:A,angle:_+Math.atan2(g.y-b.y,g.x-b.x),tileDistance:f?{prevTileDistance:y-m===v?0:c.gettileUnitDistanceFromAnchor(y-m),lastSegmentViewportDistance:E-x}:null}}var nt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function rt(e,t){for(var n=0;n<e;n++){var r=t.length;t.resize(r+4),t.float32.set(nt,3*r)}}function it(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e[3]=n[3]*r+n[7]*i+n[15],e}var ot=function(e,t,n){void 0===t&&(t=new We(e.width+200,e.height+200,25)),void 0===n&&(n=new We(e.width+200,e.height+200,25)),this.transform=e,this.grid=t,this.ignoredGrid=n,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+100,this.screenBottomBoundary=e.height+100,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200};function at(e,t,n){e[t+4]=n?1:0}function st(t,n,r){return n*(e.EXTENT/(t.tileSize*Math.pow(2,r-t.tileID.overscaledZ)))}ot.prototype.placeCollisionBox=function(e,t,n,r,i){var o=this.projectAndGetPerspectiveRatio(r,e.anchorPointX,e.anchorPointY),a=n*o.perspectiveRatio,s=e.x1*a+o.point.x,u=e.y1*a+o.point.y,l=e.x2*a+o.point.x,c=e.y2*a+o.point.y;return!this.isInsideGrid(s,u,l,c)||!t&&this.grid.hitTest(s,u,l,c,i)?{box:[],offscreen:!1}:{box:[s,u,l,c],offscreen:this.isOffscreen(s,u,l,c)}},ot.prototype.approximateTileDistance=function(e,t,n,r,i){var o=i?1:r/this.pitchfactor,a=e.lastSegmentViewportDistance*n;return e.prevTileDistance+a+(o-1)*a*Math.abs(Math.sin(t))},ot.prototype.placeCollisionCircles=function(t,n,r,i,o,a,s,u,l,c,p,h,f){var d=[],m=this.projectAnchor(l,o.anchorX,o.anchorY),_=u/24,y=o.lineOffsetX*u,v=o.lineOffsetY*u,g=new e.Point(o.anchorX,o.anchorY),b=$e(_,s,y,v,!1,Ke(g,c).point,g,o,a,c,{},!0),x=!1,w=!1,E=!0,T=m.perspectiveRatio*i,k=1/(i*r),C=0,M=0;b&&(C=this.approximateTileDistance(b.first.tileDistance,b.first.angle,k,m.cameraDistance,h),M=this.approximateTileDistance(b.last.tileDistance,b.last.angle,k,m.cameraDistance,h));for(var P=0;P<t.length;P+=5){var A=t[P],S=t[P+1],O=t[P+2],I=t[P+3];if(!b||I<-C||I>M)at(t,P,!1);else{var R=this.projectPoint(l,A,S),j=O*T;if(d.length>0){var L=R.x-d[d.length-4],z=R.y-d[d.length-3];if(j*j*2>L*L+z*z&&P+8<t.length){var D=t[P+8];if(D>-C&&D<M){at(t,P,!1);continue}}}var B=P/5;d.push(R.x,R.y,j,B),at(t,P,!0);var N=R.x-j,q=R.y-j,F=R.x+j,U=R.y+j;if(E=E&&this.isOffscreen(N,q,F,U),w=w||this.isInsideGrid(N,q,F,U),!n&&this.grid.hitTestCircle(R.x,R.y,j,f)){if(!p)return{circles:[],offscreen:!1};x=!0}}}return{circles:x||!w?[]:d,offscreen:E}},ot.prototype.queryRenderedSymbols=function(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var n=[],r=1/0,i=1/0,o=-1/0,a=-1/0,s=0,u=t;s<u.length;s+=1){var l=u[s],c=new e.Point(l.x+100,l.y+100);r=Math.min(r,c.x),i=Math.min(i,c.y),o=Math.max(o,c.x),a=Math.max(a,c.y),n.push(c)}for(var p={},h={},f=0,d=this.grid.query(r,i,o,a).concat(this.ignoredGrid.query(r,i,o,a));f<d.length;f+=1){var m=d[f],_=m.key;if(void 0===p[_.bucketInstanceId]&&(p[_.bucketInstanceId]={}),!p[_.bucketInstanceId][_.featureIndex]){var y=[new e.Point(m.x1,m.y1),new e.Point(m.x2,m.y1),new e.Point(m.x2,m.y2),new e.Point(m.x1,m.y2)];e.polygonIntersectsPolygon(n,y)&&(p[_.bucketInstanceId][_.featureIndex]=!0,void 0===h[_.bucketInstanceId]&&(h[_.bucketInstanceId]=[]),h[_.bucketInstanceId].push(_.featureIndex))}}return h},ot.prototype.insertCollisionBox=function(e,t,n,r,i){var o={bucketInstanceId:n,featureIndex:r,collisionGroupID:i};(t?this.ignoredGrid:this.grid).insert(o,e[0],e[1],e[2],e[3])},ot.prototype.insertCollisionCircles=function(e,t,n,r,i){for(var o=t?this.ignoredGrid:this.grid,a={bucketInstanceId:n,featureIndex:r,collisionGroupID:i},s=0;s<e.length;s+=4)o.insertCircle(a,e[s],e[s+1],e[s+2])},ot.prototype.projectAnchor=function(e,t,n){var r=[t,n,0,1];return it(r,r,e),{perspectiveRatio:.5+this.transform.cameraToCenterDistance/r[3]*.5,cameraDistance:r[3]}},ot.prototype.projectPoint=function(t,n,r){var i=[n,r,0,1];return it(i,i,t),new e.Point((i[0]/i[3]+1)/2*this.transform.width+100,(-i[1]/i[3]+1)/2*this.transform.height+100)},ot.prototype.projectAndGetPerspectiveRatio=function(t,n,r){var i=[n,r,0,1];return it(i,i,t),{point:new e.Point((i[0]/i[3]+1)/2*this.transform.width+100,(-i[1]/i[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/i[3]*.5}},ot.prototype.isOffscreen=function(e,t,n,r){return n<100||e>=this.screenRightBoundary||r<100||t>this.screenBottomBoundary},ot.prototype.isInsideGrid=function(e,t,n,r){return n>=0&&e<this.gridRightBoundary&&r>=0&&t<this.gridBottomBoundary};var ut=function(e,t,n,r){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?t:-t))):r&&n?1:0,this.placed=n};ut.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var lt=function(e,t,n,r,i){this.text=new ut(e?e.text:null,t,n,i),this.icon=new ut(e?e.icon:null,t,r,i)};lt.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var ct=function(e,t,n){this.text=e,this.icon=t,this.skipFade=n},pt=function(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}};pt.prototype.get=function(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){var t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:function(e){return e.collisionGroupID===t}}}return this.collisionGroups[e]};var ht=function(e,t,n){this.transform=e.clone(),this.collisionIndex=new ot(this.transform),this.placements={},this.opacities={},this.stale=!1,this.fadeDuration=t,this.retainedQueryData={},this.collisionGroups=new pt(n)};function ft(e,t,n){e.emplaceBack(t?1:0,n?1:0),e.emplaceBack(t?1:0,n?1:0),e.emplaceBack(t?1:0,n?1:0),e.emplaceBack(t?1:0,n?1:0)}ht.prototype.placeLayerTile=function(t,n,r,i){var o=n.getBucket(t),a=n.latestFeatureIndex;if(o&&a&&t.id===o.layerIds[0]){var s=n.collisionBoxArray,u=o.layers[0].layout,l=Math.pow(2,this.transform.zoom-n.tileID.overscaledZ),c=n.tileSize/e.EXTENT,p=this.transform.calculatePosMatrix(n.tileID.toUnwrapped()),h=Ze(p,"map"===u.get("text-pitch-alignment"),"map"===u.get("text-rotation-alignment"),this.transform,st(n,1,this.transform.zoom)),f=Ze(p,"map"===u.get("icon-pitch-alignment"),"map"===u.get("icon-rotation-alignment"),this.transform,st(n,1,this.transform.zoom));this.retainedQueryData[o.bucketInstanceId]=new function(e,t,n,r,i){this.bucketInstanceId=e,this.featureIndex=t,this.sourceLayerIndex=n,this.bucketIndex=r,this.tileID=i}(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,n.tileID),this.placeLayerBucket(o,p,h,f,l,c,r,n.holdingForFade(),i,s)}},ht.prototype.placeLayerBucket=function(t,n,r,i,o,a,s,u,l,c){var p=t.layers[0].layout,h=e.evaluateSizeForZoom(t.textSizeData,this.transform.zoom,e.properties.layout.properties["text-size"]),f=p.get("text-optional"),d=p.get("icon-optional"),m=p.get("text-allow-overlap"),_=p.get("icon-allow-overlap"),y=m&&(_||!t.hasIconData()||d),v=_&&(m||!t.hasTextData()||f),g=this.collisionGroups.get(t.sourceID);!t.collisionArrays&&c&&t.deserializeCollisionBoxes(c);for(var b=0;b<t.symbolInstances.length;b++){var x=t.symbolInstances.get(b);if(!l[x.crossTileID]){if(u){this.placements[x.crossTileID]=new ct(!1,!1,!1);continue}var w=!1,E=!1,T=!0,k=null,C=null,M=null,P=0,A=0,S=t.collisionArrays[b];S.textFeatureIndex&&(P=S.textFeatureIndex),S.textBox&&(w=(k=this.collisionIndex.placeCollisionBox(S.textBox,p.get("text-allow-overlap"),a,n,g.predicate)).box.length>0,T=T&&k.offscreen);var O=S.textCircles;if(O){var I=t.text.placedSymbolArray.get(x.horizontalPlacedTextSymbolIndex),R=e.evaluateSizeForFeature(t.textSizeData,h,I);C=this.collisionIndex.placeCollisionCircles(O,p.get("text-allow-overlap"),o,a,I,t.lineVertexArray,t.glyphOffsetArray,R,n,r,s,"map"===p.get("text-pitch-alignment"),g.predicate),w=p.get("text-allow-overlap")||C.circles.length>0,T=T&&C.offscreen}S.iconFeatureIndex&&(A=S.iconFeatureIndex),S.iconBox&&(E=(M=this.collisionIndex.placeCollisionBox(S.iconBox,p.get("icon-allow-overlap"),a,n,g.predicate)).box.length>0,T=T&&M.offscreen);var j=f||0===x.numGlyphVertices&&0===x.numVerticalGlyphVertices,L=d||0===x.numIconVertices;j||L?L?j||(E=E&&w):w=E&&w:E=w=E&&w,w&&k&&this.collisionIndex.insertCollisionBox(k.box,p.get("text-ignore-placement"),t.bucketInstanceId,P,g.ID),E&&M&&this.collisionIndex.insertCollisionBox(M.box,p.get("icon-ignore-placement"),t.bucketInstanceId,A,g.ID),w&&C&&this.collisionIndex.insertCollisionCircles(C.circles,p.get("text-ignore-placement"),t.bucketInstanceId,P,g.ID),this.placements[x.crossTileID]=new ct(w||y,E||v,T||t.justReloaded),l[x.crossTileID]=!0}}t.justReloaded=!1},ht.prototype.commit=function(e,t){this.commitTime=t;var n=!1,r=e&&0!==this.fadeDuration?(this.commitTime-e.commitTime)/this.fadeDuration:1,i=e?e.opacities:{};for(var o in this.placements){var a=this.placements[o],s=i[o];s?(this.opacities[o]=new lt(s,r,a.text,a.icon),n=n||a.text!==s.text.placed||a.icon!==s.icon.placed):(this.opacities[o]=new lt(null,r,a.text,a.icon,a.skipFade),n=n||a.text||a.icon)}for(var u in i){var l=i[u];if(!this.opacities[u]){var c=new lt(l,r,!1,!1);c.isHidden()||(this.opacities[u]=c,n=n||l.text.placed||l.icon.placed)}}n?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)},ht.prototype.updateLayerOpacities=function(e,t){for(var n={},r=0,i=t;r<i.length;r+=1){var o=i[r],a=o.getBucket(e);a&&o.latestFeatureIndex&&e.id===a.layerIds[0]&&this.updateBucketOpacities(a,n,o.collisionBoxArray)}},ht.prototype.updateBucketOpacities=function(e,t,n){e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasCollisionBoxData()&&e.collisionBox.collisionVertexArray.clear(),e.hasCollisionCircleData()&&e.collisionCircle.collisionVertexArray.clear();var r=e.layers[0].layout,i=new lt(null,0,!1,!1,!0),o=r.get("text-allow-overlap"),a=r.get("icon-allow-overlap"),s=new lt(null,0,o&&(a||!e.hasIconData()||r.get("icon-optional")),a&&(o||!e.hasTextData()||r.get("text-optional")),!0);!e.collisionArrays&&n&&(e.hasCollisionBoxData()||e.hasCollisionCircleData())&&e.deserializeCollisionBoxes(n);for(var u=0;u<e.symbolInstances.length;u++){var l=e.symbolInstances.get(u),c=t[l.crossTileID],p=this.opacities[l.crossTileID];c?p=i:p||(p=s,this.opacities[l.crossTileID]=p),t[l.crossTileID]=!0;var h=l.numGlyphVertices>0||l.numVerticalGlyphVertices>0,f=l.numIconVertices>0;if(h){for(var d=xt(p.text),m=(l.numGlyphVertices+l.numVerticalGlyphVertices)/4,_=0;_<m;_++)e.text.opacityVertexArray.emplaceBack(d);e.text.placedSymbolArray.get(l.horizontalPlacedTextSymbolIndex).hidden=p.text.isHidden(),l.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(l.verticalPlacedTextSymbolIndex).hidden=p.text.isHidden())}if(f){for(var y=xt(p.icon),v=0;v<l.numIconVertices/4;v++)e.icon.opacityVertexArray.emplaceBack(y);e.icon.placedSymbolArray.get(u).hidden=p.icon.isHidden()}if(e.hasCollisionBoxData()||e.hasCollisionCircleData()){var g=e.collisionArrays[u];if(g){g.textBox&&ft(e.collisionBox.collisionVertexArray,p.text.placed,!1),g.iconBox&&ft(e.collisionBox.collisionVertexArray,p.icon.placed,!1);var b=g.textCircles;if(b&&e.hasCollisionCircleData())for(var x=0;x<b.length;x+=5){var w=c||0===b[x+4];ft(e.collisionCircle.collisionVertexArray,p.text.placed,w)}}}}e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasCollisionBoxData()&&e.collisionBox.collisionVertexBuffer&&e.collisionBox.collisionVertexBuffer.updateData(e.collisionBox.collisionVertexArray),e.hasCollisionCircleData()&&e.collisionCircle.collisionVertexBuffer&&e.collisionCircle.collisionVertexBuffer.updateData(e.collisionCircle.collisionVertexArray)},ht.prototype.symbolFadeChange=function(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration},ht.prototype.hasTransitions=function(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration},ht.prototype.stillRecent=function(e){return"undefined"!==this.commitTime&&this.commitTime+this.fadeDuration>e},ht.prototype.setStale=function(){this.stale=!0};var dt=Math.pow(2,25),mt=Math.pow(2,24),_t=Math.pow(2,17),yt=Math.pow(2,16),vt=Math.pow(2,9),gt=Math.pow(2,8),bt=Math.pow(2,1);function xt(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;var t=e.placed?1:0,n=Math.floor(127*e.opacity);return n*dt+t*mt+n*_t+t*yt+n*vt+t*gt+n*bt+t}var wt=function(){this._currentTileIndex=0,this._seenCrossTileIDs={}};wt.prototype.continuePlacement=function(e,t,n,r,i){for(;this._currentTileIndex<e.length;){var o=e[this._currentTileIndex];if(t.placeLayerTile(r,o,n,this._seenCrossTileIDs),this._currentTileIndex++,i())return!0}};var Et=function(e,t,n,r,i,o){this.placement=new ht(e,i,o),this._currentPlacementIndex=t.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=r,this._done=!1};Et.prototype.isDone=function(){return this._done},Et.prototype.continuePlacement=function(t,n,r){for(var i=this,o=e.browser.now(),a=function(){var t=e.browser.now()-o;return!i._forceFullPlacement&&t>2};this._currentPlacementIndex>=0;){var s=n[t[i._currentPlacementIndex]],u=i.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=u)&&(!s.maxzoom||s.maxzoom>u)){if(i._inProgressLayer||(i._inProgressLayer=new wt),i._inProgressLayer.continuePlacement(r[s.source],i.placement,i._showCollisionBoxes,s,a))return;delete i._inProgressLayer}i._currentPlacementIndex--}this._done=!0},Et.prototype.commit=function(e,t){return this.placement.commit(e,t),this.placement};var Tt=512/e.EXTENT/2,kt=function(e,t,n){this.tileID=e,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(var r=0;r<t.length;r++){var i=t.get(r),o=i.key;this.indexedSymbolInstances[o]||(this.indexedSymbolInstances[o]=[]),this.indexedSymbolInstances[o].push({crossTileID:i.crossTileID,coord:this.getScaledCoordinates(i,e)})}};kt.prototype.getScaledCoordinates=function(t,n){var r=n.canonical.z-this.tileID.canonical.z,i=Tt/Math.pow(2,r);return{x:Math.floor((n.canonical.x*e.EXTENT+t.anchorX)*i),y:Math.floor((n.canonical.y*e.EXTENT+t.anchorY)*i)}},kt.prototype.findMatches=function(e,t,n){for(var r=this.tileID.canonical.z<t.canonical.z?1:Math.pow(2,this.tileID.canonical.z-t.canonical.z),i=0;i<e.length;i++){var o=e.get(i);if(!o.crossTileID){var a=this.indexedSymbolInstances[o.key];if(a)for(var s=this.getScaledCoordinates(o,t),u=0,l=a;u<l.length;u+=1){var c=l[u];if(Math.abs(c.coord.x-s.x)<=r&&Math.abs(c.coord.y-s.y)<=r&&!n[c.crossTileID]){n[c.crossTileID]=!0,o.crossTileID=c.crossTileID;break}}}}};var Ct=function(){this.maxCrossTileID=0};Ct.prototype.generate=function(){return++this.maxCrossTileID};var Mt=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Mt.prototype.handleWrapJump=function(e){var t=Math.round((e-this.lng)/360);if(0!==t)for(var n in this.indexes){var r=this.indexes[n],i={};for(var o in r){var a=r[o];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+t),i[a.tileID.key]=a}this.indexes[n]=i}this.lng=e},Mt.prototype.addBucket=function(e,t,n){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(var r=0;r<t.symbolInstances.length;r++)t.symbolInstances.get(r).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});var i=this.usedCrossTileIDs[e.overscaledZ];for(var o in this.indexes){var a=this.indexes[o];if(Number(o)>e.overscaledZ)for(var s in a){var u=a[s];u.tileID.isChildOf(e)&&u.findMatches(t.symbolInstances,e,i)}else{var l=a[e.scaledTo(Number(o)).key];l&&l.findMatches(t.symbolInstances,e,i)}}for(var c=0;c<t.symbolInstances.length;c++){var p=t.symbolInstances.get(c);p.crossTileID||(p.crossTileID=n.generate(),i[p.crossTileID]=!0)}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new kt(e,t.symbolInstances,t.bucketInstanceId),!0},Mt.prototype.removeBucketCrossTileIDs=function(e,t){for(var n in t.indexedSymbolInstances)for(var r=0,i=t.indexedSymbolInstances[n];r<i.length;r+=1){var o=i[r];delete this.usedCrossTileIDs[e][o.crossTileID]}},Mt.prototype.removeStaleBuckets=function(e){var t=!1;for(var n in this.indexes){var r=this.indexes[n];for(var i in r)e[r[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,r[i]),delete r[i],t=!0)}return t};var Pt=function(){this.layerIndexes={},this.crossTileIDs=new Ct,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Pt.prototype.addLayer=function(e,t,n){var r=this.layerIndexes[e.id];void 0===r&&(r=this.layerIndexes[e.id]=new Mt);var i=!1,o={};r.handleWrapJump(n);for(var a=0,s=t;a<s.length;a+=1){var u=s[a],l=u.getBucket(e);l&&e.id===l.layerIds[0]&&(l.bucketInstanceId||(l.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(u.tileID,l,this.crossTileIDs)&&(i=!0),o[l.bucketInstanceId]=!0)}return r.removeStaleBuckets(o)&&(i=!0),i},Pt.prototype.pruneUnusedLayers=function(e){var t={};for(var n in e.forEach(function(e){t[e]=!0}),this.layerIndexes)t[n]||delete this.layerIndexes[n]};var At=function(t,n){return e.emitValidationErrors(t,n&&n.filter(function(e){return"source.canvas"!==e.identifier}))},St=e.pick(ze,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Ot=e.pick(ze,["setCenter","setZoom","setBearing","setPitch"]),It=function(t){function n(r,i){var o=this;void 0===i&&(i={}),t.call(this),this.map=r,this.dispatcher=new w((Ie||(Ie=new Oe),Ie),this),this.imageManager=new p,this.glyphManager=new y(r._transformRequest,i.localIdeographFontFamily),this.lineAtlas=new x(256,512),this.crossTileSymbolIndex=new Pt,this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new e.ZoomHistory,this._loaded=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());var a=this;this._rtlTextPluginCallback=n.registerForPluginAvailability(function(e){for(var t in a.dispatcher.broadcast("loadRTLTextPlugin",e.pluginURL,e.completionCallback),a.sourceCaches)a.sourceCaches[t].reload()}),this.on("data",function(e){if("source"===e.dataType&&"metadata"===e.sourceDataType){var t=o.sourceCaches[e.sourceId];if(t){var n=t.getSource();if(n&&n.vectorLayerIds)for(var r in o._layers){var i=o._layers[r];i.source===n.id&&o._validateLayer(i)}}}})}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.loadURL=function(t,n){var r=this;void 0===n&&(n={}),this.fire(new e.Event("dataloading",{dataType:"style"}));var i="boolean"==typeof n.validate?n.validate:!e.isMapboxURL(t);t=e.normalizeStyleURL(t,n.accessToken);var o=this.map._transformRequest(t,e.ResourceType.Style);this._request=e.getJSON(o,function(t,n){r._request=null,t?r.fire(new e.ErrorEvent(t)):n&&r._load(n,i)})},n.prototype.loadJSON=function(t,n){var r=this;void 0===n&&(n={}),this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.browser.frame(function(){r._request=null,r._load(t,!1!==n.validate)})},n.prototype._load=function(t,n){var r=this;if(!n||!At(this,e.validateStyle(t))){for(var i in this._loaded=!0,this.stylesheet=t,t.sources)r.addSource(i,t.sources[i],{validate:!1});t.sprite?this._spriteRequest=function(t,n,r){var i,o,a,s=e.browser.devicePixelRatio>1?"@2x":"",u=e.getJSON(n(e.normalizeSpriteURL(t,s,".json"),e.ResourceType.SpriteJSON),function(e,t){u=null,a||(a=e,i=t,c())}),l=e.getImage(n(e.normalizeSpriteURL(t,s,".png"),e.ResourceType.SpriteImage),function(e,t){l=null,a||(a=e,o=t,c())});function c(){if(a)r(a);else if(i&&o){var t=e.browser.getImageData(o),n={};for(var s in i){var u=i[s],l=u.width,c=u.height,p=u.x,h=u.y,f=u.sdf,d=u.pixelRatio,m=new e.RGBAImage({width:l,height:c});e.RGBAImage.copy(t,m,{x:p,y:h},{x:0,y:0},{width:l,height:c}),n[s]={data:m,pixelRatio:d,sdf:f}}r(null,n)}}return{cancel:function(){u&&(u.cancel(),u=null),l&&(l.cancel(),l=null)}}}(t.sprite,this.map._transformRequest,function(t,n){if(r._spriteRequest=null,t)r.fire(new e.ErrorEvent(t));else if(n)for(var i in n)r.imageManager.addImage(i,n[i]);r.imageManager.setLoaded(!0),r.fire(new e.Event("data",{dataType:"style"}))}):this.imageManager.setLoaded(!0),this.glyphManager.setURL(t.glyphs);var o=Le(this.stylesheet.layers);this._order=o.map(function(e){return e.id}),this._layers={};for(var a=0,s=o;a<s.length;a+=1){var u=s[a];(u=e.createStyleLayer(u)).setEventedParent(r,{layer:{id:u.id}}),r._layers[u.id]=u}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new b(this.stylesheet.light),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}},n.prototype._validateLayer=function(t){var n=this.sourceCaches[t.source];if(n){var r=t.sourceLayer;if(r){var i=n.getSource();("geojson"===i.type||i.vectorLayerIds&&-1===i.vectorLayerIds.indexOf(r))&&this.fire(new e.ErrorEvent(new Error('Source layer "'+r+'" does not exist on source "'+i.id+'" as specified by style layer "'+t.id+'"')))}}},n.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var e in this.sourceCaches)if(!this.sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()},n.prototype._serializeLayers=function(e){for(var t=[],n=0,r=e;n<r.length;n+=1){var i=r[n],o=this._layers[i];"custom"!==o.type&&t.push(o.serialize())}return t},n.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var e in this.sourceCaches)if(this.sourceCaches[e].hasTransition())return!0;for(var t in this._layers)if(this._layers[t].hasTransition())return!0;return!1},n.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},n.prototype.update=function(t){if(this._loaded){var n=this._changed;if(this._changed){var r=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);for(var o in(r.length||i.length)&&this._updateWorkerLayers(r,i),this._updatedSources){var a=this._updatedSources[o];"reload"===a?this._reloadSource(o):"clear"===a&&this._clearSource(o)}for(var s in this._updatedPaintProps)this._layers[s].updateTransitions(t);this.light.updateTransitions(t),this._resetUpdates()}for(var u in this.sourceCaches)this.sourceCaches[u].used=!1;for(var l=0,c=this._order;l<c.length;l+=1){var p=c[l],h=this._layers[p];h.recalculate(t),!h.isHidden(t.zoom)&&h.source&&(this.sourceCaches[h.source].used=!0)}this.light.recalculate(t),this.z=t.zoom,n&&this.fire(new e.Event("data",{dataType:"style"}))}},n.prototype._updateWorkerLayers=function(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t})},n.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={}},n.prototype.setState=function(t){var n=this;if(this._checkLoaded(),At(this,e.validateStyle(t)))return!1;(t=e.clone(t)).layers=Le(t.layers);var r=function(t,n){if(!t)return[{command:ze.setStyle,args:[n]}];var r=[];try{if(!e.isEqual(t.version,n.version))return[{command:ze.setStyle,args:[n]}];e.isEqual(t.center,n.center)||r.push({command:ze.setCenter,args:[n.center]}),e.isEqual(t.zoom,n.zoom)||r.push({command:ze.setZoom,args:[n.zoom]}),e.isEqual(t.bearing,n.bearing)||r.push({command:ze.setBearing,args:[n.bearing]}),e.isEqual(t.pitch,n.pitch)||r.push({command:ze.setPitch,args:[n.pitch]}),e.isEqual(t.sprite,n.sprite)||r.push({command:ze.setSprite,args:[n.sprite]}),e.isEqual(t.glyphs,n.glyphs)||r.push({command:ze.setGlyphs,args:[n.glyphs]}),e.isEqual(t.transition,n.transition)||r.push({command:ze.setTransition,args:[n.transition]}),e.isEqual(t.light,n.light)||r.push({command:ze.setLight,args:[n.light]});var i={},o=[];!function(t,n,r,i){var o;for(o in n=n||{},t=t||{})t.hasOwnProperty(o)&&(n.hasOwnProperty(o)||Be(o,r,i));for(o in n)n.hasOwnProperty(o)&&(t.hasOwnProperty(o)?e.isEqual(t[o],n[o])||("geojson"===t[o].type&&"geojson"===n[o].type&&qe(t,n,o)?r.push({command:ze.setGeoJSONSourceData,args:[o,n[o].data]}):Ne(o,n,r,i)):De(o,n,r))}(t.sources,n.sources,o,i);var a=[];t.layers&&t.layers.forEach(function(e){i[e.source]?r.push({command:ze.removeLayer,args:[e.id]}):a.push(e)}),r=r.concat(o),function(t,n,r){n=n||[];var i,o,a,s,u,l,c,p=(t=t||[]).map(Ue),h=n.map(Ue),f=t.reduce(Ve,{}),d=n.reduce(Ve,{}),m=p.slice(),_=Object.create(null);for(i=0,o=0;i<p.length;i++)a=p[i],d.hasOwnProperty(a)?o++:(r.push({command:ze.removeLayer,args:[a]}),m.splice(m.indexOf(a,o),1));for(i=0,o=0;i<h.length;i++)a=h[h.length-1-i],m[m.length-1-i]!==a&&(f.hasOwnProperty(a)?(r.push({command:ze.removeLayer,args:[a]}),m.splice(m.lastIndexOf(a,m.length-o),1)):o++,l=m[m.length-i],r.push({command:ze.addLayer,args:[d[a],l]}),m.splice(m.length-i,0,a),_[a]=!0);for(i=0;i<h.length;i++)if(s=f[a=h[i]],u=d[a],!_[a]&&!e.isEqual(s,u))if(e.isEqual(s.source,u.source)&&e.isEqual(s["source-layer"],u["source-layer"])&&e.isEqual(s.type,u.type)){for(c in Fe(s.layout,u.layout,r,a,null,ze.setLayoutProperty),Fe(s.paint,u.paint,r,a,null,ze.setPaintProperty),e.isEqual(s.filter,u.filter)||r.push({command:ze.setFilter,args:[a,u.filter]}),e.isEqual(s.minzoom,u.minzoom)&&e.isEqual(s.maxzoom,u.maxzoom)||r.push({command:ze.setLayerZoomRange,args:[a,u.minzoom,u.maxzoom]}),s)s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?Fe(s[c],u[c],r,a,c.slice(6),ze.setPaintProperty):e.isEqual(s[c],u[c])||r.push({command:ze.setLayerProperty,args:[a,c,u[c]]}));for(c in u)u.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?Fe(s[c],u[c],r,a,c.slice(6),ze.setPaintProperty):e.isEqual(s[c],u[c])||r.push({command:ze.setLayerProperty,args:[a,c,u[c]]}))}else r.push({command:ze.removeLayer,args:[a]}),l=m[m.lastIndexOf(a)+1],r.push({command:ze.addLayer,args:[u,l]})}(a,n.layers,r)}catch(e){console.warn("Unable to compute style diff:",e),r=[{command:ze.setStyle,args:[n]}]}return r}(this.serialize(),t).filter(function(e){return!(e.command in Ot)});if(0===r.length)return!1;var i=r.filter(function(e){return!(e.command in St)});if(i.length>0)throw new Error("Unimplemented: "+i.map(function(e){return e.command}).join(", ")+".");return r.forEach(function(e){"setTransition"!==e.command&&n[e.command].apply(n,e.args)}),this.stylesheet=t,!0},n.prototype.addImage=function(t,n){if(this.getImage(t))return this.fire(new e.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(t,n),this.fire(new e.Event("data",{dataType:"style"}))},n.prototype.getImage=function(e){return this.imageManager.getImage(e)},n.prototype.removeImage=function(t){if(!this.getImage(t))return this.fire(new e.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(t),this.fire(new e.Event("data",{dataType:"style"}))},n.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},n.prototype.addSource=function(t,n,r){var i=this;if(this._checkLoaded(),void 0!==this.sourceCaches[t])throw new Error("There is already a source with this ID");if(!n.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(n).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(e.validateStyle.source,"sources."+t,n,null,r))){this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);var o=this.sourceCaches[t]=new Me(t,n,this.dispatcher);o.style=this,o.setEventedParent(this,function(){return{isSourceLoaded:i.loaded(),source:o.serialize(),sourceId:t}}),o.onAdd(this.map),this._changed=!0}},n.prototype.removeSource=function(t){if(this._checkLoaded(),void 0===this.sourceCaches[t])throw new Error("There is no source with this ID");for(var n in this._layers)if(this._layers[n].source===t)return this.fire(new e.ErrorEvent(new Error('Source "'+t+'" cannot be removed while layer "'+n+'" is using it.')));var r=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],r.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:t})),r.setEventedParent(null),r.clearTiles(),r.onRemove&&r.onRemove(this.map),this._changed=!0},n.prototype.setGeoJSONSourceData=function(e,t){this._checkLoaded(),this.sourceCaches[e].getSource().setData(t),this._changed=!0},n.prototype.getSource=function(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()},n.prototype.addLayer=function(t,n,r){this._checkLoaded();var i=t.id;if(this.getLayer(i))this.fire(new e.ErrorEvent(new Error('Layer with id "'+i+'" already exists on this map')));else{var o;if("custom"===t.type){if(At(this,e.validateCustomStyleLayer(t)))return;o=e.createStyleLayer(t)}else{if("object"==typeof t.source&&(this.addSource(i,t.source),t=e.clone(t),t=e.extend(t,{source:i})),this._validate(e.validateStyle.layer,"layers."+i,t,{arrayIndex:-1},r))return;o=e.createStyleLayer(t),this._validateLayer(o),o.setEventedParent(this,{layer:{id:i}})}var a=n?this._order.indexOf(n):this._order.length;if(n&&-1===a)this.fire(new e.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.')));else{if(this._order.splice(a,0,i),this._layerOrderChanged=!0,this._layers[i]=o,this._removedLayers[i]&&o.source&&"custom"!==o.type){var s=this._removedLayers[i];delete this._removedLayers[i],s.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map)}}},n.prototype.moveLayer=function(t,n){if(this._checkLoaded(),this._changed=!0,this._layers[t]){if(t!==n){var r=this._order.indexOf(t);this._order.splice(r,1);var i=n?this._order.indexOf(n):this._order.length;n&&-1===i?this.fire(new e.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.'))):(this._order.splice(i,0,t),this._layerOrderChanged=!0)}}else this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be moved.")))},n.prototype.removeLayer=function(t){this._checkLoaded();var n=this._layers[t];if(n){n.setEventedParent(null);var r=this._order.indexOf(t);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=n,delete this._layers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],n.onRemove&&n.onRemove(this.map)}else this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be removed.")))},n.prototype.getLayer=function(e){return this._layers[e]},n.prototype.setLayerZoomRange=function(t,n,r){this._checkLoaded();var i=this.getLayer(t);i?i.minzoom===n&&i.maxzoom===r||(null!=n&&(i.minzoom=n),null!=r&&(i.maxzoom=r),this._updateLayer(i)):this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot have zoom extent.")))},n.prototype.setFilter=function(t,n){this._checkLoaded();var r=this.getLayer(t);if(r){if(!e.isEqual(r.filter,n))return null==n?(r.filter=void 0,void this._updateLayer(r)):void(this._validate(e.validateStyle.filter,"layers."+r.id+".filter",n)||(r.filter=e.clone(n),this._updateLayer(r)))}else this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be filtered.")))},n.prototype.getFilter=function(t){return e.clone(this.getLayer(t).filter)},n.prototype.setLayoutProperty=function(t,n,r){this._checkLoaded();var i=this.getLayer(t);i?e.isEqual(i.getLayoutProperty(n),r)||(i.setLayoutProperty(n,r),this._updateLayer(i)):this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")))},n.prototype.getLayoutProperty=function(e,t){return this.getLayer(e).getLayoutProperty(t)},n.prototype.setPaintProperty=function(t,n,r){this._checkLoaded();var i=this.getLayer(t);i?e.isEqual(i.getPaintProperty(n),r)||(i.setPaintProperty(n,r)&&this._updateLayer(i),this._changed=!0,this._updatedPaintProps[t]=!0):this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")))},n.prototype.getPaintProperty=function(e,t){return this.getLayer(e).getPaintProperty(t)},n.prototype.setFeatureState=function(t,n){this._checkLoaded();var r=t.source,i=t.sourceLayer,o=this.sourceCaches[r],a=parseInt(t.id,10);void 0!==o?"vector"!==o.getSource().type||i?isNaN(a)||a<0?this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided and non-negative."))):o.setFeatureState(i,a,n):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types."))):this.fire(new e.ErrorEvent(new Error("The source '"+r+"' does not exist in the map's style.")))},n.prototype.getFeatureState=function(t){this._checkLoaded();var n=t.source,r=t.sourceLayer,i=this.sourceCaches[n],o=parseInt(t.id,10);if(void 0!==i)if("vector"!==i.getSource().type||r){if(!(isNaN(o)||o<0))return i.getFeatureState(r,o);this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided and non-negative.")))}else this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));else this.fire(new e.ErrorEvent(new Error("The source '"+n+"' does not exist in the map's style.")))},n.prototype.getTransition=function(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},n.prototype.serialize=function(){return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:e.mapObject(this.sourceCaches,function(e){return e.serialize()}),layers:this._serializeLayers(this._order)},function(e){return void 0!==e})},n.prototype._updateLayer=function(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._changed=!0},n.prototype._flattenRenderedFeatures=function(e){for(var t=[],n=this._order.length-1;n>=0;n--)for(var r=this._order[n],i=0,o=e;i<o.length;i+=1){var a=o[i][r];if(a)for(var s=0,u=a;s<u.length;s+=1){var l=u[s];t.push(l)}}return t},n.prototype.queryRenderedFeatures=function(t,n,r){n&&n.filter&&this._validate(e.validateStyle.filter,"queryRenderedFeatures.filter",n.filter);var i={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var o=0,a=n.layers;o<a.length;o+=1){var s=a[o],u=this._layers[s];if(!u)return this.fire(new e.ErrorEvent(new Error("The layer '"+s+"' does not exist in the map's style and cannot be queried for features."))),[];i[u.source]=!0}}var l=[],c=t.map(function(e){return r.pointCoordinate(e)});for(var p in this.sourceCaches)n.layers&&!i[p]||l.push(j(this.sourceCaches[p],this._layers,c,n,r));return this.placement&&l.push(function(e,t,n,r,i,o){for(var a={},s=i.queryRenderedSymbols(n),u=[],l=0,c=Object.keys(s).map(Number);l<c.length;l+=1){var p=c[l];u.push(o[p])}u.sort(L);for(var h=function(){var t=d[f],n=t.featureIndex.lookupSymbolFeatures(s[t.bucketInstanceId],t.bucketIndex,t.sourceLayerIndex,r.filter,r.layers,e);for(var i in n){var o=a[i]=a[i]||[],u=n[i];u.sort(function(e,n){var r=t.featureSortOrder;if(r){var i=r.indexOf(e.featureIndex);return r.indexOf(n.featureIndex)-i}return n.featureIndex-e.featureIndex});for(var l=0,c=u;l<c.length;l+=1){var p=c[l];o.push(p.feature)}}},f=0,d=u;f<d.length;f+=1)h();var m=function(n){a[n].forEach(function(r){var i=e[n],o=t[i.source].getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=o})};for(var _ in a)m(_);return a}(this._layers,this.sourceCaches,t,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenRenderedFeatures(l)},n.prototype.querySourceFeatures=function(t,n){n&&n.filter&&this._validate(e.validateStyle.filter,"querySourceFeatures.filter",n.filter);var r=this.sourceCaches[t];return r?function(e,t){for(var n=e.getRenderableIds().map(function(t){return e.getTileByID(t)}),r=[],i={},o=0;o<n.length;o++){var a=n[o],s=a.tileID.canonical.key;i[s]||(i[s]=!0,a.querySourceFeatures(r,t))}return r}(r,n):[]},n.prototype.addSourceType=function(e,t,r){return n.getSourceType(e)?r(new Error('A source type called "'+e+'" already exists.')):(n.setSourceType(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},r):r(null,null))},n.prototype.getLight=function(){return this.light.getLight()},n.prototype.setLight=function(t){this._checkLoaded();var n=this.light.getLight(),r=!1;for(var i in t)if(!e.isEqual(t[i],n[i])){r=!0;break}if(r){var o={now:e.browser.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t),this.light.updateTransitions(o)}},n.prototype._validate=function(t,n,r,i,o){return(!o||!1!==o.validate)&&At(this,t.call(e.validateStyle,e.extend({key:n,style:this.serialize(),value:r,styleSpec:e.styleSpec},i)))},n.prototype._remove=function(){for(var t in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginAvailable",this._rtlTextPluginCallback),this.sourceCaches)this.sourceCaches[t].clearTiles();this.dispatcher.remove()},n.prototype._clearSource=function(e){this.sourceCaches[e].clearTiles()},n.prototype._reloadSource=function(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()},n.prototype._updateSources=function(e){for(var t in this.sourceCaches)this.sourceCaches[t].update(e)},n.prototype._generateCollisionBoxes=function(){for(var e in this.sourceCaches)this._reloadSource(e)},n.prototype._updatePlacement=function(t,n,r,i){for(var o=!1,a=!1,s={},u=0,l=this._order;u<l.length;u+=1){var c=l[u],p=this._layers[c];if("symbol"===p.type){if(!s[p.source]){var h=this.sourceCaches[p.source];s[p.source]=h.getRenderableIds(!0).map(function(e){return h.getTileByID(e)}).sort(function(e,t){return t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)})}var f=this.crossTileSymbolIndex.addLayer(p,s[p.source],t.center.lng);o=o||f}}this.crossTileSymbolIndex.pruneUnusedLayers(this._order);var d=this._layerOrderChanged;if((d||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.browser.now()))&&(this.pauseablePlacement=new Et(t,this._order,d,n,r,i),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,s),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(this.placement,e.browser.now()),a=!0),o&&this.pauseablePlacement.placement.setStale()),a||o)for(var m=0,_=this._order;m<_.length;m+=1){var y=_[m],v=this._layers[y];"symbol"===v.type&&this.placement.updateLayerOpacities(v,s[v.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.browser.now())},n.prototype._releaseSymbolFadeTiles=function(){for(var e in this.sourceCaches)this.sourceCaches[e].releaseSymbolFadeTiles()},n.prototype.getImages=function(e,t,n){this.imageManager.getImages(t.icons,n)},n.prototype.getGlyphs=function(e,t,n){this.glyphManager.getGlyphs(t.stacks,n)},n}(e.Evented);It.getSourceType=function(e){return I[e]},It.setSourceType=function(e,t){I[e]=t},It.registerForPluginAvailability=e.registerForPluginAvailability;var Rt=e.createLayout([{name:"a_pos",type:"Int16",components:2}]),jt=sn("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),Lt=sn("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),zt=sn("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Dt=sn("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvarying vec3 v_data;void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvarying vec3 v_data;void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/DEVICE_PIXEL_RATIO/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Bt=sn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Nt=sn("#pragma mapbox: define highp float weight\nuniform highp float u_intensity;varying vec2 v_extrude;\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nuniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;const highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),qt=sn("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Ft=sn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=a_extrude*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Ut=sn("uniform float u_overscale_factor;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {float alpha=0.5;vec4 color=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {color=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {color*=.2;}float extrude_scale_length=length(v_extrude_scale);float extrude_length=length(v_extrude)*extrude_scale_length;float stroke_width=15.0*extrude_scale_length/u_overscale_factor;float radius=v_radius*extrude_scale_length;float distance_to_edge=abs(extrude_length-radius);float opacity_t=smoothstep(-stroke_width,0.0,-distance_to_edge);gl_FragColor=opacity_t*color;}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);highp float padding_factor=1.2;gl_Position.xy+=a_extrude*u_extrude_scale*padding_factor*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;v_radius=abs(a_extrude.y);v_extrude=a_extrude*padding_factor;v_extrude_scale=u_extrude_scale*u_camera_to_center_distance*collision_perspective_ratio;}"),Vt=sn("uniform highp vec4 u_color;void main() {gl_FragColor=u_color;}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Wt=sn("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),Gt=sn("#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvarying vec2 v_pos;void main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Zt=sn("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec4 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Ht=sn("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec4 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileZoomRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),Kt=sn("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);}"),Yt=sn("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec4 u_scale;uniform float u_vertical_gradient;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));}"),Xt=sn("uniform sampler2D u_image;uniform float u_opacity;varying vec2 v_pos;void main() {gl_FragColor=texture2D(u_image,v_pos)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),$t=sn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;return (data.r+data.g*256.0+data.b*256.0*256.0)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(a_texture_pos/8192.0)/2.0+0.25;}"),Jt=sn("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Qt=sn("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvarying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\n#define scale 0.015873016\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_gl_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nvec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),en=sn("#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nuniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;void main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define MAX_LINE_DISTANCE 32767.0\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\n#define scale 0.015873016\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_gl_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nvec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),tn=sn("uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec4 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileZoomRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x,1.0);float x_b=mod(v_linesofar/pattern_size_b.x,1.0);float y_a=0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_a.y+2.0)/2.0)/pattern_size_a.y);float y_b=0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_b.y+2.0)/2.0)/pattern_size_b.y);vec2 pos_a=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,vec2(x_a,y_a));vec2 pos_b=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,vec2(x_b,y_b));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_gl_units_to_pixels;uniform mediump float u_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);}"),nn=sn("uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_gl_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nvec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),rn=sn("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),on=sn("uniform sampler2D u_texture;\n#pragma mapbox: define lowp float opacity\nvarying vec2 v_tex;varying float v_fade_opacity;void main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;\n#pragma mapbox: define lowp float opacity\nuniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_gl_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;void main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size[0],a_size[1],u_size_t)/256.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size[0]/256.0;} else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {size=u_size;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_gl_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),an=sn("#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105/DEVICE_PIXEL_RATIO\nuniform bool u_is_halo;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nuniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;void main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nuniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_gl_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;void main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size[0],a_size[1],u_size_t)/256.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size[0]/256.0;} else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {size=u_size;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_gl_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=vec2(tex.x,tex.y);v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}");function sn(e,t){var n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r={};return{fragmentSource:e=e.replace(n,function(e,t,n,i,o){return r[o]=!0,"define"===t?"\n#ifndef HAS_UNIFORM_u_"+o+"\nvarying "+n+" "+i+" "+o+";\n#else\nuniform "+n+" "+i+" u_"+o+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+o+"\n    "+n+" "+i+" "+o+" = u_"+o+";\n#endif\n"}),vertexSource:t=t.replace(n,function(e,t,n,i,o){var a="float"===i?"vec2":"vec4",s=o.match(/color/)?"color":a;return r[o]?"define"===t?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float a_"+o+"_t;\nattribute "+n+" "+a+" a_"+o+";\nvarying "+n+" "+i+" "+o+";\n#else\nuniform "+n+" "+i+" u_"+o+";\n#endif\n":"vec4"===s?"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+o+" = a_"+o+";\n#else\n    "+n+" "+i+" "+o+" = u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+o+" = unpack_mix_"+s+"(a_"+o+", a_"+o+"_t);\n#else\n    "+n+" "+i+" "+o+" = u_"+o+";\n#endif\n":"define"===t?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float a_"+o+"_t;\nattribute "+n+" "+a+" a_"+o+";\n#else\nuniform "+n+" "+i+" u_"+o+";\n#endif\n":"vec4"===s?"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+n+" "+i+" "+o+" = a_"+o+";\n#else\n    "+n+" "+i+" "+o+" = u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+n+" "+i+" "+o+" = unpack_mix_"+s+"(a_"+o+", a_"+o+"_t);\n#else\n    "+n+" "+i+" "+o+" = u_"+o+";\n#endif\n"})}}var un=Object.freeze({prelude:jt,background:Lt,backgroundPattern:zt,circle:Dt,clippingMask:Bt,heatmap:Nt,heatmapTexture:qt,collisionBox:Ft,collisionCircle:Ut,debug:Vt,fill:Wt,fillOutline:Gt,fillOutlinePattern:Zt,fillPattern:Ht,fillExtrusion:Kt,fillExtrusionPattern:Yt,extrusionTexture:Xt,hillshadePrepare:$t,hillshade:Jt,line:Qt,lineGradient:en,linePattern:tn,lineSDF:nn,raster:rn,symbolIcon:on,symbolSDF:an}),ln=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};ln.prototype.bind=function(e,t,n,r,i,o,a,s){this.context=e;for(var u=this.boundPaintVertexBuffers.length!==r.length,l=0;!u&&l<r.length;l++)this.boundPaintVertexBuffers[l]!==r[l]&&(u=!0);var c=!this.vao||this.boundProgram!==t||this.boundLayoutVertexBuffer!==n||u||this.boundIndexBuffer!==i||this.boundVertexOffset!==o||this.boundDynamicVertexBuffer!==a||this.boundDynamicVertexBuffer2!==s;!e.extVertexArrayObject||c?this.freshBind(t,n,r,i,o,a,s):(e.bindVertexArrayOES.set(this.vao),a&&a.bind(),i&&i.dynamicDraw&&i.bind(),s&&s.bind())},ln.prototype.freshBind=function(e,t,n,r,i,o,a){var s,u=e.numAttributes,l=this.context,c=l.gl;if(l.extVertexArrayObject)this.vao&&this.destroy(),this.vao=l.extVertexArrayObject.createVertexArrayOES(),l.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a;else{s=l.currentNumAttributes||0;for(var p=u;p<s;p++)c.disableVertexAttribArray(p)}t.enableAttributes(c,e);for(var h=0,f=n;h<f.length;h+=1)f[h].enableAttributes(c,e);o&&o.enableAttributes(c,e),a&&a.enableAttributes(c,e),t.bind(),t.setVertexAttribPointers(c,e,i);for(var d=0,m=n;d<m.length;d+=1){var _=m[d];_.bind(),_.setVertexAttribPointers(c,e,i)}o&&(o.bind(),o.setVertexAttribPointers(c,e,i)),r&&r.bind(),a&&(a.bind(),a.setVertexAttribPointers(c,e,i)),l.currentNumAttributes=u},ln.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var cn=function(t,n,r,i,o){var a=t.gl;this.program=a.createProgram();var s=r.defines().concat("#define DEVICE_PIXEL_RATIO "+e.browser.devicePixelRatio.toFixed(1));o&&s.push("#define OVERDRAW_INSPECTOR;");var u=s.concat(jt.fragmentSource,n.fragmentSource).join("\n"),l=s.concat(jt.vertexSource,n.vertexSource).join("\n"),c=a.createShader(a.FRAGMENT_SHADER);a.shaderSource(c,u),a.compileShader(c),a.attachShader(this.program,c);var p=a.createShader(a.VERTEX_SHADER);a.shaderSource(p,l),a.compileShader(p),a.attachShader(this.program,p);for(var h=r.layoutAttributes||[],f=0;f<h.length;f++)a.bindAttribLocation(this.program,f,h[f].name);a.linkProgram(this.program),this.numAttributes=a.getProgramParameter(this.program,a.ACTIVE_ATTRIBUTES),this.attributes={};for(var d={},m=0;m<this.numAttributes;m++){var _=a.getActiveAttrib(this.program,m);_&&(this.attributes[_.name]=a.getAttribLocation(this.program,_.name))}for(var y=a.getProgramParameter(this.program,a.ACTIVE_UNIFORMS),v=0;v<y;v++){var g=a.getActiveUniform(this.program,v);g&&(d[g.name]=a.getUniformLocation(this.program,g.name))}this.fixedUniforms=i(t,d),this.binderUniforms=r.getUniforms(t,d)};function pn(t,n,r){var i=1/st(r,1,n.transform.tileZoom),o=Math.pow(2,r.tileID.overscaledZ),a=r.tileSize*Math.pow(2,n.transform.tileZoom)/o,s=a*(r.tileID.canonical.x+r.tileID.wrap*o),u=a*r.tileID.canonical.y;return{u_image:0,u_texsize:r.imageAtlasTexture.size,u_scale:[e.browser.devicePixelRatio,i,t.fromScale,t.toScale],u_fade:t.t,u_pixel_coord_upper:[s>>16,u>>16],u_pixel_coord_lower:[65535&s,65535&u]}}cn.prototype.draw=function(e,t,n,r,i,o,a,s,u,l,c,p,h,f,d,m){var _,y=e.gl;for(var v in e.program.set(this.program),e.setDepthMode(n),e.setStencilMode(r),e.setColorMode(i),e.setCullFace(o),this.fixedUniforms)this.fixedUniforms[v].set(a[v]);f&&f.setUniforms(e,this.binderUniforms,p,{zoom:h});for(var g=(_={},_[y.LINES]=2,_[y.TRIANGLES]=3,_[y.LINE_STRIP]=1,_)[t],b=0,x=c.get();b<x.length;b+=1){var w=x[b],E=w.vaos||(w.vaos={});(E[s]||(E[s]=new ln)).bind(e,this,u,f?f.getPaintVertexBuffers():[],l,w.vertexOffset,d,m),y.drawElements(t,w.primitiveLength*g,y.UNSIGNED_SHORT,w.primitiveOffset*g*2)}};var hn=function(t,n,r){var i=n.style.light,o=i.properties.get("position"),a=[o.x,o.y,o.z],s=e.create$2();"viewport"===i.properties.get("anchor")&&e.fromRotation(s,-n.transform.angle),e.transformMat3(a,a,s);var u=i.properties.get("color");return{u_matrix:t,u_lightpos:a,u_lightintensity:i.properties.get("intensity"),u_lightcolor:[u.r,u.g,u.b],u_vertical_gradient:+r}},fn=function(t,n,r,i,o,a){return e.extend(hn(t,n,r),pn(o,n,a),{u_height_factor:-Math.pow(2,i.overscaledZ)/a.tileSize/8})},dn=function(t,n,r){var i=e.create();e.ortho(i,0,t.width,t.height,0,0,1);var o=t.context.gl;return{u_matrix:i,u_world:[o.drawingBufferWidth,o.drawingBufferHeight],u_image:r,u_opacity:n}},mn=function(e){return{u_matrix:e}},_n=function(t,n,r,i){return e.extend(mn(t),pn(r,n,i))},yn=function(e,t){return{u_matrix:e,u_world:t}},vn=function(t,n,r,i,o){return e.extend(_n(t,n,r,i),{u_world:o})},gn=function(e,t,n,r){var i,o,a=e.transform;if("map"===r.paint.get("circle-pitch-alignment")){var s=st(n,1,a.zoom);i=!0,o=[s,s]}else i=!1,o=a.pixelsToGLUnits;return{u_camera_to_center_distance:a.cameraToCenterDistance,u_scale_with_map:+("map"===r.paint.get("circle-pitch-scale")),u_matrix:e.translatePosMatrix(t.posMatrix,n,r.paint.get("circle-translate"),r.paint.get("circle-translate-anchor")),u_pitch_with_map:+i,u_extrude_scale:o}},bn=function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_pixels_to_tile_units:new e.Uniform1f(t,n.u_pixels_to_tile_units),u_extrude_scale:new e.Uniform2f(t,n.u_extrude_scale),u_overscale_factor:new e.Uniform1f(t,n.u_overscale_factor)}},xn=function(e,t,n){var r=st(n,1,t.zoom),i=Math.pow(2,t.zoom-n.tileID.overscaledZ),o=n.tileID.overscaleFactor();return{u_matrix:e,u_camera_to_center_distance:t.cameraToCenterDistance,u_pixels_to_tile_units:r,u_extrude_scale:[t.pixelsToGLUnits[0]/(r*i),t.pixelsToGLUnits[1]/(r*i)],u_overscale_factor:o}},wn=function(e,t){return{u_matrix:e,u_color:t}},En=function(e){return{u_matrix:e}},Tn=function(e,t,n,r){return{u_matrix:e,u_extrude_scale:st(t,1,n),u_intensity:r}},kn=function(t,n,r){var i,o,a,s=r.paint.get("hillshade-shadow-color"),u=r.paint.get("hillshade-highlight-color"),l=r.paint.get("hillshade-accent-color"),c=r.paint.get("hillshade-illumination-direction")*(Math.PI/180);return"viewport"===r.paint.get("hillshade-illumination-anchor")&&(c-=t.transform.angle),{u_matrix:t.transform.calculatePosMatrix(n.tileID.toUnwrapped(),!0),u_image:0,u_latrange:(i=n.tileID,o=Math.pow(2,i.canonical.z),a=i.canonical.y,[new e.MercatorCoordinate(0,a/o).toLngLat().lat,new e.MercatorCoordinate(0,(a+1)/o).toLngLat().lat]),u_light:[r.paint.get("hillshade-exaggeration"),c],u_shadow:s,u_highlight:u,u_accent:l}},Cn=function(t,n){var r=t.dem.dim,i=e.create();return e.ortho(i,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(i,i,[0,-e.EXTENT,0]),{u_matrix:i,u_image:1,u_dimension:[2*r,2*r],u_zoom:t.tileID.overscaledZ,u_maxzoom:n}},Mn=function(e,t,n){var r=e.transform;return{u_matrix:In(e,t,n),u_ratio:1/st(t,1,r.zoom),u_gl_units_to_pixels:[1/r.pixelsToGLUnits[0],1/r.pixelsToGLUnits[1]]}},Pn=function(t,n,r){return e.extend(Mn(t,n,r),{u_image:0})},An=function(t,n,r,i){var o=t.transform,a=On(n,o);return{u_matrix:In(t,n,r),u_texsize:n.imageAtlasTexture.size,u_ratio:1/st(n,1,o.zoom),u_image:0,u_scale:[e.browser.devicePixelRatio,a,i.fromScale,i.toScale],u_fade:i.t,u_gl_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},Sn=function(t,n,r,i,o){var a=t.transform,s=t.lineAtlas,u=On(n,a),l="round"===r.layout.get("line-cap"),c=s.getDash(i.from,l),p=s.getDash(i.to,l),h=c.width*o.fromScale,f=p.width*o.toScale;return e.extend(Mn(t,n,r),{u_patternscale_a:[u/h,-c.height/2],u_patternscale_b:[u/f,-p.height/2],u_sdfgamma:s.width/(256*Math.min(h,f)*e.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:c.y,u_tex_y_b:p.y,u_mix:o.t})};function On(e,t){return 1/st(e,1,t.tileZoom)}function In(e,t,n){return e.translatePosMatrix(t.tileID.posMatrix,t,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}var Rn=function(e,t,n,r,i){return{u_matrix:e,u_tl_parent:t,u_scale_parent:n,u_buffer_scale:1,u_fade_t:r.mix,u_opacity:r.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(a=i.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(o=i.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:function(e){e*=Math.PI/180;var t=Math.sin(e),n=Math.cos(e);return[(2*n+1)/3,(-Math.sqrt(3)*t-n+1)/3,(Math.sqrt(3)*t-n+1)/3]}(i.paint.get("raster-hue-rotate"))};var o,a},jn=function(e,t,n,r,i,o,a,s,u,l){var c=i.transform;return{u_is_size_zoom_constant:+("constant"===e||"source"===e),u_is_size_feature_constant:+("constant"===e||"camera"===e),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:c.cameraToCenterDistance,u_pitch:c.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:c.width/c.height,u_fade_change:i.options.fadeDuration?i.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:a,u_gl_coord_matrix:s,u_is_text:+u,u_pitch_with_map:+r,u_texsize:l,u_texture:0}},Ln=function(t,n,r,i,o,a,s,u,l,c,p){var h=o.transform;return e.extend(jn(t,n,r,i,o,a,s,u,l,c),{u_gamma_scale:i?Math.cos(h._pitch)*h.cameraToCenterDistance:1,u_is_halo:+p})},zn=function(e,t,n){return{u_matrix:e,u_opacity:t,u_color:n}},Dn=function(t,n,r,i,o,a){return e.extend(function(e,t,n,r){var i=n.imageManager.getPattern(e.from),o=n.imageManager.getPattern(e.to),a=n.imageManager.getPixelSize(),s=a.width,u=a.height,l=Math.pow(2,r.tileID.overscaledZ),c=r.tileSize*Math.pow(2,n.transform.tileZoom)/l,p=c*(r.tileID.canonical.x+r.tileID.wrap*l),h=c*r.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:i.tl,u_pattern_br_a:i.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[s,u],u_mix:t.t,u_pattern_size_a:i.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:t.fromScale,u_scale_b:t.toScale,u_tile_units_to_pixels:1/st(r,1,n.transform.tileZoom),u_pixel_coord_upper:[p>>16,h>>16],u_pixel_coord_lower:[65535&p,65535&h]}}(i,a,r,o),{u_matrix:t,u_opacity:n})},Bn={fillExtrusion:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_lightpos:new e.Uniform3f(t,n.u_lightpos),u_lightintensity:new e.Uniform1f(t,n.u_lightintensity),u_lightcolor:new e.Uniform3f(t,n.u_lightcolor),u_vertical_gradient:new e.Uniform1f(t,n.u_vertical_gradient)}},fillExtrusionPattern:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_lightpos:new e.Uniform3f(t,n.u_lightpos),u_lightintensity:new e.Uniform1f(t,n.u_lightintensity),u_lightcolor:new e.Uniform3f(t,n.u_lightcolor),u_vertical_gradient:new e.Uniform1f(t,n.u_vertical_gradient),u_height_factor:new e.Uniform1f(t,n.u_height_factor),u_image:new e.Uniform1i(t,n.u_image),u_texsize:new e.Uniform2f(t,n.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,n.u_pixel_coord_lower),u_scale:new e.Uniform4f(t,n.u_scale),u_fade:new e.Uniform1f(t,n.u_fade)}},extrusionTexture:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_world:new e.Uniform2f(t,n.u_world),u_image:new e.Uniform1i(t,n.u_image),u_opacity:new e.Uniform1f(t,n.u_opacity)}},fill:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix)}},fillPattern:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_image:new e.Uniform1i(t,n.u_image),u_texsize:new e.Uniform2f(t,n.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,n.u_pixel_coord_lower),u_scale:new e.Uniform4f(t,n.u_scale),u_fade:new e.Uniform1f(t,n.u_fade)}},fillOutline:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_world:new e.Uniform2f(t,n.u_world)}},fillOutlinePattern:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_world:new e.Uniform2f(t,n.u_world),u_image:new e.Uniform1i(t,n.u_image),u_texsize:new e.Uniform2f(t,n.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,n.u_pixel_coord_lower),u_scale:new e.Uniform4f(t,n.u_scale),u_fade:new e.Uniform1f(t,n.u_fade)}},circle:function(t,n){return{u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_scale_with_map:new e.Uniform1i(t,n.u_scale_with_map),u_pitch_with_map:new e.Uniform1i(t,n.u_pitch_with_map),u_extrude_scale:new e.Uniform2f(t,n.u_extrude_scale),u_matrix:new e.UniformMatrix4f(t,n.u_matrix)}},collisionBox:bn,collisionCircle:bn,debug:function(t,n){return{u_color:new e.UniformColor(t,n.u_color),u_matrix:new e.UniformMatrix4f(t,n.u_matrix)}},clippingMask:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix)}},heatmap:function(t,n){return{u_extrude_scale:new e.Uniform1f(t,n.u_extrude_scale),u_intensity:new e.Uniform1f(t,n.u_intensity),u_matrix:new e.UniformMatrix4f(t,n.u_matrix)}},heatmapTexture:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_world:new e.Uniform2f(t,n.u_world),u_image:new e.Uniform1i(t,n.u_image),u_color_ramp:new e.Uniform1i(t,n.u_color_ramp),u_opacity:new e.Uniform1f(t,n.u_opacity)}},hillshade:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_image:new e.Uniform1i(t,n.u_image),u_latrange:new e.Uniform2f(t,n.u_latrange),u_light:new e.Uniform2f(t,n.u_light),u_shadow:new e.UniformColor(t,n.u_shadow),u_highlight:new e.UniformColor(t,n.u_highlight),u_accent:new e.UniformColor(t,n.u_accent)}},hillshadePrepare:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_image:new e.Uniform1i(t,n.u_image),u_dimension:new e.Uniform2f(t,n.u_dimension),u_zoom:new e.Uniform1f(t,n.u_zoom),u_maxzoom:new e.Uniform1f(t,n.u_maxzoom)}},line:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_ratio:new e.Uniform1f(t,n.u_ratio),u_gl_units_to_pixels:new e.Uniform2f(t,n.u_gl_units_to_pixels)}},lineGradient:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_ratio:new e.Uniform1f(t,n.u_ratio),u_gl_units_to_pixels:new e.Uniform2f(t,n.u_gl_units_to_pixels),u_image:new e.Uniform1i(t,n.u_image)}},linePattern:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_texsize:new e.Uniform2f(t,n.u_texsize),u_ratio:new e.Uniform1f(t,n.u_ratio),u_image:new e.Uniform1i(t,n.u_image),u_gl_units_to_pixels:new e.Uniform2f(t,n.u_gl_units_to_pixels),u_scale:new e.Uniform4f(t,n.u_scale),u_fade:new e.Uniform1f(t,n.u_fade)}},lineSDF:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_ratio:new e.Uniform1f(t,n.u_ratio),u_gl_units_to_pixels:new e.Uniform2f(t,n.u_gl_units_to_pixels),u_patternscale_a:new e.Uniform2f(t,n.u_patternscale_a),u_patternscale_b:new e.Uniform2f(t,n.u_patternscale_b),u_sdfgamma:new e.Uniform1f(t,n.u_sdfgamma),u_image:new e.Uniform1i(t,n.u_image),u_tex_y_a:new e.Uniform1f(t,n.u_tex_y_a),u_tex_y_b:new e.Uniform1f(t,n.u_tex_y_b),u_mix:new e.Uniform1f(t,n.u_mix)}},raster:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_tl_parent:new e.Uniform2f(t,n.u_tl_parent),u_scale_parent:new e.Uniform1f(t,n.u_scale_parent),u_buffer_scale:new e.Uniform1f(t,n.u_buffer_scale),u_fade_t:new e.Uniform1f(t,n.u_fade_t),u_opacity:new e.Uniform1f(t,n.u_opacity),u_image0:new e.Uniform1i(t,n.u_image0),u_image1:new e.Uniform1i(t,n.u_image1),u_brightness_low:new e.Uniform1f(t,n.u_brightness_low),u_brightness_high:new e.Uniform1f(t,n.u_brightness_high),u_saturation_factor:new e.Uniform1f(t,n.u_saturation_factor),u_contrast_factor:new e.Uniform1f(t,n.u_contrast_factor),u_spin_weights:new e.Uniform3f(t,n.u_spin_weights)}},symbolIcon:function(t,n){return{u_is_size_zoom_constant:new e.Uniform1i(t,n.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,n.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,n.u_size_t),u_size:new e.Uniform1f(t,n.u_size),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,n.u_pitch),u_rotate_symbol:new e.Uniform1i(t,n.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,n.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,n.u_fade_change),u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,n.u_label_plane_matrix),u_gl_coord_matrix:new e.UniformMatrix4f(t,n.u_gl_coord_matrix),u_is_text:new e.Uniform1f(t,n.u_is_text),u_pitch_with_map:new e.Uniform1i(t,n.u_pitch_with_map),u_texsize:new e.Uniform2f(t,n.u_texsize),u_texture:new e.Uniform1i(t,n.u_texture)}},symbolSDF:function(t,n){return{u_is_size_zoom_constant:new e.Uniform1i(t,n.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,n.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,n.u_size_t),u_size:new e.Uniform1f(t,n.u_size),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,n.u_pitch),u_rotate_symbol:new e.Uniform1i(t,n.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,n.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,n.u_fade_change),u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,n.u_label_plane_matrix),u_gl_coord_matrix:new e.UniformMatrix4f(t,n.u_gl_coord_matrix),u_is_text:new e.Uniform1f(t,n.u_is_text),u_pitch_with_map:new e.Uniform1i(t,n.u_pitch_with_map),u_texsize:new e.Uniform2f(t,n.u_texsize),u_texture:new e.Uniform1i(t,n.u_texture),u_gamma_scale:new e.Uniform1f(t,n.u_gamma_scale),u_is_halo:new e.Uniform1f(t,n.u_is_halo)}},background:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_opacity:new e.Uniform1f(t,n.u_opacity),u_color:new e.UniformColor(t,n.u_color)}},backgroundPattern:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_opacity:new e.Uniform1f(t,n.u_opacity),u_image:new e.Uniform1i(t,n.u_image),u_pattern_tl_a:new e.Uniform2f(t,n.u_pattern_tl_a),u_pattern_br_a:new e.Uniform2f(t,n.u_pattern_br_a),u_pattern_tl_b:new e.Uniform2f(t,n.u_pattern_tl_b),u_pattern_br_b:new e.Uniform2f(t,n.u_pattern_br_b),u_texsize:new e.Uniform2f(t,n.u_texsize),u_mix:new e.Uniform1f(t,n.u_mix),u_pattern_size_a:new e.Uniform2f(t,n.u_pattern_size_a),u_pattern_size_b:new e.Uniform2f(t,n.u_pattern_size_b),u_scale_a:new e.Uniform1f(t,n.u_scale_a),u_scale_b:new e.Uniform1f(t,n.u_scale_b),u_pixel_coord_upper:new e.Uniform2f(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,n.u_pixel_coord_lower),u_tile_units_to_pixels:new e.Uniform1f(t,n.u_tile_units_to_pixels)}}};function Nn(t,n){for(var r=t.sort(function(e,t){return e.tileID.isLessThan(t.tileID)?-1:t.tileID.isLessThan(e.tileID)?1:0}),i=0;i<r.length;i++){var o={},a=r[i],s=r.slice(i+1);qn(a.tileID.wrapped(),a.tileID,s,new e.OverscaledTileID(0,a.tileID.wrap+1,0,0,0),o),a.setMask(o,n)}}function qn(t,n,r,i,o){for(var a=0;a<r.length;a++){var s=r[a];if(i.isLessThan(s.tileID))break;if(n.key===s.tileID.key)return;if(s.tileID.isChildOf(n)){for(var u=n.children(1/0),l=0;l<u.length;l++)qn(t,u[l],r.slice(a),i,o);return}}var c=n.overscaledZ-t.overscaledZ,p=new e.CanonicalTileID(c,n.canonical.x-(t.canonical.x<<c),n.canonical.y-(t.canonical.y<<c));o[p.key]=o[p.key]||p}function Fn(e,t,n,r,i){for(var o=e.context,a=o.gl,s=i?e.useProgram("collisionCircle"):e.useProgram("collisionBox"),u=0;u<r.length;u++){var l=r[u],c=t.getTile(l),p=c.getBucket(n);if(p){var h=i?p.collisionCircle:p.collisionBox;h&&s.draw(o,i?a.TRIANGLES:a.LINES,we.disabled,Ee.disabled,e.colorModeForRenderPass(),ke.disabled,xn(l.posMatrix,e.transform,c),n.id,h.layoutVertexBuffer,h.indexBuffer,h.segments,null,e.transform.zoom,null,null,h.collisionVertexBuffer)}}}var Un=e.identity(new Float32Array(16)),Vn=e.properties.layout;function Wn(t,n,r,i,o,a,s,u,l,c,p,h){for(var f,d,m=t.context,_=m.gl,y=t.transform,v="map"===u,g="map"===l,b=v&&"point"!==r.layout.get("symbol-placement"),x=v&&!g&&!b,w=g?t.depthModeForSublayer(0,we.ReadOnly):we.disabled,E=0,T=i;E<T.length;E+=1){var k=T[E],C=n.getTile(k),M=C.getBucket(r);if(M){var P=o?M.text:M.icon;if(P&&P.segments.get().length){var A=P.programConfigurations.get(r.id),S=o||M.sdfIcons,O=o?M.textSizeData:M.iconSizeData;f||(f=t.useProgram(S?"symbolSDF":"symbolIcon",A),d=e.evaluateSizeForZoom(O,y.zoom,Vn.properties[o?"text-size":"icon-size"])),m.activeTexture.set(_.TEXTURE0);var I=void 0;if(o)C.glyphAtlasTexture.bind(_.LINEAR,_.CLAMP_TO_EDGE),I=C.glyphAtlasTexture.size;else{var R=1!==r.layout.get("icon-size").constantOr(0)||M.iconsNeedLinear,j=g||0!==y.pitch;C.imageAtlasTexture.bind(S||t.options.rotating||t.options.zooming||R||j?_.LINEAR:_.NEAREST,_.CLAMP_TO_EDGE),I=C.imageAtlasTexture.size}var L=st(C,1,t.transform.zoom),z=Ze(k.posMatrix,g,v,t.transform,L),D=He(k.posMatrix,g,v,t.transform,L);b&&Xe(M,k.posMatrix,t,o,z,D,g,c);var B=t.translatePosMatrix(k.posMatrix,C,a,s),N=b?Un:z,q=t.translatePosMatrix(D,C,a,s,!0),F=void 0;if(S){var U=0!==r.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1);F=Ln(O.functionType,d,x,g,t,B,N,q,o,I,!0),U&&Gn(P,r,t,f,w,p,h,F),F.u_is_halo=0}else F=jn(O.functionType,d,x,g,t,B,N,q,o,I);Gn(P,r,t,f,w,p,h,F)}}}}function Gn(e,t,n,r,i,o,a,s){var u=n.context,l=u.gl;r.draw(u,l.TRIANGLES,i,o,a,ke.disabled,s,t.id,e.layoutVertexBuffer,e.indexBuffer,e.segments,t.paint,n.transform.zoom,e.programConfigurations.get(t.id),e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer)}function Zn(e,t,n,r,i,o,a){var s,u,l,c,p,h=e.context.gl,f=n.paint.get("fill-pattern"),d=f&&f.constantOr(1),m=n.getCrossfadeParameters();a?(u=d&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",s=h.LINES):(u=d?"fillPattern":"fill",s=h.TRIANGLES);for(var _=0,y=r;_<y.length;_+=1){var v=y[_],g=t.getTile(v);if(!d||g.patternsLoaded()){var b=g.getBucket(n);if(b){var x=b.programConfigurations.get(n.id),w=e.useProgram(u,x);d&&(e.context.activeTexture.set(h.TEXTURE0),g.imageAtlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE),x.updatePatternPaintBuffers(m));var E=f.constantOr(null);if(E&&g.imageAtlas){var T=g.imageAtlas.patternPositions[E.to],k=g.imageAtlas.patternPositions[E.from];T&&k&&x.setConstantPatternPositions(T,k)}var C=e.translatePosMatrix(v.posMatrix,g,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor"));if(a){c=b.indexBuffer2,p=b.segments2;var M=[h.drawingBufferWidth,h.drawingBufferHeight];l="fillOutlinePattern"===u&&d?vn(C,e,m,g,M):yn(C,M)}else c=b.indexBuffer,p=b.segments,l=d?_n(C,e,m,g):mn(C);w.draw(e.context,s,i,e.stencilModeForClipping(v),o,ke.disabled,l,n.id,b.layoutVertexBuffer,c,p,n.paint,e.transform.zoom,x)}}}}function Hn(t,n){var r=t.context,i=r.gl,o=n.viewportFrame;if(t.depthRboNeedsClear&&t.setupOffscreenDepthRenderbuffer(),!o){var a=new e.Texture(r,{width:t.width,height:t.height,data:null},i.RGBA);a.bind(i.LINEAR,i.CLAMP_TO_EDGE),(o=n.viewportFrame=r.createFramebuffer(t.width,t.height)).colorAttachment.set(a.texture)}r.bindFramebuffer.set(o.framebuffer),o.depthAttachment.set(t.depthRbo),t.depthRboNeedsClear&&(r.clear({depth:1}),t.depthRboNeedsClear=!1),r.clear({color:e.Color.transparent}),r.setStencilMode(Ee.disabled),r.setDepthMode(new we(i.LEQUAL,we.ReadWrite,[0,1])),r.setColorMode(t.colorModeForRenderPass())}function Kn(e,t,n){var r=t.viewportFrame;if(r){var i=e.context,o=i.gl;i.activeTexture.set(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,r.colorAttachment.get()),e.useProgram("extrusionTexture").draw(i,o.TRIANGLES,we.disabled,Ee.disabled,e.colorModeForRenderPass(),ke.disabled,dn(e,n,0),t.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,t.paint,e.transform.zoom)}}function Yn(e,t,n,r,i,o){var a=e.context,s=a.gl,u=t.fbo;if(u){var l=e.useProgram("hillshade");a.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,u.colorAttachment.get());var c=kn(e,t,n);t.maskedBoundsBuffer&&t.maskedIndexBuffer&&t.segments?l.draw(a,s.TRIANGLES,r,i,o,ke.disabled,c,n.id,t.maskedBoundsBuffer,t.maskedIndexBuffer,t.segments):l.draw(a,s.TRIANGLES,r,i,o,ke.disabled,c,n.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}}function Xn(t,n,r,i,o,a,s){var u=t.context,l=u.gl;if(n.dem&&n.dem.data){var c=n.dem.dim,p=n.dem.getPixels();if(u.activeTexture.set(l.TEXTURE1),u.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||t.getTileTexture(n.tileSize),n.demTexture){var h=n.demTexture;h.update(p,{premultiply:!1}),h.bind(l.NEAREST,l.CLAMP_TO_EDGE)}else n.demTexture=new e.Texture(u,p,l.RGBA,{premultiply:!1}),n.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);u.activeTexture.set(l.TEXTURE0);var f=n.fbo;if(!f){var d=new e.Texture(u,{width:c,height:c,data:null},l.RGBA);d.bind(l.LINEAR,l.CLAMP_TO_EDGE),(f=n.fbo=u.createFramebuffer(c,c)).colorAttachment.set(d.texture)}u.bindFramebuffer.set(f.framebuffer),u.viewport.set([0,0,c,c]),t.useProgram("hillshadePrepare").draw(u,l.TRIANGLES,o,a,s,ke.disabled,Cn(n,i),r.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function $n(t,n,r,i,o){var a=i.paint.get("raster-fade-duration");if(a>0){var s=e.browser.now(),u=(s-t.timeAdded)/a,l=n?(s-n.timeAdded)/a:-1,c=r.getSource(),p=o.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),h=!n||Math.abs(n.tileID.overscaledZ-p)>Math.abs(t.tileID.overscaledZ-p),f=h&&t.refreshedUponExpiration?1:e.clamp(h?u:1-l,0,1);return t.refreshedUponExpiration&&u>=1&&(t.refreshedUponExpiration=!1),n?{opacity:1,mix:1-f}:{opacity:f,mix:0}}return{opacity:1,mix:0}}function Jn(t,n,r){var i=t.context,o=i.gl,a=r.posMatrix,s=t.useProgram("debug"),u=we.disabled,l=Ee.disabled,c=t.colorModeForRenderPass(),p="$debug";s.draw(i,o.LINE_STRIP,u,l,c,ke.disabled,wn(a,e.Color.red),p,t.debugBuffer,t.tileBorderIndexBuffer,t.debugSegments);for(var h=function(e,t,n,r){r=r||1;var i,o,a,s,u,l,c,p,h=[];for(i=0,o=e.length;i<o;i++)if(u=Qn[e[i]]){for(p=null,a=0,s=u[1].length;a<s;a+=2)-1===u[1][a]&&-1===u[1][a+1]?p=null:(l=t+u[1][a]*r,c=200-u[1][a+1]*r,p&&h.push(p.x,p.y,l,c),p={x:l,y:c});t+=u[0]*r}return h}(r.toString(),50,0,5),f=new e.StructArrayLayout2i4,d=new e.StructArrayLayout2ui4,m=0;m<h.length;m+=2)f.emplaceBack(h[m],h[m+1]),d.emplaceBack(m,m+1);for(var _=i.createVertexBuffer(f,Rt.members),y=i.createIndexBuffer(d),v=e.SegmentVector.simpleSegment(0,0,f.length/2,f.length/2),g=n.getTile(r).tileSize,b=e.EXTENT/(Math.pow(2,t.transform.zoom-r.overscaledZ)*g),x=[[-1,-1],[-1,1],[1,-1],[1,1]],w=0;w<x.length;w++){var E=x[w];s.draw(i,o.LINES,u,l,c,ke.disabled,wn(e.translate([],a,[b*E[0],b*E[1],0]),e.Color.white),p,_,y,v)}s.draw(i,o.LINES,u,l,c,ke.disabled,wn(a,e.Color.black),p,_,y,v)}var Qn={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]},er={symbol:function(e,t,n,r){if("translucent"===e.renderPass){var i=Ee.disabled,o=e.colorModeForRenderPass();0!==n.paint.get("icon-opacity").constantOr(1)&&Wn(e,t,n,r,!1,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),n.layout.get("icon-rotation-alignment"),n.layout.get("icon-pitch-alignment"),n.layout.get("icon-keep-upright"),i,o),0!==n.paint.get("text-opacity").constantOr(1)&&Wn(e,t,n,r,!0,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),n.layout.get("text-keep-upright"),i,o),t.map.showCollisionBoxes&&function(e,t,n,r){Fn(e,t,n,r,!1),Fn(e,t,n,r,!0)}(e,t,n,r)}},circle:function(e,t,n,r){if("translucent"===e.renderPass){var i=n.paint.get("circle-opacity"),o=n.paint.get("circle-stroke-width"),a=n.paint.get("circle-stroke-opacity");if(0!==i.constantOr(1)||0!==o.constantOr(1)&&0!==a.constantOr(1))for(var s=e.context,u=s.gl,l=e.depthModeForSublayer(0,we.ReadOnly),c=Ee.disabled,p=e.colorModeForRenderPass(),h=0;h<r.length;h++){var f=r[h],d=t.getTile(f),m=d.getBucket(n);if(m){var _=m.programConfigurations.get(n.id);e.useProgram("circle",_).draw(s,u.TRIANGLES,l,c,p,ke.disabled,gn(e,f,d,n),n.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,n.paint,e.transform.zoom,_)}}}},heatmap:function(t,n,r,i){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){var o=t.context,a=o.gl,s=t.depthModeForSublayer(0,we.ReadOnly),u=Ee.disabled,l=new Te([a.ONE,a.ONE],e.Color.transparent,[!0,!0,!0,!0]);!function(e,t,n){var r=e.gl;e.activeTexture.set(r.TEXTURE1),e.viewport.set([0,0,t.width/4,t.height/4]);var i=n.heatmapFbo;if(i)r.bindTexture(r.TEXTURE_2D,i.colorAttachment.get()),e.bindFramebuffer.set(i.framebuffer);else{var o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),i=n.heatmapFbo=e.createFramebuffer(t.width/4,t.height/4),function e(t,n,r,i){var o=t.gl;o.texImage2D(o.TEXTURE_2D,0,o.RGBA,n.width/4,n.height/4,0,o.RGBA,t.extTextureHalfFloat?t.extTextureHalfFloat.HALF_FLOAT_OES:o.UNSIGNED_BYTE,null),i.colorAttachment.set(r),t.extTextureHalfFloat&&o.checkFramebufferStatus(o.FRAMEBUFFER)!==o.FRAMEBUFFER_COMPLETE&&(t.extTextureHalfFloat=null,i.colorAttachment.setDirty(),e(t,n,r,i))}(e,t,o,i)}}(o,t,r),o.clear({color:e.Color.transparent});for(var c=0;c<i.length;c++){var p=i[c];if(!n.hasRenderableParent(p)){var h=n.getTile(p),f=h.getBucket(r);if(f){var d=f.programConfigurations.get(r.id),m=t.useProgram("heatmap",d),_=t.transform.zoom;m.draw(o,a.TRIANGLES,s,u,l,ke.disabled,Tn(p.posMatrix,h,_,r.paint.get("heatmap-intensity")),r.id,f.layoutVertexBuffer,f.indexBuffer,f.segments,r.paint,t.transform.zoom,d)}}}o.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,n){var r=t.context,i=r.gl,o=n.heatmapFbo;if(o){r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,o.colorAttachment.get()),r.activeTexture.set(i.TEXTURE1);var a=n.colorRampTexture;a||(a=n.colorRampTexture=new e.Texture(r,n.colorRamp,i.RGBA)),a.bind(i.LINEAR,i.CLAMP_TO_EDGE),t.useProgram("heatmapTexture").draw(r,i.TRIANGLES,we.disabled,Ee.disabled,t.colorModeForRenderPass(),ke.disabled,function(t,n,r,i){var o=e.create();e.ortho(o,0,t.width,t.height,0,0,1);var a=t.context.gl;return{u_matrix:o,u_world:[a.drawingBufferWidth,a.drawingBufferHeight],u_image:r,u_color_ramp:i,u_opacity:n.paint.get("heatmap-opacity")}}(t,n,0,1),n.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,n.paint,t.transform.zoom)}}(t,r))},line:function(t,n,r,i){if("translucent"===t.renderPass){var o=r.paint.get("line-opacity"),a=r.paint.get("line-width");if(0!==o.constantOr(1)&&0!==a.constantOr(1)){var s=t.depthModeForSublayer(0,we.ReadOnly),u=t.colorModeForRenderPass(),l=r.paint.get("line-dasharray"),c=r.paint.get("line-pattern"),p=c.constantOr(1),h=r.paint.get("line-gradient"),f=r.getCrossfadeParameters(),d=l?"lineSDF":p?"linePattern":h?"lineGradient":"line",m=t.context,_=m.gl,y=!0;if(h){m.activeTexture.set(_.TEXTURE0);var v=r.gradientTexture;if(!r.gradient)return;v||(v=r.gradientTexture=new e.Texture(m,r.gradient,_.RGBA)),v.bind(_.LINEAR,_.CLAMP_TO_EDGE)}for(var g=0,b=i;g<b.length;g+=1){var x=b[g],w=n.getTile(x);if(!p||w.patternsLoaded()){var E=w.getBucket(r);if(E){var T=E.programConfigurations.get(r.id),k=t.context.program.get(),C=t.useProgram(d,T),M=y||C.program!==k,P=c.constantOr(null);if(P&&w.imageAtlas){var A=w.imageAtlas.patternPositions[P.to],S=w.imageAtlas.patternPositions[P.from];A&&S&&T.setConstantPatternPositions(A,S)}var O=l?Sn(t,w,r,l,f):p?An(t,w,r,f):h?Pn(t,w,r):Mn(t,w,r);l&&(M||t.lineAtlas.dirty)?(m.activeTexture.set(_.TEXTURE0),t.lineAtlas.bind(m)):p&&(m.activeTexture.set(_.TEXTURE0),w.imageAtlasTexture.bind(_.LINEAR,_.CLAMP_TO_EDGE),T.updatePatternPaintBuffers(f)),C.draw(m,_.TRIANGLES,s,t.stencilModeForClipping(x),u,ke.disabled,O,r.id,E.layoutVertexBuffer,E.indexBuffer,E.segments,r.paint,t.transform.zoom,T),y=!1}}}}}},fill:function(t,n,r,i){var o=r.paint.get("fill-color"),a=r.paint.get("fill-opacity");if(0!==a.constantOr(1)){var s=t.colorModeForRenderPass(),u=r.paint.get("fill-pattern").constantOr(1)||1!==o.constantOr(e.Color.transparent).a||1!==a.constantOr(0)?"translucent":"opaque";t.renderPass===u&&Zn(t,n,r,i,t.depthModeForSublayer(1,"opaque"===t.renderPass?we.ReadWrite:we.ReadOnly),s,!1),"translucent"===t.renderPass&&r.paint.get("fill-antialias")&&Zn(t,n,r,i,t.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,we.ReadOnly),s,!0)}},"fill-extrusion":function(e,t,n,r){0!==n.paint.get("fill-extrusion-opacity")&&("offscreen"===e.renderPass?(Hn(e,n),function(e,t,n,r,i,o,a){for(var s=e.context,u=s.gl,l=n.paint.get("fill-extrusion-pattern"),c=l.constantOr(1),p=n.getCrossfadeParameters(),h=0,f=r;h<f.length;h+=1){var d=f[h],m=t.getTile(d),_=m.getBucket(n);if(_){var y=_.programConfigurations.get(n.id),v=e.useProgram(c?"fillExtrusionPattern":"fillExtrusion",y);c&&(e.context.activeTexture.set(u.TEXTURE0),m.imageAtlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE),y.updatePatternPaintBuffers(p));var g=l.constantOr(null);if(g&&m.imageAtlas){var b=m.imageAtlas.patternPositions[g.to],x=m.imageAtlas.patternPositions[g.from];b&&x&&y.setConstantPatternPositions(b,x)}var w=e.translatePosMatrix(d.posMatrix,m,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),E=n.paint.get("fill-extrusion-vertical-gradient"),T=c?fn(w,e,E,d,p,m):hn(w,e,E);v.draw(s,s.gl.TRIANGLES,i,o,a,ke.backCCW,T,n.id,_.layoutVertexBuffer,_.indexBuffer,_.segments,n.paint,e.transform.zoom,y)}}}(e,t,n,r,new we(e.context.gl.LEQUAL,we.ReadWrite,[0,1]),Ee.disabled,e.colorModeForRenderPass())):"translucent"===e.renderPass&&Kn(e,n,n.paint.get("fill-extrusion-opacity")))},hillshade:function(e,t,n,r){if("offscreen"===e.renderPass||"translucent"===e.renderPass){for(var i=e.context,o=t.getSource().maxzoom,a=e.depthModeForSublayer(0,we.ReadOnly),s=Ee.disabled,u=e.colorModeForRenderPass(),l=0,c=r;l<c.length;l+=1){var p=c[l],h=t.getTile(p);h.needsHillshadePrepare&&"offscreen"===e.renderPass?Xn(e,h,n,o,a,s,u):"translucent"===e.renderPass&&Yn(e,h,n,a,s,u)}i.viewport.set([0,0,e.width,e.height])}},raster:function(e,t,n,r){if("translucent"===e.renderPass&&0!==n.paint.get("raster-opacity"))for(var i=e.context,o=i.gl,a=t.getSource(),s=e.useProgram("raster"),u=Ee.disabled,l=e.colorModeForRenderPass(),c=r.length&&r[0].overscaledZ,p=0,h=r;p<h.length;p+=1){var f=h[p],d=e.depthModeForSublayer(f.overscaledZ-c,1===n.paint.get("raster-opacity")?we.ReadWrite:we.ReadOnly,o.LESS),m=t.getTile(f),_=e.transform.calculatePosMatrix(f.toUnwrapped(),!0);m.registerFadeDuration(n.paint.get("raster-fade-duration"));var y=t.findLoadedParent(f,0),v=$n(m,y,t,n,e.transform),g=void 0,b=void 0,x="nearest"===n.paint.get("raster-resampling")?o.NEAREST:o.LINEAR;i.activeTexture.set(o.TEXTURE0),m.texture.bind(x,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),i.activeTexture.set(o.TEXTURE1),y?(y.texture.bind(x,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),g=Math.pow(2,y.tileID.overscaledZ-m.tileID.overscaledZ),b=[m.tileID.canonical.x*g%1,m.tileID.canonical.y*g%1]):m.texture.bind(x,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST);var w=Rn(_,b||[0,0],g||1,v,n);a instanceof A?s.draw(i,o.TRIANGLES,d,u,l,ke.disabled,w,n.id,a.boundsBuffer,e.quadTriangleIndexBuffer,a.boundsSegments):m.maskedBoundsBuffer&&m.maskedIndexBuffer&&m.segments?s.draw(i,o.TRIANGLES,d,u,l,ke.disabled,w,n.id,m.maskedBoundsBuffer,m.maskedIndexBuffer,m.segments,n.paint,e.transform.zoom):s.draw(i,o.TRIANGLES,d,u,l,ke.disabled,w,n.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}},background:function(e,t,n){var r=n.paint.get("background-color"),i=n.paint.get("background-opacity");if(0!==i){var o=e.context,a=o.gl,s=e.transform,u=s.tileSize,l=n.paint.get("background-pattern");if(!e.isPatternMissing(l)){var c=l||1!==r.a||1!==i?"translucent":"opaque";if(e.renderPass===c){var p=Ee.disabled,h=e.depthModeForSublayer(0,"opaque"===c?we.ReadWrite:we.ReadOnly),f=e.colorModeForRenderPass(),d=e.useProgram(l?"backgroundPattern":"background"),m=s.coveringTiles({tileSize:u});l&&(o.activeTexture.set(a.TEXTURE0),e.imageManager.bind(e.context));for(var _=n.getCrossfadeParameters(),y=0,v=m;y<v.length;y+=1){var g=v[y],b=e.transform.calculatePosMatrix(g.toUnwrapped()),x=l?Dn(b,i,e,l,{tileID:g,tileSize:u},_):zn(b,i,r);d.draw(o,a.TRIANGLES,h,p,f,ke.disabled,x,n.id,e.tileExtentBuffer,e.quadTriangleIndexBuffer,e.tileExtentSegments)}}}}},debug:function(e,t,n){for(var r=0;r<n.length;r++)Jn(e,t,n[r])},custom:function(e,t,n){var r=e.context,i=n.implementation;if("offscreen"===e.renderPass){var o=i.prerender;o&&(e.setCustomLayerDefaults(),o.call(i,r.gl,e.transform.customLayerMatrix()),r.setDirty(),e.setBaseState()),"3d"===i.renderingMode&&(e.setCustomLayerDefaults(),Hn(e,n),i.render(r.gl,e.transform.customLayerMatrix()),r.setDirty(),e.setBaseState())}else if("translucent"===e.renderPass)if("3d"===i.renderingMode)Kn(e,n,1);else{e.setCustomLayerDefaults(),r.setStencilMode(Ee.disabled);var a=e.depthModeForSublayer(0,we.ReadOnly);r.setDepthMode(a),i.render(r.gl,e.transform.customLayerMatrix()),r.setDirty(),e.setBaseState(),r.bindFramebuffer.set(null)}}},tr=function(t,n){this.context=new Ce(t),this.transform=n,this._tileTextures={},this.setup(),this.numSublayers=Me.maxUnderzooming+Me.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.depthRboNeedsClear=!0,this.emptyProgramConfiguration=new e.ProgramConfiguration,this.crossTileSymbolIndex=new Pt};function nr(e,t){if(e.y>t.y){var n=e;e=t,t=n}return{x0:e.x,y0:e.y,x1:t.x,y1:t.y,dx:t.x-e.x,dy:t.y-e.y}}function rr(e,t,n,r,i){var o=Math.max(n,Math.floor(t.y0)),a=Math.min(r,Math.ceil(t.y1));if(e.x0===t.x0&&e.y0===t.y0?e.x0+t.dy/e.dy*e.dx<t.x1:e.x1-t.dy/e.dy*e.dx<t.x0){var s=e;e=t,t=s}for(var u=e.dx/e.dy,l=t.dx/t.dy,c=e.dx>0,p=t.dx<0,h=o;h<a;h++){var f=u*Math.max(0,Math.min(e.dy,h+c-e.y0))+e.x0,d=l*Math.max(0,Math.min(t.dy,h+p-t.y0))+t.x0;i(Math.floor(d),Math.ceil(f),h)}}function ir(e,t,n,r,i,o){var a,s=nr(e,t),u=nr(t,n),l=nr(n,e);s.dy>u.dy&&(a=s,s=u,u=a),s.dy>l.dy&&(a=s,s=l,l=a),u.dy>l.dy&&(a=u,u=l,l=a),s.dy&&rr(l,s,r,i,o),u.dy&&rr(l,u,r,i,o)}tr.prototype.resize=function(t,n){var r=this.context.gl;if(this.width=t*e.browser.devicePixelRatio,this.height=n*e.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var i=0,o=this.style._order;i<o.length;i+=1){var a=o[i];this.style._layers[a].resize()}this.depthRbo&&(r.deleteRenderbuffer(this.depthRbo),this.depthRbo=null)},tr.prototype.setup=function(){var t=this.context,n=new e.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(e.EXTENT,0),n.emplaceBack(0,e.EXTENT),n.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(n,Rt.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);var r=new e.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(e.EXTENT,0),r.emplaceBack(0,e.EXTENT),r.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=t.createVertexBuffer(r,Rt.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);var i=new e.StructArrayLayout4i8;i.emplaceBack(0,0,0,0),i.emplaceBack(e.EXTENT,0,e.EXTENT,0),i.emplaceBack(0,e.EXTENT,0,e.EXTENT),i.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.rasterBoundsBuffer=t.createVertexBuffer(i,e.rasterBoundsAttributes.members),this.rasterBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);var o=new e.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(1,0),o.emplaceBack(0,1),o.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(o,Rt.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);var a=new e.StructArrayLayout1ui2;a.emplaceBack(0),a.emplaceBack(1),a.emplaceBack(3),a.emplaceBack(2),a.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(a);var s=new e.StructArrayLayout3ui6;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(s);var u=this.context.gl;this.stencilClearMode=new Ee({func:u.ALWAYS,mask:0},0,255,u.ZERO,u.ZERO,u.ZERO)},tr.prototype.clearStencil=function(){var t=this.context,n=t.gl,r=e.create();e.ortho(r,0,this.width,this.height,0,0,1),e.scale(r,r,[n.drawingBufferWidth,n.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(t,n.TRIANGLES,we.disabled,this.stencilClearMode,Te.disabled,ke.disabled,En(r),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},tr.prototype._renderTileClippingMasks=function(e){var t=this.context,n=t.gl;t.setColorMode(Te.disabled),t.setDepthMode(we.disabled);var r=this.useProgram("clippingMask"),i=1;this._tileClippingMaskIDs={};for(var o=0,a=e;o<a.length;o+=1){var s=a[o],u=this._tileClippingMaskIDs[s.key]=i++;r.draw(t,n.TRIANGLES,we.disabled,new Ee({func:n.ALWAYS,mask:0},u,255,n.KEEP,n.KEEP,n.REPLACE),Te.disabled,ke.disabled,En(s.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}},tr.prototype.stencilModeForClipping=function(e){var t=this.context.gl;return new Ee({func:t.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,t.KEEP,t.KEEP,t.REPLACE)},tr.prototype.colorModeForRenderPass=function(){var t=this.context.gl;return this._showOverdrawInspector?new Te([t.CONSTANT_COLOR,t.ONE],new e.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Te.unblended:Te.alphaBlended},tr.prototype.depthModeForSublayer=function(e,t,n){var r=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon,i=r-1+this.depthRange;return new we(n||this.context.gl.LEQUAL,t,[i,r])},tr.prototype.render=function(t,n){this.style=t,this.options=n,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(e.browser.now());var r=this.style._order,i=this.style.sourceCaches;for(var o in i){var a=i[o];a.used&&a.prepare(this.context)}var s,u={},l={},c={};for(var p in i){var h=i[p];u[p]=h.getVisibleCoordinates(),l[p]=u[p].slice().reverse(),c[p]=h.getVisibleCoordinates(!0).reverse()}for(var f in i){var d=i[f],m=d.getSource();if("raster"===m.type||"raster-dem"===m.type){for(var _=[],y=0,v=u[f];y<v.length;y+=1){var g=v[y];_.push(d.getTile(g))}Nn(_,this.context)}}this.renderPass="offscreen",this.depthRboNeedsClear=!0;for(var b=0,x=r;b<x.length;b+=1){var w=x[b],E=this.style._layers[w];if(E.hasOffscreenPass()&&!E.isHidden(this.transform.zoom)){var T=l[E.source];("custom"===E.type||T.length)&&this.renderLayer(this,i[E.source],E,T)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:n.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this._showOverdrawInspector=n.showOverdrawInspector,this.depthRange=(t._order.length+2)*this.numSublayers*this.depthEpsilon,this.renderPass="opaque",this.currentLayer=r.length-1;this.currentLayer>=0;this.currentLayer--){var k=this.style._layers[r[this.currentLayer]],C=i[k.source],M=u[k.source];k.source!==s&&C&&(this.clearStencil(),C.getSource().isTileClipped&&this._renderTileClippingMasks(M)),this.renderLayer(this,C,k,M),s=k.source}for(this.renderPass="translucent",this.currentLayer=0,s=null;this.currentLayer<r.length;this.currentLayer++){var P=this.style._layers[r[this.currentLayer]],A=i[P.source],S=("symbol"===P.type?c:l)[P.source];P.source!==s&&A&&(this.clearStencil(),A.getSource().isTileClipped&&this._renderTileClippingMasks(u[P.source])),this.renderLayer(this,A,P,S),s=P.source}if(this.options.showTileBoundaries)for(var O in i){er.debug(this,i[O],u[O]);break}this.setCustomLayerDefaults()},tr.prototype.setupOffscreenDepthRenderbuffer=function(){var e=this.context;this.depthRbo||(this.depthRbo=e.createRenderbuffer(e.gl.DEPTH_COMPONENT16,this.width,this.height))},tr.prototype.renderLayer=function(e,t,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||"custom"===n.type||r.length)&&(this.id=n.id,er[n.type](e,t,n,r))},tr.prototype.translatePosMatrix=function(t,n,r,i,o){if(!r[0]&&!r[1])return t;var a=o?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(a){var s=Math.sin(a),u=Math.cos(a);r=[r[0]*u-r[1]*s,r[0]*s+r[1]*u]}var l=[o?r[0]:st(n,r[0],this.transform.zoom),o?r[1]:st(n,r[1],this.transform.zoom),0],c=new Float32Array(16);return e.translate(c,t,l),c},tr.prototype.saveTileTexture=function(e){var t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]},tr.prototype.getTileTexture=function(e){var t=this._tileTextures[e];return t&&t.length>0?t.pop():null},tr.prototype.isPatternMissing=function(e){if(!e)return!1;var t=this.imageManager.getPattern(e.from),n=this.imageManager.getPattern(e.to);return!t||!n},tr.prototype.useProgram=function(e,t){void 0===t&&(t=this.emptyProgramConfiguration),this.cache=this.cache||{};var n=""+e+(t.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[n]||(this.cache[n]=new cn(this.context,un[e],t,Bn[e],this._showOverdrawInspector)),this.cache[n]},tr.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},tr.prototype.setBaseState=function(){var e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)};var or=function(t,n,r){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===r||r,this._minZoom=t||0,this._maxZoom=n||22,this.setMaxBounds(),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._posMatrixCache={},this._alignedPosMatrixCache={}},ar={minZoom:{configurable:!0},maxZoom:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerPoint:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};or.prototype.clone=function(){var e=new or(this._minZoom,this._maxZoom,this._renderWorldCopies);return e.tileSize=this.tileSize,e.latRange=this.latRange,e.width=this.width,e.height=this.height,e._center=this._center,e.zoom=this.zoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._unmodified=this._unmodified,e._calcMatrices(),e},ar.minZoom.get=function(){return this._minZoom},ar.minZoom.set=function(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))},ar.maxZoom.get=function(){return this._maxZoom},ar.maxZoom.set=function(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))},ar.renderWorldCopies.get=function(){return this._renderWorldCopies},ar.renderWorldCopies.set=function(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e},ar.worldSize.get=function(){return this.tileSize*this.scale},ar.centerPoint.get=function(){return this.size._div(2)},ar.size.get=function(){return new e.Point(this.width,this.height)},ar.bearing.get=function(){return-this.angle/Math.PI*180},ar.bearing.set=function(t){var n=-e.wrap(t,-180,180)*Math.PI/180;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=e.create$4(),e.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},ar.pitch.get=function(){return this._pitch/Math.PI*180},ar.pitch.set=function(t){var n=e.clamp(t,0,60)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())},ar.fov.get=function(){return this._fov/Math.PI*180},ar.fov.set=function(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())},ar.zoom.get=function(){return this._zoom},ar.zoom.set=function(e){var t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom,this._constrain(),this._calcMatrices())},ar.center.get=function(){return this._center},ar.center.set=function(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())},or.prototype.coveringZoomLevel=function(e){return(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize))},or.prototype.getVisibleUnwrappedCoordinates=function(t){var n=[new e.UnwrappedTileID(0,t)];if(this._renderWorldCopies)for(var r=this.pointCoordinate(new e.Point(0,0)),i=this.pointCoordinate(new e.Point(this.width,0)),o=this.pointCoordinate(new e.Point(this.width,this.height)),a=this.pointCoordinate(new e.Point(0,this.height)),s=Math.floor(Math.min(r.x,i.x,o.x,a.x)),u=Math.floor(Math.max(r.x,i.x,o.x,a.x)),l=s-1;l<=u+1;l++)0!==l&&n.push(new e.UnwrappedTileID(l,t));return n},or.prototype.coveringTiles=function(t){var n=this.coveringZoomLevel(t),r=n;if(void 0!==t.minzoom&&n<t.minzoom)return[];void 0!==t.maxzoom&&n>t.maxzoom&&(n=t.maxzoom);var i=e.MercatorCoordinate.fromLngLat(this.center),o=Math.pow(2,n),a=new e.Point(o*i.x-.5,o*i.y-.5);return function(t,n,r,i){void 0===i&&(i=!0);var o=1<<t,a={};function s(n,s,u){var l,c,p,h;if(u>=0&&u<=o)for(l=n;l<s;l++)c=Math.floor(l/o),p=(l%o+o)%o,0!==c&&!0!==i||(h=new e.OverscaledTileID(r,c,t,p,u),a[h.key]=h)}var u=n.map(function(t){return new e.Point(t.x,t.y)._mult(o)});return ir(u[0],u[1],u[2],0,o,s),ir(u[2],u[3],u[0],0,o,s),Object.keys(a).map(function(e){return a[e]})}(n,[this.pointCoordinate(new e.Point(0,0)),this.pointCoordinate(new e.Point(this.width,0)),this.pointCoordinate(new e.Point(this.width,this.height)),this.pointCoordinate(new e.Point(0,this.height))],t.reparseOverscaled?r:n,this._renderWorldCopies).sort(function(e,t){return a.dist(e.canonical)-a.dist(t.canonical)})},or.prototype.resize=function(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()},ar.unmodified.get=function(){return this._unmodified},or.prototype.zoomScale=function(e){return Math.pow(2,e)},or.prototype.scaleZoom=function(e){return Math.log(e)/Math.LN2},or.prototype.project=function(t){var n=e.clamp(t.lat,-this.maxValidLatitude,this.maxValidLatitude);return new e.Point(e.mercatorXfromLng(t.lng)*this.worldSize,e.mercatorYfromLat(n)*this.worldSize)},or.prototype.unproject=function(t){return new e.MercatorCoordinate(t.x/this.worldSize,t.y/this.worldSize).toLngLat()},ar.point.get=function(){return this.project(this.center)},or.prototype.setLocationAtPoint=function(t,n){var r=this.pointCoordinate(n),i=this.pointCoordinate(this.centerPoint),o=this.locationCoordinate(t),a=new e.MercatorCoordinate(o.x-(r.x-i.x),o.y-(r.y-i.y));this.center=this.coordinateLocation(a),this._renderWorldCopies&&(this.center=this.center.wrap())},or.prototype.locationPoint=function(e){return this.coordinatePoint(this.locationCoordinate(e))},or.prototype.pointLocation=function(e){return this.coordinateLocation(this.pointCoordinate(e))},or.prototype.locationCoordinate=function(t){return e.MercatorCoordinate.fromLngLat(t)},or.prototype.coordinateLocation=function(e){return e.toLngLat()},or.prototype.pointCoordinate=function(t){var n=[t.x,t.y,0,1],r=[t.x,t.y,1,1];e.transformMat4(n,n,this.pixelMatrixInverse),e.transformMat4(r,r,this.pixelMatrixInverse);var i=n[3],o=r[3],a=n[0]/i,s=r[0]/o,u=n[1]/i,l=r[1]/o,c=n[2]/i,p=r[2]/o,h=c===p?0:(0-c)/(p-c);return new e.MercatorCoordinate(e.number(a,s,h)/this.worldSize,e.number(u,l,h)/this.worldSize)},or.prototype.coordinatePoint=function(t){var n=[t.x*this.worldSize,t.y*this.worldSize,0,1];return e.transformMat4(n,n,this.pixelMatrix),new e.Point(n[0]/n[3],n[1]/n[3])},or.prototype.getBounds=function(){return(new e.LngLatBounds).extend(this.pointLocation(new e.Point(0,0))).extend(this.pointLocation(new e.Point(this.width,0))).extend(this.pointLocation(new e.Point(this.width,this.height))).extend(this.pointLocation(new e.Point(0,this.height)))},or.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new e.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},or.prototype.setMaxBounds=function(e){e?(this.lngRange=[e.getWest(),e.getEast()],this.latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},or.prototype.calculatePosMatrix=function(t,n){void 0===n&&(n=!1);var r=t.key,i=n?this._alignedPosMatrixCache:this._posMatrixCache;if(i[r])return i[r];var o=t.canonical,a=this.worldSize/this.zoomScale(o.z),s=o.x+Math.pow(2,o.z)*t.wrap,u=e.identity(new Float64Array(16));return e.translate(u,u,[s*a,o.y*a,0]),e.scale(u,u,[a/e.EXTENT,a/e.EXTENT,1]),e.multiply(u,n?this.alignedProjMatrix:this.projMatrix,u),i[r]=new Float32Array(u),i[r]},or.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},or.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var t,n,r,i,o=-90,a=90,s=-180,u=180,l=this.size,c=this._unmodified;if(this.latRange){var p=this.latRange;o=e.mercatorYfromLat(p[1])*this.worldSize,t=(a=e.mercatorYfromLat(p[0])*this.worldSize)-o<l.y?l.y/(a-o):0}if(this.lngRange){var h=this.lngRange;s=e.mercatorXfromLng(h[0])*this.worldSize,n=(u=e.mercatorXfromLng(h[1])*this.worldSize)-s<l.x?l.x/(u-s):0}var f=this.point,d=Math.max(n||0,t||0);if(d)return this.center=this.unproject(new e.Point(n?(u+s)/2:f.x,t?(a+o)/2:f.y)),this.zoom+=this.scaleZoom(d),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var m=f.y,_=l.y/2;m-_<o&&(i=o+_),m+_>a&&(i=a-_)}if(this.lngRange){var y=f.x,v=l.x/2;y-v<s&&(r=s+v),y+v>u&&(r=u-v)}void 0===r&&void 0===i||(this.center=this.unproject(new e.Point(void 0!==r?r:f.x,void 0!==i?i:f.y))),this._unmodified=c,this._constraining=!1}},or.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var t=this._fov/2,n=Math.PI/2+this._pitch,r=Math.sin(t)*this.cameraToCenterDistance/Math.sin(Math.PI-n-t),i=this.point,o=i.x,a=i.y,s=1.01*(Math.cos(Math.PI/2-this._pitch)*r+this.cameraToCenterDistance),u=new Float64Array(16);e.perspective(u,this._fov,this.width/this.height,1,s),e.scale(u,u,[1,-1,1]),e.translate(u,u,[0,0,-this.cameraToCenterDistance]),e.rotateX(u,u,this._pitch),e.rotateZ(u,u,this.angle),e.translate(u,u,[-o,-a,0]),this.mercatorMatrix=e.scale([],u,[this.worldSize,this.worldSize,this.worldSize]),e.scale(u,u,[1,1,e.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=u;var l=this.width%2/2,c=this.height%2/2,p=Math.cos(this.angle),h=Math.sin(this.angle),f=o-Math.round(o)+p*l+h*c,d=a-Math.round(a)+p*c+h*l,m=new Float64Array(u);if(e.translate(m,m,[f>.5?f-1:f,d>.5?d-1:d,0]),this.alignedProjMatrix=m,u=e.create(),e.scale(u,u,[this.width/2,-this.height/2,1]),e.translate(u,u,[1,-1,0]),this.pixelMatrix=e.multiply(new Float64Array(16),u,this.projMatrix),!(u=e.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=u,this._posMatrixCache={},this._alignedPosMatrixCache={}}},or.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var t=this.pointCoordinate(new e.Point(0,0)),n=[t.x*this.worldSize,t.y*this.worldSize,0,1];return e.transformMat4(n,n,this.pixelMatrix)[3]/this.cameraToCenterDistance},Object.defineProperties(or.prototype,ar);var sr=function(){var t,n,r,i;e.bindAll(["_onHashChange","_updateHash"],this),this._updateHash=(t=this._updateHashUnthrottled.bind(this),n=!1,r=0,i=function(){r=0,n&&(t(),r=setTimeout(i,300),n=!1)},function(){return n=!0,r||i(),r})};sr.prototype.addTo=function(t){return this._map=t,e.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},sr.prototype.remove=function(){return e.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},sr.prototype.getHashString=function(e){var t=this._map.getCenter(),n=Math.round(100*this._map.getZoom())/100,r=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),i=Math.pow(10,r),o=Math.round(t.lng*i)/i,a=Math.round(t.lat*i)/i,s=this._map.getBearing(),u=this._map.getPitch(),l="";return l+=e?"#/"+o+"/"+a+"/"+n:"#"+n+"/"+a+"/"+o,(s||u)&&(l+="/"+Math.round(10*s)/10),u&&(l+="/"+Math.round(u)),l},sr.prototype._onHashChange=function(){var t=e.window.location.hash.replace("#","").split("/");return t.length>=3&&(this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:+(t[3]||0),pitch:+(t[4]||0)}),!0)},sr.prototype._updateHashUnthrottled=function(){var t=this.getHashString();try{e.window.history.replaceState(e.window.history.state,"",t)}catch(e){}};var ur=function(t){function r(r,i,o,a){void 0===a&&(a={});var s=n.mousePos(i.getCanvasContainer(),o),u=i.unproject(s);t.call(this,r,e.extend({point:s,lngLat:u,originalEvent:o},a)),this._defaultPrevented=!1,this.target=i}t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r;var i={defaultPrevented:{configurable:!0}};return r.prototype.preventDefault=function(){this._defaultPrevented=!0},i.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(r.prototype,i),r}(e.Event),lr=function(t){function r(r,i,o){var a=n.touchPos(i.getCanvasContainer(),o),s=a.map(function(e){return i.unproject(e)}),u=a.reduce(function(e,t,n,r){return e.add(t.div(r.length))},new e.Point(0,0)),l=i.unproject(u);t.call(this,r,{points:a,point:u,lngLats:s,lngLat:l,originalEvent:o}),this._defaultPrevented=!1}t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r;var i={defaultPrevented:{configurable:!0}};return r.prototype.preventDefault=function(){this._defaultPrevented=!0},i.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(r.prototype,i),r}(e.Event),cr=function(e){function t(t,n,r){e.call(this,t,{originalEvent:r}),this._defaultPrevented=!1}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultPrevented:{configurable:!0}};return t.prototype.preventDefault=function(){this._defaultPrevented=!0},n.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(t.prototype,n),t}(e.Event),pr=function(t){this._map=t,this._el=t.getCanvasContainer(),this._delta=0,e.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};pr.prototype.isEnabled=function(){return!!this._enabled},pr.prototype.isActive=function(){return!!this._active},pr.prototype.isZooming=function(){return!!this._zooming},pr.prototype.enable=function(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=e&&"center"===e.around)},pr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},pr.prototype.onWheel=function(t){if(this.isEnabled()){var n=t.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY,r=e.browser.now(),i=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==n&&n%4.000244140625==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(i*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),t.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=t,this._delta-=n,this.isActive()||this._start(t)),t.preventDefault()}},pr.prototype._onTimeout=function(e){this._type="wheel",this._delta-=this._lastValue,this.isActive()||this._start(e)},pr.prototype._start=function(t){if(this._delta){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),this._active=!0,this._zooming=!0,this._map.fire(new e.Event("movestart",{originalEvent:t})),this._map.fire(new e.Event("zoomstart",{originalEvent:t})),this._finishTimeout&&clearTimeout(this._finishTimeout);var r=n.mousePos(this._el,t);this._around=e.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(r)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame))}},pr.prototype._onScrollFrame=function(){var t=this;if(this._frameId=null,this.isActive()){var n=this._map.transform;if(0!==this._delta){var r="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?1/450:.01,i=2/(1+Math.exp(-Math.abs(this._delta*r)));this._delta<0&&0!==i&&(i=1/i);var o="number"==typeof this._targetZoom?n.zoomScale(this._targetZoom):n.scale;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(o*i))),"wheel"===this._type&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var a="number"==typeof this._targetZoom?this._targetZoom:n.zoom,s=this._startZoom,u=this._easing,l=!1;if("wheel"===this._type&&s&&u){var c=Math.min((e.browser.now()-this._lastWheelEventTime)/200,1),p=u(c);n.zoom=e.number(s,a,p),c<1?this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame)):l=!0}else n.zoom=a,l=!0;n.setLocationAtPoint(this._around,this._aroundPoint),this._map.fire(new e.Event("move",{originalEvent:this._lastWheelEvent})),this._map.fire(new e.Event("zoom",{originalEvent:this._lastWheelEvent})),l&&(this._active=!1,this._finishTimeout=setTimeout(function(){t._zooming=!1,t._map.fire(new e.Event("zoomend",{originalEvent:t._lastWheelEvent})),t._map.fire(new e.Event("moveend",{originalEvent:t._lastWheelEvent})),delete t._targetZoom},200))}},pr.prototype._smoothOutEasing=function(t){var n=e.ease;if(this._prevEase){var r=this._prevEase,i=(e.browser.now()-r.start)/r.duration,o=r.easing(i+.01)-r.easing(i),a=.27/Math.sqrt(o*o+1e-4)*.01,s=Math.sqrt(.0729-a*a);n=e.bezier(a,s,.25,1)}return this._prevEase={start:e.browser.now(),duration:t,easing:n},n};var hr=function(t,n){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=n.clickTolerance||1,e.bindAll(["_onMouseMove","_onMouseUp","_onKeyDown"],this)};hr.prototype.isEnabled=function(){return!!this._enabled},hr.prototype.isActive=function(){return!!this._active},hr.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},hr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},hr.prototype.onMouseDown=function(t){this.isEnabled()&&t.shiftKey&&0===t.button&&(e.window.document.addEventListener("mousemove",this._onMouseMove,!1),e.window.document.addEventListener("keydown",this._onKeyDown,!1),e.window.document.addEventListener("mouseup",this._onMouseUp,!1),n.disableDrag(),this._startPos=this._lastPos=n.mousePos(this._el,t),this._active=!0)},hr.prototype._onMouseMove=function(e){var t=n.mousePos(this._el,e);if(!(this._lastPos.equals(t)||!this._box&&t.dist(this._startPos)<this._clickTolerance)){var r=this._startPos;this._lastPos=t,this._box||(this._box=n.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));var i=Math.min(r.x,t.x),o=Math.max(r.x,t.x),a=Math.min(r.y,t.y),s=Math.max(r.y,t.y);n.setTransform(this._box,"translate("+i+"px,"+a+"px)"),this._box.style.width=o-i+"px",this._box.style.height=s-a+"px"}},hr.prototype._onMouseUp=function(t){if(0===t.button){var r=this._startPos,i=n.mousePos(this._el,t);this._finish(),n.suppressClick(),r.x===i.x&&r.y===i.y?this._fireEvent("boxzoomcancel",t):this._map.fitScreenCoordinates(r,i,this._map.getBearing(),{linear:!0}).fire(new e.Event("boxzoomend",{originalEvent:t}))}},hr.prototype._onKeyDown=function(e){27===e.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",e))},hr.prototype._finish=function(){this._active=!1,e.window.document.removeEventListener("mousemove",this._onMouseMove,!1),e.window.document.removeEventListener("keydown",this._onKeyDown,!1),e.window.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(n.remove(this._box),this._box=null),n.enableDrag(),delete this._startPos,delete this._lastPos},hr.prototype._fireEvent=function(t,n){return this._map.fire(new e.Event(t,{originalEvent:n}))};var fr=e.bezier(0,0,.25,1),dr=function(t,n){this._map=t,this._el=n.element||t.getCanvasContainer(),this._state="disabled",this._button=n.button||"right",this._bearingSnap=n.bearingSnap||0,this._pitchWithRotate=!1!==n.pitchWithRotate,e.bindAll(["onMouseDown","_onMouseMove","_onMouseUp","_onBlur","_onDragFrame"],this)};dr.prototype.isEnabled=function(){return"disabled"!==this._state},dr.prototype.isActive=function(){return"active"===this._state},dr.prototype.enable=function(){this.isEnabled()||(this._state="enabled")},dr.prototype.disable=function(){if(this.isEnabled())switch(this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend"),this._pitchWithRotate&&this._fireEvent("pitchend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},dr.prototype.onMouseDown=function(t){if("enabled"===this._state){if("right"===this._button){if(this._eventButton=n.mouseButton(t),this._eventButton!==(t.ctrlKey?0:2))return}else{if(t.ctrlKey||0!==n.mouseButton(t))return;this._eventButton=0}n.disableDrag(),e.window.document.addEventListener("mousemove",this._onMouseMove,{capture:!0}),e.window.document.addEventListener("mouseup",this._onMouseUp),e.window.addEventListener("blur",this._onBlur),this._state="pending",this._inertia=[[e.browser.now(),this._map.getBearing()]],this._startPos=this._lastPos=n.mousePos(this._el,t),this._center=this._map.transform.centerPoint,t.preventDefault()}},dr.prototype._onMouseMove=function(e){var t=n.mousePos(this._el,e);this._lastPos.equals(t)||(this._lastMoveEvent=e,this._lastPos=t,"pending"===this._state&&(this._state="active",this._fireEvent("rotatestart",e),this._fireEvent("movestart",e),this._pitchWithRotate&&this._fireEvent("pitchstart",e)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},dr.prototype._onDragFrame=function(){this._frameId=null;var t=this._lastMoveEvent;if(t){var n=this._map.transform,r=this._startPos,i=this._lastPos,o=.8*(r.x-i.x),a=-.5*(r.y-i.y),s=n.bearing-o,u=n.pitch-a,l=this._inertia,c=l[l.length-1];this._drainInertiaBuffer(),l.push([e.browser.now(),this._map._normalizeBearing(s,c[1])]),n.bearing=s,this._pitchWithRotate&&(this._fireEvent("pitch",t),n.pitch=u),this._fireEvent("rotate",t),this._fireEvent("move",t),delete this._lastMoveEvent,this._startPos=this._lastPos}},dr.prototype._onMouseUp=function(e){if(n.mouseButton(e)===this._eventButton)switch(this._state){case"active":this._state="enabled",n.suppressClick(),this._unbind(),this._deactivate(),this._inertialRotate(e);break;case"pending":this._state="enabled",this._unbind()}},dr.prototype._onBlur=function(e){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend",e),this._pitchWithRotate&&this._fireEvent("pitchend",e),this._fireEvent("moveend",e);break;case"pending":this._state="enabled",this._unbind()}},dr.prototype._unbind=function(){e.window.document.removeEventListener("mousemove",this._onMouseMove,{capture:!0}),e.window.document.removeEventListener("mouseup",this._onMouseUp),e.window.removeEventListener("blur",this._onBlur),n.enableDrag()},dr.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._lastPos},dr.prototype._inertialRotate=function(e){var t=this;this._fireEvent("rotateend",e),this._drainInertiaBuffer();var n=this._map,r=n.getBearing(),i=this._inertia,o=function(){Math.abs(r)<t._bearingSnap?n.resetNorth({noMoveStart:!0},{originalEvent:e}):t._fireEvent("moveend",e),t._pitchWithRotate&&t._fireEvent("pitchend",e)};if(i.length<2)o();else{var a=i[0],s=i[i.length-1],u=i[i.length-2],l=n._normalizeBearing(r,u[1]),c=s[1]-a[1],p=c<0?-1:1,h=(s[0]-a[0])/1e3;if(0!==c&&0!==h){var f=Math.abs(c*(.25/h));f>180&&(f=180);var d=f/180;l+=p*f*(d/2),Math.abs(n._normalizeBearing(l,0))<this._bearingSnap&&(l=n._normalizeBearing(0,l)),n.rotateTo(l,{duration:1e3*d,easing:fr,noMoveStart:!0},{originalEvent:e})}else o()}},dr.prototype._fireEvent=function(t,n){return this._map.fire(new e.Event(t,n?{originalEvent:n}:{}))},dr.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,n=e.browser.now();t.length>0&&n-t[0][0]>160;)t.shift()};var mr=e.bezier(0,0,.3,1),_r=function(t,n){this._map=t,this._el=t.getCanvasContainer(),this._state="disabled",this._clickTolerance=n.clickTolerance||1,e.bindAll(["_onMove","_onMouseUp","_onTouchEnd","_onBlur","_onDragFrame"],this)};_r.prototype.isEnabled=function(){return"disabled"!==this._state},_r.prototype.isActive=function(){return"active"===this._state},_r.prototype.enable=function(){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._state="enabled")},_r.prototype.disable=function(){if(this.isEnabled())switch(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("dragend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},_r.prototype.onMouseDown=function(t){"enabled"===this._state&&(t.ctrlKey||0!==n.mouseButton(t)||(n.addEventListener(e.window.document,"mousemove",this._onMove,{capture:!0}),n.addEventListener(e.window.document,"mouseup",this._onMouseUp),this._start(t)))},_r.prototype.onTouchStart=function(t){"enabled"===this._state&&(t.touches.length>1||(n.addEventListener(e.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),n.addEventListener(e.window.document,"touchend",this._onTouchEnd),this._start(t)))},_r.prototype._start=function(t){e.window.addEventListener("blur",this._onBlur),this._state="pending",this._startPos=this._mouseDownPos=this._lastPos=n.mousePos(this._el,t),this._inertia=[[e.browser.now(),this._startPos]]},_r.prototype._onMove=function(t){t.preventDefault();var r=n.mousePos(this._el,t);this._lastPos.equals(r)||"pending"===this._state&&r.dist(this._mouseDownPos)<this._clickTolerance||(this._lastMoveEvent=t,this._lastPos=r,this._drainInertiaBuffer(),this._inertia.push([e.browser.now(),this._lastPos]),"pending"===this._state&&(this._state="active",this._fireEvent("dragstart",t),this._fireEvent("movestart",t)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},_r.prototype._onDragFrame=function(){this._frameId=null;var e=this._lastMoveEvent;if(e){var t=this._map.transform;t.setLocationAtPoint(t.pointLocation(this._startPos),this._lastPos),this._fireEvent("drag",e),this._fireEvent("move",e),this._startPos=this._lastPos,delete this._lastMoveEvent}},_r.prototype._onMouseUp=function(e){if(0===n.mouseButton(e))switch(this._state){case"active":this._state="enabled",n.suppressClick(),this._unbind(),this._deactivate(),this._inertialPan(e);break;case"pending":this._state="enabled",this._unbind()}},_r.prototype._onTouchEnd=function(e){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._inertialPan(e);break;case"pending":this._state="enabled",this._unbind()}},_r.prototype._onBlur=function(e){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("dragend",e),this._fireEvent("moveend",e);break;case"pending":this._state="enabled",this._unbind()}},_r.prototype._unbind=function(){n.removeEventListener(e.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),n.removeEventListener(e.window.document,"touchend",this._onTouchEnd),n.removeEventListener(e.window.document,"mousemove",this._onMove,{capture:!0}),n.removeEventListener(e.window.document,"mouseup",this._onMouseUp),n.removeEventListener(e.window,"blur",this._onBlur)},_r.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._mouseDownPos,delete this._lastPos},_r.prototype._inertialPan=function(e){this._fireEvent("dragend",e),this._drainInertiaBuffer();var t=this._inertia;if(t.length<2)this._fireEvent("moveend",e);else{var n=t[t.length-1],r=t[0],i=n[1].sub(r[1]),o=(n[0]-r[0])/1e3;if(0===o||n[1].equals(r[1]))this._fireEvent("moveend",e);else{var a=i.mult(.3/o),s=a.mag();s>1400&&(s=1400,a._unit()._mult(s));var u=s/750,l=a.mult(-u/2);this._map.panBy(l,{duration:1e3*u,easing:mr,noMoveStart:!0},{originalEvent:e})}}},_r.prototype._fireEvent=function(t,n){return this._map.fire(new e.Event(t,n?{originalEvent:n}:{}))},_r.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,n=e.browser.now();t.length>0&&n-t[0][0]>160;)t.shift()};var yr=function(t){this._map=t,this._el=t.getCanvasContainer(),e.bindAll(["_onKeyDown"],this)};function vr(e){return e*(2-e)}yr.prototype.isEnabled=function(){return!!this._enabled},yr.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},yr.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},yr.prototype._onKeyDown=function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t=0,n=0,r=0,i=0,o=0;switch(e.keyCode){case 61:case 107:case 171:case 187:t=1;break;case 189:case 109:case 173:t=-1;break;case 37:e.shiftKey?n=-1:(e.preventDefault(),i=-1);break;case 39:e.shiftKey?n=1:(e.preventDefault(),i=1);break;case 38:e.shiftKey?r=1:(e.preventDefault(),o=-1);break;case 40:e.shiftKey?r=-1:(o=1,e.preventDefault());break;default:return}var a=this._map,s=a.getZoom(),u={duration:300,delayEndEvents:500,easing:vr,zoom:t?Math.round(s)+t*(e.shiftKey?2:1):s,bearing:a.getBearing()+15*n,pitch:a.getPitch()+10*r,offset:[100*-i,100*-o],center:a.getCenter()};a.easeTo(u,{originalEvent:e})}};var gr=function(t){this._map=t,e.bindAll(["_onDblClick","_onZoomEnd"],this)};gr.prototype.isEnabled=function(){return!!this._enabled},gr.prototype.isActive=function(){return!!this._active},gr.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},gr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},gr.prototype.onTouchStart=function(e){var t=this;this.isEnabled()&&(e.points.length>1||(this._tapped?(clearTimeout(this._tapped),this._tapped=null,this._zoom(e)):this._tapped=setTimeout(function(){t._tapped=null},300)))},gr.prototype.onDblClick=function(e){this.isEnabled()&&(e.originalEvent.preventDefault(),this._zoom(e))},gr.prototype._zoom=function(e){this._active=!0,this._map.on("zoomend",this._onZoomEnd),this._map.zoomTo(this._map.getZoom()+(e.originalEvent.shiftKey?-1:1),{around:e.lngLat},e)},gr.prototype._onZoomEnd=function(){this._active=!1,this._map.off("zoomend",this._onZoomEnd)};var br=e.bezier(0,0,.15,1),xr=function(t){this._map=t,this._el=t.getCanvasContainer(),e.bindAll(["_onMove","_onEnd","_onTouchFrame"],this)};xr.prototype.isEnabled=function(){return!!this._enabled},xr.prototype.enable=function(e){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around)},xr.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._enabled=!1)},xr.prototype.disableRotation=function(){this._rotationDisabled=!0},xr.prototype.enableRotation=function(){this._rotationDisabled=!1},xr.prototype.onStart=function(t){if(this.isEnabled()&&2===t.touches.length){var r=n.mousePos(this._el,t.touches[0]),i=n.mousePos(this._el,t.touches[1]),o=r.add(i).div(2);this._startVec=r.sub(i),this._startAround=this._map.transform.pointLocation(o),this._gestureIntent=void 0,this._inertia=[],n.addEventListener(e.window.document,"touchmove",this._onMove,{passive:!1}),n.addEventListener(e.window.document,"touchend",this._onEnd)}},xr.prototype._getTouchEventData=function(e){var t=n.mousePos(this._el,e.touches[0]),r=n.mousePos(this._el,e.touches[1]),i=t.sub(r);return{vec:i,center:t.add(r).div(2),scale:i.mag()/this._startVec.mag(),bearing:this._rotationDisabled?0:180*i.angleWith(this._startVec)/Math.PI}},xr.prototype._onMove=function(t){if(2===t.touches.length){var n=this._getTouchEventData(t),r=n.vec,i=n.scale,o=n.bearing;if(!this._gestureIntent){var a=Math.abs(1-i)>.15;Math.abs(o)>10?this._gestureIntent="rotate":a&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._map.fire(new e.Event(this._gestureIntent+"start",{originalEvent:t})),this._map.fire(new e.Event("movestart",{originalEvent:t})),this._startVec=r)}this._lastTouchEvent=t,this._frameId||(this._frameId=this._map._requestRenderFrame(this._onTouchFrame)),t.preventDefault()}},xr.prototype._onTouchFrame=function(){this._frameId=null;var t=this._gestureIntent;if(t){var n=this._map.transform;this._startScale||(this._startScale=n.scale,this._startBearing=n.bearing);var r=this._getTouchEventData(this._lastTouchEvent),i=r.center,o=r.bearing,a=r.scale,s=n.pointLocation(i),u=n.locationPoint(s);"rotate"===t&&(n.bearing=this._startBearing+o),n.zoom=n.scaleZoom(this._startScale*a),n.setLocationAtPoint(this._startAround,u),this._map.fire(new e.Event(t,{originalEvent:this._lastTouchEvent})),this._map.fire(new e.Event("move",{originalEvent:this._lastTouchEvent})),this._drainInertiaBuffer(),this._inertia.push([e.browser.now(),a,i])}},xr.prototype._onEnd=function(t){n.removeEventListener(e.window.document,"touchmove",this._onMove,{passive:!1}),n.removeEventListener(e.window.document,"touchend",this._onEnd);var r=this._gestureIntent,i=this._startScale;if(this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._gestureIntent,delete this._startScale,delete this._startBearing,delete this._lastTouchEvent,r){this._map.fire(new e.Event(r+"end",{originalEvent:t})),this._drainInertiaBuffer();var o=this._inertia,a=this._map;if(o.length<2)a.snapToNorth({},{originalEvent:t});else{var s=o[o.length-1],u=o[0],l=a.transform.scaleZoom(i*s[1]),c=a.transform.scaleZoom(i*u[1]),p=l-c,h=(s[0]-u[0])/1e3,f=s[2];if(0!==h&&l!==c){var d=.15*p/h;Math.abs(d)>2.5&&(d=d>0?2.5:-2.5);var m=1e3*Math.abs(d/(12*.15)),_=l+d*m/2e3;_<0&&(_=0),a.easeTo({zoom:_,duration:m,easing:br,around:this._aroundCenter?a.getCenter():a.unproject(f),noMoveStart:!0},{originalEvent:t})}else a.snapToNorth({},{originalEvent:t})}}},xr.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,n=e.browser.now();t.length>2&&n-t[0][0]>160;)t.shift()};var wr={scrollZoom:pr,boxZoom:hr,dragRotate:dr,dragPan:_r,keyboard:yr,doubleClickZoom:gr,touchZoomRotate:xr},Er=function(t){function n(n,r){t.call(this),this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=r.bearingSnap,e.bindAll(["_renderFrameCallback"],this)}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.getCenter=function(){return this.transform.center},n.prototype.setCenter=function(e,t){return this.jumpTo({center:e},t)},n.prototype.panBy=function(t,n,r){return t=e.Point.convert(t).mult(-1),this.panTo(this.transform.center,e.extend({offset:t},n),r)},n.prototype.panTo=function(t,n,r){return this.easeTo(e.extend({center:t},n),r)},n.prototype.getZoom=function(){return this.transform.zoom},n.prototype.setZoom=function(e,t){return this.jumpTo({zoom:e},t),this},n.prototype.zoomTo=function(t,n,r){return this.easeTo(e.extend({zoom:t},n),r)},n.prototype.zoomIn=function(e,t){return this.zoomTo(this.getZoom()+1,e,t),this},n.prototype.zoomOut=function(e,t){return this.zoomTo(this.getZoom()-1,e,t),this},n.prototype.getBearing=function(){return this.transform.bearing},n.prototype.setBearing=function(e,t){return this.jumpTo({bearing:e},t),this},n.prototype.rotateTo=function(t,n,r){return this.easeTo(e.extend({bearing:t},n),r)},n.prototype.resetNorth=function(t,n){return this.rotateTo(0,e.extend({duration:1e3},t),n),this},n.prototype.snapToNorth=function(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this},n.prototype.getPitch=function(){return this.transform.pitch},n.prototype.setPitch=function(e,t){return this.jumpTo({pitch:e},t),this},n.prototype.cameraForBounds=function(t,n){return t=e.LngLatBounds.convert(t),this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),0,n)},n.prototype._cameraForBoxAndBearing=function(t,n,r,i){if("number"==typeof(i=e.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},i)).padding){var o=i.padding;i.padding={top:o,bottom:o,right:o,left:o}}if(e.isEqual(Object.keys(i.padding).sort(function(e,t){return e<t?-1:e>t?1:0}),["bottom","left","right","top"])){var a=[(i.padding.left-i.padding.right)/2,(i.padding.top-i.padding.bottom)/2],s=Math.min(i.padding.right,i.padding.left),u=Math.min(i.padding.top,i.padding.bottom);i.offset=[i.offset[0]+a[0],i.offset[1]+a[1]];var l=this.transform,c=l.project(e.LngLat.convert(t)),p=l.project(e.LngLat.convert(n)),h=c.rotate(-r*Math.PI/180),f=p.rotate(-r*Math.PI/180),d=new e.Point(Math.max(h.x,f.x),Math.max(h.y,f.y)),m=new e.Point(Math.min(h.x,f.x),Math.min(h.y,f.y)),_=e.Point.convert(i.offset),y=d.sub(m),v=(l.width-2*s-2*Math.abs(_.x))/y.x,g=(l.height-2*u-2*Math.abs(_.y))/y.y;if(!(g<0||v<0))return i.center=l.unproject(c.add(p).div(2)),i.zoom=Math.min(l.scaleZoom(l.scale*Math.min(v,g)),i.maxZoom),i.bearing=r,i;e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}else e.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'")},n.prototype.fitBounds=function(e,t,n){return this._fitInternal(this.cameraForBounds(e,t),t,n)},n.prototype.fitScreenCoordinates=function(t,n,r,i,o){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(e.Point.convert(t)),this.transform.pointLocation(e.Point.convert(n)),r,i),i,o)},n.prototype._fitInternal=function(t,n,r){return t?(n=e.extend(t,n)).linear?this.easeTo(n,r):this.flyTo(n,r):this},n.prototype.jumpTo=function(t,n){this.stop();var r=this.transform,i=!1,o=!1,a=!1;return"zoom"in t&&r.zoom!==+t.zoom&&(i=!0,r.zoom=+t.zoom),void 0!==t.center&&(r.center=e.LngLat.convert(t.center)),"bearing"in t&&r.bearing!==+t.bearing&&(o=!0,r.bearing=+t.bearing),"pitch"in t&&r.pitch!==+t.pitch&&(a=!0,r.pitch=+t.pitch),this.fire(new e.Event("movestart",n)).fire(new e.Event("move",n)),i&&this.fire(new e.Event("zoomstart",n)).fire(new e.Event("zoom",n)).fire(new e.Event("zoomend",n)),o&&this.fire(new e.Event("rotatestart",n)).fire(new e.Event("rotate",n)).fire(new e.Event("rotateend",n)),a&&this.fire(new e.Event("pitchstart",n)).fire(new e.Event("pitch",n)).fire(new e.Event("pitchend",n)),this.fire(new e.Event("moveend",n))},n.prototype.easeTo=function(t,n){var r=this;this.stop(),!1===(t=e.extend({offset:[0,0],duration:500,easing:e.ease},t)).animate&&(t.duration=0);var i=this.transform,o=this.getZoom(),a=this.getBearing(),s=this.getPitch(),u="zoom"in t?+t.zoom:o,l="bearing"in t?this._normalizeBearing(t.bearing,a):a,c="pitch"in t?+t.pitch:s,p=i.centerPoint.add(e.Point.convert(t.offset)),h=i.pointLocation(p),f=e.LngLat.convert(t.center||h);this._normalizeCenter(f);var d,m,_=i.project(h),y=i.project(f).sub(_),v=i.zoomScale(u-o);return t.around&&(d=e.LngLat.convert(t.around),m=i.locationPoint(d)),this._zooming=u!==o,this._rotating=a!==l,this._pitching=c!==s,this._prepareEase(n,t.noMoveStart),clearTimeout(this._easeEndTimeoutID),this._ease(function(t){if(r._zooming&&(i.zoom=e.number(o,u,t)),r._rotating&&(i.bearing=e.number(a,l,t)),r._pitching&&(i.pitch=e.number(s,c,t)),d)i.setLocationAtPoint(d,m);else{var h=i.zoomScale(i.zoom-o),f=u>o?Math.min(2,v):Math.max(.5,v),g=Math.pow(f,1-t),b=i.unproject(_.add(y.mult(t*g)).mult(h));i.setLocationAtPoint(i.renderWorldCopies?b.wrap():b,p)}r._fireMoveEvents(n)},function(){t.delayEndEvents?r._easeEndTimeoutID=setTimeout(function(){return r._afterEase(n)},t.delayEndEvents):r._afterEase(n)},t),this},n.prototype._prepareEase=function(t,n){this._moving=!0,n||this.fire(new e.Event("movestart",t)),this._zooming&&this.fire(new e.Event("zoomstart",t)),this._rotating&&this.fire(new e.Event("rotatestart",t)),this._pitching&&this.fire(new e.Event("pitchstart",t))},n.prototype._fireMoveEvents=function(t){this.fire(new e.Event("move",t)),this._zooming&&this.fire(new e.Event("zoom",t)),this._rotating&&this.fire(new e.Event("rotate",t)),this._pitching&&this.fire(new e.Event("pitch",t))},n.prototype._afterEase=function(t){var n=this._zooming,r=this._rotating,i=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,n&&this.fire(new e.Event("zoomend",t)),r&&this.fire(new e.Event("rotateend",t)),i&&this.fire(new e.Event("pitchend",t)),this.fire(new e.Event("moveend",t))},n.prototype.flyTo=function(t,n){var r=this;this.stop(),t=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},t);var i=this.transform,o=this.getZoom(),a=this.getBearing(),s=this.getPitch(),u="zoom"in t?e.clamp(+t.zoom,i.minZoom,i.maxZoom):o,l="bearing"in t?this._normalizeBearing(t.bearing,a):a,c="pitch"in t?+t.pitch:s,p=i.zoomScale(u-o),h=i.centerPoint.add(e.Point.convert(t.offset)),f=i.pointLocation(h),d=e.LngLat.convert(t.center||f);this._normalizeCenter(d);var m=i.project(f),_=i.project(d).sub(m),y=t.curve,v=Math.max(i.width,i.height),g=v/p,b=_.mag();if("minZoom"in t){var x=e.clamp(Math.min(t.minZoom,o,u),i.minZoom,i.maxZoom),w=v/i.zoomScale(x-o);y=Math.sqrt(w/b*2)}var E=y*y;function T(e){var t=(g*g-v*v+(e?-1:1)*E*E*b*b)/(2*(e?g:v)*E*b);return Math.log(Math.sqrt(t*t+1)-t)}function k(e){return(Math.exp(e)-Math.exp(-e))/2}function C(e){return(Math.exp(e)+Math.exp(-e))/2}var M=T(0),P=function(e){return C(M)/C(M+y*e)},A=function(e){return v*((C(M)*(k(t=M+y*e)/C(t))-k(M))/E)/b;var t},S=(T(1)-M)/y;if(Math.abs(b)<1e-6||!isFinite(S)){if(Math.abs(v-g)<1e-6)return this.easeTo(t,n);var O=g<v?-1:1;S=Math.abs(Math.log(g/v))/y,A=function(){return 0},P=function(e){return Math.exp(O*y*e)}}if("duration"in t)t.duration=+t.duration;else{var I="screenSpeed"in t?+t.screenSpeed/y:+t.speed;t.duration=1e3*S/I}return t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=a!==l,this._pitching=c!==s,this._prepareEase(n,!1),this._ease(function(t){var p=t*S,f=1/P(p);i.zoom=1===t?u:o+i.scaleZoom(f),r._rotating&&(i.bearing=e.number(a,l,t)),r._pitching&&(i.pitch=e.number(s,c,t));var y=1===t?d:i.unproject(m.add(_.mult(A(p))).mult(f));i.setLocationAtPoint(i.renderWorldCopies?y.wrap():y,h),r._fireMoveEvents(n)},function(){return r._afterEase(n)},t),this},n.prototype.isEasing=function(){return!!this._easeFrameId},n.prototype.stop=function(){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var e=this._onEaseEnd;delete this._onEaseEnd,e.call(this)}return this},n.prototype._ease=function(t,n,r){!1===r.animate||0===r.duration?(t(1),n()):(this._easeStart=e.browser.now(),this._easeOptions=r,this._onEaseFrame=t,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},n.prototype._renderFrameCallback=function(){var t=Math.min((e.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},n.prototype._normalizeBearing=function(t,n){t=e.wrap(t,-180,180);var r=Math.abs(t-n);return Math.abs(t-360-n)<r&&(t-=360),Math.abs(t+360-n)<r&&(t+=360),t},n.prototype._normalizeCenter=function(e){var t=this.transform;if(t.renderWorldCopies&&!t.lngRange){var n=e.lng-t.center.lng;e.lng+=n>180?-360:n<-180?360:0}},n}(e.Evented),Tr=function(t){void 0===t&&(t={}),this.options=t,e.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Tr.prototype.getDefaultPosition=function(){return"bottom-right"},Tr.prototype.onAdd=function(e){var t=this.options&&this.options.compact;return this._map=e,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),t&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===t&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Tr.prototype.onRemove=function(){n.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0},Tr.prototype._updateEditLink=function(){var t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));var n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:e.config.ACCESS_TOKEN}];if(t){var r=n.reduce(function(e,t,r){return t.value&&(e+=t.key+"="+t.value+(r<n.length-1?"&":"")),e},"?");t.href="https://www.mapbox.com/feedback/"+r+(this._map._hash?this._map._hash.getHashString(!0):"")}},Tr.prototype._updateData=function(e){!e||"metadata"!==e.sourceDataType&&"style"!==e.dataType||(this._updateAttributions(),this._updateEditLink())},Tr.prototype._updateAttributions=function(){if(this._map.style){var e=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map(function(e){return"string"!=typeof e?"":"<p>"+e+"</p>"})):"string"==typeof this.options.customAttribution&&e.push("<p>"+this.options.customAttribution+"</p>")),this._map.style.stylesheet){var t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}var n=this._map.style.sourceCaches;for(var r in n){var i=n[r];if(i.used){var o=i.getSource();o.attribution&&e.indexOf(o.attribution)<0&&e.push(o.attribution)}}e.sort(function(e,t){return e.length-t.length}),(e=e.filter(function(t,n){for(var r=n+1;r<e.length;r++)if(e[r].indexOf(t)>=0)return!1;return!0})).length?(this._container.innerHTML=e.join("<p> | </p>"),this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null}},Tr.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var kr=function(){e.bindAll(["_updateLogo"],this),e.bindAll(["_updateCompact"],this)};kr.prototype.onAdd=function(e){this._map=e,this._container=n.create("div","mapboxgl-ctrl");var t=n.create("a","mapboxgl-ctrl-logo");return t.target="_blank",t.href="https://www.mapbox.com/",t.setAttribute("aria-label","Mapbox logo"),t.setAttribute("rel","noopener"),this._container.appendChild(t),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},kr.prototype.onRemove=function(){n.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},kr.prototype.getDefaultPosition=function(){return"bottom-left"},kr.prototype._updateLogo=function(e){e&&"metadata"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},kr.prototype._logoRequired=function(){if(this._map.style){var e=this._map.style.sourceCaches;for(var t in e)if(e[t].getSource().mapbox_logo)return!0;return!1}},kr.prototype._updateCompact=function(){var e=this._container.children;if(e.length){var t=e[0];this._map.getCanvasContainer().offsetWidth<250?t.classList.add("mapboxgl-compact"):t.classList.remove("mapboxgl-compact")}};var Cr=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Cr.prototype.add=function(e){var t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t},Cr.prototype.remove=function(e){for(var t=this._currentlyRunning,n=0,r=t?this._queue.concat(t):this._queue;n<r.length;n+=1){var i=r[n];if(i.id===e)return void(i.cancelled=!0)}},Cr.prototype.run=function(){var e=this._currentlyRunning=this._queue;this._queue=[];for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(!r.cancelled&&(r.callback(),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Cr.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Mr=e.window.HTMLImageElement,Pr=e.window.HTMLElement,Ar={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:0,maxZoom:22,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,clickTolerance:3,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},Sr=function(r){function i(t){var i=this;if(null!=(t=e.extend({},Ar,t)).minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than minZoom");var o=new or(t.minZoom,t.maxZoom,t.renderWorldCopies);r.call(this,o,t),this._interactive=t.interactive,this._maxTileCacheSize=t.maxTileCacheSize,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=t.preserveDrawingBuffer,this._trackResize=t.trackResize,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles,this._fadeDuration=t.fadeDuration,this._crossSourceCollisions=t.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=t.collectResourceTiming,this._renderTaskQueue=new Cr,this._controls=[],this._mapId=e.uniqueId();var a=t.transformRequest;if(this._transformRequest=a?function(e,t){return a(e,t)||{url:e}}:function(e){return{url:e}},"string"==typeof t.container){if(this._container=e.window.document.getElementById(t.container),!this._container)throw new Error("Container '"+t.container+"' not found.")}else{if(!(t.container instanceof Pr))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=t.container}if(t.maxBounds&&this.setMaxBounds(t.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return i._update(!1)}),this.on("zoom",function(){return i._update(!0)}),void 0!==e.window&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1)),function(e,t){var r=e.getCanvasContainer(),i=null,o=!1,a=null;for(var s in wr)e[s]=new wr[s](e,t),t.interactive&&t[s]&&e[s].enable(t[s]);n.addEventListener(r,"mouseout",function(t){e.fire(new ur("mouseout",e,t))}),n.addEventListener(r,"mousedown",function(i){o=!0,a=n.mousePos(r,i);var s=new ur("mousedown",e,i);e.fire(s),s.defaultPrevented||(t.interactive&&!e.doubleClickZoom.isActive()&&e.stop(),e.boxZoom.onMouseDown(i),e.boxZoom.isActive()||e.dragPan.isActive()||e.dragRotate.onMouseDown(i),e.boxZoom.isActive()||e.dragRotate.isActive()||e.dragPan.onMouseDown(i))}),n.addEventListener(r,"mouseup",function(t){var n=e.dragRotate.isActive();i&&!n&&e.fire(new ur("contextmenu",e,i)),i=null,o=!1,e.fire(new ur("mouseup",e,t))}),n.addEventListener(r,"mousemove",function(t){if(!e.dragPan.isActive()&&!e.dragRotate.isActive()){for(var n=t.target;n&&n!==r;)n=n.parentNode;n===r&&e.fire(new ur("mousemove",e,t))}}),n.addEventListener(r,"mouseover",function(t){for(var n=t.target;n&&n!==r;)n=n.parentNode;n===r&&e.fire(new ur("mouseover",e,t))}),n.addEventListener(r,"touchstart",function(n){var r=new lr("touchstart",e,n);e.fire(r),r.defaultPrevented||(t.interactive&&e.stop(),e.boxZoom.isActive()||e.dragRotate.isActive()||e.dragPan.onTouchStart(n),e.touchZoomRotate.onStart(n),e.doubleClickZoom.onTouchStart(r))},{passive:!1}),n.addEventListener(r,"touchmove",function(t){e.fire(new lr("touchmove",e,t))},{passive:!1}),n.addEventListener(r,"touchend",function(t){e.fire(new lr("touchend",e,t))}),n.addEventListener(r,"touchcancel",function(t){e.fire(new lr("touchcancel",e,t))}),n.addEventListener(r,"click",function(i){var o=n.mousePos(r,i);(o.equals(a)||o.dist(a)<t.clickTolerance)&&e.fire(new ur("click",e,i))}),n.addEventListener(r,"dblclick",function(t){var n=new ur("dblclick",e,t);e.fire(n),n.defaultPrevented||e.doubleClickZoom.onDblClick(n)}),n.addEventListener(r,"contextmenu",function(t){var n=e.dragRotate.isActive();o||n?o&&(i=t):e.fire(new ur("contextmenu",e,t)),(e.dragRotate.isEnabled()||e.listens("contextmenu"))&&t.preventDefault()}),n.addEventListener(r,"wheel",function(n){t.interactive&&e.stop();var r=new cr("wheel",e,n);e.fire(r),r.defaultPrevented||e.scrollZoom.onWheel(n)},{passive:!1})}(this,t),this._hash=t.hash&&(new sr).addTo(this),this._hash&&this._hash._onHashChange()||(t.bounds?(this.resize(),this.fitBounds(t.bounds,{duration:0})):this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch})),this.resize(),t.style&&this.setStyle(t.style,{localIdeographFontFamily:t.localIdeographFontFamily}),t.attributionControl&&this.addControl(new Tr({customAttribution:t.customAttribution})),this.addControl(new kr,t.logoPosition),this.on("style.load",function(){i.transform.unmodified&&i.jumpTo(i.style.stylesheet)}),this.on("data",function(t){i._update("style"===t.dataType),i.fire(new e.Event(t.dataType+"data",t))}),this.on("dataloading",function(t){i.fire(new e.Event(t.dataType+"dataloading",t))})}r&&(i.__proto__=r),i.prototype=Object.create(r&&r.prototype),i.prototype.constructor=i;var o={showTileBoundaries:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0}};return i.prototype._getMapId=function(){return this._mapId},i.prototype.addControl=function(t,n){if(void 0===n&&t.getDefaultPosition&&(n=t.getDefaultPosition()),void 0===n&&(n="top-right"),!t||!t.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var r=t.onAdd(this);this._controls.push(t);var i=this._controlPositions[n];return-1!==n.indexOf("bottom")?i.insertBefore(r,i.firstChild):i.appendChild(r),this},i.prototype.removeControl=function(t){if(!t||!t.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var n=this._controls.indexOf(t);return n>-1&&this._controls.splice(n,1),t.onRemove(this),this},i.prototype.resize=function(t){var n=this._containerDimensions(),r=n[0],i=n[1];return this._resizeCanvas(r,i),this.transform.resize(r,i),this.painter.resize(r,i),this.fire(new e.Event("movestart",t)).fire(new e.Event("move",t)).fire(new e.Event("resize",t)).fire(new e.Event("moveend",t)),this},i.prototype.getBounds=function(){return this.transform.getBounds()},i.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},i.prototype.setMaxBounds=function(t){return this.transform.setMaxBounds(e.LngLatBounds.convert(t)),this._update()},i.prototype.setMinZoom=function(e){if((e=null==e?0:e)>=0&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this._update(),this.getZoom()<e&&this.setZoom(e),this;throw new Error("minZoom must be between 0 and the current maxZoom, inclusive")},i.prototype.getMinZoom=function(){return this.transform.minZoom},i.prototype.setMaxZoom=function(e){if((e=null==e?22:e)>=this.transform.minZoom)return this.transform.maxZoom=e,this._update(),this.getZoom()>e&&this.setZoom(e),this;throw new Error("maxZoom must be greater than the current minZoom")},i.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},i.prototype.setRenderWorldCopies=function(e){return this.transform.renderWorldCopies=e,this._update()},i.prototype.getMaxZoom=function(){return this.transform.maxZoom},i.prototype.project=function(t){return this.transform.locationPoint(e.LngLat.convert(t))},i.prototype.unproject=function(t){return this.transform.pointLocation(e.Point.convert(t))},i.prototype.isMoving=function(){return this._moving||this.dragPan.isActive()||this.dragRotate.isActive()||this.scrollZoom.isActive()},i.prototype.isZooming=function(){return this._zooming||this.scrollZoom.isZooming()},i.prototype.isRotating=function(){return this._rotating||this.dragRotate.isActive()},i.prototype.on=function(e,t,n){var i,o=this;if(void 0===n)return r.prototype.on.call(this,e,t);var a=function(){if("mouseenter"===e||"mouseover"===e){var r=!1;return{layer:t,listener:n,delegates:{mousemove:function(i){var a=o.getLayer(t)?o.queryRenderedFeatures(i.point,{layers:[t]}):[];a.length?r||(r=!0,n.call(o,new ur(e,o,i.originalEvent,{features:a}))):r=!1},mouseout:function(){r=!1}}}}if("mouseleave"===e||"mouseout"===e){var a=!1;return{layer:t,listener:n,delegates:{mousemove:function(r){(o.getLayer(t)?o.queryRenderedFeatures(r.point,{layers:[t]}):[]).length?a=!0:a&&(a=!1,n.call(o,new ur(e,o,r.originalEvent)))},mouseout:function(t){a&&(a=!1,n.call(o,new ur(e,o,t.originalEvent)))}}}}return{layer:t,listener:n,delegates:(i={},i[e]=function(e){var r=o.getLayer(t)?o.queryRenderedFeatures(e.point,{layers:[t]}):[];r.length&&(e.features=r,n.call(o,e),delete e.features)},i)}}();for(var s in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(a),a.delegates)o.on(s,a.delegates[s]);return this},i.prototype.off=function(e,t,n){if(void 0===n)return r.prototype.off.call(this,e,t);if(this._delegatedListeners&&this._delegatedListeners[e])for(var i=this._delegatedListeners[e],o=0;o<i.length;o++){var a=i[o];if(a.layer===t&&a.listener===n){for(var s in a.delegates)this.off(s,a.delegates[s]);return i.splice(o,1),this}}return this},i.prototype.queryRenderedFeatures=function(t,n){if(!this.style)return[];var r;if(void 0!==n||void 0===t||t instanceof e.Point||Array.isArray(t)||(n=t,t=void 0),n=n||{},(t=t||[[0,0],[this.transform.width,this.transform.height]])instanceof e.Point||"number"==typeof t[0])r=[e.Point.convert(t)];else{var i=e.Point.convert(t[0]),o=e.Point.convert(t[1]);r=[i,new e.Point(o.x,i.y),o,new e.Point(i.x,o.y),i]}return this.style.queryRenderedFeatures(r,n,this.transform)},i.prototype.querySourceFeatures=function(e,t){return this.style.querySourceFeatures(e,t)},i.prototype.setStyle=function(t,n){if((!n||!1!==n.diff&&!n.localIdeographFontFamily)&&this.style&&t&&"object"==typeof t)try{return this.style.setState(t)&&this._update(!0),this}catch(t){e.warnOnce("Unable to perform style diff: "+(t.message||t.error||t)+".  Rebuilding the style from scratch.")}return this.style&&(this.style.setEventedParent(null),this.style._remove()),t?(this.style=new It(this,n||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t),this):(delete this.style,this)},i.prototype.getStyle=function(){if(this.style)return this.style.serialize()},i.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():e.warnOnce("There is no style added to the map.")},i.prototype.addSource=function(e,t){return this.style.addSource(e,t),this._update(!0)},i.prototype.isSourceLoaded=function(t){var n=this.style&&this.style.sourceCaches[t];if(void 0!==n)return n.loaded();this.fire(new e.ErrorEvent(new Error("There is no source with ID '"+t+"'")))},i.prototype.areTilesLoaded=function(){var e=this.style&&this.style.sourceCaches;for(var t in e){var n=e[t]._tiles;for(var r in n){var i=n[r];if("loaded"!==i.state&&"errored"!==i.state)return!1}}return!0},i.prototype.addSourceType=function(e,t,n){return this.style.addSourceType(e,t,n)},i.prototype.removeSource=function(e){return this.style.removeSource(e),this._update(!0)},i.prototype.getSource=function(e){return this.style.getSource(e)},i.prototype.addImage=function(t,n,r){void 0===r&&(r={});var i=r.pixelRatio;void 0===i&&(i=1);var o=r.sdf;if(void 0===o&&(o=!1),n instanceof Mr){var a=e.browser.getImageData(n),s=a.width,u=a.height,l=a.data;this.style.addImage(t,{data:new e.RGBAImage({width:s,height:u},l),pixelRatio:i,sdf:o})}else{if(void 0===n.width||void 0===n.height)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var c=n.width,p=n.height,h=n.data;this.style.addImage(t,{data:new e.RGBAImage({width:c,height:p},new Uint8Array(h)),pixelRatio:i,sdf:o})}},i.prototype.hasImage=function(t){return t?!!this.style.getImage(t):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)},i.prototype.removeImage=function(e){this.style.removeImage(e)},i.prototype.loadImage=function(t,n){e.getImage(this._transformRequest(t,e.ResourceType.Image),n)},i.prototype.listImages=function(){return this.style.listImages()},i.prototype.addLayer=function(e,t){return this.style.addLayer(e,t),this._update(!0)},i.prototype.moveLayer=function(e,t){return this.style.moveLayer(e,t),this._update(!0)},i.prototype.removeLayer=function(e){return this.style.removeLayer(e),this._update(!0)},i.prototype.getLayer=function(e){return this.style.getLayer(e)},i.prototype.setFilter=function(e,t){return this.style.setFilter(e,t),this._update(!0)},i.prototype.setLayerZoomRange=function(e,t,n){return this.style.setLayerZoomRange(e,t,n),this._update(!0)},i.prototype.getFilter=function(e){return this.style.getFilter(e)},i.prototype.setPaintProperty=function(e,t,n){return this.style.setPaintProperty(e,t,n),this._update(!0)},i.prototype.getPaintProperty=function(e,t){return this.style.getPaintProperty(e,t)},i.prototype.setLayoutProperty=function(e,t,n){return this.style.setLayoutProperty(e,t,n),this._update(!0)},i.prototype.getLayoutProperty=function(e,t){return this.style.getLayoutProperty(e,t)},i.prototype.setLight=function(e){return this.style.setLight(e),this._update(!0)},i.prototype.getLight=function(){return this.style.getLight()},i.prototype.setFeatureState=function(e,t){return this.style.setFeatureState(e,t),this._update()},i.prototype.getFeatureState=function(e){return this.style.getFeatureState(e)},i.prototype.getContainer=function(){return this._container},i.prototype.getCanvasContainer=function(){return this._canvasContainer},i.prototype.getCanvas=function(){return this._canvas},i.prototype._containerDimensions=function(){var e=0,t=0;return this._container&&(e=this._container.clientWidth||400,t=this._container.clientHeight||300),[e,t]},i.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},i.prototype._setupContainer=function(){var e=this._container;e.classList.add("mapboxgl-map"),(this._missingCSSCanary=n.create("div","mapboxgl-canary",e)).style.visibility="hidden",this._detectMissingCSS();var t=this._canvasContainer=n.create("div","mapboxgl-canvas-container",e);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=n.create("canvas","mapboxgl-canvas",t),this._canvas.style.position="absolute",this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var r=this._containerDimensions();this._resizeCanvas(r[0],r[1]);var i=this._controlContainer=n.create("div","mapboxgl-control-container",e),o=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(e){o[e]=n.create("div","mapboxgl-ctrl-"+e,i)})},i.prototype._resizeCanvas=function(t,n){var r=e.window.devicePixelRatio||1;this._canvas.width=r*t,this._canvas.height=r*n,this._canvas.style.width=t+"px",this._canvas.style.height=n+"px"},i.prototype._setupPainter=function(){var n=e.extend({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer},t.webGLContextAttributes),r=this._canvas.getContext("webgl",n)||this._canvas.getContext("experimental-webgl",n);r?this.painter=new tr(r,this.transform):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))},i.prototype._contextLost=function(t){t.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:t}))},i.prototype._contextRestored=function(t){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:t}))},i.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},i.prototype._update=function(e){return this.style?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this},i.prototype._requestRenderFrame=function(e){return this._update(),this._renderTaskQueue.add(e)},i.prototype._cancelRenderFrame=function(e){this._renderTaskQueue.remove(e)},i.prototype._render=function(){this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run();var t=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var n=this.transform.zoom,r=e.browser.now();this.style.zoomHistory.update(n,r);var i=new e.EvaluationParameters(n,{now:r,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),o=i.crossFadingFactor();1===o&&o===this._crossFadingFactor||(t=!0,this._crossFadingFactor=o),this.style.update(i)}return this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),fadeDuration:this._fadeDuration}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||t)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),(this._sourcesDirty||this._repaint||this._styleDirty||this._placementDirty)&&this.triggerRepaint(),this},i.prototype.remove=function(){this._hash&&this._hash.remove();for(var t=0,n=this._controls;t<n.length;t+=1)n[t].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1));var r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),Or(this._canvasContainer),Or(this._controlContainer),Or(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this.fire(new e.Event("remove"))},i.prototype.triggerRepaint=function(){var t=this;this.style&&!this._frame&&(this._frame=e.browser.frame(function(){t._frame=null,t._render()}))},i.prototype._onWindowOnline=function(){this._update()},i.prototype._onWindowResize=function(){this._trackResize&&this.resize()._update()},o.showTileBoundaries.get=function(){return!!this._showTileBoundaries},o.showTileBoundaries.set=function(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())},o.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},o.showCollisionBoxes.set=function(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())},o.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},o.showOverdrawInspector.set=function(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())},o.repaint.get=function(){return!!this._repaint},o.repaint.set=function(e){this._repaint=e,this._update()},o.vertices.get=function(){return!!this._vertices},o.vertices.set=function(e){this._vertices=e,this._update()},Object.defineProperties(i.prototype,o),i}(Er);function Or(e){e.parentNode&&e.parentNode.removeChild(e)}var Ir={showCompass:!0,showZoom:!0},Rr=function(t){var r=this;this.options=e.extend({},Ir,t),this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(e){return e.preventDefault()}),this.options.showZoom&&(this._zoomInButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-in","Zoom in",function(){return r._map.zoomIn()}),this._zoomOutButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-out","Zoom out",function(){return r._map.zoomOut()})),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-compass","Reset bearing to north",function(){return r._map.resetNorth()}),this._compassArrow=n.create("span","mapboxgl-ctrl-compass-arrow",this._compass))};function jr(t,n,r){if(t=new e.LngLat(t.lng,t.lat),n){var i=new e.LngLat(t.lng-360,t.lat),o=new e.LngLat(t.lng+360,t.lat),a=r.locationPoint(t).distSqr(n);r.locationPoint(i).distSqr(n)<a?t=i:r.locationPoint(o).distSqr(n)<a&&(t=o)}for(;Math.abs(t.lng-r.center.lng)>180;){var s=r.locationPoint(t);if(s.x>=0&&s.y>=0&&s.x<=r.width&&s.y<=r.height)break;t.lng>r.center.lng?t.lng-=360:t.lng+=360}return t}Rr.prototype._rotateCompassArrow=function(){var e="rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=e},Rr.prototype.onAdd=function(e){return this._map=e,this.options.showCompass&&(this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new dr(e,{button:"left",element:this._compass}),n.addEventListener(this._compass,"mousedown",this._handler.onMouseDown),this._handler.enable()),this._container},Rr.prototype.onRemove=function(){n.remove(this._container),this.options.showCompass&&(this._map.off("rotate",this._rotateCompassArrow),n.removeEventListener(this._compass,"mousedown",this._handler.onMouseDown),this._handler.disable(),delete this._handler),delete this._map},Rr.prototype._createButton=function(e,t,r){var i=n.create("button",e,this._container);return i.type="button",i.title=t,i.setAttribute("aria-label",t),i.addEventListener("click",r),i};var Lr={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function zr(e,t,n){var r=e.classList;for(var i in Lr)r.remove("mapboxgl-"+n+"-anchor-"+i);r.add("mapboxgl-"+n+"-anchor-"+t)}var Dr,Br=function(t){function r(r){if(t.call(this),(arguments[0]instanceof e.window.HTMLElement||2===arguments.length)&&(r=e.extend({element:r},arguments[1])),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick"],this),this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._draggable=r&&r.draggable||!1,this._state="inactive",r&&r.element)this._element=r.element,this._offset=e.Point.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=n.create("div");var i=n.createNS("http://www.w3.org/2000/svg","svg");i.setAttributeNS(null,"height","41px"),i.setAttributeNS(null,"width","27px"),i.setAttributeNS(null,"viewBox","0 0 27 41");var o=n.createNS("http://www.w3.org/2000/svg","g");o.setAttributeNS(null,"stroke","none"),o.setAttributeNS(null,"stroke-width","1"),o.setAttributeNS(null,"fill","none"),o.setAttributeNS(null,"fill-rule","evenodd");var a=n.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"fill-rule","nonzero");var s=n.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"transform","translate(3.0, 29.0)"),s.setAttributeNS(null,"fill","#000000");for(var u=0,l=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];u<l.length;u+=1){var c=l[u],p=n.createNS("http://www.w3.org/2000/svg","ellipse");p.setAttributeNS(null,"opacity","0.04"),p.setAttributeNS(null,"cx","10.5"),p.setAttributeNS(null,"cy","5.80029008"),p.setAttributeNS(null,"rx",c.rx),p.setAttributeNS(null,"ry",c.ry),s.appendChild(p)}var h=n.createNS("http://www.w3.org/2000/svg","g");h.setAttributeNS(null,"fill",this._color);var f=n.createNS("http://www.w3.org/2000/svg","path");f.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),h.appendChild(f);var d=n.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"opacity","0.25"),d.setAttributeNS(null,"fill","#000000");var m=n.createNS("http://www.w3.org/2000/svg","path");m.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),d.appendChild(m);var _=n.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"transform","translate(6.0, 7.0)"),_.setAttributeNS(null,"fill","#FFFFFF");var y=n.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"transform","translate(8.0, 8.0)");var v=n.createNS("http://www.w3.org/2000/svg","circle");v.setAttributeNS(null,"fill","#000000"),v.setAttributeNS(null,"opacity","0.25"),v.setAttributeNS(null,"cx","5.5"),v.setAttributeNS(null,"cy","5.5"),v.setAttributeNS(null,"r","5.4999962");var g=n.createNS("http://www.w3.org/2000/svg","circle");g.setAttributeNS(null,"fill","#FFFFFF"),g.setAttributeNS(null,"cx","5.5"),g.setAttributeNS(null,"cy","5.5"),g.setAttributeNS(null,"r","5.4999962"),y.appendChild(v),y.appendChild(g),a.appendChild(s),a.appendChild(h),a.appendChild(d),a.appendChild(_),a.appendChild(y),i.appendChild(a),this._element.appendChild(i),this._offset=e.Point.convert(r&&r.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._popup=null}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.addTo=function(e){return this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},r.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),delete this._map),n.remove(this._element),this._popup&&this._popup.remove(),this},r.prototype.getLngLat=function(){return this._lngLat},r.prototype.setLngLat=function(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},r.prototype.getElement=function(){return this._element},r.prototype.setPopup=function(e){if(this._popup&&(this._popup.remove(),this._popup=null),e){if(!("offset"in e.options)){var t=Math.sqrt(Math.pow(13.5,2)/2);e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[t,-1*(24.6+t)],"bottom-right":[-t,-1*(24.6+t)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=e,this._lngLat&&this._popup.setLngLat(this._lngLat)}return this},r.prototype._onMapClick=function(e){var t=e.originalEvent.target,n=this._element;this._popup&&(t===n||n.contains(t))&&this.togglePopup()},r.prototype.getPopup=function(){return this._popup},r.prototype.togglePopup=function(){var e=this._popup;return e?(e.isOpen()?e.remove():e.addTo(this._map),this):this},r.prototype._update=function(e){this._map&&(this._map.transform.renderWorldCopies&&(this._lngLat=jr(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset),e&&"moveend"!==e.type||(this._pos=this._pos.round()),n.setTransform(this._element,Lr[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px)"),zr(this._element,this._anchor,"marker"))},r.prototype.getOffset=function(){return this._offset},r.prototype.setOffset=function(t){return this._offset=e.Point.convert(t),this._update(),this},r.prototype._onMove=function(t){this._pos=t.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag"))},r.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"},r.prototype._addDragHandler=function(e){this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},r.prototype.setDraggable=function(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},r.prototype.isDraggable=function(){return this._draggable},r}(e.Evented),Nr={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0},qr=function(t){function r(n){t.call(this),this.options=e.extend({},Nr,n),e.bindAll(["_onSuccess","_onError","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.onAdd=function(t){var r;return this._map=t,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),r=this._setupUI,void 0!==Dr?r(Dr):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:"geolocation"}).then(function(e){Dr="denied"!==e.state,r(Dr)}):(Dr=!!e.window.navigator.geolocation,r(Dr)),this._container},r.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),n.remove(this._container),this._map=void 0},r.prototype._onSuccess=function(t){if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",t)),this._finish()},r.prototype._updateCamera=function(t){var n=new e.LngLat(t.coords.longitude,t.coords.latitude),r=t.coords.accuracy;this._map.fitBounds(n.toBounds(r),this.options.fitBoundsOptions,{geolocateSource:!0})},r.prototype._updateMarker=function(e){e?this._userLocationDotMarker.setLngLat([e.coords.longitude,e.coords.latitude]).addTo(this._map):this._userLocationDotMarker.remove()},r.prototype._onError=function(t){if(this.options.trackUserLocation)if(1===t.code)this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),void 0!==this._geolocationWatchID&&this._clearWatch();else switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",t)),this._finish()},r.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},r.prototype._setupUI=function(t){var r=this;!1!==t?(this._container.addEventListener("contextmenu",function(e){return e.preventDefault()}),this._geolocateButton=n.create("button","mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.setAttribute("aria-label","Geolocate"),this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=n.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Br(this._dotElement),this.options.trackUserLocation&&(this._watchState="OFF")),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(t){t.geolocateSource||"ACTIVE_LOCK"!==r._watchState||(r._watchState="BACKGROUND",r._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),r._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),r.fire(new e.Event("trackuserlocationend")))})):e.warnOnce("Geolocation support is not available, the GeolocateControl will not be visible.")},r.prototype.trigger=function(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}"OFF"===this._watchState&&void 0!==this._geolocationWatchID?this._clearWatch():void 0===this._geolocationWatchID&&(this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._geolocationWatchID=e.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,this.options.positionOptions))}else e.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},r.prototype._clearWatch=function(){e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},r}(e.Evented),Fr={maxWidth:100,unit:"metric"},Ur=function(t){this.options=e.extend({},Fr,t),e.bindAll(["_onMove","setUnit"],this)};function Vr(e,t,n){var r,i,o,a,s,u,l=n&&n.maxWidth||100,c=e._container.clientHeight/2,p=(r=e.unproject([0,c]),i=e.unproject([l,c]),o=Math.PI/180,a=r.lat*o,s=i.lat*o,u=Math.sin(a)*Math.sin(s)+Math.cos(a)*Math.cos(s)*Math.cos((i.lng-r.lng)*o),6371e3*Math.acos(Math.min(u,1)));if(n&&"imperial"===n.unit){var h=3.2808*p;h>5280?Wr(t,l,h/5280,"mi"):Wr(t,l,h,"ft")}else n&&"nautical"===n.unit?Wr(t,l,p/1852,"nm"):Wr(t,l,p,"m")}function Wr(e,t,n,r){var i,o,a,s=(i=n,(o=Math.pow(10,(""+Math.floor(i)).length-1))*(a=(a=i/o)>=10?10:a>=5?5:a>=3?3:a>=2?2:a>=1?1:function(e){var t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(a))),u=s/n;"m"===r&&s>=1e3&&(s/=1e3,r="km"),e.style.width=t*u+"px",e.innerHTML=s+r}Ur.prototype.getDefaultPosition=function(){return"bottom-left"},Ur.prototype._onMove=function(){Vr(this._map,this._container,this.options)},Ur.prototype.onAdd=function(e){return this._map=e,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Ur.prototype.onRemove=function(){n.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Ur.prototype.setUnit=function(e){this.options.unit=e,Vr(this._map,this._container,this.options)};var Gr=function(){this._fullscreen=!1,e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in e.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in e.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in e.window.document&&(this._fullscreenchange="MSFullscreenChange"),this._className="mapboxgl-ctrl"};Gr.prototype.onAdd=function(t){return this._map=t,this._mapContainer=this._map.getContainer(),this._container=n.create("div",this._className+" mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._container.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._container},Gr.prototype.onRemove=function(){n.remove(this._container),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Gr.prototype._checkFullscreenSupport=function(){return!!(e.window.document.fullscreenEnabled||e.window.document.mozFullScreenEnabled||e.window.document.msFullscreenEnabled||e.window.document.webkitFullscreenEnabled)},Gr.prototype._setupUI=function(){var t=this._fullscreenButton=n.create("button",this._className+"-icon "+this._className+"-fullscreen",this._container);t.setAttribute("aria-label","Toggle fullscreen"),t.type="button",this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Gr.prototype._isFullscreen=function(){return this._fullscreen},Gr.prototype._changeIcon=function(){(e.window.document.fullscreenElement||e.window.document.mozFullScreenElement||e.window.document.webkitFullscreenElement||e.window.document.msFullscreenElement)===this._mapContainer!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle(this._className+"-shrink"),this._fullscreenButton.classList.toggle(this._className+"-fullscreen"))},Gr.prototype._onClickFullscreen=function(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.mozCancelFullScreen?e.window.document.mozCancelFullScreen():e.window.document.msExitFullscreen?e.window.document.msExitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._mapContainer.requestFullscreen?this._mapContainer.requestFullscreen():this._mapContainer.mozRequestFullScreen?this._mapContainer.mozRequestFullScreen():this._mapContainer.msRequestFullscreen?this._mapContainer.msRequestFullscreen():this._mapContainer.webkitRequestFullscreen&&this._mapContainer.webkitRequestFullscreen()};var Zr={closeButton:!0,closeOnClick:!0,className:""},Hr=function(t){function r(n){t.call(this),this.options=e.extend(Object.create(Zr),n),e.bindAll(["_update","_onClickClose"],this)}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.addTo=function(t){return this._map=t,this._map.on("move",this._update),this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._update(),this.fire(new e.Event("open")),this},r.prototype.isOpen=function(){return!!this._map},r.prototype.remove=function(){return this._content&&n.remove(this._content),this._container&&(n.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),delete this._map),this.fire(new e.Event("close")),this},r.prototype.getLngLat=function(){return this._lngLat},r.prototype.setLngLat=function(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._update(),this},r.prototype.setText=function(t){return this.setDOMContent(e.window.document.createTextNode(t))},r.prototype.setHTML=function(t){var n,r=e.window.document.createDocumentFragment(),i=e.window.document.createElement("body");for(i.innerHTML=t;n=i.firstChild;)r.appendChild(n);return this.setDOMContent(r)},r.prototype.setDOMContent=function(e){return this._createContent(),this._content.appendChild(e),this._update(),this},r.prototype._createContent=function(){this._content&&n.remove(this._content),this._content=n.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=n.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},r.prototype._update=function(){var t=this;if(this._map&&this._lngLat&&this._content){this._container||(this._container=n.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=n.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(e){return t._container.classList.add(e)})),this._map.transform.renderWorldCopies&&(this._lngLat=jr(this._lngLat,this._pos,this._map.transform));var r=this._pos=this._map.project(this._lngLat),i=this.options.anchor,o=function t(n){if(n){if("number"==typeof n){var r=Math.round(Math.sqrt(.5*Math.pow(n,2)));return{center:new e.Point(0,0),top:new e.Point(0,n),"top-left":new e.Point(r,r),"top-right":new e.Point(-r,r),bottom:new e.Point(0,-n),"bottom-left":new e.Point(r,-r),"bottom-right":new e.Point(-r,-r),left:new e.Point(n,0),right:new e.Point(-n,0)}}if(n instanceof e.Point||Array.isArray(n)){var i=e.Point.convert(n);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:e.Point.convert(n.center||[0,0]),top:e.Point.convert(n.top||[0,0]),"top-left":e.Point.convert(n["top-left"]||[0,0]),"top-right":e.Point.convert(n["top-right"]||[0,0]),bottom:e.Point.convert(n.bottom||[0,0]),"bottom-left":e.Point.convert(n["bottom-left"]||[0,0]),"bottom-right":e.Point.convert(n["bottom-right"]||[0,0]),left:e.Point.convert(n.left||[0,0]),right:e.Point.convert(n.right||[0,0])}}return t(new e.Point(0,0))}(this.options.offset);if(!i){var a,s=this._container.offsetWidth,u=this._container.offsetHeight;a=r.y+o.bottom.y<u?["top"]:r.y>this._map.transform.height-u?["bottom"]:[],r.x<s/2?a.push("left"):r.x>this._map.transform.width-s/2&&a.push("right"),i=0===a.length?"bottom":a.join("-")}var l=r.add(o[i]).round();n.setTransform(this._container,Lr[i]+" translate("+l.x+"px,"+l.y+"px)"),zr(this._container,i,"popup")}},r.prototype._onClickClose=function(){this.remove()},r}(e.Evented),Kr={version:e.version,supported:t,setRTLTextPlugin:e.setRTLTextPlugin,Map:Sr,NavigationControl:Rr,GeolocateControl:qr,AttributionControl:Tr,ScaleControl:Ur,FullscreenControl:Gr,Popup:Hr,Marker:Br,Style:It,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,Evented:e.Evented,config:e.config,get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(t){e.config.ACCESS_TOKEN=t},get workerCount(){return Oe.workerCount},set workerCount(e){Oe.workerCount=e},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(t){e.config.MAX_PARALLEL_IMAGE_REQUESTS=t},workerUrl:""};return Kr}),n}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),a=p(o),s=n(2),u=p(n(72)),l=p(n(73)),c=p(n(74));function p(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=r({},e),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),i(t,[{key:"render",value:function(){return a.default.createElement("header",{className:"as-toolbar"},a.default.createElement(u.default,null),a.default.createElement("div",{className:"as-toolbar__group"},a.default.createElement("div",{className:"as-toolbar__item"},a.default.createElement(c.default,{size:"l",alt:"Isthmus",icon:"https://blobscdn.gitbook.com/v0/b/gitbook-28427.appspot.com/o/spaces%2F-LNBHPmcyIcNeWf3W50m%2Favatar.png?generation=1537815172519034&alt=media"})),a.default.createElement("nav",{className:"as-toolbar__actions"},a.default.createElement("ul",null,a.default.createElement(l.default,{name:"Home",link:"/"}),a.default.createElement(l.default,{name:"Another Map",link:"/page"}),a.default.createElement(l.default,{name:"Help",link:"/help"})))),a.default.createElement("div",{className:"as-toolbar__item as-body"},a.default.createElement("i",{className:"as-icon-settings as-subheader as-m--0"})))}}]),t}();t.default=(0,s.connect)(function(e){return{client:e.client,map:e.map,layers:e.layers,viewport:e.viewport,boundingbox:e.boundingbox}},function(e){return{setNeighbourhoods:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(t){return e(setNeighbourhoods(t))})}})(h)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),s=(r=a)&&r.__esModule?r:{default:r},u=n(2);var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=i({},e),n.toggleDrawer=n.toggleDrawer.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),o(t,[{key:"toggleDrawer",value:function(){document.querySelector(".as-toolbar__actions").classList.toggle("as-toolbar__actions--visible")}},{key:"render",value:function(){return s.default.createElement("button",{onClick:this.toggleDrawer,className:"as-toolbar__item as-toolbar__toggle"},s.default.createElement("i",{className:"as-icon-hamburguer as-title as-m--0"}))}}]),t}();t.default=(0,u.connect)(function(e){return{client:e.client,map:e.map,filters:e.filters,layers:e.layers,viewport:e.viewport,boundingbox:e.boundingbox}},function(e){return{setNeighbourhoods:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(t){return e(setNeighbourhoods(t))})}})(l)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),s=(r=a)&&r.__esModule?r:{default:r},u=(n(5),n(2));n(120);var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=i({},e),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.link,n=e.name;return s.default.createElement("li",{className:"as-toolbar__item"},s.default.createElement("a",{href:t},n))}}]),t}();t.default=(0,u.connect)(function(e){return{client:e.client,map:e.map,filters:e.filters,layers:e.layers,viewport:e.viewport,boundingbox:e.boundingbox}},function(e){return{}})(l)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=n(1),a=(r=o)&&r.__esModule?r:{default:r};n(120);t.default=function(e){var t=e.size,n=e.icon,r=e.alt,s=(0,o.useState)(null),u=i(s,2),l=(u[0],void u[1]);return l="l"===t||"xl"===t?"as-avatar as-avatar--"+t:"as-avatar",a.default.createElement("img",{className:l,src:n,alt:r})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),a=m(o),s=(n(5),n(2)),u=n(9),l=m(n(6)),c=m(n(76)),p=(m(n(77)),m(n(78))),h=m(n(18)),f=m(n(79)),d=m(n(80));function m(e){return e&&e.__esModule?e:{default:e}}n(120);var _=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={size:null},n.state=r({},e),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),i(t,[{key:"componentDidMount",value:function(){var e="as-sidebar as-sidebar--"+this.props.size+" as-sidebar--right "+this.props.background;this.setState({size:e})}},{key:"render",value:function(){return a.default.createElement("aside",{className:this.state.size,"data-name":this.props.name},a.default.createElement("div",{className:"as-m--24"},a.default.createElement(f.default,{before:"",after:"F",title:"Temperature",description:"Temperature at the time of the accident",layer:this.props.layers.railaccidents.source,column:"temp",step:1})),a.default.createElement("div",{className:"as-p--16"},a.default.createElement(h.default,{title:"Total Damage",description:"Average total damage in USD for accidents in view",round:!0,currency:!0,locale:"en-US",currencyType:"USD",layer:this.props.layers.railaccidents.source,column:"total_damage",operation:l.default.operation.AVG})),a.default.createElement("div",{className:"as-p--16"},a.default.createElement(d.default,{layer:this.props.layers.railaccidents.source,format:"csv",filename:"rail_data",name:"Export Data"})),a.default.createElement(c.default,{title:"State",description:"Total damage for each railroad company in USD",categoryLayer:this.props.layers.railaccidents.source,column:"state",operation:l.default.operation.SUM,operationColumn:"equipment_damage"}),a.default.createElement("div",{className:"as-p--16"},a.default.createElement(p.default,{title:"Hour",description:"Hour at the time of the accident",layer:this.props.layers.railaccidents.source,column:"hour",bins:12})))}}]),t}();t.default=(0,s.connect)(function(e){return{client:e.client,map:e.map,layers:e.layers,viewport:e.viewport,boundingbox:e.boundingbox}},function(e){return{setNeighbourhoods:function(t){return e((0,u.setNeighbourhoods)(t))}}})(_)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),o=u(i),a=n(2),s=(u(n(0)),u(n(6)));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={categories:[],selection:[],filter:null},r.onSelectedChanged=function(e){var t=e.detail,n=r.state.filter;n&&!t.length&&(r.props.categoryLayer.removeFilter(n),n=null),r.setState({selection:t,filter:n})},r.onApplySelection=function(){var e=r.state,t=e.filter;e.selection.length>0&&!t?r._createFilter():r._updateFilter()},l(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),r(t,[{key:"componentDidMount",value:function(){this._setupConfig(),this._setupEvents(),this._addDataview()}},{key:"componentDidUpdate",value:function(e){this._setupConfig();new s.default.filter.BoundingBoxLeaflet(this.props.map);e!==this.props&&this.dataView.addFilter(this.props.boundingbox)}},{key:"_setupConfig",value:function(){var e=this.props,t=e.showHeader,n=e.showClearButton,r=e.useTotalPercentage,i=e.visibleCategories,o=this.state.categories;this.widget.showHeader=t,this.widget.showClearButton=n,this.widget.useTotalPercentage=r,this.widget.visibleCategories=i,this.widget.categories=o}},{key:"_addDataview",value:function(){var e=this;this.dataView=new s.default.dataview.Category(this.props.categoryLayer,this.props.column,{limit:10,operation:this.props.operation,operationColumn:this.props.operationColumn}),this.dataView.on("dataChanged",function(t){var n=t.categories;return e.setState({categories:n})}),this.props.client.addDataview(this.dataView)}},{key:"_createFilter",value:function(){var e=new s.default.filter.Category(this.props.column,{in:this.state.selection});this.props.categoryLayer.addFilter(e),this.setState({filter:e})}},{key:"_updateFilter",value:function(){this.filter.setFilters({in:this.state.selection})}},{key:"_onSelectedChanged",value:function(e){var t=this.onSelectedChanged;t&&t(e)}},{key:"_setupEvents",value:function(){var e=this;this.widget.addEventListener("categoriesSelected",function(t){return e._onSelectedChanged(t)})}},{key:"render",value:function(){var e=this,t=this.props,n=t.title,r=t.description,i=this.state,a=i.categories,s=i.filter,u=i.selection.length>0&&!s;return o.default.createElement("div",{className:"as-p--16"},o.default.createElement("as-category-widget",{ref:function(t){e.widget=t},heading:n,description:r,categories:a,onSelectedChanged:this.onSelectedChanged,showClearButton:!!s}),u&&o.default.createElement("div",{className:"as-flex as-justify-end as-mt--8"},o.default.createElement("button",{className:"as-btn as-btn--s as-btn--primary",onClick:this.onApplySelection},"Apply selection")))}}]),t}();c.defaultProps={showHeader:!0,showClearButton:!0,useTotalPercentage:!1,visibleCategories:1/0};t.default=(0,a.connect)(function(e){return{client:e.client,map:e.map,filters:e.filters,layers:e.layers,viewport:e.viewport,boundingbox:e.boundingbox}},function(e){return{setNeighbourhoods:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(t){return e(setNeighbourhoods(t))})}})(c)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),o=s(i),a=n(2);s(n(0)),s(n(33));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n(120);var l=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={categories:[],selection:[],data:[],filter:null,originalStyle:null},u(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),r(t,[{key:"componentDidMount",value:function(){this._setupConfig(),this.setupUpdate(this.onCategoriesChanged)}},{key:"_setupConfig",value:function(){this.props.layers.railaccidents.layer;var e=this.props,t=e.showHeader,n=e.showClearButton,r=e.useTotalPercentage,i=e.visibleCategories,o=this.state.categories;this.widget.showHeader=t,this.widget.showClearButton=n,this.widget.useTotalPercentage=r,this.widget.visibleCategories=i,this.widget.categories=o}},{key:"componentDidUpdate",value:function(e){e!==this.props&&(this.setupUpdate(this.onCategoriesChanged),this.handleCategoriesSelected())}},{key:"setupUpdate",value:function(e){var t=this,n=this.props.layers.railaccidents.layer;if(n.viz){var r=n.viz.color;this.setState({originalStyle:r}),console.log(this.state.originalStyle)}n.on("updated",function(){var r=n.viz.variables.categories.value;e&&t.onCategoriesChanged(r)})}},{key:"onCategoriesChanged",value:function(e){var t=e.map(function(e){return{name:e.x,value:e.y}});this.setState({categories:t}),this.widget.categories=this.state.categories}},{key:"handleCategoriesSelected",value:function(){var e=this;this.widget.addEventListener("categoriesSelected",function(t){e.updateFilter(t.detail)})}},{key:"updateFilter",value:function(e){if(e.length>0){var t=e.map(function(e){return"'"+e+"'"});e="$railroad in ["+t.join(",")+"]"}else e="";this.applyFilter(e)}},{key:"applyFilter",value:function(e){var t=this.props.layers.railaccidents,n=(t.viz,t.style,t.layer),r=(t.source,"ramp(viewportQuantiles($total_damage, 7), sunsetdark)"),i="opacity("+r+", 1)",o="opacity(#191970, 1)";e&&(i="opacity("+r+", "+e+" * 1)",o="opacity(#191970, "+e+" * 1)",console.log(i)),e||(i=r,o="#191970"),n.viz.color.blendTo(i),n.viz.strokeColor.blendTo(o)}},{key:"render",value:function(){var e=this,t=this.props,n=t.title,r=t.description,i=this.state,a=i.categories,s=i.filter,u=i.selection.length>0&&!s;return o.default.createElement("div",{className:"as-p--16"},o.default.createElement("as-category-widget",{ref:function(t){e.widget=t},heading:n,description:r,categories:a,visibleCategories:10,onSelectedChanged:this.handleCategoriesSelected,showClearButton:!!s}),u&&o.default.createElement("div",{className:"as-flex as-justify-end as-mt--8"},o.default.createElement("button",{className:"as-btn as-btn--s as-btn--primary",onClick:this.onApplySelection},"Apply selection")))}}]),t}();l.defaultProps={showHeader:!0,showClearButton:!0,useTotalPercentage:!1,visibleCategories:10};t.default=(0,a.connect)(function(e){return{client:e.client,map:e.map,filters:e.filters,layers:e.layers,viewport:e.viewport,boundingbox:e.boundingbox}},function(e){return{setNeighbourhoods:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(t){return e(setNeighbourhoods(t))})}})(l)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),o=u(i),a=n(2),s=(u(n(0)),u(n(6)));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={data:[],range:null,filter:null},r.onSelectedChanged=function(e){var t=e.detail,n=r.state.filter;t||(r.props.layer.removeFilter(n),n=null,r.setState({filter:n}))},l(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),r(t,[{key:"componentDidMount",value:function(){this.setupConfig(),this.setupEvents(),this.addDataview()}},{key:"componentDidUpdate",value:function(e){this.setupConfig();new s.default.filter.BoundingBoxLeaflet(this.props.map);e!==this.props&&this.dataView.addFilter(this.props.boundingbox)}},{key:"setupConfig",value:function(){var e=this.state.data;this.widget.data=e}},{key:"addDataview",value:function(){var e=this;this.dataView=new s.default.dataview.Histogram(this.props.layer,this.props.column,{bins:this.props.bins}),this.dataView.on("dataChanged",function(t){var n=t.bins.map(function(e){return{start:e.start,end:e.end,value:e.freq}});e.setState({data:n})}),this.props.client.addDataview(this.dataView)}},{key:"createFilter",value:function(){var e=this.state.range,t=e[0],n=e[1],r=new s.default.filter.Range(this.props.column,{between:{min:t,max:n}});this.props.layer.addFilter(r),this.setState({filter:r})}},{key:"updateFilter",value:function(){var e=this.state,t=e.range,n=e.filter,r=t[0],i=t[1];n.setFilters({between:{min:r,max:i}}),console.log(this.state.filter)}},{key:"onApplySelection",value:function(){this.props.layer._appliedFilters._filters;var e=this.state,t=e.filter;e.range;t?this.updateFilter():this.createFilter()}},{key:"completeUpdateRangeFilter",value:function(e){var t=this.onSelectedChanged,n=this.state.data;t&&t(e),e.detail&&this.widget.data===n&&e.detail.selection===this.state.range&&(console.log("DATA VALUE",n===this.widget.data),console.log("RANGE VALUE",e.detail.selection===this.state.range),this.onApplySelection())}},{key:"setupEvents",value:function(){var e=this,t=this.state;t.range,t.filter;this.widget.addEventListener("selectionChanged",function(t){t.detail?e.setState({range:t.detail.selection}):e.setState({range:null}),e.completeUpdateRangeFilter(t)})}},{key:"render",value:function(){var e=this,t=this.state.data,n=this.props,r=n.title,i=n.description;return o.default.createElement("as-histogram-widget",{ref:function(t){e.widget=t},heading:r,description:i,data:t,"show-header":!0,"show-clear":!0})}}]),t}();c.defaultProps={};t.default=(0,a.connect)(function(e){return{client:e.client,map:e.map,filters:e.filters,layers:e.layers,viewport:e.viewport,boundingbox:e.boundingbox}},function(e){return{setNeighbourhoods:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(t){return e(setNeighbourhoods(t))})}})(c)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),o=u(i),a=n(2),s=(u(n(0)),u(n(6)));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={data:null,min:0,max:0,rangeMin:0,rangeMax:0,range:[0,0],filter:null},l(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),r(t,[{key:"componentDidMount",value:function(){this.setupEvents(),this.addDataview()}},{key:"componentDidUpdate",value:function(e){this.state.filter;this.setupRange()}},{key:"setupRange",value:function(){var e=this.state,t=e.rangeMin,n=e.rangeMax;this.widget.range=[t,n]}},{key:"addDataview",value:function(){var e=this;this.dataViewMin=new s.default.dataview.Formula(this.props.layer,this.props.column,{operation:s.default.operation.MIN}),this.dataViewMax=new s.default.dataview.Formula(this.props.layer,this.props.column,{operation:s.default.operation.MAX}),this.dataViewMin.on("dataChanged",function(t){var n;n=t.result,e.setState({min:n}),e.setState({rangeMin:n})}),this.dataViewMax.on("dataChanged",function(t){var n;n=t.result,e.setState({max:n}),e.setState({rangeMax:n})}),this.props.client.addDataview(this.dataViewMin),this.props.client.addDataview(this.dataViewMax)}},{key:"createFilter",value:function(){var e=this.state,t=e.rangeMin,n=e.rangeMax,r=new s.default.filter.Range(this.props.column,{gte:t,lte:n});this.props.layers.railaccidents.source.addFilter(r),this.setState({filter:r})}},{key:"updateFilter",value:function(){var e=this.state,t=e.filter,n=e.data,r=n[0],i=n[1];t.setFilters({gte:r,lte:i})}},{key:"onApplySelection",value:function(){this.state.filter?this.updateFilter():this.createFilter()}},{key:"setupEvents",value:function(){var e=this,t=this.props,n=t.before,r=t.after;this.widget.formatValue=function(e){return""+n+e+r},this.widget.addEventListener("changeEnd",function(t){e.setState({data:t.detail}),e.setState({rangeMin:t.detail[0]}),e.setState({rangeMax:t.detail[1]}),e.onApplySelection()})}},{key:"render",value:function(){var e=this,t=(this.state.data,this.props),n=t.title,r=t.description;return o.default.createElement("div",null,o.default.createElement("h4",{className:"as-subheader as-font--medium"},n),o.default.createElement("p",{className:"as-body"},r),o.default.createElement("as-range-slider",{ref:function(t){e.widget=t},"min-value":this.state.min,step:this.props.step,draggable:!0,"max-value":this.state.max}))}}]),t}();t.default=(0,a.connect)(function(e){return{client:e.client,map:e.map,filters:e.filters,layers:e.layers,viewport:e.viewport,boundingbox:e.boundingbox}},function(e){return{setNeighbourhoods:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(t){return e(setNeighbourhoods(t))})}})(c)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),a=l(o),s=n(2),u=(l(n(0)),l(n(6)),l(n(11)));function l(e){return e&&e.__esModule?e:{default:e}}var c=u.default.SQL_API_URL,p=u.default.API_KEY,h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=r({},e),n.exportData=n.exportData.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),i(t,[{key:"exportData",value:function(){var e=this.props.layer._getQueryToApply();console.log(e);var t=c+"q="+e+"&format="+this.props.format+"&filename="+this.props.filename+"."+this.props.format+"&api_key="+p;console.log(t),window.open(t)}},{key:"render",value:function(){return a.default.createElement("button",{className:"as-btn as-btn--secondary",onClick:this.exportData},a.default.createElement("i",{"aria-hidden":!0,className:"as-icon as-icon-arrow-down"}),a.default.createElement("p",null,this.props.name))}}]),t}();t.default=(0,s.connect)(function(e){return{client:e.client,map:e.map,filters:e.filters,layers:e.layers,viewport:e.viewport,boundingbox:e.boundingbox}},function(e){return{setNeighbourhoods:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(t){return e(setNeighbourhoods(t))})}})(h)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),a=b(o),s=(n(5),n(2)),u=n(9),l=b(n(6)),c=b(n(82)),p=b(n(83)),h=b(n(84)),f=b(n(85)),d=b(n(86)),m=b(n(87)),_=b(n(105)),y=b(n(18)),v=b(n(106)),g=b(n(107));n(120);b(n(17));function b(e){return e&&e.__esModule?e:{default:e}}var x=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={size:null},n.state=r({},e),n.moveMap=n.moveMap.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),i(t,[{key:"moveMap",value:function(){this.props.map.flyTo([39.8283459,-98.5794797],4)}},{key:"render",value:function(){var e="as-sidebar as-sidebar--"+this.props.size+" as-sidebar--left "+this.props.background;return a.default.createElement("aside",{className:e,"data-name":this.props.name},a.default.createElement("div",{className:"as-m--24"},a.default.createElement(m.default,{title:"Import Data Layer",description:"Import data to add to the map",page:"/",cartocss:"#layer {\n        marker-width: 15;\n        marker-fill: #EE4D5A;\n        marker-fill-opacity: 0.9;\n        marker-line-color: #FFFFFF;\n        marker-line-width: 1;\n        marker-line-opacity: 1;\n        marker-placement: point;\n        marker-type: ellipse;\n        marker-allow-overlap: true;\n      }",sql:"SELECT * from a WHERE railroad = 'UP'",back:!0}),a.default.createElement(_.default,null),a.default.createElement(p.default,{name:"CARTO Website",link:"https://carto.com",type:"primary",size:""}),a.default.createElement(d.default,{name:"Input Button",type:"primary",size:"l"}),a.default.createElement(h.default,{color:"green",name:"Badge Component",text:"as-color--type-02"}),a.default.createElement(f.default,{color:"success",name:"Icon Badge Component",text:"as-color--type-04",icon:"as-icon-info"}),a.default.createElement(c.default,{name:"Center Map",action:this.moveMap,type:"secondary",size:""}),a.default.createElement("div",{className:"as-p--16"},a.default.createElement(y.default,{title:"Employees Injured",description:"Total number of employee injuries",round:!0,currency:!1,locale:"en-US",currencyType:"USD",layer:this.props.layers.railaccidents.source,column:"rr_employees_injured",operation:l.default.operation.SUM})),a.default.createElement(v.default,{title:"Accident Description",description:"Search text in the accident description field",id:"search",layer:this.props.layers.railaccidents.source,placeholder:"Search...",column:"narrative"}),a.default.createElement(g.default,{id:"input",placeholder:"Text Input"})))}}]),t}();t.default=(0,s.connect)(function(e){return{client:e.client,map:e.map,layers:e.layers,viewport:e.viewport,boundingbox:e.boundingbox}},function(e){return{setNeighbourhoods:function(t){return e((0,u.setNeighbourhoods)(t))}}})(x)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),a=u(o),s=(n(5),n(2));u(n(10));function u(e){return e&&e.__esModule?e:{default:e}}n(120);var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={button:null},n.state=r({},e),n.myFunction=n.myFunction.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),i(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.type,n=e.size,r="as-btn "+("primary"===t?"as-btn--primary":"secondary"===t?"as-btn--secondary":"")+" "+("large"===n?"as-btn--l":"small"===n?"as-btn--s":"");this.setState({button:r})}},{key:"myFunction",value:function(){this.props.action()}},{key:"render",value:function(){return a.default.createElement("div",{className:"as-p--16"},a.default.createElement("button",{className:this.state.button,onClick:this.myFunction},a.default.createElement("p",null,this.props.name)))}}]),t}();t.default=(0,s.connect)(function(e){return{client:e.client,map:e.map,filters:e.filters,layers:e.layers,viewport:e.viewport,boundingbox:e.boundingbox}},function(e){return{setNeighbourhoods:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(t){return e(setNeighbourhoods(t))})}})(l)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),a=u(o),s=(n(5),n(2));u(n(10));function u(e){return e&&e.__esModule?e:{default:e}}n(120);var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={button:null},n.state=r({},e),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),i(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.type,n=e.size,r="as-btn "+("primary"===t?"as-btn--primary":"secondary"===t?"as-btn--secondary":"")+" "+("large"===n?"as-btn--l":"small"===n?"as-btn--s":"");this.setState({button:r})}},{key:"render",value:function(){return a.default.createElement("div",{className:"as-p--16"},a.default.createElement("a",{href:this.props.link,target:"_blank",className:this.state.button},this.props.name))}}]),t}();t.default=(0,s.connect)(function(e){return{client:e.client,map:e.map,filters:e.filters,layers:e.layers,viewport:e.viewport,boundingbox:e.boundingbox}},function(e){return{setNeighbourhoods:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(t){return e(setNeighbourhoods(t))})}})(l)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),a=u(o),s=(n(5),n(2));u(n(10));function u(e){return e&&e.__esModule?e:{default:e}}n(120);var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=r({},e),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),i(t,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.text,r="as-badge as-bg--badge-"+e.color+" "+n;return a.default.createElement("div",{className:"as-p--8"},a.default.createElement("span",{className:r},t))}}]),t}();t.default=(0,s.connect)(function(e){return{client:e.client,map:e.map,filters:e.filters,layers:e.layers,viewport:e.viewport,boundingbox:e.boundingbox}},function(e){return{setNeighbourhoods:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(t){return e(setNeighbourhoods(t))})}})(l)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),a=u(o),s=(n(5),n(2));u(n(10));function u(e){return e&&e.__esModule?e:{default:e}}n(120);var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=r({},e),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),i(t,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.text,r=e.color,i=e.icon,o="as-badge as-bg--badge-"+r+" "+n;return a.default.createElement("div",{className:"as-p--8"},a.default.createElement("span",{className:o},a.default.createElement("i",{className:i}),a.default.createElement("p",null,t)))}}]),t}();t.default=(0,s.connect)(function(e){return{client:e.client,map:e.map,filters:e.filters,layers:e.layers,viewport:e.viewport,boundingbox:e.boundingbox}},function(e){return{setNeighbourhoods:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(t){return e(setNeighbourhoods(t))})}})(l)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),a=u(o),s=(n(5),n(2));u(n(10));function u(e){return e&&e.__esModule?e:{default:e}}n(120);var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={button:null},n.state=r({},e),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),i(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.type,n=e.size,r="as-btn "+("primary"===t?"as-btn--primary":"secondary"===t?"as-btn--secondary":"")+" "+("large"===n?"as-btn--l":"small"===n?"as-btn--s":"");this.setState({button:r})}},{key:"render",value:function(){return a.default.createElement("div",{className:"as-p--16"},a.default.createElement("input",{type:"button",value:this.props.name,className:this.state.button}))}}]),t}();t.default=(0,s.connect)(function(e){return{client:e.client,map:e.map,filters:e.filters,layers:e.layers,viewport:e.viewport,boundingbox:e.boundingbox}},function(e){return{setNeighbourhoods:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(t){return e(setNeighbourhoods(t))})}})(l)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),a=h(o),s=(n(5),n(2)),u=(h(n(10)),n(9));n(120);var l=h(n(34)),c=h(n(11)),p=h(n(6));function h(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}c.default.IMPORT_API_URL;var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={selectedFile:"",fileName:null,running:!1,status:null,table:null,error:null,hidden:!0},n.onChange=function(e){switch(e.target.name){case"selectedFile":n.setState({selectedFile:e.target.files[0]}),n.setState({fileName:e.target.files[0].name});break;default:n.setState(f({},e.target.name,e.target.value))}},n.onSubmit=function(e){e.preventDefault(),n.setState({running:!0});var t=n.state,r=t.description,i=t.selectedFile,o=new FormData;o.append("description",r),o.append("selectedFile",i),l.default.post(n.props.page,o).then(function(e){n.setState({status:e.data.success}),n.setState({table:e.data.table}),n.setState({error:null}),n.setState({running:!1});var t=void 0;t=!1!==n.props.sql?"WITH a AS (SELECT * FROM "+e.data.table+") "+n.props.sql:"SELECT * FROM "+e.data.table;var r=new p.default.source.SQL(t),i=new p.default.style.CartoCSS(n.props.cartocss),o=new p.default.layer.Layer(r,i);n.props.client.addLayer(o),n.props.client.getLeafletLayer().addTo(n.props.map),!0===n.props.back&&o.bringToBack();var a=n.props.cartocss,s=n.state.table,u=f({},s,{cartocss:a,layer:o,name:s,query:t,source:r,style:i,visible:!0});console.log(u),n.props.addLayer(u)}).catch(function(e){n.setState({status:!1}),n.setState({table:null}),n.setState({error:e.message})})},n.state=r({},e),n.toggleHidden=n.toggleHidden.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),i(t,[{key:"toggleHidden",value:function(){this.setState({hidden:!this.state.hidden}),this.setState({status:null})}},{key:"render",value:function(){var e=this.state,t=(e.selectedFile,e.table),n=e.error,r=(e.hidden,e.fileName),i=e.running,o=this.state.status,s=this.props,u=s.title,l=s.description,c=void 0;return!0===o?c=a.default.createElement("div",{className:"as-p--16"},a.default.createElement("div",{className:"as-flag"},a.default.createElement("div",{className:"as-flag__icon"},a.default.createElement("i",{style:{color:"#80B622"},className:"as-icon-alert-fill"})),a.default.createElement("div",{className:"as-flag__content"},a.default.createElement("h4",{className:"as-body as-color--type-01"},"Import successful"),a.default.createElement("p",{className:"as-body as-color--type-03"},"Your table ",t," was imported successfully!")),a.default.createElement("div",{className:"as-flag__icon"},a.default.createElement("button",{className:"as-flag__button",onClick:this.toggleHidden},a.default.createElement("i",{style:{color:"#1785FB"},className:"as-icon as-icon-close"}))))):!1===o?c=a.default.createElement("div",{className:"as-p--16"},a.default.createElement("div",{className:"as-flag"},a.default.createElement("div",{className:"as-flag__icon"},a.default.createElement("i",{style:{color:"#F3522B"},class:"as-icon as-icon-alert-fill"})),a.default.createElement("div",{className:"as-flag__content"},a.default.createElement("h4",{className:"as-body as-color--type-01"},"Error on import"),a.default.createElement("p",{className:"as-body as-color--type-03"},"There was an error with your import!"),a.default.createElement("p",{className:"as-body as-color--type-03"},n)),a.default.createElement("div",{className:"as-flag__icon"},a.default.createElement("button",{className:"as-flag__button",onClick:this.toggleHidden},a.default.createElement("i",{style:{color:"#1785FB"},className:"as-icon as-icon-close"}))))):null===o&&(c=null),a.default.createElement("div",null,a.default.createElement("form",{onSubmit:this.onSubmit},a.default.createElement("div",{className:"as-p--8"},a.default.createElement("div",{className:"as-p--8"},a.default.createElement("h4",{className:"as-subheader as-font--medium"},u),a.default.createElement("p",{className:"as-body"},l)),a.default.createElement("div",{className:"as-p--8"},a.default.createElement("label",{className:"fileContainer"},a.default.createElement("i",{className:"as-icon as-icon-arrow-up"}," "),r?"  "+r:"  Import",a.default.createElement("input",{type:"file",name:"selectedFile",onChange:this.onChange}))),a.default.createElement("div",{className:"as-p--8"},a.default.createElement("button",{type:"submit",className:"as-btn as-btn--secondary"},!0===i?a.default.createElement("span",{class:"as-loading as-loading--s"}," ",a.default.createElement("svg",{viewBox:"0 0 50 50"}," ",a.default.createElement("circle",{cx:"25",cy:"25",r:"20",fill:"none"})," ")," "):"Submit")))),c)}}]),t}();t.default=(0,s.connect)(function(e){return{client:e.client,map:e.map,layers:e.layers,viewport:e.viewport,boundingbox:e.boundingbox}},function(e){return{addLayer:function(t){return e((0,u.addLayer)(t))}}})(d)},function(e,t,n){"use strict";var r=n(7),i=n(35),o=n(90),a=n(19);function s(e){var t=new o(e),n=i(o.prototype.request,t);return r.extend(n,o.prototype,t),r.extend(n,t),n}var u=s(a);u.Axios=o,u.create=function(e){return s(r.merge(a,e))},u.Cancel=n(39),u.CancelToken=n(103),u.isCancel=n(38),u.all=function(e){return Promise.all(e)},u.spread=n(104),e.exports=u,e.exports.default=u},function(e,t){
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},function(e,t,n){"use strict";var r=n(19),i=n(7),o=n(98),a=n(99);function s(e){this.defaults=e,this.interceptors={request:new o,response:new o}}s.prototype.request=function(e){"string"==typeof e&&(e=i.merge({url:arguments[0]},arguments[1])),(e=i.merge(r,{method:"get"},this.defaults,e)).method=e.method.toLowerCase();var t=[a,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},i.forEach(["delete","get","head","options"],function(e){s.prototype[e]=function(t,n){return this.request(i.merge(n||{},{method:e,url:t}))}}),i.forEach(["post","put","patch"],function(e){s.prototype[e]=function(t,n,r){return this.request(i.merge(r||{},{method:e,url:t,data:n}))}}),e.exports=s},function(e,t,n){"use strict";var r=n(7);e.exports=function(e,t){r.forEach(e,function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])})}},function(e,t,n){"use strict";var r=n(37);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e}},function(e,t,n){"use strict";var r=n(7);function i(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(r.isURLSearchParams(t))o=t.toString();else{var a=[];r.forEach(t,function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),a.push(i(t)+"="+i(e))}))}),o=a.join("&")}return o&&(e+=(-1===e.indexOf("?")?"?":"&")+o),e}},function(e,t,n){"use strict";var r=n(7),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,a={};return e?(r.forEach(e.split("\n"),function(e){if(o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t){if(a[t]&&i.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([n]):a[t]?a[t]+", "+n:n}}),a):a}},function(e,t,n){"use strict";var r=n(7);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},function(e,t,n){"use strict";var r=n(7);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,o,a){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";var r=n(7);function i(){this.handlers=[]}i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=i},function(e,t,n){"use strict";var r=n(7),i=n(100),o=n(38),a=n(19),s=n(101),u=n(102);function l(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return l(e),e.baseURL&&!s(e.url)&&(e.url=u(e.baseURL,e.url)),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),r.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||a.adapter)(e).then(function(t){return l(e),t.data=i(t.data,t.headers,e.transformResponse),t},function(t){return o(t)||(l(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,n){"use strict";var r=n(7);e.exports=function(e,t,n){return r.forEach(n,function(n){e=n(e,t)}),e}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var r=n(39);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new r(e),t(n.reason))})}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i(function(t){e=t}),cancel:e}},e.exports=i},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(1),o=(r=i)&&r.__esModule?r:{default:r},a=n(2);n(120);t.default=(0,a.connect)(function(e){return{client:e.client,map:e.map,layers:e.layers,viewport:e.viewport,boundingbox:e.boundingbox}})(function(e){e.query,e.map,e.useMapBounds,e.useLimit,e.viewport,e.headers;var t=(0,i.useRef)(null);return(0,i.useEffect)(function(){t.current.options=[{text:"All",value:"all"},{text:"Open",value:"open"},{text:"Unfulfilled",value:"unfulfilled"},{text:"Unpaid",value:"unpaid"}],t.current.defaultText="Dropdown",t.current.showClearButton=!0},[]),o.default.createElement("div",{className:"as-p--16"},o.default.createElement("as-dropdown",{ref:t,options:[{text:"All",value:"all"},{text:"Open",value:"open"},{text:"Unfulfilled",value:"unfulfilled"},{text:"Unpaid",value:"unpaid"}],"default-text":"Dropdown","can-clear":!0}))})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),o=u(i),a=n(2),s=(u(n(0)),u(n(6)));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={data:0,value:null,filter:null},l(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),r(t,[{key:"componentDidMount",value:function(){this.setupEvents()}},{key:"setupEvents",value:function(){var e=this,t=this.props.id,n=document.getElementById(t),r=null;n.onkeyup=function(t){clearTimeout(r),r=setTimeout(function(){var t=n.value,r="%("+t.toLowerCase()+"|"+t.toUpperCase()+"|"+t+")%";e.setState({value:r}),e.setUpFilter()},500)}}},{key:"createFilter",value:function(){var e=new s.default.filter.Category(this.props.column,{similarTo:this.state.value});this.props.layer.addFilter(e),this.setState({filter:e})}},{key:"updateFilter",value:function(){var e=this.state.filter;this.props.layer.removeFilter(e),this.createFilter()}},{key:"setUpFilter",value:function(){var e=this.state,t=e.filter;e.value;t?this.updateFilter():this.createFilter()}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.description,r=e.id;return o.default.createElement("div",{className:"as-p--16"},o.default.createElement("h4",{className:"as-subheader as-font--medium"},t),o.default.createElement("p",{className:"as-body"},n),o.default.createElement("input",{className:"as-input",id:r,type:"text",placeholder:this.props.placeholder}))}}]),t}();t.default=(0,a.connect)(function(e){return{client:e.client,map:e.map,layers:e.layers,viewport:e.viewport,boundingbox:e.boundingbox}},function(e){return{}})(c)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),s=(r=a)&&r.__esModule?r:{default:r},u=(n(5),n(2));n(120);var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=i({},e),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.id;e.required;return s.default.createElement("div",{className:"as-p--16"},s.default.createElement("input",{className:"as-input",id:t,type:"text",placeholder:this.props.placeholder}))}}]),t}();t.default=(0,u.connect)(function(e){return{client:e.client,map:e.map,filters:e.filters,layers:e.layers,viewport:e.viewport,boundingbox:e.boundingbox}},function(e){return{}})(l)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),a=h(o),s=(n(5),n(2)),u=n(9),l=h(n(6));n(120);var c=h(n(18)),p=h(n(109));function h(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=r({},e),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),i(t,[{key:"render",value:function(){var e="as-map-footer "+this.props.background;return a.default.createElement("footer",{className:e,"data-name":this.props.name},a.default.createElement("div",{className:"as-box"},a.default.createElement(c.default,{title:"Total Damage",description:"Maximum total damage in USD for accidents in view",round:!1,currency:!0,locale:"es-ES",currencyType:"EUR",layer:this.props.layers.railaccidents.source,column:"total_damage",operation:l.default.operation.MAX})),a.default.createElement("div",{className:"as-box--scroll"},a.default.createElement(p.default,{query:"SELECT railroad, weather, total_damage, temp FROM rail_accidents",useMapBounds:!0,useLimit:20,headers:["Railroad","Weather","Damage","Temprature"]})))}}]),t}();t.default=(0,s.connect)(function(e){return{client:e.client,map:e.map,layers:e.layers,viewport:e.viewport,boundingbox:e.boundingbox}},function(e){return{setNeighbourhoods:function(t){return e((0,u.setNeighbourhoods)(t))}}})(f)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=n(1),o=l(i);n(120);var a=l(n(11)),s=l(n(34)),u=n(2);function l(e){return e&&e.__esModule?e:{default:e}}var c=a.default.SQL_API_URL,p=a.default.API_KEY,h=(a.default.USERNAME,s.default.create({method:"get",url:c,params:{api_key:p}}));t.default=(0,u.connect)(function(e){return{client:e.client,map:e.map,layers:e.layers,viewport:e.viewport,boundingbox:e.boundingbox}})(function(e){var t=e.query,n=e.map,a=e.useMapBounds,s=e.useLimit,u=e.viewport,l=e.headers,c=(0,i.useState)(null),p=r(c,2),f=p[0],d=p[1],m=(0,i.useState)([]),_=r(m,2),y=_[0],v=_[1],g=void 0,b=void 0;n&&(b="WHERE the_geom @\n        ST_MakeEnvelope(\n        "+(g=n.getBounds())._northEast.lng+",\n        "+g._northEast.lat+",\n        "+g._southWest.lng+",\n        "+g._southWest.lat+",\n        4326\n        )");var x=t;!1!==a&&!1===s?x=t+" "+b:!1===a&&!1!==s?x=t+" LIMIT "+s:!1!==a&&!1!==s&&(x=t+" "+b+" LIMIT "+s),(0,i.useEffect)(function(){h.request({params:{q:x}}).then(function(e){d(e.data.rows),v(Object.keys(e.data.fields))}).catch(function(e){console.log(e)})},[u]);var w=void 0,E=void 0;return f&&(E=l.map(function(e){return o.default.createElement("th",null,e)}),w=f.map(function(e,t){return o.default.createElement("tr",{key:t},y.map(function(t){return o.default.createElement("td",{key:t},e[t])}))}),console.log(w)),o.default.createElement("div",{className:"as-p--16"},o.default.createElement("table",{className:"as-table"},o.default.createElement("thead",null,o.default.createElement("tr",{key:0},E)),o.default.createElement("tbody",null,w)))})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),a=c(o),s=(n(5),n(2)),u=c(n(10)),l=c(n(111));function c(e){return e&&e.__esModule?e:{default:e}}n(120);var p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={position:null},n.state=r({},e),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),i(t,[{key:"componentDidMount",value:function(){var e="as-panel as-panel--"+this.props.horizontal+" as-panel--"+this.props.vertical;this.setState({position:e})}},{key:"render",value:function(){var e="as-panel__element as-p--32 "+this.props.background;return a.default.createElement("div",{className:"as-map-panels","data-name":this.props.name},a.default.createElement("div",{className:this.state.position},a.default.createElement("div",{className:e},a.default.createElement(u.default,{layer:this.props.layers.railaccidents}),a.default.createElement(l.default,{layer:this.props.layers.railaccidents,name:"Change Points Style",cartocss:"#layer {\n      marker-width: ramp([equipment_damage], range(2, 20), quantiles(5));\n      marker-fill: #4d78ee;\n      marker-fill-opacity: 0.3;\n      marker-allow-overlap: true;\n      marker-line-width: 1;\n      marker-line-color: #FFFFFF;\n      marker-line-opacity: 1;\n      marker-comp-op: screen;\n    }"}))))}}]),t}();t.default=(0,s.connect)(function(e){return{client:e.client,map:e.map,layers:e.layers,viewport:e.viewport,boundingbox:e.boundingbox}},function(e){return{setNeighbourhoods:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(t){return e(setNeighbourhoods(t))})}})(p)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),o=s(i),a=n(2);s(n(0)),s(n(6)),n(9);function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n(120);var l=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={checked:!1},u(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),r(t,[{key:"componentDidMount",value:function(){this.setupConfig(),this.setupChecked()}},{key:"setupConfig",value:function(){var e=this.state.checked;this.widget.checked=e}},{key:"setupChecked",value:function(){var e=this,t=this.props.layers.railaccidents.cartocss;this.widget.addEventListener("change",function(n){e.setState({checked:n.detail}),!0===n.detail?e.props.layers.railaccidents.style.setContent(e.props.cartocss):!1===n.detail&&e.props.layers.railaccidents.style.setContent(t)})}},{key:"render",value:function(){var e=this;return o.default.createElement("div",null,o.default.createElement("span",{className:"as-display--block"},o.default.createElement("p",{className:"as-body"},o.default.createElement("i",{"aria-hidden":!0,className:"as-icon-pencil"})," ",this.props.name)),o.default.createElement("span",{className:"as-display--block"},o.default.createElement("as-switch",{ref:function(t){e.widget=t}})))}}]),t}();t.default=(0,a.connect)(function(e){return{client:e.client,map:e.map,filters:e.filters,layers:e.layers,viewport:e.viewport,boundingbox:e.boundingbox}},function(e){return{}})(l)},function(e,t,n){"use strict";n.r(t);var r=n(40);for(var i in r)"default"!==i&&function(e){n.d(t,e,function(){return r[e]})}(i)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(1),o=(r=i)&&r.__esModule?r:{default:r},a=n(41);t.default=function(){return o.default.createElement("div",null,"404 - ",o.default.createElement(a.Link,{to:"/"},"Go home"))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(22),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(115)),o=a(n(116));function a(e){return e&&e.__esModule?e:{default:e}}a(n(117)).default;t.default=function(){return(0,r.createStore)((0,r.combineReducers)(i),(0,r.applyMiddleware)(o.default))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.layers=t.boundingbox=t.viewport=t.map=t.client=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=l(n(6)),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(9)),s=l(n(11)),u=(l(n(17)),l(n(32)));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=new o.default.Client({apiKey:s.default.API_KEY,username:s.default.USERNAME}),h=(t.client=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;arguments[1];return e},t.map=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments[1];switch(t.type){case a.SET_MAP:return t.map;default:return e}},{center:s.default.CENTER,zoom:s.default.ZOOM,bbox:""}),f=(t.viewport=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments[1];switch(t.type){case a.CHANGE_VIEWPORT:return t.viewport;default:return e}},t.boundingbox=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments[1];switch(t.type){case a.CHANGE_CARTO_BOUNDINGBOX:return t.boundingbox;default:return e}},Object.keys(u.default).reduce(function(e,t){var n=u.default[t],r=n.options,a=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(n,["options"]),s=new o.default.source.SQL(a.query),l=new o.default.style.CartoCSS(a.cartocss),p=new o.default.layer.Layer(s,l,r);return i({},e,c({},t,i({source:s,style:l,layer:p},a)))},{}));t.layers=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments[1];switch(t.type){case a.STORE_LAYERS:return console.log(t.layers),t.layers;case a.ADD_LAYER:console.log(t.layer),console.log(r(t.layer));var n=t.layer;return i({},e,n);case a.TOGGLE_LAYER:var o=e[t.name];return o.visible?o.layer.hide():o.layer.show(),i({},e,c({},t.name,i({},o,{visible:!o.visible})));default:return e}}},function(e,t,n){(function(e){!function(t){"use strict";function n(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function r(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function i(e,t,n){i.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0}),Object.defineProperty(this,"rhs",{value:n,enumerable:!0})}function o(e,t){o.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function a(e,t){a.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function s(e,t,n){s.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:t,enumerable:!0}),Object.defineProperty(this,"item",{value:n,enumerable:!0})}function u(e,t,n){var r=e.slice((n||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,r),e}function l(e){var t=void 0===e?"undefined":E(e);return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":"function"==typeof e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function c(e,t,n,r,p,h,f){f=f||[];var d=(p=p||[]).slice(0);if(void 0!==h){if(r){if("function"==typeof r&&r(d,h))return;if("object"===(void 0===r?"undefined":E(r))){if(r.prefilter&&r.prefilter(d,h))return;if(r.normalize){var m=r.normalize(d,h,e,t);m&&(e=m[0],t=m[1])}}}d.push(h)}"regexp"===l(e)&&"regexp"===l(t)&&(e=e.toString(),t=t.toString());var _=void 0===e?"undefined":E(e),y=void 0===t?"undefined":E(t),v="undefined"!==_||f&&f[f.length-1].lhs&&f[f.length-1].lhs.hasOwnProperty(h),g="undefined"!==y||f&&f[f.length-1].rhs&&f[f.length-1].rhs.hasOwnProperty(h);if(!v&&g)n(new o(d,t));else if(!g&&v)n(new a(d,e));else if(l(e)!==l(t))n(new i(d,e,t));else if("date"===l(e)&&e-t!=0)n(new i(d,e,t));else if("object"===_&&null!==e&&null!==t)if(f.filter(function(t){return t.lhs===e}).length)e!==t&&n(new i(d,e,t));else{if(f.push({lhs:e,rhs:t}),Array.isArray(e)){var b;for(e.length,b=0;b<e.length;b++)b>=t.length?n(new s(d,b,new a(void 0,e[b]))):c(e[b],t[b],n,r,d,b,f);for(;b<t.length;)n(new s(d,b,new o(void 0,t[b++])))}else{var x=Object.keys(e),w=Object.keys(t);x.forEach(function(i,o){var a=w.indexOf(i);a>=0?(c(e[i],t[i],n,r,d,i,f),w=u(w,a)):c(e[i],void 0,n,r,d,i,f)}),w.forEach(function(e){c(void 0,t[e],n,r,d,e,f)})}f.length=f.length-1}else e!==t&&("number"===_&&isNaN(e)&&isNaN(t)||n(new i(d,e,t)))}function p(e,t,n,r){return r=r||[],c(e,t,function(e){e&&r.push(e)},n),r.length?r:void 0}function h(e,t,n){if(e&&t&&n&&n.kind){for(var r=e,i=-1,o=n.path?n.path.length-1:0;++i<o;)void 0===r[n.path[i]]&&(r[n.path[i]]="number"==typeof n.path[i]?[]:{}),r=r[n.path[i]];switch(n.kind){case"A":!function e(t,n,r){if(r.path&&r.path.length){var i,o=t[n],a=r.path.length-1;for(i=0;i<a;i++)o=o[r.path[i]];switch(r.kind){case"A":e(o[r.path[i]],r.index,r.item);break;case"D":delete o[r.path[i]];break;case"E":case"N":o[r.path[i]]=r.rhs}}else switch(r.kind){case"A":e(t[n],r.index,r.item);break;case"D":t=u(t,n);break;case"E":case"N":t[n]=r.rhs}return t}(n.path?r[n.path[i]]:r,n.index,n.item);break;case"D":delete r[n.path[i]];break;case"E":case"N":r[n.path[i]]=n.rhs}}}function f(e){return"color: "+C[e].color+"; font-weight: bold"}function d(e,t,n,r){var i=p(e,t);try{r?n.groupCollapsed("diff"):n.group("diff")}catch(e){n.log("diff")}i?i.forEach(function(e){var t=e.kind,r=function(e){var t=e.kind,n=e.path,r=e.lhs,i=e.rhs,o=e.index,a=e.item;switch(t){case"E":return[n.join("."),r,"",i];case"N":return[n.join("."),i];case"D":return[n.join(".")];case"A":return[n.join(".")+"["+o+"]",a];default:return[]}}(e);n.log.apply(n,["%c "+C[t].text,f(t)].concat(T(r)))}):n.log(" no diff ");try{n.groupEnd()}catch(e){n.log(" diff end  ")}}function m(e,t,n,r){switch(void 0===e?"undefined":E(e)){case"object":return"function"==typeof e[r]?e[r].apply(e,T(n)):e[r];case"function":return e(t);default:return e}}function _(e,t){var n=t.logger,r=t.actionTransformer,i=t.titleFormatter,o=void 0===i?function(e){var t=e.timestamp,n=e.duration;return function(e,r,i){var o=["action"];return o.push("%c"+String(e.type)),t&&o.push("%c@ "+r),n&&o.push("%c(in "+i.toFixed(2)+" ms)"),o.join(" ")}}(t):i,a=t.collapsed,s=t.colors,u=t.level,l=t.diff,c=void 0===t.titleFormatter;e.forEach(function(i,p){var h=i.started,f=i.startedTime,_=i.action,y=i.prevState,v=i.error,g=i.took,b=i.nextState,w=e[p+1];w&&(b=w.prevState,g=w.started-h);var E=r(_),T="function"==typeof a?a(function(){return b},_,i):a,k=x(f),C=s.title?"color: "+s.title(E)+";":"",M=["color: gray; font-weight: lighter;"];M.push(C),t.timestamp&&M.push("color: gray; font-weight: lighter;"),t.duration&&M.push("color: gray; font-weight: lighter;");var P=o(E,k,g);try{T?s.title&&c?n.groupCollapsed.apply(n,["%c "+P].concat(M)):n.groupCollapsed(P):s.title&&c?n.group.apply(n,["%c "+P].concat(M)):n.group(P)}catch(e){n.log(P)}var A=m(u,E,[y],"prevState"),S=m(u,E,[E],"action"),O=m(u,E,[v,y],"error"),I=m(u,E,[b],"nextState");if(A)if(s.prevState){var R="color: "+s.prevState(y)+"; font-weight: bold";n[A]("%c prev state",R,y)}else n[A]("prev state",y);if(S)if(s.action){var j="color: "+s.action(E)+"; font-weight: bold";n[S]("%c action    ",j,E)}else n[S]("action    ",E);if(v&&O)if(s.error){var L="color: "+s.error(v,y)+"; font-weight: bold;";n[O]("%c error     ",L,v)}else n[O]("error     ",v);if(I)if(s.nextState){var z="color: "+s.nextState(b)+"; font-weight: bold";n[I]("%c next state",z,b)}else n[I]("next state",b);l&&d(y,b,n,T);try{n.groupEnd()}catch(e){n.log(" log end ")}})}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},M,e),n=t.logger,r=t.stateTransformer,i=t.errorTransformer,o=t.predicate,a=t.logErrors,s=t.diffPredicate;if(void 0===n)return function(){return function(e){return function(t){return e(t)}}};if(e.getState&&e.dispatch)return console.error("[redux-logger] redux-logger not installed. Make sure to pass logger instance as middleware:\n// Logger with default options\nimport { logger } from 'redux-logger'\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n// Or you can create your own logger with custom options http://bit.ly/redux-logger-options\nimport createLogger from 'redux-logger'\nconst logger = createLogger({\n  // ...options\n});\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n"),function(){return function(e){return function(t){return e(t)}}};var u=[];return function(e){var n=e.getState;return function(e){return function(l){if("function"==typeof o&&!o(n,l))return e(l);var c={};u.push(c),c.started=w.now(),c.startedTime=new Date,c.prevState=r(n()),c.action=l;var p=void 0;if(a)try{p=e(l)}catch(e){c.error=i(e)}else p=e(l);c.took=w.now()-c.started,c.nextState=r(n());var h=t.diff&&"function"==typeof s?s(n,l):t.diff;if(_(u,Object.assign({},t,{diff:h})),u.length=0,c.error)throw c.error;return p}}}}var v,g,b=function(e,t){return function(e,t){return new Array(t+1).join(e)}("0",t-e.toString().length)+e},x=function(e){return b(e.getHours(),2)+":"+b(e.getMinutes(),2)+":"+b(e.getSeconds(),2)+"."+b(e.getMilliseconds(),3)},w="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance:Date,E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},k=[];v="object"===(void 0===e?"undefined":E(e))&&e?e:"undefined"!=typeof window?window:{},(g=v.DeepDiff)&&k.push(function(){void 0!==g&&v.DeepDiff===p&&(v.DeepDiff=g,g=void 0)}),n(i,r),n(o,r),n(a,r),n(s,r),Object.defineProperties(p,{diff:{value:p,enumerable:!0},observableDiff:{value:c,enumerable:!0},applyDiff:{value:function(e,t,n){e&&t&&c(e,t,function(r){n&&!n(e,t,r)||h(e,t,r)})},enumerable:!0},applyChange:{value:h,enumerable:!0},revertChange:{value:function(e,t,n){if(e&&t&&n&&n.kind){var r,i,o=e;for(i=n.path.length-1,r=0;r<i;r++)void 0===o[n.path[r]]&&(o[n.path[r]]={}),o=o[n.path[r]];switch(n.kind){case"A":!function e(t,n,r){if(r.path&&r.path.length){var i,o=t[n],a=r.path.length-1;for(i=0;i<a;i++)o=o[r.path[i]];switch(r.kind){case"A":e(o[r.path[i]],r.index,r.item);break;case"D":case"E":o[r.path[i]]=r.lhs;break;case"N":delete o[r.path[i]]}}else switch(r.kind){case"A":e(t[n],r.index,r.item);break;case"D":case"E":t[n]=r.lhs;break;case"N":t=u(t,n)}return t}(o[n.path[r]],n.index,n.item);break;case"D":case"E":o[n.path[r]]=n.lhs;break;case"N":delete o[n.path[r]]}}},enumerable:!0},isConflict:{value:function(){return void 0!==g},enumerable:!0},noConflict:{value:function(){return k&&(k.forEach(function(e){e()}),k=null),p},enumerable:!0}});var C={E:{color:"#2196F3",text:"CHANGED:"},N:{color:"#4CAF50",text:"ADDED:"},D:{color:"#F44336",text:"DELETED:"},A:{color:"#2196F3",text:"ARRAY:"}},M={level:"log",logger:console,logErrors:!0,collapsed:void 0,predicate:void 0,duration:!1,timestamp:!0,stateTransformer:function(e){return e},actionTransformer:function(e){return e},errorTransformer:function(e){return e},colors:{title:function(){return"inherit"},prevState:function(){return"#9E9E9E"},action:function(){return"#03A9F4"},nextState:function(){return"#4CAF50"},error:function(){return"#F20404"}},diff:!1,diffPredicate:void 0,transformer:void 0},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dispatch,n=e.getState;return"function"==typeof t||"function"==typeof n?y()({dispatch:t,getState:n}):void console.error("\n[redux-logger v3] BREAKING CHANGE\n[redux-logger v3] Since 3.0.0 redux-logger exports by default logger with default settings.\n[redux-logger v3] Change\n[redux-logger v3] import createLogger from 'redux-logger'\n[redux-logger v3] to\n[redux-logger v3] import { createLogger } from 'redux-logger'\n")};t.defaults=M,t.createLogger=y,t.logger=P,t.default=P,Object.defineProperty(t,"__esModule",{value:!0})}(t)}).call(this,n(14))},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(118),o=(r=i)&&r.__esModule?r:{default:r};t.default=(0,o.default)("local")},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){var t=(0,o.default)(e);return{getItem:function(e){return new Promise(function(n,r){n(t.getItem(e))})},setItem:function(e,n){return new Promise(function(r,i){r(t.setItem(e,n))})},removeItem:function(e){return new Promise(function(n,r){n(t.removeItem(e))})}}};var r,i=n(119),o=(r=i)&&r.__esModule?r:{default:r}},function(e,t,n){"use strict";t.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(){}t.default=function(e){var t=e+"Storage";return function(e){if("object"!==("undefined"==typeof self?"undefined":r(self))||!(e in self))return!1;try{var t=self[e],n="redux-persist "+e+" test";t.setItem(n,"test"),t.getItem(n),t.removeItem(n)}catch(e){return!1}return!0}(t)?self[t]:o};var o={getItem:i,setItem:i,removeItem:i}},function(e,t){},,function(e,t){},function(e,t){}]);
//# sourceMappingURL=bundle.js.map